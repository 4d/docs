---
id: restaurar
title: Restaurar
---

4D lhe permite restaurar conjuntos inteiros de dados de um banco de dados no caso de que se apresente um incidente, independentemente da causa do mesmo. Podem ocorrer dois tipos principais de incidentes:

- A parada inesperada do banco enquanto estiver em uso. Esse incidente pode ocorrer por causa de uma falha de energia, erro em um elemento do sistema, etc. Nesse caso, dependendo do estado atual da cache de dados no momento do incidente, a restauração do banco de dados pode requerer diferentes operações:
    - Se a cache estiver vazia, o banco de dados abre normalmente. Quaisquer mudanças feitas no banco de dados foram registradas. Este caso não exige nenhuma operação particular
    - If the cache contains operations, the data file is intact but it requires integrating the current log file.
    - If the cache was in the process of being written, the data file is probably damaged. The last backup must be restored and the current log file must be integrated.

- A perda de um ou mais arquivos do banco de dados. Esse incidente poderia produzir por setores defeituosos no disco que contenham o banco de dados, um vírus, um erro de manipulação, etc. The last backup must be restored and then the current log file must be integrated. Para saber se um banco de dados foi danificado depois de um incidente, basta relançar o banco de dados com 4D. The program performs a self-check and details the necessary restore operations to perform. In automatic mode, these operations are performed directly without any intervention on the part of the user. Se usar uma estratégia de backup regulares, as ferramentas de restauração de 4D permite recuperar (na maioria dos casos) o banco de dados na mesma situação que estava antes do incidente.

> 4D pode lançar procedimentos automaticamente para recuperar os bancos de dados depois de um incidente. Estes mecanismos são gerenciados mediante duas opções disponíveis na página **Backup/Backup e Restauração** das Propriedades do banco de dados. Para mais informações, veja o parágrafo [Restauração Automatica ](settings.md#automatic-restore).  
> Se o incidente for resultado de uma operação inadequada realizadas nos dados (eliminação de um registro, por exemplo) pode tentar reparar o banco de dados usando a função "rollback" do arquivo de histórico. This function is available on the [Rollback](MSC/rollback.md) page of the MSC.


## Manually restoring a backup (standard dialog)

You can restore the contents of an archive generated by the backup module manually. A manual restore may be necessary, for instance, in order to restore the full contents of an archive (project files and enclosed attached files), or for the purpose of carrying out searches among the archives. The manual restore can also be performed along with the integration of the current log file.

The manual restore of backups can be carried out either via the standard Open document dialog box, or via the [Restore](MSC/restore) page of the MSC. Restoring via the MSC provides more options and allows the archive contents to be previewed. Por outro lado, só podem ser restaurados os arquivos associados ao banco de dados aberto.

Para restaurar um banco de dados manualmente via uma caixa de diálogo padrão:

1. Choose **Restore...** in the 4D application **File** menu. Não é obrigatório que um banco de dados seja aberto. OU execute o comando `RESTORE` desde um método 4D. A standard Open file dialog box appears.
2. Select a backup file (.4bk) or a log backup file (.4bl) to be restored and click **Open**. A dialog box appears, which allows you to specify the location where files will be restored. By default, 4D restores the files in a folder named *Archivename* (no extension) located next to the archive. You can display the path:

![](assets/en/Backup/backup07.png)

You can also click on the **[...]** button to specify a different location.
3. Click on the **Restore** button. 4D extracts all backup files from the specified location. If the current log file or a log backup file with the same number as the backup file is stored in the same folder, 4D examines its contents. If it contains operations not present in the data file, the program asks you if you want to integrate these operations. Integration is done automatically if the **Integrate last log file...** option is checked (see [Automatic Restore](settings.md#automatic-restore)). 4.(Opcional) Clique em **OK** para integrar o arquivo de histórico no banco de dados restaurado. If the restore and integration were carried out correctly, 4D displays a dialog box indicating that the operation was successful.
5. Click **OK**. The destination folder is displayed. During the restore, 4D places all backup files in this folder, regardless of the position of the original files on the disk when the backup starts. This way your files will be easier to find.

## Manually restoring a backup (MSC)

Pode restaurar manualmente um arquivo do banco de dados atual utilizando a página [Restauração](MSC/restore.md) do Centro de Manutenção e Segurança (CMS).


## Manually integrating the log

Se não tiver marcado a opção de integração automática de arquivo de histórico na página Restaurar do CSM (ver [Integração sucessiva de vários arquivos de histórico](MSC/restore.md#successive-intergration-of-several-data-log-files)), aparece uma caixa de diálogo de advertência durante a abertura do banco quando 4D advertir que o arquivo de histórico conter mais operações do que as que foram realizadas no banco de dados.

![](assets/en/Backup/backup08.png)

> In order for this mechanism to work, 4D must be able to access the log file in its current location.

You can choose whether or not to integrate the current log file. Not integrating the current log file allows you to avoid reproducing errors made in the data.
