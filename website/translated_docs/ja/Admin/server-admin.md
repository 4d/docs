---
id: server-admin
title: 4D Server 管理ウィンドウ
---


Windows または macOS上で、4D Server をインターフェースありで起動すると、グラフィカルな管理ウィンドウが利用でき、公開された 4Dアプリケーション用に多くの解析・制御ツールを提供します。 開いているプロジェクトの 4D Server 管理ウィンドウを表示するには、**ウィンドウ＞管理** メニュー項目を選択するか、**Ctrl+U** を押します。

> 管理ウィンドウはリモートの 4D からもアクセス可能です。 この点についての詳細は、 リモートマシンからの管理を参照ください。


## モニターページ

**モニター** ページには、データベース利用に関する動的な情報のほか、システムや 4D Serverアプリケーションの情報が表示されます。

![](assets/en/Admin/server-admin.png)

> Windows では、このページに表示されるシステム情報の一部は、Windows パフォーマンスアナライザー (WPA) ツールを介して取得されます。 これらのツールは、4D Server を起動したセッションを開いたユーザーが、必要な管理権限を持っている場合にのみアクセスできます。

#### グラフィックエリア

グラフィックエリアでは、複数のパラメーター (CPU使用率、ネットワークトラフィック、およびメモリ) の変化がリアルタイムで表示されます。 ウィンドウの中央にあるメニューから表示する内容を選択します:

![](assets/en/Admin/server-graphic.png)

- **CPU使用率**: すべてのアプリケーションによるマシンの全体的な CPU使用率。 この使用率のうちの 4D Server による使用分は、"プロセッサー" 情報エリアで提供されます。
- **ネットワーク**: マシン (サーバーまたはクライアント) が 1秒あたりに受信したバイト数。 送信バイト数は "ネットワーク" 情報エリアで提供されます。
- **物理メモリ**: 4D Server が使用する、マシンの RAM の量。 メモリの利用に関するより詳細な情報は "メモリ" 情報エリアで提供されます。
- **仮想メモリ**: 4D Server アプリケーションが使用する仮想メモリの量。 このメモリは、アプリケーションのニーズに応じてシステムにより割り当てられます。 エリアの右下に表示される値は、現在使用されているメモリ量を示します。 左上に表示される値は、利用可能な仮想メモリの最大値を示します。 最大値は、アプリケーションの一般メモリ設定に基づき動的に計算されます。
- **キャッシュ**: 4D Server アプリケーションが使用するキャッシュメモリの量。 エリアの右下に表示される値は、現在使用されているメモリ量を示します。 左上に表示される値は、ストラクチャー設定にて指定されたキャッシュメモリの合計サイズを示します。

このオプションが選択されている場合、キャッシュの有効な解析をおこなうために長めの観測時間が必要となるため、グラフエリアのスクロールは遅くなります。


#### 概要エリア

"概要" エリアでは、システム、アプリケーション、そして 4D Server マシンにインストールされたライセンスに関する様々な情報が提供されます。

- **システム情報**: サーバーのマシン、システムおよび IPアドレス
- **アプリケーション情報**: 4D Server の内部バージョン番号およびボリュームシャドウコピーステータス
- **最大接続数**: サーバータイプ毎に可能な同時接続数
- **ライセンス**: ライセンスの詳細。 プロダクトライセンス、あるいは付随エクスパンションのいずれかが 10日以内に失効するとき (例: サブスクリプション型ライセンスなど)、4D Server は自動的にそのライセンスを 4Dユーザーアカウントから更新しようとします。 この場合、なんらかの理由 (接続エラー、無効なアカウント状態、契約が延長されていないなど) で自動更新が失敗した場合、サーバー管理者に警告を伝えるアイコンがライセンスの隣に表示されます。 エリア上にマウスをホバーさせると、ライセンス更新状態についての追加の情報が tips として表示されます:

![](assets/en/Admin/server-licence-failed.png)

こういった場合には通常、[**ライセンスマネージャー**](licenses.md) をチェックする必要があります。

#### 詳細エリア

"詳細" エリアは、すでにグラフィックエリアで表示されている情報の一部と、追加の情報を提供します。

- **ハードディスク**: ハードディスク全体、およびデータベースデータ ( データファイルとインデックスファイル) の使用スペース、他のファイルの使用スペース、空きスペースなどを表示します。
- **メモリ**: マシンにインストールされた RAMメモリ、4D Server による使用量、他のアプリケーションによる使用量、および空き容量。 4D Server が使用するメモリはグラフィックエリアにも動的に表示できます。
- **プロセッサー**: 4D Server と他のアプリケーションによる、プロセッサーの使用率。 この使用率は絶えず再計算されます。 4D Server による使用率はグラフィックエリアにも動的に表示できます。
- **ネットワーク**: マシン (サーバーまたはクライアント) が受信および送信したその瞬間のバイト数。 この値は絶えず更新されます。 受信したバイト数はグラフィックエリアにも動的に表示できます。


## ユーザーページ

**ユーザー** ページには、サーバーに接続しているユーザーが表示されます:


![](assets/en/Admin/server-users.png)

"ユーザー" ボタンには、データベースに接続中のユーザ数が括弧内に表示されます (この番号は、ウィンドウに適用される表示フィルターを考慮しません)。 このページには、動的な検索エリアやコントロールボタンもあります。 ヘッダーエリアをドラッグ＆ドロップして、列の順番を入れ替えることができます。

また、ヘッダーをクリックすると、リストの値が並べ替えられます。 クリックするごとに昇順/降順が入れ替わります。

![](assets/en/Admin/server-users-sort.png)

### ユーザーリスト

サーバーに接続したユーザーごとに、以下の情報がリストに表示されます:

- システム: クライアントマシンのシステム (macOS/Windows)。
- **4Dユーザー**: 4Dユーザー名、またはユーザーマシン上で [`SET USER ALIAS`](https://doc.4d.com/4dv19/help/command/ja/page1666.html) コマンドで設定されていればエイリアス。 パスワードシステムが有効になっていない場合、かつエイリアスも設定されていなければ、すべてのユーザーは "Designer" となります。
- **マシン名**: リモートマシンの名前。
- **セッション名**: リモートマシン上で開かれたセッション名。
- **IP アドレス**: リモートマシンの IPアドレス。
- **ログイン日**: リモートマシンが接続した日付と時刻。
- **CPU時間**: 接続してからこのユーザーが消費した CPU の時間
- **Activity**: 4D Server がこのユーザーのために使用する時間の割合 (動的表示)。 リモートマシンがスリープモードに切り替わっている場合には "スリープ中" と表示 (以下参照)。

#### スリープ中ユーザーの管理

4D Server は、サーバーマシンへのアクセスがアクティブである間にスリープモードへと切り替わってしまった 4Dリモートアプリケーションを実行しているマシンについて、特別な管理をします。 この場合、接続されている 4Dリモートアプリケーションはこの急な切断を 4D Server へと自動的に知らせます。 サーバー側では、接続しているユーザーのアクティビティステータスを **スリープ中** へと変更されます:

![](assets/en/Admin/server-sleeping.png)

このステータスはサーバー側のリソースを一部解放します。 これに加え、4Dリモートアプリケーションはスリープモードから復帰したときに自動的に 4D Server へと再接続します。

サポートされるシナリオは、以下の様なものです: たとえばお昼休みなどでリモートユーザーが作業を中断するも、サーバーとの接続は開いたままにしたとします。 マシンはスリープモードへと切り替わります。 ユーザーが戻ってきてマシンをスリープから復帰させると、4Dリモートアプリケーションは自動的にサーバーへの接続を復元するとともにセッションコンテキストも復元します。

> スリープ状態のリモートセッションは、48時間活動しないとサーバーから自動的に切断されます。 このデフォルトのタイムアウトを変更するには、[`SET DATABASE PARAMETER`](https://doc.4d.com/4dv19/help/command/ja/page642.html) コマンドの `Remote connection sleep timeout` セレクターを使用します。


### 検索/フィルターエリア

この機能を使用して、検索エリアに入力されたテキストに対応する行だけをリストに表示させ、行数を減らすことができます。 エリアには、どの列に対して検索/フィルターが実行されるかが表示されています。 ユーザーページでは、4D ユーザー、マシン名、そしてセッション名です。

エリアにテキストが入力されると、リストはリアルタイムで更新されます。 値をセミコロンで区切ることで、一つ以上の値を使用して検索をおこなうことができます。 この場合 `OR` タイプの演算がおこなわれます。 たとえば、"John;Mary;Peter" と入力すると、John または Mary または Peter が対象となる列にある行のみが表示されます。


### 管理ボタン

このページには 3つのコントロールボタンがあります。 これらのボタンは、最低 1つの行が選択されているときに有効になります。 **Shift**キーを押しながらクリックして連続した行を、あるいは **Ctrl** (Windows) / **Command** (macOS) キーを押しながらクリックして連続しない行を複数選択できます。

#### メッセージ送信

このボタンを使用して、ウィンドウで選択した 4Dユーザーにメッセージを送信できます。 ユーザーが選択されていないと、ボタンを使用できません。 ボタンをクリックするとダイアログボックスが表示され、メッセージを入力できます。 ダイアログにはメッセージを受信するユーザーの数が表示されます:

![](assets/en/Admin/server-message.png)

クライアントマシン上でこのメッセージは警告メッセージとして表示されます。

> [`SEND MESSAGE TO REMOTE USER`](https://doc.4d.com/4dv19/help/command/ja/page1632.html) コマンドを使用することでも、リモートユーザーに対して同じアクションを実行することができます。


#### プロセス監視

このボタンをクリックすると、選択されたユーザーのプロセスを、管理ウィンドウの [**プロセス** ページ](#プロセスページ) に直接表示させることができます。 ボタンをクリックすると、4D Server はプロセスページに移動し、このページの検索/フィルターエリアに選択されたユーザー名を入力します。

#### ユーザーをドロップ

このボタンは、選択したユーザーの接続を強制的に解除するために使用します。 このボタンをクリックすると警告ダイアログが表示され、接続解除を実行するかキャンセルするか選択できます。確認ダイアログなしに選択ユーザーの接続を解除するには、**Alt**キーを押しながら、**ユーザーをドロップ** ボタンをクリックします。

> [`DROP REMOTE USER`](https://doc.4d.com/4dv19/help/command/ja/page1633.html) コマンドを使用することでも、リモートユーザーに対して同じアクションを実行することができます。



## プロセスページ

**プロセス** ページには実行中のプロセスが表示されます。

![](assets/en/Admin/server-admin-process-page.png)


"プロセス" ボタンには、サーバーで実行中のプロセス数が括弧内に表示されます (この番号は、ウィンドウに適用される表示フィルターや **グループ毎にプロセスを表示** オプションのステータスを考慮しません)。

列ヘッダーをドラッグ＆ドロップして、列の順番を入れ替えることができます。 また、ヘッダーをクリックすると、リストの値が並べ替えられます。

ユーザーページと同様にこのページにも、検索欄に入力されたテキストに対応する行だけをリストに表示させ、行数を減らすことができる動的な [検索/フィルターエリア](#検索フィルターエリア) があります。 検索/フィルターはセッションとプロセス名の列に対して実行されます。

ウィンドウに表示されるプロセスを、タイプ毎にフィルターするためのボタンが 3つあります:

![](assets/en/Admin/server-process-buttons.png)

- **ユーザープロセス**: ユーザーセッションにより、またユーザーセッションのために作成されたプロセス。 このプロセスには人のアイコンが表示されます。
- **4D プロセス**: 4D Server エンジンが生成したプロセス。 このプロセスには歯車のアイコンが表示されます。
- **予備プロセス**: 使用されていないが一時的に保持され、いつでも再利用が可能なプロセス。 このメカニズムは 4D Server の反応性を向上させます。 このプロセスには薄暗い人のアイコンが表示されます。

**グループ毎にプロセスを表示** オプションを使用して、4D Server の内部プロセスやクライアントプロセスをグループ化できます。 このオプションをチェックすると:

- 4Dクライアントのプロセス (メインの 4Dクライアントプロセスや 4Dクライアントの基本プロセス。[プロセスタイプ](#プロセスタイプ) 参照) は 1つにグループ化されます。
- "タスクマネージャー" グループが作成され、タスクを分割するための内部プロセス (共有バランサー、ネットセッションマネージャー、Exclusive pool worker) がグループ化されます。
- "クライアントマネージャー" グループが作成され、これにはクライアントのさまざまな内部プロセスが含まれます。

ウィンドウの下段には選択したプロセスの稼働状況がグラフィカルに表示されます。

> **Shift**キーを押しながら連続した行を、**Ctrl** (Windows) / **Command** (macOS) キーを押しながら非連続の行を選択できます。

プロセスの稼働状況は、4D Server がこのプロセスのために使用した時間のパーセンテージです。 ウィンドウにはプロセスごとに以下の情報が表示されます:

- プロセスタイプ (後述)
- セッション/情報:
    - 4Dプロセス - 空白
    - ユーザープロセス - 4Dユーザー名
    - Webプロセス - URLパス
- プロセス名
- プロセス番号 (たとえば [`New process`](https://doc.4d.com/4dv19/help/command/ja/page317.html) 関数で返される値)。 プロセス番号はサーバー上で割り当てられる番号です。 グローバルプロセスの場合、この番号はクライアントマシン上で割り当てられた番号と異なる場合があります。
- プロセスの現在の状況
- 作成されてからのプロセスの実行時間 (秒)
- 4D Server がこのプロセスに使用した時間のパーセンテージ

### プロセスタイプ

プロセスタイプはアイコンで識別できます。 アイコンの色や形に対応するプロセスタイプは以下のとおりです:

| icon                                    | type                                                                        |
| --------------------------------------- | --------------------------------------------------------------------------- |
| ![](assets/en/Admin/server-icon-1.png)  | アプリケーションサーバー                                                                |
| ![](assets/en/Admin/server-icon-2.png)  | SQL サーバー                                                                    |
| ![](assets/en/Admin/server-icon-3.png)  | DB4D サーバー (データベースエンジン)                                                      |
| ![](assets/en/Admin/server-icon-4.png)  | Web サーバー                                                                    |
| ![](assets/en/Admin/server-icon-5.png)  | SOAP サーバー                                                                   |
| ![](assets/en/Admin/server-icon-6.png)  | 保護された 4Dクライアントプロセス (接続された 4D の開発プロセス)                                       |
| ![](assets/en/Admin/server-icon-7.png)  | メイン4Dクライアントプロセス (接続された 4D のメインプロセス。 クライアントマシン上で作成されたプロセスに対応するサーバープロセス)      |
| ![](assets/en/Admin/server-icon-8.png)  | 4Dクライアント基本プロセス (4Dクライアントプロセスと並列なプロセス。 メイン4Dクライアントプロセスをコントロールするプリエンプティブプロセス) |
| ![](assets/en/Admin/server-icon-9.png)  | 予備プロセス (以前または後の "4Dクライアントデータベースプロセス")                                       |
| ![](assets/en/Admin/server-icon-10.png) | SQL サーバーワーカープロセス                                                            |
| ![](assets/en/Admin/server-icon-11.png) | HTTP サーバーワーカープロセス                                                           |
| ![](assets/en/Admin/server-icon-12.png) | 4Dクライアントプロセス (接続された 4D 上で実行中のプロセス)                                          |
| ![](assets/en/Admin/server-icon-13.png) | ストアドプロシージャー (接続された 4D により起動され、サーバー上で実行しているプロセス)                             |
| ![](assets/en/Admin/server-icon-14.png) | Web メソッド (4DACTION などにより起動)                                                 |
| ![](assets/en/Admin/server-icon-15.png) | Web メソッド (プリエンプティブ)                                                         |
| ![](assets/en/Admin/server-icon-16.png) | SOAP メソッド (Webサービスにより起動)                                                    |
| ![](assets/en/Admin/server-icon-17.png) | SOAP メソッド (プリエンプティブ)                                                        |
| ![](assets/en/Admin/server-icon-18.png) | ロガー                                                                         |
| ![](assets/en/Admin/server-icon-19.png) | TCP接続リスナー                                                                   |
| ![](assets/en/Admin/server-icon-20.png) | TCPセッションマネージャー                                                              |
| ![](assets/en/Admin/server-icon-21.png) | その他のプロセス                                                                    |
| ![](assets/en/Admin/server-icon-22.png) | ワーカープロセス (コオペラティブ)                                                          |
| ![](assets/en/Admin/server-icon-23.png) | 4Dクライアントプロセス (プリエンプティブ)                                                     |
| ![](assets/en/Admin/server-icon-24.png) | ストアドプロシージャー (プリエンプティブプロセス)                                                  |
| ![](assets/en/Admin/server-icon-25.png) | ワーカープロセス (プリエンプティブ)                                                         |

> **グループ毎にプロセスを表示** オプションがチェックされていると、それぞれの 4Dクライアントメインプロセスと、その対である 4Dクライアント基本プロセスは一緒にグループ化されて表示されます。


### 管理ボタン

このページには、選択されたプロセスに対して動作する 5つのコントロールボタンがあります。 ユーザープロセスに対してのみ使用できる点に注意してください。

![](assets/en/Admin/server-process-actions.png)

- **プロセスを中断**: 選択したプロセスをアボートします。 このボタンをクリックすると警告ダイアログが表示され、操作を続行またはキャンセルできます。

> 確認ダイアログなしに選択したプロセスをアボートするには、**Alt**キーを押しながらこのボタンをクリックするか、[`ABORT PROCESS BY ID`](https://doc.4d.com/4dv19/help/command/ja/page1634.html) コマンドを使用します。

- **プロセスを一時停止**: 選択したプロセスを一時停止します。
- **プロセスをアクティベート**: 選択したプロセスの実行を再開します。 対象のプロセスは、前述のボタンかプログラムにより一時停止状態でなければなりません。そうでなければ、このボタンは効果ありません。
- **プロセスをデバッグ**: 選択したプロセスのデバッガーをサーバーマシン上で開きます。 このボタンをクリックすると警告ダイアログが表示され、操作を続行またはキャンセルできます。 4Dコードが実際にサーバーマシン上で実行されている場合にのみ、デバッガーウィンドウが表示される点に注意してください (たとえば、トリガーや "サーバー上で実行" 属性を持つメソッドの実行時など)。

> 確認ダイアログなしに選択したプロセスをデバッグするには、**Alt**キーを押しながらこのボタンをクリックします。

- **ユーザーを表示**: 選択されたプロセスのユーザーを管理ウィンドウの [ユーザーページ](#ユーザーページ) に直接表示させることができます。 1つ以上のユーザープロセスが選択されている場合にこのボタンは有効になります。


## メンテナンスページ

**メンテナンス** ページには、アプリケーションの現在の動作状況に関する情報が表示されます。 また、基本的なメンテナンス機能にアクセスすることもできます:

![](assets/en/Admin/server-maintenance.png)


### 最新の検査/圧縮:

このエリアには、データベース上で実行された最新の [データの検査](MSC/verify.md) および [圧縮処理](MSC/compact.md) の日付、時刻、状況が表示されます。

#### レコードとインデックスを検査

このボタンを使用して、サーバーを止めることなく検査処理を直接起動できます。 検証の間、サーバーの動作が遅くなるかもしれないことに留意してください。

データベースのすべてのレコードとすべてのインデックスが検証されます。 検査対象を絞り込んだり、追加のオプションを指定したい場合は、[Maintenance ＆ Security Center](MSC/overview.md) (MSC) を使用します。

検査後、サーバー上の [maintenance Logs](Project/architecture.md#logs) フォルダーに、XML形式でレポートファイルが作成されます。 **レポートを表示** (クライアントマシンから処理が実行された場合は **レポートをダウンロード**) ボタンをクリックすると、ブラウザーにレポートを表示できます。


このエリアには、データベースのデータに対して実行された処理の日付、時刻、状況が表示されます。

#### データ圧縮

このボタンを使用して、データ圧縮処理を直接起動できます。 この処理をおこなうにはサーバーを停止させる必要があります。ボタンをクリックすると、4D Server の終了ダイアログが表示され、終了方法を選択することができます:

![](assets/en/Admin/server-shut.png)

アプリケーションが実際に停止された後、4D Server はデータベースのデータに対する標準の圧縮処理をおこないます。 追加のオプションを指定したい場合は、[Maintenance ＆ Security Center](MSC/overview.md) (MSC) を使用します。

圧縮が終了すると、4D Server は自動でデータベースを再開します。 その後、4Dユーザーの再接続が可能になります。

> 圧縮リクエストがリモートの 4Dマシンからなされた場合、このマシンは 4D Server により自動で再接続されます。

検査後、サーバー上の [maintenance Logs](Project/architecture.md#logs) フォルダーに、XML形式でレポートファイルが作成されます。 **レポートを表示** (クライアントマシンから処理が実行された場合は **レポートをダウンロード**) ボタンをクリックすると、ブラウザーにレポートを表示できます。


### 動作時間

このエリアには、サーバーが開始されてからの稼働時間 (日、時、分) が表示されます。


#### サーバを再起動...

このボタンをクリックするとサーバーを即座に再起動できます。 ボタンをクリックすると、4D Server の終了ダイアログが表示され、終了方法を選択することができます。 再起動後、4D Server は自動でプロジェクトを再度開きます。 その後、4Dユーザーの再接続が可能になります。

> 再起動リクエストがリモートの 4Dマシンからなされた場合、このマシンは 4D Server により自動で再接続されます。

### 前回のバックアップ

このエリアには、データベースの [前回のバックアップ](MSC/backup.md) の日付・時刻と、予定された次のバックアップがあれば、それに関する情報が表示されます。 自動バックアップは、ストラクチャー設定の **スケジューラー** ページで設定します

- **前回のバックアップ**: 前回のバックアップ日時。
- **次回のバックアップ**: 予定された次のバックアップ日時。
- **必要なスペース**: バックアップに必要な計算された空き容量。 バックアップファイルの実際のサイズは (圧縮などの) 設定や、データファイルの変化により変わります。
- **空きスペース**: バックアップボリュームの空き容量。


**バックアップ開始** ボタンを使用して、現在のバックアップパラメーター ( バックアップするファイル、アーカイブの場所、オプションなど) を使用したバックアップを即座に開始できます。 **環境設定...** ボタンをクリックして、これらのパラメーターを確認できます。 サーバー上でのバックアップがおこなわれる間、クライアントマシンはブロックされ (ただし接続解除はされません)、新規のクライアント接続はできなくなります。


### リクエストとデバッグログ

このエリアには、(ログファイルが有効化されている場合に) ログファイルの記録に要した時間が表示され、ログの有効化も管理できます。

ログファイルについては、[**ログファイルの詳細**](debugLogFiles.md) を参照ください。

#### リクエストとデバッグのログを開始/停止

**リクエストとデバッグのログを開始** ボタンでログファイルが開始されます。 これによりフォーマンスが著しく低下する場合があるため、これはアプリケーションの開発フェーズでのみ使用します。

> このボタンは、サーバー上で実行されているオペレーションしか記録しません。

ログが有効になると、ボタンのタイトルが **リクエストとデバッグのログを停止** に変わり、いつでもリクエストの記録を停止できます。 停止後にログを再開すると、以前のファイルは消去されることに留意してください。

#### レポートを表示

**レポートを表示** (リモートのデスクトップクライアントから処理を実行した場合は **レポートをダウンロード**) ボタンをクリックすると、システムウィンドウが開いて、リクエストログファイルが表示されます。

#### Load logs configuration file

This button allows you to load a special server log configuration file (`.json` file). Such a file can be provided by 4D technical services to monitor and study specific cases.


#### Pause logging

This button suspends all currently logging operations started on the server. This feature can be useful to temporarily lighten the server tasks.

When the logs have been paused, the button title changes to **Resume logging**, so that you can resume the logging operations.

> You can pause and resume logging using the [SET DATABASE PARAMETER](https://doc.4d.com/4dv19/help/command/en/page642.html) command.


## アプリケーションサーバーページ

アプリケーションサーバーページには、4D Server が公開しているデスクトップアプリケーションについての情報がまとめられていて、公開を管理できます。

![](assets/en/Admin/server-admin-application-page.png)


ページの上部には、4D Server アプリケーションサーバーの現在の状況が表示されます。

- **状況**: 開始または停止
- **開始時刻**: アプリケーションサーバーの起動日と時刻。 これは、4D Server によってプロジェクトが開かれた日付です。
- **動作時間**: プロジェクトがサーバーによって最後に開かれてからの経過時間。

### 新規接続を許可/拒否

このボタンは切り替え表示され、アプリケーションサーバーへの新しいデスクトップクライアントの接続を管理します。

プロジェクトが公開された時、デフォルトでは:
- ボタンのラベルは "新規接続を拒否" です。
- ライセンスが許可する限り、新規クライアントは自由に接続が可能です。
- プロジェクト名は接続ダイアログに公開されます ("起動時にデータベースを公開する" オプションがストラクチャー設定で有効になっている場合)。

**新規接続を拒否** ボタンをクリックすると:
- ボタンのラベルは "新規接続を許可" に変わります。
- 新規クライアントは接続不可になります。 接続しようとしたクライアントには以下のメッセージが表示されます:

![](assets/en/Admin/server-error.png)

- 接続ダイアログにプロジェクト名が表示されなくなります。
- すでに接続済みのクライアントは接続解除されず、通常通りに操作が可能です。

> [`REJECT NEW REMOTE CONNECTIONS`](https://doc.4d.com/4dv19/help/command/ja/page1635.html) コマンドを使用することでも、同じアクションを実行することができます。

- **新規接続を許可** ボタンをクリックすると、アプリケーションサーバーはデフォルトに戻ります。

この機能はたとえば、サーバー開始直後に管理者が様々なメンテナンス操作 (検証や圧縮など) をおこなうことを可能にします。 管理者がクライアント接続を使用する場合、この機能により一つのクライアントだけがデータを更新できることを確実にできます。 また、クライアントマシンが接続されていない状態でおこなわなければならないメンテナンス操作の準備のために、この機能を使用することができます。

### 情報

#### 設定

このエリアには、サーバーが公開する 4Dプロジェクトについての情報 (データやストラクチャーファイルの名称と場所、データベースログファイルの名称) が表示されます。 ストラクチャーやデータファイル名をクリックすると、完全なパス名を表示させることができます。

**モード** 欄はアプリケーションの現在の実行モード 、コンパイル済みかインタープリターかが表示されます。

エリアの下部には、サーバー設定パラメーター (サービスとして起動、ポート、IP アドレス) や、クライアント/サーバー接続用の TSL の状態 (SQL や HTTP接続は別設定) が表示されます。

#### メモリ

このエリアには、**総キャッシュメモリ** (ストラクチャー設定で設定されたパラメーター) と **使用キャッシュメモリ** (必要に応じて 4D Server が動的に割り当て) が表示されます。


#### アプリケーションサーバー接続数

- **最高**: アプリケーションサーバーに許可された最大のクライアント同時接続数を表します。 この値は、サーバーマシンにインストールされているライセンスによります。
- **使用中**: 現在使用中の実際の接続数を表します。


## SQLサーバーページ

SQLサーバーページには、4D Server に統合された SQLサーバーについての情報が集められています。 また、SQLサーバーを有効にするためのボタンも含まれています。

![](assets/en/Admin/server-admin-sql-page.png)


ページの上部には、4D Server の SQLサーバーの現在の状況が表示されます。

- **状況**: 開始または停止
- **開始時刻**: SQLサーバーの起動日と時刻。
- **動作時間**: SQLサーバーが最後に開始されてからの経過時間。

### SQLサーバー開始/停止

このボタンは切り替え表示され、4D Server SQLサーバーをコントロールするために使用します。

- SQLサーバーの状態が "開始" の場合、ボタンのタイトルは **SQLサーバー停止** になります。 このボタンをクリックすると、4D Server SQLサーバーは即座に停止し、指定した TCPポートで受信される外部からの SQLクエリには応答しなくなります。
- SQLサーバーの状態が "停止" の場合、ボタンのタイトルは **SQLサーバー開始** になります。 このボタンをクリックすると、4D Server SQLサーバーは即座に開始し、指定した TCPポートで受信される外部からの SQLクエリに応答します。 4D SQLサーバーを使用するには、適切なライセンスが必要な点に注意してください。

> ストラクチャー設定で設定してアプリケーション起動と同時に、またはプログラムを使用して必要な時に、SQLサーバーを自動で開始することができます。

### 情報

#### 設定

このエリアには、SQLサーバー設定のパラメーターが表示されます: 開始時の自動起動、待受IPアドレス、待受TCPポート (デフォルトで 19812)、そして SQL接続用の TSL の状態 (4D や Web接続は別設定)。

これらの値は 4D のストラクチャー設定で変更できます。

#### 接続

4D Server上で現在開かれている SQL接続の数。

#### 最大接続数

許可される同時SQL接続の最大数。 この値は、サーバーマシンにインストールされているライセンスによります。

## HTTPサーバーページ

HTTPサーバーページには、4D Server の Webサーバーや SOAPサーバーに関する情報が集められています。 Webサーバーは、HTMLページやピクチャーなどの Webコンテンツの公開を可能にします。 SOAPサーバーは Webサービスの公開を管理します。 これら 2つのサーバーは、4D Server の内部的な HTTPサーバーに依存しています。

![](assets/en/Admin/server-admin-web-page.png)


ページの上部には、4D Server の HTTPサーバーの現在の状況が表示されます。

- **状況**: 開始または停止
- **開始時刻**: HTTPサーバーの起動日と時刻。
- **動作時間**: HTTPサーバーが最後に開始されてからの経過時間。
- **総HTTPヒット数**: HTTPサーバーが開始されてから、サーバーが受信したローレベルの HTTPヒット数。


### HTTPサーバー開始/停止

このボタンは切り替え表示され、4D Server HTTPサーバーをコントロールするために使用します。

- HTTPサーバーの状態が "開始" の場合、ボタンのタイトルは **HTTPサーバー停止** になります。 このボタンをクリックすると、4D Server HTTPサーバーは即座に停止し、Webサーバー、RESTサーバー、および SOAPサーバーはリクエストを受け付けなくなります。
- HTTPサーバーの状態が "停止" の場合、ボタンのタイトルは **HTTPサーバー開始** になります。 このボタンをクリックすると、4D Server HTTPサーバーは即座に開始し、Web、REST、および SOAPリクエストを受け付けます。

> HTTPサーバーを開始するには適切なライセンスが必要です。
> 
> ストラクチャー設定で設定してアプリケーション起動と同時に、またはプログラムを使用して必要な時に、HTTPサーバーを自動で開始することができます。

### Web情報

このエリアには、4D Server の Webサーバーに関する情報が表示されます。

- **Web リクエスト**: 受け入れ、または拒否。 この情報は Webサーバーが有効かどうかを示します。 Webサーバーは直接 HTTPサーバーにリンクしているため、HTTPサーバーが開始されていれば Webリクエストは受信され、停止されていれば拒否されます。
- **最大接続数**: 許可される Web接続の最大数。 この値は、サーバーマシンにインストールされているライセンスによります。

### SOAP情報

このエリアには、4D Server の SOAPサーバーに関する情報が表示され、コントロールボタンも一つ含まれます。

- **SOAP リクエスト**: 受け入れ、または拒否。 この情報は SOAPサーバーが有効かどうかを示します。 SOAPリクエストを受け入れるためには、HTTPサーバーが開始され、かつ SOAPサーバーが明示的にリクエストを受け入れなければなりません (ボタンの説明参照)。
- **最大接続数**: 許可される SOAP接続の最大数。 この値は、サーバーマシンにインストールされているライセンスによります。
- **SOAPリクエストを受け入れる/受け入れない** ボタン: このボタンは切り替え表示され、4D Server SOAPサーバーのコントロールに使用します。 このボタンをクリックすると、ストラクチャー設定の "Webサービス" ページの **Webサービスリクエストを許可する** オプションが変更されます。また、ストラクチャー設定の当該オプションが変更されれば、ボタンのラベルも変わります。 また、[`SOAP REJECT NEW REQUESTS`](https://doc.4d.com/4dv19/help/command/ja/page1636.html) コマンドを使って新規の SOAPリクエストを拒否することもできますが、このコマンドは **Webサービスリクエストを許可する** オプションの値を変更しません。

HTTPサーバー停止中に **SOAPリクエスト受け入れる** ボタンをクリックすると、4D は自動で HTTPサーバーを開始します。

### HTTPサーバー設定

このエリアには、HTTPサーバーの設定パラメーターや動作に関する情報が表示されます。

- **開始時に自動起動**: ストラクチャー設定で設定されたパラメーター。
- **HTTP サーバープロセス (使用/総計)**: サーバー上で作成されたHTTPプロセス数 (現在のプロセス数 / 作成されたプロセスの総数)。
- **キャッシュメモリ**: HTTPサーバーキャッシュメモリのサイズ ( キャッシュが実際に使用しているサイズ / ストラクチャー設定で理論的にキャッシュに割り当てられた最大サイズ)。 **キャッシュクリア** ボタンをクリックすると、現在のキャッシュを空にすることができます。
- **待受IP**、**HTTPポート** (デフォルトは 80)、HTTP接続用の **TSL有効** (4D と SQL接続は別設定)、および **HTTPSポート**: これらは、ストラクチャー設定またはプログラミングにより設定された、HTTPサーバーの現在の [設定パラメーター](WebServer/webServerConfig.md) を表示します。
- **ログファイル情報**: 名称、フォーマット、および HTTPサーバーの次回の自動ログバックアップの日付 (logweb.txt ファイル)。


## リアルタイムモニターページ

リアルタイムモニターは、アプリケーションによって実行された、"長い" オペレーションの状態をリアルタイムでモニターします。 これらのオペレーションとは、たとえばシーケンシャルクエリやフォーミュラの実行などです:

![](assets/en/Admin/server-admin-monitor-page.png)
> このページは、サーバーマシンの管理ウィンドウにありますが、リモートの 4Dマシンからも見られます。 リモートマシンの場合は、サーバーマシン上で実行されている操作のデータを表示します。

データに対して実行されている長い処理は、それぞれに行が割り当てられます。 操作が完了すると、この行は消えます (**オペレーションを最低5秒間表示する** オプションをチェックすることで、短いオペレーションでも 5秒間表示したままにできます。以下参照)。

各行について、以下の情報が表示されます:

- **開始時刻**: 操作の開始時刻が、"dd/mm/yyyy - hh:mm:ss" というフォーマットで表示されます。
- **経過時間** (秒): 進行中の操作の経過時間が秒単位で表示されます。
- **情報**: 操作の説明。
- **詳細**: このエリアには、選択したオペレーションのタイプに応じて、その詳細な情報が表示されます。 具体的には以下の情報が表示されます:
    + **作成された場所**: そのオペレーションがクライアントアクションの結果か (クライアント上で作成)、ストアドプロシージャ―または "サーバー上で実行" オプションを使用した結果か (サーバー上で作成) を表示します。
    + **オペレーション詳細**: オペレーションタイプと、(クエリオペレーションに対しては) クエリプランを表示します。
    + **サブオペレーション** (あれば): 選択したオペレーションに従属するオペレーションを表示します (例:親レコードの前にリレートレコードを削除する)
    + **プロセス詳細**: テーブル、フィールド、プロセスやクライアントに関する追加情報が表示されます。オペレーションのタイプによって異なります。

> リアルタイムモニターページは、[`GET ACTIVITY SNAPSHOT`](https://doc.4d.com/4dv19/help/command/ja/page1277.html) コマンドを内部的に使用しています。 詳細については、コマンドの説明を参照ください。

このページは表示後すぐにアクティブになり、恒久的に更新され続けます。 ただし、この処理によって、アプリケーションの実行を極端に遅くさせる可能性があることに注意してください。 以下の方法を用いて更新を一時的に停止させることが可能です:

- **停止** ボタンをクリックする
- リストの中をクリックする
- スペースバーを押す

ページを停止させると一時停止のメッセージが表示され、ボタンの表示が **再開** に変わります。 モニタリング停止操作と同じ操作をすることでモニタリングを再開させることができます。

#### 詳細モード

必要であれば、RTMページはオペレーションごとに追加の情報を表示することができます。

オペレーションのアドバンスドモードにアクセスするには、**Shift**キーを押しながら、情報を取得したいオペレーションを選択します。 すべての閲覧可能な情報が、フィルタリングなしで "プロセス詳細" エリアに表示されます(`GET ACTIVITY SNAPSHOT` コマンドで返されるものと同じです)。 表示される情報は、選択したオペレーションによって異なります。

標準モードで表示される情報の例です:

![](assets/en/Admin/server-admin-monitor-adv1.png)


アドバンスドモード (オペレーションを **Shift+クリック**) では、さらなる情報が表示されます:

![](assets/en/Admin/server-admin-monitor-adv2.png)

#### スナップショットボタン

**コピー** ボタンを使用すると、RTMパネルに表示されている全オペレーションと、それに関連する詳細 (プロセスとサブオペレーション情報) がクリップボードへとコピーされます:

![](assets/en/Admin/server-admin-monitor-snapshot.png)


#### オペレーションを最低5秒間表示する

**オペレーションを最低5秒間表示する** オプションをチェックすると、表示されたオペレーションはどれも (実行が終了した後も) 最低5秒間は表示されたままになります。 このオプションが適用されたオペレーションは、オペレーションリスト中に灰色で表示されます。 この機能は、とても早く終わってしまうオペレーションの情報を取得したい場合に有効です。
