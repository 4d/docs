<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Concepts/_removed_usenduse_variables · Doc Center</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;useend-use&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#useend-use&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Use...End use&lt;/h1&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Concepts/_removed_usenduse_variables · Doc Center"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/index.html"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;useend-use&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#useend-use&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Use...End use&lt;/h1&gt;
"/><meta property="og:image" content="https://4d.github.io/docs/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/img/logohome.png"/><link rel="shortcut icon" href="/docs/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/doc/js/code-blocks-buttons.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/"><img class="logo" src="/docs/img/4DlogoK.gif" alt="Doc Center"/><h2 class="headerTitleWithLogo">Doc Center</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="http://doc.4d.com/" target="_self">doc.4d.com</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Concepts/_removed_usenduse_variables</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="useend-use"></a><a href="#useend-use" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use...End use</h1>
<p>The formal syntax of the <code>Use...End use</code> structure is:</p>
<pre><code class="hljs css language-code4d"> <span class="hljs-keyword">Use</span>(Shared_object_or_Shared_collection)
    statement(s)
 <span class="hljs-keyword">End use</span>
</code></pre>
<p>The <code>Use...End use</code> structure defines a sequence of statements that will execute tasks on the <em>Shared_object_or_Shared_collection</em> parameter under the protection of an internal semaphore. <em>Shared_object_or_Shared_collection</em> can be any valid shared object or shared collection.</p>
<p>Shared objects and shared collections are designed to allow communication between processes, in particular, <strong>preemptive 4D processes</strong>. They can be passed by reference as parameters from a process to another one. For detailed information on shared objects or shared collections, refer to the <strong>Shared objects and shared collections</strong> page. Surrounding modifications on shared objects or shared collections by the <code>Use...End use</code> keywords is mandatory to prevent concurrent access between processes.</p>
<ul>
<li>Once the <strong>Use</strong> line is successfully executed, all <em>Shared_object_or_Shared_collection</em> properties/elements are locked for all other process in write access until the corresponding <code>End use</code> line is executed.</li>
<li>The <em>statement(s)</em> sequence can execute any modification on the Shared_object_or_Shared_collection properties/elements without risk of concurrent access.</li>
<li>If another shared object or collection is added as a property of the <em>Shared_object_or_Shared_collection</em> parameter, they become connected within the same shared group (see <strong>Using shared objects or collections</strong>).</li>
<li>If another process tries to access one of the <em>Shared_object_or_Shared_collection</em> properties or connected properties while a <strong>Use...End use</strong> sequence is being executed, it is automatically put on hold and waits until the current sequence is terminated.</li>
<li>The <strong>End use</strong> line unlocks the <em>Shared_object_or_Shared_collection</em> properties and all objects sharing the same locking identifier.</li>
<li>Several <strong>Use...End use</strong> structures can be nested in the 4D code. In that case, all locks are stacked and properties/elements will be released only when the last End use call is executed.</li>
</ul>
<p><strong>Note:</strong> If a collection method modifies a shared collection, an internal <strong>Use</strong> is automatically called for this shared collection while the function is executed.</p>
<h2><a class="anchor" aria-hidden="true" id="form-object-variables"></a><a href="#form-object-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Form Object Variables</h2>
<p>In the Form editor, each active object—button, radio button, check box, scrollable area, meter bar, and so on—is identified by an object name and is automatically associated with a variable (or expression). By default, the variable is not defined when the object is created: it will be created dynamically when the form is loaded (see below). You can, if you want, name the variable in the Property List to create it. For example, if you create a button named MyButton, you can associated it with a MyButton variable (you can also use the same name as the object).</p>
<p>The form object variables allow you to control and monitor the objects. For example, when a button is clicked, its variable is set to 1; at all other times, it is 0. The variable associated with a meter or dial lets you read and change the current setting. For example, if you drag a meter to a new setting, the value of the variable changes to reflect the new setting. Similarly, if a method changes the value of the variable, the meter is redrawn to show the new value.</p>
<p>For more information about variables and forms, see the 4D Design Reference Manual as well as the chapter Form Events.</p>
<h2><a class="anchor" aria-hidden="true" id="dynamic-variables"></a><a href="#dynamic-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dynamic variables</h2>
<p>You can leave it up to 4D to create variables associated with your form objects (buttons, enterable variables, check boxes, etc.) dynamically and according to your needs. To do this, simply leave the &quot;Variable Name&quot; field blank in the Property list for the object:</p>
<p><img src="../assets/en/dynvar.en.png" alt=""></p>
<p>When a variable is not named, when the form is loaded, 4D creates a new variable for the object, with a calculated name that is unique in the space of the process variables of the interpreter (which means that this mechanism can be used even in compiled mode). This temporary variable will be destroyed when the form is closed.
In order for this principle to work in compiled mode, it is imperative that dynamic variables are explicitly typed. There are two ways to do this:</p>
<ul>
<li>You can set the type using the &quot;Variable Type&quot; menu of the Property list.
<strong>Note:</strong> When the variable is named, the &quot;Variable Type&quot; menu does not actually type the variable but simply allows the options of the Property list to be updated (except for picture variables). In order to type a named variable, it is necessary to use the commands of the Compiler theme.</li>
<li>You can use a specific initialization code when the form is loaded that uses, for example, the <code>VARIABLE TO VARIABLE</code> command:</li>
</ul>
<pre><code class="hljs css language-code4d">     <span class="hljs-keyword">If</span>(<span class="hljs-command">Form</span> event=<span class="hljs-constant">On Load</span>)
        <span class="hljs-command">C_TEXT</span>(<span class="hljs-locale">$init</span>)
        <span class="hljs-locale">$Ptr_object</span>:=<span class="hljs-command">OBJECT Get pointer</span>(<span class="hljs-constant">Object named</span>;"<span class="hljs-string">comments</span>")
        <span class="hljs-locale">$init</span>:="<span class="hljs-string"></span>"
        <span class="hljs-command">VARIABLE TO VARIABLE</span>(<span class="hljs-command">Current process</span>;<span class="hljs-locale">$Ptr_object</span>-&gt;;<span class="hljs-locale">$init</span>)
     <span class="hljs-keyword">End if</span>
</code></pre>
<p><strong>Note:</strong> If you specify a dynamic variable, select the value <strong>None</strong> in the &quot;Variable Type&quot; menu, and do not use initialization code, a typing error will be returned by the compiler.</p>
<p>In the 4D code, dynamic variables can be accessed using a pointer obtained with the <code>OBJECT Get pointer</code> command. For example:</p>
<pre><code class="hljs css language-code4d">  <span class="hljs-comment">// assign the time 12:00:00 to the variable for the "tstart" object
</span> <span class="hljs-locale">$p</span>:=<span class="hljs-command">OBJECT Get pointer</span>(<span class="hljs-constant">Object named</span>;"<span class="hljs-string">tstart</span>")
 <span class="hljs-locale">$p</span>-&gt;:=?12:00:00?
</code></pre>
<p>There are two advantages with this mechanism:</p>
<ul>
<li>On the one hand, it allows the development of &quot;subform&quot; type components that can be used several times in the same host form. Let us take as an example the case of a datepicker subform that is inserted twice in a host form to set a start date and an end date. This subform will use objects for choosing the date of the month and the year. It will be necessary for these objects to work with different variables for the start date and the end date. Letting 4D create their variable with a unique name is a way of resolving this difficulty.</li>
<li>On the other hand, it can be used to limit memory usage. In fact, form objects only work with process or inter-process variables. However, in compiled mode, an instance of each process variable is created in all the processes, including the server processes. This instance takes up memory, even when the form is not used during the session. Therefore, letting 4D create variables dynamically when loading the forms can economize memory.</li>
</ul>
<p><strong>Note:</strong> When there is no variable name, the object name is shown in quotation marks in the form editor (when the object display a variable name by default).</p>
<h2><a class="anchor" aria-hidden="true" id="investigating-errors"></a><a href="#investigating-errors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Investigating errors</h2>
<p>Errors often happen in specific contexts and/or following a particular sequence of events. Getting and analyzing detailed log files is usually an efficient way to understand and fix those errors.</p>
<p>4D provides several log files:</p>
<ul>
<li><strong>4DRequestsLog.txt</strong>: records standard requests carried out by the 4D Server machine or the 4D remote machine that executed the command (excluding Web requests).</li>
<li><strong>4DRequestsLog_ProcessInfo.txt</strong>: records information on each process created on the 4D Server machine or the 4D remote machine that executed the command (excluding Web requests).</li>
<li><strong>4DDebugLog.txt</strong>: records each event occurring at the 4D programming level.</li>
<li><strong>HTTPDebugLog.txt</strong>: records each HTTP request and each response in raw mode.</li>
</ul>
<p>All log files share the same sequential operation numbers so that each log entry can be linked to other entries in other logs.</p>
<p>Log files can be enabled and disabled at any moment using the <code>SET DATABASE PARAMETER</code> or <code>WEB SET OPTION</code> commands.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#form-object-variables">Form Object Variables</a></li><li><a href="#dynamic-variables">Dynamic variables</a></li><li><a href="#investigating-errors">Investigating errors</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docs/" class="nav-home"><img src="/docs/img/logohome.png" alt="Doc Center" width="300"/></a><div><h5>Community</h5><a href="https://blog.4d.com/">4D Blog</a><a href="https://forums.4d.com/">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="https://taow.4d.com/">Get Support</a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a></div><div><h5>Product &amp; Company</h5><a href="https://store.4d.com/">Product Registration</a><a href="https://us.4d.com/product-life-cycle">Product Life Cycle</a><a href="https://us.4d.com/about-us">About us</a><a href="https://us.4d.com/contact-us">Contact us</a></div></section><section class="copyright">Copyright © 2019 4D SAS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '093230ccbc91f19f9a4f78bf3a92791c',
                indexName: 'arnaud4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>