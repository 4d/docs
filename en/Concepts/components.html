<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Components · Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;A 4D component is a set of 4D methods and forms representing one or more functionalities that can be installed in different databases. For example, you can develop a 4D e-mail component that manages every aspect of sending, receiving and storing e-mails in 4D databases.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Components · Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/index.html"/><meta property="og:description" content="&lt;p&gt;A 4D component is a set of 4D methods and forms representing one or more functionalities that can be installed in different databases. For example, you can develop a 4D e-mail component that manages every aspect of sending, receiving and storing e-mails in 4D databases.&lt;/p&gt;
"/><meta property="og:image" content="https://4d.github.io/docs/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/img/logohome.png"/><link rel="shortcut icon" href="/docs/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-blocks-buttons.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/en"><img class="logo" src="/docs/img/4DlogoK.gif" alt="Documentation"/><h2 class="headerTitleWithLogo">Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://developer.4d.com/" target="_self">Developer Center</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>4D Language Concepts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">4D Language Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/about.html">About the 4D Language</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/quick-tour.html">A Quick Tour</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/data-types.html">Data types overview</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/boolean.html">Boolean</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/date.html">Date</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/null-undefined.html">Null and Undefined</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/number.html">Number (Real, Longint, Integer)</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/object.html">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/picture.html">Picture</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/pointer.html">Pointer</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/string.html">String</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/time.html">Time</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/variables.html">Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/arrays.html">Arrays</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/methods.html">Methods</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/parameters.html">Parameters</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/shared.html">Shared objects and collections</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/control-flow.html">Control flow overview</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/branching.html">Branching structures</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/looping.html">Looping structures</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/error-handling.html">Error handling</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/interpreted-compiled.html">Interpreted and Compiled modes</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/Concepts/components.html">Components</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Concepts/identifiers.html">Identifiers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">4D Projects (BETA)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/Project/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Project/creating.html">Creating a 4D project</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Project/exporting.html">Exporting from a 4D database</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Project/architecture.html">Architecture of a 4D project</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Project/developing.html">Developing a project</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Project/deploying.html">Deploying a project</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">MSC<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/MSC/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/information.html">Information Page</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/analysis.html">Activity analysis Page</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/verify.html">Verify Page</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/backup.html">Backup Page</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/compact.html">Compact Page</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/rollback.html">Rollback Page</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/restore.html">Restore Page</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/repair.html">Repair Page</a></li><li class="navListItem"><a class="navItem" href="/docs/en/MSC/encrypt.html">Encrypt Page</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Components</h1></header><article><div><span><p>A 4D component is a set of 4D methods and forms representing one or more functionalities that can be installed in different databases. For example, you can develop a 4D e-mail component that manages every aspect of sending, receiving and storing e-mails in 4D databases.</p>
<p>Creating and installing 4D components is carried out directly from 4D. Basically, components are managed like <a href="/docs/en/Concepts/plug-ins.html">plug-ins</a> according to the following principles:</p>
<ul>
<li>A component consists of a regular structure file (compiled or not) having the standard architecture or in the form of a package (see .4dbase Extension).</li>
<li>To install a component in a database, you simply need to copy it into the &quot;Components&quot; folder of the database, placed next to the structure file or next to the 4D executable application.</li>
<li>A component can call on most of the 4D elements: project methods, project forms, menu bars, choice lists, pictures from the library, and so on. It cannot call database methods and triggers.</li>
<li>You cannot use standard tables or data files in 4D components. However, a component can create and/or use tables, fields and data files using mechanisms of external databases. These are separate 4D databases that you work with using SQL commands.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="definitions"></a><a href="#definitions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Definitions</h2>
<p>The component management mechanisms in 4D require the implementation of the following terms and concepts:</p>
<ul>
<li><strong>Matrix Database</strong>: 4D database used for developing the component. The matrix database is a standard database with no specific attributes. A matrix database forms a single component. The matrix database is intended to be copied, compiled or not, into the Components folder of the 4D application or the database that will be using the component (host database).</li>
<li><strong>Host Database</strong>: Database in which a component is installed and used.</li>
<li><strong>Component</strong>: Matrix database, compiled or not, copied into the Components folder of the 4D application or the host database and whose contents are used in the host databases.</li>
</ul>
<p>It should be noted that a database can be both a “matrix” and a “host,” in other words, a matrix database can itself use one or more components. However, a component cannot use “sub-components” itself.</p>
<h3><a class="anchor" aria-hidden="true" id="protection-of-components-compilation"></a><a href="#protection-of-components-compilation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protection of components: compilation</h3>
<p>By default, all the project methods of a matrix database installed as a component are potentially visible from the host database. In particular:</p>
<ul>
<li>The shared project methods are found on the Methods Page of the Explorer and can be called in the methods of the host database. Their contents can be selected and copied in the preview area of the Explorer. They can also be viewed in the debugger. However, it is not possible to open them in the Method editor nor to modify them.</li>
<li>The other project methods of the matrix database do not appear in the Explorer but they too can be viewed in the debugger of the host database.</li>
</ul>
<p>To protect the project methods of a component effectively, simply compile the matrix database and provide it in the form of a .4dc file (compiled database that does not contain the interpreted code). When a compiled matrix database is installed as a component:</p>
<ul>
<li>The shared project methods are shown on the Methods Page of the Explorer and can be called in the methods of the host database. However, their contents will not appear in the preview area nor in the debugger.</li>
<li>The other project methods of the matrix database will never appear.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="sharing-of-project-methods"></a><a href="#sharing-of-project-methods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sharing of project methods</h2>
<p>All the project methods of a matrix database are by definition included in the component (the database is the component), which means that they can be called and executed by the component.</p>
<p>On the other hand, by default these project methods will not be visible, nor can they be called in the host database. In the matrix database, you must explicitly designate the methods that you want to share with the host database. These project methods can be called in the code of the host database (but they cannot be modified in the Method editor of the host database). These methods form <strong>entry points</strong> in the component.</p>
<p><strong>Note:</strong> Conversely, for security reasons, by default a component cannot execute project methods belonging to the host database. In certain cases, you may need to allow a component to access the project methods of your host database. To do this, you must explicitly designate the project methods of the host database that you want to make accessible to the components.</p>
<p><img src="/docs/assets/en/pict516563.en.png" alt=""></p>
<h2><a class="anchor" aria-hidden="true" id="passing-variables"></a><a href="#passing-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Passing variables</h2>
<p>The local, process and interprocess variables are not shared between components and host databases. The only way to access component variables from the host database and vice versa is using pointers.</p>
<p>Example using an array:</p>
<pre><code class="hljs css language-code4d"><span class="hljs-comment">//In the host database:
</span>     <span class="hljs-command">ARRAY INTEGER</span>(MyArray;10)
     AMethod(-&gt;MyArray)

<span class="hljs-comment">//In the component, the AMethod project method contains:
</span>     <span class="hljs-command">APPEND TO ARRAY</span>(<span class="hljs-param">$1</span>-&gt;;2)
</code></pre>
<p>Examples using variables:</p>
<pre><code class="hljs css language-code4d"> <span class="hljs-command">C_TEXT</span>(myvariable)
 component_method1(-&gt;myvariable)
 <span class="hljs-command">C_POINTER</span>(<span class="hljs-locale">$p</span>)
 <span class="hljs-locale">$p</span>:=component_method2(...)
</code></pre>
<p>When you use pointers to allow components and the host database to communicate, you need to take the following specificities into account:</p>
<ul>
<li><p>The <code>Get pointer</code> command will not return a pointer to a variable of the host database if it is called from a component and vice versa.</p></li>
<li><p>The component architecture allows the coexistence, within the same interpreted database, of both interpreted and compiled components (conversely, only compiled components can be used in a compiled database). In order to use pointers in this case, you must respect the following principle: the interpreter can unpoint a pointer built in compiled mode; however, in compiled mode, you cannot unpoint a pointer built in interpreted mode.
Let’s illustrate this principle with the following example: given two components, C (compiled) and I (interpreted), installed in the same host database.</p></li>
<li><p>If component C defines the <code>myCvar</code> variable, component I can access the value of this variable by using the pointer <code>-&gt;myCvar</code>.</p></li>
<li><p>If component I defines the <code>myIvar</code> variable, component C cannot access this variable by using the pointer <code>-&gt;myIvar</code>. This syntax causes an execution error.</p></li>
<li><p>The comparison of pointers using the <code>RESOLVE POINTER</code> command is not recommended with components since the principle of partitioning variables allows the coexistence of variables having the same name but with radically different contents in a component and the host database (or another component). The type of the variable can even be different in both contexts. If the <code>myptr1</code> and <code>myptr2</code> pointers each point to a variable, the following comparison will produce an incorrect result:</p></li>
</ul>
<pre><code class="hljs css language-code4d">     <span class="hljs-command">RESOLVE POINTER</span>(myptr1;vVarName1;vtablenum1;vfieldnum1)
     <span class="hljs-command">RESOLVE POINTER</span>(myptr2;vVarName2;vtablenum2;vfieldnum2)
     <span class="hljs-keyword">If</span>(vVarName1=vVarName2)
      <span class="hljs-comment">//This test returns True even though the variables are different
</span></code></pre>
<p>In this case, it is necessary to use the comparison of pointers:</p>
<pre><code class="hljs css language-code4d">     <span class="hljs-keyword">If</span>(myptr1=myptr2) <span class="hljs-comment">//This test returns False
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="access-to-tables-of-the-host-database"></a><a href="#access-to-tables-of-the-host-database" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Access to tables of the host database</h2>
<p>Although components cannot use tables, pointers can permit host databases and components to communicate with each other. For example, here is a method that could be called from a component:</p>
<pre><code class="hljs css language-code4d"><span class="hljs-comment">// calling a component method
</span>methCreateRec(-&gt;[PEOPLE];-&gt;[PEOPLE]Name;"<span class="hljs-string">Julie Andrews</span>")
</code></pre>
<p>Within the component, the code of the <code>methCreateRec</code> method:</p>
<pre><code class="hljs css language-code4d"><span class="hljs-command">C_POINTER</span>(<span class="hljs-param">$1</span>) <span class="hljs-comment">//Pointer on a table in host database
</span><span class="hljs-command">C_POINTER</span>(<span class="hljs-param">$2</span>) <span class="hljs-comment">//Pointer on a field in host database
</span><span class="hljs-command">C_TEXT</span>(<span class="hljs-param">$3</span>) <span class="hljs-comment">// Value to insert
</span>
<span class="hljs-locale">$tablepointer</span>:=<span class="hljs-param">$1</span>
<span class="hljs-locale">$fieldpointer</span>:=<span class="hljs-param">$2</span>
<span class="hljs-command">CREATE RECORD</span>(<span class="hljs-locale">$tablepointer</span>-&gt;)

<span class="hljs-locale">$fieldpointer</span>-&gt;:=<span class="hljs-param">$3</span>
<span class="hljs-command">SAVE RECORD</span>(<span class="hljs-locale">$tablepointer</span>-&gt;)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="scope-of-language-commands"></a><a href="#scope-of-language-commands" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scope of language commands</h2>
<p>Except for <a href="#unusable-commands">Unusable commands</a>, a component can use any command of the 4D language.</p>
<p>When commands are called from a component, they are executed in the context of the component, except for the <code>EXECUTE METHOD</code> command that uses the context of the method specified by the command. Also note that the read commands of the “Users and Groups” theme can be used from a component but will read the users and groups of the host database (a component does not have its own users and groups).</p>
<p>The <code>SET DATABASE PARAMETER</code> and <code>Get database parameter</code> commands are an exception: their scope is global to the database. When these commands are called from a component, they are applied to the host database.</p>
<p>Furthermore, specific measures have been specified for the <code>Structure file</code> and <code>Get 4D folder</code> commands when they are used in the framework of components.</p>
<p>The <code>COMPONENT LIST</code> command can be used to obtain the list of components that are loaded by the host database.</p>
<h3><a class="anchor" aria-hidden="true" id="unusable-commands"></a><a href="#unusable-commands" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unusable commands</h3>
<p>The following commands are not compatible for use within a component because they modify the structure file — which is open in read-only. Their execution in a component will generate the error -10511, “The CommandName command cannot be called from a component”:</p>
<ul>
<li><code>ON EVENT CALL</code></li>
<li><code>Method called on event</code></li>
<li><code>SET PICTURE TO LIBRARY|</code></li>
<li><code>REMOVE PICTURE FROM LIBRARY</code></li>
<li><code>SAVE LIST</code></li>
<li><code>ARRAY TO LIST</code></li>
<li><code>EDIT FORM</code></li>
<li><code>CREATE USER FORM</code></li>
<li><code>DELETE USER FORM</code></li>
<li><code>CHANGE PASSWORD</code></li>
<li><code>EDIT ACCESS</code></li>
<li><code>Set group properties</code></li>
<li><code>Set user properties</code></li>
<li><code>DELETE USER</code></li>
<li><code>CHANGE LICENSES</code></li>
<li><code>BLOB TO USERS</code></li>
<li><code>SET PLUGIN ACCESS</code></li>
</ul>
<p><strong>Notes:</strong></p>
<ul>
<li>The <code>Current form table</code> command returns <code>Nil</code> when it is called in the context of a project form. Consequently, it cannot be used in a component.</li>
<li>Obviously, SQL data definition language commands (<code>CREATE TABLE</code>, <code>DROP TABLE</code>, etc.) cannot be used in the framework of components.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="error-handling"></a><a href="#error-handling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error handling</h2>
<p>An <a href="/docs/en/Concepts/error-handling.html">error-handling method</a> installed by the <code>ON ERR CALL</code> command only applies to the running database. In the case of an error generated by a component, the <code>ON ERR CALL</code> error-handling method of the host database is not called, and vice versa.</p>
<h2><a class="anchor" aria-hidden="true" id="use-of-forms"></a><a href="#use-of-forms" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use of forms</h2>
<ul>
<li>Only “project forms” (forms that are not associated with any specific table) can be used in a component. Any project forms present in the matrix database can be used by the component.</li>
<li>A component can call table forms of the host database. Note that in this case it is necessary to use pointers rather than table names between brackets [] to specify the forms in the code of the component.</li>
</ul>
<p><strong>Note:</strong> If a component uses the <code>ADD RECORD</code> command, the current Input form of the host database will be displayed, in the context of the host database. Consequently, if the form includes variables, the component will not have access to it.</p>
<ul>
<li>You can publish component forms as subforms in the host databases. This means that you can, more particularly, develop components offering graphic objects. For example, Widgets provided by 4D are based on the use of subforms in components. This is described in Sharing of forms.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="use-of-tables-and-fields"></a><a href="#use-of-tables-and-fields" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use of tables and fields</h2>
<p>A component cannot use the tables and fields defined in the 4D structure of the matrix database. However, you can create and use external databases, and then use their tables and fields according to your needs. You can create and manage external databases using SQL. An external database is a 4D database that is independent from the main 4D database, but that you can work with from the main 4D database. Using an external database means temporarily designating this database as the current database, in other words, as the target database for the SQL queries executed by 4D. You create external databases using the SQL <code>CREATE DATABASE</code> command.</p>
<h3><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>The following code is included in a component and performs three basic actions with an external database:</p>
<ul>
<li>creates the external database if it does not already exist,</li>
<li>adds data to the external database,</li>
<li>reads data from the external database.</li>
</ul>
<p>Creating the external database:</p>
<pre><code class="hljs css language-code4d">&lt;&gt;MyDatabase:=<span class="hljs-command">Get 4D folder</span>+"<span class="hljs-string">\MyDB</span>" <span class="hljs-comment">// (Windows) stores the data in an authorized directory
</span> <span class="hljs-command">Begin SQL</span>
        CREATE DATABASE IF NOT EXISTS DATAFILE :[&lt;&gt;MyDatabase];
        USE DATABASE DATAFILE :[&lt;&gt;MyDatabase];
        <span class="hljs-plugin">CREATE TABLE</span> IF NOT EXISTS KEE<span class="hljs-plugin">PIT</span>
        (
        ID INT32 PRIMARY KEY,
        kind VAR<span class="hljs-plugin">CHAR,</span>
        name VAR<span class="hljs-plugin">CHAR,</span>
        <span class="hljs-command">code</span> TEXT,
        sort_order INT32
        );
 
        CREATE UNIQUE INDEX id_index ON KEE<span class="hljs-plugin">PIT</span> (ID);
 
        USE DATABASE <span class="hljs-constant">SQL_INTERNAL</span>;
 
 <span class="hljs-command">End SQL</span>
</code></pre>
<p>Writing in the external database:</p>
<pre><code class="hljs css language-code4d"> <span class="hljs-locale">$Ptr_1</span>:=<span class="hljs-param">$2</span> <span class="hljs-comment">// retrieves data from the host database through pointers
</span> <span class="hljs-locale">$Ptr_2</span>:=<span class="hljs-param">$3</span>
 <span class="hljs-locale">$Ptr_3</span>:=<span class="hljs-param">$4</span>
 <span class="hljs-locale">$Ptr_4</span>:=<span class="hljs-param">$5</span>
 <span class="hljs-locale">$Ptr_5</span>:=<span class="hljs-param">$6</span>
 <span class="hljs-command">Begin SQL</span>
 
        USE DATABASE DATAFILE :[&lt;&gt;MyDatabase];
 
        INSERT INTO KEE<span class="hljs-plugin">PIT</span>
        (ID, kind, name, <span class="hljs-command">code</span>, sort_order)
        VALUES
        (:[<span class="hljs-locale">$Ptr_1</span>], :[<span class="hljs-locale">$Ptr_2</span>], :[<span class="hljs-locale">$Ptr_3</span>], :[<span class="hljs-locale">$Ptr_4</span>], :[<span class="hljs-locale">$Ptr_5</span>]);
 
        USE DATABASE <span class="hljs-constant">SQL_INTERNAL</span>;
 
 <span class="hljs-command">End SQL</span>
</code></pre>
<p>Reading from an external database:</p>
<pre><code class="hljs css language-code4d"> <span class="hljs-locale">$Ptr_1</span>:=<span class="hljs-param">$2</span> <span class="hljs-comment">// accesses data of the host database through pointers
</span> <span class="hljs-locale">$Ptr_2</span>:=<span class="hljs-param">$3</span>
 <span class="hljs-locale">$Ptr_3</span>:=<span class="hljs-param">$4</span>
 <span class="hljs-locale">$Ptr_4</span>:=<span class="hljs-param">$5</span>
 <span class="hljs-locale">$Ptr_5</span>:=<span class="hljs-param">$6</span>
 
 <span class="hljs-command">Begin SQL</span>
 
    USE DATABASE DATAFILE :[&lt;&gt;MyDatabase];
 
    <span class="hljs-plugin">SELECT</span> ALL ID, kind, name, <span class="hljs-command">code</span>, sort_order
    FROM KEE<span class="hljs-plugin">PIT</span>
    INTO :<span class="hljs-locale">$Ptr_1</span>, :<span class="hljs-locale">$Ptr_2</span>, :<span class="hljs-locale">$Ptr_3</span>, :<span class="hljs-locale">$Ptr_4</span>, :<span class="hljs-locale">$Ptr_5</span>;
 
    USE DATABASE <span class="hljs-constant">SQL_INTERNAL</span>;
 
 <span class="hljs-command">End SQL</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="use-of-resources"></a><a href="#use-of-resources" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use of resources</h2>
<p>Components can use resources. In conformity with the resource management principle, if the component is of the .4dbase architecture (recommended architecture), the Resources folder must be placed inside this folder.</p>
<p>Automatic mechanisms are operational: the XLIFF files found in the Resources folder of a component will be loaded by this component.</p>
<p>In a host database containing one or more components, each component as well as the host databases has its own “resources string.” Resources are partitioned between the different databases: it is not possible to access the resources of component A from component B or the host database.</p>
<h2><a class="anchor" aria-hidden="true" id="on-line-help-for-components"></a><a href="#on-line-help-for-components" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>On-line help for components</h2>
<p>A specific mechanism has been implemented in order to allow developers to add on-line help to their components. The principle is the same as that provided for 4D databases:</p>
<ul>
<li>The component help must be provided as a file suffixed .htm, .html or (Windows only) .chm,</li>
<li>The help file must be put next to the structure file of the component and have the same name as the structure file,</li>
<li>This file is then automatically loaded into the Help menu of the application with the title “Help for...” followed by the name of the help file.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/Concepts/interpreted-compiled.html"><span class="arrow-prev">← </span><span>Interpreted and Compiled modes</span></a><a class="docs-next button" href="/docs/en/Concepts/plug-ins.html"><span>Plug-ins</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#definitions">Definitions</a><ul class="toc-headings"><li><a href="#protection-of-components-compilation">Protection of components: compilation</a></li></ul></li><li><a href="#sharing-of-project-methods">Sharing of project methods</a></li><li><a href="#passing-variables">Passing variables</a></li><li><a href="#access-to-tables-of-the-host-database">Access to tables of the host database</a></li><li><a href="#scope-of-language-commands">Scope of language commands</a><ul class="toc-headings"><li><a href="#unusable-commands">Unusable commands</a></li></ul></li><li><a href="#error-handling">Error handling</a></li><li><a href="#use-of-forms">Use of forms</a></li><li><a href="#use-of-tables-and-fields">Use of tables and fields</a><ul class="toc-headings"><li><a href="#example">Example</a></li></ul></li><li><a href="#use-of-resources">Use of resources</a></li><li><a href="#on-line-help-for-components">On-line help for components</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docs/" class="nav-home"><img src="/docs/img/logohome.png" alt="Documentation" width="300"/></a><div><h5>Community</h5><a href="https://blog.4d.com/">4D Blog</a><a href="https://forums.4d.com/">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="https://taow.4d.com/">Get Support</a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a></div><div><h5>Product &amp; Company</h5><a href="https://store.4d.com/">Product Registration</a><a href="https://us.4d.com/product-life-cycle">Product Life Cycle</a><a href="https://us.4d.com/about-us">About us</a><a href="https://us.4d.com/contact-us">Contact us</a></div></section><section class="copyright">Copyright © 2019 4D SAS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>