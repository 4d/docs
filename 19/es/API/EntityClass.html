<!DOCTYPE html><html lang="es"><head><meta name="docsearch:version" content="19"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Entity · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Una [entidad](/docs/19/es/ORDA/dsmapping.html#entity) es una instancia de una [Dataclass](/docs/19/es/ORDA/dsmapping.html#dataclass), como un registro de la tabla que coincide con la dataclass en su datastore asociado. Contiene los mismos atributos que la clase de datos, así como los valores de los datos y las propiedades y funciones específicas."/><meta name="docsearch:language" content="es"/><meta property="og:title" content="Entity · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/19/index.html"/><meta property="og:description" content="Una [entidad](/docs/19/es/ORDA/dsmapping.html#entity) es una instancia de una [Dataclass](/docs/19/es/ORDA/dsmapping.html#dataclass), como un registro de la tabla que coincide con la dataclass en su datastore asociado. Contiene los mismos atributos que la clase de datos, así como los valores de los datos y las propiedades y funciones específicas."/><meta property="og:image" content="https://4d.github.io/docs/19/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/19/img/logohome.png"/><link rel="shortcut icon" href="/docs/19/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-blocks-buttons.js"></script><script src="/docs/19/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/19/css/main.css"/><script src="/docs/19/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/19/es"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://developer.4d.com/docs" target="_self">v19 R4 BETA</a></li><li class=""><a href="https://developer.4d.com/docs/Rx" target="_self">v19 R3</a></li><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/19/img/language.svg" alt="Languages icon"/>Español</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/19/en/API/EntityClass.html">English</a></li><li><a href="/docs/19/ja/API/EntityClass.html">日本語</a></li><li><a href="/docs/19/de/API/EntityClass.html">Deutsch</a></li><li><a href="/docs/19/fr/API/EntityClass.html">Français</a></li><li><a href="/docs/19/pt/API/EntityClass.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Clases API</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Comencemos<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/GettingStarted/installation.html">Instalación</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Gestión de proyecto<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Project/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Project/creating.html">Working with a project</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Project/architecture.html">Arquitectura de un proyecto</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Project/documentation.html">Documentar un proyecto</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Project/compiler.html">Compilación</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Conceptos del lenguaje 4D<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/about.html">Acerca del lenguaje 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/quick-tour.html">Un recorrido rápido</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/data-types.html">Tipos de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/boolean.html">Booleano</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/date.html">Fecha</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/null-undefined.html">Null e indefinido</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/number.html">Número (Real, Entero largo, Entero)</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/object.html">Objeto</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/picture.html">Imagen</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/pointer.html">Puntero</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/string.html">Cadena</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/time.html">Hora</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/variables.html">Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/arrays.html">Arrays</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/methods.html">Métodos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/parameters.html">Parámetros</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/shared.html">Objetos y colecciones compartidos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/classes.html">Clases</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/control-flow.html">Condiciones y bucles</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/branching.html">Estructuras condicionales</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/looping.html">Estructuras repetitivas (bucles)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/19/es/Tags/tags.html">Etiquetas de transformación</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/error-handling.html">Gestión de errores</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/interpreted-compiled.html">Modos interpretado y compilado</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/components.html">Componentes</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Concepts/identifiers.html">Identificadores</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/ORDA/overview.html">¿Qué es ORDA?</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/ORDA/dsmapping.html">Objeto del modelo de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/ORDA/ordaClasses.html">Clases del modelo de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/ORDA/entities.html">Trabajar con los datos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/ORDA/datastores.html">Utilizar un almacén de datos remoto</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/ORDA/glossary.html">Glosario</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Clases API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/API/overview.html">Generalidades - API de clases</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/ClassClass.html">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/CollectionClass.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/CryptoKeyClass.html">CryptoKey</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/DataClassClass.html">DataClass</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/DataClassAttributeClass.html">DataClassAttribute</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/DataStoreClass.html">DataStore</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/EmailObjectClass.html">Email</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/19/es/API/EntityClass.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/EntitySelectionClass.html">EntitySelection</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/FileClass.html">File</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/FolderClass.html">Folder</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/FunctionClass.html">Formula</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/IMAPTransporterClass.html">IMAPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/MailAttachmentClass.html">MailAttachment</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/POP3TransporterClass.html">POP3Transporter</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/SessionClass.html">Sesión</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/SignalClass.html">Signal</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/SMTPTransporterClass.html">SMTPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/WebServerClass.html">WebServer</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/ZipArchiveClass.html">ZIPArchive</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/ZipFileClass.html">ZIPFile</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/API/ZipFolderClass.html">ZIPFolder</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Preferencias<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Preferences/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Preferences/general.html">Página general</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Preferences/structure.html">Structure Page</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Preferences/forms.html">Página formulario</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Preferences/methods.html">Methods Page</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Preferences/shortcuts.html">Shortcuts Page</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Administración<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Admin/webAdmin.html">Administración Web</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Admin/dataExplorer.html">Explorador de datos Web</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Admin/licenses.html">Gestión de licencias 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Admin/tls.html">Protocolo TLS (HTTPS)</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Admin/cli.html">Interfaz de línea de comando</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Admin/debugLogFiles.html">Description of log files</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Derechos de acceso<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Users/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Users/editing.html">Gestión de usuarios y grupos 4D</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">CSM<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/information.html">Página de información</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/analysis.html">Página Análisis de actividades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/verify.html">Página Verificación</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/backup.html">Página de respaldo</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/compact.html">Página compactado</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/rollback.html">Página Retroceso</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/restore.html">Página Restauración</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/repair.html">Página Reparación</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/MSC/encrypt.html">Página de cifrado</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Copia de seguridad y restauración<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Backup/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Backup/backup.html">Copia de seguridad</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Backup/settings.html">Parámetros de la copia de seguridad</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Backup/log.html">Archivo de historial (.journal)</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Backup/restore.html">Restaurar</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Servidor Web<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/webServer.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/webServerConfig.html">Configuración</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/webServerAdmin.html">Administración</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/webServerObject.html">Objeto servidor web</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Desarrollo web<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/gettingStarted.html">Comencemos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/templates.html">Páginas de plantillas</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/httpRequests.html">Processing HTTP requests</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/allowProject.html">Permitir métodos proyecto</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/errorPages.html">Custom HTTP Error Pages</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/authentication.html">Autenticación</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/sessions.html">Sesiones usuario</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/WebServer/preemptiveWeb.html">Using preemptive web processes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Servidor REST<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/gettingStarted.html">Comencemos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/configuration.html">Configuración del servidor</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/authUsers.html">Usuarios y sesiones</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/genInfo.html">Obtener información del servidor</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/manData.html">Manipulación de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/classFunctions.html">Llamar a las funciones de clase ORDA</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/REST_requests.html">Acerca de las peticiones REST</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (general)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/catalog.html">$catalog</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/directory.html">$directory</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/info.html">$info</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/upload.html">$upload</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (dataClass)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/{dataClass}.html">{dataClass}</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/asArray.html">$asArray</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/atomic_$atonce.html">$atomic/$atonce</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/attributes.html">$attributes</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/binary.html">$binary</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/compute.html">$compute</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/distinct.html">$distinct</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/entityset.html">$entityset</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/expand.html">$expand</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/filter.html">$filter</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/imageformat.html">$imageformat</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/method.html">$method</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/orderby.html">$orderby</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/querypath.html">$querypath</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/queryplan.html">$queryplan</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/savedfilter.html">$savedfilter</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/savedorderby.html">$savedorderby</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/skip.html">$skip</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/timeout.html">$timeout</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/top_$limit.html">$top/$limit</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/REST/version.html">$version</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Cliente/Servidor<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Desktop/clientServer.html">Client/Server Management</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Formularios<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/forms.html">Acerca de los formularios 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/formEditor.html">Editor de formularios</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/macros.html">Macros del editor de formularios</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/objectLibrary.html">Librerías de objetos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/stylesheets.html">Hojas de estilo</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/pictures.html">Imágenes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Propiedades de los formularios<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/jsonReference.html">Lista de propiedades JSON</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/action.html">Acción</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/propertiesForm.html">Propiedades de los formularios</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/formSize.html">Tamaño formulario</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/markers.html">Marcadores</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/menu.html">Menú</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/print.html">Imprimir</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormEditor/windowSize.html">Tamaño de la ventana</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Objetos formularios<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/formObjectsOverview.html">Acerca de los objetos formularios 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/buttonOverview.html">Botón</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/buttonGridOverview.html">Rejilla de botones</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/checkboxOverview.html">Check Box</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/comboBoxOverview.html">Combo Box</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/dropdownListOverview.html">Lista desplegable</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/groupBox.html">Área de grupo</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/inputOverview.html">Entrada</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/listOverview.html">Lista jerárquica</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/listboxOverview.html">List Box</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/pictureButtonOverview.html">Botón Imagen</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/picturePopupMenuOverview.html">Menú pop-up imagen</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/pluginAreaOverview.html">Área de plug-in</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/progressIndicator.html">Indicador de progreso</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/radiobuttonOverview.html">Botón radio</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/ruler.html">Regla</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/shapesOverview.html">Formas</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/spinner.html">Spinner</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/splitters.html">Separador</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/staticPicture.html">Imagen estática</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/stepper.html">Stepper</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/subformOverview.html">Subformulario</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/tabControl.html">Pestañas</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/text.html">Texto</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/webAreaOverview.html">Área Web</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/viewProAreaOverview.html">Área 4D View Pro</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/writeProAreaOverview.html">Área 4D Write Pro</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Propiedades de los objetos formulario<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesReference.html">Lista de propiedades JSON</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesAction.html">Acción</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesAnimation.html">Animación</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesAppearance.html">Apariencia</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesBackgroundAndBorder.html">Fondo y borde</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesCoordinatesAndSizing.html">Coordenadas y dimensiones</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesCrop.html">Corte</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesDataSource.html">Fuente de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesDisplay.html">Visualización</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesEntry.html">Entrada</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesFooters.html">Pies</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesGridlines.html">Rejillas</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesHeaders.html">Encabezados</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesHelp.html">Ayuda</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesHierarchy.html">Jerarquía</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesListBox.html">List Box</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesObject.html">Objetos</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesPicture.html">Imagen</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesPlugIns.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesPrint.html">Imprimir</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesRangeOfValues.html">Rango de valores</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesResizingOptions.html">Opciones de redimensionamiento</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesScale.html">Escala</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesSubform.html">Subformulario</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesText.html">Texto</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesTextAndPicture.html">Texto e Imagen</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/FormObjects/propertiesWebArea.html">Área Web</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Eventos formulario<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onActivate.html">On Activate</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onAfterEdit.html">On After Edit</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onAfterKeystroke.html">On After Keystroke</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onAfterSort.html">On After Sort</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onAlternativeClick.html">On Alternative Click</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onBeforeDataEntry.html">On Before Data Entry</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onBeforeKeystroke.html">On Before Keystroke</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onBeginDragOver.html">On Begin Drag Over</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onBeginUrlLoading.html">On Begin URL Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onBoundVariableChange.html">On Bound Variable Change</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onClicked.html">On Clicked</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onCloseBox.html">On Close Box</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onCloseDetail.html">On Close Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onCollapse.html">On Collapse</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onColumnMoved.html">On Column Moved</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onColumnResize.html">On Column Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onDataChange.html">On Data Change</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onDeactivate.html">On Deactivate</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onDeleteAction.html">On Delete Action</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onDisplayDetail.html">On Display Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onDoubleClicked.html">On Double Clicked</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onDragOver.html">On Drag Over</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onDrop.html">On Drop</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onEndUrlLoading.html">On End URL Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onExpand.html">On Expand</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onFooterClick.html">On Footer Click</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onGettingFocus.html">On Getting focus</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onHeader.html">On Header</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onHeaderClick.html">On Header Click</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onLoad.html">On Load</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onLoadRecord.html">On Load Record</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onLongClick.html">On Long Click</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onLosingFocus.html">On Losing focus</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onMenuSelected.html">On Menu Selected</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onMouseEnter.html">On Mouse Enter</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onMouseLeave.html">On Mouse Leave</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onMouseMove.html">On Mouse Move</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onMouseUp.html">On Mouse Up</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onOpenDetail.html">On Open Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onOpenExternalLink.html">On Open External Link</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onOutsideCall.html">On Outside Call</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onPageChange.html">On Page Change</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onPlugInArea.html">On Plug in Area</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onPrintingBreak.html">On Printing Break</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onPrintingDetail.html">On Printing Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onPrintingFooter.html">On Printing Footer</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onResize.html">On Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onRowMoved.html">On Row Moved</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onRowResize.html">On Row Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onScroll.html">On Scroll</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onSelectionChange.html">On Selection Change</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onTimer.html">On Timer</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onUnload.html">On Unload</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onUrlFiltering.html">On URL Filtering</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onUrlLoadingError.html">On URL Loading Error</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onUrlResourceLoading.html">On URL Resource Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onValidate.html">On Validate</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onVpRangeChanged.html">On VP Range Changed</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onVpReady.html">On VP Ready</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Events/onWindowOpeningDenied.html">On Window Opening Denied</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Menús<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Menus/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Menus/creating.html">Creación de menús y barras de menús</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Menus/properties.html">Propiedades de los menús</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Menus/bars.html">Barras de menús</a></li><li class="navListItem"><a class="navItem" href="/docs/19/es/Menus/sdi.html">Mode SDI bajo Windows</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Build application<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/19/es/Desktop/building.html">Building a project package</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/19/docs/API/EntityClass.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Entity</h1></header><article><div><span><p>Una <a href="/docs/19/es/ORDA/dsmapping.html#entity">entidad</a> es una instancia de una <a href="/docs/19/es/ORDA/dsmapping.html#dataclass">Dataclass</a>, como un registro de la tabla que coincide con la dataclass en su datastore asociado. Contiene los mismos atributos que la clase de datos, así como los valores de los datos y las propiedades y funciones específicas.</p>
<h3><a class="anchor" aria-hidden="true" id="resumen"></a><a href="#resumen" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resumen</h3>
<table>
<thead>
<tr><th></th></tr>
</thead>
<tbody>
<tr><td><a href="#attributename"><strong><em>.attributeName</em></strong> : any</a><p>    almacena el valor del atributo para la entidad</td></tr>
<tr><td><a href="#clone"><strong>.clone()</strong> : 4D.Entity</a><p>    crea en memoria una nueva entidad que hace referencia al mismo registro que la entidad original</td></tr>
<tr><td><a href="#diff"><strong>.diff</strong>( <em>entityToCompare</em> : 4D.Entity { ; <em>attributesToCompare</em> : Collection } ) : Collection</a><p>    compara el contenido de dos entidades y devuelve sus diferencias</td></tr>
<tr><td><a href="#drop"><strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</a><p>    elimina los datos contenidos en la entidad del datastore</td></tr>
<tr><td><a href="#first"><strong>.first()</strong>: 4D.Entity</a><p>    devuelve una referencia a la entidad en primera posición de la selección de entidades a la que pertenece la entidad</td></tr>
<tr><td><a href="#fromobject"><strong>.fromObject</strong>( <em>filler</em> : Object )</a><p>    llena una entidad con el contenido <em>filler</em>.</td></tr>
</tbody>
</table>
<blockquote>
<p>Esta función modifica la entidad original.</p>
</blockquote>
<p>El mapeo entre el objeto y la entidad se realiza sobre los nombres de los atributos:</p>
<ul>
<li>Si una propiedad del objeto no existe en la dataclass, se ignora.</li>
<li>Los tipos de datos deben ser equivalentes. Si hay una diferencia de tipo entre el objeto y la dataclass, 4D intenta convertir los datos siempre que sea posible (ver <a href="/docs/19/es/Concepts/data-types.html#converting-data-types"><code>Convertir tipos de datos</code></a>), de lo contrario el atributo se deja sin tocar.</li>
<li>La llave primaria puede darse tal cual o con una propiedad &quot;__KEY&quot; (llenada con el valor de la llave primaria). Si no existe ya en la dataclass, la entidad se crea con el valor dado cuando se llama a <a href="#save">.save()</a>. Si no se da la llave primaria, se crea la entidad y se asigna el valor de la llave primaria con respecto a las reglas de la base de datos. El autoincremento sólo se calcula si la llave primaria es nula.</li>
</ul>
<p><em>filler</em> puede manejar una entidad relacionada bajo las siguientes condiciones:</p>
<ul>
<li><em>filler</em> contiene la propia llave foránea, o</li>
<li><em>filler</em> contiene un objeto de propiedad con el mismo nombre que la entidad relacionada, que contiene una única propiedad denominada &quot;__KEY&quot;.</li>
<li>si la entidad relacionada no existe, se ignora.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="ejemplo"></a><a href="#ejemplo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<p>Con el siguiente objeto $o:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mary"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Smith"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">36500</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1958-10-27T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: true,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">411</span>,<span class="hljs-comment">// relatedEntity dada con PK</span>
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span> <span class="hljs-comment">// relatedEntity dada con PK</span>
}
</code></pre>
<p>El siguiente código creará una entidad con entidades relacionadas con el gerente y el empleador.</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$o </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity
 <span class="hljs-variable">$entity</span>:=ds.Emp.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$o</span>)
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
</code></pre>
<p>También puede utilizar una entidad relacionada dada como objeto:</p>
<pre><code class="hljs css language-4d">
{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Marie"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Lechat"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">68400</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1971-09-03T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"employer"</span>: {<span class="hljs-comment">// relatedEntity dada como un objeto</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"21"</span>
    },
    <span class="hljs-string">"manager"</span>: {<span class="hljs-comment">// relatedEntity dada como un objeto</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"411"</span>
    }
}
<span class="hljs-comment">```|</span>
| [**.<span class="hljs-function">getDataClass</span>()** : 4D.DataClass](#getdataclass)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve la clase de datos de la entidad|
| [**.getKey**( { *mode* : Integer } ) : Text&lt;br&gt;**.getKey**( { *mode* : Integer } ) : Integer](#getkey)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve el valor de la llave primaria|
| [**.<span class="hljs-function">getSelection</span>()**: 4D.EntitySelection](#getselection)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve la selección de entidades a la que pertenece la entidad|
| [**.<span class="hljs-function">getStamp</span>()** : Integer](#getstamp)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve el valor actual del sello de la entidad|
| [**.indexOf**( { *entitySelection* : 4D.EntitySelection } ) : Integer](#indexof)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve la posición de la entidad en una selección de entidades|
| [**.<span class="hljs-function">isNew</span>()** : Boolean](#isnew)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve <span class="hljs-literal">True</span> si la entidad a la que se aplica acaba de ser creada y aún no ha sido guardada en el datastore|
| [**.<span class="hljs-function">last</span>()** : 4D.Entity](#last)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
| [**.lock**( { *mode* : Integer } ) : Object](#lock)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pone un bloqueo pesimista en el registro referenciado por la entidad|
| [**.<span class="hljs-function">next</span>()** : 4D.Entity](#next)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve una referencia a la siguiente entidad en la selección de entidades a la que pertenece la entidad|
| [**.<span class="hljs-function">previous</span>()**  : 4D.Entity](#previous)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve una referencia a la entidad anterior en la selección de entidades a la que pertenece la entidad|
| [**.<span class="hljs-function">reload</span>()** : Object](#reload)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;recarga el contenido de la entidad en memoria|
| [**.save**( { *mode* : Integer } ) : Object](#save)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;guarda los cambios realizados en la entidad|
| [**.toObject**() : Object&lt;br&gt;**.toObject**( *filterString* : Text { ; *options* : Integer}  ) : Object&lt;br&gt;**.toObject**( *filterCol* : Collection { ; *options* : Integer } ) : Object](#toobject)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve un objeto que ha sido construido a partir de la entidad|
| [**.<span class="hljs-function">touched</span>()** : Boolean](#touched)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;comprueba si un atributo de la entidad ha sido modificado o no desde que la entidad fue cargada en memoria o guardada|
| [**.<span class="hljs-function">touchedAttributes</span>()** : Collection](#touchedattributes)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;devuelve los nombres de los atributos que han sido modificados desde que la entidad fue cargada en memoria|
| [**.<span class="hljs-function">unlock</span>()** : Object](#unlock)&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;elimina el bloqueo pesimista del registro que coincide con la entidad|






## .*attributeName*

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |
&lt;/details&gt;

***.attributeName*** : any

#### Descripción

Todo atributo de la dataclass está disponible como una propiedad de una entidad, que almacena el valor del atributo para la entidad.
&gt; Los atributos dataclass también se pueden alcanzar utilizando la sintaxis alternativa con \[ ].

El tipo de valor del atributo depende del tipo [kind](/docs/<span class="hljs-number">19</span>/es/API/DataClassAttributeClass.html#kind)<span class="hljs-function"> de atributo </span>(relación o almacenamiento):

*   Si el tipo de *attributeName* es **storage**: <span class="hljs-comment">`.attributeName` devuelve un valor del mismo tipo que *attributeName*.</span>
*   Si el tipo de *attributeName* es **relatedEntity**: <span class="hljs-comment">`.attributeName` devuelve la entidad relacionada. Los valores de la entidad relacionada están disponibles directamente a través de las propiedades en cascada, por ejemplo "myEntity.employer.employees\[0].lastname".</span>
*   Si el tipo de *attributeName* es **relatedEntities**: <span class="hljs-comment">`.attributeName` devuelve una nueva entity selection de entidades relacionadas. Se eliminan los duplicados (se devuelve una entity selection desordenada).</span>


#### Ejemplo

<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$myEntity </span>: cs.EmployeeEntity
 <span class="hljs-variable">$myEntity</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-comment">//Crear una nueva entidad</span>
 <span class="hljs-variable">$myEntity</span>.name:=<span class="hljs-string">"Dupont"</span> <span class="hljs-comment">// asignar 'Dupont' al atributo 'name'</span>
 <span class="hljs-variable">$myEntity</span>.firstname:=<span class="hljs-string">"John"</span> <span class="hljs-comment">//asignar 'John' al atributo 'firstname'</span>
 <span class="hljs-variable">$myEntity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//guardar la entidad</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="clone"></a><a href="#clone" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.clone()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.clone()</strong> : 4D.Entity</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Nueva entidad que hace referencia al registro</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción"></a><a href="#descripción" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.clone()</code> crea en memoria una nueva entidad que hace referencia al mismo registro que la entidad original. Esta función permite actualizar las entidades por separado.</p>
<blockquote>
<p>Tenga en cuenta que toda modificación realizada a las entidades se guardará en el registro referenciado sólo cuando se ejecute la función <a href="#save"><code>.save( )</code></a>.</p>
</blockquote>
<p>Esta función sólo puede utilizarse con entidades ya guardadas en la base de datos. No se puede llamar a una entidad recién creada (para la que <a href="#isnew"><code>.isNew()</code></a> devuelve <strong>True</strong>).</p>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-1"></a><a href="#ejemplo-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp</span>; <span class="hljs-variable">$empCloned </span>: cs.EmployeeEntity
 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$empCloned</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">clone</span>()

 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">//Las actualizaciones realizadas en $emp no se realizan en $empCloned</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="diff"></a><a href="#diff" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.diff()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.diff</strong>( <em>entityToCompare</em> : 4D.Entity { ; <em>attributesToCompare</em> : Collection } ) : Collection</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>entityToCompare</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entidad a comparar con la entidad original</td></tr>
<tr><td>attributesToCompare</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Nombre de los atributos a comparar</td></tr>
<tr><td>Resultado</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Diferencias entre las entidades</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-1"></a><a href="#descripción-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.diff()</code> compara el contenido de dos entidades y devuelve sus diferencias.</p>
<p>En <em>entityToCompare</em>, pase la entidad a comparar con la entidad original.</p>
<p>En <em>attributesToCompare</em>, puede designar atributos específicos para comparar. Si se suministra, la comparación se realiza sólo en los atributos especificados. Si no se suministra, se devuelven todas las diferencias entre las entidades.</p>
<p>Las diferencias se devuelven como una colección de objetos cuyas propiedades son:</p>
<table>
<thead>
<tr><th>Nombre de propiedad</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>attributeName</td><td>Cadena</td><td>Nombre del atributo</td></tr>
<tr><td>value</td><td>cualquiera - Depende del tipo de atributo</td><td>Valor del atributo en la entidad</td></tr>
<tr><td>otherValue</td><td>cualquiera - Depende del tipo de atributo</td><td>Valor del atributo en <em>entityToCompare</em></td></tr>
</tbody>
</table>
<p>Sólo se incluyen en la colección los atributos con valores diferentes. Si no se encuentran diferencias, <code>.diff()</code> devuelve una colección vacía.</p>
<p>La función se aplica a las propiedades cuyo <a href="/docs/19/es/API/DataClassAttributeClass.html#kind">kind</a> es <strong>storage</strong> o <strong>relatedEntity</strong>. En caso de que se haya actualizado una entidad relacionada (es decir, la llave foránea), el nombre de la entidad relacionada y su nombre de llave primaria se devuelven como propiedades <em>attributeName</em> (<em>value</em> y <em>otherValue</em> están vacíos para el nombre de la entidad relacionada).</p>
<p>Si una de las entidades comparadas es <strong>Null</strong>, se produce un error.</p>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-1-1"></a><a href="#ejemplo-1-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$diff1</span>; <span class="hljs-variable">$diff2 </span>: Collection
 employee:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"ID=1001"</span>).<span class="hljs-function">first</span>()
 <span class="hljs-variable">$clone</span>:=employee.<span class="hljs-function">clone</span>()
 employee.firstName:=<span class="hljs-string">"MARIE"</span>
 employee.lastName:=<span class="hljs-string">"SOPHIE"</span>
 employee.salary:=<span class="hljs-number">500</span>
 <span class="hljs-variable">$diff1</span>:=<span class="hljs-variable">$clone</span>.<span class="hljs-function">diff</span>(employee) <span class="hljs-comment">// Se devuelven todas las diferencias</span>
 <span class="hljs-variable">$diff2</span>:=<span class="hljs-variable">$clone</span>.<span class="hljs-function">diff</span>(employee;New collection<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"lastName"</span>))
  <span class="hljs-comment">// Sólo se devuelven las diferencias en el firstName y lastName</span>
</code></pre>
<p>$diff1:</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Natasha"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"MARIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Locke"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"SOPHIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"salary"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">66600</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">500</span>
    }
]
<span class="hljs-variable">$diff2</span>:

[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Natasha"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"MARIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Locke"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"SOPHIE"</span>
    }
]
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2"></a><a href="#ejemplo-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> vCompareResult1; vCompareResult2; vCompareResult3; <span class="hljs-variable">$attributesToInspect </span>: Collection
 vCompareResult1:=New collection
 vCompareResult2:=New collection
 vCompareResult3:=New collection
 <span class="hljs-variable">$attributesToInspect</span>:=New collection

 <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">636</span>)
 <span class="hljs-variable">$e2</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">636</span>)

 <span class="hljs-variable">$e1</span>.firstName:=<span class="hljs-variable">$e1</span>.firstName+<span class="hljs-string">" update"</span>
 <span class="hljs-variable">$e1</span>.lastName:=<span class="hljs-variable">$e1</span>.lastName+<span class="hljs-string">" update"</span>

 <span class="hljs-variable">$c</span>:=ds.Company.<span class="hljs-function">get</span>(<span class="hljs-number">117</span>)
 <span class="hljs-variable">$e1</span>.employer:=<span class="hljs-variable">$c</span>
 <span class="hljs-variable">$e2</span>.salary:=<span class="hljs-number">100</span>

 <span class="hljs-variable">$attributesToInspect</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"firstName"</span>)
 <span class="hljs-variable">$attributesToInspect</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"lastName"</span>)

 vCompareResult1:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>)
 vCompareResult2:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>;<span class="hljs-variable">$attributesToInspect</span>)
 vCompareResult3:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>;<span class="hljs-variable">$e1</span>.<span class="hljs-function">touchedAttributes</span>())
</code></pre>
<p>vCompareResult1 (se devuelven todas las diferencias):</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"salary"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">33500</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">100</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employerID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">117</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">118</span>
    },
  {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employer"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"[object Entity]"</span>,<span class="hljs-comment">// Entity 117 from Company</span>
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"[object Entity]"</span><span class="hljs-comment">// Entity 118 from Company</span>
    }
]
</code></pre>
<p>vCompareResult2 (sólo se devuelven las diferencias en $attributesToInspect)</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    }
]
</code></pre>
<p>vCompareResult3 (sólo se devuelven las diferencias en atributos tocados $e1)</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employerID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">117</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">118</span>
    },
     {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employer"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"[object Entity]"</span>,<span class="hljs-comment">// Entity 117 from Company</span>
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"[object Entity]"</span><span class="hljs-comment">// Entity 118 from Company</span>

    }
]
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="drop"></a><a href="#drop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.drop()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk force drop if stamp changed</code>: activa el soltar incluso si el sello ha cambiado</td></tr>
<tr><td>Resultado</td><td>Objeto</td><td style="text-align:center">&lt;-</td><td>Resultado de la operación soltar</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-2"></a><a href="#descripción-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.drop()</code> elimina los datos contenidos en la entidad del datastore, de la tabla relacionada con su Dataclass. Tenga en cuenta que la entidad permanece en la memoria.</p>
<p>En una aplicación multiusuario o multiproceso, la función <code>.drop()</code> se ejecuta bajo un mecanismo de <a href="/docs/19/es/ORDA/entities.html#entity-locking">&quot;bloqueo optimista&quot;</a>, en el que un sello de bloqueo interno se incrementa automáticamente cada vez que se guarda el registro.</p>
<p>Por defecto, si se omite el parámetro <em>mode</em>, la función devolverá un error (ver más abajo) si la misma entidad fue modificada (es decir, el sello ha cambiado) por otro proceso o usuario en el ínterin.</p>
<p>De lo contrario, puede pasar la opción <code>dk force drop if stamp changed</code> en el parámetro <em>mode</em>: en este caso, la entidad se abandona aunque el sello haya cambiado (y la llave primaria siga siendo la misma).</p>
<p><strong>Resultado</strong></p>
<p>El objeto devuelto por <code>.drop( )</code> contiene las siguientes propiedades:</p>
<table>
<thead>
<tr><th>Propiedad</th><th></th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>success</td><td></td><td>booleano</td><td>true si la acción de soltar tiene éxito, false en caso contrario.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponible sólo en caso de error:</em></strong></td></tr>
<tr><td>status(*)</td><td></td><td>number</td><td>Código de error, ver abajo</td></tr>
<tr><td>statusText(*)</td><td></td><td>texto</td><td>Descripción del error, ver abajo</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponible sólo en caso de error de bloqueo pesimista:</em></strong></td></tr>
<tr><td>LockKindText</td><td></td><td>texto</td><td>&quot;Locked by record&quot;</td></tr>
<tr><td>lockInfo</td><td></td><td>objeto</td><td>Información sobre el origen del bloqueo</td></tr>
<tr><td></td><td>task_id</td><td>number</td><td>Id del proceso</td></tr>
<tr><td></td><td>user_name</td><td>texto</td><td>Nombre de usuario de la sesión en la máquina</td></tr>
<tr><td></td><td>user4d_alias</td><td>texto</td><td>Alias de usuario si está definido por <code>SET USER ALIAS</code>, si no, nombre de usuario en el directorio 4D</td></tr>
<tr><td></td><td>host_name</td><td>texto</td><td>Nombre de la máquina</td></tr>
<tr><td></td><td>task_name</td><td>texto</td><td>Nombre del proceso</td></tr>
<tr><td></td><td>client_version</td><td>texto</td><td></td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponible sólo en caso de error grave (un error grave puede ser intentar duplicar una llave primaria, disco lleno...):</em></strong></td></tr>
<tr><td>errors</td><td></td><td>collection of objects</td><td></td></tr>
<tr><td></td><td>message</td><td>texto</td><td>Mensaje de error</td></tr>
<tr><td></td><td>component signature</td><td>texto</td><td>firma del componente interno (por ejemplo, &quot;dmbg&quot; significa el componente de la base)</td></tr>
<tr><td></td><td>errCode</td><td>number</td><td>Código de error</td></tr>
</tbody>
</table>
<p>(*) Los siguientes valores pueden ser devueltos en las propiedadese <em>status</em> y <em>statusText</em> del objeto <em>Result</em> en caso de error:</p>
<table>
<thead>
<tr><th>Constante</th><th>Valor</th><th>Comentario</th></tr>
</thead>
<tbody>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>La entidad ya no existe en los datos. Este error puede ocurrir en los siguientes casos:<br><li>la entidad ha sido abandonada (el sello ha cambiado y el espacio de memoria está ahora libre)</li><li>la entidad ha sido eliminada y sustituida por otra con otra llave primaria (el sello ha cambiado y una nueva entidad utiliza ahora el espacio de memoria). Cuando se utiliza entity.drop( ), este error puede ser devuelto cuando se utiliza la opción dk force drop if stamp changed. Cuando se utiliza entity.lock( ), este error puede ser devuelto cuando se utiliza la opción dk reload if stamp changed</li><p><strong>statusText asociado</strong>: &quot;La entidad ya no existe&quot;</td></tr>
<tr><td><code>dk status locked</code></td><td>3</td><td>La entidad está bloqueada por un bloqueo pesimista.<br><strong>statusText asociado</strong>: &quot;Ya está bloqueado&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>Un error grave es un error de base de datos de bajo nivel (por ejemplo, una llave duplicada), un error de hardware, etc.<br><strong>statusText asociado</strong>: &quot;Otro error&quot;</td></tr>
<tr><td><code>dk status stamp has changed</code></td><td>2</td><td>El valor del sello interno de la entidad no coincide con el de la entidad almacenada en los datos (bloqueo optimista).<br><li>con <code>.save( )</code>: error sólo si no se utiliza la opción <code>dk auto merge</code></li><li>con <code>.drop( )</code>: error sólo si no se utiliza la opción <code>dk force drop if stamp changed</code></li><li>con <code>.lock( )</code>: error sólo si no se utiliza la opción <code>dk reload if stamp changed</code></li><li>**statusText asociado **: &quot;El sello ha cambiado&quot;</li></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-1-2"></a><a href="#ejemplo-1-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 1</h4>
<p>Ejemplo sin la opción <code>dk force drop if stamp changed</code>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">drop</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName) <span class="hljs-comment">//La entidad soltada permanece en la memoria</span>
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-1"></a><a href="#ejemplo-2-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<p>Ejemplo con la opción <code>dk force drop if stamp changed</code>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">drop</span>(dk force drop if stamp changed)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName) <span class="hljs-comment">//La entidad soltada permanece en la memoria</span>
    :(<span class="hljs-variable">$status</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="first"></a><a href="#first" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.first()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.first()</strong>: 4D.Entity</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Referencia a la primera entidad de una selección de entidades (Null si no se encuentra)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-3"></a><a href="#descripción-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.first()</code> devuelve una referencia a la entidad en primera posición de la selección de entidades a la que pertenece la entidad.</p>
<p>Si la entidad no pertenece a ninguna selección de entidades existente (es decir, <a href="#getselection">.getSelection( )</a> devuelve Null), la función devuelve un valor Null.</p>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-3"></a><a href="#ejemplo-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$firstEmployee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta selección de entidades contiene 3 entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">2</span>]
 <span class="hljs-variable">$firstEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">first</span>() <span class="hljs-comment">//$firstEmployee es la primera entidad de la selección de entidades $employees</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fromobject"></a><a href="#fromobject" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.fromObject()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.fromObject</strong>( <em>filler</em> : Object )</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>filler</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Objeto a partir del cual se llena la entidad</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-4"></a><a href="#descripción-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.fromObject()</code> llena una entidad con el contenido <em>filler</em>.</p>
<blockquote>
<p>Esta función modifica la entidad original.</p>
</blockquote>
<p>El mapeo entre el objeto y la entidad se realiza sobre los nombres de los atributos:</p>
<ul>
<li>Si una propiedad del objeto no existe en la dataclass, se ignora.</li>
<li>Los tipos de datos deben ser equivalentes. Si hay una diferencia de tipo entre el objeto y la dataclass, 4D intenta convertir los datos siempre que sea posible (ver <a href="/docs/19/es/Concepts/data-types.html#converting-data-types"><code>Convertir tipos de datos</code></a>), de lo contrario el atributo se deja sin tocar.</li>
<li>La llave primaria puede darse tal cual o con una propiedad &quot;__KEY&quot; (llenada con el valor de la llave primaria). Si no existe ya en la dataclass, la entidad se crea con el valor dado cuando se llama a <a href="#save">.save()</a>. Si no se da la llave primaria, se crea la entidad y se asigna el valor de la llave primaria con respecto a las reglas de la base de datos. El autoincremento sólo se calcula si la llave primaria es nula.</li>
</ul>
<p><em>filler</em> puede manejar una entidad relacionada bajo las siguientes condiciones:</p>
<ul>
<li><em>filler</em> contiene la propia llave foránea, o</li>
<li><em>filler</em> contiene un objeto de propiedad con el mismo nombre que la entidad relacionada, que contiene una única propiedad denominada &quot;__KEY&quot;.</li>
<li>si la entidad relacionada no existe, se ignora.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-4"></a><a href="#ejemplo-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<p>Con el siguiente objeto $o:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mary"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Smith"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">36500</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1958-10-27T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: true,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">411</span>,<span class="hljs-comment">// relatedEntity dada con PK</span>
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span> <span class="hljs-comment">// relatedEntity dada con PK</span>
}
</code></pre>
<p>El siguiente código creará una entidad con entidades relacionadas con el gerente y el empleador.</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$o </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity
 <span class="hljs-variable">$entity</span>:=ds.Emp.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$o</span>)
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
</code></pre>
<p>También puede utilizar una entidad relacionada dada como objeto:</p>
<pre><code class="hljs css language-4d">
{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Marie"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Lechat"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">68400</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1971-09-03T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"employer"</span>: {<span class="hljs-comment">// relatedEntity dada como un objeto</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"21"</span>
    },
    <span class="hljs-string">"manager"</span>: {<span class="hljs-comment">// relatedEntity dada como un objeto</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"411"</span>
    }
}
<span class="hljs-comment">```## .getDataClass()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17 R5  | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">getDataClass</span>()** : 4D.DataClass| Parámetros | Tipo         |    | Descripción                                  |
| ---------- | ------------ |:--:| -------------------------------------------- |
| Resultado  | 4D.DataClass | &lt;- | Objeto DataClass al que pertenece la entidad |#### Descripción

La función <span class="hljs-comment">`.getDataClass()`devuelve la clase de datos de la entidad. Esta función es útil al escribir código genérico.</span>


#### Ejemplo

El siguiente código genérico duplica cualquier entidad:

<span class="hljs-comment">```4d</span>
  <span class="hljs-comment">//método duplicate_entity </span>
  <span class="hljs-comment">//duplicate_entity($entity) </span>

 #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$entity </span>: 4D.Entity)<span class="hljs-keyword">  
 var</span> <span class="hljs-variable">$entityNew </span>: 4D.Entity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object

 <span class="hljs-variable">$entityNew</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">new</span>() <span class="hljs-comment">//crea una nueva entidad en la dataclass padre </span>
 <span class="hljs-variable">$entityNew</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$entity</span>.<span class="hljs-function">toObject</span>()) <span class="hljs-comment">//obtiene todos los atributos</span>
 <span class="hljs-variable">$entityNew</span>[<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getInfo</span>().primaryKey]:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//restablece la llave primaria</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entityNew</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//guarda la entidad duplicada</span>
<span class="hljs-comment">```## .getKey()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.getKey**( { *mode* : Integer } ) : Text&lt;br&gt;**.getKey**( { *mode* : Integer } ) : Integer| Parámetros | Tipo    |    | Descripción                                                                                               |
| ---------- | ------- |:--:| --------------------------------------------------------------------------------------------------------- |
| mode       | Integer | -&gt; | <span class="hljs-comment">`dk key as string`: la llave primaria se devuelve como una cadena, sin importar el tipo de llave primaria |</span>
| Resultado  | Texto   | &lt;- | Valor de la llave primaria de texto de la entidad                                                         |
| Resultado  | Integer | &lt;- | Valor de la llave primaria numérica de la entidad                                                         |#### Descripción

La función <span class="hljs-comment">`.getKey()`devuelve el valor de la llave primaria.</span>

<span class="hljs-function">Las llaves primarias pueden ser números </span>(enteros) o cadenas. Puede <span class="hljs-string">"forzar"</span> que el valor de la llave primaria devuelto sea una cadena, sin importar el tipo de llave primaria real, pasando la opción <span class="hljs-comment">`dk key as string` en el parámetro *mode*.</span>

#### Ejemplo


<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The primary key is "</span>+<span class="hljs-variable">$employee</span>.<span class="hljs-function">getKey</span>(dk key as string))
<span class="hljs-comment">```## .getSelection()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">getSelection</span>()**: 4D.EntitySelection| Parámetros | Tipo               |    | Descripción                                                              |
| ---------- | ------------------ |:--:| ------------------------------------------------------------------------ |
| Resultado  | 4D.EntitySelection | &lt;- |<span class="hljs-function"> Entity selection a la que pertenece la entidad </span>(nula si no se encuentra) |#### Descripción

La función <span class="hljs-comment">`.getSelection()`devuelve la selección de entidades a la que pertenece la entidad.</span>

Si la entidad no pertenece a una selección de entidades, la función devuelve <span class="hljs-literal">Null</span>.

#### Ejemplo


<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$employees2 </span>: cs.EmployeeSelection
 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>) <span class="hljs-comment">// Esta entidad no pertenece a ninguna selección de entidades</span>
 <span class="hljs-variable">$employees</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">getSelection</span>() <span class="hljs-comment">// $employees es Null</span>

 <span class="hljs-variable">$employees2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>) <span class="hljs-comment">//Esta selección de entidades contiene 6 entidades</span>
 <span class="hljs-variable">$emp</span>:=<span class="hljs-variable">$employees2</span>[<span class="hljs-number">0</span>]  <span class="hljs-comment">// Esta entidad pertenece a una selección de entidades</span>

<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"La entity selection contiene "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">getSelection</span>().length)+<span class="hljs-string">" entidades"</span>)
<span class="hljs-comment">```## .getStamp()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">getStamp</span>()** : Integer| Parámetros | Tipo    |    | Descripción                                               |
| ---------- | ------- |:--:| --------------------------------------------------------- |
| Resultado  | Integer | &lt;- |<span class="hljs-function"> Sello de la entidad </span>(<span class="hljs-number">0</span> si la entidad acaba de ser creada) |#### Descripción

La función <span class="hljs-comment">`.getStamp()`devuelve el valor actual del sello de la entidad.</span>

El sello interno se incrementa automáticamente en 4D cada vez que se guarda la entidad.<span class="hljs-function"> Gestiona los accesos y modificaciones concurrentes de los usuarios a las mismas entidades </span>(ver [**Bloqueo de entidades**](/docs/<span class="hljs-number">19</span>/es/ORDA/entities.html#entity-locking)).
&gt;<span class="hljs-function"> Para una entidad nueva </span>(nunca guardada), la función devuelve <span class="hljs-number">0.</span> Para saber si una entidad acaba de ser creada, se recomienda utilizar [.<span class="hljs-function">isNew</span>()](#isnew).


#### Ejemplo


<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$entity </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$stamp </span>: Integer

 <span class="hljs-variable">$entity</span>:=ds.Employee.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
 <span class="hljs-variable">$stamp</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getStamp</span>() <span class="hljs-comment">//$stamp=1</span>

 <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Wesson"</span>
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
 <span class="hljs-variable">$stamp</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getStamp</span>() <span class="hljs-comment">//$stamp=2</span>
<span class="hljs-comment">```## .indexOf()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.indexOf**( { *entitySelection* : 4D.EntitySelection } ) : Integer| Parámetros      | Tipo               |    | Descripción                                                               |
| --------------- | ------------------ |:--:| ------------------------------------------------------------------------- |
| entitySelection | 4D.EntitySelection | -&gt; | La posición de la entidad se da en función de esta selección de entidades |
| Resultado       | Integer            | &lt;- | Posición de la entidad en una selección de entidades                      |#### Descripción

La función <span class="hljs-comment">`.indexOf()`devuelve la posición de la entidad en una selección de entidades.</span>

Por defecto, si se omite el parámetro *entitySelection*, la función devuelve la posición de la entidad dentro de su propia selección de entidades. En caso contrario, devuelve la posición de la entidad dentro de la *entitySelection* especificada.

El valor resultante se incluye entre <span class="hljs-number">0</span> y la longitud de la selección de entidades <span class="hljs-number">-1.</span>

*   Si la entidad no tiene una selección de entidad o no pertenece a *entidadSelección*, la función devuelve <span class="hljs-number">-1.</span>
*   Si *entitySelection* es <span class="hljs-literal">Null</span> o no pertenece a la misma clase de datos que la entidad, se produce un error.

#### Ejemplo


<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta entity selection contiene 3 entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">1</span>] <span class="hljs-comment">//Esta entidad pertenece a una entity selection</span>
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"El índice de la entidad en su propia selección de entidades es "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employee</span>.<span class="hljs-function">indexOf</span>())) <span class="hljs-comment">//1</span>

 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>) <span class="hljs-comment">//Esta entidad no pertenece a una selección de entidades</span>
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"El índice de la entidad es "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employee</span>.<span class="hljs-function">indexOf</span>())) <span class="hljs-comment">// -1</span>
<span class="hljs-comment">```## .isNew()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">isNew</span>()** : Boolean| Parámetros | Tipo     |    | Descripción                                                                               |
| ---------- | -------- |:--:| ----------------------------------------------------------------------------------------- |
| Resultado  | Booleano | &lt;- | <span class="hljs-literal">True</span> si la entidad acaba de ser creada y aún no se ha guardado. En caso contrario, <span class="hljs-literal">False</span>. |#### Descripción

La función <span class="hljs-comment">`.isNew()`devuelve True si la entidad a la que se aplica acaba de ser creada y aún no ha sido guardada en el datastore. En caso contrario, devuelve False.</span>


#### Ejemplo


<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity

 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">new</span>()<span class="hljs-keyword">

 If</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">isNew</span>())
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"This is a new entity"</span>)<span class="hljs-keyword">
 End if</span>
<span class="hljs-comment">```## .last()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">last</span>()** : 4D.Entity| Parámetros | Tipo      |    | Descripción                                                                            |
| ---------- | --------- |:--:| -------------------------------------------------------------------------------------- |
| Resultado  | 4D.Entity | &lt;- |<span class="hljs-function"> Referencia a la última entidad de una selección de entidades </span>(<span class="hljs-literal">Null</span> si no se encuentra) |#### Descripción

La función <span class="hljs-comment">`.last()`devuelve una referencia a la entidad en la última posición de la selección de entidades a la que pertenece la entidad.</span>

<span class="hljs-function">Si la entidad no pertenece a ninguna selección de entidades existente </span>(es decir, [.<span class="hljs-function">getSelection</span>( )](#getselection) devuelve <span class="hljs-literal">Null</span>), la función devuelve un valor <span class="hljs-literal">Null</span>.


#### Ejemplo


<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$lastEmployee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta selección de entidades contiene 3 entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$lastEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">last</span>() <span class="hljs-comment">//$lastEmployee es la última entidad de la selección de entidades $employees</span>
<span class="hljs-comment">```## .lock()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.lock**( { *mode* : Integer } ) : Object| Parámetros | Tipo    |    | Descripción                                                                      |
| ---------- | ------- |:--:| -------------------------------------------------------------------------------- |
| mode       | Integer | -&gt; | <span class="hljs-comment">`dk reload if stamp changed`: recargar antes de bloquear si el sello ha cambiado |</span>
| Resultado  | Objeto  | &lt;- | Resultado de la operación de bloqueo                                             |#### Descripción

La función <span class="hljs-comment">`.lock()`pone un bloqueo pesimista en el registro referenciado por la entidad. El [bloqueo se establece](/docs/19/es/ORDA/entities.html#entity-locking) para un registro y todas las referencias de la entidad en el proceso actual.</span>

<span class="hljs-function">Otros procesos verán este registro como bloqueado </span>(la propiedad <span class="hljs-comment">`result.success` contendrá False si intentan bloquear la misma entidad usando esta función). Sólo las funciones ejecutadas en la sesión de "bloqueo" pueden editar y guardar los atributos de la entidad. La entidad puede ser cargada como de sólo lectura por otras sesiones, pero no podrán introducir y guardar valores.</span>

Un registro bloqueado se desbloquea:

*   cuando la función [<span class="hljs-comment">`unlock()`](#unlock) se llama en una entidad correspondiente en el mismo proceso</span>
*   automáticamente, cuando ya no es referenciado por ninguna entidad en la memoria. Por ejemplo, si el bloqueo se pone sólo en una referencia local de una entidad, la entidad se desbloquea cuando la función termina. Mientras haya referencias a la entidad en la memoria, el registro permanece bloqueado.

Por defecto, si se omite el parámetro *mode*,<span class="hljs-function"> la función devolverá un error </span>(ver más abajo)<span class="hljs-function"> si la misma entidad fue modificada </span>(es decir, el sello ha cambiado) por otro proceso o usuario en el ínterin.

De lo contrario, puede pasar la opción <span class="hljs-comment">`dk reload if stamp changed` en el parámetro *mode*: en este caso, no se devuelve error y la entidad se recarga cuando el sello cambia (si la entidad aún existe y la llave primaria sigue siendo la misma).</span>

**Resultado**

El objeto devuelto por <span class="hljs-comment">`.lock( )` contiene las siguientes propiedades:</span>

| Propiedad        |                     | Tipo                  | Descripción                                                                                                                 |
| ---------------- | ------------------- | --------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| success          |                     | booleano              |<span class="hljs-function"> true si la acción de bloqueo tiene éxito </span>(o si la entidad ya está bloqueada en el proceso actual), false en caso contrario. |
|                  |                     |                       | ***Disponible sólo si se utiliza la opción <span class="hljs-comment">`dk reload if stamp changed`:***                                                 |</span>
| **wasReloaded**  |                     | booleano              | true si la entidad fue recargada con éxito, false en caso contrario.                                                        |
|                  |                     |                       | ***Disponible sólo en caso de error:***                                                                                     |
|<span class="hljs-function"> status</span>(\*)     |                     | number                | Código de error, ver abajo                                                                                                  |
|<span class="hljs-function"> statusText</span>(\*) |                     | texto                 | Descripción del error, ver abajo                                                                                            |
|                  |                     |                       | ***Disponible sólo en caso de error de bloqueo pesimista:***                                                                |
| lockKindText     |                     | texto                 | <span class="hljs-string">"Locked by record"</span>                                                                                                          |
| lockInfo         |                     | objeto                | Información sobre el origen del bloqueo                                                                                     |
|                  | task_id             | number                | ID del Proceso                                                                                                              |
|                  | user_name           | texto                 | Nombre de usuario de la sesión en la máquina                                                                                |
|                  | user4d_alias        | texto                 | Nombre o alias del usuario 4D                                                                                               |
|                  | user4d_id           | number                | ID del usuario en el directorio de la base de datos 4D                                                                      |
|                  | host_name           | texto                 | Nombre de la máquina                                                                                                        |
|                  | task_name           | texto                 | Nombre del proceso                                                                                                          |
|                  | client_version      | texto                 |                                                                                                                             |
|                  |                     |                       | ***Disponible sólo en caso de error grave*** (la llave primaria ya existe, el disco está lleno...):                         |
| errors           |                     | collection of objects |                                                                                                                             |
|                  | message             | texto                 | Mensaje de error                                                                                                            |
|                  | component signature | texto                 |<span class="hljs-function"> firma del componente interno </span>(por ejemplo, <span class="hljs-string">"dmbg"</span> significa el componente de la base)                                       |
|                  | errCode             | number                | Código de error                                                                                                             |


(\*) Los siguientes valores pueden ser devueltos en las propiedades *status* y *statusText* del objeto *Result* en caso de error:

| Constante                                 | Valor | Comentario                                                                                                                                                                                                                                                    |
| ----------------------------------------- | ----- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span class="hljs-comment">`dk status entity does not exist anymore` | 5     | La entidad ya no existe en los datos. Este error puede ocurrir en los siguientes casos:&lt;li&gt;la entidad ha sido abandonada (el sello ha cambiado y el espacio de memoria está ahora libre)&lt;/li&gt;&lt;li&gt;la entidad ha sido eliminada y sustituida por otra con otra llave primaria (el sello ha cambiado y una nueva entidad utiliza ahora el espacio de memoria). Cuando se utiliza `.drop( )`, este error puede devolverse cuando se utiliza la opción dk force drop if stamp changed. Cuando se utiliza `.lock( )`, este error puede ser devuelto cuando se utiliza la opción `dk reload if stamp changed`&lt;/li&gt;&lt;br&gt;**statusText asociado**: "La entidad ya no existe"                                                       |</span>
| <span class="hljs-comment">`dk status locked`                        | 3     | La entidad está bloqueada por un bloqueo pesimista.&lt;p&gt;&lt;p&gt;**statusText asociado**: "Ya bloqueado"                                                                                                              |</span>
| <span class="hljs-comment">`dk status serious error`                 | 4     | Un error grave es un error de base de datos de bajo nivel (por ejemplo, una llave duplicada), un error de hardware, etc.&lt;p&gt;&lt;p&gt;**statusText asociado**: "Otro error"                                           |</span>
| <span class="hljs-comment">`dk status stamp has changed`             | 2     | El valor del sello interno de la entidad no coincide con el de la entidad almacenada en los datos (bloqueo optimista).&lt;li&gt;con `.save( )`: error sólo si no se utiliza la opción `dk auto merge`&lt;/li&gt;&lt;li&gt;con `.drop( )`: error sólo si no se utiliza la opción `dk force drop if stamp changed`&lt;/li&gt;&lt;li&gt;con `.lock( )`: error sólo si no se utiliza la opción `dk reload if stamp changed`&lt;/li&gt;&lt;br&gt;**statusText asociado**: "El sello ha cambiado" |</span>


#### Ejemplo <span class="hljs-number">1</span>

Ejemplo con error:

<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">716</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have locked "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName)
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-2"></a><a href="#ejemplo-2-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<p>Ejemplo con la opción <code>dk reload if stamp changed</code>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">717</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>(dk reload if stamp changed)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have locked "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName)
    :(<span class="hljs-variable">$status</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
<span class="hljs-comment">```## .next()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">next</span>()** : 4D.Entity| Parámetros | Tipo      |    | Descripción                                                                              |
| ---------- | --------- |:--:| ---------------------------------------------------------------------------------------- |
| Resultado  | 4D.Entity | &lt;- |<span class="hljs-function"> Referencia a la siguiente entidad en la selección de entidades </span>(<span class="hljs-literal">Null</span> si no se encuentra) |#### Descripción

La función <span class="hljs-comment">`.next()`devuelve una referencia a la siguiente entidad en la selección de entidades a la que pertenece la entidad.</span>

<span class="hljs-function">Si la entidad no pertenece a ninguna selección de entidades existente </span>(es decir, [.<span class="hljs-function">getSelection</span>()](#getselection) devuelve <span class="hljs-literal">Null</span>), la función devuelve un valor <span class="hljs-literal">Null</span>.

<span class="hljs-function">Si no hay una entidad siguiente válida en la selección de entidades </span>(es decir, se encuentra en la última entidad de la selección), la función devuelve <span class="hljs-literal">Null</span>. Si la siguiente entidad ha sido descartada,<span class="hljs-function"> la función devuelve la siguiente entidad válida </span>(y eventualmente <span class="hljs-literal">Null</span>).


#### Ejemplo

<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$nextEmployee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta selección de entidades contiene 3 entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$nextEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">next</span>() <span class="hljs-comment">//$nextEmployee es la segunda entidad de la selección de entidades $employees</span>

<span class="hljs-comment">```## .previous()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">previous</span>()**  : 4D.Entity| Parámetros | Tipo      |    | Descripción                                                                             |
| ---------- | --------- |:--:| --------------------------------------------------------------------------------------- |
| Resultado  | 4D.Entity | &lt;- |<span class="hljs-function"> Referencia a la entidad anterior en la selección de entidades </span>(<span class="hljs-literal">Null</span> si no se encuentra) |#### Descripción

La función <span class="hljs-comment">`.previous()`devuelve una referencia a la entidad anterior en la selección de entidades a la que pertenece la entidad.</span>

<span class="hljs-function">Si la entidad no pertenece a ninguna selección de entidades existente </span>(es decir, [.<span class="hljs-function">getSelection</span>()](#getselection) devuelve <span class="hljs-literal">Null</span>), la función devuelve un valor <span class="hljs-literal">Null</span>.

<span class="hljs-function">Si no hay una entidad anterior válida en la selección de entidades </span>(es decir, se encuentra en la primera entidad de la selección), la función devuelve <span class="hljs-literal">Null</span>. Si la entidad anterior ha sido soltada,<span class="hljs-function"> la función devuelve la entidad válida anterior </span>(y eventualmente <span class="hljs-literal">Null</span>).


#### Ejemplo

<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$previousEmployee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta selección de entidades contiene 3 entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">1</span>]
 <span class="hljs-variable">$previousEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">previous</span>() <span class="hljs-comment">//$previousEmployee es la primera entidad de la selección de entidades $employees</span>
<span class="hljs-comment">```## .reload( )</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">reload</span>()** : Object| Parámetros | Tipo   |    | Descripción      |
| ---------- | ------ |:--:| ---------------- |
| Resultado  | Objeto | &lt;- | Objeto de estado |#### Descripción

La función <span class="hljs-comment">`.reload()`recarga el contenido de la entidad en memoria, según la información almacenada en la tabla relacionada con la dataclass en el datastore. La recarga se realiza sólo si la entidad sigue existiendo con la misma llave primaria.</span>

**Resultado**

El objeto devuelto por <span class="hljs-comment">`.reload( )` contiene las siguientes propiedades:</span>

| Propiedad        | Tipo     | Descripción                                                                                                                                                      |
| ---------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| success          | booleano | <span class="hljs-literal">True</span> si la acción de recargar tiene éxito, <span class="hljs-literal">False</span> en caso contrario.&lt;p&gt;&lt;p&gt;***Disponible sólo en caso de error***: |
|<span class="hljs-function"> status</span>(\*)     | number   | Código de error, ver abajo                                                                                                                                       |
|<span class="hljs-function"> statusText</span>(\*) | texto    | Descripción del error, ver abajo                                                                                                                                 |

(\*) Los siguientes valores pueden ser devueltos en las propiedadese *status* y *statusText* del objeto *Result* en caso de error:

| Constante                                 | Valor | Comentario                                                                                                                                                                                                          |
| ----------------------------------------- | ----- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span class="hljs-comment">`dk status entity does not exist anymore` | 5     | La entidad ya no existe en los datos. Este error puede ocurrir en los siguientes casos:&lt;br&gt;&lt;li&gt;la entidad ha sido abandonada (el sello ha cambiado y el espacio de memoria está ahora libre)&lt;/li&gt;&lt;li&gt;la entidad ha sido eliminada y sustituida por otra con otra llave primaria (el sello ha cambiado y una nueva entidad utiliza ahora el espacio de memoria). Cuando se utiliza `.drop( )`, este error puede devolverse cuando se utiliza la opción `dk force drop if stamp changed`. Cuando se utiliza `.lock( )`, este error puede ser devuelto cuando se utiliza la opción `dk reload if stamp changed`&lt;/li&gt;&lt;br&gt;***statusText asociado***: "La entidad ya no existe" |</span>
| <span class="hljs-comment">`dk status serious error`                 | 4     | Un error grave es un error de base de datos de bajo nivel (por ejemplo, una llave duplicada), un error de hardware, etc.&lt;br&gt;***statusText asociado***: "Otro error"                                           |</span>


#### Ejemplo

<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$result </span>: Object

 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Hollis"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$employee</span>.firstName:=<span class="hljs-string">"Mary"</span>
 <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">reload</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$result</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Reload has been done"</span>)
    :(<span class="hljs-variable">$result</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"The entity has been dropped"</span>)<span class="hljs-keyword">
 End case</span>
<span class="hljs-comment">```## .save()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.save**( { *mode* : Integer } ) : Object| Parámetros | Tipo    |    | Descripción                                          |
| ---------- | ------- |:--:| ---------------------------------------------------- |
| mode       | Integer | -&gt; | <span class="hljs-comment">`dk auto merge`: activa el modo de fusión automática |</span>
| Resultado  | Objeto  | &lt;- | Resultado de la operación guardar                    |#### Descripción

La función <span class="hljs-comment">`.save()`guarda los cambios realizados en la entidaden la tabla relacionada con su dataClass. Debe llamar a este método después de crear o modificar una entidad si quiere guardar los cambios realizados en ella.</span>

La operación de guardar se ejecuta sólo si se ha <span class="hljs-string">"tocado"</span><span class="hljs-function"> al menos un atributo de la entidad </span>(ver las funciones [<span class="hljs-comment">`.touched()`](#touched) y [`.touchedAttributes()`](#touchedattributes)). En caso contrario, la función no hace nada (no se llama al activador).</span>

En una aplicación multiusuario o multiproceso, la función <span class="hljs-comment">`.save()` se ejecuta bajo un mecanismo de ["bloqueo optimista"](/docs/19/es/ORDA/entities.html#entity-locking), en el que un sello de bloqueo interno se incrementa automáticamente cada vez que se guarda el registro.</span>

Por defecto, si se omite el parámetro *mode*,<span class="hljs-function"> el método devolverá un error </span>(ver más abajo) siempre que la misma entidad haya sido modificada por otro proceso o usuario mientras tanto, sin importar el atributo o atributos modificados.

En caso contrario, se puede pasar la opción <span class="hljs-comment">`dk auto merge` en el parámetro *mode*: cuando el modo de fusión automática está activado, una modificación realizada simultáneamente por otro proceso/usuario en la misma entidad pero en un atributo diferente no dará lugar a un error. Los datos resultantes guardados en la entidad serán la combinación (la "fusión") de todas las modificaciones no concurrentes (si se aplicaron modificaciones al mismo atributo, el guardado falla y se devuelve un error, incluso con el modo de fusión automática).</span>
&gt; El modo de fusión automática no está disponible para los atributos de tipo Imagen, Objeto y Texto cuando se almacenan fuera del registro. Los cambios concurrentes en estos atributos darán lugar a un error <span class="hljs-comment">`dk status stamp has changed`.</span>

**Resultado**

El objeto devuelto por <span class="hljs-comment">`.save()` contiene las siguientes propiedades:</span>

| Propiedad    |                    | Tipo                  | Descripción                                                                                                                  |
| ------------ | ------------------ | --------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| success      |                    | booleano              | <span class="hljs-literal">True</span> si la acción guardar tiene éxito, false en caso contrario.                                                              |
|              |                    |                       | ***Disponible sólo si se utiliza la opción <span class="hljs-comment">`dk auto merge`***:                                                               |</span>
| autoMerged   |                    | booleano              | <span class="hljs-literal">True</span> si se ha realizado una fusión automática, <span class="hljs-literal">False</span> en caso contrario.                                                      |
|              |                    |                       | ***Disponible sólo en caso de error***:                                                                                      |
| status       |                    | number                | Código de error, [ver abajo](#status-and-statustext)                                                                         |
| statusText   |                    | text                  | Descripción del error, [ver más abajo](#status-and-statustext)                                                               |
|              |                    |                       | ***Disponible sólo en caso de bloqueo pesimista***:                                                                          |
| lockKindText |                    | texto                 | <span class="hljs-string">"Locked by record"</span>                                                                                                           |
| lockInfo     |                    | objeto                | Información sobre el origen del bloqueo                                                                                      |
|              | task_id            | number                | Id del proceso                                                                                                               |
|              | user_name          | texto                 | Nombre de usuario de la sesión en la máquina                                                                                 |
|              | user4d_alias       | texto                 | Alias de usuario si está definido por <span class="hljs-comment">`SET USER ALIAS`, si no, nombre de usuario en el directorio 4D                         |</span>
|              | host_name          | texto                 | Nombre de la máquina                                                                                                         |
|              | task_name          | texto                 | Nombre del proceso                                                                                                           |
|              | client_version     | texto                 |                                                                                                                              |
|              |                    |                       | ***Disponible sólo en caso de error grave*** (error grave - puede ser intentar duplicar una llave primaria, disco lleno...): |
| errors       |                    | collection of objects |                                                                                                                              |
|              | message            | texto                 | Mensaje de error                                                                                                             |
|              | componentSignature | texto                 |<span class="hljs-function"> Firma del componente interno </span>(por ejemplo, <span class="hljs-string">"dmbg"</span> significa el componente de la base)                                        |
|              | errCode            | number                | Código de error                                                                                                              |

##### status y statusText

Los siguientes valores pueden ser devueltos en las propiedades <span class="hljs-comment">`status` y `statusText` del objeto Result en caso de error:</span>

| Constante                                 | Valor | Comentario                                                                                                                                                                                                                                                              |
| ----------------------------------------- | ----- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span class="hljs-comment">`dk status automerge failed`              | 6     | (Sólo si se utiliza la opción `dk auto merge`) La opción de fusión automática falló al guardar la entidad.&lt;p&gt;&lt;p&gt;**statusText asociado**: "Fallo de la fusión automática"                                                |</span>
| <span class="hljs-comment">`dk status entity does not exist anymore` | 5     | La entidad ya no existe en los datos. Este error puede ocurrir en los siguientes casos:&lt;br&gt;&lt;li&gt;la entidad ha sido abandonada (el sello ha cambiado y el espacio de memoria está ahora libre)&lt;/li&gt;&lt;li&gt;la entidad ha sido eliminada y sustituida por otra con otra llave primaria (el sello ha cambiado y una nueva entidad utiliza ahora el espacio de memoria). Cuando se utiliza `.drop( )`, este error puede devolverse cuando se utiliza la opción `dk force drop if stamp changed`. Cuando se utiliza `.lock( )`, este error puede ser devuelto cuando se utiliza la opción `dk reload if stamp changed`&lt;/li&gt;&lt;br&gt;**statusText asociado**: "La entidad ya no existe"                                                       |</span>
| <span class="hljs-comment">`dk status locked`                        | 3     | La entidad está bloqueada por un bloqueo pesimista.&lt;p&gt;&lt;p&gt;**statusText asociado**: "Ya bloqueado"                                                                                                                        |</span>
| <span class="hljs-comment">`dk status serious error`                 | 4     | Un error grave es un error de base de datos de bajo nivel (por ejemplo, una llave duplicada), un error de hardware, etc.&lt;p&gt;&lt;p&gt;**statusText asociado**: "Otro error"                                                     |</span>
| <span class="hljs-comment">`dk status stamp has changed`             | 2     | El valor del sello interno de la entidad no coincide con el de la entidad almacenada en los datos (bloqueo optimista).&lt;br&gt;&lt;li&gt;con `.save( )`: error sólo si no se utiliza la opción `dk auto merge`&lt;/li&gt;&lt;li&gt;con `.drop( )`: error sólo si no se utiliza la opción `dk force drop if stamp changed`&lt;/li&gt;&lt;li&gt;con `.lock( )`: error sólo si no se utiliza la opción `dk reload if stamp changed`&lt;/li&gt;&lt;br&gt;**statusText asociado**: "El sello ha cambiado" |</span>


#### Ejemplo <span class="hljs-number">1</span>

Crear una nueva entidad:

<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$employee</span>.firstName:=<span class="hljs-string">"Mary"</span>
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 If</span>(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Employee created"</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-3"></a><a href="#ejemplo-2-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<p>Actualización de una entidad sin la opción <code>dk auto merge</code>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Mac Arthur"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Employee updated"</span>)
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-3-1"></a><a href="#ejemplo-3-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 3</h4>
<p>Actualización de una entidad con la opción <code>dk auto merge</code>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">

 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Mac Arthur"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>(dk auto merge)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Employee updated"</span>)
    :(<span class="hljs-variable">$status</span>.status=dk status automerge failed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
<span class="hljs-comment">``` ## .toObject()</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.toObject**() : Object&lt;br&gt;**.toObject**( *filterString* : Text { ; *options* : Integer}  ) : Object&lt;br&gt;**.toObject**( *filterCol* : Collection { ; *options* : Integer } ) : Object| Parámetros   | Tipo       |    | Descripción                                                                                               |
| ------------ | ---------- |:--:| --------------------------------------------------------------------------------------------------------- |
| filterString | Texto      | -&gt; |<span class="hljs-function"> Atributo</span>(s)<span class="hljs-function"> a extraer </span>(cadena separada por comas)                                                         |
| filterCol    | Collection | -&gt; | Colección de atributos a extraer                                                                          |
| options      | Integer    | -&gt; | <span class="hljs-comment">`dk with primary key`: añade la propiedad \_KEY;&lt;br&gt;`dk with stamp`: añade la propiedad \_STAMP |</span>
| Resultado    | Objeto     | &lt;- | Objeto creado a partir de la entidad                                                                      |#### Descripción

La función <span class="hljs-comment">`.toObject()`devuelve un objeto que ha sido construido a partir de la entidad. Los nombres de las propiedades en el objeto coinciden con los nombres de los atributos de la entidad.</span>

Si no se especifica ningún filtro, o si el parámetro *filterString* contiene una cadena vacía o <span class="hljs-string">"*"</span>, el objeto devuelto contendrá:

*   todos los atributos de la entidad de almacenamiento
*   atributos de la <span class="hljs-comment">`relatedEntity` [kind](/docs/19/es/API/DataClassAttributeClass.html#kind): se obtiene una propiedad con el mismo nombre que la entidad relacionada (nombre del enlace muchos-a-uno). El atributo se extrae con la forma simple.</span>
*   atributos [kind](/docs/<span class="hljs-number">19</span>/es/API/DataClassAttributeClass.html#kind) <span class="hljs-comment">`relatedEntities`: no se devuelve el atributo.</span>


En el primer parámetro, se pasa el atributo o atributos de la entidad a extraer. Puede pasar:

*   *filterString*: una cadena con rutas de propiedades separadas por comas: <span class="hljs-string">"propertyPath1, propertyPath2, ..."</span>, o
*   *filterCol*: una colección de cadenas: \[<span class="hljs-string">"propertyPath1"</span>,<span class="hljs-string">"propertyPath2"</span>;...]

Si se especifica un filtro para los atributos de la relatedEntity [kind](/docs/<span class="hljs-number">19</span>/es/API/DataClassAttributeClass.html#kind):

*   propertyPath = <span class="hljs-string">"relatedEntity"</span> -&gt; se extrae de forma sencilla:<span class="hljs-function"> un objeto con la propiedad \_\_KEY </span>(llave primaria).
*   propertyPath = <span class="hljs-string">"relatedEntity.*"</span> -&gt; se extraen todas las propiedades
*   propertyPath = <span class="hljs-string">"relatedEntity.propertyName1; relatedEntity.propertyName2; ..."</span> -&gt; sólo se extraen esas propiedades

Si se especifica un filtro para los atributos de las relatedEntities [kind](/docs/<span class="hljs-number">19</span>/es/API/DataClassAttributeClass.html#kind):

*   propertyPath = <span class="hljs-string">"relatedEntities.*"</span> -&gt; se extraen todas las propiedades
*   propertyPath = <span class="hljs-string">"relatedEntities.propertyName1; relatedEntities.propertyName2; ..."</span> -&gt; sólo se extraen esas propiedades

En el parámetro *options* se puede pasar el selector <span class="hljs-comment">`ddk with primary key` y/o`dk with stamp` para añadir las llaves primarias de la entidad y/o los sellos en los objetos extraídos.</span>


#### Ejemplo <span class="hljs-number">1</span>

En todos los ejemplos de esta sección se utilizará la siguiente estructura:

![](/docs/<span class="hljs-number">19</span>/assets/en/API/dataclassAttribute4.png)


Sin parámetro de filtro:

<span class="hljs-comment">```4d</span>
employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>()
</code></pre>
<p>Devuelve:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"ID"</span>: <span class="hljs-number">413</span>,
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
    <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
    <span class="hljs-string">"extra"</span>: null,
    <span class="hljs-string">"employer"</span>: { <span class="hljs-comment">// relatedEntity extracted with simple form</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    },
    <span class="hljs-string">"manager"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-4"></a><a href="#ejemplo-2-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<p>Extraer la llave primaria y el sello:</p>
<pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">""</span>;dk with primary key+dk with stamp)
</code></pre>
<p>Devuelve:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>,
   <span class="hljs-string">"__STAMP"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"ID"</span>: <span class="hljs-number">413</span>,
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
    <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
    <span class="hljs-string">"extra"</span>: null,
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    },
    <span class="hljs-string">"manager"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-3-2"></a><a href="#ejemplo-3-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 3</h4>
<p>Desplegando todas las propiedades de <code>relatedEntities</code>:</p>
<pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"directReports.*"</span>)
</code></pre>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"directReports"</span>: [
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">418</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">44800</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1970-10-02T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: true,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        },
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">419</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Drew"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Caudill"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">41000</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2030-01-12T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: false,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        },
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">420</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Nathan"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gomes"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">46300</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2010-05-29T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: false,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        }
    ]
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-4-1"></a><a href="#ejemplo-4-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 4</h4>
<p>Extracción de algunas propiedades de <code>relatedEntities</code>:</p>
<pre><code class="hljs css language-4d"> employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"firstName, directReports.lastName"</span>)
</code></pre>
<p>Devuelve:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"directReports"</span>: [
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>
        },
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Caudill"</span>
        },
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gomes"</span>
        }
    ]
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-5"></a><a href="#ejemplo-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 5</h4>
<p>Obtenga una <code>relatedEntity</code> en un formulario simple:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$coll</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"employer"</span>)
 employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-variable">$coll</span>)
</code></pre>
<p>Devuelve:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-6"></a><a href="#ejemplo-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 6</h4>
<p>Extracción de todas las propiedades de una <code>Entidad relacionada</code>:</p>
<pre><code class="hljs css language-4d"> employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"employer.*"</span>)
</code></pre>
<p>Devuelve:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,
        <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,
        <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,
        <span class="hljs-string">"extra"</span>: null
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-7"></a><a href="#ejemplo-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 7</h4>
<p>Extracción de algunas propiedades de una <code>Entidad relacionada</code>:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$col</span>:=New collection
 <span class="hljs-variable">$col</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.name"</span>)
 <span class="hljs-variable">$col</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.revenues"</span>)
 employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-variable">$col</span>)
</code></pre>
<p>Devuelve:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,
        <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>
    }
}
<span class="hljs-comment">```## .touched( )</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">touched</span>()** : Boolean| Parámetros | Tipo     |    | Descripción                                                                                       |
| ---------- | -------- |:--:| ------------------------------------------------------------------------------------------------- |
| Resultado  | Booleano | &lt;- | <span class="hljs-literal">True</span> si se ha modificado al menos un atributo de la entidad y aún no se ha guardado, si no, <span class="hljs-literal">False</span> |#### Descripción

La función <span class="hljs-comment">`.touched()`comprueba si un atributo de la entidad ha sido modificado o no desde que la entidad fue cargada en memoria o guardada.</span>

Si un atributo ha sido modificado o calculado, la función devuelve <span class="hljs-literal">True</span>, en caso contrario devuelve <span class="hljs-literal">False</span>. Puede utilizar esta función para determinar si necesita guardar la entidad.

<span class="hljs-function">Esta función devuelve False para una nueva entidad que acaba de ser creada </span>(con [<span class="hljs-comment">`.new( )`](/docs/19/es/API/DataClassClass.html#new)). Tenga en cuenta, sin embargo, que si utiliza una función que calcula un atributo de la entidad, la función `.touched()` devolverá entonces True. Por ejemplo, si se llama a [`.getKey()`](#getkey) para calcular la llave primaria, `.touched()` devuelve True.</span>

#### Ejemplo

En este ejemplo, comprobamos si es necesario guardar la entidad:

<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity
 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-comment">//Aunque se actualice con el mismo valor, el atributo se marca como tocado</span><span class="hljs-keyword">

 If</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">touched</span>()) <span class="hljs-comment">//si se ha modificado al menos uno de los atributos</span>
    <span class="hljs-variable">$emp</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 End if</span> <span class="hljs-comment">// de lo contrario, no es necesario guardar la entidad</span>
<span class="hljs-comment">```## .touchedAttributes( )</span>

&lt;details&gt;&lt;summary&gt;Histórico&lt;/summary&gt;
| Versión | Modificaciones |
| ------- | -------------- |
| v17     | Añadidos       |

&lt;/details&gt;**.<span class="hljs-function">touchedAttributes</span>()** : Collection| Parámetros | Tipo       |    | Descripción                                     |
| ---------- | ---------- |:--:| ----------------------------------------------- |
| Resultado  | Collection | &lt;- | Nombres de atributos tocados, o colección vacía |#### Descripción

La función <span class="hljs-comment">`.touchedAttributes()`devuelve los nombres de los atributos que han sido modificados desde que la entidad fue cargada en memoria.</span>

Esto se aplica a los atributos [kind](/docs/<span class="hljs-number">19</span>/es/API/DataClassAttributeClass.html#kind) <span class="hljs-comment">`storage` o `relatedEntity`.</span>

<span class="hljs-function">En el caso de que se haya tocado una entidad relacionada </span>(es decir, la llave externa), se devuelve el nombre de la entidad relacionada y el nombre de su llave primaria.

Si no se ha tocado ningún atributo de entidad, el método devuelve una colección vacía.

#### Ejemplo <span class="hljs-number">1</span>


<span class="hljs-comment">```4d</span><span class="hljs-keyword">
 var</span> <span class="hljs-variable">$touchedAttributes </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity

 <span class="hljs-variable">$touchedAttributes</span>:=New collection
 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-comment">//Aunque se actualice con el mismo valor, el atributo se marca como tocado</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>
 <span class="hljs-variable">$touchedAttributes</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">touchedAttributes</span>()
  <span class="hljs-comment">//$touchedAttributes: ["firstName","lastName"]</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-5"></a><a href="#ejemplo-2-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$touchedAttributes </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$company </span>: cs.CompanyEntity

 <span class="hljs-variable">$touchedAttributes</span>:=New collection

 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>

 <span class="hljs-variable">$company</span>:=ds.Company.<span class="hljs-function">get</span>(<span class="hljs-number">121</span>)
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-variable">$company</span>

 <span class="hljs-variable">$touchedAttributes</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">touchedAttributes</span>()

  <span class="hljs-comment">//collection $touchedAttributes: ["firstName","lastName","employer","employerID"]</span>
</code></pre>
<p>En este caso:</p>
<ul>
<li>firstName y lastName tienen un tipo <code>storage</code></li>
<li>employer tiene un tipo <code>relatedEntity</code></li>
<li>employerID es la llave extranjera de la entidad relacionada con el empleador## .unlock()</li>
</ul>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details><strong>.unlock()</strong> : Object| Parámetros | Tipo   |    | Descripción   |
| ---------- | ------ |:--:| ------------- |
| Resultado  | Objeto | &lt;- | Objeto estado |#### Descripción</p>
<p>La función <code>.unlock()</code>elimina el bloqueo pesimista del registro que coincide con la entidaden el datastore y la tabla relacionada con su dataclass.</p>
<blockquote>
<p>Para más información, consulte la sección <a href="/docs/19/es/ORDA/entities.html#entity-locking">Entity locking</a>.</p>
</blockquote>
<p>Un registro se desbloquea automáticamente cuando ya no es referenciado por ninguna entidad en el proceso de bloqueo (por ejemplo: si el bloqueo se pone sólo en una referencia local de una entidad, la entidad y, por tanto, el registro se desbloquea cuando el proceso termina).</p>
<blockquote>
<p>Cuando un registro se bloquea, debe desbloquearse desde el proceso de bloqueo y en la referencia de la entidad que puso el bloqueo. Por ejemplo:</p>
</blockquote>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$e1</span>:=ds.Emp.<span class="hljs-function">all</span>()[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$e2</span>:=ds.Emp.<span class="hljs-function">all</span>()[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">lock</span>() <span class="hljs-comment">//$res.success=true</span>
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e2</span>.<span class="hljs-function">unlock</span>() <span class="hljs-comment">//$res.success=false</span>
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">unlock</span>() <span class="hljs-comment">//$res.success=true</span>
</code></pre>
<p><strong>Resultado</strong></p>
<p>El objeto devuelto por &lt;<code>.unlock()&lt;</code> contiene la siguiente propiedad:</p>
<table>
<thead>
<tr><th>Propiedad</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>success</td><td>Booleano</td><td>True si la acción de desbloquear tiene éxito, False en caso contrario. Si el desbloqueo se realiza en una entidad abandonada, en un registro no bloqueado o en un registro bloqueado por otro proceso o entidad, el éxito es False.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-8"></a><a href="#ejemplo-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object

 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>()
 ... <span class="hljs-comment">//processing</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">unlock</span>()<span class="hljs-keyword">
 If</span>(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"The entity is now unlocked"</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<style> h2 { background: #d9ebff;}</style>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/19/es/API/EmailObjectClass.html"><span class="arrow-prev">← </span><span>Email</span></a><a class="docs-next button" href="/docs/19/es/API/EntitySelectionClass.html"><span class="function-name-prevnext">EntitySelection</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#clone">.clone()</a></li><li><a href="#diff">.diff()</a></li><li><a href="#drop">.drop()</a></li><li><a href="#first">.first()</a></li><li><a href="#fromobject">.fromObject()</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/19/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:es","version:19"]}
              });
            </script></body></html>