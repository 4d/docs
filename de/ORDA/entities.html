<!DOCTYPE html><html lang="de"><head><meta name="docsearch:version" content="18 R5 BETA"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Working with data · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="In ORDA, you access data through [entities](/docs/de/ORDA/dsmapping.html#entity) and [entity selections](/docs/de/ORDA/dsmapping.html#entity-selection). These objects allow you to create, update, query, or sort the data of the datastore."/><meta name="docsearch:language" content="de"/><meta property="og:title" content="Working with data · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/index.html"/><meta property="og:description" content="In ORDA, you access data through [entities](/docs/de/ORDA/dsmapping.html#entity) and [entity selections](/docs/de/ORDA/dsmapping.html#entity-selection). These objects allow you to create, update, query, or sort the data of the datastore."/><meta property="og:image" content="https://4d.github.io/docs/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/img/logohome.png"/><link rel="shortcut icon" href="/docs/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-blocks-buttons.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/de"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs" target="_self">v18 R5 BETA</a></li><li class=""><a href="https://developer.4d.com/docs/Rx" target="_self">v18 R4</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/img/language.svg" alt="Languages icon"/>Deutsch</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/ORDA/entities.html">English</a></li><li><a href="/docs/ja/ORDA/entities.html">日本語</a></li><li><a href="/docs/es/ORDA/entities.html">Español</a></li><li><a href="/docs/fr/ORDA/entities.html">Français</a></li><li><a href="/docs/pt/ORDA/entities.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>ORDA</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/GettingStarted/installation.html">Installation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Project Management<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/Project/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Project/creating.html">Creating or opening a project</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Project/architecture.html">Architecture of a project</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Project/developing.html">Developing a project</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Project/documentation.html">Documenting a project</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Konzepte der 4D Programmiersprache<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/about.html">Über die 4D Programmiersprache</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/quick-tour.html">Schnelle Tour</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/data-types.html">Überblick über Datentypen</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/boolean.html">Boolean</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/date.html">Datum</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/null-undefined.html">Null und Undefiniert</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/number.html">Numerisch (Zahl, Lange Ganzzahl, Ganzzahl)</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/object.html">Objekt</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/picture.html">Bild</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/pointer.html">Zeiger</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/string.html">String</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/time.html">Zeit</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/variables.html">Variablen</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/arrays.html">Arrays</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/methods.html">Methoden</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/parameters.html">Parameter</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/shared.html">Shared Objects und Shared Collections</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/classes.html">Klassen</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/control-flow.html">Ablaufsteuerung Überblick</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/branching.html">Abfragestrukturen</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/looping.html">Schleifenstrukturen</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/error-handling.html">Fehlerverwaltung</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/interpreted-compiled.html">Interpreted and Compiled modes</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/components.html">Komponenten</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/plug-ins.html">Plug-Ins</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Concepts/identifiers.html">Namensregeln</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/ORDA/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/ORDA/dsmapping.html">Data Model Objects</a></li><li class="navListItem"><a class="navItem" href="/docs/de/ORDA/ordaClasses.html">Data Model Classes</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/de/ORDA/entities.html">Working with data</a></li><li class="navListItem"><a class="navItem" href="/docs/de/ORDA/datastores.html">Using a remote datastore</a></li><li class="navListItem"><a class="navItem" href="/docs/de/ORDA/glossary.html">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Class API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/API/cryptoClass.html">CryptoKey Class</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Access Rights<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/Users/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Users/editing.html">Managing 4D users and groups</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Administration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/Admin/licenses.html">Managing 4D Licenses</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Admin/building.html">Building a project package</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">MSC<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/MSC/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/information.html">Seite Information</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/analysis.html">Seite Aktivität Analyse</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/verify.html">Seite Prüfen</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/backup.html">Seite Backup</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/compact.html">Seite Kompakt</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/rollback.html">Seite Zurückfahren</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/restore.html">Seite Wiederherstellen</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/repair.html">Seite Reparieren</a></li><li class="navListItem"><a class="navItem" href="/docs/de/MSC/encrypt.html">Seite Verschlüsseln</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Backup and Restore<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/Backup/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Backup/backup.html">Backup</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Backup/settings.html">Backup Settings</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Backup/log.html">Log file (.journal)</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Backup/restore.html">Restore</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Web Server<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/WebServer/webServerObject.html">Web Server object</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">REST Server<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/de/REST/gettingStarted.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/configuration.html">Server Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/authUsers.html">Users and sessions</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/genInfo.html">Getting Server Information</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/manData.html">Manipulating Data</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/classFunctions.html">Calling ORDA class functions</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/REST_requests.html">About REST Requests</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (general)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/de/REST/catalog.html">$catalog</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/directory.html">$directory</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/info.html">$info</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/upload.html">$upload</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (dataClass)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/de/REST/{dataClass}.html">{dataClass}</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/asArray.html">$asArray</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/atomic_$atonce.html">$atomic/$atonce</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/attributes.html">$attributes</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/binary.html">$binary</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/compute.html">$compute</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/distinct.html">$distinct</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/entityset.html">$entityset</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/expand.html">$expand</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/filter.html">$filter</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/imageformat.html">$imageformat</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/method.html">$method</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/orderby.html">$orderby</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/querypath.html">$querypath</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/queryplan.html">$queryplan</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/savedfilter.html">$savedfilter</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/savedorderby.html">$savedorderby</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/skip.html">$skip</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/timeout.html">$timeout</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/top_$limit.html">$top/$limit</a></li><li class="navListItem"><a class="navItem" href="/docs/de/REST/version.html">$version</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Formulare<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/forms.html">About 4D Forms</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/formEditor.html">Form Editor</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/macros.html">Form Editor Macros</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/objectLibrary.html">Object libraries</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/stylesheets.html">Style sheets</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/pictures.html">Pictures</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Form Properties<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/jsonReference.html">JSON property list</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/action.html">Aktion</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/propertiesForm.html">Form Properties</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/formSize.html">Form Size</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/markers.html">Markers</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/menu.html">Menu</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/print.html">Print</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormEditor/windowSize.html">Window Size</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Form Objects<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/formObjectsOverview.html">About 4D Form Objects</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/buttonOverview.html">Button</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/buttonGridOverview.html">Button Grid</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/checkboxOverview.html">Check Box</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/comboBoxOverview.html">Combo Box</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/dropdownListOverview.html">Drop-down List</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/groupBox.html">Group Box</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/inputOverview.html">Input</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/listOverview.html">Hierarchical List</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/listboxOverview.html">List Box</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/pictureButtonOverview.html">Picture Button</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/picturePopupMenuOverview.html">Picture Pop-up Menu</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/pluginAreaOverview.html">Plug-in Area</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/progressIndicator.html">Progress Indicator</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/radiobuttonOverview.html">Radio Button</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/ruler.html">Ruler</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/shapesOverview.html">Shapes</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/spinner.html">Spinner</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/splitters.html">Splitter</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/staticPicture.html">Static picture</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/stepper.html">Stepper</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/subformOverview.html">Subform</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/tabControl.html">Tab Controls</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/text.html">Text</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/webAreaOverview.html">Web Area</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/viewProAreaOverview.html">4D View Pro area</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/writeProAreaOverview.html">4D Write Pro area</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Form Object Properties<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesReference.html">JSON property list</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesAction.html">Aktion</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesAnimation.html">Animation</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesAppearance.html">Appearance</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesBackgroundAndBorder.html">Background and Border</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesCoordinatesAndSizing.html">Coordinates &amp; Sizing</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesCrop.html">Crop</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesDataSource.html">Data Source</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesDisplay.html">Display</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesEntry.html">Entry</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesFooters.html">Footers</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesGridlines.html">Gridlines</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesHeaders.html">Headers</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesHelp.html">Help</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesHierarchy.html">Hierarchy</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesListBox.html">List Box</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesObject.html">Objekte</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesPicture.html">Bild</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesPlugIns.html">Plug-Ins</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesPrint.html">Print</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesRangeOfValues.html">Range of Values</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesResizingOptions.html">Resizing Options</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesScale.html">Scale</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesSubform.html">Subform</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesText.html">Text</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesTextAndPicture.html">Text and Picture</a></li><li class="navListItem"><a class="navItem" href="/docs/de/FormObjects/propertiesWebArea.html">Web Area</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Form Events<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/Events/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onActivate.html">On Activate</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onAfterEdit.html">On After Edit</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onAfterKeystroke.html">On After Keystroke</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onAfterSort.html">On After Sort</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onAlternativeClick.html">On Alternative Click</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onBeforeDataEntry.html">On Before Data Entry</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onBeforeKeystroke.html">On Before Keystroke</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onBeginDragOver.html">On Begin Drag Over</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onBeginUrlLoading.html">On Begin URL Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onBoundVariableChange.html">On Bound Variable Change</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onClicked.html">On Clicked</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onCloseBox.html">On Close Box</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onCloseDetail.html">On Close Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onCollapse.html">On Collapse</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onColumnMoved.html">On Column Moved</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onColumnResize.html">On Column Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onDataChange.html">On Data Change</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onDeactivate.html">On Deactivate</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onDeleteAction.html">On Delete Action</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onDisplayDetail.html">On Display Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onDoubleClicked.html">On Double Clicked</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onDragOver.html">On Drag Over</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onDrop.html">On Drop</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onEndUrlLoading.html">On End URL Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onExpand.html">On Expand</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onFooterClick.html">On Footer Click</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onGettingFocus.html">On Getting focus</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onHeader.html">On Header</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onHeaderClick.html">On Header Click</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onLoad.html">On Load</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onLoadRecord.html">On Load Record</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onLongClick.html">On Long Click</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onLosingFocus.html">On Losing focus</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onMenuSelected.html">On Menu Selected</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onMouseEnter.html">On Mouse Enter</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onMouseLeave.html">On Mouse Leave</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onMouseMove.html">On Mouse Move</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onMouseUp.html">On Mouse Up</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onOpenDetail.html">On Open Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onOpenExternalLink.html">On Open External Link</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onOutsideCall.html">On Outside Call</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onPageChange.html">On Page Change</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onPlugInArea.html">On Plug in Area</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onPrintingBreak.html">On Printing Break</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onPrintingDetail.html">On Printing Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onPrintingFooter.html">On Printing Footer</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onResize.html">On Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onRowMoved.html">On Row Moved</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onRowResize.html">On Row Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onScroll.html">On Scroll</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onSelectionChange.html">On Selection Change</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onTimer.html">On Timer</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onUnload.html">On Unload</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onUrlFiltering.html">On URL Filtering</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onUrlLoadingError.html">On URL Loading Error</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onUrlResourceLoading.html">On URL Resource Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onValidate.html">On Validate</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onVpReady.html">On VP Ready</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Events/onWindowOpeningDenied.html">On Window Opening Denied</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Menus<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/de/Menus/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Menus/creating.html">Creating menus and menu bars</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Menus/properties.html">Menu item properties</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Menus/bars.html">Menu bar features</a></li><li class="navListItem"><a class="navItem" href="/docs/de/Menus/sdi.html">SDI mode on Windows</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/master/docs/ORDA/entities.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Working with data</h1></header><article><div><span><p>In ORDA, you access data through <a href="/docs/de/ORDA/dsmapping.html#entity">entities</a> and <a href="/docs/de/ORDA/dsmapping.html#entity-selection">entity selections</a>. These objects allow you to create, update, query, or sort the data of the datastore.</p>
<h2><a class="anchor" aria-hidden="true" id="creating-an-entity"></a><a href="#creating-an-entity" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating an entity</h2>
<p>There are two ways to create a new entity in a dataclass:</p>
<ul>
<li>Since entities are references to database records, you can create entities by creating records using the &quot;classic&quot; 4D language and then reference them with ORDA methods such as <code>entity.next( )</code> or <code>entitySelection.first( )</code>.</li>
<li>You can also create an entity using the <code>dataClass.new( )</code> method.</li>
</ul>
<p>Keep in mind that the entity is only created in memory. If you want to add it to the datastore, you must call the <code>entity.save( )</code> method.</p>
<p>Entity attributes are directly available as properties of the entity object. For more information, please refer to <a href="#using-entity-attributes">Using entity attributes</a>.</p>
<p>For example, we want to create a new entity in the &quot;Employee&quot; dataclass in the current datastore with &quot;John&quot; and &quot;Dupont&quot; assigned to the firstname and name attributes:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$myEntity </span>: cs.EmployeeEntity
<span class="hljs-variable">$myEntity</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-comment">//Create a new object of the entity type</span>
<span class="hljs-variable">$myEntity</span>.name:=<span class="hljs-string">"Dupont"</span> <span class="hljs-comment">//assign 'Dupont' to the 'name' attribute</span>
<span class="hljs-variable">$myEntity</span>.firstname:=<span class="hljs-string">"John"</span> <span class="hljs-comment">//assign 'John' to the 'firstname' attribute</span>
<span class="hljs-variable">$myEntity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//save the entity</span>
</code></pre>
<blockquote>
<p>An entity is defined only in the process where it was created. You cannot, for example, store a reference to an entity in an interprocess variable and use it in another process.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="entities-and-references"></a><a href="#entities-and-references" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Entities and references</h2>
<p>An entity contains a reference to a 4D record. Different entities can reference the same 4D record. Also, since an entity can be stored in a 4D object variable, different variables can contain a reference to the same entity.</p>
<p>If you execute the following code:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$e1</span>; <span class="hljs-variable">$e2 </span>: cs.EmployeeEntity
 <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">//access the employee with ID 1</span>
 <span class="hljs-variable">$e2</span>:=<span class="hljs-variable">$e1</span>
 <span class="hljs-variable">$e1</span>.name:=<span class="hljs-string">"Hammer"</span>
  <span class="hljs-comment">//both variables $e1 and $e2 share the reference to the same entity</span>
  <span class="hljs-comment">//$e2.name contains "Hammer"</span>
</code></pre>
<p>This is illustrated by the following graphic:</p>
<p><img src="/docs/assets/en/ORDA/entityRef1.png" alt=""></p>
<p>Now if you execute:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$e1</span>; <span class="hljs-variable">$e2 </span>: cs.EmployeeEntity
 <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>)
 <span class="hljs-variable">$e2</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>)
 <span class="hljs-variable">$e1</span>.name:=<span class="hljs-string">"Hammer"</span>
  <span class="hljs-comment">//variable $e1 contains a reference to an entity</span>
  <span class="hljs-comment">//variable $e2 contains another reference to another entity</span>
  <span class="hljs-comment">//$e2.name contains "smith"</span>
</code></pre>
<p>This is illustrated by the following graphic:</p>
<p><img src="/docs/assets/en/ORDA/entityRef2.png" alt=""></p>
<p>Note however that entities refer to the same record. In all cases, if you call the <code>entity.save( )</code> method, the record will be updated (except in case of conflict, see <a href="#entity-locking">Entity locking</a>).</p>
<p>In fact, <code>$e1</code> and <code>$e2</code> are not the entity itself, but a reference to the entity. It means that you can pass them directly to any function or method, and it will act like a pointer, and faster than a 4D pointer. Beispiel:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$entity</span>;<span class="hljs-variable">$selection</span>)
<span class="hljs-function">    do_Capitalize</span>(<span class="hljs-variable">$entity</span>)<span class="hljs-keyword">
 End for each</span>
</code></pre>
<p>And the method is:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$1</span>
 <span class="hljs-variable">$name</span>:=<span class="hljs-variable">$entity</span>.lastname<span class="hljs-keyword">
 If</span>(<span class="hljs-function">Not</span>(<span class="hljs-variable">$name</span>=<span class="hljs-literal">Null</span>))
    <span class="hljs-variable">$name</span>:=<span class="hljs-function">Uppercase</span>(<span class="hljs-function">Substring</span>(<span class="hljs-variable">$name</span>;<span class="hljs-number">1</span>;<span class="hljs-number">1</span>))+<span class="hljs-function">Lowercase</span>(<span class="hljs-function">Substring</span>(<span class="hljs-variable">$name</span>;<span class="hljs-number">2</span>))<span class="hljs-keyword">
 End if</span>
 <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-variable">$name</span>
</code></pre>
<p>You can handle entities like any other object in 4D and pass their references directly as <a href="/docs/de/Concepts/parameters.html">parameters</a>.</p>
<blockquote>
<p>With the entities, there is no concept of &quot;current record&quot; as in the classic 4D language. You can use as many entities as you need, at the same time. There is also no automatic lock on an entity (see <a href="#entity-locking">Entity locking</a>). When an entity is loaded, it uses the <a href="/docs/de/ORDA/glossary.html#lazy-loading">lazy loading</a> mechanism, which means that only the needed information is loaded. Nevertheless, in client/server, the entity can be automatically loaded directly if necessary.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="using-entity-attributes"></a><a href="#using-entity-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using entity attributes</h2>
<p>Entity attributes store data and map corresponding fields in the corresponding table. Entity attributes of the storage kind can be set or get as simple properties of the entity object, while entity of the <strong>relatedEntity</strong> or <strong>relatedEntities</strong> kind will return an entity or an entity selection.</p>
<blockquote>
<p>For more information on the attribute kind, please refer to the <a href="/docs/de/ORDA/dsmapping.html#storage-and-relation-attributes">Storage and Relation attributes</a> paragraph.</p>
</blockquote>
<p>For example, to set a storage attribute:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$entity</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">//get employee attribute with ID 1</span>
 <span class="hljs-variable">$name</span>:=<span class="hljs-variable">$entity</span>.lastname <span class="hljs-comment">//get the employee name, e.g. "Smith"</span>
 <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Jones"</span> <span class="hljs-comment">//set the employee name</span>
</code></pre>
<blockquote>
<p>Pictures attributes cannot be assigned directly with a given path in an entity.</p>
</blockquote>
<p>Accessing a related attribute depends on the attribute kind. For example, with the following structure:</p>
<p><img src="/docs/assets/en/ORDA/entityAttributes.png" alt=""></p>
<p>You can access data through the related object(s):</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$entity</span>:=ds.Project.<span class="hljs-function">all</span>().<span class="hljs-function">first</span>().theClient <span class="hljs-comment">//get the Company entity associated to the project</span>
 <span class="hljs-variable">$EntitySel</span>:=ds.Company.<span class="hljs-function">all</span>().<span class="hljs-function">first</span>().companyProjects <span class="hljs-comment">//get the selection of projects for the company</span>
</code></pre>
<p>Note that both <em>theClient</em> and <em>companyProjects</em> in the above example are primary relation attributes and represent a direct relationship between the two dataclasses. However, relation attributes can also be built upon paths through relationships at several levels, including circular references. For example, consider the following structure:</p>
<p><img src="/docs/assets/en/ORDA/entityAttributes2.png" alt=""></p>
<p>Each employee can be a manager and can have a manager. To get the manager of the manager of an employee, you can simply write:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$myEmp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">50</span>)
 <span class="hljs-variable">$manLev2</span>:=<span class="hljs-variable">$myEmp</span>.manager.manager.lastname
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="assigning-values-to-relation-attributes"></a><a href="#assigning-values-to-relation-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Assigning values to relation attributes</h2>
<p>In the ORDA architecture, relation attributes directly contain data related to entities:</p>
<ul>
<li>An N-&gt;1 type relation attribute (<strong>relatedEntity</strong> kind) contains an entity</li>
<li>A 1-&gt;N type relation attribute (<strong>relatedEntities</strong> kind) contains an entity selection</li>
</ul>
<p>Let's look at the following (simplified) structure:</p>
<p><img src="/docs/assets/en/ORDA/entityAttributes3.png" alt=""></p>
<p>In this example, an entity in the &quot;Employee&quot; dataclass contains an object of type Entity in the &quot;employer&quot; attribute (or a null value). An entity in the &quot;Company&quot; dataclass contains an object of type EntitySelection in the &quot;staff&quot; attribute (or a null value).</p>
<blockquote>
<p>In ORDA, the Automatic or Manual property of relations has no effect.</p>
</blockquote>
<p>To assign a value directly to the &quot;employer&quot; attribute, you must pass an existing entity from the &quot;Company&quot; dataclass. Beispiel:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-comment">// create an employee</span>
 <span class="hljs-variable">$emp</span>.lastname:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">// assign a value to an attribute</span>
 <span class="hljs-variable">$emp</span>.employer:=ds.Company.<span class="hljs-function">query</span>(<span class="hljs-string">"name =:1"</span>;<span class="hljs-string">"4D"</span>)[<span class="hljs-number">0</span>]  <span class="hljs-comment">//assign a company entity</span>
 <span class="hljs-variable">$emp</span>.<span class="hljs-function">save</span>()
</code></pre>
<p>4D provides an additional facility for entering a relation attribute for an N entity related to a &quot;1&quot; entity: you pass the primary key of the &quot;1&quot; entity directly when assigning a value to the relation attribute. For this to work, you pass data of type Number or Text (the primary key value) to the relation attribute. 4D then automatically takes care of searching for the corresponding entity in the dataclass. Beispiel:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$emp</span>.lastname:=<span class="hljs-string">"Wesson"</span>
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-number">2</span> <span class="hljs-comment">// assign a primary key to the relation attribute</span>
  <span class="hljs-comment">//4D looks for the company whose primary key (in this case, its ID) is 2</span>
  <span class="hljs-comment">//and assigns it to the employee</span>
 <span class="hljs-variable">$emp</span>.<span class="hljs-function">save</span>()
</code></pre>
<p>This is particularly useful when you are importing large amounts of data from a relational database. This type of import usually contains an &quot;ID&quot; column, which references a primary key that you can then assign directly to a relation attribute.</p>
<p>This also means that you can assign primary keys in the N entities without corresponding entities having already been created in the 1 datastore class. If you assign a primary key that does not exist in the related datastore class, it is nevertheless stored and assigned by 4D as soon as this &quot;1&quot; entity is created.</p>
<p>You can assign or modify the value of a &quot;1&quot; related entity attribute from the &quot;N&quot; dataclass directly through the related attribute. For example, if you want to modify the name attribute of a related Company entity of an Employee entity, you can write:</p>
<pre><code class="hljs css language-code4d"> <span class="hljs-variable">$emp</span>:=ds<span class="hljs-selector-class">.Employee</span>.get(<span class="hljs-number">2</span>) <span class="hljs-comment">// load the Employee entity with primary key 2</span>
 <span class="hljs-variable">$emp</span><span class="hljs-selector-class">.employer</span><span class="hljs-selector-class">.name</span>:=<span class="hljs-string">"4D, Inc."</span> <span class="hljs-comment">//modify the name attribute of the related Company</span>
 <span class="hljs-variable">$emp</span><span class="hljs-selector-class">.employer</span>.save() <span class="hljs-comment">//save the related attribute</span>
  <span class="hljs-comment">//the related entity is updated</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="creating-an-entity-selection"></a><a href="#creating-an-entity-selection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating an entity selection</h2>
<p>You can create an object of type entity selection as follows:</p>
<ul>
<li><p>Querying the entities in a dataclass (see the <code>dataClass.query()</code> method);</p></li>
<li><p>Using the <code>dataClass.all( )</code> method to select all the entities in a dataclass;</p></li>
<li><p>Using the <code>Create entity selection</code> command or the <code>dataClass.newSelection()</code> method to create a blank entity collection object;</p></li>
<li><p>Using one of the various methods from the <strong>ORDA - EntitySelection</strong> theme that returns a new entity selection, such as <code>entitySelection.or()</code>;</p></li>
<li><p>Using a relation attribute of type &quot;related entities&quot; (see below).</p></li>
</ul>
<p>You can simultaneously create and use as many different entity selections as you want for a dataclass. Keep in mind that an entity selection only contains references to entities. Different entity selections can contain references to the same entities.</p>
<blockquote>
<p>An entity selection is only defined in the process where it was created. You cannot, for example, store a reference to an entity selection in an interprocess variable and use it in another process.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="entity-selections-and-attributes"></a><a href="#entity-selections-and-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Entity selections and attributes</h2>
<h3><a class="anchor" aria-hidden="true" id="entity-selections-and-storage-attributes"></a><a href="#entity-selections-and-storage-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Entity selections and Storage attributes</h3>
<p>All storage attributes (text, number, boolean, date) are available as properties of entity selections as well as entities. When used in conjunction with an entity selection, a scalar attribute returns a collection of scalar values. Beispiel:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$locals</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"city = :1"</span>;<span class="hljs-string">"San Jose"</span>) <span class="hljs-comment">//entity selection of people</span>
 <span class="hljs-variable">$localEmails</span>:=<span class="hljs-variable">$locals</span>.emailAddress <span class="hljs-comment">//collection of email addresses (strings)</span>
</code></pre>
<p>This code returns in <em>$localEmails</em> a collection of email addresses as strings.</p>
<h3><a class="anchor" aria-hidden="true" id="entity-selections-and-relation-attributes"></a><a href="#entity-selections-and-relation-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Entity selections and Relation attributes</h3>
<p>In addition to the variety of ways you can query, you can also use relation attributes as properties of entity selections to return new entity selections. For example, consider the following structure:</p>
<p><img src="/docs/assets/en/ORDA/entitySelectionRelationAttributes.png" alt=""></p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$myParts</span>:=ds.Part.<span class="hljs-function">query</span>(<span class="hljs-string">"ID &lt; 100"</span>) <span class="hljs-comment">//Return parts with ID less than 100</span>
 <span class="hljs-variable">$myInvoices</span>:=<span class="hljs-variable">$myParts</span>.invoiceItems.invoice
  <span class="hljs-comment">//All invoices with at least one line item related to a part in $myParts</span>
</code></pre>
<p>The last line will return in $myInvoices an entity selection of all invoices that have at least one invoice item related to a part in the entity selection myParts. When a relation attribute is used as a property of an entity selection, the result is always another entity selection, even if only one entity is returned. When a relation attribute is used as a property of an entity selection and no entities are returned, the result is an empty entity selection, not null.</p>
<h2><a class="anchor" aria-hidden="true" id="entity-locking"></a><a href="#entity-locking" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Entity Locking</h2>
<p>You often need to manage possible conflicts that might arise when several users or processes load and attempt to modify the same entities at the same time. Record locking is a methodology used in relational databases to avoid inconsistent updates to data. The concept is to either lock a record upon read so that no other process can update it, or alternatively, to check when saving a record to verify that some other process hasn’t modified it since it was read. The former is referred to as <strong>pessimistic record locking</strong> and it ensures that a modified record can be written at the expense of locking records to other users. The latter is referred to as <strong>optimistic record locking</strong> and it trades the guarantee of write privileges to the record for the flexibility of deciding write privileges only if the record needs to be updated. In pessimistic record locking, the record is locked even if there is no need to update it. In optimistic record locking, the validity of a record’s modification is decided at update time.</p>
<p>ORDA provides you with two entity locking modes:</p>
<ul>
<li>an automatic &quot;optimistic&quot; mode, suitable for most applications,</li>
<li>a &quot;pessimistic&quot; mode allowing you to lock entities prior to their access.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="automatic-optimistic-lock"></a><a href="#automatic-optimistic-lock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Automatic optimistic lock</h3>
<p>This automatic mechanism is based on the concept of &quot;optimistic locking&quot; which is particularly suited to the issues of web applications. This concept is characterized by the following operating principles:</p>
<ul>
<li>All entities can always be loaded in read-write; there is no <em>a priori</em> &quot;locking&quot; of entities.</li>
<li>Each entity has an internal locking stamp that is incremented each time it is saved.</li>
<li>When a user or process tries to save an entity using the <code>entity.save( )</code> method, 4D compares the stamp value of the entity to be saved with that of the entity found in the data (in the case of a modification):
<ul>
<li>When the values match, the entity is saved and the internal stamp value is incremented.</li>
<li>When the values do not match, it means that another user has modified this entity in the meantime. The save is not performed and an error is returned.</li>
</ul></li>
</ul>
<p>The following diagram illustrates optimistic locking:</p>
<ol>
<li><p>Two processes load the same entity.<br><br><img src="/docs/assets/en/ORDA/optimisticLock1.png" alt=""></p></li>
<li><p>The first process modifies the entity and validates the change. The <code>entity.save( )</code> method is called. The 4D engine automatically compares the internal stamp value of the modified entity with that of the entity stored in the data. Since they match, the entity is saved and its stamp value is incremented.<br><br><img src="/docs/assets/en/ORDA/optimisticLock2.png" alt=""></p></li>
<li><p>The second process also modifies the loaded entity and validates its changes. The <code>entity.save( )</code> method is called. Since the stamp value of the modified entity does not match the one of the entity stored in the data, the save is not performed and an error is returned.<br><br><img src="/docs/assets/en/ORDA/optimisticLock3.png" alt=""></p></li>
</ol>
<p>This can also be illustrated by the following code:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$person1</span>:=ds.Person.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">//Reference to entity</span>
 <span class="hljs-variable">$person2</span>:=ds.Person.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">//Other reference to same entity</span>
 <span class="hljs-variable">$person1</span>.name:=<span class="hljs-string">"Bill"</span>
 <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$person1</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//$result.success=true, change saved</span>
 <span class="hljs-variable">$person2</span>.name:=<span class="hljs-string">"William"</span>
 <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$person2</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//$result.success=false, change not saved</span>
</code></pre>
<p>In this example, we assign to $person1 a reference to the person entity with a key of 1. Then, we assign another reference of the same entity to variable $person2. Using $person1, we change the first name of the person and save the entity. When we attempt to do the same thing with $person2, 4D checks to make sure the entity on disk is the same as when the reference in $person1 was first assigned. Since it isn't the same, it returns false in the success property and doesn’t save the second modification.</p>
<p>When this situation occurs, you can, for example, reload the entity from the disk using the <code>entity.reload( )</code> method so that you can try to make the modification again. The <code>entity.save( )</code> method also proposes an &quot;automerge&quot; option to save the entity in case processes modified attributes that were not the same.</p>
<h3><a class="anchor" aria-hidden="true" id="pessimistic-lock"></a><a href="#pessimistic-lock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pessimistic lock</h3>
<p>You can lock and unlock entities on demand when accessing data. When an entity is getting locked by a process, it is loaded in read/write in this process but it is locked for all other processes. The entity can only be loaded in read-only mode in these processes; its values cannot be edited or saved.</p>
<p>This feature is based upon two methods of the <code>Entity</code> class:</p>
<ul>
<li><code>entity.lock()</code></li>
<li><code>entity.unlock()</code></li>
</ul>
<p>For more information, please refer to the descriptions for these methods.</p>
<h3><a class="anchor" aria-hidden="true" id="concurrent-use-of-4d-classic-locks-and-orda-pessimistic-locks"></a><a href="#concurrent-use-of-4d-classic-locks-and-orda-pessimistic-locks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Concurrent use of 4D classic locks and ORDA pessimistic locks</h3>
<p>Using both classic and ORDA commands to lock records is based upon the following principles:</p>
<ul>
<li>A lock set with a classic 4D command on a record prevents ORDA to lock the entity matching the record.</li>
<li>A lock set with ORDA on an entity prevents classic 4D commands to lock the record matching the entity.</li>
</ul>
<p>These principles are shown in the following diagram:</p>
<p><img src="/docs/assets/en/ORDA/concurrent1.png" alt=""></p>
<p><strong>Transaction locks</strong> also apply to both classic and ORDA commands. In a multiprocess or a multi-user application, a lock set within a transaction on a record by a classic command will result in preventing any other processes to lock entities related to this record (or conversely), until the transaction is validated or canceled.</p>
<ul>
<li>Example with a lock set by a classic command:<br><br><img src="/docs/assets/en/ORDA/concurrent2.png" alt=""></li>
<li>Example with a lock set by an ORDA method:<br><br><img src="/docs/assets/en/ORDA/concurrent3.png" alt=""></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="clientserver-optimization"></a><a href="#clientserver-optimization" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Client/server optimization</h2>
<p>4D provides an automatic optimization for ORDA requests that use entity selections or load entities in client/server configurations. This optimization speeds up the execution of your 4D application by reducing drastically the volume of information transmitted over the network.</p>
<p>The following optimization mechanisms are implemented:</p>
<ul>
<li><p>When a client requests an entity selection from the server, 4D automatically &quot;learns&quot; which attributes of the entity selection are actually used on the client side during the code execution, and builds a corresponding &quot;optimization context&quot;. This context is attached to the entity selection and stores the used attributes. It will be dynamically updated if other attributes are used afterwards.</p></li>
<li><p>Subsequent requests sent to the server on the same entity selection automatically reuse the optimization context and only get necessary attributes from the server, which accelerates the processing. For example in an entity selection-based list box, the learning phase takes place during the display of the first rows, next rows display is very optimized.</p></li>
<li><p>An existing optimization context can be passed as a property to another entity selection of the same dataclass, thus bypassing the learning phase and accelerating the application (see <a href="#using-the-context-property">Using the context property</a> below).</p></li>
</ul>
<p>The following methods automatically associate the optimization context of the source entity selection to the returned entity selection:</p>
<ul>
<li><code>entitySelection.and()</code></li>
<li><code>entitySelection.minus()</code></li>
<li><code>entitySelection.or()</code></li>
<li><code>entitySelection.orderBy()</code></li>
<li><code>entitySelection.slice()</code></li>
<li><code>entitySelection.drop()</code></li>
</ul>
<p><strong>Beispiel</strong></p>
<p>Given the following code:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=<span class="hljs-variable">$ds</span>.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstname = ab@"</span>)<span class="hljs-keyword">
 For each</span>(<span class="hljs-variable">$e</span>;<span class="hljs-variable">$sel</span>)
    <span class="hljs-variable">$s</span>:=<span class="hljs-variable">$e</span>.firstname+<span class="hljs-string">" "</span>+<span class="hljs-variable">$e</span>.lastname+<span class="hljs-string">" works for "</span>+<span class="hljs-variable">$e</span>.employer.name <span class="hljs-comment">// $e.employer refers to Company table</span><span class="hljs-keyword">
 End for each</span>
</code></pre>
<p>Thanks to the optimization, this request will only get data from used attributes (firstname, lastname, employer, employer.name) in <em>$sel</em> after a learning phase.</p>
<h3><a class="anchor" aria-hidden="true" id="using-the-context-property"></a><a href="#using-the-context-property" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using the context property</h3>
<p>You can increase the benefits of the optimization by using the <strong>context</strong> property. This property references an optimization context &quot;learned&quot; for an entity selection. It can be passed as parameter to ORDA methods that return new entity selections, so that entity selections directly request used attributes to the server and bypass the learning phase.</p>
<p>A same optimization context property can be passed to unlimited number of entity selections on the same dataclass. All ORDA methods that handle entity selections support the <strong>context</strong> property (for example <code>dataClass.query( )</code> or <code>dataClass.all( )</code> method). Keep in mind, however, that a context is automatically updated when new attributes are used in other parts of the code. Reusing the same context in different codes could result in overloading the context and then, reduce its efficiency.</p>
<blockquote>
<p>A similar mechanism is implemented for entities that are loaded, so that only used attributes are requested (see the <code>dataClass.get( )</code> method).</p>
</blockquote>
<p><strong>Example with <code>dataClass.query( )</code> method:</strong></p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel1</span>; <span class="hljs-variable">$sel2</span>; <span class="hljs-variable">$sel3</span>; <span class="hljs-variable">$sel4</span>; <span class="hljs-variable">$querysettings</span>; <span class="hljs-variable">$querysettings2 </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$data </span>: Collection
 <span class="hljs-variable">$querysettings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"shortList"</span>)
 <span class="hljs-variable">$querysettings2</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"longList"</span>)

 <span class="hljs-variable">$sel1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = S@"</span>;<span class="hljs-variable">$querysettings</span>)
 <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractData</span>(<span class="hljs-variable">$sel1</span>) <span class="hljs-comment">// In extractData method an optimization is triggered and associated to context "shortList"</span>

 <span class="hljs-variable">$sel2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Sm@"</span>;<span class="hljs-variable">$querysettings</span>)
 <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractData</span>(<span class="hljs-variable">$sel2</span>) <span class="hljs-comment">// In extractData method the optimization associated to context "shortList" is applied</span>

 <span class="hljs-variable">$sel3</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Smith"</span>;<span class="hljs-variable">$querysettings2</span>)
 <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractDetailedData</span>(<span class="hljs-variable">$sel3</span>) <span class="hljs-comment">// In extractDetailedData method an optimization is triggered and associated to context "longList"</span>

 <span class="hljs-variable">$sel4</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Brown"</span>;<span class="hljs-variable">$querysettings2</span>)
 <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractDetailedData</span>(<span class="hljs-variable">$sel4</span>) <span class="hljs-comment">// In extractDetailedData method the optimization associated to context "longList" is applied</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="entity-selection-based-list-box"></a><a href="#entity-selection-based-list-box" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Entity selection-based list box</h3>
<p>Entity selection optimization is automatically applied to entity selection-based list boxes in client/server configurations, when displaying and scrolling a list box content: only the attributes displayed in the list box are requested from the server.</p>
<p>A specific &quot;page mode&quot; context is also provided when loading the current entity through the <strong>Current item</strong> property expression of the list box (see <a href="/docs/de/FormObjects/listboxOverview.html#list-box-types">Collection or entity selection type list boxes</a>). This feature allows you to not overload the list box initial context in this case, especially if the &quot;page&quot; requests additional attributes. Note that only the use of <strong>Current item</strong> expression will create/use the page context (access through <code>entitySelection\[index]</code> will alter the entity selection context).</p>
<p>Subsequent requests to server sent by entity browsing methods will also support this optimization. The following methods automatically associate the optimization context of the source entity to the returned entity:</p>
<ul>
<li><code>entity.next( )</code></li>
<li><code>entity.first( )</code></li>
<li><code>entity.last( )</code></li>
<li><code>entity.previous( )</code></li>
</ul>
<p>For example, the following code loads the selected entity and allows browsing in the entity selection. Entities are loaded in a separate context and the list box initial context is left untouched:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$myEntity</span>:=Form.currentElement <span class="hljs-comment">//current item expression</span>
  <span class="hljs-comment">//... do something</span>
 <span class="hljs-variable">$myEntity</span>:=<span class="hljs-variable">$myEntity</span>.<span class="hljs-function">next</span>() <span class="hljs-comment">//loads the next entity using the same context</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/de/ORDA/ordaClasses.html"><span class="arrow-prev">← </span><span>Data Model Classes</span></a><a class="docs-next button" href="/docs/de/ORDA/datastores.html"><span>Using a remote datastore</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#creating-an-entity">Creating an entity</a></li><li><a href="#entities-and-references">Entities and references</a></li><li><a href="#using-entity-attributes">Using entity attributes</a></li><li><a href="#assigning-values-to-relation-attributes">Assigning values to relation attributes</a></li><li><a href="#creating-an-entity-selection">Creating an entity selection</a></li><li><a href="#entity-selections-and-attributes">Entity selections and attributes</a><ul class="toc-headings"><li><a href="#entity-selections-and-storage-attributes">Entity selections and Storage attributes</a></li><li><a href="#entity-selections-and-relation-attributes">Entity selections and Relation attributes</a></li></ul></li><li><a href="#entity-locking">Entity Locking</a><ul class="toc-headings"><li><a href="#automatic-optimistic-lock">Automatic optimistic lock</a></li><li><a href="#pessimistic-lock">Pessimistic lock</a></li><li><a href="#concurrent-use-of-4d-classic-locks-and-orda-pessimistic-locks">Concurrent use of 4D classic locks and ORDA pessimistic locks</a></li></ul></li><li><a href="#clientserver-optimization">Client/server optimization</a><ul class="toc-headings"><li><a href="#using-the-context-property">Using the context property</a></li><li><a href="#entity-selection-based-list-box">Entity selection-based list box</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2020 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:de"]}
              });
            </script></body></html>
