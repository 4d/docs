/*! For license information please see f4f94d30.eb25dac2.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1999],{396160:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>a,frontMatter:()=>c,metadata:()=>d,toc:()=>o});var s=t(474848),r=t(28453);const c={id:"WebSocketServerClass",title:"WebSocketServer"},i=void 0,d={id:"API/WebSocketServerClass",title:"WebSocketServer",description:"The WebSocketServer class allows you to create and configure a WebSocket server in 4D. Once the 4D WebSocket server is active, you can open and use WebSocket connections between 4D and clients using the WebSocketConnection class.",source:"@site/versioned_docs/version-20/API/WebSocketServerClass.md",sourceDirName:"API",slug:"/API/WebSocketServerClass",permalink:"/docs/20/API/WebSocketServerClass",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FWebSocketServerClass.md%20(20)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20",frontMatter:{id:"WebSocketServerClass",title:"WebSocketServer"},sidebar:"docs",previous:{title:"WebSocketConnection",permalink:"/docs/20/API/WebSocketConnectionClass"},next:{title:"ZIPArchive",permalink:"/docs/20/API/ZipArchiveClass"}},l={},o=[{value:"Requirements",id:"requirements",level:3},{value:"Example",id:"example",level:3},{value:"WebSocketServer object",id:"websocketserver-object",level:3},{value:"4D.WebSocketServer.new()",id:"4dwebsocketservernew",level:2},{value:"<em>WSSHandler</em> parameter",id:"wsshandler-parameter",level:3},{value:"Example of <code>WSSHandler</code> class",id:"example-of-wsshandler-class",level:3},{value:"<code>request</code> object",id:"request-object",level:3},{value:"<code>connectionHandler</code> object",id:"connectionhandler-object",level:3},{value:"Example of <code>connectionHandler</code> class",id:"example-of-connectionhandler-class",level:3},{value:"<em>options</em> parameter",id:"options-parameter",level:3},{value:".connections",id:"connections",level:2},{value:"Description",id:"description",level:4},{value:".dataType",id:"datatype",level:2},{value:"Description",id:"description-1",level:4},{value:".handler",id:"handler",level:2},{value:"Description",id:"description-2",level:4},{value:".path",id:"path",level:2},{value:"Description",id:"description-3",level:4},{value:".terminate()",id:"terminate",level:2},{value:"Description",id:"description-4",level:4},{value:".terminated",id:"terminated",level:2},{value:"Description",id:"description-5",level:4}];function h(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"WebSocketServer"})," class allows you to create and configure a WebSocket server in 4D. Once the 4D WebSocket server is active, you can open and use WebSocket connections between 4D and clients using the ",(0,s.jsxs)(n.a,{href:"/docs/20/API/WebSocketConnectionClass",children:[(0,s.jsx)(n.code,{children:"WebSocketConnection"})," class"]}),"."]}),"\n",(0,s.jsxs)(n.details,{children:[(0,s.jsx)(n.summary,{children:"History"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Release"}),(0,s.jsx)(n.th,{children:"Changes"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"20"}),(0,s.jsx)(n.td,{children:"Added"})]})})]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"About WebSocket Servers",type:"note",children:(0,s.jsxs)(n.p,{children:["The WebSocket protocol provides full-duplex communication channel between a WebSocket Server and a client (e.g. a Web browser). For more information on WebSocket servers, read ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/WebSocket",children:"this page on Wikipedia"}),"."]})}),"\n",(0,s.jsx)(n.admonition,{title:"See also",type:"info",children:(0,s.jsxs)(n.p,{children:["See also ",(0,s.jsx)(n.a,{href:"https://blog.4d.com/new-built-in-websocket-server/",children:"this blog post"})," about the 4D WebSocket server."]})}),"\n",(0,s.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(n.p,{children:"To create and handle your WebSocket Server in 4D, you will have to use two 4D build-in classes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["this class (",(0,s.jsx)(n.code,{children:"4D.WebSocketServer"}),") to manage the server itself,"]}),"\n",(0,s.jsxs)(n.li,{children:["the ",(0,s.jsx)(n.a,{href:"/docs/20/API/WebSocketConnectionClass",children:(0,s.jsx)(n.code,{children:"4D.WebSocketConnection"})})," class to manage connections and messages."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"In addition, you will have to create two user classes that will contain callback functions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"a user class to handle server connections,"}),"\n",(0,s.jsx)(n.li,{children:"a user class to handle messages."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You must ",(0,s.jsx)(n.a,{href:"#4dwebsocketservernew",children:"create the WebSocket server"})," within a ",(0,s.jsx)(n.a,{href:"https://doc.4d.com/4dv19R/help/command/en/page1389.html",children:"worker"})," to keep the connection alive."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.a,{href:"/docs/20/API/WebServerClass",children:"4D Web Server"})," must be started."]}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.p,{children:"In this basic example, our WebSocket server will return messages in uppercase."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Create the WebSocket server using a worker (mandatory) and pass your server connection class as parameter:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\t//create an instance of the user class\n\t//that will handle the connections to the server\nvar $handler:cs.myServerHandler\n$handler:=cs.myServerHandler.new()\n\nCALL WORKER("WebSocketServer"; Formula(wss:=4D.WebSocketServer.new($handler)))  \n\t//assign a variable (wss) to the WebSocket allows you  \n\t//to call wss.terminate() afterwards\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Define the ",(0,s.jsx)(n.code,{children:"myServerHandler"})," user class containing callback function(s) used to handle connections to the server:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:"//myServerHandler class\n\nFunction onConnection($wss : Object; $event : Object) : Object\n\t//returns an instance of the user class\n\t//that will handle the messages\n\treturn cs.myConnectionHandler.new()\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Define the ",(0,s.jsx)(n.code,{children:"myConnectionHandler"})," user class containing callback function(s) used to handle messages:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:"// myConnectionHandler class\n\nFunction onMessage($ws : 4D.WebSocketConnection; $message : Object)\n\t//resends the message in uppercase\n\t$ws.send(Uppercase($message.data))\n\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"Client-Side JS",type:"tip",children:(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://blog.4d.com/websocket-server/",children:"this blog post"})," for an example of client-side Javascript code handling a WebSocket connection."]})}),"\n",(0,s.jsx)(n.h3,{id:"websocketserver-object",children:"WebSocketServer object"}),"\n",(0,s.jsx)(n.p,{children:"WebSocket server objects provide the following properties and functions:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsx)(n.tr,{children:(0,s.jsx)(n.th,{})})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsx)(n.tr,{children:(0,s.jsxs)(n.td,{children:[(0,s.jsxs)(n.a,{href:"#connections",children:[(0,s.jsx)(n.strong,{children:".connections"})," : Collection"]}),(0,s.jsx)(n.br,{}),"all current connections handled by the WebSocket server"]})}),(0,s.jsx)(n.tr,{children:(0,s.jsxs)(n.td,{children:[(0,s.jsxs)(n.a,{href:"#dataType",children:[(0,s.jsx)(n.strong,{children:".dataType"})," : Text"]}),(0,s.jsx)(n.br,{}),"the type of the data received or sent"]})}),(0,s.jsx)(n.tr,{children:(0,s.jsxs)(n.td,{children:[(0,s.jsxs)(n.a,{href:"#handler",children:[(0,s.jsx)(n.strong,{children:".handler"})," : Object"]}),(0,s.jsx)(n.br,{}),"the accessor that gets the ",(0,s.jsx)(n.code,{children:"WSSHandler"})," object used to initiate the WebSocket server"]})}),(0,s.jsx)(n.tr,{children:(0,s.jsxs)(n.td,{children:[(0,s.jsxs)(n.a,{href:"#path",children:[(0,s.jsx)(n.strong,{children:".path"})," : Text"]}),(0,s.jsx)(n.br,{}),"the pattern of the path to access the WebSocket server"]})}),(0,s.jsx)(n.tr,{children:(0,s.jsxs)(n.td,{children:[(0,s.jsxs)(n.a,{href:"#terminate",children:[(0,s.jsx)(n.strong,{children:".terminate"}),"()",(0,s.jsx)(n.br,{}),(0,s.jsx)(n.strong,{children:".terminate"}),"( ",(0,s.jsx)(n.em,{children:"timeout"})," : Integer )"]}),(0,s.jsx)(n.br,{}),"closes the WebSocket server"]})}),(0,s.jsx)(n.tr,{children:(0,s.jsxs)(n.td,{children:[(0,s.jsxs)(n.a,{href:"#terminated",children:[(0,s.jsx)(n.strong,{children:".terminated"})," : Boolean"]}),(0,s.jsx)(n.br,{}),"True if the WebSocket server is closed"]})})]})]}),"\n",(0,s.jsx)(n.h2,{id:"4dwebsocketservernew",children:"4D.WebSocketServer.new()"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"4D.WebSocketServer.new"}),"( ",(0,s.jsx)(n.em,{children:"WSSHandler"})," : Object { ; ",(0,s.jsx)(n.em,{children:"options"})," : Object } ) : 4D.WebSocketServer"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"#wsshandler-parameter",children:"WSSHandler"})}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"->"}),(0,s.jsx)(n.td,{children:"Object of the user class declaring the WebSocket Server callbacks"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"#options-parameter",children:"options"})}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"->"}),(0,s.jsx)(n.td,{children:"WebSocket configuration parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Result"}),(0,s.jsx)(n.td,{children:"4D.WebSocketServer"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"New WebSocketServer object"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"4D.WebSocketServer.new()"})," function creates and starts a WebSocket server that will use the specified ",(0,s.jsx)(n.em,{children:"WSSHandler"})," callbacks and (optionally) ",(0,s.jsx)(n.em,{children:"options"}),", and returns a ",(0,s.jsx)(n.code,{children:"4D.WebSocketServer"})," object."]}),"\n",(0,s.jsxs)(n.p,{children:["Calling this function requires that the ",(0,s.jsx)(n.a,{href:"/docs/20/API/WebServerClass",children:"4D Web Server"})," is started. The ",(0,s.jsx)(n.strong,{children:"host"})," and ",(0,s.jsx)(n.strong,{children:"port"})," of the WebSocket server are the same as the host and port of the 4D Web Server."]}),"\n",(0,s.jsxs)(n.h3,{id:"wsshandler-parameter",children:[(0,s.jsx)(n.em,{children:"WSSHandler"})," parameter"]}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.em,{children:"WSSHandler"})," parameter, pass an instance of a user class that will be called every time an event occurs on the WebSocket server --essentially, connection events. The class should define the following callback functions (only ",(0,s.jsx)(n.code,{children:"onConnection"})," is mandatory):"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onConnection"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/FunctionClass",children:"Function"})}),(0,s.jsx)(n.td,{children:"(mandatory) Callback when a new client connection is started (see below)"}),(0,s.jsx)(n.td,{children:"undefined"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onOpen"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/FunctionClass",children:"Function"})}),(0,s.jsx)(n.td,{children:"Callback when the WebSocket server is started (see below)"}),(0,s.jsx)(n.td,{children:"undefined"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onTerminate"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/FunctionClass",children:"Function"})}),(0,s.jsx)(n.td,{children:"Callback when the WebSocket server is terminated (see below)"}),(0,s.jsx)(n.td,{children:"undefined"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onError"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/FunctionClass",children:"Function"})}),(0,s.jsx)(n.td,{children:"Callback when an error has occurred (see below)"}),(0,s.jsx)(n.td,{children:"undefined"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"WSHandler.onConnection"}),"(",(0,s.jsx)(n.em,{children:"WSServer"})," : Object ; ",(0,s.jsx)(n.em,{children:"event"})," : Object) : Object | null"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"WSServer"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"4D.WebSocketServer"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Current WebSocket server object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"event"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:'"connection"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"request"}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"request"})," object. Contains information on the connection request (see below)"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Function result"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"->"}),(0,s.jsxs)(n.td,{children:[(0,s.jsxs)(n.a,{href:"#connectionhandler-object",children:[(0,s.jsx)(n.code,{children:"connectionHandler"})," object"]})," (see below). If this function returns a ",(0,s.jsx)(n.code,{children:"connectionHandler"})," object, a ",(0,s.jsxs)(n.a,{href:"/docs/20/API/WebSocketConnectionClass#websocketconnection-object",children:[(0,s.jsx)(n.code,{children:"4D.WebSocketConnection"})," object"]})," is automatically created and added to the ",(0,s.jsx)(n.a,{href:"#connections",children:"collection of connections"}),". This object is then received as parameter in each function of the ",(0,s.jsx)(n.code,{children:"connectionHandler"})," object. If the returned value is null or undefined, the connection is cancelled."]})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["This callback is called when the handshake is complete. It must be called with a valid ",(0,s.jsxs)(n.a,{href:"#connectionhandler-object",children:[(0,s.jsx)(n.code,{children:"connectionHandler"})," object"]})," to create the WebSocket connection, otherwise the connection is cancelled."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"WSHandler.onOpen"}),"(",(0,s.jsx)(n.em,{children:"WSServer"})," : Object ; ",(0,s.jsx)(n.em,{children:"event"})," : Object)"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"WSServer"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"4D.WebSocketServer"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Current WebSocket server object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"event"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:'"open"'})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Event emitted when the websocket server is started."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"WSHandler.onTerminate"}),"(",(0,s.jsx)(n.em,{children:"WSServer"})," : Object ; ",(0,s.jsx)(n.em,{children:"event"})," : Object)"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"WSServer"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"4D.WebSocketServer"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Current WebSocket server object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"event"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:'"terminate"'})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Event emitted when the HTTP server or the WebSocket server is closed."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"WSHandler.onError"}),"(",(0,s.jsx)(n.em,{children:"WSServer"})," : Object ; ",(0,s.jsx)(n.em,{children:"event"})," : Object)"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"WSServer"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"4D.WebSocketServer"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Current WebSocket server object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"event"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:'"error"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"errors"}),(0,s.jsx)(n.td,{children:"Collection"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsxs)(n.td,{children:["Collection of 4D error stack in case of execution error",(0,s.jsx)(n.li,{children:"[].errCode (number) -  4D error code"}),(0,s.jsx)(n.li,{children:"[].message (text) - Description of the 4D error"}),(0,s.jsx)(n.li,{children:"[].componentSignature (text) - Signature of the internal component which returned the error"})]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Event emitted when an error occurs on the WebSocket server."}),"\n",(0,s.jsxs)(n.h3,{id:"example-of-wsshandler-class",children:["Example of ",(0,s.jsx)(n.code,{children:"WSSHandler"})," class"]}),"\n",(0,s.jsxs)(n.p,{children:["This example of a basic chat feature illustrates how to handle WebSocket server connections in a ",(0,s.jsx)(n.em,{children:"WSSHandler"})," class."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'//myWSServerHandler class\n\nFunction onConnection($wss : Object; $event : Object) : Object\n\n\tIf (VerifyAddress($event.request.remoteAddress))\n\t\t// The VerifyAddress method validates the client address\n\t\t// The returned WSConnectionHandler object will be used\n\t\t// by 4D to instantiate the 4D.WebSocketConnection object\n\t\t// related to this connection\n\t\treturn cs.myConnectionHandler.new()   \n\t\t// See connectionHandler object\n\tElse\n\t\t// The connection is cancelled\t\t\n\t\treturn Null\n\tEnd if\n\nFunction onOpen($wss : Object; $event : Object)\nLogFile("*** Server started")\n\nFunction onTerminate($wss : Object; $event : Object)\nLogFile("*** Server closed")\n\nFunction onError($wss : Object; $event : Object)\nLogFile("!!! Server error: "+$event.errors.first().message)\n\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"request-object",children:[(0,s.jsx)(n.code,{children:"request"})," object"]}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:"request"})," object contains the following properties:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"headers"}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsxs)(n.td,{children:["The client HTTP GET request. ",(0,s.jsx)(n.code,{children:"headers.key=value"})," (value can be a collection if the same key appears multiple times)"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"query"}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsxs)(n.td,{children:["Object that contains the URL parameters. For example, if parameters are: ",(0,s.jsx)(n.code,{children:"?key1=value1&key2=value2"})," -> ",(0,s.jsx)(n.code,{children:"query.key1=value1"}),", ",(0,s.jsx)(n.code,{children:"query.key2=value2"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"url"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsxs)(n.td,{children:["contains only the URL that is present in the actual HTTP request. Ex: ",(0,s.jsx)(n.code,{children:"GET /status?name=ryan HTTP/1.1"}),' -> url="/status?name=ryan"']})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"remoteAddress"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"IP Address of the client"})]})]})]}),"\n",(0,s.jsxs)(n.h3,{id:"connectionhandler-object",children:[(0,s.jsx)(n.code,{children:"connectionHandler"})," object"]}),"\n",(0,s.jsxs)(n.p,{children:["As a result of the ",(0,s.jsx)(n.code,{children:"WSHandler.onConnection"})," callback, pass a ",(0,s.jsx)(n.code,{children:"connectionHandler"})," object, which is an instance of a user class that will be called every time an event occurs in the WebSocket connection --essentially, messages received. The class should define the following callback functions (only ",(0,s.jsx)(n.code,{children:"onMessage"})," is mandatory):"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onMessage"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/FunctionClass",children:"Function"})}),(0,s.jsx)(n.td,{children:"(mandatory) Function called when a new message is received from this connection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onOpen"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/FunctionClass",children:"Function"})}),(0,s.jsxs)(n.td,{children:["Function called when the ",(0,s.jsx)(n.code,{children:"4D.WebSocketConnection"})," is created"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onTerminate"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/FunctionClass",children:"Function"})}),(0,s.jsx)(n.td,{children:"Function called when this connection is terminated"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"onError"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/FunctionClass",children:"Function"})}),(0,s.jsx)(n.td,{children:"Function called when an error occured"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"connectionHandler.onMessage"}),"(",(0,s.jsx)(n.em,{children:"ws"})," : 4D.WebSocketConnection ; ",(0,s.jsx)(n.em,{children:"event"})," : Object)"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ws"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/WebSocketConnectionClass",children:(0,s.jsx)(n.code,{children:"4D.WebSocketConnection"})})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Current WebSocket connection object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"event"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:'"message"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"data"}),(0,s.jsx)(n.td,{children:"Text / Blob / Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:"data sent by the client"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"This Callback for WebSocket data. Called each time the WebSocket receives data."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"connectionHandler.onOpen"}),"(",(0,s.jsx)(n.em,{children:"ws"})," : 4D.WebSocketConnection ; ",(0,s.jsx)(n.em,{children:"event"})," : Object)"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ws"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/WebSocketConnectionClass",children:(0,s.jsx)(n.code,{children:"4D.WebSocketConnection"})})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Current WebSocket connection object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"event"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:'"open"'})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Called when the ",(0,s.jsx)(n.code,{children:"connectionHandler"})," object is created (after ",(0,s.jsx)(n.code,{children:"WSS.onConnection"})," event)."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"connectionHandler.onTerminate"}),"(",(0,s.jsx)(n.em,{children:"ws"})," : 4D.WebSocketConnection ; ",(0,s.jsx)(n.em,{children:"event"})," : Object)"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ws"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/WebSocketConnectionClass",children:(0,s.jsx)(n.code,{children:"4D.WebSocketConnection"})})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Current WebSocket connection object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"event"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:'"terminate"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"code"}),(0,s.jsx)(n.td,{children:"Number"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsxs)(n.td,{children:["Status code indicating why the connection has been closed. If the WebSocket does not return an error code, ",(0,s.jsx)(n.code,{children:"code"})," is set to 1005 if no error occurred or to 1006 if there was an error."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"reason"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:"String explaining why the connection has been closed. If the websocket doesn't return an reason, code is undefined"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Function called when the WebSocket is closed."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"connectionHandler.onError"}),"(",(0,s.jsx)(n.em,{children:"ws"})," : 4D.WebSocketConnection ; ",(0,s.jsx)(n.em,{children:"event"})," : Object)"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ws"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/docs/20/API/WebSocketConnectionClass",children:(0,s.jsx)(n.code,{children:"4D.WebSocketConnection"})})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Current WebSocket connection object"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"event"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,s.jsx)(n.td,{children:"Parameters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}}),(0,s.jsx)(n.td,{children:'"error"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"errors"}),(0,s.jsx)(n.td,{children:"Collection"}),(0,s.jsx)(n.td,{}),(0,s.jsxs)(n.td,{style:{textAlign:"center"},children:["Collection of 4D errors stack in case of execution error",(0,s.jsx)(n.li,{children:"[].errCode (number) -  4D error code"}),(0,s.jsx)(n.li,{children:"[].message (text) - Description of the 4D error"}),(0,s.jsx)(n.li,{children:"[].componentSignature (text) - Signature of the internal component which returned the error"})]}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Function called when an error has occurred."}),"\n",(0,s.jsxs)(n.h3,{id:"example-of-connectionhandler-class",children:["Example of ",(0,s.jsx)(n.code,{children:"connectionHandler"})," class"]}),"\n",(0,s.jsxs)(n.p,{children:["This example of a basic chat feature illustrates how to handle messages in a ",(0,s.jsx)(n.em,{children:"connectionHandler"})," class."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'// myConnectionHandler Class\n\nFunction onMessage($ws : 4D.WebSocketConnection; $message : Object)\n\t// Resend the message to all chat clients\n\tThis.broadcast($ws;$message.data)\n\nFunction onOpen($ws : 4D.WebSocketConnection; $message : Object)\n\t// Send a message to new connected users\n\t$ws.send("Welcome on the chat!")\n\t// Send "New client connected" message to all other chat clients\n\tThis.broadcast($ws;"New client connected")\n\nFunction onTerminate($ws : 4D.WebSocketConnection; $message : Object)\n\t// Send "Client disconnected" message to all other chat clients\n\tThis.broadcast($ws;"Client disconnected")\n\nFunction broadcast($ws : 4D.WebSocketConnection; $message:text)\n\tvar $client:4D.WebSocketConnection\n\t// Resend the message to all chat clients\n\tFor each ($client; $ws.wss.connections)\n\t\t// Check that the id is not the current connection\n\t\tIf ($client.id#$ws.id)\n\t\t\t$client.send($message)\n\t\tEnd if\n\tEnd for each\n\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"options-parameter",children:[(0,s.jsx)(n.em,{children:"options"})," parameter"]}),"\n",(0,s.jsxs)(n.p,{children:["In the optional ",(0,s.jsx)(n.em,{children:"options"})," parameter, pass an object that contains the following properties:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"path"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"Represents the path to access the WebSocket server. If no path is defined, the WebSocket server manages all the connections"}),(0,s.jsx)(n.td,{children:"undefined"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dataType"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsxs)(n.td,{children:["Type of the data received through the ",(0,s.jsx)(n.code,{children:"connectionHandler.onMessage"})," and the data send by ",(0,s.jsx)(n.a,{href:"/docs/20/API/WebSocketConnectionClass#send",children:(0,s.jsx)(n.code,{children:"WebSocketConnection.send()"})}),' function. Values: "text", "blob","object"). If "object": (send) transforms object into a json format and sends it; (reception): receives json format and transforms it into object']}),(0,s.jsx)(n.td,{children:"text"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"connections",children:".connections"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:".connections"})," : Collection"]}),"\n",(0,s.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:".connections"})," property contains all current connections handled by the WebSocket server. Each element of the collection is a ",(0,s.jsxs)(n.a,{href:"/docs/20/API/WebSocketConnectionClass",children:[(0,s.jsx)(n.code,{children:"WebSocketConnection"})," object"]}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["When a connection is terminated, its ",(0,s.jsx)(n.a,{href:"/docs/20/API/WebSocketConnectionClass#status",children:(0,s.jsx)(n.code,{children:"status"})}),' changes to "Closed" and it is removed from this collection.']}),"\n",(0,s.jsx)(n.h2,{id:"datatype",children:".dataType"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:".dataType"})," : Text"]}),"\n",(0,s.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:".dataType"})," property contains the type of the data received or sent."]}),"\n",(0,s.jsx)(n.p,{children:"This property is read-only."}),"\n",(0,s.jsx)(n.h2,{id:"handler",children:".handler"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:".handler"})," : Object"]}),"\n",(0,s.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:".handler"})," property contains the accessor that gets the ",(0,s.jsx)(n.code,{children:"WSSHandler"})," object used to initiate the WebSocket server."]}),"\n",(0,s.jsx)(n.h2,{id:"path",children:".path"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:".path"})," : Text"]}),"\n",(0,s.jsx)(n.h4,{id:"description-3",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:".path"})," property contains the pattern of the path to access the WebSocket server. If no path was defined, the WebSocket server manages all connections."]}),"\n",(0,s.jsx)(n.p,{children:"This property is read-only."}),"\n",(0,s.jsx)(n.h2,{id:"terminate",children:".terminate()"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:".terminate"}),"()",(0,s.jsx)(n.br,{}),(0,s.jsx)(n.strong,{children:".terminate"}),"( ",(0,s.jsx)(n.em,{children:"timeout"})," : Integer )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"center"}}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"timeout"}),(0,s.jsx)(n.td,{children:"Integer"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"->"}),(0,s.jsx)(n.td,{children:"Waiting time in seconds before terminating the WebSocket server"})]})})]}),"\n",(0,s.jsx)(n.h4,{id:"description-4",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:".terminate()"})," function closes the WebSocket server."]}),"\n",(0,s.jsxs)(n.p,{children:["By default, if no ",(0,s.jsx)(n.em,{children:"timeout"})," value is set, the function initializes close handshake and waits to receive close frame from the peer, after that sending FIN packet in attempt to perform a clean socket close. When answer received, the socket is destroyed."]}),"\n",(0,s.jsxs)(n.p,{children:["If a ",(0,s.jsx)(n.em,{children:"timeout"})," value is set:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"when the waiting time is reached, forcibly destroys the socket."}),"\n",(0,s.jsxs)(n.li,{children:["if ",(0,s.jsx)(n.em,{children:"timeout"})," = 0, forcibly destroys the socket without closing frames or fin packets exchange, and does it instantly without waiting time."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"terminated",children:".terminated"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:".terminated"})," : Boolean"]}),"\n",(0,s.jsx)(n.h4,{id:"description-5",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:".terminated"})," property contains True if the WebSocket server is closed."]}),"\n",(0,s.jsx)(n.p,{children:"This property is read-only."})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},221020:(e,n,t)=>{var s=t(296540),r=Symbol.for("react.element"),c=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,d=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,t){var s,c={},o=null,h=null;for(s in void 0!==t&&(o=""+t),void 0!==n.key&&(o=""+n.key),void 0!==n.ref&&(h=n.ref),n)i.call(n,s)&&!l.hasOwnProperty(s)&&(c[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===c[s]&&(c[s]=n[s]);return{$$typeof:r,type:e,key:o,ref:h,props:c,_owner:d.current}}n.Fragment=c,n.jsx=o,n.jsxs=o},474848:(e,n,t)=>{e.exports=t(221020)},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>d});var s=t(296540);const r={},c=s.createContext(r);function i(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);