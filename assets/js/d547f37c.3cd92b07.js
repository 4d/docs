"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[35358],{901959:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var s=t(474848),o=t(28453);const i={id:"pop-up-menu",title:"Pop up menu",slug:"/commands/pop-up-menu",displayed_sidebar:"docs"},r=void 0,a={id:"commands-legacy/pop-up-menu",title:"Pop up menu",description:"Pop up menu ( contents {; default {; xCoord ; yCoord}} )  -> Function result",source:"@site/versioned_docs/version-20-R7/commands-legacy/pop-up-menu.md",sourceDirName:"commands-legacy",slug:"/commands/pop-up-menu",permalink:"/docs/commands/pop-up-menu",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fpop-up-menu.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"pop-up-menu",title:"Pop up menu",slug:"/commands/pop-up-menu",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"PLAY",permalink:"/docs/commands/play"},next:{title:"POST CLICK",permalink:"/docs/commands/post-click"}},l={},d=[{value:"Description",id:"description",level:4},{value:"Example",id:"example",level:4},{value:"See also",id:"see-also",level:4}];function c(e){const n={a:"a",br:"br",code:"code",em:"em",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Pop up menu"})," ( ",(0,s.jsx)(n.em,{children:"contents"})," {; ",(0,s.jsx)(n.em,{children:"default"})," {; ",(0,s.jsx)(n.em,{children:"xCoord"})," ; ",(0,s.jsx)(n.em,{children:"yCoord"}),"}} )  -> Function result"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"contents"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Menu text definition"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"default"}),(0,s.jsx)(n.td,{children:"Integer"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Number of menu item selected by default"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"xCoord"}),(0,s.jsx)(n.td,{children:"Integer"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"X coordinate of upper left corner"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"yCoord"}),(0,s.jsx)(n.td,{children:"Integer"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Y coordinate of upper left corner"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Function result"}),(0,s.jsx)(n.td,{children:"Longint"}),(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"Selected menu item number"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"This command is not thread-safe, it cannot be used in preemptive code."})}),"\n",(0,s.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Pop up menu"})," command displays a pop-up menu at the current location of the mouse."]}),"\n",(0,s.jsx)(n.p,{children:"In order to follow user interface rules, you usually call this command in response to a mouse click and if the mouse button is still down."}),"\n",(0,s.jsxs)(n.p,{children:["You define the items of the pop-up menu with the parameter ",(0,s.jsx)(n.em,{children:"contents"})," as follows:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Separate each item from the next one with a semi-colon (",(0,s.jsx)(n.em,{children:";"}),"). For example, ",(0,s.jsx)(n.em,{children:'"ItemText1;ItemText2;ItemText3".'})]}),"\n",(0,s.jsxs)(n.li,{children:["To disable an item, place an opening parenthesis (",(0,s.jsx)(n.em,{children:"("}),") in the item text."]}),"\n",(0,s.jsx)(n.li,{children:'To specify a separation line, pass "-" or "(-" as item text.'}),"\n",(0,s.jsxs)(n.li,{children:["To specify a font style for a line, place in the item text a less than sign (",(0,s.jsx)(n.em,{children:"<"}),") followed by one of these characters:",(0,s.jsx)(n.br,{}),"\n| <B | Bold                     |",(0,s.jsx)(n.br,{}),"\n| -- | ------------------------ |",(0,s.jsx)(n.br,{}),"\n| <I | Italic                   |",(0,s.jsx)(n.br,{}),"\n| <U | Underline                |",(0,s.jsx)(n.br,{}),"\n| <O | Outline (Macintosh only) |",(0,s.jsx)(n.br,{}),"\n| <S | Shadow (Macintosh only)  |"]}),"\n",(0,s.jsxs)(n.li,{children:["To add a check mark to an item, place in the item text an exclamation mark (",(0,s.jsx)(n.em,{children:"!"}),") followed by the character you want as a check mark.\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"On Macintosh, the character is displayed directly. To display the standard check mark whatever the system version or language, use the following statement: Char(18)."}),"\n",(0,s.jsx)(n.li,{children:"On Windows, a check mark is displayed, no matter what character you passed."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"To add an icon to an item, place in the item text a circumflex accent (^) followed by a character whose code plus 208 is the resource ID of a Mac OS-based icon resource."}),"\n",(0,s.jsxs)(n.li,{children:["To add a shortcut to an item, place in the item text a slash (",(0,s.jsx)(n.em,{children:"/"}),") followed by the shortcut character for the item. Note that this last option is purely informative; no shortcut will activate the pop-up menu. However, you may want to include a shortcut if the pop-up menu item has an equivalent in the main menu bar of your application."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Tip:"})," It is possible to disable the mechanism for interpreting special characters (!, /, etc.) in a pop up menu item in order, for example, to have these characters included in the wording. To do this, simply have the item definition in the ",(0,s.jsx)(n.em,{children:"contents"})," parameter begin with the Char(1) statement (e.g. ",(0,s.jsxs)(n.em,{children:[(0,s.jsx)(n.em,{children:"Char"}),'(1)+"1/4 pt"']}),' to define a "1/4 pt" item).']}),"\n",(0,s.jsxs)(n.p,{children:["The optional ",(0,s.jsx)(n.em,{children:"default"})," parameter specifies the default menu item selected when the pop-up menu is displayed. Pass a value between 1 and the number of menu items. If you omit this parameter, the command selects the first menu item as the default."]}),"\n",(0,s.jsxs)(n.p,{children:["The optional ",(0,s.jsx)(n.em,{children:"xCoord"})," and ",(0,s.jsx)(n.em,{children:"yCoord"})," parameters designate the location of the pop-up menu to be displayed. In ",(0,s.jsx)(n.em,{children:"xCoord"})," and ",(0,s.jsx)(n.em,{children:"yCoord"}),", pass respectively the horizontal and vertical coordinates of the upper left corner of the menu. These coordinates must be expressed in pixels in the local coordinate system of the current form. These two parameters must be passed together; if only one is passed, it will be ignored."]}),"\n",(0,s.jsxs)(n.p,{children:["If you use the ",(0,s.jsx)(n.em,{children:"xCoord"})," and ",(0,s.jsx)(n.em,{children:"yCoord"})," parameters, the ",(0,s.jsx)(n.em,{children:"default"})," parameter is ignored. In this case, the mouse is not necessarily located at the level of the pop-up menu."]}),"\n",(0,s.jsx)(n.p,{children:"These parameters are particularly useful for managing 3D buttons with an associated pop-up menu."}),"\n",(0,s.jsx)(n.p,{children:"If you select a menu item, the command returns its number; otherwise, it returns zero (0)."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," Use pop-up menus that have a reasonable number of items. If you want to display more than 50 items, you might think about a using scrollable area in a form instead of a pop-up menu."]}),"\n",(0,s.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.p,{children:"The project method MY SPEED MENU pulls down a navigation speed menu:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0\xa0// MY SPEED MENU project method\n\xa0MOUSE POSITION($vlMouseX;$vlMouseY;$vlButton)\n\xa0If(Macintosh control down|($vlButton=2))\n\xa0\xa0\xa0\xa0$vtItems:="About this database...<i;(-;!-other options;(-"="" \xa0\xa0\xa0\xa0for($vltable;1;get="" last="" table="" number)="" \xa0\xa0\xa0\xa0\xa0\xa0\xa0if(is="" number="" valid($vltable))="" \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0$vtitems:="$vtItems+";"+Table" name($vltable)="" \xa0\xa0\xa0\xa0\xa0\xa0\xa0end="" if="" \xa0\xa0\xa0\xa0end="" for="" \xa0\xa0\xa0\xa0$vluserchoice:="Pop" up="" menu($vtitems)="" \xa0\xa0\xa0\xa0case="" of="" \xa0\xa0\xa0\xa0\xa0\xa0\xa0:($vluserchoice="1)" \xa0\xa0="" display="" information="" options="" \xa0\xa0\xa0\xa0\xa0\xa0\xa0else="" \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0if($vluserchoice="">0)\n\xa0\xa0// Go to table whose number is $vlUserChoice-4\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0End if\n\xa0\xa0\xa0\xa0End case\n\xa0End if</i;(-;!-other>\n'})}),"\n",(0,s.jsx)(n.p,{children:"This project method can be called from:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The method of a form object that reacts to a mouse click without waiting for the mouse button to be released (i.e., an invisible button)"}),"\n",(0,s.jsx)(n.li,{children:"A process that \u201cspies\u201d events and communicate with the other processes"}),"\n",(0,s.jsxs)(n.li,{children:["An event-handling method installed using ",(0,s.jsx)(n.a,{href:"/docs/commands/on-err-call",children:"ON ERR CALL"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In the last two cases, the click does not need to occur in any form object. This is one of the advantages of the ",(0,s.jsx)(n.strong,{children:"Pop up menu"})," command. Generally, you use form objects to display pop-up menus. Using ",(0,s.jsx)(n.strong,{children:"Pop up menu"}),", you can display the menu anywhere."]}),"\n",(0,s.jsx)(n.p,{children:"The pop-up menu is displayed on Windows by pressing the right mouse button; it is displayed on Macintosh by pressing Control-Click. Note, however, that the method does not actually check whether or not there was a mouse click; the caller method tests that."}),"\n",(0,s.jsx)(n.p,{children:"The following is the pop-up menu as it appears on Windows (left) and Macintosh (right). Note the standard check mark for the Windows version."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(19679).A+"",width:"450",height:"155"})}),"\n",(0,s.jsx)(n.h4,{id:"see-also",children:"See also"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/commands/dynamic-pop-up-menu",children:"Dynamic pop up menu"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.a,{href:"/docs/commands/mouse-position",children:"MOUSE POSITION"})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},19679:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/pict36394.en-ee74214a9708b5aa49412a10c758263c.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(296540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);