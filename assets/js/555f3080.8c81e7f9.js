"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[13097],{308156:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>a,frontMatter:()=>d,metadata:()=>h,toc:()=>c});var s=t(474848),r=t(28453);const d={id:"http-request",title:"HTTP Request",slug:"/commands/http-request",displayed_sidebar:"docs"},i=void 0,h={id:"commands-legacy/http-request",title:"HTTP Request",description:"HTTP Request ( httpMethod ; url ; contents ; response {; headerNames ; headerValues}{; *} ) -> Function result",source:"@site/versioned_docs/version-20-R7/commands-legacy/http-request.md",sourceDirName:"commands-legacy",slug:"/commands/http-request",permalink:"/docs/commands/http-request",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fhttp-request.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"http-request",title:"HTTP Request",slug:"/commands/http-request",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"HTTP Parse message",permalink:"/docs/commands/http-parse-message"},next:{title:"HTTP SET CERTIFICATES FOLDER",permalink:"/docs/commands/http-set-certificates-folder"}},o={},c=[{value:"Description",id:"description",level:4},{value:"Example 1",id:"example-1",level:4},{value:"Example 2",id:"example-2",level:4},{value:"Example 3",id:"example-3",level:4},{value:"See also",id:"see-also",level:4}];function l(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"HTTP Request"})," ( ",(0,s.jsx)(n.em,{children:"httpMethod"})," ; ",(0,s.jsx)(n.em,{children:"url"})," ; ",(0,s.jsx)(n.em,{children:"contents"})," ; ",(0,s.jsx)(n.em,{children:"response"})," {; ",(0,s.jsx)(n.em,{children:"headerNames"})," ; ",(0,s.jsx)(n.em,{children:"headerValues"}),"}{; *} ) -> Function result"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"httpMethod"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"HTTP method for request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"url"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"URL to which to send the request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"contents"}),(0,s.jsx)(n.td,{children:"Text, Blob, Picture, Object"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Contents of request body"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"response"}),(0,s.jsx)(n.td,{children:"Text, Blob, Picture, Object"}),(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"Result of request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"headerNames"}),(0,s.jsx)(n.td,{children:"Text array"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Header names of the request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"Returned header names"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"headerValues"}),(0,s.jsx)(n.td,{children:"Text array"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Header values of the request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"Returned header values"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"*"}),(0,s.jsx)(n.td,{children:"Operator"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"If passed, connection is maintained (keep-alive)If omitted, connection is closed automatically"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Function result"}),(0,s.jsx)(n.td,{children:"Longint"}),(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"HTTP status code"})]})]})]}),"\n",(0,s.jsx)(n.admonition,{title:"Compatibility",type:"info",children:(0,s.jsxs)(n.p,{children:["This command is maintained for compatibility reasons only. It is now recommended to use the ",(0,s.jsx)(n.a,{href:"/docs/API/HTTPRequestClass",children:(0,s.jsx)(n.code,{children:"4D.HTTPRequest class"})}),"."]})}),"\n",(0,s.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"HTTP Request"})," command enables all types of HTTP requests to be sent to a specific URL and processes the HTTP server response."]}),"\n",(0,s.jsxs)(n.p,{children:["Pass the HTTP method of the request in the ",(0,s.jsx)(n.em,{children:"httpMethod"})," parameter. You can use one of the following constants, found in the ",(0,s.jsx)(n.em,{children:"HTTP Client"})," theme:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Constant"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Value"}),(0,s.jsx)(n.th,{children:"Comment"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HTTP DELETE method"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"DELETE"}),(0,s.jsxs)(n.td,{children:["See ",(0,s.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HTTP GET method"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"GET"}),(0,s.jsxs)(n.td,{children:["See ",(0,s.jsx)(n.em,{children:"RFC 2616"}),". Same as using ",(0,s.jsx)(n.a,{href:"/docs/commands/http-get",children:"HTTP Get"})," command."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HTTP HEAD method"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"HEAD"}),(0,s.jsxs)(n.td,{children:["See ",(0,s.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HTTP OPTIONS method"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"OPTIONS"}),(0,s.jsxs)(n.td,{children:["See ",(0,s.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HTTP POST method"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"POST"}),(0,s.jsxs)(n.td,{children:["See ",(0,s.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HTTP PUT method"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"PUT"}),(0,s.jsxs)(n.td,{children:["See ",(0,s.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HTTP TRACE method"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"TRACE"}),(0,s.jsxs)(n.td,{children:["See ",(0,s.jsx)(n.em,{children:"RFC 2616"})]})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Pass the URL where you want the request sent in the ",(0,s.jsx)(n.em,{children:"url"})," parameter. The syntax to use is:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"http://[{user}:[{password}]@]host[:{port}][/{path}][?{queryString}]\n"})}),"\n",(0,s.jsx)(n.p,{children:"For example, you can pass the following strings:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'\xa0\xa0\xa0 http://www.myserver.com\xa0\xa0\xa0 http://www.myserver.com/path\xa0\xa0\xa0 http://www.myserver.com/path?name="jones"\xa0\xa0\xa0 https://www.myserver.com/login (*)\xa0\xa0\xa0 http://123.45.67.89:8083\xa0\xa0\xa0 http://john:smith@123.45.67.89:8083\xa0\xa0\xa0 http://[2001:0db8:0000:0000:0000:ff00:0042:8329]\xa0\xa0\xa0 http://[2001:0db8:0000:0000:0000:ff00:0042:8329]:8080/index.html (**)\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"(*)"})," During HTTPS requests, authority of the certificate is not checked.",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"(**)"})," For more information about IPv6 addresses in urls, please refer to the ",(0,s.jsx)(n.a,{href:"https://www.ietf.org/rfc/rfc2732.txt",children:"RFC 2732"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Pass the body of the request in the ",(0,s.jsx)(n.em,{children:"contents"})," parameter. Data passed in this parameter depends on the HTTP method of the request.",(0,s.jsx)(n.br,{}),"\nYou can send data of the Text, BLOB, Picture or Object type. When the ",(0,s.jsx)(n.em,{children:"content-type"})," is not specified, the following types are used:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"for text: text/plain - UTF8"}),"\n",(0,s.jsx)(n.li,{children:"for BLOBs: application/byte-stream"}),"\n",(0,s.jsx)(n.li,{children:"for pictures: known MIME type (best for Web)."}),"\n",(0,s.jsx)(n.li,{children:"for objects: application/json"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["After command execution, the ",(0,s.jsx)(n.em,{children:"response"})," parameter receives the result of the request returned by the server. This result corresponds to the body of the response, with no headers.",(0,s.jsx)(n.br,{}),"\nYou can pass different types of variables in ",(0,s.jsx)(n.em,{children:"response"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Text: When the result is expected to be text (see note below)."}),"\n",(0,s.jsx)(n.li,{children:"BLOB: When the result is expected to be in binary"}),"\n",(0,s.jsx)(n.li,{children:"Picture: When the result is expected to be a picture."}),"\n",(0,s.jsx)(n.li,{children:"Object: When the result is expected to be an object."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," When a text variable is passed in ",(0,s.jsx)(n.em,{children:"response"}),", 4D will try to decode the data returned from the server. 4D first tries to retrieve the charset from the ",(0,s.jsx)(n.em,{children:"content-type"})," header, then from the content using a BOM, and finally looks for any ",(0,s.jsx)(n.em,{children:"http-equiv charset"})," (in html content) or ",(0,s.jsx)(n.em,{children:"encoding"})," (for xml) attribute. If no charset can be detected, 4D will attempt to decode the response in ANSI. If the conversion fails, the resulting text will be empty. If you are unsure whether the server returns a charset information or a BOM, but you know the encoding, it is more accurate to pass ",(0,s.jsx)(n.em,{children:"response"})," in BLOB and call ",(0,s.jsx)(n.a,{href:"/docs/commands/convert-to-text",children:"Convert to text"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["When you pass an object type variable in the ",(0,s.jsx)(n.em,{children:"response"})," parameter, if the request returns a result with a text content-type, 4D attempts to parse the content as JSON and returns the parsed result as an object. Otherwise, a ",(0,s.jsx)(n.em,{children:"4D.Blob"})," object is returned."]}),"\n",(0,s.jsxs)(n.p,{children:["If the result returned by the server does not correspond to the ",(0,s.jsx)(n.em,{children:"response"})," variable type, it is left blank."]}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.em,{children:"headerNames"})," and ",(0,s.jsx)(n.em,{children:"headerValues"}),", you pass arrays containing the names and values of the request headers.",(0,s.jsx)(n.br,{}),"\nAfter this method is executed, these arrays contain the names and values of headers returned by the HTTP server. More specifically, this lets you manage cookies."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.em,{children:"*"})," parameter enables the keep-alive mechanism for the server connection. By default, if this parameter is omitted, keep-alive is not enabled."]}),"\n",(0,s.jsxs)(n.p,{children:["The command returns a standard HTTP status code (200=OK and so on) as returned by the server. The list of HTTP status codes is provided in ",(0,s.jsx)(n.em,{children:"RFC 2616"}),".",(0,s.jsx)(n.br,{}),"\nIf you are unable to connect to the server for a reason related to the network (DNS Failed, Server not reachable...), the command returns 0 and an error is generated. You can intercept errors using an error-handling method installed by the ",(0,s.jsx)(n.a,{href:"/docs/commands/on-err-call",children:"ON ERR CALL"})," command."]}),"\n",(0,s.jsx)(n.h4,{id:"example-1",children:"Example 1"}),"\n",(0,s.jsx)(n.p,{children:"Requesting for a record deletion from a remote database:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var $response : Text\n\xa0$body_t:="{record_id:25}"\n\xa0$httpStatus_l:=HTTP Request(HTTP DELETE method;"database.example.com";$body_t;$response)\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," You have to process the request appropriately on the remote server, ",(0,s.jsx)(n.strong,{children:"HTTP Request"})," only handles the request and the returned result."]}),"\n",(0,s.jsx)(n.h4,{id:"example-2",children:"Example 2"}),"\n",(0,s.jsx)(n.p,{children:"Requesting to add a record to a remote database:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:"\xa0var $response : Text\n\xa0$body_t:=\"{fName:'john',fName:'Doe'}\"\n\xa0$httpStatus_l:=HTTP Request(HTTP PUT method;\"database.example.com\";$body_t;$response)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," You have to process the request appropriately on the remote server, ",(0,s.jsx)(n.strong,{children:"HTTP Request"})," only handles the request and the returned result."]}),"\n",(0,s.jsx)(n.h4,{id:"example-3",children:"Example 3"}),"\n",(0,s.jsx)(n.p,{children:"Request to add a record in JSON to a remote database::"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var $content : Object\n\xa0OB SET($content;"lastname";"Doe";"firstname";"John")\n\xa0$result:=HTTP Request(HTTP PUT method;"database.example.com";$content;$response)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"see-also",children:"See also"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/docs/commands/http-get",children:"HTTP Get"})})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>h});var s=t(296540);const r={},d=s.createContext(r);function i(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function h(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);