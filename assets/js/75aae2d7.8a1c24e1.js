"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[32283],{456949:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>o});var t=s(474848),c=s(28453);const r={id:"menu-selected",title:"Menu selected",slug:"/commands/menu-selected",displayed_sidebar:"docs"},d=void 0,i={id:"commands-legacy/menu-selected",title:"Menu selected",description:"Menu selected {( subMenu )} -> Function result",source:"@site/versioned_docs/version-20-R7/commands-legacy/menu-selected.md",sourceDirName:"commands-legacy",slug:"/commands/menu-selected",permalink:"/docs/commands/menu-selected",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fmenu-selected.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"menu-selected",title:"Menu selected",slug:"/commands/menu-selected",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"INSERT MENU ITEM",permalink:"/docs/commands/insert-menu-item"},next:{title:"RELEASE MENU",permalink:"/docs/commands/release-menu"}},l={},o=[{value:"Description",id:"description",level:4},{value:"Example",id:"example",level:4},{value:"See also",id:"see-also",level:4}];function a(e){const n={a:"a",code:"code",em:"em",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Menu selected"})," {( ",(0,t.jsx)(n.em,{children:"subMenu"})," )} -> Function result"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"subMenu"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"Reference of menu containing item selected"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Function result"}),(0,t.jsx)(n.td,{children:"Longint"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"Menu command selected Menu number in high word Menu item number in low word"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"This command is not thread-safe, it cannot be used in preemptive code."})}),"\n",(0,t.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Menu selected"})," is used only when forms are displayed. It detects which menu command has been chosen from a menu and, in the case of a hierarchical submenu, returns the reference of the submenu."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tip:"})," Whenever possible, use methods associated with menu commands in an associated menu bar (with a negative menu bar number) instead of using ",(0,t.jsx)(n.strong,{children:"Menu selected"}),". Associated menu bars are easier to manage, since it is not necessary to test for their selection."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"Menu selected"})," command can be used to work with hierarchical submenus. When selecting a hierarchical menu item beyond the first level, the command returns, in the optional ",(0,t.jsx)(n.em,{children:"subMenu"})," parameter, the reference (MenuRef type, 16-character string) of the submenu to which the selected item belongs. If the menu command does not contain a hierarchical submenu, this parameter receives an empy string."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Menu selected"})," returns the menu-selected number, a long integer. To find the menu number, divide ",(0,t.jsx)(n.strong,{children:"Menu selected"})," by 65,536 and convert the result to an integer. To find the menu command number, calculate the modulo of ",(0,t.jsx)(n.strong,{children:"Menu selected"})," with the modulus 65,536. Use the following formulas to calculate the menu number and menu command number:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"\xa0Menu:=Menu selected\\ 65536\n\xa0menu command:=Menu selected% 65536\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can also extract these values using the ",(0,t.jsx)(n.em,{children:"bitwise operators"})," as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"\xa0Menu:=(Menu selected\xa0&\xa00xFFFF0000)>>16\n\xa0menu command:=Menu selected\xa0&\xa00xFFFF\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If no menu commands are selected, ",(0,t.jsx)(n.strong,{children:"Menu selected"})," returns 0."]}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,t.jsxs)(n.p,{children:["The following form method uses ",(0,t.jsx)(n.strong,{children:"Menu selected"})," to supply the menu and menu item arguments to ",(0,t.jsx)(n.a,{href:"/docs/commands/set-menu-item-mark",children:"SET MENU ITEM MARK"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"\xa0Case of\n\xa0\xa0\xa0\xa0:(FORM Event=On Menu Selected)\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0C_STRING(16;$refMenuIncludingItem)\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0var $ref;$MenuNum;$MenuItemNum : Integer\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0$ref:=Menu selected($refMenuIncludingItem)\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0$MenuNum:=$ref\\65536\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0$MenuItemNum:=$ref%65536\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0SET MENU ITEM MARK($refMenuIncludingItem;$MenuItemNum;Char(18))\n\xa0End case\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," The On Menu Selected form event is not activated if no item is selected, ",(0,t.jsx)(n.em,{children:"$refMenuIncludingItem"})," is always given a value and ",(0,t.jsx)(n.em,{children:"$MenuNum"})," equals 0 if the menu is not one of the menus of the menu bar."]}),"\n",(0,t.jsx)(n.h4,{id:"see-also",children:"See also"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Managing Menus"})})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>i});var t=s(296540);const c={},r=t.createContext(c);function d(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);