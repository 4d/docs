"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["45549"],{389841:function(e,n,s){s.r(n),s.d(n,{metadata:()=>t,contentTitle:()=>d,default:()=>h,assets:()=>l,toc:()=>c,frontMatter:()=>a});var t=JSON.parse('{"id":"commands-legacy/launch-external-process","title":"LAUNCH EXTERNAL PROCESS","description":"LAUNCH EXTERNAL PROCESS ( fileName {; inputStream {; outputStream {; errorStream}}}{; pid} )","source":"@site/versioned_docs/version-20-R7/commands-legacy/launch-external-process.md","sourceDirName":"commands-legacy","slug":"/commands/launch-external-process","permalink":"/docs/commands/launch-external-process","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Flaunch-external-process.md%20(20-R7)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R7","frontMatter":{"id":"launch-external-process","title":"LAUNCH EXTERNAL PROCESS","slug":"/commands/launch-external-process","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"GET MACRO PARAMETER","permalink":"/docs/commands/get-macro-parameter"},"next":{"title":"Load 4D View document","permalink":"/docs/commands/load-4d-view-document"}}'),r=s("785893"),i=s("250065");let a={id:"launch-external-process",title:"LAUNCH EXTERNAL PROCESS",slug:"/commands/launch-external-process",displayed_sidebar:"docs"},d=void 0,l={},c=[{value:"Description",id:"description",level:4},{value:"Examples under macOS",id:"examples-under-macos",level:4},{value:"Examples under Windows",id:"examples-under-windows",level:4},{value:"System variables and sets",id:"system-variables-and-sets",level:4},{value:"See also",id:"see-also",level:4},{value:"Properties",id:"properties",level:4}];function o(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"LAUNCH EXTERNAL PROCESS"})," ( ",(0,r.jsx)(n.em,{children:"fileName"})," {; ",(0,r.jsx)(n.em,{children:"inputStream"})," {; ",(0,r.jsx)(n.em,{children:"outputStream"})," {; ",(0,r.jsx)(n.em,{children:"errorStream"}),"}}}{; ",(0,r.jsx)(n.em,{children:"pid"}),"} )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"fileName"}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsx)(n.td,{children:"\u2192"}),(0,r.jsx)(n.td,{children:"File path and arguments of file to launch"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"inputStream"}),(0,r.jsx)(n.td,{children:"Text, Blob"}),(0,r.jsx)(n.td,{children:"\u2192"}),(0,r.jsx)(n.td,{children:"Input stream (stdin)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"outputStream"}),(0,r.jsx)(n.td,{children:"Text, Blob"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"Output stream (stdout)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"errorStream"}),(0,r.jsx)(n.td,{children:"Text, Blob"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"Error stream (stderr)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"pid"}),(0,r.jsx)(n.td,{children:"Integer"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"Unique identifier for external process"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{title:"Compatibility",type:"info",children:(0,r.jsxs)(n.p,{children:["Starting with 4D v19 R4, we recommend the use of the ",(0,r.jsx)(n.a,{href:"/docs/API/SystemWorkerClass",children:(0,r.jsx)(n.code,{children:"4D.SystemWorker class"})})," to run and control external processes. However, this command is still supported."]})}),"\n",(0,r.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"LAUNCH EXTERNAL PROCESS"})," command launches an external process from 4D under macOS and Windows."]}),"\n",(0,r.jsx)(n.p,{children:"Under macOS, this command provides access to any executable application that can be launched from the Terminal."}),"\n",(0,r.jsxs)(n.p,{children:["Pass the fixed file path of the application to execute, as well as any required arguments (if necessary), in the ",(0,r.jsx)(n.em,{children:"fileName"})," parameter."]}),"\n",(0,r.jsx)(n.p,{children:"Under macOS, you can also pass the application name only; 4D will then use the PATH environment variable to locate the executable."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Warning:"})," This command can only launch executable applications; it cannot execute instructions that are part of the shell (command interpreter). For example, under macOS it is not possible to use this command to execute the ",(0,r.jsx)(n.em,{children:"echo"})," instruction or indirections."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.em,{children:"inputStream"})," parameter (optional) contains the ",(0,r.jsx)(n.em,{children:"stdin"})," of the external process. Once the command has been executed, the ",(0,r.jsx)(n.em,{children:"outputStream"})," and ",(0,r.jsx)(n.em,{children:"errorStream"})," parameters (if passed) return respectively the ",(0,r.jsx)(n.em,{children:"stdout"})," and ",(0,r.jsx)(n.em,{children:"stderr"})," of the external process. You can use BLOB parameters instead of strings if you are working with binary data (such as pictures)."]}),"\n",(0,r.jsxs)(n.p,{children:["4D provides three specific environment variables that can be set using ",(0,r.jsx)(n.a,{href:"/docs/commands/set-environment-variable",children:"SET ENVIRONMENT VARIABLE"})," and are available for use in the context of ",(0,r.jsx)(n.strong,{children:"LAUNCH EXTERNAL PROCESS"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"_4D_OPTION_CURRENT_DIRECTORY"}),": Used to set the current directory of the external process to be launched. In ",(0,r.jsx)(n.em,{children:"varValue"}),", you must pass the pathname of the directory (HFS type syntax on macOS and DOS on Windows)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"_4D_OPTION_HIDE_CONSOLE"}),' (Windows only): Used to hide the window of the DOS console. You must pass "true" in ',(0,r.jsx)(n.em,{children:"varValue"}),' to hide the console or "false" to display it.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"_4D_OPTION_BLOCKING_EXTERNAL_PROCESS"}),': Used to execute the external process in asynchronous mode, in other words, non-blocking for other applications. You must pass "false" in varValue to set an asynchronous execution or "true" to set a synchronous execution (default). For this variable, passing "" in ',(0,r.jsx)(n.em,{children:"varValue"})," does nothing.",(0,r.jsx)(n.br,{}),"\nIf you set the ",(0,r.jsx)(n.em,{children:"_4D_OPTION_BLOCKING_EXTERNAL_PROCESS"}),' environment variable to "false" via the ',(0,r.jsx)(n.a,{href:"/docs/commands/set-environment-variable",children:"SET ENVIRONMENT VARIABLE"})," command (asynchronous execution), the ",(0,r.jsx)(n.em,{children:"outputStream"})," and ",(0,r.jsx)(n.em,{children:"errorStream"})," parameters are not returned."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["These variables are valid in the current process for the next call to ",(0,r.jsx)(n.strong,{children:"LAUNCH EXTERNAL PROCESS"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["When passed, the ",(0,r.jsx)(n.em,{children:"pid"})," parameter (longint) returns the system level ID for the process created to launch the command, regardless of the ",(0,r.jsx)(n.em,{children:"_4D_OPTION_BLOCKING_EXTERNAL_PROCESS"})," option status. With this information, it is easier to interact with a created external process thereafter, e.g. to stop it. If the process launch fails, the ",(0,r.jsx)(n.em,{children:"pid"})," parameter is not returned."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-under-macos",children:"Examples under macOS"}),"\n",(0,r.jsx)(n.p,{children:"The following examples use the macOS Terminal available in the Application/Utilities folder."}),"\n",(0,r.jsxs)(n.p,{children:["1. To change permissions for a file (",(0,r.jsx)(n.em,{children:"chmod"})," is the macOS command used to modify file access):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0LAUNCH EXTERNAL PROCESS("chmod +x /folder/myfile.txt")\n'})}),"\n",(0,r.jsxs)(n.p,{children:["2. To edit a text file (",(0,r.jsx)(n.em,{children:"cat"})," is the macOS command used to edit files). In this example, the full access path of the command is passed:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0var input;output : Text\n\xa0input:=""\n\xa0LAUNCH EXTERNAL PROCESS("/bin/cat /folder/myfile.txt";input;output)\n'})}),"\n",(0,r.jsxs)(n.p,{children:['3. To get the contents of the "Users" folder (',(0,r.jsx)(n.em,{children:"ls -l"})," is the macOS equivalent of the ",(0,r.jsx)(n.em,{children:"dir"})," command in DOS):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0var $In;$Out : Text\n\xa0LAUNCH EXTERNAL PROCESS("/bin/ls -l /Users";$In;$Out)\n'})}),"\n",(0,r.jsxs)(n.p,{children:['4. To launch an independent "graphic" application, it is preferable to use the ',(0,r.jsx)(n.em,{children:"open"})," system command (in this case, the ",(0,r.jsx)(n.strong,{children:"LAUNCH EXTERNAL PROCESS"})," statement has the same effect as double-clicking the application):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0LAUNCH EXTERNAL PROCESS("open /Applications/Calculator.app")\n'})}),"\n",(0,r.jsx)(n.h4,{id:"examples-under-windows",children:"Examples under Windows"}),"\n",(0,r.jsx)(n.p,{children:"5. To open NotePad:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0LAUNCH EXTERNAL PROCESS("C:\\\\WINDOWS\\\\notepad.exe")\n'})}),"\n",(0,r.jsx)(n.p,{children:"6. To open Notepad and open a specific document:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0LAUNCH EXTERNAL PROCESS("C:\\\\WINDOWS\\\\notepad.exe C:\\\\Docs\\\\new folder\\\\res.txt")\n'})}),"\n",(0,r.jsx)(n.p,{children:'7. To launch the Microsoft\xae Word\xae application and open a specific document (note the use of the two ""):'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0$mydoc:="C:\\\\Program Files\\\\Microsoft Office\\\\Office10\\\\WINWORD.EXE \\"C:\\\\Documents and\n\xa0Settings\\\\Mark\\\\Desktop\\\\MyDocs\\\\New folder\\\\test.xml\\""\n\xa0LAUNCH EXTERNAL PROCESS($mydoc;$tIn;$tOut)\n'})}),"\n",(0,r.jsx)(n.p,{children:"8. To execute a Perl script (requires ActivePerl):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0var $input;$output : Text\n\xa0SET ENVIRONMENT VARIABLE("myvariable";"value")\n\xa0LAUNCH EXTERNAL PROCESS("D:\\\\Perl\\\\bin\\\\perl.exe D:\\\\Perl\\\\eg\\\\cgi\\\\env.pl";$input;$output)\n'})}),"\n",(0,r.jsx)(n.p,{children:"9. To launch a command with the current directory and without displaying the console:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0SET ENVIRONMENT VARIABLE("_4D_OPTION_CURRENT_DIRECTORY";"C:\\\\4D_VCS")\n\xa0SET ENVIRONMENT VARIABLE("_4D_OPTION_HIDE_CONSOLE";"true")\n\xa0LAUNCH EXTERNAL PROCESS("mycommand")\n'})}),"\n",(0,r.jsx)(n.p,{children:"10. To allow the user to open an external document on Windows:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0$docname:=Select document("";"*.*";"Choose the file to open";0)\n\xa0If(OK=1)\n\xa0\xa0\xa0\xa0SET ENVIRONMENT VARIABLE("_4D_OPTION_HIDE_CONSOLE";"true")\n\xa0\xa0\xa0\xa0LAUNCH EXTERNAL PROCESS("cmd.exe /C start \\"\\" \\""+$docname+"\\"")\n\xa0End if\n'})}),"\n",(0,r.jsx)(n.p,{children:"11. The following examples request the process list on Windows:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0var $pid : Integer\n\xa0var $stdin;$stdout;$stderr : Text\n\xa0\n\xa0LAUNCH EXTERNAL PROCESS("tasklist";$pid)\xa0//gets PID only\n\xa0LAUNCH EXTERNAL PROCESS("tasklist";$stdin;$stdout;$stderr;$pid)\xa0//gets all information\n'})}),"\n",(0,r.jsx)(n.h4,{id:"system-variables-and-sets",children:"System variables and sets"}),"\n",(0,r.jsx)(n.p,{children:"If the command has been executed correctly, the system variable OK is set to 1. Otherwise (file not found, insufficient memory, etc.), it is set to 0."}),"\n",(0,r.jsx)(n.h4,{id:"see-also",children:"See also"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/commands/open-url",children:"OPEN URL"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.a,{href:"/docs/commands/set-environment-variable",children:"SET ENVIRONMENT VARIABLE"})]}),"\n",(0,r.jsx)(n.h4,{id:"properties",children:"Properties"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Command number"}),(0,r.jsx)(n.td,{children:"811"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Thread safe"}),(0,r.jsx)(n.td,{children:"\u2713"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Modifies variables"}),(0,r.jsx)(n.td,{children:"OK"})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return d},a:function(){return a}});var t=s(667294);let r={},i=t.createContext(r);function a(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);