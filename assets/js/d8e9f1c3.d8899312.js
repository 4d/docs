"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["82827"],{71571:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>i,toc:()=>l,default:()=>a,metadata:()=>s,assets:()=>o,contentTitle:()=>c});var s=JSON.parse('{"id":"commands-legacy/locked-records-info","title":"Locked records info","description":"Locked records info ( aTable ) : Object","source":"@site/versioned_docs/version-20-R10/commands-legacy/locked-records-info.md","sourceDirName":"commands-legacy","slug":"/commands/locked-records-info","permalink":"/docs/commands/locked-records-info","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Flocked-records-info.md%20(20-R10)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R10","frontMatter":{"id":"locked-records-info","title":"Locked records info","slug":"/commands/locked-records-info","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"LOCKED BY","permalink":"/docs/commands/locked-by"},"next":{"title":"READ ONLY","permalink":"/docs/commands/read-only"}}'),t=r(785893),d=r(250065);let i={id:"locked-records-info",title:"Locked records info",slug:"/commands/locked-records-info",displayed_sidebar:"docs"},c=void 0,o={},l=[{value:"Description",id:"description",level:2},{value:"Example",id:"example",level:2},{value:"See also",id:"see-also",level:2},{value:"Properties",id:"properties",level:2}];function h(e){let n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Locked records info"})," ( ",(0,t.jsx)(n.em,{children:"aTable"})," ) : Object"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"aTable"}),(0,t.jsx)(n.td,{children:"Table"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:"Table where you want to get locked records"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Function result"}),(0,t.jsx)(n.td,{children:"Object"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"Description of locked records (if any)"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"Locked records info"})," command returns an ",(0,t.jsx)(n.a,{href:"#",title:"Data structured as a native 4D object",children:"object"})," containing different information about the currently locked record(s) in ",(0,t.jsx)(n.em,{children:"aTable"}),'.The command works only with 4D and 4D Server. It returns an invalid object when called from 4D Remote. However, it can be called in this context if the "Execute on server" option is activated for the calling method. In this case, the object returned will contain information about the server. When called from a component, it always applies to the host database.']}),"\n",(0,t.jsx)(n.p,{children:'The returned object contains a "records" property which is a collection of objects:'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-RAW",children:'{\xa0\xa0\xa0 "records": [\xa0\xa0\xa0 \xa0\xa0\xa0 description object,\xa0\xa0\xa0 \xa0\xa0\xa0 (\u2026)\xa0\xa0\xa0 ]}\n'})}),"\n",(0,t.jsx)(n.p,{children:'Each "description object" collection element identifies a locked record in the specified table. It contains different properties depending on the origin of the lock (4D process or REST API).'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If the record was locked by a 4D process:"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Property"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Type"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Description"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"contextID"}),(0,t.jsx)(n.td,{children:"UUID (String)"}),(0,t.jsx)(n.td,{children:"UUID of the database context responsible for the lock"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"contextAttributes"}),(0,t.jsx)(n.td,{children:"Object"}),(0,t.jsxs)(n.td,{children:["Object containing information similar to the ",(0,t.jsx)(n.a,{href:"/docs/commands/locked-by",children:"LOCKED BY"})," command but applied to the record, the difference being that ",(0,t.jsx)(n.strong,{children:"Locked records info"})," returns the user name defined in the system and not that of the 4D user, as well as additional information (see below)."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"recordNumber"}),(0,t.jsx)(n.td,{children:"Integer"}),(0,t.jsx)(n.td,{children:"Record number of the locked record"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.em,{children:"contextAttributes"})," object is made up of the following properties:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Property"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Type"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Description"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"task_id"}),(0,t.jsx)(n.td,{children:"Number"}),(0,t.jsx)(n.td,{children:"Process reference number"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"user_name"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"User name defined by operating system"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"user4d_alias"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsxs)(n.td,{children:["User alias defined with ",(0,t.jsx)(n.a,{href:"/docs/commands/set-user-alias",children:"SET USER ALIAS"}),", otherwise user name in the 4D database directory"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"user4d_id"}),(0,t.jsx)(n.td,{children:"Number"}),(0,t.jsx)(n.td,{children:"4D user number(*)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"host_name"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"Name of host machine"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"task_name"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"Process name"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"client_version"}),(0,t.jsx)(n.td,{children:"Number"}),(0,t.jsx)(n.td,{children:"Version of client application"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:"Only when command is executed on 4D Server and if record locking comes from a remote 4D:"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"is_remote_context"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsxs)(n.td,{children:["Indicates whether a remote 4D is the origin of the locking (always ",(0,t.jsx)(n.em,{children:"true"})," since otherwise it is not present)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"client_uid"}),(0,t.jsx)(n.td,{children:"UUID (String)"}),(0,t.jsx)(n.td,{children:"UUID of 4D remote at the origin of the locking"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["(*) ",(0,t.jsx)(n.em,{children:"Only returned in binary databases."})," You can get the 4D user name from the value of ",(0,t.jsx)(n.em,{children:"user4d_id"})," by using the following code:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"\xa0GET USER LIST($arrNames;$arrIDs)\n\xa0$User4DName:=Find in array($arrIDs;user4d_id)\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["If the record was locked by the ",(0,t.jsx)(n.em,{children:"$lock REST request"})," (at session level):"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Property"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Type"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Description"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"host"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:'URL with which the entity has been locked, e.g. "127.0.0.1:8044"'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"IPAddr"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:'IP address used in the URL with which the entity has been locked, e.g. "127.0.0.1"'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"recordNumber"}),(0,t.jsx)(n.td,{children:"Integer"}),(0,t.jsx)(n.td,{children:"Record number of the locked record"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"userAgent"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:'User agent of the locker, e.g. "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36"'})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.p,{children:"You execute the following code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"\xa0$vOlocked :=Locked records info([Table])\n"})}),"\n",(0,t.jsx)(n.p,{children:"If two records were locked in the [Table] table, the following object is returned in $vOlocked:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-RAW",children:'{\xa0\xa0\xa0 "records": [\xa0\xa0\xa0 \xa0\xa0\xa0 {\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextID": "A9BB84C0E57349E089FA44E04C0F2F25",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextAttributes": {\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_id": 8,\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user_name": "roland",\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user4d_id": 1,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "host_name": "iMac de roland",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_name": "P_RandomLock",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "client_version": -1342106592\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "recordNumber": 1\xa0\xa0\xa0 \xa0\xa0\xa0 },\xa0\xa0\xa0 \xa0\xa0\xa0 {\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextID": "8916338D1B8A4D86B857D92F593CCAC3",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextAttributes": {\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_id": 9,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user_name": "roland",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user4d_id": 1,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "host_name": "iMac de roland",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_name": "P_RandomLock",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "client_version": -1342106592\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 "recordNumber": 2\xa0\xa0\xa0 \xa0\xa0\xa0 }\xa0\xa0\xa0 ]}\n'})}),"\n",(0,t.jsx)(n.p,{children:"If the code is executed on a 4D Server and the locking is caused by a remote client machine, the following object is returned in $vOlocked:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\xa0\xa0\xa0 "records": [\xa0\xa0\xa0 \xa0\xa0\xa0 {\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextID": "B0EC087DC2FA704496C0EA15DC011D1C",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextAttributes": {\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_id": 2, \xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user_name": "achim", \xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user4d_id": 1,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "host_name": "achim-pcwin",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_name": "P_RandomLock", \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "is_remote_context": true,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "client_uid": "0696E66F6CD731468E6XXX581A87554A",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "client_version": -268364752\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "recordNumber": 1\xa0\xa0\xa0 \xa0\xa0\xa0 }\xa0\xa0\xa0 ]}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"/docs/commands/locked",children:"Locked"})}),"\n",(0,t.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Command number"}),(0,t.jsx)(n.td,{children:"1316"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Thread safe"}),(0,t.jsx)(n.td,{children:"\u2713"})]})]})]})]})}function a(e={}){let{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},250065:function(e,n,r){r.d(n,{Z:()=>c,a:()=>i});var s=r(667294);let t={},d=s.createContext(t);function i(e){let n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);