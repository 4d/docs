"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[68623],{40875:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});var r=l(474848),s=l(28453);const t={id:"wa-set-url-filters",title:"WA SET URL FILTERS",slug:"/commands/wa-set-url-filters",displayed_sidebar:"docs"},a=void 0,i={id:"commands-legacy/wa-set-url-filters",title:"WA SET URL FILTERS",description:"WA SET URL FILTERS ( { ;} object ; filtersArr ; allowDenyArr* )",source:"@site/versioned_docs/version-20-R7/commands-legacy/wa-set-url-filters.md",sourceDirName:"commands-legacy",slug:"/commands/wa-set-url-filters",permalink:"/docs/commands/wa-set-url-filters",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fwa-set-url-filters.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"wa-set-url-filters",title:"WA SET URL FILTERS",slug:"/commands/wa-set-url-filters",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"WA SET PREFERENCE",permalink:"/docs/commands/wa-set-preference"},next:{title:"WA STOP LOADING URL",permalink:"/docs/commands/wa-stop-loading-url"}},d={},o=[{value:"Description",id:"description",level:4},{value:"Example 1",id:"example-1",level:4},{value:"Example 2",id:"example-2",level:4},{value:"Example 3",id:"example-3",level:4},{value:"Example 4",id:"example-4",level:4},{value:"Example 5",id:"example-5",level:4},{value:"Example 6",id:"example-6",level:4},{value:"See also",id:"see-also",level:4}];function c(e){const n={a:"a",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"WA SET URL FILTERS"})," ( {* ;} ",(0,r.jsx)(n.em,{children:"object"})," ; ",(0,r.jsx)(n.em,{children:"filtersArr"})," ; ",(0,r.jsx)(n.em,{children:"allowDenyArr"})," )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"*"}),(0,r.jsx)(n.td,{children:"Operator"}),(0,r.jsx)(n.td,{children:"\u2192"}),(0,r.jsx)(n.td,{children:"If specified, object is an object name (string) If omitted, object is a variable"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"\u2192"}),(0,r.jsx)(n.td,{children:"Object name (if * is specified) or Variable (if * is omitted)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"filtersArr"}),(0,r.jsx)(n.td,{children:"Text array"}),(0,r.jsx)(n.td,{children:"\u2192"}),(0,r.jsx)(n.td,{children:"Filters array"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"allowDenyArr"}),(0,r.jsx)(n.td,{children:"Boolean array"}),(0,r.jsx)(n.td,{children:"\u2192"}),(0,r.jsx)(n.td,{children:"Allow-deny array"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"This command is not thread-safe, it cannot be used in preemptive code."})}),"\n",(0,r.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["The WA SET URL FILTERS command sets up one or more filters for the Web area designated by the ",(0,r.jsx)(n.em,{children:"*"})," and ",(0,r.jsx)(n.em,{children:"object"})," parameters."]}),"\n",(0,r.jsxs)(n.p,{children:["Before loading any page requested, 4D consults the list of filters in order to check whether or not the target URL is allowed. The evaluation of the URL is based on the contents of the ",(0,r.jsx)(n.em,{children:"filtersArr"})," and ",(0,r.jsx)(n.em,{children:"allowDenyArr"})," arrays."]}),"\n",(0,r.jsx)(n.p,{children:"If the requested URL is not allowed, it is not loaded and the On URL Filtering form event is generated."}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.em,{children:"filtersArr"})," and ",(0,r.jsx)(n.em,{children:"allowDenyArr"})," arrays must be synchronized."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Each element of the ",(0,r.jsx)(n.em,{children:"filtersArr"})," array must contain a URL to be filtered. You can use the ",(0,r.jsx)(n.em,{children:"*"})," as a wildcard to replace one or more characters."]}),"\n",(0,r.jsxs)(n.li,{children:["Each corresponding element in the ",(0,r.jsx)(n.em,{children:"allowDenyArr"})," array must contain a Boolean indicating whether the URL must be allowed (",(0,r.jsx)(n.strong,{children:"True"}),") or denied (",(0,r.jsx)(n.strong,{children:"False"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If there is a contradiction at the configuration level (the same URL is both allowed and denied), the last setting is the one taken into account."}),"\n",(0,r.jsxs)(n.p,{children:['To disable URL filtering, call the command and pass empty arrays or pass, respectively, the values "',(0,r.jsx)(n.em,{children:"*"}),'" and ',(0,r.jsx)(n.strong,{children:"True"})," in the last elements of the ",(0,r.jsx)(n.em,{children:"filtersArr"})," and ",(0,r.jsx)(n.em,{children:"allowDenyArr"})," arrays."]}),"\n",(0,r.jsxs)(n.p,{children:["Once the command has been executed, the filters become a property of the Web area. If the ",(0,r.jsx)(n.em,{children:"filtersArr"})," and ",(0,r.jsx)(n.em,{children:"allowDenyArr"})," arrays are deleted or reinitialized, the filters remain active as long as the command has not been executed again. To find out the active filters for an area, you must use the ",(0,r.jsx)(n.a,{href:"/docs/commands/wa-get-url-filters",children:"WA GET URL FILTERS"})," command."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important:"})," The URL filtering performed by this command applies to any request to change the primary URL of the page, whether from the user, javascript code or 4D code, except for the ",(0,r.jsx)(n.a,{href:"/docs/commands/wa-open-url",children:"WA OPEN URL"}),' command and URLs starting with "javascript:".']}),"\n",(0,r.jsx)(n.h4,{id:"example-1",children:"Example 1"}),"\n",(0,r.jsx)(n.p,{children:"You want to deny access for all the .org, .net and .fr Web sites:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY TEXT($filters;0)\n\xa0ARRAY BOOLEAN($AllowDeny;0)\n\xa0\n\xa0APPEND TO ARRAY($filters;"*.org")\n\xa0APPEND TO ARRAY($AllowDeny;False)\n\xa0APPEND TO ARRAY($filters;"*.net")\n\xa0APPEND TO ARRAY($AllowDeny;False)\n\xa0APPEND TO ARRAY($filters;"*.fr")\n\xa0APPEND TO ARRAY($AllowDeny;False)\n\xa0WA SET URL FILTERS(MyWArea;$filters;$AllowDeny)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"example-2",children:"Example 2"}),"\n",(0,r.jsx)(n.p,{children:"You want to deny access for all Web sites except Russian ones (.ru):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY TEXT($filters;0)\n\xa0ARRAY BOOLEAN($AllowDeny;0)\n\xa0\n\xa0APPEND TO ARRAY($filters;"*")\xa0//Select all\n\xa0APPEND TO ARRAY($AllowDeny;False)\xa0//Deny all\n\xa0APPEND TO ARRAY($filters;"www.*.ru")\xa0//Select *.ru\n\xa0APPEND TO ARRAY($AllowDeny;True)\xa0//Allow\n\xa0WA SET URL FILTERS(MyWArea;$filters;$AllowDeny)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"example-3",children:"Example 3"}),"\n",(0,r.jsx)(n.p,{children:"You want to allow access only to 4D Web sites (.com, .fr, .es, etc.):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY TEXT($filters;0)\n\xa0ARRAY BOOLEAN($AllowDeny;0)\n\xa0\n\xa0APPEND TO ARRAY($filters;"*")\xa0//Select all\n\xa0APPEND TO ARRAY($AllowDeny;False)\xa0//Deny all\n\xa0APPEND TO ARRAY($filters;"www.4D.*")\xa0//Select 4d.fr, 4d.com...\n\xa0APPEND TO ARRAY($AllowDeny;True)\xa0//Allow\n\xa0WA SET URL FILTERS(MyWArea;$filters;$AllowDeny)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"example-4",children:"Example 4"}),"\n",(0,r.jsx)(n.p,{children:"You want to allow local access to the documentation only (found in the folder C://doc):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY TEXT($filters;0)\n\xa0ARRAY BOOLEAN($AllowDeny;0)\n\xa0\n\xa0APPEND TO ARRAY($filters;"*")\xa0//Select all\n\xa0APPEND TO ARRAY($AllowDeny;False)\xa0//Deny all\n\xa0APPEND TO ARRAY($filters;"file://C:/doc/*")\n\xa0\xa0//Select the path file:// allowed\n\xa0APPEND TO ARRAY($AllowDeny;True)\xa0//Allow\n\xa0WA SET URL FILTERS(MyWArea;$filters;$AllowDeny)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"example-5",children:"Example 5"}),"\n",(0,r.jsx)(n.p,{children:"You want to allow access for all sites except one, for example the Elcaro site:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY TEXT($filters;0)\n\xa0ARRAY BOOLEAN($AllowDeny;0)\n\xa0\n\xa0APPEND TO ARRAY($filters;"*")\n\xa0APPEND TO ARRAY($AllowDeny;True)\xa0//Allow all\n\xa0APPEND TO ARRAY($filters;"*elcaro*")\xa0//Deny all that contain elcaro\n\xa0APPEND TO ARRAY($AllowDeny;False)\n\xa0WA SET URL FILTERS(MyWArea;$filters;$AllowDeny)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"example-6",children:"Example 6"}),"\n",(0,r.jsx)(n.p,{children:"You want to deny access to specific IP addresses:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY TEXT($filters;0)\n\xa0ARRAY BOOLEAN($AllowDeny;0)\n\xa0\n\xa0APPEND TO ARRAY($filters;"*")\xa0//Select all\n\xa0APPEND TO ARRAY($AllowDeny;True)\xa0//Allow all\n\xa0APPEND TO ARRAY($filters;86.83.*") \xa0//Select IP addresses beginning with 86.83.\n\xa0APPEND TO ARRAY($AllowDeny;False)\xa0//Deny\n\xa0APPEND TO ARRAY($filters;86.1*") \xa0//Select IP addresses beginning with 86.1 (86.10, 86.135 etc.)\n\xa0APPEND TO ARRAY($AllowDeny;False)\xa0//Deny\n\xa0WA SET URL FILTERS(MyWArea;$filters;$AllowDeny)\n\xa0\xa0//(Note that the IP address of a domain may vary).\n'})}),"\n",(0,r.jsx)(n.h4,{id:"see-also",children:"See also"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/commands/wa-get-url-filters",children:"WA GET URL FILTERS"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.a,{href:"/docs/commands/wa-set-external-links-filters",children:"WA SET EXTERNAL LINKS FILTERS"})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,l)=>{l.d(n,{R:()=>a,x:()=>i});var r=l(296540);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);