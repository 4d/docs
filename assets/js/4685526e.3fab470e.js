"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["1069"],{676462:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>a,metadata:()=>s,assets:()=>o,toc:()=>c,contentTitle:()=>i});var s=JSON.parse('{"id":"commands-legacy/discover-data-key","title":"Discover data key","description":"Discover data key  : Boolean","source":"@site/versioned_docs/version-20-R7/commands-legacy/discover-data-key.md","sourceDirName":"commands-legacy","slug":"/commands/discover-data-key","permalink":"/docs/commands/discover-data-key","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fdiscover-data-key.md%20(20-R7)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R7","frontMatter":{"id":"discover-data-key","title":"Discover data key","slug":"/commands/discover-data-key","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"Decrypt data BLOB","permalink":"/docs/commands/decrypt-data-blob"},"next":{"title":"Encrypt data BLOB","permalink":"/docs/commands/encrypt-data-blob"}}'),d=t("785893"),r=t("250065");let a={id:"discover-data-key",title:"Discover data key",slug:"/commands/discover-data-key",displayed_sidebar:"docs"},i=void 0,o={},c=[{value:"Description",id:"description",level:4},{value:"Example",id:"example",level:4},{value:"See also",id:"see-also",level:4},{value:"Properties",id:"properties",level:4}];function l(e){let n={a:"a",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Discover data key"}),"  : Boolean"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Parameter"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Function result"}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{children:"\u2190"}),(0,d.jsx)(n.td,{children:"True if a valid encryption key for the currently open data file has been found, else False"})]})})]}),"\n",(0,d.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.strong,{children:"Discover data key"})," command searches for a valid encryption key corresponding to the currently opened data file at the root level of all connected devices and returns ",(0,d.jsx)(n.strong,{children:"True"})," if successful."]}),"\n",(0,d.jsx)(n.p,{children:"Connected devices to be searched include USB keys or external disks. A valid encryption key is necessary to allow read/write access to an encrypted database. This command can be called, for example, at database startup, after the user has been invited to connect a USB key."}),"\n",(0,d.jsxs)(n.p,{children:['Key files (".4DKeyChain" extension files) must be stored at the top level of connected devices (the search will not go through the folder hierarchy). Encryption keys must be saved in JSON format (see ',(0,d.jsx)(n.em,{children:"Storing data encryption keys in files"})," in the ",(0,d.jsx)(n.em,{children:"4D Design Reference"}),")."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Returned value"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"True"})," if a valid encryption key is found for the current opened data file, in which case:\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"the encryption key is applied if necessary so that encrypted data is usable (access to read / write operations)."}),"\n",(0,d.jsx)(n.li,{children:"the encryption key is added to the 4D keychain."}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"False"})," if no valid encryption key is found for the current opened data file, thus access to the data is not possible."]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:'\xa0var $status : Object\n\xa0var $keyFound : Boolean\n\xa0\n\xa0$status:=ds.encryptionStatus()\n\xa0\n\xa0If(($status.isEncrypted)&(Not($status.keyProvided)))\xa0//no key is available\n\xa0\xa0// thus access to encrypted data is not allowed\n\xa0\xa0\xa0\xa0$keyFound:=Discover data key\n\xa0\xa0\xa0\xa0If($keyFound=True)\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0ALERT("A valid encryption key has been found.")\n\xa0\xa0\xa0\xa0End if\n\xa0End if\n'})}),"\n",(0,d.jsx)(n.h4,{id:"see-also",children:"See also"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"https://blog.4d.com/new-4d-commands-to-work-with-encrypted-data/",children:"4D Blog - New 4D commands to work with encrypted data"}),(0,d.jsx)(n.br,{}),"\n",(0,d.jsx)(n.a,{href:"/docs/commands/new-data-key",children:"New data key"})]}),"\n",(0,d.jsx)(n.h4,{id:"properties",children:"Properties"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Command number"}),(0,d.jsx)(n.td,{children:"1639"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Thread safe"}),(0,d.jsx)(n.td,{children:"\u2713"})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return i},a:function(){return a}});var s=t(667294);let d={},r=s.createContext(d);function a(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);