"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["75161"],{506759:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>i,toc:()=>c,default:()=>h,metadata:()=>t,assets:()=>l,contentTitle:()=>a});var t=JSON.parse('{"id":"aikit/Classes/openaichatcompletionsparameters","title":"OpenAIChatCompletionParameters","description":"The OpenAIChatCompletionParameters class is designed to handle the parameters required for chat completions using the OpenAI API.","source":"@site/versioned_docs/version-21/aikit/Classes/OpenAIChatCompletionsParameters.md","sourceDirName":"aikit/Classes","slug":"/aikit/Classes/openaichatcompletionsparameters","permalink":"/docs/aikit/Classes/openaichatcompletionsparameters","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20aikit%2FClasses%2FOpenAIChatCompletionsParameters.md%20(21)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"21","frontMatter":{"id":"openaichatcompletionsparameters","title":"OpenAIChatCompletionParameters"},"sidebar":"docs","previous":{"title":"OpenAIChatCompletionsMessagesParameters","permalink":"/docs/aikit/Classes/openaichatcompletionsmessagesparameters"},"next":{"title":"OpenAIChatCompletionsResult","permalink":"/docs/aikit/Classes/openaichatcompletionsresult"}}'),r=s(474848),o=s(884429);let i={id:"openaichatcompletionsparameters",title:"OpenAIChatCompletionParameters"},a="OpenAIChatCompletionParameters",l={},c=[{value:"Inherits",id:"inherits",level:2},{value:"Properties",id:"properties",level:2},{value:"Asynchronous Callback Properties",id:"asynchronous-callback-properties",level:3},{value:"Response Format",id:"response-format",level:2},{value:"Supported Response Format Types",id:"supported-response-format-types",level:3},{value:"1. Text Format (Default)",id:"1-text-format-default",level:4},{value:"2. JSON Object Format",id:"2-json-object-format",level:4},{value:"3. JSON Schema Format (Structured Outputs)",id:"3-json-schema-format-structured-outputs",level:4},{value:"JSON Schema Properties",id:"json-schema-properties",level:3},{value:"Important Notes",id:"important-notes",level:3},{value:"See also",id:"see-also",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"openaichatcompletionparameters",children:"OpenAIChatCompletionParameters"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"OpenAIChatCompletionParameters"})," class is designed to handle the parameters required for chat completions using the OpenAI API."]}),"\n",(0,r.jsx)(n.h2,{id:"inherits",children:"Inherits"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/aikit/Classes/openaiparameters",children:"OpenAIParameters"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default Value"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"model"})}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"gpt-4o-mini"'})}),(0,r.jsx)(n.td,{children:"ID of the model to use."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"stream"})}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"False"})}),(0,r.jsx)(n.td,{children:"Whether to stream back partial progress. If set, tokens will be sent as data-only. Callback formula required."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"stream_options"})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Null"})}),(0,r.jsxs)(n.td,{children:["Property for stream=True. For example: ",(0,r.jsx)(n.code,{children:"{include_usage: True}"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"max_completion_tokens"})}),(0,r.jsx)(n.td,{children:"Integer"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0"})}),(0,r.jsx)(n.td,{children:"The maximum number of tokens that can be generated in the completion."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"n"})}),(0,r.jsx)(n.td,{children:"Integer"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1"})}),(0,r.jsx)(n.td,{children:"How many completions to generate for each prompt."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"temperature"})}),(0,r.jsx)(n.td,{children:"Real"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-1"})}),(0,r.jsx)(n.td,{children:"What sampling temperature to use, between 0 and 2. Higher values make the output more random, while lower values make it more focused and deterministic."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"store"})}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"False"})}),(0,r.jsx)(n.td,{children:"Whether or not to store the output of this chat completion request."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reasoning_effort"})}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Null"})}),(0,r.jsxs)(n.td,{children:["Constrains effort on reasoning for reasoning models. Currently supported values are ",(0,r.jsx)(n.code,{children:'"low"'}),", ",(0,r.jsx)(n.code,{children:'"medium"'}),", and ",(0,r.jsx)(n.code,{children:'"high"'}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"response_format"})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Null"})}),(0,r.jsx)(n.td,{children:"An object specifying the format that the model must output. Compatible with structured outputs."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"tools"})}),(0,r.jsx)(n.td,{children:"Collection"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Null"})}),(0,r.jsxs)(n.td,{children:["A list of tools (",(0,r.jsx)(n.a,{href:"/docs/aikit/Classes/openaitool",children:"OpenAITool"}),') the model may call. Only "function" type is supported.']})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"tool_choice"})}),(0,r.jsx)(n.td,{children:"Variant"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Null"})}),(0,r.jsxs)(n.td,{children:["Controls which (if any) tool is called by the model. Can be ",(0,r.jsx)(n.code,{children:'"none"'}),", ",(0,r.jsx)(n.code,{children:'"auto"'}),", ",(0,r.jsx)(n.code,{children:'"required"'}),", or specify a particular tool."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"prediction"})}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Null"})}),(0,r.jsx)(n.td,{children:"Static predicted output content, such as the content of a text file that is being regenerated."})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"asynchronous-callback-properties",children:"Asynchronous Callback Properties"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"onData"})," (or ",(0,r.jsx)(n.code,{children:"formula"}),")"]}),(0,r.jsx)(n.td,{children:"4D.Function"}),(0,r.jsx)(n.td,{children:"A function to be called asynchronously when receiving data chunk. Ensure that the current process does not terminate."})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"onData"})," will receive as argument an ",(0,r.jsx)(n.a,{href:"/docs/aikit/Classes/openaichatcompletionsstreamresult",children:"OpenAIChatCompletionsStreamResult"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/docs/aikit/Classes/openaiparameters",children:"OpenAIParameters"})," for other callback properties."]}),"\n",(0,r.jsx)(n.h2,{id:"response-format",children:"Response Format"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"response_format"})," parameter allows you to specify the format that the model must output. This is particularly useful when you need structured data or want to ensure the response follows a specific format."]}),"\n",(0,r.jsx)(n.h3,{id:"supported-response-format-types",children:"Supported Response Format Types"}),"\n",(0,r.jsx)(n.h4,{id:"1-text-format-default",children:"1. Text Format (Default)"}),"\n",(0,r.jsx)(n.p,{children:"The default response format returns plain text:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'var $params := cs.OpenAIChatCompletionsParameters.new({ \\\n    model: "gpt-4o-mini"; \\\n    response_format: {type: "text"} \\\n})\n'})}),"\n",(0,r.jsx)(n.h4,{id:"2-json-object-format",children:"2. JSON Object Format"}),"\n",(0,r.jsx)(n.p,{children:"Forces the model to respond with valid JSON:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'var $params := cs.OpenAIChatCompletionsParameters.new({ \\\n    model: "gpt-4o-mini"; \\\n    response_format: {type: "json_object"} \\\n})\n\nvar $messages := [ \\\n    cs.OpenAIMessage.new({ \\\n        role: "system"; \\\n        content: "You are a helpful assistant that always responds in JSON format." \\\n    }) \\\n]\n$messages.push({ \\\n    role: "user"; \\\n    content: "Give me information about the number 42 in JSON format with keys \'significance\' and \'facts\'." \\\n})\n\n$result := $client.chat.completions.create($messages; $params)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"3-json-schema-format-structured-outputs",children:"3. JSON Schema Format (Structured Outputs)"}),"\n",(0,r.jsx)(n.p,{children:"For precise control over the JSON structure, you can define a schema:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'var $jsonSchema := { \\\n    type: "object"; \\\n    properties: { \\\n        name: {type: "string"}; \\\n        age: {type: "integer"}; \\\n        occupation: {type: "string"}; \\\n        city: {type: "string"} \\\n    }; \\\n    required: ["name"; "age"; "occupation"; "city"]; \\\n    additionalProperties: False \\\n}\n\nvar $params := cs.OpenAIChatCompletionsParameters.new({ \\\n    model: "gpt-4o-mini"; \\\n    response_format: { \\\n        type: "json_schema"; \\\n        json_schema: { \\\n            name: "person_info"; \\\n            description: "Information about a person"; \\\n            schema: $jsonSchema; \\\n            strict: True \\\n        } \\\n    } \\\n})\n\nvar $messages := [{role: "system"; content: "You are a helpful assistant."}]\n$messages.push({ role: "user"; content: "Generate information about a person named John Smith."})\n\n$result := $client.chat.completions.create($messages; $params)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"json-schema-properties",children:"JSON Schema Properties"}),"\n",(0,r.jsxs)(n.p,{children:["When using ",(0,r.jsx)(n.code,{children:"json_schema"})," type, you can specify:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"name"})}),": A name for the schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"description"})}),": A description of what the schema represents"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"schema"})}),": The JSON schema definition"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"strict"})}),": Whether to enforce strict adherence to the schema"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"important-notes",children:"Important Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Not all models support structured outputs (json_object or json_schema), so check model capabilities before using them."}),"\n",(0,r.jsxs)(n.li,{children:["When using ",(0,r.jsx)(n.code,{children:"json_object"})," format, you should include instructions in your system message to respond in JSON format"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"json_schema"})," format provides the most control and ensures the response exactly matches your specified structure"]}),"\n",(0,r.jsx)(n.li,{children:"Invalid JSON responses will result in an error when using JSON formats"}),"\n",(0,r.jsx)(n.li,{children:"JSON schema validation ensures type safety and required field presence"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/aikit/Classes/openaichatcompletionsapi",children:"OpenAIChatCompletionsAPI"})}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},884429:function(e,n,s){s.d(n,{R:()=>i,x:()=>a});var t=s(296540);let r={},o=t.createContext(r);function i(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);