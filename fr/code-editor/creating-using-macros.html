<!DOCTYPE html><html lang="fr"><head><meta name="docsearch:version" content="19 R6 BETA"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Créer et utiliser des macros · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Vous pouvez utiliser des macro-commandes dans vos méthodes. Les macro-commandes permettent de gagner beaucoup de temps lors de la saisie de code."/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Créer et utiliser des macros · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/index.html"/><meta property="og:description" content="Vous pouvez utiliser des macro-commandes dans vos méthodes. Les macro-commandes permettent de gagner beaucoup de temps lors de la saisie de code."/><meta property="og:image" content="https://4d.github.io/docs/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/img/logohome.png"/><link rel="shortcut icon" href="/docs/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/alpha/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-blocks-buttons.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/fr"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs" target="_self">v19 R6 BETA</a></li><li class=""><a href="https://developer.4d.com/docs/Rx" target="_self">v19 R5</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/code-editor/creating-using-macros.html">English</a></li><li><a href="/docs/ja/code-editor/creating-using-macros.html">日本語</a></li><li><a href="/docs/de/code-editor/creating-using-macros.html">Deutsch</a></li><li><a href="/docs/es/code-editor/creating-using-macros.html">Español</a></li><li><a href="/docs/pt/code-editor/creating-using-macros.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Gestion du code</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Gestion de projet<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/Project/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Project/architecture.html">Architecture of a project</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Project/documentation.html">Documenter un projet</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Project/compiler.html">Compilation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts du langage 4D<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/about.html">À propos du Langage 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/quick-tour.html">Tour d&#x27;horizon</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/operators.html">Opérateurs</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/data-types.html">Types de données</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/boolean.html">Booléen</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/date.html">Date</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/null-undefined.html">Null et Indefinie</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/number.html">Numérique (Réel, Entier, Entier long)</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/object.html">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/picture.html">Image</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/pointer.html">Pointeur</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/string.html">Chaîne</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/time.html">Heure</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/variables.html">Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/arrays.html">Tableaux</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/methods.html">Méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/parameters.html">Paramètres</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/shared.html">Objets et collections partagés</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/classes.html">Classes</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/control-flow.html">Conditions et boucles</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/branching.html">Structures conditionnelles</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/looping.html">Structures répétitives (ou &quot;boucles&quot;)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/error-handling.html">Gestion des erreurs</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/interpreted-compiled.html">Modes interprété et compilé</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/components.html">Composants</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Concepts/identifiers.html">Identifiants</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/ORDA/overview.html">Que signifie ORDA ?</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ORDA/dsmapping.html">Objets Data Model</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ORDA/ordaClasses.html">Classes du modèle de données</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ORDA/entities.html">Travailler avec des données</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ORDA/datastores.html">Utiliser un datastore distant</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ORDA/glossary.html">Glossaire</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Classes API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/API/overview.html">Aperçu - API des classes</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/BlobClass.html">Blob</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/ClassClass.html">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/CollectionClass.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/CryptoKeyClass.html">CryptoKey</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/DataClassClass.html">DataClass</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/DataClassAttributeClass.html">DataClassAttribute</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/DataStoreClass.html">DataStore</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/EmailObjectClass.html">Email</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/EntityClass.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/EntitySelectionClass.html">EntitySelection</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/FileClass.html">File</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/FolderClass.html">Folder</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/FunctionClass.html">Formula</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/HTTPRequestClass.html">HTTPRequest</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/IMAPTransporterClass.html">IMAPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/MailAttachmentClass.html">MailAttachment</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/POP3TransporterClass.html">POP3Transporter</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/SessionClass.html">Session</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/SignalClass.html">Signal</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/SMTPTransporterClass.html">SMTPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/SystemWorkerClass.html">SystemWorker</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/WebServerClass.html">WebServer</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/ZipArchiveClass.html">ZIPArchive</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/ZipFileClass.html">ZIPFile</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/API/ZipFolderClass.html">ZIPFolder</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Gestion du code<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/code-editor/overview.html">À propos du code 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/code-editor/write-class-method.html">Éditeur de code</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/code-editor/find-replace.html">Chercher et remplacer</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/fr/code-editor/creating-using-macros.html">Créer et utiliser des macros</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Tags/tags.html">Balises de transformation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Débogage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/Debugging/basics.html">Principes de base</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Debugging/debugger.html">Débogueur</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Debugging/breakpoints.html">Points d&#x27;arrêt et points d&#x27;arrêt sur commande</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Debugging/debugging-remote.html">Débogage depuis des machines distantes</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Debugging/debugLogFiles.html">Description des fichiers d&#x27;historique</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Settings<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/settings/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/general.html">Page Général</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/interface.html">Page Interface</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/compiler.html">Page Compilateur</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/database.html">Page Base de données</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/backup.html">Page Sauvegarde</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/client-server.html">Page Client/Serveur</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/web.html">Page Web</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/sql.html">Page SQL</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/php.html">Page PHP</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/security.html">Page sécurité</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/settings/compatibility.html">Page de compatibilité</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Préférences<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/Preferences/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Preferences/general.html">Page Général</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Preferences/structure.html">Page Structure</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Preferences/forms.html">Page Formulaires</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Preferences/methods.html">Page Méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Preferences/shortcuts.html">Page Raccourcis</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/master/docs/code-editor/creating-using-macros.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Créer et utiliser des macros</h1></header><article><div><span><p>Vous pouvez utiliser des macro-commandes dans vos méthodes. Les macro-commandes permettent de gagner beaucoup de temps lors de la saisie de code.</p>
<h2><a class="anchor" aria-hidden="true" id="quest-ce-quune-macro-"></a><a href="#quest-ce-quune-macro-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Qu’est-ce qu’une macro ?</h2>
<p>Une macro-commande est une partie de code 4D accessible en permanence et pouvant être insérée à tout endroit de vos méthodes, quelle que soit la base ouverte. Les macro-commandes peuvent contenir tout type de texte, des commandes et des constantes 4D, ainsi que des balises spéciales, remplacées au moment de l’insertion de la macro par des valeurs issues du contexte de la méthode. Par exemple, une macro-commande peut contenir la balise <code>&lt;method_name/&gt;;</code> au moment de son insertion, cette balise sera remplacée par le nom de la méthode projet courante.</p>
<p>Les macro-commandes sont stockées dans un ou plusieurs fichier(s) au format XML (texte). Elles peuvent être affichées dans une liste de l’éditeur de code; elle peuvent également être appelées à l’aide du menu contextuel de l’éditeur ou à l’aide de la fonction de saisie prédictive.</p>
<p>Les macro-commandes de 4D sont écrites au format XML. Vous pouvez utiliser “tel quel” le fichier de macro-commandes par défaut de 4D ou le modifier.</p>
<h2><a class="anchor" aria-hidden="true" id="emplacement-des-macros"></a><a href="#emplacement-des-macros" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Emplacement des macros</h2>
<p>4D charge les macros à partir d’un dossier nommé <strong>Macros v2</strong>. Les macros doivent être présentes sous forme d’un ou plusieurs fichiers XML placés dans ce dossier.</p>
<p>Le dossier “Macros v2” peut être situé :</p>
<ul>
<li>Dans le dossier 4D actif de la machine. Les macros sont alors partagées pour toutes les bases. <strong>Note :</strong> L’emplacement du dossier 4D actif varie en fonction du système d’exploitation. Pour plus d’informations, reportez-vous à la description de la commande <a href="https://doc.4d.com/4Dv19R4/4D/19-R4/Get-4D-folder.301-5739515.en.html">Get 4D folder</a> dans le <em>manuel Langage de 4D</em>.</li>
<li>A côté du fichier de structure de la base. Les macros ne sont chargées que pour cette structure.</li>
<li>Pour les composants : dans le dossier <strong>Components</strong> de la base. Les macros ne sont alors chargées que si le composant est installé.</li>
</ul>
<p>Ces trois emplacements peuvent être utilisés simultanément : il est possible d’installer un dossier “Macros v2” à chaque emplacement. Les macros seront chargées dans l’ordre suivant : dossier 4D, fichier de structure, composant 1... composant N.</p>
<h2><a class="anchor" aria-hidden="true" id="macros-par-défaut"></a><a href="#macros-par-défaut" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Macros par défaut</h2>
<p>4D offers a set of default macros corresponding, in particular, to the list of keywords in previous versions of 4D. These macros are included in the default &quot;<em>Macros.xml</em>&quot; file, placed in the &quot;Macros v2&quot; folder that is created in the active 4D folder of the machine during the initial startup of 4D.</p>
<p>You can modify this file or the contents of the folder subsequently as desired (see the following paragraph). In the event of problems with this folder, it can be deleted and 4D will re-create it on the next startup.</p>
<h2><a class="anchor" aria-hidden="true" id="adding-customized-macros"></a><a href="#adding-customized-macros" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding customized macros</h2>
<p>You can add customized macros in the &quot;Macros.xml&quot; file using a standard text editor or by programming. You can also add XML files of customized macros in this folder.</p>
<p>In local mode, the macros file can be open while using 4D. The list of available macros is updated on each event activating 4D. For instance, it is possible to bring the text editor to the foreground, modify the macro file, then return to the method: the new macro is then available in the Code Editor.</p>
<p>Empty or erroneous macros are not displayed.</p>
<h3><a class="anchor" aria-hidden="true" id="checking-the-syntax-of-customized-macros"></a><a href="#checking-the-syntax-of-customized-macros" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Checking the syntax of customized macros</h3>
<p>The macro-command files of 4D must be in conformity with the XML standard. This means more particularly that XML declaration <code>&lt;?xml version=&quot;1.0&quot; ...?&gt;</code> and document declaration <code>&lt;!DOCTYPE macros SYSTEM &quot;http://www.4d.com/dtd/2007/macros.dtd&quot;&gt;</code> statements are mandatory at the beginning of a macro file in order for it to be loaded. The different types of XML encoding are supported. However, it is recommended to use encoding that is Mac/PC (UTF-8) compatible. 4D provides a DTD that can be used to validate the macro files. This file is found in the following location:</p>
<ul>
<li>Windows: \Resources\DTD\macros.dtd</li>
<li>Mac OS: :Contents:Resources:DTD:macros.dtd</li>
</ul>
<p>If a macros file does not contain the declaration statements or cannot be validated, it is not loaded.</p>
<h2><a class="anchor" aria-hidden="true" id="syntax-of-4d-macros"></a><a href="#syntax-of-4d-macros" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntax of 4D macros</h2>
<p>4D macros are built using customized XML tags called &quot;elements.&quot;</p>
<p>Some tags indicate the start and end of the definition (double tags of the type <code>&lt;tag&gt; &lt;/tag&gt;</code>), others are replaced by insertion context values (<code>&lt;tag/&gt;</code>).</p>
<p>In conformity with XML specifications, some element tags can include attributes. Unless otherwise indicated, these attributes are optional and a default value is used when they are omitted. The syntax of elements with attributes is as follows:</p>
<ul>
<li>Double tags: <code>&lt;tag attribute=&quot;value&quot;&gt; &lt;/macro&gt;</code></li>
<li>Single tags: <code>&lt;tag attribute=&quot;value&quot;/&gt;</code></li>
</ul>
<p>If the element accepts several attributes, you can group them in the same line of command, separated by a space:<br>
<tag attribute1="value" attribute2="value" attribute3="value"></p>
<p>Here is the list of tags and their mode of use:</p>
<table>
<thead>
<tr><th><strong>Element tags</strong></th><th><strong>Description</strong></th></tr>
</thead>
<tbody>
<tr><td><code>&lt;macros&gt; &lt;/macros&gt;</code></td><td>Start and end of macro file (mandatory tag).</td></tr>
<tr><td><code>&lt;macro&gt; &lt;/macro&gt;</code></td><td>Start and end of the definition of a macro and its attributes.</td></tr>
<tr><td></td><td><em>Attributes</em>:</td></tr>
<tr><td></td><td>- name: Name**of macro as it appears in menus and Code Editor lists (mandatory attribute).</td></tr>
<tr><td></td><td>- type_ahead_text: Character string** to be entered to call the macro using the type-ahead (aka autocomplete) function*.</td></tr>
<tr><td></td><td>- in_menu: Boolean indicating whether the macro can be called using the context menu*. Values = &quot;true&quot; (default) or &quot;false.&quot;</td></tr>
<tr><td></td><td>- type_ahead: Boolean indicating whether the macro can be called using the type-ahead (aka autocomplete) function*. Values = &quot;true&quot; (default) or &quot;false.&quot;</td></tr>
<tr><td></td><td>- method_event: Used to trigger the automatic calling of the macro depending on the current handling phase of each method (creation, closing, and so on). Values = &quot;on_load&quot;: The macro is triggered on the opening of each method, &quot;on_save&quot;: The macro is triggered when each method is saved (closing of a modified method or saving using the File&gt;Save command, &quot;on_create&quot;: The macro is triggered when each method is created, &quot;on_close&quot;: The macro is triggered when each method is closed.</td></tr>
<tr><td></td><td>&quot;on_save&quot; and &quot;on_close&quot; can be used jointly --- in other words, both of these events are generated when a modified method is closed. On the other hand, &quot;on_create&quot; and &quot;on_load&quot; are never generated in a consecutive manner. This attribute can be used, for example, to preformat methods when they are created (comments in header area) or to record information such as the date and time when they are closed.</td></tr>
<tr><td></td><td>- version: Used to activate the new mode of supporting text selections for the macro (see the &quot;About the <code>&lt;method&gt;</code> Tag&quot; section below). To activate this new mode, pass the value &quot;2&quot;. If you omit this attribute or pass version=&quot;1&quot;, the former mode is kept.</td></tr>
<tr><td></td><td>- in_toolbar: Boolean indicating if the macro must be present in the menu of the Macro button of the toolbar. Values= &quot;true&quot; (default) or &quot;false&quot;.</td></tr>
<tr><td><code>&lt;selection/&gt;</code></td><td>Tag replaced by the selected text when the macro is inserted. The selection may be empty.</td></tr>
<tr><td><code>&lt;text&gt; &lt;/text&gt;</code></td><td>Start and end of code that must be inserted in the method. A carriage return will be added before and after the code.</td></tr>
<tr><td><code>&lt;method&gt; &lt;/method&gt;</code></td><td>Start and end of the name of the project method and its (optional) parameter. The method is executed when the macro is called. You can pass a parameter in the form (&quot;param1;param2;...&quot;). This parameter will be received in the method using the variables $1, $2, etc. For additional information about this tag, refer to the &quot;About the <code>&lt;method&gt;</code> Tag&quot; section below.</td></tr>
<tr><td><code>&lt;caret/&gt;</code></td><td>Location of the insertion point in the code after the macro has been inserted.</td></tr>
<tr><td><code>&lt;user_4D/&gt;</code></td><td>Tag replaced by the name of the current 4D user.</td></tr>
<tr><td><code>&lt;user_os/&gt;</code></td><td>Tag replaced by the current system user name.</td></tr>
<tr><td><code>&lt;method_name/&gt;</code></td><td>Tag replaced by the current project method name.</td></tr>
<tr><td><code>&lt;method_path/&gt;</code></td><td>Tag replaced by full pathname of the current project method.</td></tr>
<tr><td><code>&lt;date/&gt;</code></td><td>Tag replaced by the current date.</td></tr>
<tr><td></td><td><em>Attribute</em>:</td></tr>
<tr><td></td><td>- format: 4D format used to display the date. If no format is set, the default format is used. Values = number of 4D format (0 to 8).</td></tr>
<tr><td><code>&lt;time/&gt;</code></td><td>Tag replaced by the current time.</td></tr>
<tr><td></td><td><em>Attribute</em>:</td></tr>
<tr><td></td><td>- format: 4D format used to display the time. If no format is set, the default format is used. Values = number of 4D format (0 to 6).</td></tr>
<tr><td><code>&lt;clipboard/&gt;</code></td><td>Tag replaced by the contents of the clipboard.</td></tr>
<tr><td></td><td><em>Attribute</em>:</td></tr>
<tr><td></td><td>- index: Clipboard to be pasted. Values = number of the clipboard (0 to 9).</td></tr>
</tbody>
</table>
<ul>
<li>Macros can be called using the context menu of the Code Editor or using the type-ahead function (see the following section).<br>
** If you want to conform to XML language specifications, you must not use extended characters (accented characters, quotation marks, etc.).</li>
<li>If you want to conform to XML language specifications, you must not use extended characters (accented characters, quotation marks, etc.).</li>
</ul>
<p>Here is an example of a macro definition:</p>
<table>
<thead>
<tr><th><strong>Content of macro</strong></th><th><strong>Commentaires</strong></th></tr>
</thead>
<tbody>
<tr><td><code>&lt;?xml version=&quot;1.0&quot;...?&gt;</code></td><td>XML declaration</td></tr>
<tr><td><code>&lt;!DOCTYPE macros SYSTEM&gt;</code></td><td>Document declaration</td></tr>
<tr><td><code>&lt;macros&gt;</code></td><td>Start of macros XML file</td></tr>
<tr><td><code>&lt;macro name=&quot;RecordLoop&quot;&gt;</code></td><td>Start of macro definition and name</td></tr>
<tr><td><code>&lt;text&gt;</code></td><td>Start of macro code</td></tr>
<tr><td>For($i;1;Records in selection(<code>&lt;Selection/&gt;</code>))</td><td>The <code>&lt;Selection/&gt;</code> tag will be replaced by the selected code in the 4D method at the time of macro insertion (for instance, a table name)</td></tr>
<tr><td>SAVE RECORD(<code>&lt;Selection/&gt;</code>)</td><td></td></tr>
<tr><td>NEXT RECORD(<code>&lt;Selection/&gt;</code>)</td><td></td></tr>
<tr><td>End for</td><td></td></tr>
<tr><td><code>&lt;/text&gt;</code></td><td>End of macro code</td></tr>
<tr><td><code>&lt;/macro&gt;</code></td><td>End of macro definition</td></tr>
<tr><td><code>&lt;/macros&gt;</code></td><td>End of macros XML file</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="about-the-method-tag"></a><a href="#about-the-method-tag" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>About the <code>&lt;method&gt;</code> tag</h2>
<p>The <code>&lt;method&gt;</code> tag allows you to generate and use macro-commands that execute 4D project methods. This allows developers to create sophisticated functions that can be distributed via macro-commands which are associated with components. For example, the following macro will cause the <em>MyMethod</em> method to be executed with the name of the current method as parameter:</p>
<p><code>&lt;method&gt;MyMethod(&quot;&lt;method_name/&gt;&quot;)&lt;/method&gt;</code></p>
<p>The code of a called method is executed in a new process. This process is killed once the method is executed.</p>
<blockquote>
<p><strong>Note:</strong> The structure process remains frozen until the called method execution is completed. You must make sure that the execution is quick and that there is no risk of it blocking the application. If this occurs, use the <strong>Ctrl+F8</strong> (Windows) or <strong>Command+F8</strong> (Mac OS) command to &quot;kill&quot; the process.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="calling-macros"></a><a href="#calling-macros" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Calling macros</h2>
<p>By default, macros can be called using the context menu or toolbar of the Code Editor, the autocomplete function, or a specific list at the bottom of the Code Editor window.</p>
<p>Note that for each macro it is possible to restrict the possibility of calling it using the context menu and/or the autocomplete function.</p>
<h3><a class="anchor" aria-hidden="true" id="context-menu-and-toolbar"></a><a href="#context-menu-and-toolbar" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Context menu and toolbar</h3>
<p>By default, all macros can be called via the context menu of the Code Editor (using the <strong>Insert macro</strong> hierarchical command) or the <strong>Macros</strong> button of the toolbar.</p>
<p>The <em>in_menu</em> attribute of the <code>&lt;macro&gt;</code> tag is used to set whether or not the macro appears in this menu.</p>
<p>In the context menu, macros are displayed in the order of the &quot;Macros.xml&quot; file and any additional XML files. It is thus possible to change the order by modifying these files.</p>
<h3><a class="anchor" aria-hidden="true" id="autocomplete"></a><a href="#autocomplete" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Autocomplete</h3>
<p>By default, all macros are accessible using the autocomplete (aka type-ahead) function (see <a href="/docs/fr/code-editor/write-class-method.html">Writing a method</a>). The <em>type_ahead</em> attribute of the <code>&lt;macro&gt;</code> tag can be used to exclude a macro from this type of operation.</p>
<p><strong>Note:</strong> If the macro contains the <code>&lt;selection/&gt;</code> tag, it will not appear in the autocomplete pop-up window.</p>
<h3><a class="anchor" aria-hidden="true" id="code-editor-list"></a><a href="#code-editor-list" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Code Editor list</h3>
<p>You can display your macros in a list of the Code Editor (see <a href="/docs/fr/code-editor/write-class-method.html">Writing a method</a>). Simply double-click on the name of a macro in the list in order to call it. It is not possible to exclude a specific macro from this list.</p>
<h2><a class="anchor" aria-hidden="true" id="compatibility-notes"></a><a href="#compatibility-notes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compatibility notes</h2>
<p>Macro support can change from one version of 4D to another. In order to keep the different versions compatible while maintaining your customizations, 4D does not remove any previous versions. If you want to use the latest features available, you must adapt your version accordingly.</p>
<h3><a class="anchor" aria-hidden="true" id="text-selection-variables-for-methods"></a><a href="#text-selection-variables-for-methods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Text selection variables for methods</h3>
<p>It is recommended to manage text selections using the <a href="https://doc.4d.com/4Dv19R4/4D/19-R4/GET-MACRO-PARAMETER.301-5739797.en.html">GET MACRO PARAMETER</a>and <a href="https://doc.4d.com/4Dv19R4/4D/19-R4/SET-MACRO-PARAMETER.301-5739788.en.html">SET MACRO PARAMETER</a> commands. These commands can be used to overcome the partitioning of the host project/component execution spaces and thus allow the creation of components dedicated to the management of macros. In order to activate this mode for a macro, you must declare the Version attribute with the value 2 in the Macro element. In this case, 4D no longer manages the predefined variables _textSel,_textReplace, etc. and the <a href="https://doc.4d.com/4Dv19R4/4D/19-R4/GET-MACRO-PARAMETER.301-5739797.en.html">GET MACRO PARAMETER</a>and <a href="https://doc.4d.com/4Dv19R4/4D/19-R4/SET-MACRO-PARAMETER.301-5739788.en.html">SET MACRO PARAMETER</a> are used. This attribute must be declared as follows:</p>
<p><code>&lt;macro name=&quot;MyMacro&quot; version=&quot;2&quot;&gt;</code><br/> <code>--- Text of the macro ---</code><br/> <code>&lt;/macro&gt;</code></p>
<p>If you do not pass this attribute, the previous mode is kept.</p>
<h3><a class="anchor" aria-hidden="true" id="incompatibilities-related-to-the-xml-standard"></a><a href="#incompatibilities-related-to-the-xml-standard" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Incompatibilities related to the XML standard</h3>
<p>Strict syntax rules must be observed in order for macros files to respect the XML standard. This may lead to incompatibilities with the code of macros created with previous versions and prevent the loading of XML files. The following are the main sources of malfunctioning:</p>
<ul>
<li>Comments of the &quot;// my comment&quot; type, allowed inside <code>&lt;macro&gt;</code> elements in previous versions of 4D, are not compatible with the XML syntax. The lines of comments must respect the standard <code>&quot;&lt;!-- my comment --&gt;&quot;</code> form.</li>
<li>The <code>&lt;&gt;</code> symbols used more particularly for interprocess object names must be encoded. For example, the <em>&lt;&gt;params</em> variable must be written <code>&amp;lt;&gt;params</code>.</li>
<li>The initial <code>&lt;macros&gt;</code> declaration tag could be omitted in previous versions of 4D. It is now mandatory; otherwise, the file will not be loaded.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/fr/code-editor/find-replace.html"><span class="arrow-prev">← </span><span>Chercher et remplacer</span></a><a class="docs-next button" href="/docs/fr/Tags/tags.html"><span>Balises de transformation</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#quest-ce-quune-macro-">Qu’est-ce qu’une macro ?</a></li><li><a href="#emplacement-des-macros">Emplacement des macros</a></li><li><a href="#macros-par-défaut">Macros par défaut</a></li><li><a href="#adding-customized-macros">Adding customized macros</a><ul class="toc-headings"><li><a href="#checking-the-syntax-of-customized-macros">Checking the syntax of customized macros</a></li></ul></li><li><a href="#syntax-of-4d-macros">Syntax of 4D macros</a></li><li><a href="#about-the-method-tag">About the <code>&lt;method&gt;</code> tag</a></li><li><a href="#calling-macros">Calling macros</a><ul class="toc-headings"><li><a href="#context-menu-and-toolbar">Context menu and toolbar</a></li><li><a href="#autocomplete">Autocomplete</a></li><li><a href="#code-editor-list">Code Editor list</a></li></ul></li><li><a href="#compatibility-notes">Compatibility notes</a><ul class="toc-headings"><li><a href="#text-selection-variables-for-methods">Text selection variables for methods</a></li><li><a href="#incompatibilities-related-to-the-xml-standard">Incompatibilities related to the XML standard</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'OJ04C0M3CU',
                apiKey: '5f22ebbb9382abafeadc3e86ca47d4af',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:fr","version:19 R6 BETA"]}
              });
            </script></body></html>