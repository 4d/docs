<!doctype html><html lang=fr dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-21 docs-doc-page docs-doc-id-WebServer/sessions" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Sessions Web | 4D Docs</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://developer.4d.com/docs/fr/WebServer/sessions><meta data-rh=true property=og:locale content=fr><meta data-rh=true property=og:locale:alternate content=en><meta data-rh=true property=og:locale:alternate content=es><meta data-rh=true property=og:locale:alternate content=ja><meta data-rh=true property=og:locale:alternate content=pt><meta data-rh=true name=docusaurus_locale content=fr><meta data-rh=true name=docsearch:language content=fr><meta data-rh=true name=docusaurus_version content=21><meta data-rh=true name=docusaurus_tag content=docs-default-21><meta data-rh=true name=docsearch:version content=21><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-21><meta data-rh=true property=og:title content="Sessions Web | 4D Docs"><meta data-rh=true name=description content="Le serveur Web de 4D offre des fonctions intégrées pour la gestion des sessions Web. La création et la maintenance de sessions Web vous permettent de contrôler et d'améliorer l'expérience utilisateur de votre application web. Lorsque les sessions web sont activées, les clients web peuvent réutiliser le même contexte de serveur d'une requête à une autre."><meta data-rh=true property=og:description content="Le serveur Web de 4D offre des fonctions intégrées pour la gestion des sessions Web. La création et la maintenance de sessions Web vous permettent de contrôler et d'améliorer l'expérience utilisateur de votre application web. Lorsque les sessions web sont activées, les clients web peuvent réutiliser le même contexte de serveur d'une requête à une autre."><link data-rh=true rel=icon href=/docs/fr/img/favicon/4d.gif><link data-rh=true rel=canonical href=https://developer.4d.com/docs/fr/WebServer/sessions><link data-rh=true rel=alternate href=https://developer.4d.com/docs/WebServer/sessions hreflang=en><link data-rh=true rel=alternate href=https://developer.4d.com/docs/fr/WebServer/sessions hreflang=fr><link data-rh=true rel=alternate href=https://developer.4d.com/docs/es/WebServer/sessions hreflang=es><link data-rh=true rel=alternate href=https://developer.4d.com/docs/ja/WebServer/sessions hreflang=ja><link data-rh=true rel=alternate href=https://developer.4d.com/docs/pt/WebServer/sessions hreflang=pt><link data-rh=true rel=alternate href=https://developer.4d.com/docs/WebServer/sessions hreflang=x-default><link data-rh=true rel=preconnect href=https://OJ04C0M3CU-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://developer.4d.com/docs/fr/category/web-applications","name":"Applications Web","position":1},{"@type":"ListItem","item":"https://developer.4d.com/docs/fr/WebServer/overview","name":"Serveur Web","position":2},{"@type":"ListItem","item":"https://developer.4d.com/docs/fr/WebServer/sessions","name":"Sessions Web","position":3}]}</script><link rel=search type=application/opensearchdescription+xml title="4D Docs" href=/docs/fr/opensearch.xml><script src=https://kit.fontawesome.com/daeacc3fc4.js crossorigin=anonymous></script><link rel=stylesheet href=/docs/fr/assets/css/styles.ae3169d2.css><script src=/docs/fr/assets/js/runtime~main.d7e15c3e.js defer></script><script src=/docs/fr/assets/js/main.283b8ced.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/docs/fr/img/logohome.png><div role=region aria-label="Aller au contenu principal"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Aller au contenu principal</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/docs/fr/><div class=navbar__logo><img src=/docs/fr/img/logohome.png alt="4D Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/docs/fr/img/logohome.png alt="4D Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">4D Documentation</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/docs/fr/WebServer/sessions>21 BETA</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/fr/WebServer/sessions>21 BETA</a><li><a class=dropdown__link href=/docs/fr/20-R10/WebServer/sessions>20 R10</a><li><a class=dropdown__link href=/docs/fr/20/WebServer/sessions>20</a><li><a class=dropdown__link href=/docs/fr/19/WebServer/sessions>19</a><li><a class=dropdown__link href=/docs/fr/18/GettingStarted/installation>18</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>Français</a><ul class=dropdown__menu><li><a href=/docs/WebServer/sessions target=_self rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href=/docs/fr/WebServer/sessions target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=fr>Français</a><li><a href=/docs/es/WebServer/sessions target=_self rel="noopener noreferrer" class=dropdown__link lang=es>Español</a><li><a href=/docs/ja/WebServer/sessions target=_self rel="noopener noreferrer" class=dropdown__link lang=ja>日本語</a><li><a href=/docs/pt/WebServer/sessions target=_self rel="noopener noreferrer" class=dropdown__link lang=pt>Português</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="mode système" aria-label="Basculer entre le mode sombre et clair (actuellement mode système)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Rechercher (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Rechercher</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/docs/fr/><img src=/docs/fr/img/logohome.png alt="4D Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/docs/fr/img/logohome.png alt="4D Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>4D Documentation</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/fr/category/getting-started>Prise en main</a><button aria-label="Expand sidebar category 'Prise en main'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/fr/category/project-ide>Projet & IDE</a><button aria-label="Expand sidebar category 'Projet & IDE'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/fr/category/4d-language>Langage 4D</a><button aria-label="Expand sidebar category 'Langage 4D'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/fr/category/core>Développement</a><button aria-label="Expand sidebar category 'Développement'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/fr/category/web-applications>Applications Web</a><button aria-label="Collapse sidebar category 'Applications Web'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href=https://developer.qodly.com/docs target=_blank rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex=0>4D Qodly Pro<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/fr/WebServer/overview>Serveur Web</a><button aria-label="Collapse sidebar category 'Serveur Web'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/gettingStarted>Prise en main</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/webServerConfig>Configuration</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/webServerAdmin>Administration</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/webServerObject>Web Server instances</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/templates>Pages templates</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/httpRequests>Traitement des requêtes HTTP</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/http-request-handler>Gestionnaire de requêtes HTTP</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/http-rules>HTTP Rules</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/allowProject>Autoriser les méthodes projet</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/errorPages>Pages d'erreur HTTP personnalisées</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/authentication>Authentification</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/fr/WebServer/sessions>Sessions Web</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/fr/WebServer/preemptiveWeb>Utiliser des process web préemptifs</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/fr/category/rest-api>API REST</a><button aria-label="Expand sidebar category 'API REST'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/fr/category/desktop-applications>Applications Desktop</a><button aria-label="Expand sidebar category 'Applications Desktop'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/fr/category/administration>Administration</a><button aria-label="Expand sidebar category 'Administration'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/fr/category/extensions>Extensions</a><button aria-label="Expand sidebar category 'Extensions'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav><button type=button title="Réduire le menu latéral" aria-label="Réduire le menu latéral" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Page d’accueil" class=breadcrumbs__link href=/docs/fr/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/fr/category/web-applications><span>Applications Web</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/fr/WebServer/overview><span>Serveur Web</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Sessions Web</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version : 21 BETA</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Sessions Web</h1></header><p>Le serveur Web de 4D offre des fonctions intégrées pour la gestion des <strong>sessions Web</strong>. La création et la maintenance de sessions Web vous permettent de contrôler et d'améliorer l'expérience utilisateur de votre application web. Lorsque les sessions web sont activées, les clients web peuvent réutiliser le même contexte de serveur d'une requête à une autre.</p>
<p>Les sessions Web permettent de :</p>
<ul>
<li>gérer simultanément plusieurs requêtes depuis le même client web via un nombre illimité de process préemptifs (les sessions web sont <strong>évolutives</strong>),</li>
<li>gérer la session à travers un objet <code>Session</code> et une <a href=/docs/fr/API/SessionClass>API de session</a>,</li>
<li>stocker et partager des données entre les process d'un client web en utilisant le <a href=/docs/fr/API/SessionClass#storage>.storage</a> de la session,</li>
<li>associer des privilèges à l'utilisateur qui exécute la session.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Article(s) de blog sur le sujet</div><div class=admonitionContent_BuS1><p><a href=https://blog.4d.com/scalable-sessions-for-advanced-web-applications/ target=_blank rel="noopener noreferrer">Sessions évolutives pour applications web avancées</a></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=utilisations>Utilisations<a href=#utilisations class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>Les sessions Web sont utilisées par :</p>
<ul>
<li>les <a href=/docs/fr/WebServer/gettingStarted>applications Web</a> envoyant des requêtes http (y compris les <a href=/docs/fr/commands/theme/Web-Services-Server>Web services SOAP</a> et les requêtes <a href=/docs/fr/WebServer/httpRequests#4daction>/4DACTION</a>),</li>
<li>les appels à l'<a href=/docs/fr/REST/authUsers>API REST</a>, qui sont effectués par les <a href=/docs/fr/ORDA/datastores>datastores distants</a> et les <a href=/docs/fr/WebServer/qodly-studio>pages Qodly</a>.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=activation-des-sessions-web>Activation des sessions web<a href=#activation-des-sessions-web class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>La gestion de session peut être activée et désactivée sur votre serveur Web 4D. Il y a différentes façons d'activer la gestion de session :</p>
<ul>
<li>Utiliser l'option <strong>Sessions évolutives</strong> dans la page "Web/Options (I)" des Propriétés (réglage permanent) :
<img decoding=async loading=lazy alt=alt-text src=/docs/fr/assets/images/settingsSession-0d1b28de173a572d3a47fcf327e29b28.png width=821 height=361 class=img_ev3q></li>
</ul>
<p>Cette option est sélectionnée par défaut dans les nouveaux projets. Elle peut cependant être désactivée en sélectionnant l'option <strong>Pas de sessions</strong>, auquel cas les fonctionnalités de session web sont désactivées (aucun objet <code>Session</code> n'est disponible).</p>
<ul>
<li>En utilisant la propriété <a href=/docs/fr/API/WebServerClass#scalablession><code>.scalableSession</code></a> de l'objet Web Server (à passer dans le paramètre <em>settings</em> de la fonction <a href=/docs/fr/API/WebServerClass#start><code>.start()</code></a> ). Dans ce cas, ce paramètre remplace l'option définie dans la boîte de dialogue Propriétés pour l'objet Web Server (il n'est pas stocké sur disque).</li>
</ul>
<blockquote>
<p>La commande <a href=/docs/fr/commands/web-set-option><code>WEB SET OPTION</code></a> peut également définir le mode de session du serveur Web principal.</p>
</blockquote>
<p>Dans tous les cas, ce paramètre est local à la machine ; il peut donc être différent sur le serveur Web 4D Server et les serveurs Web des machines 4D distantes.</p>
<blockquote>
<p><strong>Compatibilité</strong> : Une option <strong>Anciennes sessions</strong> est disponible dans les projets créés avec une version 4D antérieure à 4D v18 R6 (pour plus d'informations, veuillez consulter le site web <a href=https://doc.4d.com target=_blank rel="noopener noreferrer">doc.4d.com</a>).</p>
</blockquote>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=implémentation-des-sessions>Implémentation des sessions<a href=#implémentation-des-sessions class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>Lorsque <a href=#enabling-web-sessions>les sessions sont activées</a>, des mécanismes automatiques sont mis en œuvre, sur la base d'un cookie privé défini par 4D lui-même : "4DSID_<em>AppName</em>", où <em>AppName</em> est le nom du projet d'application. Ce cookie référence la session web courante pour l'application.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_BuS1><p>Le nom du cookie peut être obtenu en utilisant la propriété <a href=/docs/fr/API/WebServerClass#sessioncookiename><code>.sessionCookieName</code></a>.</div></div>
<ol>
<li>
<p>Dans chaque requête de client web, le serveur Web vérifie la présence et la valeur du cookie privé "4DSID__AppName_".</p>
</li>
<li>
<p>Si le cookie a une valeur, 4D recherche la session qui a créé ce cookie parmi les sessions existantes ; si cette session est trouvée, elle est réutilisée pour l'appel.</p>
</li>
<li>
<p>Si la requête du client ne correspond pas à une session déjà ouverte :</p>
</li>
</ol>
<ul>
<li>une nouvelle session avec un cookie privé "4DSID__AppName_" est créée sur le serveur web</li>
<li>un nouvel objet <code>Session</code> Guest est créé et est dédié à la session web évolutive.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_BuS1><p>La création d'une session web pour une requête REST peut nécessiter qu'une licence soit disponible, consultez <a href=/docs/fr/REST/authUsers>cette page</a>.</div></div>
<p>L'objet <code>Session</code> de la session en cours peut ensuite être manipulé via la commande <a href=/docs/fr/commands/session><code>Session</code></a> dans le code de n'importe quel process web.</p>
<p><img decoding=async loading=lazy alt=alt-text src=/docs/fr/assets/images/schemaSession-a7c86d4948895f03c24611177cd54f7c.png width=642 height=442 class=img_ev3q></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_BuS1><p>Les process Web ne se terminent généralement pas, ils sont recyclés dans un pool pour des raisons d'optimisation. Lorsqu'un process termine l'exécution d'une requête, il est replacé dans le pool et rendu disponible pour la requête suivante. Comme un process web peut être réutilisé par n'importe quelle session, les <a href=/docs/fr/Concepts/variables#process-variables>variables process</a> doivent être effacées par votre code à la fin de son exécution (en utilisant <a href=/docs/fr/commands/clear-variable><code>CLEAR VARIABLE</code></a> par exemple). Ce nettoyage est nécessaire pour toute information liée au process, comme une référence à un fichier ouvert. C'est la raison pour laquelle <strong>il est recommandé</strong> d'utiliser l'objet <a href=/docs/fr/API/SessionClass>Session</a> lorsque vous souhaitez conserver les informations relatives à la session.</div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=stockage-et-partage-des-informations-de-session>Stockage et partage des informations de session<a href=#stockage-et-partage-des-informations-de-session class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>Chaque objet <code>Session</code> fournit une propriété <a href=/docs/fr/API/SessionClass#storage><code>.storage</code></a> qui est un <a href=/docs/fr/Concepts/shared>objet partagé</a>. Cette propriété vous permet de partager des informations entre tous les process gérés par la session.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=durée-de-vie-des-sessions>Durée de vie des sessions<a href=#durée-de-vie-des-sessions class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>Une session web évolutive est fermée lorsque:</p>
<ul>
<li>le serveur web est arrêté,</li>
<li>le délai d'attente du cookie de session a été atteint.</li>
</ul>
<p>La durée de vie d'un cookie inactif est de 60 minutes par défaut, ce qui signifie que le serveur Web fermera automatiquement les sessions inactives après 60 minutes.</p>
<p>Ce délai peut être défini en utilisant la propriété <a href=/docs/fr/API/SessionClass#idletimeout><code>.idleTimeout</code></a> de l'objet <code>Session</code> (le délai ne peut être inférieur à 60 minutes) ou le paramètre <em>connectionInfo</em> de la commande <a href=/docs/fr/commands/open-datastore><code>Open datastore</code></a>.</p>
<p>Lorsqu'une session web est fermée, si la commande <a href=/docs/fr/commands/session><code>Session</code></a> est appelée par la suite :</p>
<ul>
<li>l'objet <code>Session</code> ne contient pas de privilèges (c'est une session Guest)</li>
<li>la propriété <a href=/docs/fr/API/SessionClass#storage><code>storage</code></a> est vide</li>
<li>un nouveau cookie de session est associé à la session</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_BuS1><p>Vous pouvez fermer une session à partir d'une page Qodly en utilisant la fonction <a href=/docs/fr/WebServer/qodly-studio#logout><strong>logout</strong></a>.</div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=privilèges>Privilèges<a href=#privilèges class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>Les privilèges sont associés aux sessions utilisateur web. Sur le serveur web, vous pouvez fournir un accès spécifique ou des fonctionnalités en fonction des privilèges de la session.</p>
<p>Vous assignez des privilèges en utilisant la <a href=/docs/fr/API/SessionClass#setprivileges>fonction <code>.setPrivileges()</code></a>. Dans votre code, vous pouvez vérifier les privilèges de la session pour autoriser ou refuser l'accès à l'aide de la fonction <a href=/docs/fr/API/SessionClass#hasprivilege><code>.hasPrivilege()</code></a>. Par défaut, les nouvelles sessions n'ont aucun privilège : ce sont des sessions <strong>Guest</strong> (la fonction <a href=/docs/fr/API/SessionClass#isguest><code>isGuest()</code></a> retourne true).</p>
<p>Voici un exemple :</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">If (Session.hasPrivilege("WebAdmin"))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	//Accès autorisé, on ne fait rien</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Else</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	//Afficher une page d'authentification</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End if</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_BuS1><p>Les privilèges sont implémentés au cœur de l'architecture ORDA, fournissant aux développeurs une technologie puissante pour contrôler l'accès aux fonctions du datastore et des dataclass. Pour plus d'informations, veuillez vous reporter à la section <a href=/docs/fr/ORDA/privileges><strong>Privilèges</strong></a>.</div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=exemple>Exemple<a href=#exemple class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>Dans une application CRM, chaque commercial gère son propre portefeuille de clients. Le datastore contient au moins deux dataclass liées : Customers et SalesPersons (un commercial a plusieurs clients).</p>
<p><img decoding=async loading=lazy alt=alt-text src=/docs/fr/assets/images/exampleSession-6ea5390dae0da375f51de68193ef570e.png width=450 height=225 class=img_ev3q></p>
<p>Nous voulons qu'un(e) commercial(e) s'authentifie, ouvre une session sur le serveur web et que les 3 meilleurs clients soient chargés dans la session.</p>
<ol>
<li>Nous exécutons cette URL pour ouvrir une session :</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">http://localhost:8044/authenticate.shtml</span><br></span></code></pre></div></div>
<blockquote>
<p>Dans un environnement de production, il est nécessaire d'utiliser une <a href=/docs/fr/API/WebServerClass#httpsenabled>connexion HTTPS</a> pour éviter la circulation d'informations non chiffrées sur le réseau.</p>
</blockquote>
<ol start=2>
<li>La page <code>authenticate.shtml</code> est un formulaire contenant des champs de saisie <em>userId</em> et <em>password</em> et envoie une action POST 4DACTION :</li>
</ol>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-html codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token doctype punctuation" style=color:#393A34;font-style:italic>&lt;!</span><span class="token doctype doctype-tag" style=color:#999988;font-style:italic>DOCTYPE</span><span class="token doctype" style=color:#999988;font-style:italic> </span><span class="token doctype name" style=color:#999988;font-style:italic>html</span><span class="token doctype punctuation" style=color:#393A34;font-style:italic>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>html</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>body</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>bgcolor</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>#ffffff</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>FORM</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>ACTION</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>/4DACTION/authenticate</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>METHOD</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value" style=color:#e3116c>POST</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	UserId: </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>INPUT</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>TYPE</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value" style=color:#e3116c>TEXT</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>NAME</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value" style=color:#e3116c>userId</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>VALUE</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>br</span><span class="token tag punctuation" style=color:#393A34>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	Password: </span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>INPUT</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>TYPE</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value" style=color:#e3116c>TEXT</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>NAME</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value" style=color:#e3116c>password</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>VALUE</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>br</span><span class="token tag punctuation" style=color:#393A34>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>INPUT</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>TYPE</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value" style=color:#e3116c>SUBMIT</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>NAME</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value" style=color:#e3116c>OK</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>VALUE</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>Log In</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>FORM</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>body</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;/</span><span class="token tag" style=color:#00009f>html</span><span class="token tag punctuation" style=color:#393A34>></span><br></span></code></pre></div></div>
<p><img decoding=async loading=lazy alt=alt-text src="data:image/png;base64,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" width=523 height=158 class=img_ev3q></p>
<ol start=3>
<li>La méthode projet d'authentification recherche la personne <em>userID</em> et valide le mot de passe par rapport à la valeur hachée déjà stockée dans la table <em>SalesPersons</em> :</li>
</ol>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">var $indexUserId; $indexPassword; $userId : Integer</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $password : Text</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $userTop3; $sales; $info : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">ARRAY TEXT($anames; 0)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ARRAY TEXT($avalues; 0)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">WEB GET VARIABLES($anames; $avalues)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$indexUserId:=Find in array($anames; "userId")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$userId:=Num($avalues{$indexUserId})</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$indexPassword:=Find in array($anames; "password")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$password:=$avalues{$indexPassword}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$sales:=ds.SalesPersons.query("userId = :1"; $userId).first()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">If ($sales#Null)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    If (Verify password hash($password; $sales.password))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        $info:=New object()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        $info.userName:=$sales.firstname+" "+$sales.lastname</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Session.setPrivileges($info)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Use (Session.storage)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            If (Session.storage.myTop3=Null)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                $userTop3:=$sales.customers.orderBy("totalPurchase desc").slice(0; 3)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">                Session.storage.myTop3:=$userTop3</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            End if</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        End use</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        WEB SEND HTTP REDIRECT("/authenticationOK.shtml")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Else</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        WEB SEND TEXT("This password is wrong")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    End if</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Else</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    WEB SEND TEXT("This userId is unknown")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End if</span><br></span></code></pre></div></div>
<p>:::tips Articles de blog sur le sujet</p>
<p><a href=https://blog.4d.com/scalable-sessions-for-advanced-web-applications/ target=_blank rel="noopener noreferrer">Sessions évolutives pour applications web avancées</a></p>
<p>:::</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=token-de-session-otp>Token de session (OTP)<a href=#token-de-session-otp class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>Le serveur web 4D vous permet de générer, de partager et d'utiliser des tokens de session OTP (One-Time Passcode). Les tokens (ou <em>jetons</em>) de session OTP sont utilisés pour sécuriser les communications avec des applications ou des sites web tiers. Pour plus d'informations sur OTP, veuillez vous référer à la page <a href=https://en.wikipedia.org/wiki/One-time_password target=_blank rel="noopener noreferrer">Mot de passe à usage unique</a> sur Wikipedia.</p>
<p>Dans 4D, les tokens de session OTP sont utiles pour appeler des URL externes et être rappelé dans un autre navigateur ou appareil (mobile/ordinateur). Généralement, une application tierce envoie un courriel de confirmation contenant un lien de rappel sur lequel l'utilisateur doit cliquer. Le lien de rappel inclut le token OTP, de sorte que la session qui a déclenché le rappel est chargée avec ses données et ses privilèges. Ce principe vous permet de partager la même session sur plusieurs appareils. Grâce à cette architecture, le [cookie de session] (#session-implementation) n'est pas exposé sur le réseau, ce qui élimine le risque d'une attaque de type "man-in-the-middle".</p>
<p>:::tips Articles de blog sur le sujet</p>
<p><a href=https://blog.4d.com/connect-your-web-apps-to-third-party-systems/ target=_blank rel="noopener noreferrer">Connectez vos applications Web à des systèmes tiers</a></p>
<p>:::</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=vue-densemble>Vue d’ensemble<a href=#vue-densemble class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h3>
<p>La séquence de base de l'utilisaton d'un token de session OTP dans une application web 4D est la suivante :</p>
<ol>
<li>L'utilisateur web initie une action qui nécessite une connexion tierce sécurisée, par exemple une validation, à partir d'une session spécifique.</li>
<li>Dans votre code 4D, vous créez un nouvel OTP pour la session à l'aide de la fonction <a href=/docs/fr/API/SessionClass#createotp><code>Session.createOTP()</code></a>.</li>
<li>Vous envoyez une requête à l'application tierce avec le token de session inclus dans l'Uri de callback (rappel). Notez que la manière de fournir l'Uri de rappel à une application tierce dépend de son API (voir ci-dessous).</li>
<li>L'application tierce renvoie une requête à 4D avec le modèle que vous avez fourni dans l'Uri de rappel.</li>
<li>Le rappel de la requête est traité dans votre application.</li>
</ol>
<p>Par définition, un token OTP ne peut être utilisé qu'une seule fois. Dans ce scénario, si une requête web est reçue avec un token de session comme paramètre qui a déjà été utilisé, la session initiale n'est pas restaurée.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=traitement-de-lotp-dans-le-callback>Traitement de l'OTP dans le callback<a href=#traitement-de-lotp-dans-le-callback class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h3>
<p>Les callbacks d'applications tierces qui incluent le token OTP peuvent être traités de différentes manières dans votre application 4D, en fonction de votre développement et de l'API tierce. En principe, vous avez deux possibilités pour gérer le token : via le paramètre <strong><code>$4DSID</code></strong> pour un traitement automatique, ou via un paramètre personnalisé que vous devez traiter.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=utilisation-de-4dsid-dans-lurl>Utilisation de <code>$4DSID</code> dans l'URL<a href=#utilisation-de-4dsid-dans-lurl class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h4>
<p>L'utilisation du paramètre <code>$4DSID</code> est la façon la plus simple de traiter un callback de l'application tierce :</p>
<ul>
<li>Le token OTP est fourni en tant que paramètre directement dans l'url de callback en utilisant la syntaxe standard <code>?$4DSID=XXXX123</code>.</li>
<li>Dans votre application 4D, vous implémentez un <a href=/docs/fr/WebServer/http-request-handler>HTTP Request handler</a> dédié en utilisant les classes <a href=/docs/fr/API/IncomingMessageClass><code>IncomingMessage</code></a> et <a href=/docs/fr/API/OutgoingMessageClass><code>OutgoingMessage</code></a>.</li>
<li>Si le token <code>$4DSID</code> est valide, la session de l'utilisateur web concerné est <strong>automatiquement restaurée</strong> dans n'importe quel process web avec son <em>storage</em> et ses privilèges.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_BuS1><p>Une url <a href=/docs/fr/WebServer/httpRequests#4daction><code>4DACTION</code></a> peut également être utilisée du côté 4D.</div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=utilisation-dun-paramètre-personnalisé>Utilisation d'un paramètre personnalisé<a href=#utilisation-dun-paramètre-personnalisé class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h4>
<p>Le token OTP peut également être fourni en tant que paramètre personnalisé que vous devez traiter spécifiquement pour restaurer la session. Vous devez utiliser cette solution si :</p>
<ul>
<li>l'application tierce ne permet pas d'insérer des paramètres tels que <code>$4DSID</code> directement dans l'Uri de redirection, et fournit une API dédiée (l'implémentation dépend de l'application tierce),</li>
<li>ou bien vous souhaitez appeler une fonction ORDA via REST pour traiter le callback, auquel cas vous devez transmettre l'OTP avec la <a href=/docs/fr/REST/classFunctions#parameters>syntaxe des paramètres REST</a> (par exemple <code>?$params='["XXX123"]'</code>).</li>
</ul>
<p>Dans les deux cas, vous devez extraire le token du paramètre personnalisé et appeler la fonction <a href=/docs/fr/API/SessionClass#restore><code>Session.restore()</code></a> avec le token en paramètre.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=traitement-dun-otp-non-valide>Traitement d'un OTP non valide<a href=#traitement-dun-otp-non-valide class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h4>
<p>Le token OTP est considéré comme invalide si :</p>
<ul>
<li>le token de session a déjà été utilisé,</li>
<li>le token de session a expiré,</li>
<li>le token de session n'existe pas,</li>
<li>la session d'origine elle-même a expiré.</li>
</ul>
<p>Dans ce cas, aucune session d'utilisateur Web n'est restaurée et la session courante (s'il y en a une) reste inchangée. En général, vous pouvez décider d'afficher une page de connexion ou d'ouvrir une session guest.</p>
<p>La vérification de la validité du token OTP reçu dépend de la manière dont il a été géré :</p>
<ul>
<li>Si vous avez utilisé un <code>$4DSID</code>, vous pouvez stocker une propriété d'état personnalisée dans le <a href=/docs/fr/API/SessionClass#storage>storage de la session</a> au moment de la création du token, et vérifier cet état une fois que le token OTP a été reçu pour voir s'il s'agit de la même valeur (voir l'exemple).</li>
<li>Si vous avez utilisé la fonction <a href=/docs/fr/API/SessionClass#restore><code>Session.restore()</code></a>, elle renvoie true si la session a été correctement restaurée.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=scénario-avec-4dsid>Scénario avec $4DSID<a href=#scénario-avec-4dsid class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h3>
<p>Le scénario utilisant la clé <code>$4DSID</code> est illustré dans le diagramme suivant :</p>
<!-- -->
<p>La définition du gestionnaire de requêtes HTTP 4D :</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"class"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"OperationsHandler"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"method"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"handleOperation"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"regexPattern"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"/my4DApp/completeOperation"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"verbs"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"get"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>]</span><br></span></code></pre></div></div>
<p>La classe du singleton :</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">//Class OperationsHandler</span><br></span><span class=token-line style=color:#393A34><span class="token plain">shared singleton Class constructor()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    function handleOperation($request : 4D.IncomingMessage) </span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $session:=Session</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=scénario-avec-la-fonction-restore>Scénario avec la fonction <code>restore</code><a href=#scénario-avec-la-fonction-restore class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h3>
<p>Le scénario utilisant un paramètre personnalisé est illustré dans le diagramme suivant :</p>
<!-- -->
<p>La définition du gestionnaire de requêtes HTTP 4D :</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"class"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"OperationsHandler"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"method"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"handleOperation"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"regexPattern"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"/my4DApp/completeOperation"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"verbs"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"get"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>]</span><br></span></code></pre></div></div>
<p>La classe du singleton :</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">//Class OperationsHandler</span><br></span><span class=token-line style=color:#393A34><span class="token plain">shared singleton Class constructor()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Function handleOperation($req : 4D.IncomingMessage) : 4D.OutgoingMessage</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Session.restore($req.urlQuery.state)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=exemple-de-validation-demail-avec-4dsid>Exemple de validation d'email avec $4DSID<a href=#exemple-de-validation-demail-avec-4dsid class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h3>
<ol>
<li>Un compte d'utilisateur est créé dans une dataclass <em>Users</em>. Un objet <em>$info</em> est reçu avec l'email et le mot de passe. Un OTP correspondant à la session courante est généré. Une URL est alors renvoyée avec l'OTP indiqué dans le paramètre $4DSID.</li>
</ol>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">//cs.Users class</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Function create($info : Object) : Text</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $user : cs.UsersEntity</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $status : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $token : Text</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$user:=This.new() //créatoin d'un user</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$user.fromObject($info)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$status:=$user.save()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br></span><span class=token-line style=color:#393A34><span class="token plain">//Stockage d'information dans la session</span><br></span><span class=token-line style=color:#393A34><span class="token plain">//y compris le statut de création de l'utilisateur</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Use (Session.storage)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	Session.storage.status:=New shared object("step"; "Waiting for validation email"; /</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "email"; $user.email; "ID"; $user.ID)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End use </span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br></span><span class=token-line style=color:#393A34><span class="token plain">//Génération d'un OTP correspondant à la session</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$token:=Session.createOTP()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// Renvoi d'un URL avec un paramètre $4DSID</span><br></span><span class=token-line style=color:#393A34><span class="token plain">return "https://my.server.com/tools/validateEmail?$4DSID="+$token`</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<ol start=2>
<li>L'utilisateur reçoit cette URL sous la forme d'un lien dans un courrier électronique. Le préfixe d'URL <code>/validateEmail</code> est traité par un <a href=/docs/fr/WebServer/http-request-handler>gestionnaire de requête HTTP personnalisé</a> :</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"class"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"RequestHandler"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"method"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"validateEmail"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"regexPattern"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"/validateEmail"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token property" style=color:#36acaa>"verbs"</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"get"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>]</span><br></span></code></pre></div></div>
<p>La fonction <em>validateEmail()</em> du singleton RequestHandler :</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">//validateEmail class</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">shared singleton Class constructor()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Function validateEmail() : 4D.OutgoingMessage</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> var $result:=4D.OutgoingMessage.new()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    //La session qui a généré l'OTP est restaurée </span><br></span><span class=token-line style=color:#393A34><span class="token plain">    //grâce au paramètre $4DSID fourni dans l'URL</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> If (Session.storage.status.step="Waiting for validation email")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  $user:=ds.Users.get(Session.storage.status.ID)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  $user.emailValidated() //fixé à vrai</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  $result.setBody("Congratulations &lt;br>"\</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  +"Your email "+Session.storage.status.email+" has been validated")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  $result.setHeader("Content-Type"; "text/html"	</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  Use (Session.storage.status)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">	Session.storage.status.step:="Email validated"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  End use</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> Else</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  $result.setBody("Invalid token")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> End if </span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> return $result</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>Comme le paramètre <code>$4DSID</code> contient un OTP valide correspondant à la session d'origine, l'objet <code>Session</code> référence la session qui a créé l'OTP.</p>
<p>Un nouvel utilisateur est créé et des informations sont stockées dans la session, en particulier l'étape courante du processus de création du compte utilisateur (attente du courriel de validation) et l'identifiant de l'utilisateur.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=contextes-pris-en-charge>Contextes pris en charge<a href=#contextes-pris-en-charge class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h3>
<ul>
<li>Les schémas HTTP et HTTPS sont tous deux pris en charge.</li>
<li>Seules des <a href=#enabling-web-sessions>sessions évolutives</a> peuvent être réutilisées avec des tokens.</li>
<li>Seules les sessions de la base de données hôte peuvent être réutilisées (les sessions créées dans les serveurs web des composants ne peuvent pas être restaurées).</li>
<li>Les tokens ne sont pas pris en charge dans les sessions client/serveur ou les sessions mono-utilisateur.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=durée-de-vie>Durée de vie<a href=#durée-de-vie class=hash-link aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h3>
<p>Un token de session a une durée de vie, et la session elle-même a une durée de vie. La durée de vie du token de session peut être définie <a href=/docs/fr/API/SessionClass#createotp>lors de sa création</a>. Par défaut, la durée de vie du token est la même que la valeur <a href=/docs/fr/API/SessionClass#idletimeout><code>.idleTimeout</code></a>.</p>
<p>Une session n'est restaurée par un token que si ni la durée de vie du token de session ni celle de la session n'ont expiré. Dans les autres cas (le token de session a expiré et/ou la session elle-même a expiré), une session <em>guest</em> est créée lorsqu'une requête web avec un token de session est reçue.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href="https://github.com/4d/docs/issues/new?title=Comment%20on%20WebServer%2Fsessions.md%20(21)&body=Please%20enter%20your%20comment%3A" target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Ecrire un commentaire sur cette page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Pagination des documents"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/fr/WebServer/authentication><div class=pagination-nav__sublabel>Précédent</div><div class=pagination-nav__label>Authentification</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/fr/WebServer/preemptiveWeb><div class=pagination-nav__sublabel>Suivant</div><div class=pagination-nav__label>Utiliser des process web préemptifs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#utilisations class="table-of-contents__link toc-highlight">Utilisations</a><li><a href=#activation-des-sessions-web class="table-of-contents__link toc-highlight">Activation des sessions web</a><li><a href=#implémentation-des-sessions class="table-of-contents__link toc-highlight">Implémentation des sessions</a><li><a href=#stockage-et-partage-des-informations-de-session class="table-of-contents__link toc-highlight">Stockage et partage des informations de session</a><li><a href=#durée-de-vie-des-sessions class="table-of-contents__link toc-highlight">Durée de vie des sessions</a><li><a href=#privilèges class="table-of-contents__link toc-highlight">Privilèges</a><li><a href=#exemple class="table-of-contents__link toc-highlight">Exemple</a><li><a href=#token-de-session-otp class="table-of-contents__link toc-highlight">Token de session (OTP)</a><ul><li><a href=#vue-densemble class="table-of-contents__link toc-highlight">Vue d’ensemble</a><li><a href=#traitement-de-lotp-dans-le-callback class="table-of-contents__link toc-highlight">Traitement de l'OTP dans le callback</a><li><a href=#scénario-avec-4dsid class="table-of-contents__link toc-highlight">Scénario avec $4DSID</a><li><a href=#scénario-avec-la-fonction-restore class="table-of-contents__link toc-highlight">Scénario avec la fonction <code>restore</code></a><li><a href=#exemple-de-validation-demail-avec-4dsid class="table-of-contents__link toc-highlight">Exemple de validation d'email avec $4DSID</a><li><a href=#contextes-pris-en-charge class="table-of-contents__link toc-highlight">Contextes pris en charge</a><li><a href=#durée-de-vie class="table-of-contents__link toc-highlight">Durée de vie</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Communauté</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://blog.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Blog</a><li class=footer__item><a href=https://discuss.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Forum</a><li class=footer__item><a href=https://facebook.com/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook</a><li class=footer__item><a href=https://x.com/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>X</a><li class=footer__item><a href=https://youtube.com/user/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>Youtube</a><li class=footer__item><a href=https://github.com/4D target=_blank rel="noopener noreferrer" class=footer__link-item>Github</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Support</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/4d/docs/releases/tag/latest target=_blank rel="noopener noreferrer" class=footer__link-item>Documentation download<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://doc.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Doc Center (Où tout a commencé)</a><li class=footer__item><a href=https://kb.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>Knowledgebase</a><li class=footer__item><a href=https://us.4d.com/product-download/Feature-Release target=_blank rel="noopener noreferrer" class=footer__link-item>Téléchargements</a><li class=footer__item><a href=https://us.4d.com/resources target=_blank rel="noopener noreferrer" class=footer__link-item>Resources</a><li class=footer__item><a href=https://us.4d.com/4d-technical-support target=_blank rel="noopener noreferrer" class=footer__link-item>Aide</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Société</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://us.4d.com/about-us target=_blank rel="noopener noreferrer" class=footer__link-item>A propos de 4D</a><li class=footer__item><a href=https://us.4d.com/contact-us target=_blank rel="noopener noreferrer" class=footer__link-item>Contacts</a><li class=footer__item><a href=https://us.4d.com/4d-around-the-world target=_blank rel="noopener noreferrer" class=footer__link-item>4D dans le monde</a><li class=footer__item><a href=https://us.4d.com/Careers target=_blank rel="noopener noreferrer" class=footer__link-item>Carrière</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 4D SAS - Tous droits réservés</div></div></div></footer></div>