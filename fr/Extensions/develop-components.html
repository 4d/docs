<!DOCTYPE html><html lang="fr"><head><meta name="docsearch:version" content="19 R6 BETA"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Composants de développement · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Un composant 4D est un ensemble de fonctions, méthodes et de formulaires 4D représentant une ou plusieurs fonctionnalité(s) qu’il est possible [d’installer et d&#x27;utiliser dans des applications 4D](/docs/fr/Concepts/components.html). Par exemple, vous pouvez développer un composant 4D de courrier électronique gérant tous les aspects de l’envoi, la réception et le stockage d’emails au sein des applications 4D."/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Composants de développement · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/index.html"/><meta property="og:description" content="Un composant 4D est un ensemble de fonctions, méthodes et de formulaires 4D représentant une ou plusieurs fonctionnalité(s) qu’il est possible [d’installer et d&#x27;utiliser dans des applications 4D](/docs/fr/Concepts/components.html). Par exemple, vous pouvez développer un composant 4D de courrier électronique gérant tous les aspects de l’envoi, la réception et le stockage d’emails au sein des applications 4D."/><meta property="og:image" content="https://4d.github.io/docs/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/img/logohome.png"/><link rel="shortcut icon" href="/docs/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/alpha/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-blocks-buttons.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/fr"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs" target="_self">v19 R6 BETA</a></li><li class=""><a href="https://developer.4d.com/docs/Rx" target="_self">v19 R5</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/Extensions/develop-components.html">English</a></li><li><a href="/docs/ja/Extensions/develop-components.html">日本語</a></li><li><a href="/docs/de/Extensions/develop-components.html">Deutsch</a></li><li><a href="/docs/es/Extensions/develop-components.html">Español</a></li><li><a href="/docs/pt/Extensions/develop-components.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Extensions</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Extensions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/Extensions/overview.html">Aperçu</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/fr/Extensions/develop-components.html">Composants de développement</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/Extensions/develop-plug-ins.html">Plug-ins de développement</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">4D View Pro<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/fr/ViewPro/getting-started.html">Prise en main</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ViewPro/configuring.html">Configuration des zones 4D View Pro</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ViewPro/formulas.html">Formules et fonctions</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ViewPro/method-list.html">Liste des méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/fr/ViewPro/advanced-programming.html">Programmation avancée avec Javascript</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/master/docs/Extensions/develop-components.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Composants de développement</h1></header><article><div><span><p>Un composant 4D est un ensemble de fonctions, méthodes et de formulaires 4D représentant une ou plusieurs fonctionnalité(s) qu’il est possible <a href="/docs/fr/Concepts/components.html">d’installer et d'utiliser dans des applications 4D</a>. Par exemple, vous pouvez développer un composant 4D de courrier électronique gérant tous les aspects de l’envoi, la réception et le stockage d’emails au sein des applications 4D.</p>
<p>Vous pouvez développer des composants 4D pour vos propres besoins et les garder privés. Vous pouvez également <a href="https://github.com/topics/4d-component">partager vos composants avec la communauté 4D</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="définitions"></a><a href="#définitions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Définitions</h2>
<ul>
<li><strong>Projet utilisé comme matrice</strong> : Projet 4D utilisé pour le développement du composant. C'est un projet standard, sans attribut spécifique. Il constitue un seul composant.</li>
<li><strong>Projet hôte :</strong> projet dans lequel un composant est installé et utilisé.</li>
<li><strong>Composant</strong> : Projet utilisé comme matrice, pouvant être compilé ou <a href="/docs/fr/Desktop/building.html#build-component">généré</a>, copié dans le dossier <a href="/docs/fr/Project/architecture.html"><code>Components</code></a> de l'application hôte et dont le contenu est utilisé dans l'application hôte.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="principes-de-base"></a><a href="#principes-de-base" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Principes de base</h2>
<p>La création et l’installation des composants 4D s’effectuent directement depuis 4D :</p>
<ul>
<li>Pour installer un composant, il suffit de copier les fichiers du composant dans le dossier <a href="/docs/fr/Project/architecture.html"><code>Components</code> du projet</a>. Vous pouvez utiliser des alias ou des raccourcis.</li>
<li>Un projet peut être à la fois &quot;matrice&quot; et &quot;hôte&quot;, c'est-à-dire qu'un projet utilisé comme matrice peut lui-même utiliser un ou plusieurs composants. En revanche, un composant ne peut pas lui-même utiliser de &quot;sous-composants&quot;.</li>
<li>Un composant peut appeler la plupart des éléments 4D : des classes, des fonctions, des méthodes projet, des formulaires projet, des barres de menus, des listes à choix multiples, etc. Il ne peut pas appeler des méthodes base et des triggers.</li>
<li>Il n’est pas possible d’exploiter le datastore, des tables standard ou des fichiers de données dans les composants 4D. En revanche, un composant peut créer et/ou utiliser des tables, des champs et des fichiers de données via les mécanismes des bases externes. Les bases externes sont des bases 4D indépendantes manipulées via les commandes SQL.</li>
<li>Un projet hôte fonctionnant en mode interprété peut utiliser des composants interprétés ou compilés. Un projet hôte fonctionnant en mode compilé ne peut pas utiliser de composants interprétés. Dans ce cas, seuls les composants compilés peuvent être utilisés.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="portée-des-commandes-du-langage"></a><a href="#portée-des-commandes-du-langage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Portée des commandes du langage</h2>
<p>Hormis les <a href="#unusable-commands">Commandes non utilisables</a>, un composant peut utiliser toute commande du langage 4D.</p>
<p>Lorsqu’elles sont appelées depuis un composant, les commandes s’exécutent dans le contexte du composant, à l’exception de la commande <code>EXECUTE METHOD</code> ou <code>EXECUTE FORMULA</code> qui utilise le contexte de la méthode désignée par la commande. A noter également que les commandes de lecture du thème “Utilisateurs et groupes” sont utilisables depuis un composant mais lisent les utilisateurs et les groupes du projet hôte (un composant n’a pas d’utilisateurs et groupes propres).</p>
<p>Les commandes <code>EXECUTE METHOD</code> et <code>Get database parameter</code> constituent aussi une exception à ce principe : leur portée est globale à l'application. Lorsque ces commandes sont appelées depuis un composant, elles s’appliquent au projet d'application hôte.</p>
<p>Par ailleurs, des dispositions spécifiques sont définies pour les commandes <code>Structure file</code> et <code>Get 4D folder</code> lorsqu’elles sont utilisées dans le cadre des composants.</p>
<p>La commande <code>COMPONENT LIST</code> permet de connaître la liste des composants chargés par le projet hôte.</p>
<h3><a class="anchor" aria-hidden="true" id="commandes-non-utilisables"></a><a href="#commandes-non-utilisables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Commandes non utilisables</h3>
<p>Les commandes suivantes ne sont pas compatibles avec une utilisation dans le cadre d’un composant car elles modifient le fichier de structure — ouvert en lecture. Leur exécution dans un composant provoque l’erreur -10511, “La commande NomCommande ne peut pas être appelée depuis un composant” :</p>
<ul>
<li><code>ON EVENT CALL</code></li>
<li><code>Method called on event</code></li>
<li><code>SET PICTURE TO LIBRARY</code></li>
<li><code>REMOVE PICTURE FROM LIBRARY</code></li>
<li><code>SAVE LIST</code></li>
<li><code>ARRAY TO LIST</code></li>
<li><code>EDIT FORM</code></li>
<li><code>CREATE USER FORM</code></li>
<li><code>DELETE USER FORM</code></li>
<li><code>CHANGE PASSWORD</code></li>
<li><code>EDIT ACCESS</code></li>
<li><code>Set group properties</code></li>
<li><code>Set user properties</code></li>
<li><code>DELETE USER</code></li>
<li><code>CHANGE LICENSES</code></li>
<li><code>BLOB TO USERS</code></li>
<li><code>SET PLUGIN ACCESS</code></li>
</ul>
<p><strong>Notes :</strong></p>
<ul>
<li>La commande <code>Table du formulaire courant</code> retourne <code>Nil</code> lorsqu’elle est appelée dans le contexte d’un formulaire projet. Par conséquent, elle ne peut pas être utilisée dans un composant.</li>
<li>Les commandes SQL de définition de données (<code>CREATE TABLE</code>, <code>DROP TABLE</code>, etc.) ne peuvent pas être utilisées dans les composants. Elles sont néanmoins prises en charge avec des bases de données externes (voir la commande SQL <code>CREATE DATABASE</code>).</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="partage-des-méthodes-projet"></a><a href="#partage-des-méthodes-projet" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Partage des méthodes projet</h2>
<p>Toutes les méthodes projet d’un projet utilisé comme matrice sont par définition incluses dans le composant (le projet est le composant), ce qui signifie qu’elles peuvent être appelées et exécutées dans le composant.</p>
<p>En revanche, par défaut ces méthodes projet ne seront ni visibles ni appelables par le projet hôte. Dans le projet utilisé comme matrice, vous devez désigner explicitement les méthodes que vous souhaitez partager avec le projet hôte en cochant la case <strong>Partagée par les composants et le projet hôte</strong> dans la boîte de dialogue des propriétés de la méthode :</p>
<p><img src="/docs/assets/en/Concepts/shared-methods.png" alt=""></p>
<p>Shared project methods can be called in the code of the host project (but they cannot be modified in the Code Editor of the host project). Ces méthodes constituent les <strong>points d’entrée</strong> du composant.</p>
<p>A l’inverse, pour des raisons de sécurité, par défaut un composant ne peut pas exécuter de méthode projet appartenant au projet hôte. Dans certains cas, vous pourrez avoir besoin d’autoriser un composant à accéder à des méthodes projet de votre projet hôte. In certain cases, you may need to allow a component to access the project methods of your host project.</p>
<p><img src="/docs/assets/en/Concepts/pict516563.en.png" alt=""></p>
<p>Une fois que les méthodes projets hôtes sont disponibles pour les composants, vous pouvez exécuter une méthode hôte depuis l'intérieur d'un composant à l'aide des commandes <code>EXECUTE FORMULA</code> ou <code>EXECUTE METHOD</code>. Par exemple :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// Méthode hôte</span>
<span class="hljs-function">component_method</span>(<span class="hljs-string">"host_method_name"</span>)
</code></pre>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// component_method</span>
<span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$1</span>)
<span class="hljs-function"> EXECUTE METHOD</span>(<span class="hljs-variable">$1</span>)
</code></pre>
<blockquote>
<p>Une base hôte interprétée qui contient des composants interprétés peut être compilée ou soumise à un contrôle syntaxique si elle n'appelle pas de méthodes du composant interprété. Dans le cas contraire, une boîte de dialogue d'avertissement apparaît lorsque vous tentez de lancer la compilation ou un contrôle syntaxique et il ne sera pas possible d'effectuer l'opération.<br>
A noter qu'une méthode interprétée peut appeler une méthode compilée, mais pas l'inverse, sauf si vous utilisez les commandes <code>EXECUTE METHOD</code> et <code>EXECUTE FORMULA</code>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="partage-des-classes-et-des-fonctions"></a><a href="#partage-des-classes-et-des-fonctions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Partage des classes et des fonctions</h2>
<p>Si vous souhaitez que les classes et fonctions de vos composants soient exposées dans les projets hôtes, vous devez déclarer un namespace. By default, component classes and functions cannot be called from the 4D Code Editor of the host project. Additionally, you can control how component classes and functions are suggested in the host Code Editor.</p>
<h3><a class="anchor" aria-hidden="true" id="déclaration-du-namespace"></a><a href="#déclaration-du-namespace" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Déclaration du namespace</h3>
<p>Pour permettre aux classes et aux fonctions de votre composant d'être exposées dans les projets hôtes, saisissez une valeur dans <a href="/docs/fr/settings/general.html#component-namespace-in-the-class-store"><strong>Component namespace in the class store</strong> dans la page Général</a> des Propriétés du projet utilisé comme matrice. Par défaut, l'espace est vide : les classes du composant ne sont pas disponibles en dehors du contexte du composant.</p>
<p><img src="/docs/assets/en/settings/namespace.png" alt=""></p>
<blockquote>
<p>Un <em>namespace</em> garantit qu'aucun conflit n'émerge lorsqu'un projet hôte utilise différents composants dont les classes ou les fonctions ont des noms identiques. Un namespace doit être conforme aux <a href="/docs/fr/Concepts/identifiers.html#object-properties">règles de dénomination des propriétés</a>.</p>
</blockquote>
<p>Lorsque vous saisissez une valeur, vous déclarez que les classes et les fonctions du composant seront disponibles dans <a href="/docs/fr/Concepts/classes.html#cs">user class store (<strong>cs</strong>)</a> du code du projet hôte, par le biais du namespace <code>cs.&lt;value&gt;</code>. Par exemple, si vous entrez &quot;eGeometry&quot; comme namespace, en supposant que vous avez créé une classe <code>Rectangle</code> contenant une fonction <code>getArea()</code>, une fois votre projet installé comme composant, le développeur du projet hôte peut écrire :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">//dans le projet hôte</span><span class="hljs-keyword">
var</span> <span class="hljs-variable">$rect</span>: cs.eGeometry.Rectangle 
<span class="hljs-variable">$rect</span>:=cs.eGeometry.Rectangle.<span class="hljs-function">new</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>)
<span class="hljs-variable">$area</span>:=<span class="hljs-variable">$rect</span>.<span class="hljs-function">getArea</span>()
</code></pre>
<p>Bien entendu, il est recommandé d'utiliser un nom distinctif pour éviter tout conflit. Si une classe utilisateur portant le même nom qu'un composant existe déjà dans le projet, la classe utilisateur est prise en compte et les classes du composant sont ignorées.</p>
<p>Les classes ORDA d'un composant ne sont pas disponibles dans le projet hôte. Par exemple, s'il existe une dataclass nommée Employees dans votre composant, vous ne pourrez pas utiliser une classe &quot;cs.Mycomponent.Employee&quot; dans le projet hôte.</p>
<h3><a class="anchor" aria-hidden="true" id="classes-cachées"></a><a href="#classes-cachées" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Classes cachées</h3>
<p>Comme dans tout projet, vous pouvez créer des classes et des fonctions cachées dans le composant en préfixant les noms par un caractère de soulignement ou (&quot;_&quot;). Lorsqu'un <a href="#declaring-the-component-namespace">namespace est défini</a>, les classes et fonctions cachées du composant n'apparaîtront pas comme des suggestions lors de l'utilisation de la complétion de code.</p>
<p>Notez cependant qu'elles peuvent toujours être utilisées si vous connaissez leurs noms. Par exemple, la syntaxe suivante est valable même si la classe <code>_Rectangle</code> est cachée :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$rect</span>:=cs.eGeometry._Rectangle.<span class="hljs-function">new</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>)
</code></pre>
<blockquote>
<p>Les fonctions non cachées à l'intérieur d'une classe cachée apparaissent comme des suggestions lorsque vous utilisez la complétion de code avec une classe qui en <a href="/docs/fr/Concepts/classes.html#inheritance">hérite</a>. Par exemple, si un composant possède une classe <code>Teacher</code> qui hérite d'une classe <code>_Person</code>, la complétion de code pour <code>Teacher</code> suggère des fonctions non cachées de <code>_Person</code>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="complétion-de-code-pour-les-composants-compilés"></a><a href="#complétion-de-code-pour-les-composants-compilés" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Complétion de code pour les composants compilés</h2>
<p>Pour faciliter l'utilisation de votre composant par les développeurs, vous pouvez cocher l'option <a href="/docs/fr/settings/general.html#component-namespace-in-the-class-store"><strong>Generate syntax file for code completion when compiled</strong> dans la page Général</a> des Proriétés du projet utilisé comme matrice.</p>
<p>Un fichier de syntaxe (format JSON) est alors automatiquement créé lors de la phase de compilation, complété par la syntaxe des classes, fonctions et <a href="#sharing-of-project-methods">méthodes 'exposed'</a> de votre composant, et placé dans le dossier \Resources\en.lproj du projet du composant. 4D utilise le contenu de ce fichier syntaxique pour générer une aide contextuelle dans l'éditeur de code, telle que la complétion de code et la syntaxe des fonctions :</p>
<p><img src="/docs/assets/en/settings/syntax-code-completion-2.png" alt=""> <img src="/docs/assets/en/settings/syntax-code-completion-1.png" alt=""></p>
<p>Si vous ne saisissez pas de <a href="#declaring-the-component-namespace">namespace</a>, les ressources des classes et des méthodes 'exposed' ne sont pas générées, même si l'option de fichier de syntaxe est cochée.</p>
<h2><a class="anchor" aria-hidden="true" id="passage-de-variables"></a><a href="#passage-de-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Passage de variables</h2>
<p>Les composants et les projets hôtes ne partagent pas de variables locales, process ou interprocess. The local, process and interprocess variables are not shared between components and host projects.</p>
<p>Exemple utilisant un tableau :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">//Dans le projet hôte :</span>
<span class="hljs-function">    ARRAY INTEGER</span>(MyArray;<span class="hljs-number">10</span>)
<span class="hljs-function">    AMethod</span>(-&gt;MyArray)

<span class="hljs-comment">//Dans le composant, la méthode projet UneMéthode contient : </span>
<span class="hljs-function">     APPEND TO ARRAY</span>(<span class="hljs-variable">$1</span>-&gt;;<span class="hljs-number">2</span>)
</code></pre>
<p>Exemples utilisant des variables :</p>
<pre><code class="hljs css language-4d"><span class="hljs-function">C_TEXT</span>(myvariable)
<span class="hljs-function">component_method1</span>(-&gt;myvariable)
</code></pre>
<pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$p</span>)
<span class="hljs-variable">$p</span>:=<span class="hljs-function">component_method2</span>(...)
</code></pre>
<p>Sans pointeur, un composant peut toujours accéder à la valeur d'une variable de base hôte (mais pas à la variable elle-même) et vice versa :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">//Dans la base hôte</span>
<span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$input_t</span>)
<span class="hljs-variable">$input_t</span>:=<span class="hljs-string">"DoSomething"</span>
<span class="hljs-function">component_method</span>(<span class="hljs-variable">$input_t</span>)
<span class="hljs-comment">// component_method obtient "DoSomething" in $1 (mais pas la variable $input_t)</span>
</code></pre>
<p>L’utilisation de pointeurs pour faire communiquer les composants et le projet hôte nécessite de prendre en compte les spécificités suivantes :</p>
<ul>
<li><p>La commande <code>Get pointer</code> ne retournera pas un pointeur vers une variable du projet hôte si elle est appelée depuis un composant et inversement.</p></li>
<li><p>L’usage de pointeurs dans ce cas doit respecter le principe suivant : l’interpréteur peut dépointer un pointeur construit en mode compilé mais à l’inverse, en mode compilé, il n’est pas possible de dépointer un pointeur construit en mode interprété. L’usage de pointeurs dans ce cas doit respecter le principe suivant : l’interpréteur peut dépointer un pointeur construit en mode compilé mais à l’inverse, en mode compilé, il n’est pas possible de dépointer un pointeur construit en mode interprété. Illustrons ce principe par l’exemple suivant : soient deux composants, C (compilé) et I (interprété) installés dans le même projet hôte.</p></li>
<li><p>Si le composant C définit la variable <code>mavarC</code>, le composant I peut accéder à la valeur de cette variable en utilisant le pointeur <code>-&gt;mavarC</code>.</p></li>
<li><p>Si le composant I définit la variable <code>mavarI</code>, le composant C ne peut pas accéder à cette variable en utilisant le pointeur <code>-&gt;mavarI</code>. Cette syntaxe provoque une erreur d’exécution.</p></li>
<li><p>La comparaison de pointeurs via la commande <code>RESOLVE POINTER</code> est déconseillée avec les composants car le principe de cloisonnement des variables autorise la coexistence de variables de même nom mais au contenu radicalement différent dans un composant et le projet hôte (ou un autre composant). Le type de la variable peut même être différent dans les deux contextes. Si les pointeurs <code>monptr1</code> et <code>monptr2</code> pointent chacun sur une variable, la comparaison suivante produira un résultat erroné :</p></li>
</ul>
<pre><code class="hljs css language-4d"><span class="hljs-function">     RESOLVE POINTER</span>(monptr1;vNomVar1;vnumtable1;vnumchamp1)
<span class="hljs-function">      RESOLVE POINTER</span>(monptr2;vNomVar2;vnumtable2;vnumchamp2)<span class="hljs-keyword">
      If</span>(vNomVar1=vNomVar2)
       <span class="hljs-comment">//Ce test retourne Vrai alors que les variables sont différentes</span>
</code></pre>
<p>Dans ce cas, il est nécessaire d’utiliser la comparaison de pointeurs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">     If</span>(monptr1=monptr2) <span class="hljs-comment">//Ce test retourne Faux</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="gestion-des-erreurs"></a><a href="#gestion-des-erreurs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Gestion des erreurs</h2>
<p>Une <a href="/docs/fr/Concepts/error-handling.html">méthode de gestion d'erreurs</a> installée par la commande <code>ON ERR CALL</code> s'applique à l'application en cours d'exécution uniquement. En cas d'erreur générée par un composant, la méthode d'appel sur erreur <code>ON ERR CALL</code> du prpjet hôte n'est pas appelée, et inversement.</p>
<h2><a class="anchor" aria-hidden="true" id="accès-aux-tables-du-projet-hôte"></a><a href="#accès-aux-tables-du-projet-hôte" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Accès aux tables du projet hôte</h2>
<p>Bien que les composants ne puissent pas utiliser de tables, les pointeurs permettent au projet hôte et au composant de communiquer. Par exemple, voici une méthode pouvant être appelée depuis un composant :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// appeler une méthode composant</span>
<span class="hljs-function">methCreateRec</span>(-&gt;[PERSONNES];-&gt;[PERSONNES]Nom;<span class="hljs-string">"Julie Andrews"</span>)
</code></pre>
<p>Dans le composant, le code de la méthode <code>methCreateRec</code> :</p>
<pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$1</span>) <span class="hljs-comment">//Pointeur vers une table du projet hôte</span>
<span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$2</span>) <span class="hljs-comment">//Pointeur vers un champ du projet hôte</span>
<span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$3</span>) <span class="hljs-comment">// Valeur à insérer</span>

<span class="hljs-variable">$tablepointer</span>:=<span class="hljs-variable">$1</span>
<span class="hljs-variable">$fieldpointer</span>:=<span class="hljs-variable">$2</span>
<span class="hljs-function">CREATE RECORD</span>(<span class="hljs-variable">$tablepointer</span>-&gt;)

<span class="hljs-variable">$fieldpointer</span>-&gt;:=<span class="hljs-variable">$3</span>
<span class="hljs-function">SAVE RECORD</span>(<span class="hljs-variable">$tablepointer</span>-&gt;)
</code></pre>
<blockquote>
<p>Dans le contexte d'un composant, 4D suppose qu'une référence à un formulaire table est une référence au formulaire table hôte (car les composants ne peuvent pas avoir de tables)</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="utilisation-de-tables-et-de-champs"></a><a href="#utilisation-de-tables-et-de-champs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilisation de tables et de champs</h2>
<p>Un composant ne peut pas utiliser les tables et les champs définis dans la structure 4D du projet utilisé comme matrice. En revanche, il peut créer et utiliser des bases externes, et donc utiliser des tables et des champs en fonction de ses besoins. Les bases externes sont créées et gérées via le langage SQL. En revanche, il peut créer et utiliser des bases externes, et donc utiliser des tables et des champs en fonction de ses besoins. Utiliser une base externe signifie désigner temporairement cette base comme base courante, c’est-à-dire comme base cible des requêtes SQL exécutées par 4D. Les bases externes sont créées à l'aide de la commande SQL <code>CREATE DATABASE</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="exemple"></a><a href="#exemple" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h3>
<p>Le code suivant est inclus dans un composant et effectue trois actions élémentaires avec une base de données externe :</p>
<ul>
<li>création de la base de données externe si elle n'existe pas déjà,</li>
<li>ajout de données dans la base de données externe,</li>
<li>lecture de données depuis la base de données externe.</li>
</ul>
<p>Création de la base de données externe :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">&lt;&gt;MyDatabase</span>:=Get 4D folder+<span class="hljs-string">"\MyDB"</span> <span class="hljs-comment">// (Windows) stocke les données dans un répertoire autorisé</span><span class="hljs-keyword">
 Begin SQL</span>
        CREATE DATABASE IF NOT EXISTS DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];
        USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];
        CREATE TABLE IF NOT EXISTS KEEPIT
        (
        ID INT32 PRIMARY KEY,
        kind VARCHAR,
        name VARCHAR,
        code TEXT,
        sort_order INT32
        );

<span class="hljs-function">        CREATE UNIQUE INDEX id_index ON KEEPIT </span>(ID);

        USE DATABASE SQL_INTERNAL;<span class="hljs-keyword">

 End SQL</span>
</code></pre>
<p>Ecriture dans la base de données externe :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$Ptr_1</span>:=<span class="hljs-variable">$2 </span><span class="hljs-comment">// récupère les données à partir du projet hôte via des pointeurs</span>
 <span class="hljs-variable">$Ptr_2</span>:=<span class="hljs-variable">$3</span>
 <span class="hljs-variable">$Ptr_3</span>:=<span class="hljs-variable">$4</span>
 <span class="hljs-variable">$Ptr_4</span>:=<span class="hljs-variable">$5</span>
 <span class="hljs-variable">$Ptr_5</span>:=<span class="hljs-variable">$6</span><span class="hljs-keyword">
 Begin SQL</span>

        USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];

        INSERT INTO KEEPIT
        (ID, kind, name, code, sort_order)
        VALUES
        (:[<span class="hljs-variable">$Ptr_1</span>], :[<span class="hljs-variable">$Ptr_2</span>], :[<span class="hljs-variable">$Ptr_3</span>], :[<span class="hljs-variable">$Ptr_4</span>], :[<span class="hljs-variable">$Ptr_5</span>]);

        USE DATABASE SQL_INTERNAL;<span class="hljs-keyword">


 End SQL</span>
</code></pre>
<p>Lecture dans une base de données externe :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$Ptr_1</span>:=<span class="hljs-variable">$2 </span><span class="hljs-comment">// accède aux données du projet hôte via des pointeurs</span>
 <span class="hljs-variable">$Ptr_2</span>:=<span class="hljs-variable">$3</span>
 <span class="hljs-variable">$Ptr_3</span>:=<span class="hljs-variable">$4</span>
 <span class="hljs-variable">$Ptr_4</span>:=<span class="hljs-variable">$5</span>
 <span class="hljs-variable">$Ptr_5</span>:=<span class="hljs-variable">$6</span><span class="hljs-keyword">

 Begin SQL</span>

    USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];

    SELECT ALL ID, kind, name, code, sort_order
    FROM KEEPIT
    INTO :<span class="hljs-variable">$Ptr_1</span>, :<span class="hljs-variable">$Ptr_2</span>, :<span class="hljs-variable">$Ptr_3</span>, :<span class="hljs-variable">$Ptr_4</span>, :<span class="hljs-variable">$Ptr_5</span>;

    USE DATABASE SQL_INTERNAL;<span class="hljs-keyword">

 End SQL</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="utilisation-de-formulaires"></a><a href="#utilisation-de-formulaires" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilisation de formulaires</h2>
<ul>
<li>Seuls les &quot;formulaires projet&quot; (formulaires non associés à une table en particulier) peuvent être exploités directement dans un composant. Seuls les &quot;formulaires projet&quot; (formulaires non associés à une table en particulier) peuvent être exploités directement dans un composant.</li>
<li>Un composant peut faire appel à des formulaires table du projet hôte. A noter qu’il est nécessaire dans ce cas d’utiliser des pointeurs plutôt que des noms de table entre [] pour désigner les formulaires dans le code du composant.</li>
</ul>
<blockquote>
<p>Si un composant utilise la commande <code>ADD RECORD</code>, le formulaire Entrée courant du projet hôte sera affiché, dans le contexte du projet hôte. Par conséquent, si le formulaire comporte des variables, le composant n’y aura pas accès.</p>
</blockquote>
<ul>
<li>Vous pouvez publier des formulaires de composants comme sous-formulaires dans les projets hôtes. Avec ce principe, vous pouvez notamment développer des composants proposant des objets graphiques. Par exemple, les Widgets proposés par 4D sont basés sur l’emploi de sous-formulaires en composants.</li>
</ul>
<blockquote>
<p>Dans le contexte d'un composant, tout formulaire projet référencé doit appartenir au composant. Par exemple, à l'intérieur d'un composant, le fait de référencer un formulaire projet hôte à l'aide de <code>DIALOG</code> ou de <code>Open form window</code> déclenchera une erreur.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="utilisation-de-ressources"></a><a href="#utilisation-de-ressources" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilisation de ressources</h2>
<p>Les composants peuvent utiliser des ressources situées dans le dossier Ressources du composant.</p>
<p>Les mécanismes automatiques sont opérationnels : les fichiers XLIFF présents dans le dossier Resources d’un composant seront chargés par ce composant.</p>
<p>Dans un projet hôte contenant un ou plusieurs composants, chaque composant ainsi que les projets hôtes ont leur propre «chaîne de ressources» Dans un projet hôte contenant un ou plusieurs composants, chaque composant ainsi que les projets hôtes ont leur propre «chaîne de ressources» Les ressources sont divisées entre les différents projets : il n'est pas possible d'accéder aux ressources du composant A depuis le composant B ou depuis le projet hôte.</p>
<h2><a class="anchor" aria-hidden="true" id="exécution-du-code-dinitialisation"></a><a href="#exécution-du-code-dinitialisation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exécution du code d'initialisation</h2>
<p>Un composant peut exécuter automatiquement du code 4D lors de l'ouverture ou de la fermeture de la base hôte, par exemple pour charger et/ou sauvegarder les préférences ou les états utilisateur liés au fonctionnement de la base hôte.</p>
<p>L'exécution du code d'initialisation ou de fermeture se fait au moyen de la méthode base <code>On Host Database Event</code>.</p>
<blockquote>
<p>Pour des raisons de sécurité, vous devez autoriser explicitement l'exécution de la méthode base<code>On Host Database Event</code> dans la base hôte afin de pouvoir l'appeler. Pour des raisons de sécurité, vous devez autoriser explicitement l'exécution de la méthode base<code>On Host Database Event</code> dans la base hôte afin de pouvoir l'appeler.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="protection-des-composants--la-compilation"></a><a href="#protection-des-composants--la-compilation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protection des composants : la compilation</h2>
<p>Par défaut, tout le code d’un projet utilisé comme matrice installé comme composant est virtuellement visible depuis le projet hôte. En particulier :</p>
<ul>
<li>Les méthodes projet partagées sont accessibles dans la Page Méthodes de l’Explorateur et peuvent être appelées dans les méthodes du projet hôte. Leur contenu peut être sélectionné et copié dans la zone de prévisualisation de l’Explorateur. Elles peuvent également être visualisées dans le débogueur. However, it's not possible to open them in the Code Editor or modify them.</li>
<li>Les autres méthodes projet du projet utilisé comme matrice n’apparaissent pas dans l’Explorateur mais peuvent également être visualisées dans le débogueur du projet hôte.</li>
<li>Les classes et fonctions non cachées peuvent être visualisées dans le débogueur <a href="#declaring-the-component-namespace">si un namespace est déclaré</a>.</li>
</ul>
<p>Pour assurer la protection du code d'un composant, <a href="/docs/fr/Desktop/building.html#build-component">compilez et générerez</a> simplement le projet utilisé comme matrice et fournissez-le sous forme de fichier .4dz. Lorsqu’un projet compilé utilisé comme matrice est installé comme composant :</p>
<ul>
<li>Les méthodes, classes et fonctions du projet partagé peuvent être appelées dans les méthodes du projet hôte. Les méthodes du projet partagé sont également visibles sur la page Méthodes de l'Explorateur. En revanche, leur contenu n’apparaît pas dans la zone de prévisualisation ni dans le débogueur.</li>
<li>Les autres méthodes projet du projet utilisé comme matrice n’apparaissent jamais.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="partage-des-composants"></a><a href="#partage-des-composants" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Partage des composants</h2>
<p>We encourage you to support the 4D developer community by sharing your components, preferably on the <a href="https://github.com/topics/4d-component">GitHub platform</a>. We recommend that you use the <strong><code>4d-component</code></strong> topic to be correctly referenced.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/fr/Extensions/overview.html"><span class="arrow-prev">← </span><span>Aperçu</span></a><a class="docs-next button" href="/docs/fr/Extensions/develop-plug-ins.html"><span>Plug-ins de développement</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#définitions">Définitions</a></li><li><a href="#principes-de-base">Principes de base</a></li><li><a href="#portée-des-commandes-du-langage">Portée des commandes du langage</a><ul class="toc-headings"><li><a href="#commandes-non-utilisables">Commandes non utilisables</a></li></ul></li><li><a href="#partage-des-méthodes-projet">Partage des méthodes projet</a></li><li><a href="#partage-des-classes-et-des-fonctions">Partage des classes et des fonctions</a><ul class="toc-headings"><li><a href="#déclaration-du-namespace">Déclaration du namespace</a></li><li><a href="#classes-cachées">Classes cachées</a></li></ul></li><li><a href="#complétion-de-code-pour-les-composants-compilés">Complétion de code pour les composants compilés</a></li><li><a href="#passage-de-variables">Passage de variables</a></li><li><a href="#gestion-des-erreurs">Gestion des erreurs</a></li><li><a href="#accès-aux-tables-du-projet-hôte">Accès aux tables du projet hôte</a></li><li><a href="#utilisation-de-tables-et-de-champs">Utilisation de tables et de champs</a><ul class="toc-headings"><li><a href="#exemple">Exemple</a></li></ul></li><li><a href="#utilisation-de-formulaires">Utilisation de formulaires</a></li><li><a href="#utilisation-de-ressources">Utilisation de ressources</a></li><li><a href="#exécution-du-code-dinitialisation">Exécution du code d'initialisation</a></li><li><a href="#protection-des-composants--la-compilation">Protection des composants : la compilation</a></li><li><a href="#partage-des-composants">Partage des composants</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'OJ04C0M3CU',
                apiKey: '5f22ebbb9382abafeadc3e86ca47d4af',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:fr","version:19 R6 BETA"]}
              });
            </script></body></html>