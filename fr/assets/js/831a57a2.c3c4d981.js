"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[79480],{603905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>k});var n=a(667294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},m=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=s(a),k=l,N=u["".concat(p,".").concat(k)]||u[k]||d[k]||r;return a?n.createElement(N,i(i({ref:t},m),{},{components:a})):n.createElement(N,i({ref:t},m))}));function k(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var s=2;s<r;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},209545:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>p,toc:()=>m});a(667294);var n=a(603905);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}const i={id:"EntityClass",title:"Entity"},o=void 0,p={unversionedId:"API/EntityClass",id:"version-20-R5/API/EntityClass",title:"Entity",description:"An entity is an instance of a Dataclass, like a record of the table matching the dataclass in its associated datastore. Elle contient les m\xeames attributs que la dataclass ainsi que les valeurs des donn\xe9es et des propri\xe9t\xe9s et fonctions sp\xe9cifiques.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R5/API/EntityClass.md",sourceDirName:"API",slug:"/API/EntityClass",permalink:"/docs/fr/API/EntityClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FEntityClass.md%20(20-R5)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R5",frontMatter:{id:"EntityClass",title:"Entity"},sidebar:"docs",previous:{title:"Email",permalink:"/docs/fr/API/EmailObjectClass"},next:{title:"EntitySelection",permalink:"/docs/fr/API/EntitySelectionClass"}},s={},m=[{value:"Sommaire",id:"sommaire",level:3},{value:".<em>attributeName</em>",id:"attributename",level:2},{value:"Description",id:"description",level:4},{value:"Exemple",id:"exemple",level:4},{value:".clone()",id:"clone",level:2},{value:"Description",id:"description-1",level:4},{value:"Exemple",id:"exemple-1",level:4},{value:".diff()",id:"diff",level:2},{value:"Description",id:"description-2",level:4},{value:"Exemple 1",id:"exemple-1-1",level:4},{value:"Exemple 2",id:"exemple-2",level:4},{value:".drop()",id:"drop",level:2},{value:"Description",id:"description-3",level:4},{value:"Exemple 1",id:"exemple-1-2",level:4},{value:"Exemple 2",id:"exemple-2-1",level:4},{value:".first()",id:"first",level:2},{value:"Description",id:"description-4",level:4},{value:"Exemple",id:"exemple-3",level:4},{value:".fromObject()",id:"fromobject",level:2},{value:"Description",id:"description-5",level:4},{value:"Exemple",id:"exemple-4",level:4},{value:".getDataClass()",id:"getdataclass",level:2},{value:"Description",id:"description-6",level:4},{value:"Exemple",id:"exemple-5",level:4},{value:".getKey()",id:"getkey",level:2},{value:"Description",id:"description-7",level:4},{value:"Exemple",id:"exemple-6",level:4},{value:".getRemoteContextAttributes()",id:"getremotecontextattributes",level:2},{value:"Description",id:"description-8",level:4},{value:"Exemple",id:"exemple-7",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement",level:4},{value:".getSelection()",id:"getselection",level:2},{value:"Description",id:"description-9",level:4},{value:"Exemple",id:"exemple-8",level:4},{value:".getStamp()",id:"getstamp",level:2},{value:"Description",id:"description-10",level:4},{value:"Exemple",id:"exemple-9",level:4},{value:".indexOf()",id:"indexof",level:2},{value:"Description",id:"description-11",level:4},{value:"Exemple",id:"exemple-10",level:4},{value:".isNew()",id:"isnew",level:2},{value:"Description",id:"description-12",level:4},{value:"Exemple",id:"exemple-11",level:4},{value:".last()",id:"last",level:2},{value:"Description",id:"description-13",level:4},{value:"Exemple",id:"exemple-12",level:4},{value:".lock()",id:"lock",level:2},{value:"Description",id:"description-14",level:4},{value:"Exemple 1",id:"exemple-1-3",level:4},{value:"Exemple 2",id:"exemple-2-2",level:4},{value:".next()",id:"next",level:2},{value:"Description",id:"description-15",level:4},{value:"Exemple",id:"exemple-13",level:4},{value:".previous()",id:"previous",level:2},{value:"Description",id:"description-16",level:4},{value:"Exemple",id:"exemple-14",level:4},{value:".reload()",id:"reload",level:2},{value:"Description",id:"description-17",level:4},{value:"Exemple",id:"exemple-15",level:4},{value:".save()",id:"save",level:2},{value:"Description",id:"description-18",level:4},{value:"status et statusText",id:"status-et-statustext",level:5},{value:"Exemple 1",id:"exemple-1-4",level:4},{value:"Exemple 2",id:"exemple-2-3",level:4},{value:"Exemple 3",id:"exemple-3-1",level:4},{value:".toObject()",id:"toobject",level:2},{value:"Description",id:"description-19",level:4},{value:"Exemple 1",id:"exemple-1-5",level:4},{value:"Exemple 2",id:"exemple-2-4",level:4},{value:"Exemple 3",id:"exemple-3-2",level:4},{value:"Exemple 4",id:"exemple-4-1",level:4},{value:"Exemple 5",id:"exemple-5-1",level:4},{value:"Exemple 6",id:"exemple-6-1",level:4},{value:"Exemple 7",id:"exemple-7-1",level:4},{value:".touched( )",id:"touched-",level:2},{value:"Description",id:"description-20",level:4},{value:"Exemple",id:"exemple-16",level:4},{value:".touchedAttributes( )",id:"touchedattributes-",level:2},{value:"Description",id:"description-21",level:4},{value:"Exemple 1",id:"exemple-1-6",level:4},{value:"Exemple 2",id:"exemple-2-5",level:4},{value:".unlock()",id:"unlock",level:2},{value:"Description",id:"description-22",level:4},{value:"Exemple",id:"exemple-17",level:4}],d={toc:m};function u(e){var{components:t}=e,i=r(e,["components"]);return(0,n.kt)("wrapper",l({},d,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"An ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/dsmapping#entity"}),"entity")," is an instance of a ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/dsmapping#dataclass"}),"Dataclass"),", like a record of the table matching the dataclass in its associated datastore. Elle contient les m\xeames attributs que la dataclass ainsi que les valeurs des donn\xe9es et des propri\xe9t\xe9s et fonctions sp\xe9cifiques."),(0,n.kt)("h3",l({},{id:"sommaire"}),"Sommaire"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#attributename"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : any"),(0,n.kt)("br",null),"stocke la valeur de l'attribut pour l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#clone"}),(0,n.kt)("strong",{parentName:"a"},".clone()")," : 4D.Entity"),(0,n.kt)("br",null),"creates in memory a new entity referencing the same record as the original entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#diff"}),(0,n.kt)("strong",{parentName:"a"},".diff"),"( ",(0,n.kt)("em",{parentName:"a"},"entityToCompare")," : 4D.Entity { ; ",(0,n.kt)("em",{parentName:"a"},"attributesToCompare")," : Collection } ) : Collection"),(0,n.kt)("br",null),"compares the contents of two entities and returns their differences")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#drop"}),(0,n.kt)("strong",{parentName:"a"},".drop"),"( {",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer} ) : Object"),(0,n.kt)("br",null),"deletes the data contained in the entity from the datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#first"}),(0,n.kt)("strong",{parentName:"a"},".first()"),": 4D.Entity"),(0,n.kt)("br",null),"returns a reference to the entity in first position of the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#fromobject"}),(0,n.kt)("strong",{parentName:"a"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filler")," : Object )"),(0,n.kt)("br",null),"fills an entity with the ",(0,n.kt)("em",{parentName:"td"},"filler")," content")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getdataclass"}),(0,n.kt)("strong",{parentName:"a"},".getDataClass()")," : 4D.DataClass"),(0,n.kt)("br",null),"returns the dataclass of the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getkey"}),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Integer"),(0,n.kt)("br",null),"returns the primary key value of the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getremotecontextattributes"}),(0,n.kt)("strong",{parentName:"a"},".getRemoteContextAttributes()")," : Text"),(0,n.kt)("br",null),"returns information about the optimization context used by the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getselection"}),(0,n.kt)("strong",{parentName:"a"},".getSelection()"),": 4D.EntitySelection"),(0,n.kt)("br",null),"returns the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getstamp"}),(0,n.kt)("strong",{parentName:"a"},".getStamp()")," : Integer"),(0,n.kt)("br",null)," returns the current value of the stamp of the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#indexof"}),(0,n.kt)("strong",{parentName:"a"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"a"},"entitySelection")," : 4D.EntitySelection } ) : Integer"),(0,n.kt)("br",null),"returns the position of the entity in an entity selection")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#isnew"}),(0,n.kt)("strong",{parentName:"a"},".isNew()")," : Boolean"),(0,n.kt)("br",null)," returns True if the entity to which it is applied has just been created and has not yet been saved in the datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#last"}),(0,n.kt)("strong",{parentName:"a"},".last()")," : 4D.Entity"),(0,n.kt)("br",null),"returns a reference to the entity in last position of the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#lock"}),(0,n.kt)("strong",{parentName:"a"},".lock"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),(0,n.kt)("br",null),"puts a pessimistic lock on the record referenced by the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#next"}),(0,n.kt)("strong",{parentName:"a"},".next()")," : 4D.Entity"),(0,n.kt)("br",null),"returns a reference to the next entity in the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#previous"}),(0,n.kt)("strong",{parentName:"a"},".previous()"),"  : 4D.Entity"),(0,n.kt)("br",null)," returns a reference to the previous entity in the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#reload"}),(0,n.kt)("strong",{parentName:"a"},".reload()")," : Object"),(0,n.kt)("br",null),"reloads the content of the entity in memory")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#save"}),(0,n.kt)("strong",{parentName:"a"},".save"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),(0,n.kt)("br",null),"saves the changes made to the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#toobject"}),(0,n.kt)("strong",{parentName:"a"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer } ) : Object"),(0,n.kt)("br",null),"returns an object which has been built from the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#touched"}),(0,n.kt)("strong",{parentName:"a"},".touched()")," : Boolean"),(0,n.kt)("br",null),"tests whether or not an entity attribute has been modified since the entity was loaded into memory or saved")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#touchedattributes"}),(0,n.kt)("strong",{parentName:"a"},".touchedAttributes()")," : Collection"),(0,n.kt)("br",null),"returns the names of the attributes that have been modified since the entity was loaded into memory")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#unlock"}),(0,n.kt)("strong",{parentName:"a"},".unlock()")," : Object"),(0,n.kt)("br",null),"removes the pessimistic lock on the record matching the entity")))),(0,n.kt)("h2",l({},{id:"attributename"}),".",(0,n.kt)("em",{parentName:"h2"},"attributeName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : any"),(0,n.kt)("h4",l({},{id:"description"}),"Description"),(0,n.kt)("p",null,"Tout attribut de dataclass est disponible en tant que propri\xe9t\xe9 des entit\xe9s de la dataclass, et qui stocke la valeur de l'attribut pour l'entit\xe9."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Les attributs de dataclass peuvent \xe9galement \xeatre obtenus en utilisant la syntaxe alternative avec ","["," ].")),(0,n.kt)("p",null,"The attribute value type depends on the attribute ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassClass#attributename"}),"kind")," (relation or storage):"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"storage"),":\n",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a value of the same type as ",(0,n.kt)("em",{parentName:"li"},"attributeName"),"."),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"relatedEntity"),":\n",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns the related entity. Les valeurs de l'entit\xe9 li\xe9e sont directement disponibles par le biais des propri\xe9t\xe9s en cascade, par exemple \"myEntity.employer.employees","[",'0].lastname".'),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"relatedEntities"),":\n",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a new entity selection of related entities. Les doublons sont supprim\xe9s (une entity selection non ordonn\xe9e est retourn\xe9e).")),(0,n.kt)("h4",l({},{id:"exemple"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $myEntity : cs.EmployeeEntity\n$myEntity:=ds.Employee.new() //Cr\xe9er une nouvelle entity\n$myEntity.name:=\"Dupont\" //assigner 'Dupont' \xe0 l'attribut 'name'\n$myEntity.firstname:=\"John\" //assigner 'John' \xe0 l'attribut 'firstname' \n$myEntity.save() //sauvegarder l'entity\n")),(0,n.kt)("h2",l({},{id:"clone"}),".clone()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clone()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nouvelle entit\xe9 r\xe9f\xe9ren\xe7ant l'enregistrement")))),(0,n.kt)("h4",l({},{id:"description-1"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".clone()")," function creates in memory a new entity referencing the same record as the original entity. Cette fonction vous permet de mettre \xe0 jour des entit\xe9s s\xe9par\xe9ment."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Keep in mind that any modifications done to entities will be saved in the referenced record only when the ",(0,n.kt)("a",l({parentName:"p"},{href:"#save"}),(0,n.kt)("inlineCode",{parentName:"a"},".save( )"))," function is executed.")),(0,n.kt)("p",null,"Cette fonction ne peut \xeatre utilis\xe9e qu'avec des entit\xe9s d\xe9j\xe0 enregistr\xe9es dans la base de donn\xe9es. It cannot be called on a newly created entity (for which ",(0,n.kt)("a",l({parentName:"p"},{href:"#isnew"}),(0,n.kt)("inlineCode",{parentName:"a"},".isNew()"))," returns ",(0,n.kt)("strong",{parentName:"p"},"True"),")."),(0,n.kt)("h4",l({},{id:"exemple-1"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp; $empCloned : cs.EmployeeEntity\n $emp:=ds.Employee.get(672)\n $empCloned:=$emp.clone()\n\n $emp.lastName:="Smith" //Updates done on $emp are not done on $empCloned\n\n')),(0,n.kt)("h2",l({},{id:"diff"}),".diff()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".diff"),"( ",(0,n.kt)("em",{parentName:"p"},"entityToCompare")," : 4D.Entity { ; ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare")," : Collection } ) : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"entityToCompare"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Entit\xe9 \xe0 comparer \xe0 l'entit\xe9 d'origine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"attributesToCompare"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Noms des attributs \xe0 comparer")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Diff\xe9rences entre les entit\xe9s")))),(0,n.kt)("h4",l({},{id:"description-2"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," function compares the contents of two entities and returns their differences."),(0,n.kt)("p",null,"In ",(0,n.kt)("em",{parentName:"p"},"entityToCompare"),", pass the entity to be compared to the original entity."),(0,n.kt)("p",null,"In ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare"),", you can designate specific attributes to compare. Si le param\xe8tre est pass\xe9, la comparaison est effectu\xe9e uniquement sur les attributs sp\xe9cifi\xe9s. S'il est omis, toutes les diff\xe9rences entre les entit\xe9s sont retourn\xe9es."),(0,n.kt)("p",null,"Les diff\xe9rences sont retourn\xe9es sous forme de collection d'objets dont les propri\xe9t\xe9s sont :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Nom de propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"attributeName"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom de l'attribut")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"value"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"D\xe9pend du type d'attribut"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur de l'attribut dans l'entit\xe9 d'origine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"otherValue"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"D\xe9pend du type d'attribut"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Value of the attribute in ",(0,n.kt)("em",{parentName:"td"},"entityToCompare"))))),(0,n.kt)("p",null,"Seuls les attributs dont les valeurs diff\xe8rent sont inclus dans la collection. If no differences are found, ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," returns an empty collection."),(0,n.kt)("p",null,"The function applies for properties whose ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassClass#attributename"}),"kind")," is ",(0,n.kt)("strong",{parentName:"p"},"storage")," or ",(0,n.kt)("strong",{parentName:"p"},"relatedEntity"),". In case a related entity has been updated (meaning the foreign key), the name of the related entity and its primary key name are returned as ",(0,n.kt)("em",{parentName:"p"},"attributeName")," properties (",(0,n.kt)("em",{parentName:"p"},"value")," and ",(0,n.kt)("em",{parentName:"p"},"otherValue")," are empty for the related entity name)."),(0,n.kt)("p",null,"If one of the compared entities is ",(0,n.kt)("strong",{parentName:"p"},"Null"),", an error is raised."),(0,n.kt)("h4",l({},{id:"exemple-1-1"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $diff1; $diff2 : Collection\n employee:=ds.Employee.query("ID=1001").first()\n $clone:=employee.clone()\n employee.firstName:="MARIE"\n employee.lastName:="SOPHIE"\n employee.salary:=500\n $diff1:=$clone.diff(employee) // Toutes les diff\xe9rences sont retourn\xe9es\n $diff2:=$clone.diff(employee;New collection("firstName";"lastName"))\n  // Seules les diff\xe9rences sur firstName et lastName sont retourn\xe9es\n')),(0,n.kt)("p",null,"$diff1:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    },\n    {\n        "attributeName": "salary",\n        "value": 66600,\n        "otherValue": 500\n    }\n]\n$diff2:\n\n[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    }\n]\n')),(0,n.kt)("h4",l({},{id:"exemple-2"}),"Exemple 2"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var vCompareResult1; vCompareResult2; vCompareResult3; $attributesToInspect : Collection\n vCompareResult1:=New collection\n vCompareResult2:=New collection\n vCompareResult3:=New collection\n $attributesToInspect:=New collection\n\n $e1:=ds.Employee.get(636)\n $e2:=ds.Employee.get(636)\n\n $e1.firstName:=$e1.firstName+" update"\n $e1.lastName:=$e1.lastName+" update"\n\n $c:=ds.Company.get(117)\n $e1.employer:=$c\n $e2.salary:=100\n\n $attributesToInspect.push("firstName")\n $attributesToInspect.push("lastName")\n\n vCompareResult1:=$e1.diff($e2)\n vCompareResult2:=$e1.diff($e2;$attributesToInspect)\n vCompareResult3:=$e1.diff($e2;$e1.touchedAttributes())\n')),(0,n.kt)("p",null,"vCompareResult1 (toutes les diff\xe9rences sont retourn\xe9es) :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "salary",\n        "value": 33500,\n        "otherValue": 100\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n  {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 de Company\n        "otherValue": "[object Entity]"// Entity 118 de Company\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult2 (seules les diff\xe9rences sur $attributesToInspect sont retourn\xe9es)"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult3 (seules les diff\xe9rences sur les attributs touch\xe9s de $e1 sont retourn\xe9es)"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n     {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 de Company\n        "otherValue": "[object Entity]"// Entity 118 de Company\n\n    }\n]\n')),(0,n.kt)("h2",l({},{id:"drop"}),".drop()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".drop"),"( {",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer} ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed"),": Forces the drop even if the stamp has changed")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat de l'op\xe9ration de suppression")))),(0,n.kt)("h4",l({},{id:"description-3"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," function deletes the data contained in the entity from the datastore, from the table related to its Dataclass. A noter que l'entit\xe9 reste en m\xe9moire."),(0,n.kt)("p",null,"In a multi-user or multi-process application, the ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," function is executed under an ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#entity-locking"}),'"optimistic lock"')," mechanism, wherein an internal locking stamp is automatically incremented each time the record is saved."),(0,n.kt)("p",null,"By default, if the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter is omitted, the function will return an error (see below) if the same entity was modified (i.e. the stamp has changed) by another process or user in the meantime."),(0,n.kt)("p",null,"Otherwise, you can pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," option in the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter: in this case, the entity is dropped even if the stamp has changed (and the primary key is still the same)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".drop( )")," contains the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"vrai si l'action de suppression a \xe9t\xe9 effectu\xe9e avec succ\xe8s, sinon Faux.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Description de l'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of pessimistic lock error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"LockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Information sur l'origine du verrouillage")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Id du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom d'utilisateur de la session sur la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"User alias if defined by ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", otherwise user name in the 4D directory")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom de la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of serious error (serious error can be trying to duplicate a primary key, disk full...):")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Message d'erreur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"component signature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'signature du composant interne (e.g. "dmbg" pour le composant de base de donn\xe9es)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur")))),(0,n.kt)("p",null,"(","*",") The following values can be returned in the ",(0,n.kt)("em",{parentName:"p"},"status")," and ",(0,n.kt)("em",{parentName:"p"},"statusText")," properties of ",(0,n.kt)("em",{parentName:"p"},"Result")," object in case of error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Valeur"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 n'existe plus dans les donn\xe9es. This error can occur in the following cases:",(0,n.kt)("br",null),(0,n.kt)("li",null,"the entity has been dropped (the stamp has changed and the memory space is now free)"),(0,n.kt)("li",null,"the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Avec drop( ), cette erreur peut \xeatre retourn\xe9e lorsque l'option dk force drop if stamp changed est utilis\xe9e. When using entity.lock( ), this error can be returned when dk reload if stamp changed option is used")," ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"The entity is locked by a pessimistic lock.",(0,n.kt)("br",null)," ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).",(0,n.kt)("br",null),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is not used"),(0,n.kt)("li",null,(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Stamp has changed"'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Les privil\xe8ges courants ne permettent pas de supprimer l'entit\xe9. ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Permission Error"')))),(0,n.kt)("h4",l({},{id:"exemple-1-2"}),"Exemple 1"),(0,n.kt)("p",null,"Example without ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $status : Object\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop()\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //The dropped entity remains in memory\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"exemple-2-1"}),"Exemple 2"),(0,n.kt)("p",null,"Example with ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $status : Object\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop(dk force drop if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //The dropped entity remains in memory\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"first"}),".first()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".first()"),": 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9f\xe9rence \xe0 la premi\xe8re entit\xe9 de l'entity selection (Null si non trouv\xe9e)")))),(0,n.kt)("h4",l({},{id:"description-4"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".first()")," function returns a reference to the entity in first position of the entity selection which the entity belongs to."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection( )")," returns Null), the function returns a Null value."),(0,n.kt)("h4",l({},{id:"exemple-3"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $firstEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[2]\n $firstEmployee:=$employee.first() //$firstEmployee is the first entity of the $employees entity selection\n')),(0,n.kt)("h2",l({},{id:"fromobject"}),".fromObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filler")," : Object )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filler"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objet avec lequel remplir l'entit\xe9")))),(0,n.kt)("h4",l({},{id:"description-5"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()")," function fills an entity with the ",(0,n.kt)("em",{parentName:"p"},"filler")," content."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Cette fonction modifie l'entity d'origine.")),(0,n.kt)("p",null,"La correspondance entre l'objet et l'entit\xe9 est \xe9tablie \xe0 partir des noms de propri\xe9t\xe9s/d'attributs :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si une propri\xe9t\xe9 de l'objet n'existe pas dans la dataclass, elle est ignor\xe9e."),(0,n.kt)("li",{parentName:"ul"},"Les types de donn\xe9es doivent \xeatre \xe9quivalents. If there is a type mismatch between the object and dataclass, 4D tries to convert the data whenever possible (see ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/fr/Concepts/data-types#converting-data-types"}),(0,n.kt)("inlineCode",{parentName:"a"},"Converting data types")),"), otherwise the attribute is left untouched."),(0,n.kt)("li",{parentName:"ul"},'La cl\xe9 primaire peut \xeatre donn\xe9e telle quelle ou avec une propri\xe9t\xe9 "__KEY" (remplie avec la valeur de la cl\xe9 primaire). If it does not already exist in the dataclass, the entity is created with the given value when ',(0,n.kt)("a",l({parentName:"li"},{href:"#save"}),".save()")," is called. Si la cl\xe9 primaire n'est pas fournie, l'entit\xe9 est cr\xe9\xe9e et la valeur de la cl\xe9 primaire est affect\xe9e en fonction des r\xe8gles de la base de donn\xe9es. L'auto-incr\xe9mentation n'est calcul\xe9e que si la cl\xe9 primaire est nulle.")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"filler")," can handle a related entity under the following conditions:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler")," contains the foreign key itself, or"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler"),' contains a property object with the same name as the related entity, containing a single property named "',"_","_",'KEY".'),(0,n.kt)("li",{parentName:"ul"},"si l'entit\xe9 relative n'existe pas, elle est ignor\xe9e.")),(0,n.kt)("h4",l({},{id:"exemple-4"}),"Exemple"),(0,n.kt)("p",null,"Avec l'objet $o suivant :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Mary",\n    "lastName": "Smith",\n    "salary": 36500,\n    "birthDate": "1958-10-27T00:00:00.000Z",\n    "woman": true,\n    "managerID": 411,// relatedEntity fournie avec cl\xe9 primaire\n    "employerID": 20 // relatedEntity fournie avec cl\xe9 primaire\n}\n')),(0,n.kt)("p",null,"Le code suivant cr\xe9era une entit\xe9 avec les entit\xe9s relatives manager et employer."),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $o : Object\n var $entity : cs.EmpEntity\n $entity:=ds.Emp.new()\n $entity.fromObject($o)\n $entity.save()\n")),(0,n.kt)("p",null,"Vous pouvez \xe9galement utiliser une entit\xe9 relative fournie sous forme d'objet :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'\n{\n    "firstName": "Marie",\n    "lastName": "Lechat",\n    "salary": 68400,\n    "birthDate": "1971-09-03T00:00:00.000Z",\n    "woman": false,\n    "employer": {// relatedEntity given as an object\n        "__KEY": "21"\n    },\n    "manager": {// relatedEntity given as an object\n        "__KEY": "411"\n    }\n}\n')),(0,n.kt)("h2",l({},{id:"getdataclass"}),".getDataClass()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17 R5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getDataClass()")," : 4D.DataClass"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.DataClass"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Dataclass \xe0 laquelle appartient l'entit\xe9")))),(0,n.kt)("h4",l({},{id:"description-6"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getDataClass()")," function returns the dataclass of the entity. Cette fonction est utile pour l'\xe9criture du code g\xe9n\xe9rique."),(0,n.kt)("h4",l({},{id:"exemple-5"}),"Exemple"),(0,n.kt)("p",null,"Le code g\xe9n\xe9rique suivant duplique toute entit\xe9 :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),"  //duplicate_entity method\n  //duplicate_entity($entity)\n\n #DECLARE($entity : 4D.Entity)  \n var $entityNew : 4D.Entity\n var $status : Object\n\n $entityNew:=$entity.getDataClass().new() //create a new entity in the parent dataclass\n $entityNew.fromObject($entity.toObject()) //get all attributes\n $entityNew[$entity.getDataClass().getInfo().primaryKey]:=Null //reset the primary key\n $status:=$entityNew.save() //save the duplicated entity\n")),(0,n.kt)("h2",l({},{id:"getkey"}),".getKey()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk key as string"),": primary key is returned as a string, no matter the primary key type")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur de la cl\xe9 primaire texte de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur de la cl\xe9 primaire num\xe9rique de l'entit\xe9")))),(0,n.kt)("h4",l({},{id:"description-7"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getKey()")," function returns the primary key value of the entity."),(0,n.kt)("p",null,'Les cl\xe9s primaires peuvent \xeatre des nombres (integer) ou des textes. You can "force" the returned primary key value to be a string, no matter the actual primary key type, by passing the ',(0,n.kt)("inlineCode",{parentName:"p"},"dk key as string")," option in the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter."),(0,n.kt)("h4",l({},{id:"exemple-6"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees[0]\n ALERT("The primary key is "+$employee.getKey(dk key as string))\n')),(0,n.kt)("h2",l({},{id:"getremotecontextattributes"}),".getRemoteContextAttributes()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"19R5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRemoteContextAttributes()")," : Text"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Attirbuts de contexte associ\xe9s \xe0 l'entity, s\xe9par\xe9s par une virgule")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Advanced mode:")," This function is intended for developers who need to customize ORDA default features for specific configurations. Dans la plupart des cas, vous n'aurez pas besoin de l'utiliser.")),(0,n.kt)("h4",l({},{id:"description-8"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getRemoteContextAttributes()")," function returns information about the optimization context used by the entity ."),(0,n.kt)("p",null,"If there is no ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/datastores#clientserver-optimization"}),"optimization context")," for the entity, the function returns an empty Text."),(0,n.kt)("h4",l({},{id:"exemple-7"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\nvar $address : cs.AddressEntity\nvar $p : cs.PersonsEntity\nvar $contextA : Object\nvar $info : Text\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$contextA:=New object("context"; "contextA")\n\n$address:=$ds.Address.get(1; $contextA)\n$text:=""\nFor each ($p; $address.persons)\n    $text:=$p.firstname+" "+$p.lastname\nEnd for each\n\n$info:=$address.getRemoteContextAttributes()\n\n//$info = "persons,persons.lastname,persons.firstname"\n')),(0,n.kt)("h4",l({},{id:"voir-\xe9galement"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/EntitySelectionClass#getRemoteContextAttributes"}),"EntitySelection.getRemoteContextAttributes()"),(0,n.kt)("br",null),(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataStoreClass#clearallremotecontexts"}),".clearAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataStoreClass#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataStoreClass#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataStoreClass#setremotecontextinfo"}),".setRemoteContextInfo()")),(0,n.kt)("h2",l({},{id:"getselection"}),".getSelection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getSelection()"),": 4D.EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Entity selection \xe0 laquelle appartient l'entit\xe9 (Null si non trouv\xe9e)")))),(0,n.kt)("h4",l({},{id:"description-9"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getSelection()")," function returns the entity selection which the entity belongs to."),(0,n.kt)("p",null,"Si l'entit\xe9 n'appartient pas \xe0 une entity selection, la fonction renvoie Null."),(0,n.kt)("h4",l({},{id:"exemple-8"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp : cs.EmployeeEntity\n var $employees; $employees2 : cs.EmployeeSelection\n $emp:=ds.Employee.get(672) // This entity does not belong to any entity selection\n $employees:=$emp.getSelection() // $employees is Null\n\n $employees2:=ds.Employee.query("lastName=:1";"Smith") //This entity selection contains 6 entities\n $emp:=$employees2[0]  // This entity belongs to an entity selection\n\n ALERT("The entity selection contains "+String($emp.getSelection().length)+" entities")\n')),(0,n.kt)("h2",l({},{id:"getstamp"}),".getStamp()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getStamp()")," : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur du \"stamp\" de l'entit\xe9 (0 si l'entit\xe9 vient d'\xeatre cr\xe9\xe9e)")))),(0,n.kt)("h4",l({},{id:"description-10"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getStamp()")," function  returns the current value of the stamp of the entity."),(0,n.kt)("p",null,"Le stamp (marqueur interne) d'une entit\xe9 est automatiquement incr\xe9ment\xe9 par 4D \xe0 chaque fois qu'une entit\xe9 est enregistr\xe9e sur disque. It manages concurrent user access and modifications to the same entities (see ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#entity-locking"}),(0,n.kt)("strong",{parentName:"a"},"Entity locking")),")."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour une nouvelle entit\xe9 (jamais enregistr\xe9e), la fonction retourne 0. To know if an entity has just been created, it is recommended to use ",(0,n.kt)("a",l({parentName:"p"},{href:"#isnew"}),".isNew()"),".")),(0,n.kt)("h4",l({},{id:"exemple-9"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $entity : cs.EmployeeEntity\n var $stamp : Integer\n\n $entity:=ds.Employee.new()\n $entity.lastname:="Smith"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=1\n\n $entity.lastname:="Wesson"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=2\n')),(0,n.kt)("h2",l({},{id:"indexof"}),".indexOf()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," : 4D.EntitySelection } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"entitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Entity selection dans laquelle obtenir la position de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Position de l'entit\xe9 dans l'entity selection")))),(0,n.kt)("h4",l({},{id:"description-11"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".indexOf()")," function returns the position of the entity in an entity selection."),(0,n.kt)("p",null,"By default if the ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," parameter is omitted, the function returns the entity's position within its own entity selection. Otherwise, it returns the position of the entity within the specified ",(0,n.kt)("em",{parentName:"p"},"entitySelection"),"."),(0,n.kt)("p",null,"La valeur r\xe9sultante est comprise entre 0 et la longueur de l'entity selection -1."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If the entity does not have an entity selection or does not belong to ",(0,n.kt)("em",{parentName:"li"},"entitySelection"),", the function returns -1."),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"entitySelection")," is Null or does not belong to the same dataclass as the entity, an error is raised.")),(0,n.kt)("h4",l({},{id:"exemple-10"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[1] //This entity belongs to an entity selection\n ALERT("The index of the entity in its own entity selection is "+String($employee.indexOf())) //1\n\n $employee:=ds.Employee.get(725) //This entity does not belong to an entity selection\n ALERT("The index of the entity is "+String($employee.indexOf())) // -1\n')),(0,n.kt)("h2",l({},{id:"isnew"}),".isNew()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".isNew()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si l'entit\xe9 vient juste d'\xeatre cr\xe9\xe9e et n'a pas encore \xe9t\xe9 enregistr\xe9e. Sinon, Faux.")))),(0,n.kt)("h4",l({},{id:"description-12"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".isNew()")," function  returns True if the entity to which it is applied has just been created and has not yet been saved in the datastore. Sinon, elle renvoie Faux."),(0,n.kt)("h4",l({},{id:"exemple-11"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp : cs.EmployeeEntity\n\n $emp:=ds.Employee.new()\n\n If($emp.isNew())\n    ALERT("This is a new entity")\n End if\n')),(0,n.kt)("h2",l({},{id:"last"}),".last()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".last()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9f\xe9rence \xe0 la derni\xe8re entit\xe9 de l'entity selection (Null si non trouv\xe9e)")))),(0,n.kt)("h4",l({},{id:"description-13"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".last()")," function returns a reference to the entity in last position of the entity selection which the entity belongs to."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection( )")," returns Null), the function returns a Null value."),(0,n.kt)("h4",l({},{id:"exemple-12"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $lastEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[0]\n $lastEmployee:=$employee.last() //$lastEmployee is the last entity of the $employees entity selection\n')),(0,n.kt)("h2",l({},{id:"lock"}),".lock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".lock"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed"),": Reload before locking if stamp changed")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat de l'op\xe9ration lock")))),(0,n.kt)("h4",l({},{id:"description-14"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".lock()")," function puts a pessimistic lock on the record referenced by the entity. The ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#entity-locking"}),"lock is set")," for a record and all the references of the entity in the current process."),(0,n.kt)("p",null,"Other processes will see this record as locked (the ",(0,n.kt)("inlineCode",{parentName:"p"},"result.success")," property will contain False if they try to lock the same entity using this function). Seules les fonctions ex\xe9cut\xe9es dans la session \xe0 l'origine du verrouillage auront la possibilit\xe9 de modifier et de sauvegarder les attributs de l'entit\xe9. L'entit\xe9 peut \xeatre charg\xe9e en lecture seulement dans les autres sessions, mais elles ne pourront ni saisir ni sauvegarder des valeurs."),(0,n.kt)("p",null,"A record locked by ",(0,n.kt)("inlineCode",{parentName:"p"},".lock()")," is unlocked:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"when the ",(0,n.kt)("a",l({parentName:"li"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},"unlock()"))," function is called on a matching entity in the same process"),(0,n.kt)("li",{parentName:"ul"},"automatiquement, lorsqu'elle n'est plus r\xe9f\xe9renc\xe9e par aucune entit\xe9 en m\xe9moire. Par exemple, si le verrou n'est pos\xe9 que sur une r\xe9f\xe9rence locale d'une entit\xe9, celle-ci est d\xe9verrouill\xe9e \xe0 la fin de la fonction. Tant qu'il existe des r\xe9f\xe9rences \xe0 l'entit\xe9 en m\xe9moire, l'enregistrement reste verrouill\xe9.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"An entity can also be ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/REST/lock"}),"locked by a REST session"),", in which case it can only be unlocked by the session.")),(0,n.kt)("p",null,"By default, if the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter is omitted, the function will return an error (see below) if the same entity was modified (i.e. the stamp has changed) by another process or user in the meantime."),(0,n.kt)("p",null,"Otherwise, you can pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed")," option in the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter: in this case, no error is returned and the entity is reloaded when the stamp has changed (if the entity still exists and the primary key is still the same)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".lock( )")," contains the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"vrai si l'action de verrouillage a \xe9t\xe9 effectu\xe9e avec succ\xe8s (ou si l'entit\xe9 est d\xe9j\xe0 verrouill\xe9e dans le process courant), sinon faux.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only if ",(0,n.kt)("inlineCode",{parentName:"strong"},"dk reload if stamp changed")," option is used:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"wasReloaded")),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"vrai si l'entit\xe9 a \xe9t\xe9 correctement recharg\xe9e, sinon faux.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Description de l'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of pessimistic lock error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record" si verrouillage par un process 4D, "Locked by session" si verrouillage par une session REST')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Information sur l'origine du verrouillage. Les propri\xe9t\xe9s retourn\xe9es d\xe9pendent de l'origine du verrouillage (process 4D ou session REST).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only for a 4D process lock:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"ID du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom d'utilisateur de la session sur la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom ou alias de l'utilisateur 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Identifiant utilisateur dans le r\xe9pertoire de la base 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom de la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Version du client")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only for a REST session lock:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"|",'URL that locked the entity (e.g. "',(0,n.kt)("a",l({parentName:"td"},{href:"http://www.myserver.com%22)%5C%7C"}),'www.myserver.com")\\|'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"IPAddr"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Adresse IP d'origine du verrouillage (ex. 127.0.0.1\")")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"userAgent"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'userAgent de l\'origine du verouillage (ex : "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36")')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of serious error"))," (primary key already exists, disk full...):")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Message d'erreur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"component signature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'signature du composant interne (e.g. "dmbg" pour le composant de base de donn\xe9es)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur")))),(0,n.kt)("p",null,"(","*",") The following values can be returned in the ",(0,n.kt)("em",{parentName:"p"},"status")," and ",(0,n.kt)("em",{parentName:"p"},"statusText")," properties of the ",(0,n.kt)("em",{parentName:"p"},"Result")," object in case of error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Valeur"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 n'existe plus dans les donn\xe9es. This error can occur in the following cases:",(0,n.kt)("li",null,"the entity has been dropped (the stamp has changed and the memory space is now free)"),(0,n.kt)("li",null,"the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Avec ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),", cette erreur peut \xeatre retourn\xe9e lorsque l'option dk force drop if stamp changed est utilis\xe9e. When using ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", this error can be returned when ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"The entity is locked by a pessimistic lock.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).",(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is not used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Stamp has changed"')))),(0,n.kt)("h4",l({},{id:"exemple-1-3"}),"Exemple 1"),(0,n.kt)("p",null,"Exemple avec erreur :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n $employee:=ds.Employee.get(716)\n $status:=$employee.lock()\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"exemple-2-2"}),"Exemple 2"),(0,n.kt)("p",null,"Example with ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n $employee:=ds.Employee.get(717)\n $status:=$employee.lock(dk reload if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"next"}),".next()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".next()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9f\xe9rence \xe0 l'entit\xe9 suivante dans l'entity selection (Null si non trouv\xe9e)")))),(0,n.kt)("h4",l({},{id:"description-15"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".next()")," function returns a reference to the next entity in the entity selection which the entity belongs to."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection()")," returns Null), the function returns a Null value."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",{href:"#getselection"},".getSelection( )")," returns Null), the function returns a Null value."),(0,n.kt)("h4",l({},{id:"exemple-13"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $nextEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[0]\n $nextEmployee:=$employee.next() //$nextEmployee is the second entity of the $employees entity selection\n\n')),(0,n.kt)("h2",l({},{id:"previous"}),".previous()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".previous()"),"  : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9f\xe9rence \xe0 l'entit\xe9 pr\xe9c\xe9dente dans l'entity selection (Null si non trouv\xe9e)")))),(0,n.kt)("h4",l({},{id:"description-16"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".previous()")," function  returns a reference to the previous entity in the entity selection which the entity belongs to."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection()")," returns Null), the function returns a Null value."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",{href:"#getselection"},".getSelection( )")," returns Null), the function returns a Null value."),(0,n.kt)("h4",l({},{id:"exemple-14"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $previousEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[1]\n $previousEmployee:=$employee.previous() //$previousEmployee is the first entity of the $employees entity selection\n')),(0,n.kt)("h2",l({},{id:"reload"}),".reload()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".reload()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objet statut")))),(0,n.kt)("h4",l({},{id:"description-17"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".reload()")," function reloads the content of the entity in memory, according to information stored in the table related to the dataclass in the datastore. Le rechargement est effectu\xe9 uniquement si l'entit\xe9 existe toujours avec la m\xeame cl\xe9 primaire."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".reload( )")," contains the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"True if the reload action is successful, False otherwise.",(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of error")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Description de l'erreur, voir ci-dessous")))),(0,n.kt)("p",null,"(","*",") The following values can be returned in the ",(0,n.kt)("em",{parentName:"p"},"status")," and ",(0,n.kt)("em",{parentName:"p"},"statusText")," properties of ",(0,n.kt)("em",{parentName:"p"},"Result")," object in case of error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Valeur"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 n'existe plus dans les donn\xe9es. This error can occur in the following cases:",(0,n.kt)("br",null),(0,n.kt)("li",null,"the entity has been dropped (the stamp has changed and the memory space is now free)"),(0,n.kt)("li",null,"the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Avec ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),", cette erreur peut \xeatre retourn\xe9e lorsque l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," est utilis\xe9e. When using ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", this error can be returned when ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is used"),(0,n.kt)("br",null),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Associated statusText")),': "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.",(0,n.kt)("br",null),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Associated statusText")),': "Other error"')))),(0,n.kt)("h4",l({},{id:"exemple-15"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n var $result : Object\n\n $employees:=ds.Employee.query("lastName=:1";"Hollis")\n $employee:=$employees[0]\n $employee.firstName:="Mary"\n $result:=$employee.reload()\n Case of\n    :($result.success)\n       ALERT("Reload has been done")\n    :($result.status=dk status entity does not exist anymore)\n       ALERT("The entity has been dropped")\n End case\n')),(0,n.kt)("h2",l({},{id:"save"}),".save()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".save"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge"),": Enables the automatic merge mode")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat de la sauvegarde")))),(0,n.kt)("h4",l({},{id:"description-18"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," function saves the changes made to the entity in the table related to its dataClass. Vous devez appeler cette fonction apr\xe8s toute cr\xe9ation ou modification d'entit\xe9 si vous souhaitez sauvegarder les changements."),(0,n.kt)("p",null,'The save operation is executed only if at least one entity attribute has been "touched" (see the ',(0,n.kt)("a",l({parentName:"p"},{href:"#touched"}),(0,n.kt)("inlineCode",{parentName:"a"},".touched()"))," and ",(0,n.kt)("a",l({parentName:"p"},{href:"#touchedattributes"}),(0,n.kt)("inlineCode",{parentName:"a"},".touchedAttributes()"))," functions). Sinon, la fonction ne fait rien (le trigger n'est pas appel\xe9)."),(0,n.kt)("p",null,"In a multi-user or multi-process application, the ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," function is executed under an ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#entity-locking"}),'"optimistic lock"')," mechanism, wherein an internal locking stamp is automatically incremented each time the record is saved."),(0,n.kt)("p",null,"By default, if the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter is omitted, the method will return an error (see below) whenever the same entity has been modified by another process or user in the meantime, no matter the modified attribute(s)."),(0,n.kt)("p",null,"Otherwise, you can pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," option in the ",(0,n.kt)("em",{parentName:"p"},"mode"),' parameter: when the automatic merge mode is enabled, a modification done concurrently by another process/user on the same entity but on a different attribute will not result in an error. Les donn\xe9es effectivement stock\xe9es dans l\'enregistrement r\xe9sultent alors de la combinaison (le "merge") des modifications non-concurrentes (si des modifications ont \xe9t\xe9 effectu\xe9es sur le m\xeame attribut, la sauvegarde \xe9choue et une erreur est retourn\xe9e, m\xeame en mode "automatic merge").'),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Le mode de fusion automatique n'est pas disponible pour les attributs de type Image, Objet et Texte lorsqu'ils sont stock\xe9s en dehors de l'enregistrement. Concurrent changes in these attributes will result in a ",(0,n.kt)("inlineCode",{parentName:"p"},"dk status stamp has changed")," error.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," contains the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si la sauvegarde a \xe9t\xe9 effectu\xe9e avec succ\xe8s, sinon faux.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only if ",(0,n.kt)("inlineCode",{parentName:"strong"},"dk auto merge")," option is used")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"autoMerged"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'Vrai si un "auto merge" a \xe9t\xe9 effectu\xe9, sinon faux.')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of error")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Error code, ",(0,n.kt)("a",l({parentName:"td"},{href:"#status-and-statustext"}),"see below"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Description of the error, ",(0,n.kt)("a",l({parentName:"td"},{href:"#status-and-statustext"}),"see below"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of pessimistic lock error")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Information sur l'origine du verrouillage")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Id du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom d'utilisateur de la session sur la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"User alias if defined by ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", otherwise user name in the 4D directory")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom de la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},(0,n.kt)("strong",{parentName:"em"},"Available only in case of serious error"))," (serious error - can be trying to duplicate a primary key, disk full...):")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Message d'erreur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"componentSignature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'Signature du composant interne (e.g. "dmbg" pour le composant de base de donn\xe9es)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur")))),(0,n.kt)("h5",l({},{id:"status-et-statustext"}),"status et statusText"),(0,n.kt)("p",null,"The following values can be returned in the ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"statusText")," properties of Result object in case of error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Valeur"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status automerge failed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"6"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"(Only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," option is used) The automatic merge option failed when saving the entity.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Auto merge failed"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 n'existe plus dans les donn\xe9es. This error can occur in the following cases:",(0,n.kt)("br",null),(0,n.kt)("li",null,"the entity has been dropped (the stamp has changed and the memory space is now free)"),(0,n.kt)("li",null,"the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Avec ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),", cette erreur peut \xeatre retourn\xe9e lorsque l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," est utilis\xe9e. When using ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", this error can be returned when ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Entity doesnot exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"The entity is locked by a pessimistic lock.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).",(0,n.kt)("br",null),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is not used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Stamp has changed"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Les privil\xe8ges courants ne permettent pas de supprimer l'entit\xe9. ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Permission Error"')))),(0,n.kt)("h4",l({},{id:"exemple-1-4"}),"Exemple 1"),(0,n.kt)("p",null,"Cr\xe9ation d'une entit\xe9 :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs.EmployeeEntity\n $employee:=ds.Employee.new()\n $employee.firstName:="Mary"\n $employee.lastName:="Smith"\n $status:=$employee.save()\n If($status.success)\n    ALERT("Employee created")\n End if\n')),(0,n.kt)("h4",l({},{id:"exemple-2-3"}),"Exemple 2"),(0,n.kt)("p",null,"Updating an entity without ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save()\n Case of\n    :($status.success)\n       ALERT("Employee updated")\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"exemple-3-1"}),"Exemple 3"),(0,n.kt)("p",null,"Updating an entity with ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n\n var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save(dk auto merge)\n Case of\n    :($status.success)\n       ALERT("Employee updated")\n    :($status.status=dk status automerge failed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"toobject"}),".toObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filterString"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Attribut(s) \xe0 extraire (cha\xeenes s\xe9par\xe9es par des virgules)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filterCol"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection d'attribut(s) \xe0 extraire")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"options"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk with primary key"),": adds the ","_","_","KEY property;",(0,n.kt)("br",null),(0,n.kt)("inlineCode",{parentName:"td"},"dk with stamp"),": adds the ","_","STAMP property")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objet g\xe9n\xe9r\xe9 \xe0 partir de l'entit\xe9")))),(0,n.kt)("h4",l({},{id:"description-19"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," function returns an object which has been built from the entity. Les noms des propri\xe9t\xe9s de l'objet correspondent aux noms des attributs de l'entit\xe9."),(0,n.kt)("p",null,"If no filter is specified, or if the ",(0,n.kt)("em",{parentName:"p"},"filterString"),' parameter contains an empty string or "',"*",'", the returned object will contain:'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"tous les attributs storage de l'entit\xe9"),(0,n.kt)("li",{parentName:"ul"},"attributes of the ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")," ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/fr/API/DataClassClass#attributename"}),"kind"),": you get a property with the same name as the related entity (name of the many-to-one link). L'attribut est extrait sous forme simple."),(0,n.kt)("li",{parentName:"ul"},"attributes of the ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntities")," ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/fr/API/DataClassClass#attributename"}),"kind"),": attribute is not returned.")),(0,n.kt)("p",null,"Dans le premier param\xe8tre, indiquez le ou les attribut(s) \xe0 extraire. Vous pouvez passer :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterString"),': a string with property paths separated with commas: "propertyPath1, propertyPath2, ...", or'),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterCol"),": a collection of strings: ","[",'"propertyPath1","propertyPath2";...]')),(0,n.kt)("p",null,"If a filter is specified for attributes of the relatedEntity ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassClass#attributename"}),"kind"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity" -> it is extracted with simple form: an object with property ',"_","_","KEY (primary key)."),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.',"*",'" -> all the properties are extracted'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.propertyName1; relatedEntity.propertyName2; ..." -> only those properties are extracted')),(0,n.kt)("p",null,"If a filter is specified for attributes of the relatedEntities ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassClass#attributename"}),"kind"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.',"*",'" -> all the properties are extracted'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.propertyName1; relatedEntities.propertyName2; ..." -> only those properties are extracted')),(0,n.kt)("p",null,"In the ",(0,n.kt)("em",{parentName:"p"},"options")," parameter, you can pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"dk with primary key")," and/or",(0,n.kt)("inlineCode",{parentName:"p"},"dk with stamp")," selector(s) to add the entity's primary keys and/or stamps in extracted objects."),(0,n.kt)("admonition",l({},{title:"Warning",type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},'Si vous utilisez un autre attribut que la cl\xe9 primaire comme attribut 1 dans une relation, la valeur de cet attribut sera inscrite dans la propri\xe9t\xe9 "__KEY". Keep in mind that it is recommended to use the primary key as One attribute in your relations, especially when you use ',(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," and ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()")," functions.")),(0,n.kt)("h4",l({},{id:"exemple-1-5"}),"Exemple 1"),(0,n.kt)("p",null,"La structure suivante sera utilis\xe9e pour les exemples de cette section :"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(63018).Z,width:"1000",height:"610"})),(0,n.kt)("p",null,"Sans param\xe8tre filtre :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),"employeeObject:=employeeSelected.toObject()\n")),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": { // relatedEntity extraite sous forme simple\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-2-4"}),"Exemple 2"),(0,n.kt)("p",null,"Extraction de la cl\xe9 primaire et du stamp :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("";dk with primary key+dk with stamp)\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "__KEY": 413,\n   "__STAMP": 1,\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": {\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-3-2"}),"Exemple 3"),(0,n.kt)("p",null,"Expanding all the properties of ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("directReports.*")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "directReports": [\n        {\n            "ID": 418,\n            "firstName": "Lorena",\n            "lastName": "Boothe",\n            "salary": 44800,\n            "birthDate": "1970-10-02T00:00:00.000Z",\n            "woman": true,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 419,\n            "firstName": "Drew",\n            "lastName": "Caudill",\n            "salary": 41000,\n            "birthDate": "2030-01-12T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 420,\n            "firstName": "Nathan",\n            "lastName": "Gomes",\n            "salary": 46300,\n            "birthDate": "2010-05-29T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        }\n    ]\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-4-1"}),"Exemple 4"),(0,n.kt)("p",null,"Extracting some properties of ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("firstName, directReports.lastName")\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "directReports": [\n        {\n            "lastName": "Boothe"\n        },\n        {\n            "lastName": "Caudill"\n        },\n        {\n            "lastName": "Gomes"\n        }\n    ]\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-5-1"}),"Exemple 5"),(0,n.kt)("p",null,"Extracting a ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," with simple form:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' $coll:=New collection("firstName";"employer")\n employeeObject:=employeeSelected.toObject($coll)\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "employer": {\n        "__KEY": 20\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-6-1"}),"Exemple 6"),(0,n.kt)("p",null,"Extracting all the properties of a ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("employer.*")\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "ID": 20,\n        "name": "India Astral Secretary",\n        "creationDate": "1984-08-25T00:00:00.000Z",\n        "revenues": 12000000,\n        "extra": null\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-7-1"}),"Exemple 7"),(0,n.kt)("p",null,"Extracting some properties of a ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' $col:=New collection\n $col.push("employer.name")\n $col.push("employer.revenues")\n employeeObject:=employeeSelected.toObject($col)\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "name": "India Astral Secretary",\n        "revenues": 12000000\n    }\n}\n')),(0,n.kt)("h2",l({},{id:"touched-"}),".touched( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touched()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si au moins un attribut de l'entit\xe9 a \xe9t\xe9 modifi\xe9 et non encore sauvegard\xe9, sinon Faux")))),(0,n.kt)("h4",l({},{id:"description-20"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," function tests whether or not an entity attribute has been modified since the entity was loaded into memory or saved."),(0,n.kt)("p",null,"Si un attribut a \xe9t\xe9 modifi\xe9 ou calcul\xe9, la fonction retourne Vrai, sinon elle retourne Faux. Vous pouvez utiliser cette fonction pour savoir s'il est n\xe9cessaire de sauvegarder l'entit\xe9."),(0,n.kt)("p",null,"This function returns False for a new entity that has just been created (with ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassClass#new"}),(0,n.kt)("inlineCode",{parentName:"a"},".new( )")),"). Note however that if you use a function which calculates an attribute of the entity, the ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," function will then return True. For example, if you call ",(0,n.kt)("a",l({parentName:"p"},{href:"#getkey"}),(0,n.kt)("inlineCode",{parentName:"a"},".getKey()"))," to calculate the primary key, ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," returns True."),(0,n.kt)("h4",l({},{id:"exemple-16"}),"Exemple"),(0,n.kt)("p",null,"Cet exemple v\xe9rifie s'il est n\xe9cessaire de sauvegarder l'entit\xe9 :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $emp : cs.EmployeeEntity\n $emp:=ds.Employee.get(672)\n $emp.firstName:=$emp.firstName //M\xeame r\xe9assign\xe9 avec sa propre valeur, l'attribut est consid\xe9r\xe9 \"touched\"\n\n If($emp.touched()) //si au moins l'un des attributs a \xe9t\xe9 modifi\xe9\n    $emp.save()\n End if // sinon, inutile de sauvegarder l'entit\xe9\n")),(0,n.kt)("h2",l({},{id:"touchedattributes-"}),".touchedAttributes( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touchedAttributes()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Noms des attributs touch\xe9s ou collection vide")))),(0,n.kt)("h4",l({},{id:"description-21"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".touchedAttributes()")," function returns the names of the attributes that have been modified since the entity was loaded into memory."),(0,n.kt)("p",null,"This applies for attributes of the ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassClass#attributename"}),"kind")," ",(0,n.kt)("inlineCode",{parentName:"p"},"storage")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),"."),(0,n.kt)("p",null,"Dans le cas d'un attribut relationnel ayant \xe9t\xe9 \"touch\xe9\" (i.e., la cl\xe9 \xe9trang\xe8re), le nom de l'entit\xe9 li\xe9e et celui de sa cl\xe9 primaire sont retourn\xe9s."),(0,n.kt)("p",null,"Si aucun attribut de l'entit\xe9 n'a \xe9t\xe9 touch\xe9, la fonction retourne une collection vide."),(0,n.kt)("h4",l({},{id:"exemple-1-6"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs.EmployeeEntity\n\n $touchedAttributes:=New collection\n $emp:=ds.Employee.get(725)\n $emp.firstName:=$emp.firstName //M\xeame modifi\xe9 avec la m\xeame valeur, l\'attribut est consid\xe9r\xe9 comme touch\xe9\n $emp.lastName:="Martin"\n $touchedAttributes:=$emp.touchedAttributes()\n  //$touchedAttributes: ["firstName","lastName"]\n')),(0,n.kt)("h4",l({},{id:"exemple-2-5"}),"Exemple 2"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs.EmployeeEntity\n var $company : cs.CompanyEntity\n\n $touchedAttributes:=New collection\n\n $emp:=ds.Employee.get(672)\n $emp.firstName:=$emp.firstName\n $emp.lastName:="Martin"\n\n $company:=ds.Company.get(121)\n $emp.employer:=$company\n\n $touchedAttributes:=$emp.touchedAttributes()\n\n  //collection $touchedAttributes: ["firstName","lastName","employer","employerID"]\n')),(0,n.kt)("p",null,"Dans ce cas :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"firstName and lastName have a ",(0,n.kt)("inlineCode",{parentName:"li"},"storage")," kind"),(0,n.kt)("li",{parentName:"ul"},"employer has a ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")," kind"),(0,n.kt)("li",{parentName:"ul"},"employerID est la cl\xe9 \xe9trang\xe8re de l'entit\xe9 reli\xe9e employer")),(0,n.kt)("h2",l({},{id:"unlock"}),".unlock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".unlock()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objet statut")))),(0,n.kt)("h4",l({},{id:"description-22"}),"Description"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," function removes the pessimistic lock on the record matching the entity in the datastore and table related to its dataclass."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"For more information, please refer to ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#entity-locking"}),"Entity locking")," section.")),(0,n.kt)("p",null,"Un enregistrement est automatiquement d\xe9verrouill\xe9 lorsqu'il n'est plus r\xe9f\xe9renc\xe9 par aucune entit\xe9 dans le process qui l'a verrouill\xe9 (par exemple : si le verrou est pos\xe9 sur uniquement sur une r\xe9f\xe9rence locale d'une entit\xe9, l'entit\xe9 et donc l'enregistrement sont d\xe9verrouill\xe9s lorsque le process se termine)."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Lorsqu'un enregistrement est verrouill\xe9, il doit \xeatre d\xe9verrouill\xe9 depuis le process qui l'a verrouill\xe9 et via la r\xe9f\xe9rence d'entit\xe9 sur laquelle le verrou a \xe9t\xe9 pos\xe9. Par exemple :")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," $e1:=ds.Emp.all()[0]\n $e2:=ds.Emp.all()[0]\n $res:=$e1.lock() //$res.success=true\n $res:=$e2.unlock() //$res.success=false\n $res:=$e1.unlock() //$res.success=true\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," contains the following property:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si l'action unlock a \xe9t\xe9 ex\xe9cut\xe9e avec succ\xe8s, Faux sinon. Si le d\xe9verrouillage est effectu\xe9 sur une entit\xe9 qui a \xe9t\xe9 supprim\xe9e, sur un enregistrement non verrouill\xe9 ou sur un enregistrement verrouill\xe9 par un autre process ou une autre entit\xe9, success vaut Faux.")))),(0,n.kt)("h4",l({},{id:"exemple-17"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n\n $employee:=ds.Employee.get(725)\n $status:=$employee.lock()\n ... //processing\n $status:=$employee.unlock()\n If($status.success)\n    ALERT("L\'entit\xe9 est d\xe9verrouill\xe9e")\n End if\n')))}u.isMDXComponent=!0},63018:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute4-96c4a541a87b02eee83316636b0ae059.png"}}]);