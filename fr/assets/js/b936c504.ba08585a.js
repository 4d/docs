"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["33399"],{271504:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>c,toc:()=>d,default:()=>h,metadata:()=>r,assets:()=>l,contentTitle:()=>o});var r=JSON.parse('{"id":"API/TCPConnectionClass","title":"TCPConnection","description":"La classe TCPConnection vous permet de g\xe9rer des connexions TCP (Transmission Control Protocol) clientes \xe0 un serveur pour l\'envoi et la r\xe9ception des donn\xe9es ainsi que la gestion des \xe9v\xe9nements du cycle de vie de la connexion via des r\xe9troappels.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R9/API/TCPConnectionClass.md","sourceDirName":"API","slug":"/API/TCPConnectionClass","permalink":"/docs/fr/20-R9/API/TCPConnectionClass","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FTCPConnectionClass.md%20(20-R9)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R9","frontMatter":{"id":"TCPConnectionClass","title":"TCPConnection"},"sidebar":"docs","previous":{"title":"SystemWorker","permalink":"/docs/fr/20-R9/API/SystemWorkerClass"},"next":{"title":"TCPEvent","permalink":"/docs/fr/20-R9/API/TCPEventClass"}}'),t=s(785893),i=s(250065);let c={id:"TCPConnectionClass",title:"TCPConnection"},o=void 0,l={},d=[{value:"Exemples",id:"exemples",level:3},{value:"Exemple synchrone",id:"exemple-synchrone",level:4},{value:"Exemple asynchrone",id:"exemple-asynchrone",level:4},{value:"Exemple d&#39;utilisation",id:"exemple-dutilisation",level:5},{value:"Objet TCPConnection",id:"objet-tcpconnection",level:3},{value:"4D.TCPConnection.new()",id:"4dtcpconnectionnew",level:2},{value:"Description",id:"description",level:4},{value:"Param\xe8tre <code>options</code>",id:"param\xe8tre-options",level:4},{value:"Fonctions de callback",id:"fonctions-de-callback",level:4},{value:"Objet TCPEvent",id:"objet-tcpevent",level:4},{value:".adresse",id:"adresse",level:2},{value:"Description",id:"description-1",level:4},{value:".closed",id:"closed",level:2},{value:"Description",id:"description-2",level:4},{value:".errors",id:"errors",level:2},{value:"Description",id:"description-3",level:4},{value:".listener",id:"listener",level:2},{value:"Description",id:"description-4",level:4},{value:".noDelay",id:"nodelay",level:2},{value:"Description",id:"description-5",level:4},{value:".port",id:"port",level:2},{value:"Description",id:"description-6",level:4},{value:".send()",id:"send",level:2},{value:"Description",id:"description-7",level:4},{value:".shutdown()",id:"shutdown",level:2},{value:"Description",id:"description-8",level:4},{value:".wait()",id:"wait",level:2},{value:"Description",id:"description-9",level:4}];function a(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["La classe ",(0,t.jsx)(n.code,{children:"TCPConnection"})," vous permet de g\xe9rer des connexions TCP (Transmission Control Protocol) clientes \xe0 un ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/API/TCPListenerClass",children:"serveur"})," pour l'envoi et la r\xe9ception des donn\xe9es ainsi que la gestion des \xe9v\xe9nements du cycle de vie de la connexion via des r\xe9troappels."]}),"\n",(0,t.jsxs)(n.p,{children:["La classe ",(0,t.jsx)(n.code,{children:"TCPConnection"})," est disponible dans le class store ",(0,t.jsx)(n.code,{children:"4D"}),". Vous pouvez cr\xe9er une connexion TCP \xe0 l'aide de la fonction ",(0,t.jsx)(n.a,{href:"#4dtcpconnectionnew",children:"4D.TCPConnection.new()"}),", qui renvoie un objet ",(0,t.jsx)(n.a,{href:"#tcpconnection-object",children:"TCPConnection"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Toutes les fonctions de la classe ",(0,t.jsx)(n.code,{children:"TCPConnection"})," sont thread-safe."]}),"\n",(0,t.jsxs)(n.p,{children:["Gr\xe2ce au ",(0,t.jsx)(n.em,{children:"refcounting"})," d'objet standard de 4D, une TCPConnection est automatiquement lib\xe9r\xe9e lorsqu'elle n'est plus r\xe9f\xe9renc\xe9e. Par cons\xe9quent, les ressources associ\xe9es sont correctement referm\xe9es sans qu'il soit n\xe9cessaire de proc\xe9der \xe0 une cl\xf4ture explicite."]}),"\n",(0,t.jsxs)(n.p,{children:["Les objets TCPConnection sont lib\xe9r\xe9s lorsqu'il n'existe plus de r\xe9f\xe9rences \xe0 ces objets dans la m\xe9moire. Cela se produit g\xe9n\xe9ralement, par exemple, \xe0 la fin de l'ex\xe9cution d'une m\xe9thode pour les variables locales. Si vous souhaitez \"forcer\" la fermeture d'une connexion \xe0 tout moment, ",(0,t.jsxs)(n.a,{href:"/docs/fr/20-R9/Concepts/object#resources",children:[(0,t.jsx)(n.strong,{children:"nullifiez"})," ses r\xe9f\xe9rences en leur attribuant la valeur ",(0,t.jsx)(n.strong,{children:"Null"})]}),"."]}),"\n",(0,t.jsxs)(n.details,{children:[(0,t.jsx)(n.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Release"}),(0,t.jsx)(n.th,{children:"Modifications"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"20 R9"}),(0,t.jsxs)(n.td,{children:["Nouveaux attributs ",(0,t.jsx)(n.code,{children:"listener"}),", ",(0,t.jsx)(n.code,{children:"address"})," et ",(0,t.jsx)(n.code,{children:"port"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"20 R8"}),(0,t.jsx)(n.td,{children:"Classe ajout\xe9e"})]})]})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"exemples",children:"Exemples"}),"\n",(0,t.jsx)(n.p,{children:"Les exemples suivants montrent comment utiliser les classes 4D.TCPConnection et 4D.TCPEvent pour g\xe9rer une connexion client TCP, traiter les \xe9v\xe9nements, envoyer des donn\xe9es et fermer correctement la connexion. Des exemples synchrones et asynchrones sont fournis."}),"\n",(0,t.jsx)(n.h4,{id:"exemple-synchrone",children:"Exemple synchrone"}),"\n",(0,t.jsx)(n.p,{children:"Cet exemple montre comment \xe9tablir une connexion, envoyer des donn\xe9es et la fermer en utilisant un objet simple pour la configuration :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'var $domain : Text := "127.0.0.1"\nvar $port : Integer := 10000\nvar $options : Object := New object() // objet de configuration\nvar $tcpClient : 4D.TCPConnection\nvar $message : Text := "test message"\n\n// Ouvrir une connexion\n$tcpClient := 4D.TCPConnection.new($domain; $port; $options)\n\n// Envoyer des donn\xe9es\nvar $blobData : Blob\nTEXT TO BLOB($message; $blobData; UTF8 text without length)\n$tcpClient.send($blobData)\n\n// Shutdown\n$tcpClient.shutdown()\n$tcpClient.wait(0)\n\n'})}),"\n",(0,t.jsx)(n.h4,{id:"exemple-asynchrone",children:"Exemple asynchrone"}),"\n",(0,t.jsx)(n.p,{children:"Cet exemple d\xe9finit une classe qui g\xe8re le cycle de vie de la connexion et les \xe9v\xe9nements, et montre comment travailler de mani\xe8re asynchrone :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'// classe : cs.MyAsyncTCPConnection\n\nClass constructor($url : Text ; $port : Integer)\n    This.connection := Null\n    This.url := $url\n    This.port := $port\n\n// Se connecter \xe0 l\'un des serveurs lanc\xe9s \xe0 l\'int\xe9rieur de workers\nFunction connect()\n    This.connection := 4D.TCPConnection.new(This.url ; This.port ; This)\n\n// Se d\xe9connecter du serveur\nFunction disconnect()\n    This.connection.shutdown()\n    This.connection := Null\n\n// Envoyer des donn\xe9es au serveur\nFunction getInfo()\n    var $blob : Blob\n    TEXT TO BLOB("Information" ; $blob)\n    This.connection.send($blob)\n\n// Callback appel\xe9e lorsque la connexion est \xe9tablie avec succ\xe8s\nFunction onConnection($connection : 4D.TCPConnection ; $event : 4D.TCPEvent)\n    ALERT("Connection established")\n\n// Callback appel\xe9e lorsque la connexion est correctement ferm\xe9e\nFunction onShutdown($connection : 4D.TCPConnection ; $event : 4D.TCPEvent)\n    ALERT("Connection closed")\n\n// Callback appel\xe9e lors de la r\xe9ception de donn\xe9es du serveur\nFunction onData($connection : 4D.TCPConnection ; $event : 4D.TCPEvent)\n    ALERT(BLOB to text($event.data ; UTF8 text without length))\n\n	//Attention: Il n\'y a aucune garantie que vous recevrez toutes les donn\xe9es dont vous avez besoin dans un seul paquet r\xe9seau.\n	\n// Callback appel\xe9e lorsque la connexion est ferm\xe9e de mani\xe8re inattendue\nFunction onError($connection : 4D.TCPConnection ; $event : 4D.TCPEvent)\n    ALERT("Connection error")\n\n// Callback appel\xe9 apr\xe8s onShutdown/onError juste avant que l\'objet TCPConnection ne soit lib\xe9r\xe9\nFunction onTerminate($connection : 4D.TCPConnection ; $event : 4D.TCPEvent)\n	ALERT("Connection terminated")\n\n\n'})}),"\n",(0,t.jsx)(n.h5,{id:"exemple-dutilisation",children:"Exemple d'utilisation"}),"\n",(0,t.jsx)(n.p,{children:"Cr\xe9er une nouvelle m\xe9thode nomm\xe9e AsyncTCP, pour initialiser et g\xe9rer la connexion TCP :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'var $myObject : cs.MyAsyncTCPConnection\n$myObject := cs.MyAsyncTCPConnection.new("myURL"; 10000)\n$myObject.connect()\n$myObject.getInfo()\n$myObject.disconnect()\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"Appeler la m\xe9thode AsyncTCP dans un worker :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'CALL WORKER("new process"; "Async_TCP")\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"objet-tcpconnection",children:"Objet TCPConnection"}),"\n",(0,t.jsx)(n.p,{children:"Un objet TCPConnection est un objet non partageable."}),"\n",(0,t.jsx)(n.p,{children:"Les objets TCPConnection offrent les propri\xe9t\xe9s et fonctions suivantes :"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsx)(n.tr,{children:(0,t.jsx)(n.th,{})})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#address",children:[(0,t.jsx)(n.strong,{children:"address"})," : Text"]}),(0,t.jsx)(n.br,{}),"l'adresse IP ou le nom de domaine de la machine distante"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#closed",children:[(0,t.jsx)(n.strong,{children:"closed"})," : Boolean"]}),(0,t.jsx)(n.br,{}),"si la connexion est ferm\xe9e"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#errors",children:[(0,t.jsx)(n.strong,{children:"errors"})," : Collection"]}),(0,t.jsx)(n.br,{}),"une collection d'objets erreur associ\xe9s \xe0 la connexion"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#listener",children:[(0,t.jsx)(n.strong,{children:"listener"})," : Object"]}),(0,t.jsx)(n.br,{}),"l'objet ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/API/TCPListenerClass",children:(0,t.jsx)(n.code,{children:"TCPListener"})})," qui a cr\xe9\xe9 la ",(0,t.jsx)(n.code,{children:"TCPConnection"}),", s'il y en a un"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#nodelay",children:[(0,t.jsx)(n.strong,{children:"noDelay"})," : Boolean"]}),(0,t.jsx)(n.br,{}),"si l'algorithme de Nagle est d\xe9sactiv\xe9 (",(0,t.jsx)(n.code,{children:"true"}),") ou activ\xe9 (",(0,t.jsx)(n.code,{children:"false"}),")"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#port",children:[(0,t.jsx)(n.strong,{children:"port"})," : Number"]}),(0,t.jsx)(n.br,{}),"le num\xe9ro de port de la machine distante"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#send",children:[(0,t.jsx)(n.strong,{children:".send"}),"( ",(0,t.jsx)(n.em,{children:"data"})," : Blob )"]}),(0,t.jsx)(n.br,{}),"envoie les donn\xe9es au serveur"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#shutdown",children:[(0,t.jsx)(n.strong,{children:".shutdown"}),"()"]}),(0,t.jsx)(n.br,{}),"ferme le canal ",(0,t.jsx)(n.em,{children:"\xe9criture"})," de la connexion (flux client vers serveur)"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#wait",children:[(0,t.jsx)(n.strong,{children:".wait"}),"( { ",(0,t.jsx)(n.em,{children:"timeout"})," : Real } )"]}),(0,t.jsx)(n.br,{}),"attend que la connexion TCP soit ferm\xe9e ou que le ",(0,t.jsx)(n.code,{children:"timeout"})," sp\xe9cifi\xe9 soit atteint"]})})]})]}),"\n",(0,t.jsx)(n.h2,{id:"4dtcpconnectionnew",children:"4D.TCPConnection.new()"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"4D.TCPConnection.new"}),"( ",(0,t.jsx)(n.em,{children:"serverAddress"})," : Text ; ",(0,t.jsx)(n.em,{children:"serverPort"})," : Number ; ",(0,t.jsx)(n.em,{children:"options"})," : Object  ) : 4D.TCPConnection"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"serverAddress"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"->"}),(0,t.jsx)(n.td,{children:"Nom de domaine ou adresse IP du serveur"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"serverPort"}),(0,t.jsx)(n.td,{children:"Integer"}),(0,t.jsx)(n.td,{children:"->"}),(0,t.jsx)(n.td,{children:"Num\xe9ro de port du serveur"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"options"}),(0,t.jsx)(n.td,{children:"Object"}),(0,t.jsx)(n.td,{children:"->"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.a,{href:"#options-parameter",children:"options"})," de configuration de la connexion"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"R\xe9sultat"}),(0,t.jsx)(n.td,{children:"4D.TCPConnection"}),(0,t.jsx)(n.td,{children:"<-"}),(0,t.jsx)(n.td,{children:"Nouvel objet TCPConnection"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La fonction ",(0,t.jsx)(n.code,{children:"4D.TCPConnection.new()"})," cr\xe9e une nouvelle connexion TCP vers les ",(0,t.jsx)(n.em,{children:"serverAddress"})," et ",(0,t.jsx)(n.em,{children:"serverPort"})," sp\xe9cifi\xe9s, en utilisant les ",(0,t.jsx)(n.em,{children:"options"})," d\xe9finies, et renvoie un objet ",(0,t.jsx)(n.code,{children:"4D.TCPConnection"}),"."]}),"\n",(0,t.jsxs)(n.h4,{id:"param\xe8tre-options",children:["Param\xe8tre ",(0,t.jsx)(n.code,{children:"options"})]}),"\n",(0,t.jsxs)(n.p,{children:["Dans le param\xe8tre ",(0,t.jsx)(n.em,{children:"options"}),", passez un objet qui peut contenir les propri\xe9t\xe9s suivantes :"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Propri\xe9t\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Par d\xe9faut"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"onConnection"}),(0,t.jsx)(n.td,{children:"Formula"}),(0,t.jsx)(n.td,{children:"Callback d\xe9clench\xe9e lorsque la connexion est \xe9tablie."}),(0,t.jsx)(n.td,{children:"Undefined"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"onData"}),(0,t.jsx)(n.td,{children:"Formula"}),(0,t.jsx)(n.td,{children:"Callback d\xe9clench\xe9e lors de la r\xe9ception de donn\xe9es"}),(0,t.jsx)(n.td,{children:"Undefined"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"onShutdown"}),(0,t.jsx)(n.td,{children:"Formula"}),(0,t.jsx)(n.td,{children:"Callback d\xe9clench\xe9e lorsque la connexion est correctement ferm\xe9e"}),(0,t.jsx)(n.td,{children:"Undefined"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"onError"}),(0,t.jsx)(n.td,{children:"Formula"}),(0,t.jsx)(n.td,{children:"Callback d\xe9clench\xe9e en cas d'erreur"}),(0,t.jsx)(n.td,{children:"Undefined"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"onTerminate"}),(0,t.jsx)(n.td,{children:"Formula"}),(0,t.jsx)(n.td,{children:"Callback d\xe9clench\xe9e juste avant que la TCPConnection ne soit lib\xe9r\xe9e"}),(0,t.jsx)(n.td,{children:"Undefined"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"noDelay"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Lecture seulement"})," D\xe9sactive l'algorithme de Nagle si ",(0,t.jsx)(n.code,{children:"true"})]}),(0,t.jsx)(n.td,{children:"False"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"fonctions-de-callback",children:"Fonctions de callback"}),"\n",(0,t.jsx)(n.p,{children:"Toutes les fonctions de callback re\xe7oivent deux param\xe8tres :"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$connection"}),(0,t.jsx)(n.td,{children:(0,t.jsxs)(n.a,{href:"#tcpconnection-object",children:["objet ",(0,t.jsx)(n.code,{children:"TCPConnection"})]})}),(0,t.jsx)(n.td,{children:"L'instance de connexion TCP courante."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$event"}),(0,t.jsx)(n.td,{children:(0,t.jsxs)(n.a,{href:"#tcpevent-object",children:["objet ",(0,t.jsx)(n.code,{children:"TCPEvent"})]})}),(0,t.jsx)(n.td,{children:"Contient des informations sur l'\xe9v\xe9nement."})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"S\xe9quence des appels de callbacks :"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onConnection"})," est d\xe9clench\xe9e lorsque la connexion est \xe9tablie."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onData"})," est d\xe9clench\xe9e \xe0 chaque fois que des donn\xe9es sont re\xe7ues."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onShutdown"})," ou ",(0,t.jsx)(n.code,{children:"onError"})," est d\xe9clench\xe9e :\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onShutdown"})," est d\xe9clench\xe9e lorsque la connexion est correctement ferm\xe9e."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onError"})," est d\xe9clench\xe9e en cas d'erreur."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onTerminate"})," est toujours d\xe9clench\xe9e juste avant que la TCPConnection soit lib\xe9r\xe9e (la connexion est ferm\xe9e ou une erreur s'est produite)."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"objet-tcpevent",children:"Objet TCPEvent"}),"\n",(0,t.jsxs)(n.p,{children:["Un objet ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/API/TCPEventClass",children:(0,t.jsx)(n.code,{children:"TCPEvent"})})," est renvoy\xe9 lorsqu'une ",(0,t.jsx)(n.a,{href:"#callback-functions",children:"fonction de callback"})," est appel\xe9e."]}),"\n",(0,t.jsx)(n.h2,{id:"adresse",children:".adresse"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"address"})," : Text"]}),"\n",(0,t.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,t.jsx)(n.code,{children:".address"})," contient l'adresse IP ou le nom de domaine de la machine distante."]}),"\n",(0,t.jsx)(n.h2,{id:"closed",children:".closed"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"closed"})," : Boolean"]}),"\n",(0,t.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,t.jsx)(n.code,{children:".closed"})," indique si la connexion est ferm\xe9e. Retourne ",(0,t.jsx)(n.code,{children:"true"})," si la connexion est ferm\xe9e en raison d'une erreur, d'un appel \xe0 ",(0,t.jsx)(n.code,{children:"shutdown()"}),", ou de la fermeture par le serveur."]}),"\n",(0,t.jsx)(n.h2,{id:"errors",children:".errors"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"errors"})," : Collection"]}),"\n",(0,t.jsx)(n.h4,{id:"description-3",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,t.jsx)(n.code,{children:".errors"})," contient une collection d'objets erreur associ\xe9s \xe0 la connexion. Chaque objet erreur comprend le code d'erreur, une description et la signature du composant qui a provoqu\xe9 l'erreur."]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Propri\xe9t\xe9"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"errors"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"Collection"}),(0,t.jsx)(n.td,{children:"Pile d'erreurs 4D en cas d'erreur"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"[].errCode"}),(0,t.jsx)(n.td,{children:"Number"}),(0,t.jsx)(n.td,{children:"Code d'erreur 4D"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"[].message"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"Description de l'erreur 4D"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"[].componentSignature"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"Signature du composant interne qui a retourn\xe9 l'erreur"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"listener",children:".listener"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"listener"})," : Object"]}),"\n",(0,t.jsx)(n.h4,{id:"description-4",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,t.jsx)(n.code,{children:".listener"})," contient l'objet ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/API/TCPListenerClass",children:(0,t.jsx)(n.code,{children:"TCPListener"})})," qui a cr\xe9\xe9 la ",(0,t.jsx)(n.code,{children:"TCPConnection"}),", s'il y en a un. Cette propri\xe9t\xe9 est en ",(0,t.jsx)(n.strong,{children:"lecture seule"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"nodelay",children:".noDelay"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"noDelay"})," : Boolean"]}),"\n",(0,t.jsx)(n.h4,{id:"description-5",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,t.jsx)(n.code,{children:".noDelay"})," indiquesi l'algorithme de Nagle est d\xe9sactiv\xe9 (",(0,t.jsx)(n.code,{children:"true"}),") ou activ\xe9 (",(0,t.jsx)(n.code,{children:"false"}),"). Cette propri\xe9t\xe9 est en ",(0,t.jsx)(n.strong,{children:"lecture seule"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"port",children:".port"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"port"})," : Number"]}),"\n",(0,t.jsx)(n.h4,{id:"description-6",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,t.jsx)(n.code,{children:".port"})," contient le num\xe9ro de port de la machine distante. Cette propri\xe9t\xe9 est en ",(0,t.jsx)(n.strong,{children:"lecture seule"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"send",children:".send()"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:".send"}),"( ",(0,t.jsx)(n.em,{children:"data"})," : Blob )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"data"}),(0,t.jsx)(n.td,{children:"Blob"}),(0,t.jsx)(n.td,{children:"->"}),(0,t.jsx)(n.td,{children:"Donn\xe9es \xe0 envoyer"})]})})]}),"\n",(0,t.jsx)(n.h4,{id:"description-7",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La fonction ",(0,t.jsx)(n.code,{children:"send()"})," envoie les donn\xe9es au serveur. Si la connexion n'est pas encore \xe9tablie, les donn\xe9es sont envoy\xe9es une fois la connexion \xe9tablie."]}),"\n",(0,t.jsx)(n.h2,{id:"shutdown",children:".shutdown()"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:".shutdown"}),"()"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{style:{textAlign:"center"}}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{style:{textAlign:"center"}}),(0,t.jsx)(n.td,{children:"Ne requiert aucun param\xe8tre"})]})})]}),"\n",(0,t.jsx)(n.h4,{id:"description-8",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La fonction ",(0,t.jsx)(n.code,{children:"shutdown()"})," ferme le canal ",(0,t.jsx)(n.em,{children:"\xe9criture"})," de la connexion (flux client vers serveur) tout en gardant le canal ",(0,t.jsx)(n.em,{children:"lecture"})," (flux serveur vers client) ouvert, ce qui vous permet de continuer \xe0 recevoir des donn\xe9es jusqu'\xe0 ce que la connexion soit compl\xe8tement ferm\xe9e par le serveur ou qu'une erreur se produise."]}),"\n",(0,t.jsx)(n.h2,{id:"wait",children:".wait()"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:".wait"}),"( { ",(0,t.jsx)(n.em,{children:"timeout"})," : Real } )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{style:{textAlign:"center"}}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timeout"}),(0,t.jsx)(n.td,{children:"Real"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"->"}),(0,t.jsx)(n.td,{children:"D\xe9lai d'attente maximum en secondes pour la r\xe9ponse"})]})})]}),"\n",(0,t.jsx)(n.h4,{id:"description-9",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La fonction ",(0,t.jsx)(n.code,{children:"wait()"})," attend que la connexion TCP soit ferm\xe9e ou que le ",(0,t.jsx)(n.code,{children:"timeout"})," sp\xe9cifi\xe9 soit atteint"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Pendant une ex\xe9cution ",(0,t.jsx)(n.code,{children:".wait()"}),", les fonctions de callback sont ex\xe9cut\xe9es, en particulier les callbacks provenant d'autres \xe9v\xe9nements ou d'autres instances de ",(0,t.jsx)(n.code,{children:"SystemWorker"}),". Vous pouvez sortir d'un ",(0,t.jsx)(n.code,{children:".wait()"})," en appelant ",(0,t.jsx)(n.a,{href:"#shutdown",children:(0,t.jsx)(n.code,{children:"shutdown()"})})," depuis un callback."]})})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},250065:function(e,n,s){s.d(n,{Z:()=>o,a:()=>c});var r=s(667294);let t={},i=r.createContext(t);function c(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);