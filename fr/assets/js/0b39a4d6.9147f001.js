"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["20845"],{695124:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>t,toc:()=>c,default:()=>u,metadata:()=>o,assets:()=>a,contentTitle:()=>i});var o=JSON.parse('{"id":"aikit/asynchronous-call","title":"Appel asynchrone","description":"Si vous ne souhaitez pas attendre la r\xe9ponse de l\'OpenAPI lorsque vous envoyez une requ\xeate \xe0 son API, vous devez utiliser un code asynchrone.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-21/aikit/asynchronous-call.md","sourceDirName":"aikit","slug":"/aikit/asynchronous-call","permalink":"/docs/fr/aikit/asynchronous-call","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20aikit%2Fasynchronous-call.md%20(21)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"21","frontMatter":{"id":"asynchronous-call","title":"Appel asynchrone"},"sidebar":"docs","previous":{"title":"4D-AIKit","permalink":"/docs/fr/aikit/overview"},"next":{"title":"Fournisseurs (Providers)","permalink":"/docs/fr/aikit/compatible-openai"}}'),l=n(474848),r=n(884429);let t={id:"asynchronous-call",title:"Appel asynchrone"},i="Appel asynchrone",a={},c=[{value:"A propos des process",id:"a-propos-des-process",level:2},{value:"Exemples d\u2019utilisation",id:"exemples-dutilisation",level:2},{value:"Liste de mod\xe8les",id:"liste-de-mod\xe8les",level:3},{value:"Compl\xe9tions de chat",id:"compl\xe9tions-de-chat",level:3}];function d(e){let s={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"appel-asynchrone",children:"Appel asynchrone"})}),"\n",(0,l.jsx)(s.p,{children:"Si vous ne souhaitez pas attendre la r\xe9ponse de l'OpenAPI lorsque vous envoyez une requ\xeate \xe0 son API, vous devez utiliser un code asynchrone."}),"\n",(0,l.jsxs)(s.p,{children:["Pour effectuer des appels asynchrones, vous devez fournir une ",(0,l.jsx)(s.code,{children:"4D.Function"}),"(",(0,l.jsx)(s.code,{children:"Formula"}),") de rappel (",(0,l.jsx)(s.em,{children:"callback"}),") dans le param\xe8tre objet ",(0,l.jsx)(s.a,{href:"/docs/fr/aikit/Classes/openaiparameters",children:"OpenAIParameters"})," pour recevoir le r\xe9sultat."]}),"\n",(0,l.jsxs)(s.p,{children:["La fonction de callback recevra le m\xeame type d'objet de r\xe9sultat (l'une des classes enfant de ",(0,l.jsx)(s.a,{href:"/docs/fr/aikit/Classes/openairesult",children:"OpenAIResult"}),") que celui qui serait renvoy\xe9 par la fonction dans un code synchrone. Voir les exemples ci-dessous."]}),"\n",(0,l.jsx)(s.h2,{id:"a-propos-des-process",children:"A propos des process"}),"\n",(0,l.jsxs)(s.p,{children:["La m\xe9thode asynchrone est bas\xe9e sur ",(0,l.jsx)(s.a,{href:"https://developer.4d.com/docs/API/HTTPRequestClass",children:"4D.HTTPRequest"}),", ainsi la r\xe9ponse sera re\xe7ue dans le process courant."]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["\u26A0\uFE0F Si votre process se termine \xe0 la fin de la m\xe9thode courante (par exemple, si vous utilisez New process ou l'\xe9diteur de m\xe9thode), la formule de callback peut ne pas \xeatre appel\xe9e de mani\xe8re asynchrone. Dans ce cas, il est n\xe9cessaire d'utiliser ",(0,l.jsx)(s.code,{children:"CALL WORKER"})," ou ",(0,l.jsx)(s.code,{children:"CALL FORM"}),"."]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"exemples-dutilisation",children:"Exemples d\u2019utilisation"}),"\n",(0,l.jsx)(s.h3,{id:"liste-de-mod\xe8les",children:"Liste de mod\xe8les"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-4d",children:"$client.models.list({formula: Formula(MyReceiveMethod($1))})\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"$1"})," sera une instance de ",(0,l.jsx)(s.a,{href:"/docs/fr/aikit/Classes/openaimodellistresult",children:"OpenAIModelListResult"}),", donc la m\xe9thode ",(0,l.jsx)(s.code,{children:"MyReceiveMethod"})," pourrait \xeatre :"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-4d",children:'#DECLARE($result: cs.AIKit.OpenAIModelListResult)\n\nIf($result.success)\n\n   Form.models:=$result.models\n\nElse\n\n  Alert($result.errors.formula(Formula(JSON Stringify($1))).join("\\n"))\n\nEnd if\n'})}),"\n",(0,l.jsx)(s.h3,{id:"compl\xe9tions-de-chat",children:"Compl\xe9tions de chat"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-4d",children:'var $messages:=[{role: "system"; content: "You are a helpful assistant."}]\n$messages.push({role: "user"; content: "Could you explain me why 42 is a special number"})\n\n$client.chat.completions.create($messages; { onResponse: Formula(MyChatCompletionsReceiveMethod($1))})\n'})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"$1"})," sera une instance de ",(0,l.jsx)(s.a,{href:"/docs/fr/aikit/Classes/openaichatcompletionsresult",children:"OpenAIChatCompletionsResult"}),", donc la m\xe9thode ",(0,l.jsx)(s.code,{children:"MyChatCompletionsReceiveMethod"})," pourrait \xeatre :"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-4d",children:"#DECLARE($result: cs.AIKit.OpenAIChatCompletionsResult)\n\nASSERT($result.success) // Nous utilisons ici onResponse, le callback n'est re\xe7u qu'en cas de succ\xe8s.\nForm.assistantMessage:=$result.choices[0].text\n"})})]})}function u(e={}){let{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},884429:function(e,s,n){n.d(s,{R:()=>t,x:()=>i});var o=n(296540);let l={},r=o.createContext(l);function t(e){let s=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),o.createElement(r.Provider,{value:s},e.children)}}}]);