"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["84654"],{474585:function(e,n,t){t.r(n),t.d(n,{default:()=>m,frontMatter:()=>i,metadata:()=>r,assets:()=>a,toc:()=>c,contentTitle:()=>d});var r=JSON.parse('{"id":"commands-legacy/dom-create-xml-element","title":"DOM Create XML element","description":"DOM Create XML element ( refEl\xe9ment ; xPath {; nomAttribut ; valeurAttribut} {; nomAttribut2 ; valeurAttribut2 ; ... ; nomAttributN ; valeurAttributN} ) : Text","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R8/commands-legacy/dom-create-xml-element.md","sourceDirName":"commands-legacy","slug":"/commands/dom-create-xml-element","permalink":"/docs/fr/commands/dom-create-xml-element","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fdom-create-xml-element.md%20(20-R8)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R8","frontMatter":{"id":"dom-create-xml-element","title":"DOM Create XML element","slug":"/commands/dom-create-xml-element","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"DOM Count XML elements","permalink":"/docs/fr/commands/dom-count-xml-elements"},"next":{"title":"DOM Create XML element arrays","permalink":"/docs/fr/commands/dom-create-xml-element-arrays"}}'),s=t("785893"),l=t("250065");let i={id:"dom-create-xml-element",title:"DOM Create XML element",slug:"/commands/dom-create-xml-element",displayed_sidebar:"docs"},d=void 0,a={},c=[{value:"Description",id:"description",level:4},{value:"Exemple 1",id:"exemple-1",level:4},{value:"Exemple 2",id:"exemple-2",level:4},{value:"Exemple 3",id:"exemple-3",level:4},{value:"Variables et ensembles syst\xe8me",id:"variables-et-ensembles-syst\xe8me",level:4},{value:"Gestion des erreurs",id:"gestion-des-erreurs",level:4},{value:"Voir aussi",id:"voir-aussi",level:4},{value:"Propri\xe9t\xe9s",id:"propri\xe9t\xe9s",level:4}];function o(e){let n={a:"a",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"DOM Create XML element"})," ( ",(0,s.jsx)(n.em,{children:"refEl\xe9ment"})," ; ",(0,s.jsx)(n.em,{children:"xPath"})," {; ",(0,s.jsx)(n.em,{children:"nomAttribut"})," ; ",(0,s.jsx)(n.em,{children:"valeurAttribut"}),"} {; ",(0,s.jsx)(n.em,{children:"nomAttribut2"})," ; ",(0,s.jsx)(n.em,{children:"valeurAttribut2"})," ; ... ; ",(0,s.jsx)(n.em,{children:"nomAttributN"})," ; ",(0,s.jsx)(n.em,{children:"valeurAttributN"}),"} ) : Text"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Param\xe8tre"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"refEl\xe9ment"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"R\xe9f\xe9rence d\u2019\xe9l\xe9ment XML racine"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"xPath"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Chemin XPath de l\u2019\xe9l\xe9ment XML \xe0 cr\xe9er"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"nomAttribut"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Attribut \xe0 d\xe9finir"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"valeurAttribut"}),(0,s.jsx)(n.td,{children:"Text, Boolean, Integer, Real, Time, Date"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Nouvelle valeur d\u2019attribut"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"R\xe9sultat"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"R\xe9f\xe9rence de l\u2019\xe9l\xe9ment XML cr\xe9\xe9"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["La commande ",(0,s.jsx)(n.strong,{children:"DOM Create XML element"})," permet de cr\xe9er un nouvel \xe9l\xe9ment dans l\u2019\xe9l\xe9ment XML ",(0,s.jsx)(n.em,{children:"refEl\xe9ment"}),", \xe0 l\u2019emplacement du noeud d\xe9sign\xe9 par le param\xe8tre ",(0,s.jsx)(n.em,{children:"xPath"}),", et de lui ajouter \xe9ventuellement des attributs."]}),"\n",(0,s.jsxs)(n.p,{children:["Passez dans ",(0,s.jsx)(n.em,{children:"refEl\xe9ment"})," la r\xe9f\xe9rence de l\u2019\xe9l\xe9ment racine (cr\xe9\xe9 par exemple \xe0 l\u2019aide de la commande ",(0,s.jsx)(n.a,{href:"/docs/fr/commands/dom-create-xml-ref",children:"DOM Create XML Ref"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["Passez dans ",(0,s.jsx)(n.em,{children:"xPath"})," le chemin de l\u2019\xe9l\xe9ment \xe0 cr\xe9er, exprim\xe9 \xe0 l'aide de la notation XPath (pour plus d'informations, reportez-vous \xe0 la section ",(0,s.jsx)(n.em,{children:"Utilisation de la notation XPath"}),"). Les expressions de chemin suivantes sont prises en charge :"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Expression"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Action"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"/"}),(0,s.jsx)(n.td,{children:"D\xe9singe le noeud racine (chemin absolu)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"para[1]"}),(0,s.jsx)(n.td,{children:"D\xe9signe le premier para enfant du noeud contextuel"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"para[last()]"}),(0,s.jsx)(n.td,{children:"D\xe9signe le dernier para enfant du noeud contextuel"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note de compatibilit\xe9 :"})," ",(0,s.jsxs)(n.em,{children:["A partir de v18 R3, la conformit\xe9 de l'impl\xe9mentation de XPath dans 4D est renforc\xe9e. Pour des raisons de compatibilit\xe9, l'impl\xe9mentation ant\xe9rieure non standard est maintenue par d\xe9faut dans les bases converties. Si vous souhaitez obtenir les fonctionnalit\xe9s avanc\xe9es dans vos bases converties, vous devez cocher l'option de compatibilit\xe9 ",(0,s.jsx)(n.em,{children:"Utiliser XPath standard"})," de la"]})," *",(0,s.jsx)(n.em,{children:"Page Compatibilit\xe9."})]}),"\n",(0,s.jsxs)(n.p,{children:["Il est possible de passer directement dans ",(0,s.jsx)(n.em,{children:"xPath"})," un nom d'\xe9l\xe9ment simple afin de cr\xe9er un sous-\xe9l\xe9ment \xe0 partir de l'\xe9l\xe9ment courant (cf. exemple 3)."]}),"\n",(0,s.jsx)(n.p,{children:"Si des \xe9l\xe9ments de chemin n'existent pas, ils sont alors cr\xe9\xe9s. Si les \xe9l\xe9ments de chemin existent d\xe9j\xe0, un nouveau noeud est ajout\xe9."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note :"})," Si vous avez d\xe9fini un ou plusieurs espace(s) de nommage pour l\u2019arbre d\xe9sign\xe9 par ",(0,s.jsx)(n.em,{children:"refEl\xe9ment"})," (cf. commande ",(0,s.jsx)(n.a,{href:"/docs/fr/commands/dom-create-xml-ref",children:"DOM Create XML Ref"}),"), vous devez pr\xe9fixer le param\xe8tre ",(0,s.jsx)(n.em,{children:"xPath"})," du nom de l\u2019espace \xe0 utiliser (par exemple \u201CMonNameSpace:MonEl\xe9ment\u201D)."]}),"\n",(0,s.jsxs)(n.p,{children:["Vous pouvez passer dans les param\xe8tres facultatifs ",(0,s.jsx)(n.em,{children:"nomAttribut"})," et ",(0,s.jsx)(n.em,{children:"valeurAttribut"})," un couple attribut / valeur d\u2019attribut (sous forme de variables, champs ou valeurs litt\xe9rales). Vous pouvez passer autant de couples que vous voulez."]}),"\n",(0,s.jsxs)(n.p,{children:["Le param\xe8tre ",(0,s.jsx)(n.em,{children:"valeurAttribut"})," peut \xeatre de type texte ou d'un autre type (bool\xe9en, entier, r\xe9el, heure ou date). Si vous passez une valeur d'un type autre que texte, 4D se charge de la conversion en texte, selon les principes suivants :"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Type"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Exemple de valeur convertie"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Bool\xe9en"}),(0,s.jsx)(n.td,{children:'"true" ou "false" (non traduit)'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Entier"}),(0,s.jsx)(n.td,{children:'"123456"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"R\xe9el"}),(0,s.jsx)(n.td,{children:'"12.34" (le s\xe9parateur d\xe9cimal est toujours ".")'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Heure"}),(0,s.jsx)(n.td,{children:'"5233" (nombre de secondes)'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Date"}),(0,s.jsx)(n.td,{children:'"2006-12-04T00:00:00Z" (norme RFC 3339)'})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"La commande retourne en r\xe9sultat la r\xe9f\xe9rence XML de l\u2019\xe9l\xe9ment cr\xe9\xe9."}),"\n",(0,s.jsx)(n.h4,{id:"exemple-1",children:"Exemple 1"}),"\n",(0,s.jsx)(n.p,{children:"Nous souhaitons cr\xe9er l\u2019\xe9l\xe9ment suivant :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-RAW",children:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n"})}),"\n",(0,s.jsx)(n.p,{children:"Pour cela, il suffit d\u2019\xe9crire :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var vRefRacine;vRefElement : Text\n\xa0vRefRacine:=DOM Create XML Ref("RootElement")\n\xa0vxPath:="/RootElement/Elem1/Elem2/Elem3[2]"\n\xa0vRefElement:=DOM Create XML element(vRefRacine;vxPath)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"exemple-2",children:"Exemple 2"}),"\n",(0,s.jsx)(n.p,{children:"Nous souhaitons cr\xe9er l\u2019\xe9l\xe9ment suivant (comportant des attributs) :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-RAW",children:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n"})}),"\n",(0,s.jsx)(n.p,{children:"Pour cela, il suffit d\u2019\xe9crire :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var vRefRacine;vRefElement : Text\n\xa0\xa0\xa0var $aAttrNom1;$aAttrNom2;$aAttrVal1;$aAttrVal2;$aAttrVal3 : Text\n\n$aAttrNom1:="Font"\n\xa0$aAttrNom2:="Size"\n\xa0$aAttrVal1:="Verdana"\n\xa0$aAttrVal2:="10"\n\xa0$aAttrVal3:="8"\n\xa0\n\xa0vRefRacine:=DOM Create XML Ref("RootElement")\n\xa0vxPath:="/RootElement/Elem1/Elem2/Elem3"\n\xa0vRefElement:=DOM Create XML element(vRefRacine;vxPath;$aAttrNom1;$aAttrVal1;$aAttrNom2;$aAttrVal2)\n\xa0vRefElement:=DOM Create XML element(vRefRacine;vxPath;$aAttrNom1;$aAttrVal1;$aAttrNom2;$aAttrVal3)\n\n\n'})}),"\n",(0,s.jsx)(n.p,{children:"Si par la suite vous souhaitez ins\xe9rer un \xe9l\xe9ment, vous pouvez saisir le code suivant :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0vxPath:="/RootElement/Elem1/Elem2/Elem3[2]"\xa0\n\xa0vElemRef:=DOM Creer element\xa0XML(vRefRacine;vxPath;"Font";"Arial")\n'})}),"\n",(0,s.jsx)(n.p,{children:"Vous obtenez alors :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-RAW",children:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n"})}),"\n",(0,s.jsx)(n.h4,{id:"exemple-3",children:"Exemple 3"}),"\n",(0,s.jsx)(n.p,{children:"Nous souhaitons cr\xe9er et exporter la structure suivante :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-XML",children:'<?xml version="1.0" encoding="UTF-8" standalone="no" ?>\n<Racine>\n\xa0\xa0\xa0<Elem1>Hello</Elem1>\n</Racine>\n'})}),"\n",(0,s.jsx)(n.p,{children:"Nous souhaitons utiliser la syntaxe bas\xe9e sur un nom d'\xe9l\xe9ment simple. Pour cela, il suffit d\u2019\xe9crire :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var $root : Text\n\xa0var $ref1 : Text\n\xa0\n\xa0$root:=DOM Create XML Ref("Racine")\n\xa0$ref1:=DOM Create XML element($root;"Elem1")\n\xa0DOM SET XML ELEMENT VALUE($ref1;"Hello")\n\xa0DOM EXPORT TO FILE($root;"mondoc.xml")\n\xa0DOM CLOSE XML($root)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"variables-et-ensembles-syst\xe8me",children:"Variables et ensembles syst\xe8me"}),"\n",(0,s.jsx)(n.p,{children:"Si la commande a \xe9t\xe9 ex\xe9cut\xe9e correctement, la variable syst\xe8me OK prend la valeur 1, sinon elle prend la valeur 0 et une erreur est g\xe9n\xe9r\xe9e."}),"\n",(0,s.jsx)(n.h4,{id:"gestion-des-erreurs",children:"Gestion des erreurs"}),"\n",(0,s.jsx)(n.p,{children:"Une erreur est g\xe9n\xe9r\xe9e lorsque :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"la r\xe9f\xe9rence de l\u2019\xe9l\xe9ment racine n\u2019est pas valide"}),"\n",(0,s.jsx)(n.li,{children:"le nom de l\u2019\xe9l\xe9ment \xe0 cr\xe9er n\u2019est pas valide (par exemple, s\u2019il d\xe9bute par un chiffre)."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"voir-aussi",children:"Voir aussi"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/fr/commands/dom-create-xml-element-arrays",children:"DOM Create XML element arrays"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.a,{href:"/docs/fr/commands/dom-get-xml-element",children:"DOM Get XML element"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.a,{href:"/docs/fr/commands/dom-remove-xml-element",children:"DOM REMOVE XML ELEMENT"})]}),"\n",(0,s.jsx)(n.h4,{id:"propri\xe9t\xe9s",children:"Propri\xe9t\xe9s"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Num\xe9ro de commande"}),(0,s.jsx)(n.td,{children:"865"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Thread safe"}),(0,s.jsx)(n.td,{children:"\u2713"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Modifie les variables"}),(0,s.jsx)(n.td,{children:"OK, error"})]})]})]})]})}function m(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return d},a:function(){return i}});var r=t(667294);let s={},l=r.createContext(s);function i(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);