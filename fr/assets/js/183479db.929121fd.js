"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["9696"],{578700:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>l,toc:()=>c,default:()=>h,metadata:()=>i,assets:()=>o,contentTitle:()=>d});var i=JSON.parse('{"id":"API/SessionClass","title":"Session","description":"Les objets session sont retourn\xe9s par la commande Session. Ces objets fournissent au d\xe9veloppeur une interface permettant de g\xe9rer la session utilisateur courante et d\'ex\xe9cuter des actions telles que le stockage de donn\xe9es contextuelles, le partage d\'informations entre les process de la session, le lancement de process pr\xe9emptifs li\xe9s \xe0 la session ou (uniquement pour le web) la gestion des privil\xe8ges.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R10/API/SessionClass.md","sourceDirName":"API","slug":"/API/SessionClass","permalink":"/docs/fr/20-R10/API/SessionClass","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FSessionClass.md%20(20-R10)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R10","frontMatter":{"id":"SessionClass","title":"Session"},"sidebar":"docs","previous":{"title":"POP3Transporter","permalink":"/docs/fr/20-R10/API/POP3TransporterClass"},"next":{"title":"Signal","permalink":"/docs/fr/20-R10/API/SignalClass"}}'),r=n(474848),t=n(884429);let l={id:"SessionClass",title:"Session"},d,o={},c=[{value:"Types de sessions",id:"types-de-sessions",level:3},{value:"Sommaire",id:"sommaire",level:3},{value:".clearPrivileges()",id:"clearprivileges",level:2},{value:"Description",id:"description",level:4},{value:"Exemple",id:"exemple",level:4},{value:".createOTP()",id:"createotp",level:2},{value:"Description",id:"description-1",level:4},{value:"Exemple",id:"exemple-1",level:4},{value:".demote()",id:"demote",level:2},{value:"Description",id:"description-2",level:4},{value:"Exemple",id:"exemple-2",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement",level:4},{value:".expirationDate",id:"expirationdate",level:2},{value:"Description",id:"description-3",level:4},{value:"Exemple",id:"exemple-3",level:4},{value:".getPrivileges()",id:"getprivileges",level:2},{value:"Description",id:"description-4",level:4},{value:"Exemple",id:"exemple-4",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-1",level:4},{value:".hasPrivilege()",id:"hasprivilege",level:2},{value:"Description",id:"description-5",level:4},{value:"Exemple",id:"exemple-5",level:4},{value:".id",id:"id",level:2},{value:"Description",id:"description-6",level:4},{value:".idleTimeout",id:"idletimeout",level:2},{value:"Description",id:"description-7",level:4},{value:"Exemple",id:"exemple-6",level:4},{value:".info",id:"info",level:2},{value:"Description",id:"description-8",level:4},{value:".isGuest()",id:"isguest",level:2},{value:"Description",id:"description-9",level:4},{value:"Exemple",id:"exemple-7",level:4},{value:".promote()",id:"promote",level:2},{value:"Description",id:"description-10",level:4},{value:"Exemple",id:"exemple-8",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-2",level:4},{value:".restore()",id:"restore",level:2},{value:"Description",id:"description-11",level:4},{value:"Exemple",id:"exemple-9",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-3",level:4},{value:".setPrivileges()",id:"setprivileges",level:2},{value:"Description",id:"description-12",level:4},{value:"Exemple",id:"exemple-10",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-4",level:4},{value:".storage",id:"storage",level:2},{value:"Description",id:"description-13",level:4},{value:"Exemple de session Web",id:"exemple-de-session-web",level:4},{value:"Exemple de session distante",id:"exemple-de-session-distante",level:4},{value:".userName",id:"username",level:2},{value:"Description",id:"description-14",level:4}];function a(e){let s={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["Les objets session sont retourn\xe9s par la commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/session",children:(0,r.jsx)(s.code,{children:"Session"})}),". Ces objets fournissent au d\xe9veloppeur une interface permettant de g\xe9rer la session utilisateur courante et d'ex\xe9cuter des actions telles que le stockage de donn\xe9es contextuelles, le partage d'informations entre les process de la session, le lancement de process pr\xe9emptifs li\xe9s \xe0 la session ou (uniquement pour le web) la gestion des ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges",children:"privil\xe8ges"}),"."]}),"\n",(0,r.jsx)(s.admonition,{title:"Articles de blog sur le sujet",type:"tip",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://blog.4d.com/scalable-sessions-for-advanced-web-applications/",children:"Sessions \xe9volutives pour applications web avanc\xe9es"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://blog.4d.com/permissions-inspect-session-privileges-for-easy-debugging/",children:"Permissions : Inspecter les privil\xe8ges de la session pour faciliter le d\xe9bogage"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://blog.4d.com/connect-your-web-apps-to-third-party-systems/",children:"G\xe9n\xe9rer, partager et utiliser des passcodes \xe0 usage unique (OTP) pour les sessions web"})}),"\n"]})}),"\n",(0,r.jsx)(s.h3,{id:"types-de-sessions",children:"Types de sessions"}),"\n",(0,r.jsx)(s.p,{children:"Les types de sessions suivants sont pris en charge par cette classe :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/WebServer/sessions",children:(0,r.jsx)(s.strong,{children:"Session utilisateur Web"})})," : Les sessions utilisateur Web sont disponibles lorsque ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/WebServer/sessions#enabling-web-sessions",children:"les sessions \xe9volutives (scalable sessions) sont activ\xe9es dans votre projet"}),". Elles sont utilis\xe9es pour les connexions Web et REST, et peuvent se voir attribuer des privil\xe8ges."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/Desktop/clientServer#remote-user-sessions",children:(0,r.jsx)(s.strong,{children:"Session utilisateur client distant"})})," : Dans les applications client/serveur, les utilisateurs distants ont leurs propres sessions g\xe9r\xe9es sur le serveur."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://doc.4d.com/4Dv20/4D/20/4D-Server-and-the-4D-Language.300-6330554.en.html",children:(0,r.jsx)(s.strong,{children:"Session des proc\xe9dures stock\xe9es"})})," : Toutes les proc\xe9dures stock\xe9es ex\xe9cut\xe9es sur le serveur partagent la m\xeame session utilisateur virtuelle."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/GettingStarted/overview#development",children:(0,r.jsx)(s.strong,{children:"Session autonome"})})," : objet session local retourn\xe9 dans une application mono-utilisateur (utile dans les phases de d\xe9veloppement et de test des applications client/serveur)."]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["La disponibilit\xe9 des propri\xe9t\xe9s et des fonctions de l'objet ",(0,r.jsx)(s.code,{children:"Session"})," d\xe9pend du type de session."]})}),"\n",(0,r.jsx)(s.h3,{id:"sommaire",children:"Sommaire"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsx)(s.tr,{children:(0,r.jsx)(s.th,{})})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#clearprivileges",children:[(0,r.jsx)(s.strong,{children:".clearPrivileges()"})," : Boolean"]}),(0,r.jsx)(s.br,{}),"supprime tous les privil\xe8ges associ\xe9s \xe0 la session (\xe0 l'exception des privil\xe8ges promus) et renvoie ",(0,r.jsx)(s.strong,{children:"True"})," si l'ex\xe9cution a r\xe9ussi"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#createotp",children:[(0,r.jsx)(s.strong,{children:".createOTP"})," ( { ",(0,r.jsx)(s.em,{children:"lifespan"})," : Integer } ) : Text "]}),(0,r.jsx)(s.br,{}),"cr\xe9e un nouvel OTP (One Time Passcode) pour la session et renvoie son UUID de token"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#demote",children:[(0,r.jsx)(s.strong,{children:".demote"}),"( ",(0,r.jsx)(s.em,{children:"promoteId"})," : Integer )"]}),(0,r.jsx)(s.br,{}),"supprime du process web le privil\xe8ge promu dont l'identifiant a \xe9t\xe9 pass\xe9 dans ",(0,r.jsx)(s.em,{children:"promoteId"}),", s'il a \xe9t\xe9 pr\xe9c\xe9demment ajout\xe9 par la fonction ",(0,r.jsx)(s.a,{href:"#promote",children:(0,r.jsx)(s.code,{children:".promote()"})})]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#expirationdate",children:[(0,r.jsx)(s.strong,{children:".expirationDate"})," : Text"]}),(0,r.jsx)(s.br,{}),"la date et l'heure d'expiration du cookie de session"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#getprivileges",children:[(0,r.jsx)(s.strong,{children:".getPrivileges"}),"() : Collection"]}),(0,r.jsx)(s.br,{}),"renvoie une collection contenant tous les noms de privil\xe8ges associ\xe9s \xe0 la session"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#hasprivilege",children:[(0,r.jsx)(s.strong,{children:".hasPrivilege"}),"( ",(0,r.jsx)(s.em,{children:"privilege"})," : Text ) : Boolean"]}),(0,r.jsx)(s.br,{}),"renvoie True si le ",(0,r.jsx)(s.em,{children:"privilege"})," est associ\xe9 \xe0 la session, et False sinon"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#id",children:[(0,r.jsx)(s.strong,{children:".id"})," : Text"]}),(0,r.jsx)(s.br,{}),"l'identifiant unique (UUID) de la session utilisateur"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#idletimeout",children:[(0,r.jsx)(s.strong,{children:".idleTimeout"})," : Integer"]}),(0,r.jsx)(s.br,{}),"le d\xe9lai maximal d'inactivit\xe9 de session (en minutes), au-del\xe0 duquel la session est automatiquement ferm\xe9e par 4D"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#info",children:[(0,r.jsx)(s.strong,{children:".info"})," : Object"]}),(0,r.jsx)(s.br,{}),"d\xe9crit le client distant ou la session de proc\xe9dure stock\xe9e sur le serveur, ou la session autonome"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#isguest",children:[(0,r.jsx)(s.strong,{children:".isGuest()"})," : Boolean"]}),(0,r.jsx)(s.br,{}),"renvoie True si la session est une session Guest (c'est-\xe0-dire qu'elle n'a aucun privil\xe8ge)"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#promote",children:[(0,r.jsx)(s.strong,{children:".promote"}),"( ",(0,r.jsx)(s.em,{children:"privilege"})," : Text ) : Integer"]}),(0,r.jsx)(s.br,{}),"ajoute le privil\xe8ge d\xe9fini dans le param\xe8tre ",(0,r.jsx)(s.em,{children:"privilege"})," au process courant durant l'ex\xe9cution de la fonction appelante et renvoie l'identifiant du privil\xe8ge promu"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#restore",children:[(0,r.jsx)(s.strong,{children:".restore"})," ( ",(0,r.jsx)(s.em,{children:"token"})," : Text ) : Boolean "]}),(0,r.jsx)(s.br,{}),"remplace la session courante de l'utilisateur Web par sa session originale correspondant \xe0 l'UUID ",(0,r.jsx)(s.em,{children:"token"})]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#setprivileges",children:[(0,r.jsx)(s.strong,{children:".setPrivileges"}),"( ",(0,r.jsx)(s.em,{children:"privilege"})," : Text ) : Boolean",(0,r.jsx)(s.br,{}),(0,r.jsx)(s.strong,{children:".setPrivileges"}),"( ",(0,r.jsx)(s.em,{children:"privileges"})," : Collection )",(0,r.jsx)(s.br,{}),(0,r.jsx)(s.strong,{children:".setPrivileges"}),"( ",(0,r.jsx)(s.em,{children:"settings"})," : Object ) : Boolean"]}),(0,r.jsx)(s.br,{}),"associe le ou les privil\xe8ge(s) et/ou r\xf4le(s) d\xe9fini(s) en param\xe8tre \xe0 la session et renvoie ",(0,r.jsx)(s.strong,{children:"True"})," si l'ex\xe9cution a r\xe9ussi"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#storage",children:[(0,r.jsx)(s.strong,{children:".storage"})," : Object"]}),(0,r.jsx)(s.br,{}),"un objet partag\xe9 qui peut \xeatre utilis\xe9 pour stocker des informations disponibles pour tous les process de la session"]})}),(0,r.jsx)(s.tr,{children:(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.a,{href:"#username",children:[(0,r.jsx)(s.strong,{children:".userName"})," : Text"]}),(0,r.jsx)(s.br,{}),"le nom d'utilisateur associ\xe9 \xe0 la session"]})})]})]}),"\n",(0,r.jsx)(s.h2,{id:"clearprivileges",children:".clearPrivileges()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"18 R6"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".clearPrivileges()"})," : Boolean"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"R\xe9sultat"}),(0,r.jsx)(s.td,{children:"Boolean"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsx)(s.td,{children:"True si l'ex\xe9cution est r\xe9ussie"})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"description",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Cette fonction ne fait rien et retourne toujours ",(0,r.jsx)(s.strong,{children:"True"})," avec les sessions client distants, proc\xe9dure stock\xe9e et autonomes."]})}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".clearPrivileges()"})," supprime tous les privil\xe8ges associ\xe9s \xe0 la session (\xe0 l'exception des privil\xe8ges promus) et renvoie ",(0,r.jsx)(s.strong,{children:"True"})," si l'ex\xe9cution a r\xe9ussi."]}),"\n",(0,r.jsxs)(s.p,{children:["Hormis si vous \xeates en mode ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/REST/authUsers#force-login-mode",children:'"forceLogin"'}),', la session devient automatiquement une session Guest. En mode "forceLogin", ',(0,r.jsx)(s.code,{children:".clearPrivileges()"})," ne transforme pas la session en session Invit\xe9, elle efface seulement les privil\xe8ges de la session."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Cette fonction ne supprime pas les ",(0,r.jsx)(s.strong,{children:"privil\xe8ges promus"})," du process web, qu'ils aient \xe9t\xe9 ajout\xe9s par le biais du fichier ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#rolesjson-file",children:"roles.json"})," ou de la fonction ",(0,r.jsx)(s.a,{href:"#promote",children:(0,r.jsx)(s.code,{children:"promote()"})}),"."]})}),"\n",(0,r.jsx)(s.h4,{id:"exemple",children:"Exemple"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"//Invalider une session utilisateur web\nvar $isGuest : Boolean\nvar $isOK : Boolean\n\n$isOK:=Session.clearPrivileges()\n$isGuest:=Session.isGuest() //$isGuest est True\n"})}),"\n",(0,r.jsx)(s.h2,{id:"createotp",children:".createOTP()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R9"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".createOTP"})," ( { ",(0,r.jsx)(s.em,{children:"lifespan"})," : Integer } ) : Text"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"lifespan"}),(0,r.jsx)(s.td,{children:"Integer"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsx)(s.td,{children:"Dur\xe9e de vie du token de session en secondes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"R\xe9sultat"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsx)(s.td,{children:"UUID du token OTP"})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"description-1",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Cette fonction est uniquement disponible avec les sessions utilisateur web. Elle retourne une cha\xeene vide dans les autres contextes."})}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".createOTP()"})," cr\xe9e un nouvel OTP (One Time Passcode) pour la session et renvoie son UUID de token. Ce token est propre \xe0 la session au cours de laquelle il a \xe9t\xe9 g\xe9n\xe9r\xe9."]}),"\n",(0,r.jsxs)(s.p,{children:["Pour plus d'informations sur les tokens OTP, veuillez consulter ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/WebServer/sessions#session-token-otp",children:"cette section"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Par d\xe9faut, si le param\xe8tre ",(0,r.jsx)(s.em,{children:"lifespan"})," est omis, le token est cr\xe9\xe9 avec la m\xeame dur\xe9e de vie que le ",(0,r.jsx)(s.a,{href:"#idletimeout",children:(0,r.jsx)(s.code,{children:".idleTimeOut"})})," de la session. Vous pouvez d\xe9finir un d\xe9lai personnalis\xe9 en passant une valeur en secondes dans ",(0,r.jsx)(s.em,{children:"lifespan"}),". Si un token expir\xe9 est utilis\xe9 pour restaurer la session d'un utilisateur web, il est ignor\xe9."]}),"\n",(0,r.jsx)(s.p,{children:"Le token retourn\xe9 peut ensuite \xeatre utilis\xe9 lors d'\xe9changes avec des applications tierces ou des sites Web pour identifier la session de mani\xe8re s\xe9curis\xe9e. Par exemple, le token OTP de session peut \xeatre utilis\xe9 avec une application de paiement."}),"\n",(0,r.jsx)(s.h4,{id:"exemple-1",children:"Exemple"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"var $token : Text\n$token := Session.createOTP( 60 ) //le token est valable pendant 1 mn\n"})}),"\n",(0,r.jsx)(s.h2,{id:"demote",children:".demote()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R10"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".demote"}),"( ",(0,r.jsx)(s.em,{children:"promoteId"})," : Integer )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"promoteId"}),(0,r.jsx)(s.td,{children:"Integer"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsxs)(s.td,{children:["Id retourn\xe9 par la fonction ",(0,r.jsx)(s.code,{children:"promote()"})]})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"description-2",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Cette fonction ne fait rien dans les sessions clients distants, proc\xe9dures stock\xe9es et autonomes."})}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".demote()"})," supprime du process web le privil\xe8ge promu dont l'identifiant a \xe9t\xe9 pass\xe9 dans ",(0,r.jsx)(s.em,{children:"promoteId"}),", s'il a \xe9t\xe9 pr\xe9c\xe9demment ajout\xe9 par la fonction ",(0,r.jsx)(s.a,{href:"#promote",children:(0,r.jsx)(s.code,{children:".promote()"})}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Si aucun privil\xe8ge avec ",(0,r.jsx)(s.em,{children:"promoteId"})," n'a \xe9t\xe9 promu \xe0 l'aide de ",(0,r.jsx)(s.a,{href:"#promote",children:(0,r.jsx)(s.code,{children:".promote()"})})," dans le process web, la fonction ne fait rien."]}),"\n",(0,r.jsxs)(s.p,{children:["Si plusieurs privil\xe8ges ont \xe9t\xe9 ajout\xe9s au process web, la fonction ",(0,r.jsx)(s.code,{children:"demote()"})," doit \xeatre appel\xe9e pour chacun d'entre eux avec le ",(0,r.jsx)(s.em,{children:"promoteId"})," appropri\xe9. Les privil\xe8ges sont empil\xe9s dans l'ordre dans lequel ils ont \xe9t\xe9 ajout\xe9s au process, il est recommand\xe9 de d\xe9piler les privil\xe8ges dans l'ordre LIFO (",(0,r.jsx)(s.em,{children:"Last In, First Out"}),")."]}),"\n",(0,r.jsx)(s.h4,{id:"exemple-2",children:"Exemple"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'exposed Function search($search : Text) : Collection\n	\n	var $employees : Collection\n	var $promoteId1; $promoteId2 : Integer\n	\n	$promoteId1:=Session.promote("admin")\n	$promoteId2:=Session.promote("superAdmin")\n	\n	$search:="@"+$search+"@"\n	\n	$employees:=This.query("type = :1 and lastname = :2"; "Intern"; $search).toCollection()\n	\n	Session.demote($promoteId2)\n	Session.demote($promoteId1)\n	\n	return $employees\n'})}),"\n",(0,r.jsx)(s.h4,{id:"voir-\xe9galement",children:"Voir \xe9galement"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"#promote",children:(0,r.jsx)(s.code,{children:".promote()"})})}),"\n",(0,r.jsx)(s.h2,{id:"expirationdate",children:".expirationDate"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"18 R6"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".expirationDate"})," : Text"]}),"\n",(0,r.jsx)(s.h4,{id:"description-3",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Cette propri\xe9t\xe9 est uniquement disponible avec les sessions web."})}),"\n",(0,r.jsxs)(s.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".expirationDate"})," contient la date et l'heure d'expiration du cookie de session. La valeur est exprim\xe9e sous forme de texte au format ISO 8601 : ",(0,r.jsx)(s.code,{children:"YYYY-MM-DDTHH:MM:SS.mmmZ"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Cette propri\xe9t\xe9 est en ",(0,r.jsx)(s.strong,{children:"lecture seule"}),". Elle est automatiquement recalcul\xe9e si la valeur de la propri\xe9t\xe9 ",(0,r.jsx)(s.a,{href:"#idletimeout",children:(0,r.jsx)(s.code,{children:".idleTimeout"})})," est modifi\xe9e."]}),"\n",(0,r.jsx)(s.h4,{id:"exemple-3",children:"Exemple"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'var $expiration : Text\n$expiration:=Session.expirationDate //ex : "2021-11-05T17:10:42Z"\n'})}),"\n",(0,r.jsx)(s.h2,{id:"getprivileges",children:".getPrivileges()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R6"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".getPrivileges"}),"() : Collection"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"R\xe9sultat"}),(0,r.jsx)(s.td,{children:"Collection"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsx)(s.td,{children:"Collection de noms de privil\xe8ges (cha\xeenes)"})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"description-4",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".getPrivileges()"})," renvoie une collection contenant tous les noms de privil\xe8ges associ\xe9s \xe0 la session."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Cette fonction renvoie les privil\xe8ges attribu\xe9s \xe0 une session en utilisant la fonction ",(0,r.jsx)(s.a,{href:"#setprivileges",children:(0,r.jsx)(s.code,{children:"setPrivileges()"})})," uniquement. Les privil\xe8ges promus ne sont PAS renvoy\xe9s par la fonction, qu'ils aient \xe9t\xe9 ajout\xe9s via le fichier ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#rolesjson-file",children:"roles.json"})," ou la fonction ",(0,r.jsx)(s.a,{href:"#promote",children:(0,r.jsx)(s.code,{children:"promote()"})}),"."]})}),"\n",(0,r.jsx)(s.p,{children:'Avec les sessions client distant, proc\xe9dures stock\xe9es et autonomes, cette fonction retourne une collection contenant uniquement "WebAdmin".'}),"\n",(0,r.jsx)(s.h4,{id:"exemple-4",children:"Exemple"}),"\n",(0,r.jsxs)(s.p,{children:["Les r\xf4les suivants ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#rolesjson-file",children:(0,r.jsx)(s.code,{children:"roles.json"})})," ont \xe9t\xe9 d\xe9finis :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n   "privileges":[\n      {\n         "privilege":"simple",\n         "includes":[\n\n         ]\n      },\n      {\n         "privilege":"medium",\n         "includes":[\n            "simple"\n         ]\n      }\n   ],\n   "roles":[\n      {\n         "role":"Medium",\n         "privileges":[\n            "medium"\n         ]\n      }\n   ],\n   "permissions":{\n      "allowed":[\n\n      ]\n   }\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Le r\xf4le de la session est attribu\xe9 dans une fonction de datastore ",(0,r.jsx)(s.code,{children:"authentify()"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"  //Datastore Class\n\nexposed Function authentify($role : Text) : Text\n	Session.clearPrivileges()\n	Session.setPrivileges({roles: $role})\n"})}),"\n",(0,r.jsxs)(s.p,{children:["En supposant que la fonction ",(0,r.jsx)(s.code,{children:"authentify()"}),' soit appel\xe9e avec le r\xf4le "Medium" :']}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'var $privileges : Collection\n$privileges := Session.getPrivileges()\n//$privileges: ["simple","medium"]\n'})}),"\n",(0,r.jsx)(s.h4,{id:"voir-\xe9galement-1",children:"Voir \xe9galement"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"#setprivileges",children:".setPrivileges()"}),(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"https://blog.4d.com/permissions-inspect-the-privileges-in-the-session-for-an-easy-debugging",children:"Permissions : Inspecter les privil\xe8ges de la session pour faciliter le d\xe9bogage (article de blog)"})]}),"\n",(0,r.jsx)(s.h2,{id:"hasprivilege",children:".hasPrivilege()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"21"}),(0,r.jsx)(s.td,{children:"Retourne Vrai pour les privil\xe8ges promus"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"18 R6"}),(0,r.jsx)(s.td,{children:"Ajout"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".hasPrivilege"}),"( ",(0,r.jsx)(s.em,{children:"privilege"})," : Text ) : Boolean"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"privilege"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsx)(s.td,{children:"Nom du privil\xe8ge \xe0 v\xe9rifier"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"R\xe9sultat"}),(0,r.jsx)(s.td,{children:"Boolean"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsxs)(s.td,{children:["Vrai si la session dispose du ",(0,r.jsx)(s.em,{children:"privilege"}),", sinon Faux"]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"description-5",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".hasPrivilege()"})," renvoie True si le ",(0,r.jsx)(s.em,{children:"privilege"})," est associ\xe9 \xe0 la session, et False sinon."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Cette fonction renvoie True pour le ",(0,r.jsx)(s.em,{children:"privil\xe8ge"})," si elle est appel\xe9e depuis une fonction qui a \xe9t\xe9 promue pour ce privil\xe8ge (soit via le fichier ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#rolesjson-file",children:"roles.json"}),", soit via la fonction ",(0,r.jsx)(s.a,{href:"#promote",children:(0,r.jsx)(s.code,{children:"promote()"})}),")."]})}),"\n",(0,r.jsxs)(s.p,{children:["Avec les sessions client distant, proc\xe9dures stock\xe9es et autonomes, cette fonction retourne toujours True, quel que soit le ",(0,r.jsx)(s.em,{children:"privilege"}),"."]}),"\n",(0,r.jsx)(s.h4,{id:"exemple-5",children:"Exemple"}),"\n",(0,r.jsx)(s.p,{children:'Vous voulez v\xe9rifier si le privil\xe8ge "WebAdmin" est associ\xe9 \xe0 la session utilisateur web :'}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'If (Session.hasPrivilege("WebAdmin"))\n	//Acc\xe8s accord\xe9, ne rien faire\nElse\n	//Afficher une page d\'authentification\n\nEnd if\n'})}),"\n",(0,r.jsx)(s.h2,{id:"id",children:".id"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R5"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".id"})," : Text"]}),"\n",(0,r.jsx)(s.h4,{id:"description-6",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".id"})," contient l'identifiant unique (UUID) de la session utilisateur. Avec 4D Server, cette cha\xeene unique est automatiquement assign\xe9e par le serveur \xe0 chaque session et vous permet d'identifier ses process."]}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsxs)(s.p,{children:["Vous pouvez utiliser cette propri\xe9t\xe9 pour obtenir l'objet ",(0,r.jsx)(s.a,{href:"#storage",children:(0,r.jsx)(s.code,{children:".storage"})})," d'une session gr\xe2ce \xe0 la commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/session-storage",children:(0,r.jsx)(s.code,{children:"Session storage"})})," ."]})}),"\n",(0,r.jsx)(s.h2,{id:"idletimeout",children:".idleTimeout"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(s.table,{children:(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})})}),"\n",(0,r.jsx)(s.p,{children:"|18 R6|Added|"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".idleTimeout"})," : Integer"]}),"\n",(0,r.jsx)(s.h4,{id:"description-7",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Cette propri\xe9t\xe9 est uniquement disponible avec les sessions web."})}),"\n",(0,r.jsxs)(s.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".idleTimeout"})," contient le d\xe9lai maximal d'inactivit\xe9 de session (en minutes), au-del\xe0 duquel la session est automatiquement ferm\xe9e par 4D."]}),"\n",(0,r.jsx)(s.p,{children:"Si cette propri\xe9t\xe9 n'est pas d\xe9finie, sa valeur par d\xe9faut est 60 (1h)."}),"\n",(0,r.jsxs)(s.p,{children:["Lorsque cette propri\xe9t\xe9 est d\xe9finie, la propri\xe9t\xe9 ",(0,r.jsx)(s.a,{href:"#expirationdate",children:(0,r.jsx)(s.code,{children:".expirationDate"})})," est mise \xe0 jour en cons\xe9quence."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"La valeur ne peut pas \xeatre < 60 ; si une valeur inf\xe9rieure est d\xe9finie, le timeout est \xe9lev\xe9 \xe0 60."}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Cette propri\xe9t\xe9 est en ",(0,r.jsx)(s.strong,{children:"lecture-\xe9criture"}),"."]}),"\n",(0,r.jsx)(s.h4,{id:"exemple-6",children:"Exemple"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"If (Session.isGuest())\n		// La session Guest se ferme apr\xe8s 60 minutes d'inactivit\xe9\n	Session.idleTimeout:=60\nElse\n		// Les autres sessions se ferment apr\xe8s 120 minutes d'inactivit\xe9\n	Session.idleTimeout:=120\nEnd if\n\n"})}),"\n",(0,r.jsx)(s.h2,{id:"info",children:".info"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R5"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".info"})," : Object"]}),"\n",(0,r.jsx)(s.h4,{id:"description-8",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Cette propri\xe9t\xe9 est uniquement disponible avec les sessions clients distants, proc\xe9dures stock\xe9es et autonomes."})}),"\n",(0,r.jsxs)(s.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".info"})," d\xe9crit le client distant ou la session de proc\xe9dure stock\xe9e sur le serveur, ou la session autonome."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["L'objet ",(0,r.jsx)(s.code,{children:".info"}),' est le m\xeame objet que celui retourn\xe9 dans la propri\xe9t\xe9 "session" par la commande ',(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/process-activity",children:(0,r.jsx)(s.code,{children:"Process activity"})})," pour les sessions de clients distants et proc\xe9dures stock\xe9es."]}),"\n",(0,r.jsxs)(s.li,{children:["L'objet ",(0,r.jsx)(s.code,{children:".info"})," est le m\xeame objet que celui retourn\xe9 par la commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/session-info",children:(0,r.jsx)(s.code,{children:"Session info"})})," pour une session autonome."]}),"\n"]})}),"\n",(0,r.jsxs)(s.p,{children:["L'objet ",(0,r.jsx)(s.code,{children:".info"})," contient les propri\xe9t\xe9s suivantes:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Propri\xe9t\xe9"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"type"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:'Type de session : "remote", "storedProcedure", "standalone"'})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"userName"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsxs)(s.td,{children:["Nom d'utilisateur 4D (m\xeame valeur que ",(0,r.jsx)(s.a,{href:"#username",children:(0,r.jsx)(s.code,{children:".userName"})}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"machineName"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:"Sessions distantes : nom de la machine distante. Session proc\xe9dures stock\xe9es : nom de la machine serveur. Session autonome : nom de la machine"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"systemUserName"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:"Sessions distantes : nom de la session syst\xe8me ouverte sur la machine distante."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"IPAddress"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:"Adresse IP de la machine distante"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"hostType"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:'Type d\'h\xf4te : "windows" ou "mac"'})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"creationDateTime"}),(0,r.jsx)(s.td,{children:"Date ISO 8601"}),(0,r.jsx)(s.td,{children:"Date et heure de cr\xe9ation de la session. Session autonome : date et heure de d\xe9marrage de l'application"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"state"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:'\xc9tat de la session : "active", "postponed", "sleeping"'})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"ID"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsxs)(s.td,{children:["UUID de session (m\xeame valeur que ",(0,r.jsx)(s.a,{href:"#id",children:(0,r.jsx)(s.code,{children:".id"})}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"persistentID"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:"Sessions distantes : ID persistant de la session"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:".info"})," \xe9tant une propri\xe9t\xe9 calcul\xe9e, il est recommand\xe9 de l'appeler une fois et de la stocker dans une variable locale si vous souhaitez effectuer un traitement sur ses propri\xe9t\xe9s."]})}),"\n",(0,r.jsx)(s.h2,{id:"isguest",children:".isGuest()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"18 R6"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".isGuest()"})," : Boolean"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"R\xe9sultat"}),(0,r.jsx)(s.td,{children:"Boolean"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsx)(s.td,{children:"Vrai s'il s'agit d'une session Guest, sinon Faux"})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"description-9",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Cette fonction retourne toujours ",(0,r.jsx)(s.strong,{children:"False"})," avec les sessions clients distants, proc\xe9dures stock\xe9es et autonomes."]})}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".isGuest()"})," renvoie True si la session est une session Guest (c'est-\xe0-dire qu'elle n'a aucun privil\xe8ge)."]}),"\n",(0,r.jsx)(s.h4,{id:"exemple-7",children:"Exemple"}),"\n",(0,r.jsxs)(s.p,{children:["Dans la m\xe9thode base ",(0,r.jsx)(s.code,{children:"On Web Connection"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"If (Session.isGuest())\n //Faire quelque chose pour l'utilisateur invit\xe9\nEnd if\n"})}),"\n",(0,r.jsx)(s.h2,{id:"promote",children:".promote()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R10"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".promote"}),"( ",(0,r.jsx)(s.em,{children:"privilege"})," : Text ) : Integer"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"privilege"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsx)(s.td,{children:"Nom de privil\xe8ge"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"R\xe9sultat"}),(0,r.jsx)(s.td,{children:"Integer"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsxs)(s.td,{children:["id \xe0 utiliser pour l'appel de la fonction ",(0,r.jsx)(s.a,{href:"#demote",children:(0,r.jsx)(s.code,{children:"demote()"})})]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"description-10",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Cette fonction ne fait rien dans les sessions clients distants, proc\xe9dures stock\xe9es et autonomes."})}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".promote()"})," ajoute le privil\xe8ge d\xe9fini dans le param\xe8tre ",(0,r.jsx)(s.em,{children:"privilege"})," au process courant durant l'ex\xe9cution de la fonction appelante et renvoie l'identifiant du privil\xe8ge promu."]}),"\n",(0,r.jsxs)(s.p,{children:["L'ajout dynamique de privil\xe8ges est utile lorsque les droits d'acc\xe8s d\xe9pendent du contexte d'ex\xe9cution, qui ne peut pas \xeatre enti\xe8rement d\xe9fini dans le fichier \"roles.json\". Ceci est particuli\xe8rement le cas lorsque la m\xeame fonction peut \xeatre ex\xe9cut\xe9e par des utilisateurs ayant des niveaux d'acc\xe8s diff\xe9rents. L'utilisation de ",(0,r.jsx)(s.code,{children:".promote()"})," permet de s'assurer que seul le process en cours b\xe9n\xe9ficie des privil\xe8ges n\xe9cessaires, sans affecter les autres."]}),"\n",(0,r.jsx)(s.p,{children:"La fonction ne fait rien et renvoie 0 si :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["le ",(0,r.jsx)(s.em,{children:"privilege"})," n'existe pas dans le fichier ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#rolesjson-file",children:(0,r.jsx)(s.code,{children:"roles.json"})}),","]}),"\n",(0,r.jsxs)(s.li,{children:["le ",(0,r.jsx)(s.em,{children:"privilege"})," est d\xe9j\xe0 assign\xe9 au process courant (en utilisant ",(0,r.jsx)(s.code,{children:".promote()"})," ou \xe0 travers une ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#permission-actions",children:"action de promotion statique"})," d\xe9clar\xe9e pour la fonction appelante dans le fichier ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#rolesjson-file",children:(0,r.jsx)(s.code,{children:"roles.json"})}),")."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Vous pouvez appeler la fonction ",(0,r.jsx)(s.code,{children:"promote()"})," plusieurs fois dans le m\xeame process pour ajouter diff\xe9rents privil\xe8ges."]}),"\n",(0,r.jsx)(s.p,{children:"L'identifiant renvoy\xe9 est incr\xe9ment\xe9 chaque fois qu'un privil\xe8ge est ajout\xe9 dynamiquement au process."}),"\n",(0,r.jsxs)(s.p,{children:["Pour supprimer un privil\xe8ge de mani\xe8re dynamique, appelez la fonction ",(0,r.jsx)(s.code,{children:"demote()"})," avec l'identifiant du privil\xe8ge."]}),"\n",(0,r.jsx)(s.h4,{id:"exemple-8",children:"Exemple"}),"\n",(0,r.jsx)(s.p,{children:'Plusieurs utilisateurs se connectent \xe0 un seul point d\'acc\xe8s qui sert diff\xe9rentes applications. Un utilisateur de l\'application n\xb01 n\'a pas besoin du privil\xe8ge "super_admin" car il ne cr\xe9e pas de "VerySensitiveInfo". Un utilisateur de l\'application n\xb0 2 a besoin du privil\xe8ge "super_admin".'}),"\n",(0,r.jsxs)(s.p,{children:["Vous pouvez allouer dynamiquement les privil\xe8ges appropri\xe9s dans la fonction ",(0,r.jsx)(s.em,{children:"CreateInfo"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'exposed Function createInfo($info1 : Text; $info2 : Text)\n	\nvar $sensitive : cs.SensitiveInfoEntity\nvar $verySensitiveInfo : cs.VerySensitiveInfoEntity\nvar $status : Object\nvar $promoteId : Integer\n	\n$sensitive:=ds.SensitiveInfo.new()\n$sensitive.info:=$info1\n$status:=$sensitive.save()\n	\nIf (Session.storage.role.name="userApp2")\n	$promoteId:=Session.promote("super_admin")\n	$verySensitiveInfo:=ds.VerySensitiveInfo.new()\n	$verySensitiveInfo.info:=$info2\n	$status:=$verySensitiveInfo.save()\n	Session.demote($promoteId)\nEnd if \n'})}),"\n",(0,r.jsx)(s.h4,{id:"voir-\xe9galement-2",children:"Voir \xe9galement"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"#demote",children:(0,r.jsx)(s.code,{children:".demote()"})}),(0,r.jsx)(s.br,{}),(0,r.jsx)(s.a,{href:"#hasprivilege",children:(0,r.jsx)(s.code,{children:"hasPrivilege()"})})]}),"\n",(0,r.jsx)(s.h2,{id:"restore",children:".restore()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R9"}),(0,r.jsx)(s.td,{children:"Ajout"})]})})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".restore"})," ( ",(0,r.jsx)(s.em,{children:"token"})," : Text ) : Boolean"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"token"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsx)(s.td,{children:"UUID du token de session"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"R\xe9sultat"}),(0,r.jsx)(s.td,{children:"Boolean"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsx)(s.td,{children:"True si la session courante a \xe9t\xe9 remplac\xe9e avec succ\xe8s par la session du token"})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"description-11",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Cette fonction est uniquement disponible avec les sessions utilisateur web. Elle renvoie False dans les autres contextes."})}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".restore()"})," remplace la session courante de l'utilisateur Web par sa session originale correspondant \xe0 l'UUID ",(0,r.jsx)(s.em,{children:"token"}),". Le storage et les privil\xe8ges de la session sont restaur\xe9s."]}),"\n",(0,r.jsxs)(s.p,{children:["Si la session originale de l'utilisateur a \xe9t\xe9 correctement restaur\xe9e, la fonction renvoie ",(0,r.jsx)(s.code,{children:"true"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["La fonction renvoie ",(0,r.jsx)(s.code,{children:"false"})," si :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"le token de session a d\xe9j\xe0 \xe9t\xe9 utilis\xe9,"}),"\n",(0,r.jsx)(s.li,{children:"le token de session a expir\xe9,"}),"\n",(0,r.jsx)(s.li,{children:"le token de session n'existe pas,"}),"\n",(0,r.jsx)(s.li,{children:"la session d'origine elle-m\xeame a expir\xe9."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Dans ce cas, la session courante de l'utilisateur web est laiss\xe9e intacte (aucune session n'est restaur\xe9e)."}),"\n",(0,r.jsx)(s.h4,{id:"exemple-9",children:"Exemple"}),"\n",(0,r.jsx)(s.p,{children:"Dans un singleton appel\xe9 par un HTTP request handler personnalis\xe9 :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"shared singleton Class constructor()\n\nFunction callback($request : 4D.IncomingMessage) : 4D.OutgoingMessage\n   Session.restore($request.urlQuery.state) \n"})}),"\n",(0,r.jsx)(s.h4,{id:"voir-\xe9galement-3",children:"Voir \xe9galement"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"#createotp",children:(0,r.jsx)(s.code,{children:".createOTP()"})})}),"\n",(0,r.jsx)(s.h2,{id:"setprivileges",children:".setPrivileges()"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"19 R8"}),(0,r.jsx)(s.td,{children:'Prise en charge de la propri\xe9t\xe9 "roles" dans settings'})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"18 R6"}),(0,r.jsx)(s.td,{children:"Ajout"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".setPrivileges"}),"( ",(0,r.jsx)(s.em,{children:"privilege"})," : Text ) : Boolean",(0,r.jsx)(s.br,{}),(0,r.jsx)(s.strong,{children:".setPrivileges"}),"( ",(0,r.jsx)(s.em,{children:"privileges"})," : Collection )",(0,r.jsx)(s.br,{}),(0,r.jsx)(s.strong,{children:".setPrivileges"}),"( ",(0,r.jsx)(s.em,{children:"settings"})," : Object ) : Boolean"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Param\xe8tres"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{style:{textAlign:"center"}}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"privilege"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsx)(s.td,{children:"Nom de privil\xe8ge"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"privileges"}),(0,r.jsx)(s.td,{children:"Collection"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsx)(s.td,{children:"Collection de noms de privil\xe8ges"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"settings"}),(0,r.jsx)(s.td,{children:"Object"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsx)(s.td,{children:'Objet contenant une propri\xe9t\xe9 "privileges" (texte ou collection)'})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"R\xe9sultat"}),(0,r.jsx)(s.td,{children:"Boolean"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsx)(s.td,{children:"True si l'ex\xe9cution est r\xe9ussie"})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"description-12",children:"Description"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Cette fonction ne fait rien et retourne toujours ",(0,r.jsx)(s.strong,{children:"False"})," avec les sessions client distantes, proc\xe9dures stock\xe9es et autonomes."]})}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.code,{children:".setPrivileges()"})," associe le ou les privil\xe8ge(s) et/ou r\xf4le(s) d\xe9fini(s) en param\xe8tre \xe0 la session et renvoie ",(0,r.jsx)(s.strong,{children:"True"})," si l'ex\xe9cution a r\xe9ussi."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Dans le param\xe8tre ",(0,r.jsx)(s.em,{children:"privilege"}),", passez une cha\xeene contenant un nom de privil\xe8ge (ou plusieurs noms de privil\xe8ges s\xe9par\xe9s par des virgules)."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Dans le param\xe8tre ",(0,r.jsx)(s.em,{children:"privileges"}),", passez une collection de cha\xeenes contenant des noms de privil\xe8ges."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Dans le param\xe8tre ",(0,r.jsx)(s.em,{children:"settings"}),", passez un objet contenant les propri\xe9t\xe9s suivantes :"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Propri\xe9t\xe9"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"privileges"}),(0,r.jsx)(s.td,{children:"Text ou Collection"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.li,{children:"Cha\xeene contenant un nom de privil\xe8ge, ou"}),(0,r.jsx)(s.li,{children:"Collection de cha\xeenes contenant des noms de privil\xe8ges"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"roles"}),(0,r.jsx)(s.td,{children:"Text ou Collection"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.li,{children:"Cha\xeene contenant un r\xf4le, ou"}),(0,r.jsx)(s.li,{children:"Collection de cha\xeenes contenant des r\xf4les"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"userName"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:"Nom d'utilisateur \xe0 associer \xe0 la session (optionnel)"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Les privil\xe8ges et les r\xf4les sont d\xe9finis dans le fichier ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#rolesjson-file",children:(0,r.jsx)(s.code,{children:"roles.json"})})," du projet. Pour plus d'informations, veuillez vous reporter \xe0 la section ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges",children:(0,r.jsx)(s.strong,{children:"Privileges"})}),"."]})}),"\n",(0,r.jsxs)(s.p,{children:["Si la propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:"privileges"})," ou ",(0,r.jsx)(s.code,{children:"roles"})," contient un nom qui n'est pas d\xe9clar\xe9 dans le fichier ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges#rolesjson-file",children:(0,r.jsx)(s.code,{children:"roles.json"})}),", il est ignor\xe9."]}),"\n",(0,r.jsxs)(s.p,{children:["Par d\xe9faut lorsqu'aucun privil\xe8ge ou r\xf4le n'est associ\xe9 \xe0 la session, la session est une ",(0,r.jsx)(s.a,{href:"#isguest",children:"session Guest"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(s.a,{href:"#username",children:(0,r.jsx)(s.code,{children:"userName"})})," est accessible au niveau de l'objet session (lecture seulement)."]}),"\n",(0,r.jsx)(s.h4,{id:"exemple-10",children:"Exemple"}),"\n",(0,r.jsx)(s.p,{children:"Dans une m\xe9thode d'authentification personnalis\xe9e, vous assignez le privil\xe8ge \"WebAdmin\" \xe0 l'utilisateur :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"var $userOK : Boolean\n\n... //Authentifier l'utilisateur\n\nIf ($userOK) //L'utilisateur a \xe9t\xe9 approuv\xe9\n  var $info : Object\n  $info:=New object()\n  $info.privileges:=New collection(\"WebAdmin\")\n  Session.setPrivileges($info)\nEnd if\n\n"})}),"\n",(0,r.jsx)(s.h4,{id:"voir-\xe9galement-4",children:"Voir \xe9galement"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"#getprivileges",children:".getPrivileges()"})}),"\n",(0,r.jsx)(s.h2,{id:"storage",children:".storage"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R5"}),(0,r.jsx)(s.td,{children:"Prise en charge des sessions utilisateurs distants et proc\xe9dures stock\xe9es"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"18 R6"}),(0,r.jsx)(s.td,{children:"Ajout"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".storage"})," : Object"]}),"\n",(0,r.jsx)(s.h4,{id:"description-13",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".storage"})," contient un objet partag\xe9 qui peut \xeatre utilis\xe9 pour stocker des informations disponibles pour tous les process de la session."]}),"\n",(0,r.jsxs)(s.p,{children:["Lorsqu'un objet ",(0,r.jsx)(s.code,{children:"Session"})," est cr\xe9\xe9, la propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".storage"})," est vide. Puisqu'il s'agit d'un objet partag\xe9, cette propri\xe9t\xe9 sera disponible dans l'objet ",(0,r.jsx)(s.code,{children:"Storage"})," du serveur."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Tout comme l'objet ",(0,r.jsx)(s.code,{children:"Storage"})," du serveur, la propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".storage"})," est toujours \"single\" : l'ajout d'un objet partag\xe9 ou d'une collection partag\xe9e \xe0 ",(0,r.jsx)(s.code,{children:".storage"})," ne cr\xe9e pas de groupe partag\xe9."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Cette propri\xe9t\xe9 est elle-m\xeame en ",(0,r.jsx)(s.strong,{children:"lecture seulement"})," mais elle retourne un objet en lecture-\xe9criture."]}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsxs)(s.p,{children:["Vous pouvez obtenir la propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".storage"})," d'une session en utilisant la commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/session-storage",children:(0,r.jsx)(s.code,{children:"Session storage"})}),"."]})}),"\n",(0,r.jsx)(s.h4,{id:"exemple-de-session-web",children:"Exemple de session Web"}),"\n",(0,r.jsxs)(s.p,{children:["Vous voulez stocker l'adresse IP du client dans la propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".storage"}),". Vous pouvez \xe9crire dans la m\xe9thode base ",(0,r.jsx)(s.code,{children:"On Web Authentication"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'If (Session.storage.clientIP=Null) //first access\n    Use (Session.storage)\n        Session.storage.clientIP:=New shared object("value"; $clientIP)\n    End use\nEnd if\n'})}),"\n",(0,r.jsx)(s.h4,{id:"exemple-de-session-distante",children:"Exemple de session distante"}),"\n",(0,r.jsx)(s.p,{children:"Vous voulez partager des donn\xe9es entre les process de la m\xeame session :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'Use (Session.storage)\n Session.storage.settings:=New shared object("property"; $value; "property2"; $value2)\nEnd use\n'})}),"\n",(0,r.jsx)(s.h2,{id:"username",children:".userName"}),"\n",(0,r.jsxs)(s.details,{children:[(0,r.jsx)(s.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Release"}),(0,r.jsx)(s.th,{children:"Modifications"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20 R5"}),(0,r.jsx)(s.td,{children:"Prise en charge des sessions utilisateurs distants et proc\xe9dures stock\xe9es"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"18 R6"}),(0,r.jsx)(s.td,{children:"Ajout"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:".userName"})," : Text"]}),"\n",(0,r.jsx)(s.h4,{id:"description-14",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:".userName"})," contient le nom d'utilisateur associ\xe9 \xe0 la session. Vous pouvez vous en servir pour identifier l'utilisateur dans votre code."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Avec les sessions web, cette propri\xe9t\xe9 est une cha\xeene vide par d\xe9faut. Elle peut \xeatre d\xe9finie via la propri\xe9t\xe9 ",(0,r.jsx)(s.code,{children:"privileges"})," de la fonction ",(0,r.jsx)(s.a,{href:"#setprivileges",children:(0,r.jsx)(s.code,{children:"setPrivileges()"})}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Avec les sessions clients distants et proc\xe9dures stock\xe9es, cette propri\xe9t\xe9 retourne le m\xeame nom d'utilisateur que la commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/current-user",children:(0,r.jsx)(s.code,{children:"Current user"})}),"."]}),"\n",(0,r.jsxs)(s.li,{children:['Avec les sessions autonomes, cette propri\xe9t\xe9 contient "designer" ou le nom d\xe9fini avec la commande ',(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/set-user-alias",children:(0,r.jsx)(s.code,{children:"SET USER ALIAS"})}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Cette propri\xe9t\xe9 est en ",(0,r.jsx)(s.strong,{children:"lecture seule"}),"."]})]})}function h(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},884429:function(e,s,n){n.d(s,{R:()=>l,x:()=>d});var i=n(296540);let r={},t=i.createContext(r);function l(e){let s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);