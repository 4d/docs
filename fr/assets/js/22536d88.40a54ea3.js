"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["96898"],{683928:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>a,toc:()=>d,default:()=>u,metadata:()=>i,assets:()=>l,contentTitle:()=>o});var i=JSON.parse('{"id":"WebServer/sessions","title":"Sessions Web","description":"Le serveur Web de 4D offre des fonctions int\xe9gr\xe9es de gestion des sessions Web. La cr\xe9ation et la maintenance de sessions Web vous permettent de contr\xf4ler et d\'am\xe9liorer l\'exp\xe9rience utilisateur de votre application web. Lorsque les sessions web sont activ\xe9es, les clients web peuvent r\xe9utiliser le m\xeame contexte de serveur d\'une requ\xeate \xe0 une autre.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R10/WebServer/sessions.md","sourceDirName":"WebServer","slug":"/WebServer/sessions","permalink":"/docs/fr/20-R10/WebServer/sessions","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20WebServer%2Fsessions.md%20(20-R10)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R10","frontMatter":{"id":"sessions","title":"Sessions Web"},"sidebar":"docs","previous":{"title":"Authentification","permalink":"/docs/fr/20-R10/WebServer/authentication"},"next":{"title":"Utiliser des process web pr\xe9emptifs","permalink":"/docs/fr/20-R10/WebServer/preemptiveWeb"}}'),r=n(474848),t=n(884429);let a={id:"sessions",title:"Sessions Web"},o,l={},d=[{value:"Utilisations",id:"utilisations",level:2},{value:"Activation des sessions web",id:"enabling-web-sessions",level:2},{value:"Impl\xe9mentation des sessions",id:"impl\xe9mentation-des-sessions",level:2},{value:"Stockage et partage des informations de session",id:"stockage-et-partage-des-informations-de-session",level:2},{value:"Dur\xe9e de vie des sessions",id:"dur\xe9e-de-vie-des-sessions",level:2},{value:"Privil\xe8ges",id:"privil\xe8ges",level:2},{value:"Exemple",id:"exemple",level:2},{value:"Token de session (OTP)",id:"token-de-session-otp",level:2},{value:"Vue d\u2019ensemble",id:"vue-densemble",level:3},{value:"Traitement de l&#39;OTP dans le callback",id:"traitement-de-lotp-dans-le-callback",level:3},{value:"Utilisation de <code>$4DSID</code> dans l&#39;URL",id:"utilisation-de-4dsid-dans-lurl",level:4},{value:"Utilisation d&#39;un param\xe8tre personnalis\xe9",id:"utilisation-dun-param\xe8tre-personnalis\xe9",level:4},{value:"Traitement d&#39;un OTP non valide",id:"traitement-dun-otp-non-valide",level:4},{value:"Sc\xe9nario avec $4DSID",id:"sc\xe9nario-avec-4dsid",level:3},{value:"Sc\xe9nario avec la fonction <code>restore</code>",id:"sc\xe9nario-avec-la-fonction-restore",level:3},{value:"Exemple de validation d&#39;email avec $4DSID",id:"exemple-de-validation-demail-avec-4dsid",level:3},{value:"Contextes pris en charge",id:"contextes-pris-en-charge",level:3},{value:"Dur\xe9e de vie",id:"dur\xe9e-de-vie",level:3}];function c(e){let s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["Le serveur Web de 4D offre des fonctions int\xe9gr\xe9es de gestion des ",(0,r.jsx)(s.strong,{children:"sessions Web"}),". La cr\xe9ation et la maintenance de sessions Web vous permettent de contr\xf4ler et d'am\xe9liorer l'exp\xe9rience utilisateur de votre application web. Lorsque les sessions web sont activ\xe9es, les clients web peuvent r\xe9utiliser le m\xeame contexte de serveur d'une requ\xeate \xe0 une autre."]}),"\n",(0,r.jsx)(s.p,{children:"Les sessions Web permettent de :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["g\xe9rer simultan\xe9ment plusieurs requ\xeates depuis le m\xeame client web via un nombre illimit\xe9 de process pr\xe9emptifs (les sessions web sont ",(0,r.jsx)(s.strong,{children:"\xe9volutives"}),"),"]}),"\n",(0,r.jsxs)(s.li,{children:["g\xe9rer la session \xe0 travers un objet ",(0,r.jsx)(s.code,{children:"Session"})," et une ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass",children:"API de session"}),","]}),"\n",(0,r.jsxs)(s.li,{children:["stocker et partager des donn\xe9es entre les process d'un client web en utilisant le ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#storage",children:".storage"})," de la session,"]}),"\n",(0,r.jsx)(s.li,{children:"associer des privil\xe8ges \xe0 l'utilisateur qui ex\xe9cute la session."}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{title:"Article(s) de blog sur le sujet",type:"tip",children:(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://blog.4d.com/scalable-sessions-for-advanced-web-applications/",children:"Sessions \xe9volutives pour applications web avanc\xe9es"})})}),"\n",(0,r.jsx)(s.h2,{id:"utilisations",children:"Utilisations"}),"\n",(0,r.jsx)(s.p,{children:"Les sessions Web sont utilis\xe9es par :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["les ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/WebServer/gettingStarted",children:"applications web"})," qui envoient des requ\xeates http,"]}),"\n",(0,r.jsxs)(s.li,{children:["les appels \xe0 l'",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/REST/authUsers",children:"API REST"}),", qui sont effectu\xe9s par les ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/datastores",children:"datastores distants"})," et les ",(0,r.jsx)(s.a,{href:"qodly-studio.md",children:"pages Qodly"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"enabling-web-sessions",children:"Activation des sessions web"}),"\n",(0,r.jsx)(s.p,{children:"La gestion de session peut \xeatre activ\xe9e et d\xe9sactiv\xe9e sur votre serveur Web 4D. Il y a diff\xe9rentes fa\xe7ons d'activer la gestion de session :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Utiliser l'option ",(0,r.jsx)(s.strong,{children:"Sessions \xe9volutives"}),' dans la page "Web/Options (I)" des Propri\xe9t\xe9s (r\xe9glage permanent) :\n',(0,r.jsx)(s.img,{alt:"alt-text",src:n(244859).A+"",width:"821",height:"361"})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Cette option est s\xe9lectionn\xe9e par d\xe9faut dans les nouveaux projets. Elle peut cependant \xeatre d\xe9sactiv\xe9e en s\xe9lectionnant l'option ",(0,r.jsx)(s.strong,{children:"Pas de sessions"}),", auquel cas les fonctionnalit\xe9s de session web sont d\xe9sactiv\xe9es (aucun objet ",(0,r.jsx)(s.code,{children:"Session"})," n'est disponible)."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["En utilisant la propri\xe9t\xe9 ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/WebServerClass#scalablession",children:(0,r.jsx)(s.code,{children:".scalableSession"})})," de l'objet Web Server (\xe0 passer dans le param\xe8tre ",(0,r.jsx)(s.em,{children:"settings"})," de la fonction ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/WebServerClass#start",children:(0,r.jsx)(s.code,{children:".start()"})})," ). Dans ce cas, ce param\xe8tre remplace l'option d\xe9finie dans la bo\xeete de dialogue Propri\xe9t\xe9s pour l'objet Web Server (il n'est pas stock\xe9 sur disque)."]}),"\n"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["La commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/web-set-option",children:(0,r.jsx)(s.code,{children:"WEB SET OPTION"})})," peut \xe9galement d\xe9finir le mode de session du serveur Web principal."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Dans tous les cas, ce param\xe8tre est local \xe0 la machine ; il peut donc \xeatre diff\xe9rent sur le serveur Web 4D Server et les serveurs Web des machines 4D distantes."}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Compatibilit\xe9"})," : Une option ",(0,r.jsx)(s.strong,{children:"Anciennes sessions"})," est disponible dans les projets cr\xe9\xe9s avec une version 4D ant\xe9rieure \xe0 4D v18 R6 (pour plus d'informations, veuillez consulter le site web ",(0,r.jsx)(s.a,{href:"https://doc.4d.com",children:"doc.4d.com"}),")."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"impl\xe9mentation-des-sessions",children:"Impl\xe9mentation des sessions"}),"\n",(0,r.jsxs)(s.p,{children:["Lorsque ",(0,r.jsx)(s.a,{href:"#enabling-web-sessions",children:"les sessions sont activ\xe9es"}),", des m\xe9canismes automatiques sont mis en \u0153uvre, sur la base d'un cookie priv\xe9 d\xe9fini par 4D lui-m\xeame : \"4DSID_",(0,r.jsx)(s.em,{children:"AppName"}),'", o\xf9 ',(0,r.jsx)(s.em,{children:"AppName"})," est le nom du projet d'application. Ce cookie r\xe9f\xe9rence la session web courante pour l'application."]}),"\n",(0,r.jsx)(s.admonition,{type:"info",children:(0,r.jsxs)(s.p,{children:["Le nom du cookie peut \xeatre obtenu en utilisant la propri\xe9t\xe9 ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/WebServerClass#sessioncookiename",children:(0,r.jsx)(s.code,{children:".sessionCookieName"})}),"."]})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:'Dans chaque requ\xeate de client web, le serveur Web v\xe9rifie la pr\xe9sence et la valeur du cookie priv\xe9 "4DSID__AppName_".'}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Si le cookie a une valeur, 4D recherche la session qui a cr\xe9\xe9 ce cookie parmi les sessions existantes ; si cette session est trouv\xe9e, elle est r\xe9utilis\xe9e pour l'appel."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Si la requ\xeate du client ne correspond pas \xe0 une session d\xe9j\xe0 ouverte :"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:'une nouvelle session avec un cookie priv\xe9 "4DSID__AppName_" est cr\xe9\xe9e sur le serveur web'}),"\n",(0,r.jsxs)(s.li,{children:["un nouvel objet ",(0,r.jsx)(s.code,{children:"Session"})," Guest est cr\xe9\xe9 et est d\xe9di\xe9 \xe0 la session web \xe9volutive."]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Creating a web session for a REST request may require that a license is available, see ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/REST/authUsers",children:"this page"}),"."]})}),"\n",(0,r.jsxs)(s.p,{children:["L'objet ",(0,r.jsx)(s.code,{children:"Session"})," de la session en cours peut ensuite \xeatre manipul\xe9 via la commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/session",children:(0,r.jsx)(s.code,{children:"Session"})})," dans le code de n'importe quel process web."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"alt-text",src:n(694457).A+"",width:"642",height:"442"})}),"\n",(0,r.jsx)(s.admonition,{type:"info",children:(0,r.jsxs)(s.p,{children:["Les process Web ne se terminent g\xe9n\xe9ralement pas, ils sont recycl\xe9s dans un pool pour des raisons d'optimisation. Lorsqu'un process termine l'ex\xe9cution d'une requ\xeate, il est replac\xe9 dans le pool et rendu disponible pour la requ\xeate suivante. Comme un process web peut \xeatre r\xe9utilis\xe9 par n'importe quelle session, les ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/Concepts/variables#process-variables",children:"variables process"})," doivent \xeatre effac\xe9es par votre code \xe0 la fin de son ex\xe9cution (en utilisant ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/clear-variable",children:(0,r.jsx)(s.code,{children:"CLEAR VARIABLE"})})," par exemple). Ce nettoyage est n\xe9cessaire pour toute information li\xe9e au process, comme une r\xe9f\xe9rence \xe0 un fichier ouvert. C'est la raison pour laquelle ",(0,r.jsx)(s.strong,{children:"il est recommand\xe9"})," d'utiliser l'objet ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass",children:"Session"})," lorsque vous souhaitez conserver les informations relatives \xe0 la session."]})}),"\n",(0,r.jsx)(s.h2,{id:"stockage-et-partage-des-informations-de-session",children:"Stockage et partage des informations de session"}),"\n",(0,r.jsxs)(s.p,{children:["Chaque objet ",(0,r.jsx)(s.code,{children:"Session"})," fournit une propri\xe9t\xe9 ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#storage",children:(0,r.jsx)(s.code,{children:".storage"})})," qui est un ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/Concepts/shared",children:"objet partag\xe9"}),". Cette propri\xe9t\xe9 vous permet de partager des informations entre tous les process g\xe9r\xe9s par la session."]}),"\n",(0,r.jsx)(s.h2,{id:"dur\xe9e-de-vie-des-sessions",children:"Dur\xe9e de vie des sessions"}),"\n",(0,r.jsx)(s.p,{children:"Une session web \xe9volutive est ferm\xe9e lorsque:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"le serveur web est arr\xeat\xe9,"}),"\n",(0,r.jsx)(s.li,{children:"le d\xe9lai d'attente du cookie de session a \xe9t\xe9 atteint."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"La dur\xe9e de vie d'un cookie inactif est de 60 minutes par d\xe9faut, ce qui signifie que le serveur Web fermera automatiquement les sessions inactives apr\xe8s 60 minutes."}),"\n",(0,r.jsxs)(s.p,{children:["Ce d\xe9lai peut \xeatre d\xe9fini en utilisant la propri\xe9t\xe9 ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#idletimeout",children:(0,r.jsx)(s.code,{children:".idleTimeout"})})," de l'objet ",(0,r.jsx)(s.code,{children:"Session"})," (le d\xe9lai ne peut \xeatre inf\xe9rieur \xe0 60 minutes) ou le param\xe8tre ",(0,r.jsx)(s.em,{children:"connectionInfo"})," de la commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/open-datastore",children:(0,r.jsx)(s.code,{children:"Open datastore"})}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Lorsqu'une session web est ferm\xe9e, si la commande ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/commands/session",children:(0,r.jsx)(s.code,{children:"Session"})})," est appel\xe9e par la suite :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["l'objet ",(0,r.jsx)(s.code,{children:"Session"})," ne contient pas de privil\xe8ges (c'est une session Guest)"]}),"\n",(0,r.jsxs)(s.li,{children:["la propri\xe9t\xe9 ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#storage",children:(0,r.jsx)(s.code,{children:"storage"})})," est vide"]}),"\n",(0,r.jsx)(s.li,{children:"un nouveau cookie de session est associ\xe9 \xe0 la session"}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"info",children:(0,r.jsxs)(s.p,{children:["Vous pouvez fermer une session \xe0 partir d'une page Qodly en utilisant la fonction ",(0,r.jsx)(s.a,{href:"qodly-studio.md#logout",children:(0,r.jsx)(s.strong,{children:"logout"})}),"."]})}),"\n",(0,r.jsx)(s.h2,{id:"privil\xe8ges",children:"Privil\xe8ges"}),"\n",(0,r.jsx)(s.p,{children:"Des privil\xe8ges peuvent \xeatre associ\xe9s aux sessions utilisateur web. Sur le serveur web, vous pouvez fournir un acc\xe8s sp\xe9cifique ou des fonctionnalit\xe9s en fonction des privil\xe8ges de la session."}),"\n",(0,r.jsxs)(s.p,{children:["Vous assignez des privil\xe8ges en utilisant la ",(0,r.jsxs)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#setprivileges",children:["fonction ",(0,r.jsx)(s.code,{children:".setPrivileges()"})]}),". Dans votre code, vous pouvez v\xe9rifier les privil\xe8ges de la session pour autoriser ou refuser l'acc\xe8s \xe0 l'aide de la fonction ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#hasprivilege",children:(0,r.jsx)(s.code,{children:".hasPrivilege()"})}),". Par d\xe9faut, les nouvelles sessions n'ont aucun privil\xe8ge : ce sont des sessions ",(0,r.jsx)(s.strong,{children:"Guest"})," (la fonction ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#isguest",children:(0,r.jsx)(s.code,{children:"isGuest()"})})," retourne true)."]}),"\n",(0,r.jsx)(s.p,{children:"Voici un exemple :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'If (Session.hasPrivilege("WebAdmin"))\n	//Acc\xe8s autoris\xe9, on ne fait rien\nElse\n	//Afficher une page d\'authentification\nEnd if\n'})}),"\n",(0,r.jsx)(s.admonition,{type:"info",children:(0,r.jsxs)(s.p,{children:["Les privil\xe8ges sont impl\xe9ment\xe9s au c\u0153ur de l'architecture ORDA, fournissant aux d\xe9veloppeurs une technologie puissante pour contr\xf4ler l'acc\xe8s aux fonctions du datastore et des dataclass. Pour plus d'informations, veuillez vous reporter \xe0 la section ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/ORDA/privileges",children:(0,r.jsx)(s.strong,{children:"Privil\xe8ges"})}),"."]})}),"\n",(0,r.jsx)(s.h2,{id:"exemple",children:"Exemple"}),"\n",(0,r.jsx)(s.p,{children:"Dans une application CRM, chaque commercial g\xe8re son propre portefeuille de clients. Le datastore contient au moins deux dataclass li\xe9es : Customers et SalesPersons (un commercial a plusieurs clients)."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"alt-text",src:n(256494).A+"",width:"450",height:"225"})}),"\n",(0,r.jsx)(s.p,{children:"Nous voulons qu'un(e) commercial(e) s'authentifie, ouvre une session sur le serveur web et que les 3 meilleurs clients soient charg\xe9s dans la session."}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Nous ex\xe9cutons cette URL pour ouvrir une session :"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"http://localhost:8044/authenticate.shtml\n"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Dans un environnement de production, il est n\xe9cessaire d'utiliser une ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/WebServerClass#httpsenabled",children:"connexion HTTPS"})," pour \xe9viter la circulation d'informations non chiffr\xe9es sur le r\xe9seau."]}),"\n"]}),"\n",(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsxs)(s.li,{children:["La page ",(0,r.jsx)(s.code,{children:"authenticate.shtml"})," est un formulaire contenant des champs de saisie ",(0,r.jsx)(s.em,{children:"userId"})," et ",(0,r.jsx)(s.em,{children:"password"})," et envoie une action POST 4DACTION :"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n<body bgcolor="#ffffff">\n<FORM ACTION="/4DACTION/authenticate" METHOD=POST>\n	UserId: <INPUT TYPE=TEXT NAME=userId VALUE=""><br/>\n	Password: <INPUT TYPE=TEXT NAME=password VALUE=""><br/>\n<INPUT TYPE=SUBMIT NAME=OK VALUE="Log In">\n</FORM>\n</body>\n</html>\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"alt-text",src:n(380339).A+"",width:"523",height:"158"})}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsxs)(s.li,{children:["La m\xe9thode projet d'authentification recherche la personne ",(0,r.jsx)(s.em,{children:"userID"})," et valide le mot de passe par rapport \xe0 la valeur hach\xe9e d\xe9j\xe0 stock\xe9e dans la table ",(0,r.jsx)(s.em,{children:"SalesPersons"})," :"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'var $indexUserId; $indexPassword; $userId : Integer\nvar $password : Text\nvar $userTop3; $sales; $info : Object\n\n\nARRAY TEXT($anames; 0)\nARRAY TEXT($avalues; 0)\n\nWEB GET VARIABLES($anames; $avalues)\n\n$indexUserId:=Find in array($anames; "userId")\n$userId:=Num($avalues{$indexUserId})\n\n$indexPassword:=Find in array($anames; "password")\n$password:=$avalues{$indexPassword}\n\n$sales:=ds.SalesPersons.query("userId = :1"; $userId).first()\n\nIf ($sales#Null)\n    If (Verify password hash($password; $sales.password))\n        $info:=New object()\n        $info.userName:=$sales.firstname+" "+$sales.lastname\n        Session.setPrivileges($info)\n        Use (Session.storage)\n            If (Session.storage.myTop3=Null)\n                $userTop3:=$sales.customers.orderBy("totalPurchase desc").slice(0; 3)\n\n                Session.storage.myTop3:=$userTop3\n            End if\n        End use\n        WEB SEND HTTP REDIRECT("/authenticationOK.shtml")\n    Else\n        WEB SEND TEXT("This password is wrong")\n    End if\nElse\n    WEB SEND TEXT("This userId is unknown")\nEnd if\n'})}),"\n",(0,r.jsx)(s.admonition,{title:"Articles de blog sur le sujet",type:"tip",children:(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://blog.4d.com/scalable-sessions-for-advanced-web-applications/",children:"Sessions \xe9volutives pour applications web avanc\xe9es"})})}),"\n",(0,r.jsx)(s.h2,{id:"token-de-session-otp",children:"Token de session (OTP)"}),"\n",(0,r.jsxs)(s.p,{children:["Le serveur web 4D vous permet de g\xe9n\xe9rer, de partager et d'utiliser des tokens de session OTP (One-Time Passcode). Les tokens (ou ",(0,r.jsx)(s.em,{children:"jetons"}),") de session OTP sont utilis\xe9s pour s\xe9curiser les communications avec des applications ou des sites web tiers. Pour plus d'informations sur OTP, veuillez vous r\xe9f\xe9rer \xe0 la page ",(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/One-time_password",children:"Mot de passe \xe0 usage unique"})," sur Wikipedia."]}),"\n",(0,r.jsx)(s.p,{children:"Dans 4D, les tokens de session OTP sont utiles pour appeler des URL externes et \xeatre rappel\xe9 dans un autre navigateur ou appareil (mobile/ordinateur). G\xe9n\xe9ralement, une application tierce envoie un courriel de confirmation contenant un lien de rappel sur lequel l'utilisateur doit cliquer. Le lien de rappel inclut le token OTP, de sorte que la session qui a d\xe9clench\xe9 le rappel est charg\xe9e avec ses donn\xe9es et ses privil\xe8ges. Ce principe vous permet de partager la m\xeame session sur plusieurs appareils. Gr\xe2ce \xe0 cette architecture, le [cookie de session] (#session-implementation) n'est pas expos\xe9 sur le r\xe9seau, ce qui \xe9limine le risque d'une attaque de type \"man-in-the-middle\"."}),"\n",(0,r.jsx)(s.h3,{id:"vue-densemble",children:"Vue d\u2019ensemble"}),"\n",(0,r.jsx)(s.p,{children:"La s\xe9quence de base de l'utilisaton d'un token de session OTP dans une application web 4D est la suivante :"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"L'utilisateur web initie une action qui n\xe9cessite une connexion tierce s\xe9curis\xe9e, par exemple une validation, \xe0 partir d'une session sp\xe9cifique."}),"\n",(0,r.jsxs)(s.li,{children:["Dans votre code 4D, vous cr\xe9ez un nouvel OTP pour la session \xe0 l'aide de la fonction ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#createotp",children:(0,r.jsx)(s.code,{children:"Session.createOTP()"})}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Vous envoyez une requ\xeate \xe0 l'application tierce avec le token de session inclus dans l'Uri de callback (rappel). Notez que la mani\xe8re de fournir l'Uri de rappel \xe0 une application tierce d\xe9pend de son API (voir ci-dessous)."}),"\n",(0,r.jsx)(s.li,{children:"L'application tierce renvoie une requ\xeate \xe0 4D avec le mod\xe8le que vous avez fourni dans l'Uri de rappel."}),"\n",(0,r.jsx)(s.li,{children:"Le rappel de la requ\xeate est trait\xe9 dans votre application."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Par d\xe9finition, un token OTP ne peut \xeatre utilis\xe9 qu'une seule fois. Dans ce sc\xe9nario, si une requ\xeate web est re\xe7ue avec un token de session comme param\xe8tre qui a d\xe9j\xe0 \xe9t\xe9 utilis\xe9, la session initiale n'est pas restaur\xe9e."}),"\n",(0,r.jsx)(s.h3,{id:"traitement-de-lotp-dans-le-callback",children:"Traitement de l'OTP dans le callback"}),"\n",(0,r.jsxs)(s.p,{children:["Les callbacks d'applications tierces qui incluent le token OTP peuvent \xeatre trait\xe9s de diff\xe9rentes mani\xe8res dans votre application 4D, en fonction de votre d\xe9veloppement et de l'API tierce. En principe, vous avez deux possibilit\xe9s pour g\xe9rer le token : via le param\xe8tre ",(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"$4DSID"})})," pour un traitement automatique, ou via un param\xe8tre personnalis\xe9 que vous devez traiter."]}),"\n",(0,r.jsxs)(s.h4,{id:"utilisation-de-4dsid-dans-lurl",children:["Utilisation de ",(0,r.jsx)(s.code,{children:"$4DSID"})," dans l'URL"]}),"\n",(0,r.jsxs)(s.p,{children:["L'utilisation du param\xe8tre ",(0,r.jsx)(s.code,{children:"$4DSID"})," est la fa\xe7on la plus simple de traiter un callback de l'application tierce :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Le token OTP est fourni en tant que param\xe8tre directement dans l'url de callback en utilisant la syntaxe standard ",(0,r.jsx)(s.code,{children:"?$4DSID=XXXX123"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Dans votre application 4D, vous impl\xe9mentez un ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/WebServer/http-request-handler",children:"HTTP Request handler"})," d\xe9di\xe9 en utilisant les classes ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/IncomingMessageClass",children:(0,r.jsx)(s.code,{children:"IncomingMessage"})})," et ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/OutgoingMessageClass",children:(0,r.jsx)(s.code,{children:"OutgoingMessage"})}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Si le token ",(0,r.jsx)(s.code,{children:"$4DSID"})," est valide, la session de l'utilisateur web concern\xe9 est ",(0,r.jsx)(s.strong,{children:"automatiquement restaur\xe9e"})," dans n'importe quel process web avec son ",(0,r.jsx)(s.em,{children:"storage"})," et ses privil\xe8ges."]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Une url ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/WebServer/httpRequests#4daction",children:(0,r.jsx)(s.code,{children:"4DACTION"})})," peut \xe9galement \xeatre utilis\xe9e du c\xf4t\xe9 4D."]})}),"\n",(0,r.jsx)(s.h4,{id:"utilisation-dun-param\xe8tre-personnalis\xe9",children:"Utilisation d'un param\xe8tre personnalis\xe9"}),"\n",(0,r.jsx)(s.p,{children:"Le token OTP peut \xe9galement \xeatre fourni en tant que param\xe8tre personnalis\xe9 que vous devez traiter sp\xe9cifiquement pour restaurer la session. Vous devez utiliser cette solution si :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["l'application tierce ne permet pas d'ins\xe9rer des param\xe8tres tels que ",(0,r.jsx)(s.code,{children:"$4DSID"})," directement dans l'Uri de redirection, et fournit une API d\xe9di\xe9e (l'impl\xe9mentation d\xe9pend de l'application tierce),"]}),"\n",(0,r.jsxs)(s.li,{children:["ou bien vous souhaitez appeler une fonction ORDA via REST pour traiter le callback, auquel cas vous devez transmettre l'OTP avec la ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/REST/classFunctions#parameters",children:"syntaxe des param\xe8tres REST"})," (par exemple ",(0,r.jsx)(s.code,{children:"?$params='[\"XXX123\"]'"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Dans les deux cas, vous devez extraire le token du param\xe8tre personnalis\xe9 et appeler la fonction ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#restore",children:(0,r.jsx)(s.code,{children:"Session.restore()"})})," avec le token en param\xe8tre."]}),"\n",(0,r.jsx)(s.h4,{id:"traitement-dun-otp-non-valide",children:"Traitement d'un OTP non valide"}),"\n",(0,r.jsx)(s.p,{children:"Le token OTP est consid\xe9r\xe9 comme invalide si :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"le token de session a d\xe9j\xe0 \xe9t\xe9 utilis\xe9,"}),"\n",(0,r.jsx)(s.li,{children:"le token de session a expir\xe9,"}),"\n",(0,r.jsx)(s.li,{children:"le token de session n'existe pas,"}),"\n",(0,r.jsx)(s.li,{children:"la session d'origine elle-m\xeame a expir\xe9."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Dans ce cas, aucune session d'utilisateur Web n'est restaur\xe9e et la session courante (s'il y en a une) reste inchang\xe9e. En g\xe9n\xe9ral, vous pouvez d\xe9cider d'afficher une page de connexion ou d'ouvrir une session guest."}),"\n",(0,r.jsx)(s.p,{children:"La v\xe9rification de la validit\xe9 du token OTP re\xe7u d\xe9pend de la mani\xe8re dont il a \xe9t\xe9 g\xe9r\xe9 :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Si vous avez utilis\xe9 un ",(0,r.jsx)(s.code,{children:"$4DSID"}),", vous pouvez stocker une propri\xe9t\xe9 d'\xe9tat personnalis\xe9e dans le ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#storage",children:"storage de la session"})," au moment de la cr\xe9ation du token, et v\xe9rifier cet \xe9tat une fois que le token OTP a \xe9t\xe9 re\xe7u pour voir s'il s'agit de la m\xeame valeur (voir l'exemple)."]}),"\n",(0,r.jsxs)(s.li,{children:["Si vous avez utilis\xe9 la fonction ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#restore",children:(0,r.jsx)(s.code,{children:"Session.restore()"})}),", elle renvoie true si la session a \xe9t\xe9 correctement restaur\xe9e."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"sc\xe9nario-avec-4dsid",children:"Sc\xe9nario avec $4DSID"}),"\n",(0,r.jsxs)(s.p,{children:["Le sc\xe9nario utilisant la cl\xe9 ",(0,r.jsx)(s.code,{children:"$4DSID"})," est illustr\xe9 dans le diagramme suivant :"]}),"\n",(0,r.jsx)(s.mermaid,{value:"sequenceDiagram\n  Actor User as User\n  participant FrontEnd as Front end\n  participant 4DServer as 4D Server\n  participant ExternalPlatform as External platform\n\n  User ->>+ FrontEnd: Validate\n  \n  FrontEnd ->>+ 4DServer: ValidateOperation()\n\n    4DServer ->> 4DServer: Cr\xe9er OTP avec session.createOTP()\nNote over 4DServer: e.g. OTP vaut 2E5D0D5xxx\n\n  4DServer ->>+ ExternalPlatform: Appel de la plate-forme tirece, envoi d'un URL de rappel contenant un param\xe8tre $4DSID (d\xe9pend de l'API de la plate-forme)\n\n  Note right of 4DServer: e.g. callback URL: \"https://acme.com/my4DApp/completeOperation?$4DSID=2E5D0D5xxx\"\n\n ExternalPlatform ->>+ ExternalPlatform: Traitement de la requ\xeate\nExternalPlatform ->>+ 4DServer: Rappel de 4D Server si validation OK\nNote right of 4DServer: e.g. https://acme.com/my4DApp/completeOperation?$4DSID=2E5D0D57751D471DB29FD110D2DCE253\n    4DServer ->> 4DServer: Un HTTP request handler traite le motif d'URL \"/my4DApp/completeOperation\"<br/>(e.g. fonction handleOperation() du singleton OperationsHandler, voir code ci-dessous)\n\n   Note over 4DServer: La session d'origine session est restaur\xe9e gr\xe2ce \xe0 l'OTP fourni dans le param\xe8tre $4DSID.\n     Note over 4DServer: L'objet Session r\xe9f\xe9rence la session qui a g\xe9n\xe9r\xe9 l'OTP\n  4DServer ->>+ FrontEnd: Restauration de la session\n"}),"\n",(0,r.jsx)(s.p,{children:"La d\xe9finition du gestionnaire de requ\xeates HTTP 4D :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "class": "OperationsHandler",\n    "method": "handleOperation",\n    "regexPattern": "/my4DApp/completeOperation",\n    "verbs": "get"\n  }\n]\n'})}),"\n",(0,r.jsx)(s.p,{children:"La classe du singleton :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"//Class OperationsHandler\nshared singleton Class constructor()\n    function handleOperation($request : 4D.IncomingMessage) \n    $session:=Session\n"})}),"\n",(0,r.jsxs)(s.h3,{id:"sc\xe9nario-avec-la-fonction-restore",children:["Sc\xe9nario avec la fonction ",(0,r.jsx)(s.code,{children:"restore"})]}),"\n",(0,r.jsx)(s.p,{children:"Le sc\xe9nario utilisant un param\xe8tre personnalis\xe9 est illustr\xe9 dans le diagramme suivant :"}),"\n",(0,r.jsx)(s.mermaid,{value:"sequenceDiagram\n  Actor User as User\n  participant FrontEnd as Front end\n  participant 4DServer as 4D Server\n  participant ExternalPlatform as External platform\n\n  User ->>+ FrontEnd: Validate\n  FrontEnd ->>+ 4DServer: Validate()\n\n\n    4DServer ->> 4DServer: Cr\xe9er OTP avec session.createOTP()\n    Note over 4DServer: e.g. OTP is 2E5D0D5xxx\n\n  4DServer ->> ExternalPlatform: Appel de la plate-forme externe en donnant l'OTP, par exemple sous forme de param\xe8tre state (d\xe9pend de la plate-forme)\n    Note right of 4DServer: e.g. https://thirdPartSystem.com/validate?state=2E5D0D5xxx&redirect_uri=https://acme.com/my4DApp/completeOperation\n      Note right of 4DServer: L'URLde rappel sera du type : https://acme.com/my4DApp/completeOperation?state=2E5D0D5xxx\n ExternalPlatform ->> ExternalPlatform: Traitement de la requ\xeate\n  ExternalPlatform ->> 4DServer: Le param\xe8tre state est renvoy\xe9 par le syst\xe8me tiers dans la callback\n        Note right of 4DServer: e.g. https://acme.com/my4DApp/completeOperation?state=2E5D0D5xxx\n 4DServer ->> 4DServer: Un HTTP request handler traite le motif d'URL \"/my4DApp/completeOperation\"<br/> (e.g. fonction handleOperation() du singleton OperationHandler, voir code ci-dessous)\n\n4DServer ->> 4DServer: Session.restore()\n\n\n Note over 4DServer:Le param\xe8tre state est extrait de la requ\xeate re\xe7ue ($req.urlQuery.state)\n   Note over 4DServer:La session originale est restaur\xe9e par l'appel \xe0 la fonction restore()\n  Note over 4DServer: L'objet Session r\xe9f\xe9rence la session qui a g\xe9n\xe9r\xe9 l'OTP\n   4DServer ->>+ FrontEnd: Restauration de la session\n\n"}),"\n",(0,r.jsx)(s.p,{children:"La d\xe9finition du gestionnaire de requ\xeates HTTP 4D :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "class": "OperationsHandler",\n    "method": "handleOperation",\n    "regexPattern": "/my4DApp/completeOperation",\n    "verbs": "get"\n  }\n]\n'})}),"\n",(0,r.jsx)(s.p,{children:"La classe du singleton :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:"//Class OperationsHandler\nshared singleton Class constructor()\n    Function handleOperation($req : 4D.IncomingMessage) : 4D.OutgoingMessage\n    Session.restore($req.urlQuery.state)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"exemple-de-validation-demail-avec-4dsid",children:"Exemple de validation d'email avec $4DSID"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Un compte d'utilisateur est cr\xe9\xe9 dans une dataclass ",(0,r.jsx)(s.em,{children:"Users"}),". Un objet ",(0,r.jsx)(s.em,{children:"$info"})," est re\xe7u avec l'email et le mot de passe. Un OTP correspondant \xe0 la session courante est g\xe9n\xe9r\xe9. Une URL est alors renvoy\xe9e avec l'OTP indiqu\xe9 dans le param\xe8tre $4DSID."]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'//cs.Users class\n\nFunction create($info : Object) : Text\n	\nvar $user : cs.UsersEntity\nvar $status : Object\nvar $token : Text\n	\n$user:=This.new() //cr\xe9atoin d\'un user\n$user.fromObject($info)\n$status:=$user.save()\n	\n//Stockage d\'information dans la session\n//y compris le statut de cr\xe9ation de l\'utilisateur\nUse (Session.storage)\n	Session.storage.status:=New shared object("step"; "Waiting for validation email"; /\n    "email"; $user.email; "ID"; $user.ID)\nEnd use \n	\n//G\xe9n\xe9ration d\'un OTP correspondant \xe0 la session\n$token:=Session.createOTP()\n\n// Renvoi d\'un URL avec un param\xe8tre $4DSID\nreturn "https://my.server.com/tools/validateEmail?$4DSID="+$token`\n\n'})}),"\n",(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsxs)(s.li,{children:["L'utilisateur re\xe7oit cette URL sous la forme d'un lien dans un courrier \xe9lectronique. Le pr\xe9fixe d'URL ",(0,r.jsx)(s.code,{children:"/validateEmail"})," est trait\xe9 par un ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/WebServer/http-request-handler",children:"gestionnaire de requ\xeate HTTP personnalis\xe9"})," :"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "class": "RequestHandler",\n    "method": "validateEmail",\n    "regexPattern": "/validateEmail",\n    "verbs": "get"\n  }\n]\n'})}),"\n",(0,r.jsxs)(s.p,{children:["La fonction ",(0,r.jsx)(s.em,{children:"validateEmail()"})," du singleton RequestHandler :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'//validateEmail class\n\nshared singleton Class constructor()\n\nFunction validateEmail() : 4D.OutgoingMessage\n	\n var $result:=4D.OutgoingMessage.new()\n    //La session qui a g\xe9n\xe9r\xe9 l\'OTP est restaur\xe9e \n    //gr\xe2ce au param\xe8tre $4DSID fourni dans l\'URL\n If (Session.storage.status.step="Waiting for validation email")\n	\n  $user:=ds.Users.get(Session.storage.status.ID)\n  $user.emailValidated() //fix\xe9 \xe0 vrai\n		\n  $result.setBody("Congratulations <br>"\\\n  +"Your email "+Session.storage.status.email+" has been validated")\n		\n  $result.setHeader("Content-Type"; "text/html"	\n  Use (Session.storage.status)\n	Session.storage.status.step:="Email validated"\n  End use\n Else\n  $result.setBody("Invalid token")\n\n End if \n	\n return $result\n\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Comme le param\xe8tre ",(0,r.jsx)(s.code,{children:"$4DSID"})," contient un OTP valide correspondant \xe0 la session d'origine, l'objet ",(0,r.jsx)(s.code,{children:"Session"})," r\xe9f\xe9rence la session qui a cr\xe9\xe9 l'OTP."]}),"\n",(0,r.jsx)(s.p,{children:"Un nouvel utilisateur est cr\xe9\xe9 et des informations sont stock\xe9es dans la session, en particulier l'\xe9tape courante du processus de cr\xe9ation du compte utilisateur (attente du courriel de validation) et l'identifiant de l'utilisateur."}),"\n",(0,r.jsx)(s.h3,{id:"contextes-pris-en-charge",children:"Contextes pris en charge"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Les sch\xe9mas HTTP et HTTPS sont tous deux pris en charge."}),"\n",(0,r.jsxs)(s.li,{children:["Seules des ",(0,r.jsx)(s.a,{href:"#enabling-web-sessions",children:"sessions \xe9volutives"})," peuvent \xeatre r\xe9utilis\xe9es avec des tokens."]}),"\n",(0,r.jsx)(s.li,{children:"Seules les sessions de la base de donn\xe9es h\xf4te peuvent \xeatre r\xe9utilis\xe9es (les sessions cr\xe9\xe9es dans les serveurs web des composants ne peuvent pas \xeatre restaur\xe9es)."}),"\n",(0,r.jsx)(s.li,{children:"Les tokens ne sont pas pris en charge dans les sessions client/serveur ou les sessions mono-utilisateur."}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"dur\xe9e-de-vie",children:"Dur\xe9e de vie"}),"\n",(0,r.jsxs)(s.p,{children:["Un token de session a une dur\xe9e de vie, et la session elle-m\xeame a une dur\xe9e de vie. La dur\xe9e de vie du token de session peut \xeatre d\xe9finie ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#createotp",children:"lors de sa cr\xe9ation"}),". Par d\xe9faut, la dur\xe9e de vie du token est la m\xeame que la valeur ",(0,r.jsx)(s.a,{href:"/docs/fr/20-R10/API/SessionClass#idletimeout",children:(0,r.jsx)(s.code,{children:".idleTimeout"})}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Une session n'est restaur\xe9e par un token que si ni la dur\xe9e de vie du token de session ni celle de la session n'ont expir\xe9. Dans les autres cas (le token de session a expir\xe9 et/ou la session elle-m\xeame a expir\xe9), une session ",(0,r.jsx)(s.em,{children:"guest"})," est cr\xe9\xe9e lorsqu'une requ\xeate web avec un token de session est re\xe7ue."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Pour plus d'informations, veuillez consulter l'article de blog ",(0,r.jsx)(s.a,{href:"https://blog.4d.com/connect-your-web-apps-to-third-party-systems/",children:"Connecter vos applications Web \xe0 des syst\xe8mes tiers"}),"."]})})]})}function u(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},380339:function(e,s,n){n.d(s,{A:()=>i});let i="data:image/png;base64,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"},256494:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/exampleSession-6ea5390dae0da375f51de68193ef570e.png"},694457:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/schemaSession-a7c86d4948895f03c24611177cd54f7c.png"},244859:function(e,s,n){n.d(s,{A:()=>i});let i=n.p+"assets/images/settingsSession-0d1b28de173a572d3a47fcf327e29b28.png"},884429:function(e,s,n){n.d(s,{R:()=>a,x:()=>o});var i=n(296540);let r={},t=i.createContext(r);function a(e){let s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);