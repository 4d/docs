"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[41172],{512460:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>o});var t=s(474848),r=s(28453);const i={id:"httpRequests",title:"Traitement des requ\xeates HTTP"},a=void 0,d={id:"WebServer/httpRequests",title:"Traitement des requ\xeates HTTP",description:"Le serveur web 4D offre plusieurs fonctionnalit\xe9s pour g\xe9rer les requ\xeates HTTP :",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-20/WebServer/httpRequests.md",sourceDirName:"WebServer",slug:"/WebServer/httpRequests",permalink:"/docs/fr/20/WebServer/httpRequests",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20WebServer%2FhttpRequests.md%20(20)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20",frontMatter:{id:"httpRequests",title:"Traitement des requ\xeates HTTP"},sidebar:"docs",previous:{title:"Pages templates",permalink:"/docs/fr/20/WebServer/templates"},next:{title:"M\xe9thodes projet",permalink:"/docs/fr/20/WebServer/allowProject"}},l={},o=[{value:"On Web Connection",id:"on-web-connection",level:2},{value:"Appels des m\xe9thodes base",id:"appels-des-m\xe9thodes-base",level:3},{value:"Syntaxe",id:"syntaxe",level:3},{value:"$1 - URL extra data",id:"1---url-extra-data",level:3},{value:"$2 - En-t\xeate (header) et corps (body) de la requ\xeate HTTP",id:"2---en-t\xeate-header-et-corps-body-de-la-requ\xeate-http",level:3},{value:"$3 - Adresse IP du client Web",id:"3---adresse-ip-du-client-web",level:3},{value:"$4 - Adresse IP du serveur",id:"4---adresse-ip-du-serveur",level:3},{value:"$5 et $6 - Nom d&#39;utilisateur et mot de passe",id:"5-et-6---nom-dutilisateur-et-mot-de-passe",level:3},{value:"/4DACTION",id:"4daction",level:2},{value:"Exemple",id:"exemple",level:4},{value:"4DACTION pour poster des formulaires",id:"4daction-pour-poster-des-formulaires",level:3},{value:"Exemple",id:"exemple-1",level:4},{value:"R\xe9cup\xe9rer des valeurs depuis des requ\xeates HTTP",id:"r\xe9cup\xe9rer-des-valeurs-depuis-des-requ\xeates-http",level:2},{value:"Autres commandes de serveur Web",id:"autres-commandes-de-serveur-web",level:2},{value:"M\xe9thode projet COMPILER_WEB",id:"m\xe9thode-projet-compiler_web",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Le serveur web 4D offre plusieurs fonctionnalit\xe9s pour g\xe9rer les requ\xeates HTTP :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.code,{children:"On Web Connection"})," database method, a router for your web application,"]}),"\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.code,{children:"/4DACTION"})," URL to call server-side code"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"WEB GET VARIABLES"})," to get values from HTML objects sent to the server"]}),"\n",(0,t.jsxs)(n.li,{children:["other commands such as ",(0,t.jsx)(n.code,{children:"WEB GET HTTP BODY"}),", ",(0,t.jsx)(n.code,{children:"WEB GET HTTP HEADER"}),", or ",(0,t.jsx)(n.code,{children:"WEB GET BODY PART"})," allow to customize the request processing, including cookies."]}),"\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.em,{children:"COMPILER_WEB"})," project method, to declare your variables."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"on-web-connection",children:"On Web Connection"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"On Web Connection"})," database method can be used as the entry point for the 4D Web server."]}),"\n",(0,t.jsx)(n.h3,{id:"appels-des-m\xe9thodes-base",children:"Appels des m\xe9thodes base"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"On Web Connection"})," database method is automatically called when the server receives any URL that is not a path to an existing page on the server. La m\xe9thode base est appel\xe9e avec l'URL."]}),"\n",(0,t.jsxs)(n.p,{children:['For example, the URL "',(0,t.jsx)(n.em,{children:"a/b/c"}),'" will call the database method, but "',(0,t.jsx)(n.em,{children:"a/b/c.html"}),'" will not call the database method if the page "c.html" exists in the "a/b" subfolder of the ',(0,t.jsx)(n.a,{href:"/docs/fr/20/WebServer/webServerConfig#root-folder",children:"WebFolder"}),"."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["The request should have previously been accepted by the ",(0,t.jsx)(n.a,{href:"/docs/fr/20/WebServer/authentication#on-web-authentication",children:(0,t.jsx)(n.code,{children:"On Web Authentication"})})," database method (if it exists) and the web server must be launched."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"syntaxe",children:"Syntaxe"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"On Web Connection"}),"( ",(0,t.jsx)(n.em,{children:"$1"})," : Text ; ",(0,t.jsx)(n.em,{children:"$2"})," : Text ; ",(0,t.jsx)(n.em,{children:"$3"})," : Text ; ",(0,t.jsx)(n.em,{children:"$4"})," : Text ; ",(0,t.jsx)(n.em,{children:"$5"})," : Text ; ",(0,t.jsx)(n.em,{children:"$6"})," : Text )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{style:{textAlign:"center"}}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$1"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,t.jsx)(n.td,{children:"Variable URL"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$2"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,t.jsx)(n.td,{children:"En-t\xeates HTTP + Corps HTTP (jusqu'\xe0 une limite de 32 ko)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$3"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,t.jsx)(n.td,{children:"Adresse IP du client web (navigateur)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$4"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,t.jsx)(n.td,{children:"Adresse IP du serveur"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$5"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,t.jsx)(n.td,{children:"Nom d'utilisateur"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$6"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,t.jsx)(n.td,{children:"Mot de passe"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Vous devez d\xe9clarer ces param\xe8tres de la mani\xe8re suivante :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"//On Web Connection\n \n C_TEXT($1;$2;$3;$4;$5;$6)\n \n//Code de la m\xe9thode base\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Alternatively, you can use the ",(0,t.jsx)(n.a,{href:"/docs/fr/20/Concepts/parameters#named-parameters",children:"named parameters"})," syntax:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"// On Web Connection database method\n#DECLARE ($url : Text; $header : Text; \\\n  $BrowserIP : Text; $ServerIP : Text; \\\n  $user : Text; $password : Text)\n\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Calling a 4D command that displays an interface element (",(0,t.jsx)(n.code,{children:"DIALOG"}),", ",(0,t.jsx)(n.code,{children:"ALERT"}),", etc.) is not allowed and ends the method processing."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"1---url-extra-data",children:"$1 - URL extra data"}),"\n",(0,t.jsx)(n.p,{children:"Le premier param\xe8tre ($1) est l'URL saisie par les utilisateurs dans la barre d'adresse de leur navigateur web, sans l'adresse du serveur."}),"\n",(0,t.jsx)(n.p,{children:"Prenons une connexion intranet comme exemple. Supposons que l'adresse IP de votre machine serveur Web 4D est 123.4.567.89. Le tableau suivant montre les valeurs de $1 en fonction de l'URL saisie dans le navigateur Web :"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"URL entr\xe9e dans le navigateur web"}),(0,t.jsx)(n.th,{children:"Valeur du param\xe8tre $1"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"123.4.567.89"}),(0,t.jsx)(n.td,{children:"/"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"http://123.45.67.89",children:"http://123.45.67.89"})}),(0,t.jsx)(n.td,{children:"/"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"123.4.567.89/Customers"}),(0,t.jsx)(n.td,{children:"/Customers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"http://123.45.67.89/Customers/Add",children:"http://123.45.67.89/Customers/Add"})}),(0,t.jsx)(n.td,{children:"/Customers/Add"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"123.4.567.89/Do_This/If_OK/Do_That"}),(0,t.jsx)(n.td,{children:"/Do_This/If_OK/Do_That"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Notez que vous \xeates libre d'utiliser ce param\xe8tre \xe0 votre convenance. 4D ignore simplement la valeur pass\xe9e au-del\xe0 de la partie h\xf4te de l'URL. For example, you can establish a convention where the value \"",(0,t.jsx)(n.em,{children:"/Customers/Add"}),'" means \u201cgo directly to add a new record in the ',(0,t.jsx)(n.code,{children:"[Customers]"})," table.\u201d By supplying the web users with a list of possible values and/or default bookmarks, you can provide shortcuts to different parts of your application. En proposant aux utilisateurs web une liste de valeurs possibles et/ou des signets par d\xe9faut, vous pouvez leur fournir des raccourcis vers diff\xe9rentes parties de votre application. De cette fa\xe7on, les utilisateurs web peuvent acc\xe9der rapidement aux ressources de votre site web sans passer par le chemin de navigation complet \xe0 chaque nouvelle connexion."]}),"\n",(0,t.jsx)(n.h3,{id:"2---en-t\xeate-header-et-corps-body-de-la-requ\xeate-http",children:"$2 - En-t\xeate (header) et corps (body) de la requ\xeate HTTP"}),"\n",(0,t.jsxs)(n.p,{children:["Le deuxi\xe8me param\xe8tre ($2) est l'en-t\xeate (header) et le corps (body) de la requ\xeate HTTP envoy\xe9e par le navigateur web. Note that this information is passed to your ",(0,t.jsx)(n.code,{children:"On Web Connection"}),' database method "as is". Son contenu variera en fonction de la nature du navigateur web qui tente la connexion.']}),"\n",(0,t.jsxs)(n.p,{children:["Si votre application utilise ces informations, il vous appartient d'analyser l'en-t\xeate et le corps. You can use the ",(0,t.jsx)(n.code,{children:"WEB GET HTTP HEADER"})," and the ",(0,t.jsx)(n.code,{children:"WEB GET HTTP BODY"})," commands."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Pour des raisons de performance, la taille des donn\xe9es passant par le param\xe8tre $2 ne doit pas d\xe9passer 32 Ko. Au-del\xe0 de cette taille, ils sont tronqu\xe9s par le serveur HTTP 4D."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3---adresse-ip-du-client-web",children:"$3 - Adresse IP du client Web"}),"\n",(0,t.jsx)(n.p,{children:"Le param\xe8tre $3 re\xe7oit l'adresse IP de la machine du navigateur. Cette information peut vous permettre de distinguer entre les connexions intranet et internet."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["4D renvoie les adresses IPv4 dans un format hybride IPv6/IPv4 \xe9crit avec un pr\xe9fixe de 96 bits, par exemple ::ffff:192.168.2.34 pour l'adresse IPv4 192.168.2.34. For more information, refer to the ",(0,t.jsx)(n.a,{href:"/docs/fr/20/WebServer/webServerConfig#about-ipv6-support",children:"IPv6 Support"})," section."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"4---adresse-ip-du-serveur",children:"$4 - Adresse IP du serveur"}),"\n",(0,t.jsxs)(n.p,{children:["Le param\xe8tre ",(0,t.jsx)(n.code,{children:"$4"})," re\xe7oit l'adresse IP utilis\xe9e pour appeler le serveur web 4D. 4D prend en charge le multi-homing, ce qui vous permet d'exploiter des machines avec plus d'une adresse IP. Pour plus d'informations, veuillez consulter la ",(0,t.jsx)(n.a,{href:"webServerConfig.html#ip-address-to-listen",children:"Page Configuration"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"5-et-6---nom-dutilisateur-et-mot-de-passe",children:"$5 et $6 - Nom d'utilisateur et mot de passe"}),"\n",(0,t.jsxs)(n.p,{children:["The $5 and $6 parameters receive the user name and password entered by the user in the standard identification dialog box displayed by the browser, if applicable (see the ",(0,t.jsx)(n.a,{href:"/docs/fr/20/WebServer/authentication",children:"authentication page"}),")."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Si le nom d'utilisateur envoy\xe9 par le navigateur existe dans 4D, le param\xe8tre $6 (le mot de passe de l'utilisateur) n'est pas renvoy\xe9 pour des raisons de s\xe9curit\xe9."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"4daction",children:"/4DACTION"}),"\n",(0,t.jsxs)(n.p,{children:["***/4DACTION/",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"MethodName"})}),(0,t.jsx)(n.br,{})," **/4DACTION/*****",(0,t.jsx)(n.em,{children:"MethodName/Param"})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{style:{textAlign:"center"}}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"MethodName"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"->"}),(0,t.jsx)(n.td,{children:"Nom de la m\xe9thode projet 4D \xe0 ex\xe9cuter"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Param"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"->"}),(0,t.jsx)(n.td,{children:"Param\xe8tre texte \xe0 passer \xe0 la m\xe9thode projet"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Usage:"})," URL or Form action."]}),"\n",(0,t.jsxs)(n.p,{children:["This URL allows you to call the ",(0,t.jsx)(n.em,{children:"MethodName"})," 4D project method with an optional ",(0,t.jsx)(n.em,{children:"Param"})," text parameter. The method will receive this parameter in ",(0,t.jsx)(n.em,{children:"$1"}),"."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The 4D project method must have been ",(0,t.jsx)(n.a,{href:"/docs/fr/20/WebServer/allowProject",children:"allowed for web requests"}),": the \u201cAvailable through 4D tags and URLs (4DACTION...)\u201d attribute value must have been checked in the properties of the method. Si l'attribut n'est pas coch\xe9, la requ\xeate web est rejet\xe9e."]}),"\n",(0,t.jsxs)(n.li,{children:["When 4D receives a ",(0,t.jsx)(n.code,{children:"/4DACTION/MethodName/Param"})," request, the ",(0,t.jsx)(n.code,{children:"On Web Authentication"})," database method (if it exists) is called."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"4DACTION/"})," can be associated with a URL in a static Web page:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<A HREF="/4DACTION/MyMethod/hello">Do Something</A>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"MyMethod"}),' project method should generally return a "reply" (sending of an HTML page using ',(0,t.jsx)(n.code,{children:"WEB SEND FILE"})," or ",(0,t.jsx)(n.code,{children:"WEB SEND TEXT"}),", etc.). Assurez-vous de rendre le traitement aussi court que possible afin de ne pas bloquer le navigateur."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["A method called by ",(0,t.jsx)(n.code,{children:"/4DACTION"})," must not call interface elements (",(0,t.jsx)(n.code,{children:"DIALOG"}),", ",(0,t.jsx)(n.code,{children:"ALERT"}),", etc.)."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"exemple",children:"Exemple"}),"\n",(0,t.jsxs)(n.p,{children:["This example describes the association of the ",(0,t.jsx)(n.code,{children:"/4DACTION"})," URL with an HTML picture object in order to dynamically display a picture in the page. Vous ins\xe9rez les instructions suivantes dans une page HTML statique :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<IMG SRC="/4DACTION/getPhoto/smith">\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"getPhoto"})," method is as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'C_TEXT($1) // Ce param\xe8tre doit toujours \xeatre d\xe9clar\xe9\nvar $path : Text\nvar $PictVar : Picture\nvar $BlobVar : Blob\n\n// trouver l\'image dans le dossier Images dans le dossier Resources \n$path:=Get 4D folder(Current resources folder)+"Images"+Folder separator+$1+".psd"\n\nREAD PICTURE FILE($path;$PictVar) // mettre l\'image dans la variable image\nPICTURE TO BLOB($PictVar;$BLOB;".png") // convertir l\'image au format ".png"\nWEB SEND BLOB($BLOB;"image/png")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4daction-pour-poster-des-formulaires",children:"4DACTION pour poster des formulaires"}),"\n",(0,t.jsx)(n.p,{children:"Le serveur Web 4D vous permet \xe9galement d'utiliser des formulaires \"post\xe9s\", qui sont des pages HTML statiques envoyant des donn\xe9es au serveur Web, et de r\xe9cup\xe9rer facilement toutes les valeurs. Le type POST doit leur \xeatre associ\xe9 et l'action du formulaire doit imp\xe9rativement commencer par /4DACTION/NomDeLaM\xe9thode."}),"\n",(0,t.jsx)(n.p,{children:"Il existe deux m\xe9thodes pour soumettre un formulaire (toutes deux pouvant \xeatre utilis\xe9es avec 4D) :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"POST, g\xe9n\xe9ralement utilis\xe9e pour envoyer des donn\xe9es au serveur Web,"}),"\n",(0,t.jsx)(n.li,{children:"GET, g\xe9n\xe9ralement utilis\xe9e pour r\xe9cup\xe9rer des donn\xe9es du serveur Web."}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["When the Web server receives a posted form, it calls the ",(0,t.jsx)(n.code,{children:"On Web Authentication"})," database method (if it exists)."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["In the called method, you must call the ",(0,t.jsx)(n.code,{children:"WEB GET VARIABLES"})," command in order to ",(0,t.jsx)(n.a,{href:"#getting-values-from-the-requests",children:"retrieve the names and values"})," of all the fields included in an HTML page submitted to the server."]}),"\n",(0,t.jsx)(n.p,{children:"Exemple pour d\xe9finir l'action d'un formulaire :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<FORM ACTION="/4DACTION/MethodName" METHOD=POST>\n'})}),"\n",(0,t.jsx)(n.h4,{id:"exemple-1",children:"Exemple"}),"\n",(0,t.jsxs)(n.p,{children:["Dans une application Web, nous aimerions que les navigateurs puissent rechercher parmi les enregistrements en utilisant une page HTML statique. Cette page s'appelle \u201csearch.htm\u201d. L'application contient d'autres pages statiques qui vous permettent, par exemple, d'afficher le r\xe9sultat de la recherche (\"results.htm\"). The POST type has been associated to the page, as well as the ",(0,t.jsx)(n.code,{children:"/4DACTION/SEARCH"})," action."]}),"\n",(0,t.jsx)(n.p,{children:"Voici le code HTML qui correspond \xe0 cette page :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<form action="/4daction/processForm" method=POST>\n<input type=text name=vName value=""><br/>\n<input type=checkbox name=vExact value="Word">Whole word<br/>\n<input type=submit name=OK value="Search">\n</FORM>\n'})}),"\n",(0,t.jsxs)(n.p,{children:['During data entry, type \u201cABCD\u201d in the data entry area, check the "Whole word" option and validate it by clicking the ',(0,t.jsx)(n.strong,{children:"Search"})," button. Dans la requ\xeate envoy\xe9e au serveur Web :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'vName="ABCD"\nvExact="Word"\nOK="Search"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["4D calls the ",(0,t.jsx)(n.code,{children:"On Web Authentication"})," database method (if it exists), then the ",(0,t.jsx)(n.code,{children:"processForm"})," project method is called, which is as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:' C_TEXT($1) //mandatory for compiled mode\n C_LONGINT($vName)\n C_TEXT(vName;vLIST)\n ARRAY TEXT($arrNames;0)\n ARRAY TEXT($arrVals;0)\n WEB GET VARIABLES($arrNames;$arrVals) //we retrieve all the variables of the form\n $vName:=Find in array($arrNames;"vName")\n vName:=$arrVals{$vName}\n If(Find in array($arrNames;"vExact")=-1) //If the option has not been checked\n    vName:=vName+"@"\n End if\n QUERY([Jockeys];[Jockeys]Name=vName)\n FIRST RECORD([Jockeys])\n While(Not(End selection([Jockeys])))\n    vLIST:=vLIST+[Jockeys]Name+" "+[Jockeys]Tel+"<br/>"\n    NEXT RECORD([Jockeys])\n End while\n WEB SEND FILE("results.htm") //Send the list to the results.htm form\n  //which contains a reference to the variable vLIST,\n  //for example \x3c!--4DHTML vLIST--\x3e\n  //...\nEnd if\n'})}),"\n",(0,t.jsx)(n.h2,{id:"r\xe9cup\xe9rer-des-valeurs-depuis-des-requ\xeates-http",children:"R\xe9cup\xe9rer des valeurs depuis des requ\xeates HTTP"}),"\n",(0,t.jsx)(n.p,{children:"Le serveur Web de 4D vous permet de r\xe9cup\xe9rer les donn\xe9es envoy\xe9es via des requ\xeates POST ou GET, en utilisant des formulaires Web ou des URL."}),"\n",(0,t.jsxs)(n.p,{children:["Lorsque le serveur Web re\xe7oit une requ\xeates avec des donn\xe9es dans l'en-t\xeate ou dans l'URL, 4D peut r\xe9cup\xe9rer les valeurs de tous les objets HTML qu'elle contient. This principle can be implemented in the case of a Web form, sent for example using ",(0,t.jsx)(n.code,{children:"WEB SEND FILE"})," or ",(0,t.jsx)(n.code,{children:"WEB SEND BLOB"}),", where the user enters or modifies values, then clicks on the validation button."]}),"\n",(0,t.jsxs)(n.p,{children:["In this case, 4D can retrieve the values of the HTML objects found in the request using the ",(0,t.jsx)(n.code,{children:"WEB GET VARIABLES"})," command. The ",(0,t.jsx)(n.code,{children:"WEB GET VARIABLES"})," command retrieves the values as text."]}),"\n",(0,t.jsx)(n.p,{children:"Consid\xe9rons le code source HTML suivant :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<html>\n<head>\n  <title>Welcome</title>\n  <script language="JavaScript">\x3c!--\nfunction GetBrowserInformation(formObj){\nformObj.vtNav_appName.value = navigator.appName\nformObj.vtNav_appVersion.value = navigator.appVersion\nformObj.vtNav_appCodeName.value = navigator.appCodeName\nformObj.vtNav_userAgent.value = navigator.userAgent\nreturn true\n}\nfunction LogOn(formObj){\nif(formObj.vtUserName.value!=""){\nreturn true\n} else {\nalert("Enter your name, then try again.")\nreturn false\n}\n}\n//--\x3e<\/script>\n</head>\n<body>\n<form action="/4DACTION/WWW_STD_FORM_POST" method="post"\n name="frmWelcome"\n onsubmit="return GetBrowserInformation(frmWelcome)">\n  <h1>Welcome to Spiders United</h1>\n  <p><b>Please enter your name:</b>\n  <input name="vtUserName" value="" size="30" type="text"></p>\n  <p>\n<input name="vsbLogOn" value="Log On" onclick="return LogOn(frmWelcome)" type="submit">\n<input name="vsbRegister" value="Register" type="submit">\n<input name="vsbInformation" value="Information" type="submit"></p>\n<p>\n<input name="vtNav_appName" value="" type="hidden">\n<input name="vtNav_appVersion" value="" type="hidden">\n<input name="vtNav_appCodeName" value="" type="hidden">\n<input name="vtNav_userAgent" value="" type="hidden"></p>\n</form>\n</body>\n</html>\n'})}),"\n",(0,t.jsx)(n.p,{children:"Quand 4D envoie la page \xe0 un navigateur Web, cela ressemble \xe0 ceci :"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(979015).A+"",width:"446",height:"156"})}),"\n",(0,t.jsx)(n.p,{children:"Les principales caract\xe9ristiques de cette page sont les suivantes :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["It includes three ",(0,t.jsx)(n.strong,{children:"Submit"})," buttons: ",(0,t.jsx)(n.code,{children:"vsbLogOn"}),", ",(0,t.jsx)(n.code,{children:"vsbRegister"})," and ",(0,t.jsx)(n.code,{children:"vsbInformation"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["When you click ",(0,t.jsx)(n.strong,{children:"Log On"}),", the submission of the form is first processed by the JavaScript function ",(0,t.jsx)(n.code,{children:"LogOn"}),". Si aucun nom n'est saisi, le formulaire n'est m\xeame pas envoy\xe9 \xe0 4D et une alerte JavaScript est affich\xe9e."]}),"\n",(0,t.jsxs)(n.li,{children:["The form has a POST 4D method as well as a Submit script (",(0,t.jsx)(n.em,{children:"GetBrowserInformation"}),") that copies the browser properties to the four hidden objects whose names starts with ",(0,t.jsx)(n.em,{children:"vtNav_App"}),". It also includes the ",(0,t.jsx)(n.code,{children:"vtUserName"})," object."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Let\u2019s examine the 4D method ",(0,t.jsx)(n.code,{children:"WWW_STD_FORM_POST"})," that is called when the user clicks on one of the buttons on the HTML form."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'  // Retrieval of value of variables\n ARRAY TEXT($arrNames;0)\n ARRAY TEXT($arrValues;0)\n WEB GET VARIABLES($arrNames;$arrValues)\n C_LONGINT($user)\n\n Case of\n\n  // The Log On button was clicked\n    :(Find in array($arrNames;"vsbLogOn")#-1)\n       $user :=Find in array($arrNames;"vtUserName")\n       QUERY([WWW Users];[WWW Users]UserName=$arrValues{$user})\n       $0:=(Records in selection([WWW Users])>0)\n       If($0)\n          WWW POST EVENT("Log On";WWW Log information)\n  // The WWW POST EVENT method saves the information in a database table\n       Else\n\n          $0:=WWW Register\n  // The WWW Register method lets a new Web user register\n       End if\n\n  // The Register button was clicked\n    :(Find in array($arrNames;"vsbRegister")#-1)\n       $0:=WWW Register\n\n  // The Information button was clicked\n    :(Find in array($arrNames;"vsbInformation")#-1)\n       WEB SEND FILE("userinfos.html")\n End case\n'})}),"\n",(0,t.jsx)(n.p,{children:"Les caract\xe9ristiques de cette m\xe9thode sont :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The values of the variables ",(0,t.jsx)(n.em,{children:"vtNav_appName"}),", ",(0,t.jsx)(n.em,{children:"vtNav_appVersion"}),", ",(0,t.jsx)(n.em,{children:"vtNav_appCodeName"}),", and ",(0,t.jsx)(n.em,{children:"vtNav_userAgent"})," (bound to the HTML objects having the same names) are retrieved using the ",(0,t.jsx)(n.code,{children:"WEB GET VARIABLES"})," command from HTML objects created by the ",(0,t.jsx)(n.em,{children:"GetBrowserInformation"})," JavaScript script."]}),"\n",(0,t.jsxs)(n.li,{children:["Out of the ",(0,t.jsx)(n.em,{children:"vsbLogOn"}),", ",(0,t.jsx)(n.em,{children:"vsbRegister"})," and ",(0,t.jsx)(n.em,{children:"vsbInformation"})," variables bound to the three Submit buttons, only the one corresponding to the button that was clicked will be retrieved by the ",(0,t.jsx)(n.code,{children:"WEB GET VARIABLES"})," command. Lorsque l'envoi est effectu\xe9 par l'un de ces boutons, le navigateur renvoie la valeur du bouton cliqu\xe9 \xe0 4D. Cela vous indique sur quel bouton on a cliqu\xe9."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Gardez \xe0 l'esprit qu'en HTML, tous les objets sont des objets de texte. If you use a SELECT object, it is the value of the highlighted element in the object that is returned in the ",(0,t.jsx)(n.code,{children:"WEB GET VARIABLES"})," command, and not the position of the element in the array as in 4D. ",(0,t.jsx)(n.code,{children:"WEB GET VARIABLES"})," always returns values of the Text type."]}),"\n",(0,t.jsx)(n.h2,{id:"autres-commandes-de-serveur-web",children:"Autres commandes de serveur Web"}),"\n",(0,t.jsx)(n.p,{children:"Le serveur web 4D fournit plusieurs commandes web de bas niveau vous permettant de d\xe9velopper un traitement personnalis\xe9 des requ\xeates :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.code,{children:"WEB GET HTTP BODY"})," command returns the body as raw text, allowing any parsing you may need"]}),"\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.code,{children:"WEB GET HTTP HEADER"})," command return the headers of the request. It is useful to handle custom cookies, for example (along with the ",(0,t.jsx)(n.code,{children:"WEB SET HTTP HEADER"})," command)."]}),"\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.code,{children:"WEB GET BODY PART"})," and ",(0,t.jsx)(n.code,{children:"WEB Get body part count"})," commands to parse the body part of a multi-part request and retrieve text values, but also files posted, using BLOBs."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Ces commandes sont r\xe9sum\xe9es dans le graphique suivant :"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(730759).A+"",width:"676",height:"374"})}),"\n",(0,t.jsxs)(n.p,{children:['Le serveur web 4D prend en charge les fichiers envoy\xe9s en encodage de transfert par morceaux (chunked transfer encoding) depuis n\'importe quel client Web. L\'encodage de transfert chunked est un m\xe9canisme de transfert de donn\xe9es sp\xe9cifi\xe9 en HTTP/1.1. Il permet le transfert de donn\xe9es sous forme de s\xe9ries de "chunks" ou "morceaux" (parts) sans conna\xeetre la taille finale des donn\xe9es. The 4D Web Server also supports chunked transfer encoding from the server to Web clients (using ',(0,t.jsx)(n.code,{children:"WEB SEND RAW DATA"}),")."]}),"\n",(0,t.jsx)(n.h2,{id:"m\xe9thode-projet-compiler_web",children:"M\xe9thode projet COMPILER_WEB"}),"\n",(0,t.jsxs)(n.p,{children:["La m\xe9thode COMPILER_WEB, si elle existe, est syst\xe9matiquement appel\xe9e lorsque le serveur HTTP re\xe7oit une requ\xeate dynamique et appelle le moteur 4D. This is the case, for example, when the 4D Web server receives a posted form or a URL to process in ",(0,t.jsx)(n.a,{href:"#on-web-connection",children:(0,t.jsx)(n.code,{children:"On Web Connection"})}),". Cette m\xe9thode est destin\xe9e \xe0 contenir des directives de typage et/ou d'initialisation de variables utilis\xe9es lors des \xe9changes Web. Elle est utilis\xe9e par le compilateur lorsque l'application est compil\xe9e. La m\xe9thode COMPILER_WEB est commune \xe0 tous les formulaires Web. Par d\xe9faut, la m\xe9thode COMPILER_WEB n'existe pas. Vous devez la cr\xe9er explicitement."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"La m\xe9thode projet COMPILER_WEB est \xe9galement appel\xe9e, si elle existe, pour chaque requ\xeate SOAP accept\xe9e."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},730759:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/httpCommands-f0f40e81d3278591838e7c262365beb9.png"},979015:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/spiders-0e4915c8e3496e1dd10f0b15a4319274.png"},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>d});var t=s(296540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);