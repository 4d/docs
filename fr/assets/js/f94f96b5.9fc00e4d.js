"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[64740],{220796:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var s=t(474848),a=t(28453);const r={id:"on-backup-shutdown-database-method",title:"On Backup Shutdown database method",slug:"/commands/on-backup-shutdown-database-method",displayed_sidebar:"docs"},d=void 0,o={id:"commands-legacy/on-backup-shutdown-database-method",title:"On Backup Shutdown database method",description:"$1 -> On Backup Shutdown database method",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R7/commands-legacy/on-backup-shutdown-database-method.md",sourceDirName:"commands-legacy",slug:"/commands/on-backup-shutdown-database-method",permalink:"/docs/fr/commands/on-backup-shutdown-database-method",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fon-backup-shutdown-database-method.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"on-backup-shutdown-database-method",title:"On Backup Shutdown database method",slug:"/commands/on-backup-shutdown-database-method",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"Register data key",permalink:"/docs/fr/commands/register-data-key"},next:{title:"On Backup Startup database method",permalink:"/docs/fr/commands/on-backup-startup-database-method"}},i={},u=[];function l(e){const n={a:"a",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"$1 -> On Backup Shutdown database method"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Param\xe8tre"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"$1"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"0 = sauvegarde termin\xe9e normalement, autre valeur = erreur, interruption utilisateur ou code retourn\xe9 par Sur d\xe9marrage sauvegarde"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Cette commande n'est pas thread-safe, elle ne peut pas \xeatre utilis\xe9e dans du code pr\xe9emptif."})}),"\n",(0,s.jsx)(n.h4,{id:""}),"\n",(0,s.jsxs)(n.p,{children:["La ",(0,s.jsx)(n.strong,{children:"On Backup Shutdown database method"})," est appel\xe9e \xe0 chaque fois qu\u2019une sauvegarde de la base vient de se terminer. Les causes de l\u2019arr\xeat de la sauvegarde peuvent \xeatre la fin de la copie, l\u2019interruption par l\u2019utilisateur ou une erreur.",(0,s.jsx)(n.br,{}),"\nTous les environnements 4D sont concern\xe9s : 4D (tous modes), 4D Server ainsi que les applications 4D compil\xe9es et fusionn\xe9es avec 4D Volume Desktop."]}),"\n",(0,s.jsxs)(n.p,{children:["La ",(0,s.jsx)(n.strong,{children:"On Backup Shutdown database method"})," permet de v\xe9rifier que la sauvegarde s\u2019est correctement d\xe9roul\xe9e. Elle re\xe7oit dans le param\xe8tre ",(0,s.jsx)(n.em,{children:"$1"})," une valeur indiquant le statut de la sauvegarde \xe0 l\u2019issue de son ex\xe9cution :"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Si la sauvegarde s\u2019est termin\xe9e normalement, ",(0,s.jsx)(n.em,{children:"$1"})," vaut 0."]}),"\n",(0,s.jsxs)(n.li,{children:["Si la sauvegarde a \xe9t\xe9 interrompue \xe0 la suite d'une erreur ou par l'utilisateur, ",(0,s.jsx)(n.em,{children:"$1"})," est diff\xe9rent de 0.\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Si la sauvegarde a \xe9t\xe9 stopp\xe9e par la ",(0,s.jsx)(n.em,{children:"M\xe9thode base Sur d\xe9marrage sauvegarde"})," (",(0,s.jsx)(n.em,{children:"$0"})," # 0), ",(0,s.jsx)(n.em,{children:"$1"})," retourne le code effectivement retourn\xe9 dans le param\xe8tre ",(0,s.jsx)(n.em,{children:"$0"}),". Ce principe vous permet de mettre en place un syst\xe8me de gestion d\u2019erreurs personnalis\xe9."]}),"\n",(0,s.jsxs)(n.li,{children:["Si la sauvegarde a \xe9t\xe9 stopp\xe9e \xe0 la suite d'une erreur, le code de l'erreur est retourn\xe9 dans ",(0,s.jsx)(n.em,{children:"$1"}),".",(0,s.jsx)(n.br,{}),"\nDans tous les cas, vous pouvez obtenir des informations sur l'erreur \xe0 l\u2019aide de la commande ",(0,s.jsx)(n.a,{href:"/docs/fr/commands/backup-info",children:"BACKUP INFO"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"})," : Vous devez imp\xe9rativement d\xe9clarer le param\xe8tre ",(0,s.jsx)(n.em,{children:"$1"})," (entier long) dans la m\xe9thode base :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:"\xa0var $1 : Integer\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Il est important de noter qu'en cas d'erreur durant la sauvegarde (disque plein, support inaccessible...), les informations relatives \xe0 l'erreur sont uniquement affich\xe9es dans le moniteur de 4D Server ou dans le CSM, et report\xe9es dans le journal des sauvegardes. Aucune bo\xeete de dialogue d'alerte n'est affich\xe9e et la variable ",(0,s.jsx)(n.em,{children:"error"})," n'est pas modifi\xe9e. Si vous souhaitez pouvoir notifier l'administrateur qu'une erreur s'est produite, en particulier dans le contexte d'une application en mode client/serveur, il est n\xe9cessaire d'utiliser la ",(0,s.jsx)(n.strong,{children:"On Backup Shutdown database method"}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>o});var s=t(296540);const a={},r=s.createContext(a);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);