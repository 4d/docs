"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["17348"],{940585:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>l,toc:()=>o,default:()=>u,metadata:()=>t,assets:()=>a,contentTitle:()=>d});var t=JSON.parse('{"id":"Tags/tags","title":"Balises de transformation","description":"4D fournit un ensemble de balises de transformation qui vous permettent d\'ins\xe9rer des r\xe9f\xe9rences \xe0 des variables ou des expressions 4D, ou d\'effectuer diff\xe9rents types de traitement dans un texte source, appel\xe9 \\"template\\". Ces balises sont interpr\xe9t\xe9es lors de l\'ex\xe9cution du texte source et g\xe9n\xe8rent un texte de sortie.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20/Tags/tags.md","sourceDirName":"Tags","slug":"/Tags/tags","permalink":"/docs/fr/20/Tags/tags","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20Tags%2Ftags.md%20(20)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20","frontMatter":{"id":"tags","slug":"tags","title":"Balises de transformation"},"sidebar":"docs","previous":{"title":"Cr\xe9er et utiliser des macros","permalink":"/docs/fr/20/code-editor/creating-using-macros"},"next":{"title":"D\xe9bogage","permalink":"/docs/fr/20/Debugging/basics"}}'),i=s(785893),r=s(250065);let l={id:"tags",slug:"tags",title:"Balises de transformation"},d=void 0,a={},o=[{value:"Principes d&#39;utilisation des balises",id:"principes-dutilisation-des-balises",level:2},{value:"Parsing",id:"parsing",level:3},{value:"Traitement r\xe9cursif",id:"traitement-r\xe9cursif",level:3},{value:"Identifiants avec tokens",id:"identifiants-avec-tokens",level:3},{value:"Utilisation du &quot;.&quot; comme s\xe9parateur d\xe9cimal",id:"utilisation-du--comme-s\xe9parateur-d\xe9cimal",level:3},{value:"4DBASE",id:"4dbase",level:2},{value:"Syntax: <code>&lt;!--#4DBASE folderPath--&gt;</code>",id:"syntax---4dbase-folderpath--",level:4},{value:"4DCODE",id:"4dcode",level:2},{value:"Syntax: <code>&lt;!--#4DCODE codeLines--&gt;</code>",id:"syntax---4dcode-codelines--",level:4},{value:"4DEACH et 4DENDEACH",id:"4deach-et-4dendeach",level:2},{value:"Syntax: <code>&lt;!--#4DEACH variable in expression--&gt;</code> <code>&lt;!--#4DENDEACH--&gt;</code>",id:"syntax---4deach-variable-in-expression-----4dendeach--",level:4},{value:"<code>&lt;!--#4DEACH item in collection--&gt;</code>",id:"--4deach-item-in-collection--",level:3},{value:"Exemple avec une collection de valeurs scalaires",id:"exemple-avec-une-collection-de-valeurs-scalaires",level:4},{value:"Exemple avec une collection d&#39;objets",id:"exemple-avec-une-collection-dobjets",level:4},{value:"<code>&lt;!--#4DEACH entity in entitySelection--&gt;</code>",id:"--4deach-entity-in-entityselection--",level:3},{value:"Exemple avec un tableau html",id:"exemple-avec-un-tableau-html",level:4},{value:"Exemple avec des <code>BALISES 4D PROCESS</code>",id:"exemple-avec-des-balises-4d-process",level:4},{value:"<code>&lt;!--#4DEACH property in object--&gt;</code>",id:"--4deach-property-in-object--",level:3},{value:"Exemple avec les propri\xe9t\xe9s d&#39;un objet",id:"exemple-avec-les-propri\xe9t\xe9s-dun-objet",level:4},{value:"4DEVAL",id:"4deval",level:2},{value:"Syntax: <code>&lt;!--#4DEVAL expression--&gt;</code>",id:"syntax---4deval-expression--",level:4},{value:"Syntaxe alternative : <code>$4DEVAL(expression)</code>",id:"syntaxe-alternative--4devalexpression",level:4},{value:"4DHTML",id:"4dhtml",level:2},{value:"Syntax: <code>&lt;!--#4DHTML expression--&gt;</code>",id:"syntax---4dhtml-expression--",level:4},{value:"Alternative syntax: <code>$4DHTML(expression)</code>",id:"alternative-syntax-4dhtmlexpression",level:4},{value:"4DIF, 4DELSE, 4DELSEIF et 4DENDIF",id:"4dif-4delse-4delseif-et-4dendif",level:2},{value:"Syntaxe : <code>&lt;!--#4DIF</code> <code>expression--&gt;</code> {<code>&lt;!--#4DELSEIF expression2--&gt;...&lt;!--#4DELSEIF expressionN--&gt;</code>} {<code>&lt;!--#4DELSE--&gt;</code>} <code>&lt;!--#4DENDIF--&gt;</code>",id:"syntaxe----4dif-expression-----4delseif-expression2----4delseif-expressionn-----4delse-----4dendif--",level:4},{value:"4DINCLUDE",id:"4dinclude",level:2},{value:"Syntax: <code>&lt;!--#4DINCLUDE path--&gt;</code>",id:"syntax---4dinclude-path--",level:4},{value:"4DLOOP et 4DENDLOOP",id:"4dloop-et-4dendloop",level:2},{value:"Syntax: <code>&lt;!--#4DLOOP condition--&gt;</code> <code>&lt;!--#4DENDLOOP--&gt;</code>",id:"syntax---4dloop-condition-----4dendloop--",level:4},{value:"<code>&lt;!--#4DLOOP [table]--&gt;</code>",id:"--4dloop-table--",level:3},{value:"<code>&lt;!--#4DLOOP array--&gt;</code>",id:"--4dloop-array--",level:3},{value:"<code>&lt;!--#4DLOOP method--&gt;</code>",id:"--4dloop-method--",level:3},{value:"<code>&lt;!--#4DLOOP expression--&gt;</code>",id:"--4dloop-expression--",level:3},{value:"<code>&lt;!--#4DLOOP pointerArray--&gt;</code>",id:"--4dloop-pointerarray--",level:3},{value:"4DSCRIPT/",id:"4dscript",level:2},{value:"Syntax: <code>&lt;!--#4DSCRIPT/MethodName/MyParam--&gt;</code>",id:"syntax---4dscriptmethodnamemyparam--",level:4},{value:"4DTEXT",id:"4dtext",level:2},{value:"Syntax: <code>&lt;!--#4DTEXT expression--&gt;</code>",id:"syntax---4dtext-expression--",level:4},{value:"Syntaxe alternative : <code>4DTEXT(expression)</code>",id:"syntaxe-alternative--4dtextexpression",level:4},{value:"Syntaxe alternative pour 4DTEXT, 4DHTML, 4DEVAL",id:"syntaxe-alternative-pour-4dtext-4dhtml-4deval",level:2},{value:"4dtag (expression)",id:"4dtag-expression",level:4},{value:"<code>&lt;!--#4dtag expression--&gt;</code>",id:"--4dtag-expression--",level:4}];function c(e){let n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"4D fournit un ensemble de balises de transformation qui vous permettent d'ins\xe9rer des r\xe9f\xe9rences \xe0 des variables ou des expressions 4D, ou d'effectuer diff\xe9rents types de traitement dans un texte source, appel\xe9 \"template\". Ces balises sont interpr\xe9t\xe9es lors de l'ex\xe9cution du texte source et g\xe9n\xe8rent un texte de sortie."}),"\n",(0,i.jsxs)(n.p,{children:["Ce principe est notamment utilis\xe9 par le serveur Web 4D pour cr\xe9er ",(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/templates",children:"des pages de template Web"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Ces balises sont g\xe9n\xe9ralement ins\xe9r\xe9es sous forme de commentaires de type HTML (",(0,i.jsx)(n.code,{children:"\x3c!--#Tag Contents--\x3e"}),") mais ",(0,i.jsx)(n.a,{href:"#alternative-syntax-for-4dtext-4dhtml-4deval",children:"une syntaxe alternative conforme \xe0 la norme xml"})," est disponible pour certaines d'entre elles."]}),"\n",(0,i.jsx)(n.p,{children:"Il est possible de combiner plusieurs types de balises. Par exemple, la structure HTML suivante est tout \xe0 fait envisageable :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"<HTML>\n<BODY>\n\x3c!--#4DSCRIPT/PRE_PROCESS--\x3e   (Method call)\n\x3c!--#4DIF (myvar=1)--\x3e   (If condition)\n   \x3c!--#4DINCLUDE banner1.html--\x3e   (Subpage insertion)\n\x3c!--#4DENDIF--\x3e   (End if)\n\x3c!--#4DIF (mtvar=2)--\x3e\n   \x3c!--#4DINCLUDE banner2.html--\x3e\n\x3c!--#4DENDIF--\x3e\n\n\x3c!--#4DLOOP [TABLE]--\x3e   (Loop on the current selection)\n\x3c!--#4DIF ([TABLE]ValNum>10)--\x3e   (If [TABLE]ValNum>10)\n   \x3c!--#4DINCLUDE subpage.html--\x3e   (Subpage insertion)\n\x3c!--#4DELSE--\x3e   (Else)\n   <B>Value: \x3c!--#4DTEXT [TABLE]ValNum--\x3e</B><br/>   (Field display)\n\x3c!--#4DENDIF--\x3e\n\x3c!--#4DENDLOOP--\x3e   ](End for)\n</BODY>\n</HTML>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"principes-dutilisation-des-balises",children:"Principes d'utilisation des balises"}),"\n",(0,i.jsx)(n.h3,{id:"parsing",children:"Parsing"}),"\n",(0,i.jsxs)(n.p,{children:["L'analyse ou le parsing du contenu d'une source de ",(0,i.jsx)(n.em,{children:"template"})," peut \xeatre effectu\xe9 dans deux contextes :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["En utilisant la commande ",(0,i.jsx)(n.code,{children:"PROCESS 4D TAGS"})," ; cette commande accepte un ",(0,i.jsx)(n.em,{children:"template"}),"en entr\xe9e, ainsi que des param\xe8tres optionnels et retourne un texte r\xe9sultant du traitement."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["En utilisant le serveur HTTP int\xe9gr\xe9 de 4D : ",(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/templates",children:"pages de templates"})," envoy\xe9es au moyen des commandes ",(0,i.jsx)(n.code,{children:"WEB SEND FILE"})," (.htm, .html, .shtm, .shtml), ",(0,i.jsx)(n.code,{children:"WEB SEND BLOB"})," (text/html type BLOB), ",(0,i.jsx)(n.code,{children:"WEB SEND TEXT"}),' , ou appel\xe9es au moyen d\'une URL. Dans ce dernier cas, \xe0 des fins d\'optimisation, les pages suffix\xe9es par ".htm" et ".html" ne sont PAS pars\xe9es. Pour analyser les pages HTML dans ce cas, vous devez ajouter le suffixe ".shtm" ou ".shtml" (par exemple, ',(0,i.jsx)(n.a,{href:"http://www.server.com/dir/page.shtm",children:"http://www.server.com/dir/page.shtm)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"traitement-r\xe9cursif",children:"Traitement r\xe9cursif"}),"\n",(0,i.jsx)(n.p,{children:"Les balises 4D sont interpr\xe9t\xe9es de mani\xe8re r\xe9cursive : 4D tente toujours de r\xe9interpr\xe9ter le r\xe9sultat d'une transformation et, si une nouvelle transformation a eu lieu, une interpr\xe9tation suppl\xe9mentaire est effectu\xe9e, et ainsi de suite jusqu'\xe0 ce que le produit obtenu ne n\xe9cessite plus aucune transformation. Par exemple, \xe9tant donn\xe9 l'\xe9nonc\xe9 suivant :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DHTML [Mail]Letter_type--\x3e\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Si le champ de texte ",(0,i.jsx)(n.code,{children:"[Mail]Letter_type"})," contient lui-m\xeame une balise, telle que ",(0,i.jsx)(n.code,{children:"\x3c!--#4DSCRIPT/m_Gender--\x3e"}),", cette balise sera \xe9valu\xe9e r\xe9cursivement apr\xe8s l'interpr\xe9tation de la balise 4DHTML."]}),"\n",(0,i.jsxs)(n.p,{children:["Ce principe puissant r\xe9pond \xe0 la plupart des besoins li\xe9s \xe0 la transformation des textes. Notez toutefois que, dans certains cas, cela peut \xe9galement permettre l'insertion d'un code malveillant dans le contexte web, ",(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/templates#prevention-of-malicious-code-insertion",children:"ce qui peut \xeatre \xe9vit\xe9"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"identifiants-avec-tokens",children:"Identifiants avec tokens"}),"\n",(0,i.jsxs)(n.p,{children:["Pour garantir l'\xe9valuation correcte des expressions trait\xe9es via les balises, quel que soit le langage ou la version de 4D, il est recommand\xe9 d'utiliser la syntaxe tokenis\xe9e pour les \xe9l\xe9ments dont le nom peut varier selon les versions (commandes, tables, champs, constantes). Par exemple, pour ins\xe9rer la commande ",(0,i.jsx)(n.code,{children:"Current time"}),", entrez ",(0,i.jsx)(n.code,{children:"Current time:C178"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"utilisation-du--comme-s\xe9parateur-d\xe9cimal",children:'Utilisation du "." comme s\xe9parateur d\xe9cimal'}),"\n",(0,i.jsxs)(n.p,{children:["4D utilise toujours le caract\xe8re point (.) comme s\xe9parateur d\xe9cimal lorsqu'il \xe9value une expression num\xe9rique \xe0 l'aide d'une balise ",(0,i.jsx)(n.code,{children:"4DTEXT"}),", ",(0,i.jsx)(n.code,{children:"4DHTML"}),", et ",(0,i.jsx)(n.code,{children:"4DEVAL"}),". Les param\xe8tres r\xe9gionaux sont ignor\xe9s. Cette fonctionnalit\xe9 facilite la maintenance du code et la compatibilit\xe9 entre les langues et les versions de 4D."]}),"\n",(0,i.jsx)(n.h2,{id:"4dbase",children:"4DBASE"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4dbase-folderpath--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DBASE folderPath--\x3e"})]}),"\n",(0,i.jsxs)(n.p,{children:["La balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DBASE --\x3e"})," d\xe9signe le r\xe9pertoire de travail \xe0 utiliser par la balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE--\x3e"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Lorsqu'elle est appel\xe9e dans une page Web, la balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DBASE --\x3e"})," modifie tous les appels ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE--\x3e"})," ult\xe9rieurs sur cette page, jusqu'au prochain ",(0,i.jsx)(n.code,{children:", if any. If the <code>\x3c!--#4DBASE --\x3e"})," folder is modified from within an included file, it retrieves its original value from the parent file."]}),"\n",(0,i.jsxs)(n.p,{children:["Le param\xe8tre ",(0,i.jsx)(n.em,{children:"folderPath"})," doit contenir un nom de chemin relatif \xe0 la page actuelle et il doit se terminer par une barre oblique (",(0,i.jsx)(n.code,{children:"/"}),"). Le dossier d\xe9sign\xe9 doit \xeatre situ\xe9 \xe0 l'int\xe9rieur du dossier Web."]}),"\n",(0,i.jsx)(n.p,{children:'Passez le mot-cl\xe9 "WEBFOLDER" pour r\xe9tablir le chemin par d\xe9faut (relatif \xe0 la page).'}),"\n",(0,i.jsx)(n.p,{children:"Le code suivant, qui doit sp\xe9cifier un chemin relatif pour chaque appel :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DINCLUDE subpage.html--\x3e\n\x3c!--#4DINCLUDE folder/subpage1.html--\x3e\n\x3c!--#4DINCLUDE folder/subpage2.html--\x3e\n\x3c!--#4DINCLUDE folder/subpage3.html--\x3e\n\x3c!--#4DINCLUDE ../folder/subpage.html--\x3e\n"})}),"\n",(0,i.jsx)(n.p,{children:"...\xe9quivaut \xe0 :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DINCLUDE subpage.html--\x3e\n\x3c!--#4DBASE folder/--\x3e\n\x3c!--#4DINCLUDE subpage1.html--\x3e\n\x3c!--#4DINCLUDE subpage2.html--\x3e\n\x3c!--#4DINCLUDE subpage3.html--\x3e\n\x3c!--#4DBASE ../folder/--\x3e\n\x3c!--#4DINCLUDE subpage.html--\x3e\n\x3c!--#4DBASE WEBFOLDER--\x3e\n"})}),"\n",(0,i.jsx)(n.p,{children:"Par exemple, pour d\xe9finir un r\xe9pertoire pour la page d'accueil :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"/* Index.html */\n\x3c!--#4DIF LangFR=True--\x3e\n    \x3c!--#4DBASE FR/--\x3e\n\x3c!--#4DELSE--\x3e\n    \x3c!--#4DBASE US/--\x3e\n\x3c!--#4DENDIF--\x3e\n\x3c!--#4DINCLUDE head.html--\x3e\n\x3c!--#4DINCLUDE body.html--\x3e\n\x3c!--#4DINCLUDE footer.html--\x3e\n"})}),"\n",(0,i.jsxs)(n.p,{children:['Dans le fichier "head.html", le dossier courant est modifi\xe9 par ',(0,i.jsx)(n.code,{children:"\x3c!--#4DBASE --\x3e"}),', sans que cela ne change sa valeur dans "Index.html" :']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"/* Head.htm */\n/* the working directory here is relative to the included file (FR/ or US/) */\n\x3c!--#4DBASE Styles/--\x3e\n\x3c!--#4DINCLUDE main.css--\x3e\n\x3c!--#4DINCLUDE product.css--\x3e\n\x3c!--#4DBASE Scripts/--\x3e\n\x3c!--#4DINCLUDE main.js--\x3e\n\x3c!--#4DINCLUDE product.js--\x3e\n"})}),"\n",(0,i.jsx)(n.h2,{id:"4dcode",children:"4DCODE"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4dcode-codelines--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DCODE codeLines--\x3e"})]}),"\n",(0,i.jsxs)(n.p,{children:["La balise ",(0,i.jsx)(n.code,{children:"4DCODE"})," permet d'ins\xe9rer un bloc de code 4D de plusieurs lignes dans un template."]}),"\n",(0,i.jsxs)(n.p,{children:["Lorsqu'une s\xe9quence ",(0,i.jsx)(n.code,{children:"\x3c!--#4DCODE"})," est d\xe9tect\xe9e et qu'elle est suivie d'un espace, d'un caract\xe8re CR ou LF, 4D interpr\xe8te toutes les lignes de code jusqu'\xe0 la s\xe9quence ",(0,i.jsx)(n.code,{children:"--\x3e"})," suivante. Le bloc de code lui-m\xeame peut contenir des retours chariot, des sauts de ligne ou les deux ; il sera interpr\xe9t\xe9 s\xe9quentiellement par 4D."]}),"\n",(0,i.jsx)(n.p,{children:"Par exemple, vous pouvez \xe9crire dans un template :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'\x3c!--#4DCODE\n//PARAMETERS initialization\nC_OBJECT:C1216($graphParameters)\nOB SET:C1220($graphParameters;"graphType";1)\n$graphType:=1\n//...your code here\nIf(OB Is defined:C1231($graphParameters;"graphType"))\n    $graphType:=OB GET:C1224($graphParameters;"graphType")\n    If($graphType=7)\n        $nbSeries:=1\n        If($nbValues>8)\n            DELETE FROM ARRAY:C228 ($yValuesArrPtr{1}->;9;100000)\n            $nbValues:=8\n        End if\n    End if\nEnd if\n--\x3e\n'})}),"\n",(0,i.jsx)(n.p,{children:"Voici les caract\xe9ristiques de la balise 4DCODE :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["La commande ",(0,i.jsx)(n.code,{children:"TRACE"})," est prise en charge et active le d\xe9bogueur 4D, vous permettant ainsi de d\xe9boguer le code de votre mod\xe8le."]}),"\n",(0,i.jsx)(n.li,{children:"Toute erreur affichera le dialogue d'erreur standard qui permet \xe0 l'utilisateur d'arr\xeater l'ex\xe9cution du code ou d'entrer en mode d\xe9bogage."}),"\n",(0,i.jsxs)(n.li,{children:["Le texte entre ",(0,i.jsx)(n.code,{children:"\x3c!--#4DCODE"})," et ",(0,i.jsx)(n.code,{children:"--\x3e"})," est divis\xe9 en lignes acceptant toute convention de fin de ligne (cr, lf ou crlf)."]}),"\n",(0,i.jsxs)(n.li,{children:["Le texte est tokenis\xe9 dans le contexte de la base de donn\xe9es qui a appel\xe9 ",(0,i.jsx)(n.code,{children:"PROCESS 4D TAGS"}),". Ceci est important pour la reconnaissance des m\xe9thodes de projet par exemple. La propri\xe9t\xe9 de la m\xe9thode ",(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/allowProject",children:"Available through tags et 4D URLs (4DACTION ...)"})," n'est pas prise en compte."]}),"\n",(0,i.jsx)(n.li,{children:"M\xeame si le texte utilise toujours l'anglais-US, il est recommand\xe9 d'utiliser la syntaxe token (:Cxxx) pour les noms de commandes et de constantes afin de se pr\xe9munir contre d'\xe9ventuels probl\xe8mes dus \xe0 des commandes ou des constantes renomm\xe9es d'une version de 4D \xe0 une autre."}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Le fait que les balises 4DCODE puissent appeler n'importe quelle commande du langage 4D ou m\xe9thode du projet pourrait \xeatre consid\xe9r\xe9 comme un probl\xe8me de s\xe9curit\xe9, en particulier lorsque la base de donn\xe9es est disponible via HTTP. Toutefois, \xe9tant donn\xe9 qu'elle ex\xe9cute du code c\xf4t\xe9 serveur appel\xe9 \xe0 partir de vos propres fichiers de mod\xe8le, la balise elle-m\xeame ne repr\xe9sente pas un probl\xe8me de s\xe9curit\xe9. Dans ce contexte, comme pour tout serveur Web, la s\xe9curit\xe9 est principalement g\xe9r\xe9e au niveau des acc\xe8s distants aux fichiers du serveur."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"4deach-et-4dendeach",children:"4DEACH et 4DENDEACH"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4deach-variable-in-expression-----4dendeach--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH variable in expression--\x3e"})," ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDEACH--\x3e"})]}),"\n",(0,i.jsxs)(n.p,{children:["Le commentaire ",(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH--\x3e"})," permet d'it\xe9rer un \xe9l\xe9ment sp\xe9cifi\xe9 sur toutes les valeurs de l'",(0,i.jsx)(n.em,{children:"expression"}),". L'\xe9l\xe9ment est d\xe9fini comme une ",(0,i.jsx)(n.em,{children:"variable"})," dont le type d\xe9pend du type d'",(0,i.jsx)(n.em,{children:"expression"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Le commentaire ",(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH--\x3e"})," peut it\xe9rer sur trois types d'expression :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#--4deach-item-in-collection--",children:"collections"})," : boucle \xe0 travers chaque \xe9l\xe9ment de la collection,"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#--4deach-entity-in-entityselection--",children:"entity selections"})," : boucle \xe0 travers chaque entity,"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#--4deach-property-in-object--",children:"objets"})," : boucle \xe0 travers chaque propri\xe9t\xe9 d'objet."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Le nombre d'it\xe9rations est \xe9valu\xe9 au d\xe9marrage et ne changera pas pendant le traitement. L'ajout ou la suppression d'\xe9l\xe9ments pendant la boucle est donc d\xe9conseill\xe9 car il pourra en r\xe9sulter une redondance ou un manque d'it\xe9rations."}),"\n",(0,i.jsx)(n.h3,{id:"--4deach-item-in-collection--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH item in collection--\x3e"})}),"\n",(0,i.jsxs)(n.p,{children:["Cette syntaxe permet d'effectuer une it\xe9ration sur chaque ",(0,i.jsx)(n.em,{children:"\xe9l\xe9ment"})," de la ",(0,i.jsx)(n.em,{children:"collection"}),". La portion de code situ\xe9e entre ",(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH --\x3e"})," et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDEACH--\x3e"})," est r\xe9p\xe9t\xe9e pour chaque \xe9l\xe9ment de la collection."]}),"\n",(0,i.jsx)(n.p,{children:"Le param\xe8tre de l'\xe9l\xe9ment est une variable du m\xeame type que les \xe9l\xe9ments de la collection."}),"\n",(0,i.jsxs)(n.p,{children:["La collection ne doit contenir que des ",(0,i.jsx)(n.strong,{children:"\xe9l\xe9ments de m\xeame type"}),", sinon une erreur est retourn\xe9e d\xe8s que la variable de l'\xe9l\xe9ment se voit attribuer le premier type de valeur non concordant."]}),"\n",(0,i.jsx)(n.p,{children:"Le nombre de boucles est bas\xe9 sur le nombre d'\xe9l\xe9ments de la collection. \xc0 chaque it\xe9ration, la variable de l'\xe9l\xe9ment correspond automatiquement \xe0 l'\xe9l\xe9ment correspondant de la collection. Vous devez tenir compte des points suivants :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Si la variable ",(0,i.jsx)(n.em,{children:"item"})," est de type objet ou collection (c'est-\xe0-dire si ",(0,i.jsx)(n.em,{children:"'expression"})," est une collection d'objets ou de collections), la modification de cette variable modifiera automatiquement l'\xe9l\xe9ment correspondant de la collection (car les objets et les collections partagent les m\xeames r\xe9f\xe9rences). Si la variable est de type scalaire, seule la variable sera modifi\xe9e."]}),"\n",(0,i.jsxs)(n.li,{children:["La variable ",(0,i.jsx)(n.em,{children:"item"})," prend le m\xeame type que le premier \xe9l\xe9ment de la collection. Si un seul \xe9l\xe9ment de la collection n'est pas du m\xeame type que la variable, une erreur est g\xe9n\xe9r\xe9e et la boucle s'arr\xeate."]}),"\n",(0,i.jsxs)(n.li,{children:["Si la collection contient des \xe9l\xe9ments de valeur Null, une erreur sera g\xe9n\xe9r\xe9e si le type de la variable ne prend pas en charge la valeur ",(0,i.jsx)(n.em,{children:"Null"})," (comme par exemple les variables entier long)."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"exemple-avec-une-collection-de-valeurs-scalaires",children:"Exemple avec une collection de valeurs scalaires"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"getNames"}),' retourne une collection de cha\xeenes de caract\xe8res. La m\xe9thode a \xe9t\xe9 d\xe9clar\xe9e comme "',(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/allowProject",children:"disponible via les balises 4D et les URL"}),'".']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:' <table class="table">    \n\n        <tr><th>Name</th></tr>\n\n          \x3c!--#4DEACH $name in getNames--\x3e\n        <tr>\n            <td>\x3c!--#4DTEXT $name--\x3e</td>\n        </tr>\n          \x3c!--#4DENDEACH--\x3e\n    </table>\n'})}),"\n",(0,i.jsx)(n.h4,{id:"exemple-avec-une-collection-dobjets",children:"Exemple avec une collection d'objets"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"getSalesPersons"})," retourne une collection d'objets."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'    <table class="table">    \n         \x3c!--#4DCODE\n            $salePersons:=getSalesPersons\n          --\x3e          \n       <tr><th>ID</th><th>Firstname</th><th>Lastname</th></tr>\n\n          \x3c!--#4DEACH $salesPerson in $salePersons--\x3e\n        <tr>\n            <td>\x3c!--#4DTEXT $salesPerson.ID--\x3e</td>\n            <td>\x3c!--#4DTEXT $salesPerson.firstname--\x3e</td>\n            <td>\x3c!--#4DTEXT $salesPerson.lastname--\x3e</td>\n        </tr>\n          \x3c!--#4DENDEACH--\x3e\n    </table>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"--4deach-entity-in-entityselection--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH entity in entitySelection--\x3e"})}),"\n",(0,i.jsxs)(n.p,{children:["Cette syntaxe permet d'effectuer une it\xe9ration sur chaque ",(0,i.jsx)(n.em,{children:"entity"})," de l'",(0,i.jsx)(n.em,{children:"entitySelection"}),". La portion de code situ\xe9e entre ",(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH --\x3e"})," et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDEACH--\x3e"})," est r\xe9p\xe9t\xe9e pour chaque entity de l'entity selection."]}),"\n",(0,i.jsxs)(n.p,{children:["Le param\xe8tre ",(0,i.jsx)(n.em,{children:"entity"})," est une variable objet de la classe entity selection."]}),"\n",(0,i.jsxs)(n.p,{children:["Le nombre de boucles est bas\xe9 sur le nombre d'entities pr\xe9sentes dans l'entity selection. \xc0 chaque it\xe9ration, la variable de l'objet ",(0,i.jsx)(n.em,{children:"entity"})," correspond automatiquement \xe0 l'entity de l'entity selection."]}),"\n",(0,i.jsx)(n.h4,{id:"exemple-avec-un-tableau-html",children:"Exemple avec un tableau html"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'    <table class="table">     \n\n        <tr><th>ID</th><th>Name</th><th>Total purchase</th></tr>\n\n          \x3c!--#4DEACH $customer in ds.Customers.all()--\x3e\n        <tr>\n            <td>\x3c!--#4DTEXT $customer.ID--\x3e</td>\n            <td>\x3c!--#4DTEXT $customer.name--\x3e</td>\n            <td><center>\x3c!--#4DTEXT String($customer.totalPurchase;"$###,##0")--\x3e</center></td>\n        </tr>\n          \x3c!--#4DENDEACH--\x3e\n    </table>\n'})}),"\n",(0,i.jsxs)(n.h4,{id:"exemple-avec-des-balises-4d-process",children:["Exemple avec des ",(0,i.jsx)(n.code,{children:"BALISES 4D PROCESS"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'var customers : cs.CustomersSelection\nvar $input; $output : Text\n\ncustomers:=ds.Customers.all()\n$input:="\x3c!--#4DEACH $cust in customers--\x3e"\n$input:=$input+"\x3c!--#4DTEXT $cust.name --\x3e"+Char(Carriage return)\n$input:=$input+"\x3c!--#4DENDEACH--\x3e"\nPROCESS 4D TAGS($input; $output)\nTEXT TO DOCUMENT("customers.txt"; $output)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"--4deach-property-in-object--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH property in object--\x3e"})}),"\n",(0,i.jsxs)(n.p,{children:["Cette syntaxe permet d'effectuer une it\xe9ration sur chaque ",(0,i.jsx)(n.em,{children:"propri\xe9t\xe9"})," de l'",(0,i.jsx)(n.em,{children:"objet"}),". La portion de code situ\xe9e entre ",(0,i.jsx)(n.code,{children:"\x3c!--#4DEACH --\x3e"})," et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDEACH--\x3e"})," est r\xe9p\xe9t\xe9e pour chaque propri\xe9t\xe9 de l'objet."]}),"\n",(0,i.jsxs)(n.p,{children:['Le param\xe8tre " ',(0,i.jsx)(n.em,{children:'property"'})," est une variable texte automatiquement remplie avec le nom de la propri\xe9t\xe9 en cours de traitement."]}),"\n",(0,i.jsx)(n.p,{children:"Les propri\xe9t\xe9s de l'objet sont it\xe9r\xe9es en fonction de leur ordre de cr\xe9ation. Pendant la boucle, il est possible d'ajouter ou de supprimer des propri\xe9t\xe9s dans l'objet, sans pour autant modifier le nombre de boucles qui reste bas\xe9 sur le nombre de propri\xe9t\xe9s initial de l'objet."}),"\n",(0,i.jsx)(n.h4,{id:"exemple-avec-les-propri\xe9t\xe9s-dun-objet",children:"Exemple avec les propri\xe9t\xe9s d'un objet"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"getGamers"}),' est une m\xe9thode projet qui renvoie un objet tel que ("Mary" ; 10 ; "Ann" ; 20 ; "John" ; 40) pour calculer les scores des joueurs.']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'    <table class="table">    \n          \x3c!--#4DCODE\n           $gamers:=getGamers\n          --\x3e          \n\n        <tr><th>Gamers</th><th>Scores</th></tr>\n\n          \x3c!--#4DEACH $key in $gamers--\x3e\n        <tr>\n            <td >\x3c!--#4DTEXT $key--\x3e</td>\n            <td >\x3c!--#4DTEXT $gamers[$key]--\x3e</td>\n        </tr>\n          \x3c!--#4DENDEACH--\x3e\n    </table>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"4deval",children:"4DEVAL"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4deval-expression--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DEVAL expression--\x3e"})]}),"\n",(0,i.jsxs)(n.h4,{id:"syntaxe-alternative--4devalexpression",children:["Syntaxe alternative : ",(0,i.jsx)(n.code,{children:"$4DEVAL(expression)"})]}),"\n",(0,i.jsxs)(n.p,{children:["La balise ",(0,i.jsx)(n.code,{children:"4DEVAL"})," permet d'\xe9valuer une variable ou une expression 4D. Comme la balise ",(0,i.jsx)(n.a,{href:"#4dhtml",children:(0,i.jsx)(n.code,{children:"4DHTML"})}),", ",(0,i.jsx)(n.code,{children:"4DEVAL"})," n'\xe9chappe pas les caract\xe8res HTML lorsqu'elle renvoie du texte. Toutefois, contrairement \xe0 ",(0,i.jsx)(n.code,{children:"4DHTML"})," ou ",(0,i.jsx)(n.a,{href:"#4dtext",children:(0,i.jsx)(n.code,{children:"4DTEXT"})}),", ",(0,i.jsx)(n.code,{children:"4DEVAL"})," vous permet d'ex\xe9cuter n'importe quelle instruction 4D valide, y compris les affectations et les expressions qui ne renvoient aucune valeur."]}),"\n",(0,i.jsx)(n.p,{children:"Par exemple, vous pouvez ex\xe9cuter :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:' $input:="\x3c!--#4DEVAL a:=42--\x3e" //assignment\n $input:=$input+"\x3c!--#4DEVAL a+1--\x3e" //calculation\n PROCESS 4D TAGS($input;$output)\n  //$output = "43"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["En cas d'erreur lors de l'interpr\xe9tation, le texte ins\xe9r\xe9 sera de la forme : ",(0,i.jsx)(n.code,{children:"\x3c!--#4DEVAL expr--\x3e: ## error # code d'erreur"}),"."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Pour des raisons de s\xe9curit\xe9, il est recommand\xe9 d'utiliser la balise ",(0,i.jsx)(n.a,{href:"#4dtext",children:(0,i.jsx)(n.code,{children:"4DTEXT"})})," lors du traitement de donn\xe9es introduites depuis l'ext\xe9rieur de l'application, afin d'\xe9viter l'",(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/templates#prevention-of-malicious-code-insertion",children:"insertion de code malveillant"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"4dhtml",children:"4DHTML"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4dhtml-expression--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DHTML expression--\x3e"})]}),"\n",(0,i.jsxs)(n.h4,{id:"alternative-syntax-4dhtmlexpression",children:["Alternative syntax: ",(0,i.jsx)(n.code,{children:"$4DHTML(expression)"})]}),"\n",(0,i.jsxs)(n.p,{children:["Tout comme la balise ",(0,i.jsx)(n.code,{children:"4DTEXT"}),", cette balise vous permet d'\xe9valuer une variable ou une expression 4D qui renvoie une valeur, et de l'ins\xe9rer en tant qu'expression HTML. Contrairement \xe0 la balise ",(0,i.jsx)(n.code,{children:"4DTEXT"}),', cette balise n\'\xe9chappe pas les caract\xe8res sp\xe9ciaux HTML (par exemple, ">").']}),"\n",(0,i.jsx)(n.p,{children:"Par exemple, voici les r\xe9sultats du traitement de la variable texte 4D myvar avec les balises disponibles :"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"valeur de myvar"}),(0,i.jsx)(n.th,{children:"Balises"}),(0,i.jsx)(n.th,{children:"R\xe9sultat"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'myvar:="<B>"'})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"\x3c!--#4DTEXT myvar--\x3e"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"&lt;B&gt;"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'myvar:="<B>"'})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"\x3c!--#4DHTML myvar--\x3e"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<B>"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["En cas d'erreur d'interpr\xe9tation, le texte ins\xe9r\xe9 sera ",(0,i.jsx)(n.code,{children:"\x3c!--#4DHTML myvar--\x3e : ## error # error code"}),"."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Pour des raisons de s\xe9curit\xe9, il est recommand\xe9 d'utiliser la balise ",(0,i.jsx)(n.a,{href:"#4dtext",children:(0,i.jsx)(n.code,{children:"4DTEXT"})})," lors du traitement de donn\xe9es introduites depuis l'ext\xe9rieur de l'application, afin d'\xe9viter l'",(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/templates#prevention-of-malicious-code-insertion",children:"insertion de code malveillant"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"4dif-4delse-4delseif-et-4dendif",children:"4DIF, 4DELSE, 4DELSEIF et 4DENDIF"}),"\n",(0,i.jsxs)(n.h4,{id:"syntaxe----4dif-expression-----4delseif-expression2----4delseif-expressionn-----4delse-----4dendif--",children:["Syntaxe : ",(0,i.jsx)(n.code,{children:"\x3c!--#4DIF"})," ",(0,i.jsx)(n.code,{children:"expression--\x3e"})," {",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSEIF expression2--\x3e...\x3c!--#4DELSEIF expressionN--\x3e"}),"} {",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSE--\x3e"}),"} ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"})]}),"\n",(0,i.jsxs)(n.p,{children:["Utilis\xe9 avec les commentaires ",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSEIF--\x3e"})," (optionnel), ",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSE--\x3e"})," (optionnel) et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"}),", le commentaire ",(0,i.jsx)(n.code,{children:"\x3c!--#4DIF expression--\x3e"})," offre la possibilit\xe9 d'ex\xe9cuter des portions de code de mani\xe8re conditionnelle."]}),"\n",(0,i.jsxs)(n.p,{children:["Le param\xe8tre ",(0,i.jsx)(n.em,{children:"expression"})," peut contenir n'importe quelle expression 4D valide renvoyant une valeur bool\xe9enne. Il doit \xeatre indiqu\xe9 entre parenth\xe8ses et respecter les r\xe8gles syntaxiques de 4D."]}),"\n",(0,i.jsxs)(n.p,{children:["En cas d'erreur d'interpr\xe9tation, le texte \"",(0,i.jsx)(n.code,{children:"\x3c!--#4DIF expression--\x3e"}),': Une expression bool\xe9enne \xe9tait attendue" est ins\xe9r\xe9 \xe0 la place du contenu situ\xe9 entre ',(0,i.jsx)(n.code,{children:"\x3c!--#4DIF --\x3e"})," et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"}),". De m\xeame, s'il n'y a pas autant de ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"})," que de ",(0,i.jsx)(n.code,{children:"\x3c!--#4DIF --\x3e"}),', le texte "',(0,i.jsx)(n.code,{children:"\x3c!--#4DIF expression--\x3e"}),': 4DENDIF expected" est ins\xe9r\xe9 \xe0 la place du contenu situ\xe9 entre ',(0,i.jsx)(n.code,{children:"\x3c!--#4DIF --\x3e"})," et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["En cas d'erreur d'interpr\xe9tation, le texte \"",(0,i.jsx)(n.code,{children:"\x3c!--#4DIF expression--\x3e"}),': Une expression bool\xe9enne \xe9tait attendue" est ins\xe9r\xe9 \xe0 la place du contenu situ\xe9 entre ',(0,i.jsx)(n.code,{children:"\x3c!--#4DIF --\x3e"})," et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"}),". ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"})," peuvent \xeatre imbriqu\xe9s \xe0 plusieurs niveaux. Comme dans 4D, chaque ",(0,i.jsx)(n.code,{children:"\x3c!--#4DIF expression--\x3e"})," doit correspondre \xe0 un ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["En utilisant la balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSEIF--\x3e"}),", vous pouvez tester un nombre illimit\xe9 de conditions. Seul le code qui suit la premi\xe8re condition \xe9valu\xe9e \xe0 ",(0,i.jsx)(n.code,{children:"True"})," est ex\xe9cut\xe9. Si aucune condition n'est vraie, aucune instruction n'est ex\xe9cut\xe9e (s'il n'y a pas de ",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSE--\x3e"})," final). Vous pouvez utiliser une balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSE--\x3e"})," apr\xe8s la derni\xe8re balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSEIF--\x3e"}),". Si toutes les conditions sont fausses, les instructions qui suivent ",(0,i.jsx)(n.code,{children:"\x3c!--#4DELSE--\x3e"})," sont ex\xe9cut\xe9es."]}),"\n",(0,i.jsx)(n.p,{children:"Les deux codes suivants sont \xe9quivalents."}),"\n",(0,i.jsxs)(n.p,{children:["Code utilisant seulement ",(0,i.jsx)(n.code,{children:"4DELSE"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DIF Condition1--\x3e\n  /* Condition1 is true*/\n\x3c!--#4DELSE--\x3e\n    \x3c!--#4DIF Condition2--\x3e\n        /* Condition2 is true*/\n    \x3c!--#4DELSE--\x3e\n        \x3c!--#4DIF Condition3--\x3e\n            /* Condition3 is true */\n        \x3c!--#4DELSE--\x3e\n            /*None of the conditions are true*/\n        \x3c!--#4DENDIF--\x3e\n    \x3c!--#4DENDIF--\x3e\n\x3c!--#4DENDIF--\x3e\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Code similaire utilisant la balise ",(0,i.jsx)(n.code,{children:"4DELSEIF"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\x3c!--#4DIF Condition1--\x3e\n     /* Condition1 is true*/\n\x3c!--#4DELSEIF Condition2--\x3e\n     /* Condition2 is true*/\n\x3c!--#4DELSEIF Condition3--\x3e\n    /* Condition3 is true */\n\x3c!--#4DELSE--\x3e\n    /* None of the conditions are true*/\n\x3c!--#4DENDIF--\x3e\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Cet exemple de code ins\xe9r\xe9 dans une page HTML statique affiche un libell\xe9 diff\xe9rent en fonction du r\xe9sultat de l'expression ",(0,i.jsx)(n.code,{children:'vname#""'}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<BODY>\n...\n\x3c!--#4DIF (vname#"")--\x3e\nNames starting with \x3c!--#4DTEXT vname--\x3e.\n\x3c!--#4DELSE--\x3e\nNo name has been found.\n\x3c!--#4DENDIF--\x3e\n...\n</BODY>\n'})}),"\n",(0,i.jsx)(n.p,{children:"Cet exemple ins\xe8re des pages diff\xe9rentes en fonction de l'utilisateur connect\xe9 :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'\x3c!--#4DIF LoggedIn=False--\x3e\n    \x3c!--#4DINCLUDE Login.htm --\x3e\n\x3c!--#4DELSEIF User="Admin" --\x3e\n    \x3c!--#4DINCLUDE AdminPanel.htm --\x3e\n\x3c!--#4DELSEIF User="Manager" --\x3e\n    \x3c!--#4DINCLUDE SalesDashboard.htm --\x3e\n\x3c!--#4DELSE--\x3e\n    \x3c!--#4DINCLUDE ItemList.htm --\x3e\n\x3c!--#4DENDIF--\x3e\n'})}),"\n",(0,i.jsx)(n.h2,{id:"4dinclude",children:"4DINCLUDE"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4dinclude-path--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE path--\x3e"})]}),"\n",(0,i.jsxs)(n.p,{children:["Cette balise est principalement con\xe7ue pour inclure une page HTML (d\xe9sign\xe9e par le param\xe8tre ",(0,i.jsx)(n.em,{children:"path"})," ) dans une autre page HTML. Par d\xe9faut, seul le body de la page HTML sp\xe9cifi\xe9e, c'est-\xe0-dire le contenu des balises ",(0,i.jsx)(n.code,{children:"<body>"})," et ",(0,i.jsx)(n.code,{children:"</body>"}),", est inclus (les balises elles-m\xeames ne sont pas incluses). Cela permet d'\xe9viter les conflits li\xe9s aux m\xe9tabalises pr\xe9sentes dans les en-t\xeates."]}),"\n",(0,i.jsxs)(n.p,{children:["Toutefois, si la page HTML sp\xe9cifi\xe9e ne contient pas de balises ",(0,i.jsx)(n.code,{children:"<body>"})," et ",(0,i.jsx)(n.code,{children:"</body>"}),", la page enti\xe8re est incluse. Il vous appartient de v\xe9rifier la coh\xe9rence des balises m\xe9ta."]}),"\n",(0,i.jsxs)(n.p,{children:["Le commentaire ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE --\x3e"})," est tr\xe8s utile pour les tests (",(0,i.jsx)(n.code,{children:"\x3c!--#4DIF--\x3e"}),") ou les boucles (",(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP--\x3e"}),"). Il est tr\xe8s pratique d'inclure des banni\xe8res en fonction d'un crit\xe8re ou de mani\xe8re al\xe9atoire. Lors de l'inclusion, quelle que soit l'extension du nom de fichier, 4D analyse la page appel\xe9e et ins\xe8re son contenu (modifi\xe9 ou non) dans la page \xe0 l'origine de l'appel ",(0,i.jsx)(n.code,{children:"4DINCLUDE"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Une page incluse avec le commentaire ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE --\x3e"})," est charg\xe9e dans le cache du serveur Web de la m\xeame mani\xe8re que les pages appel\xe9es via une URL ou envoy\xe9es avec la commande ",(0,i.jsx)(n.code,{children:"WEB SEND FILE"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Dans ",(0,i.jsx)(n.em,{children:"path"}),", indiquez le chemin menant au document \xe0 inclure. Attention : Dans le cas d'un appel \xe0 ",(0,i.jsx)(n.code,{children:"4DINCLUDE"}),", le chemin est relatif au document analys\xe9, c'est-\xe0-dire au document \"parent\". Utilisez la barre oblique (/) comme s\xe9parateur de dossier et les deux points (..) pour remonter d'un niveau (syntaxe HTML). Lorsque vous utilisez la balise ",(0,i.jsx)(n.code,{children:"4DINCLUDE"})," avec la commande ",(0,i.jsx)(n.code,{children:"PROCESS 4D TAGS"}),", le dossier par d\xe9faut est le dossier du projet."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Vous pouvez modifier le dossier par d\xe9faut utilis\xe9 par la balise ",(0,i.jsx)(n.code,{children:"4DINCLUDE"})," dans la page courante, en utilisant la balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DBASE --\x3e"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Le nombre de ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE path--\x3e"})," dans une page est illimit\xe9. Toutefois, les appels ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE path--\x3e"})," ne peuvent \xeatre effectu\xe9s qu'\xe0 un seul niveau. Cela signifie que, par exemple, vous ne pouvez pas ins\xe9rer ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE mydoc3.html--\x3e"})," dans le body de la page ",(0,i.jsx)(n.em,{children:"mydoc2.html"}),", qui est appel\xe9 par ",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE mydoc2--\x3e"})," ins\xe9r\xe9 dans ",(0,i.jsx)(n.em,{children:"mydoc1.html"}),". En outre, 4D v\xe9rifie que les inclusions ne sont pas r\xe9cursives."]}),"\n",(0,i.jsxs)(n.p,{children:["En cas d'erreur, le texte ins\xe9r\xe9 est \"",(0,i.jsx)(n.code,{children:"\x3c!--#4DINCLUDE path--\x3e"}),': Le document ne peut pas \xeatre ouvert".']}),"\n",(0,i.jsx)(n.p,{children:"Exemples :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DINCLUDE subpage.html--\x3e\n\x3c!--#4DINCLUDE folder/subpage.html--\x3e\n\x3c!--#4DINCLUDE ../folder/subpage.html--\x3e\n"})}),"\n",(0,i.jsx)(n.h2,{id:"4dloop-et-4dendloop",children:"4DLOOP et 4DENDLOOP"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4dloop-condition-----4dendloop--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP condition--\x3e"})," ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDLOOP--\x3e"})]}),"\n",(0,i.jsxs)(n.p,{children:["Ce commentaire permet de r\xe9p\xe9ter une partie du code tant que la condition est remplie. La partie de code est d\xe9limit\xe9e par ",(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP--\x3e"})," et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDLOOP--\x3e"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Les blocs ",(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP condition--\x3e"}),"... ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDLOOP--\x3e"})," peuvent \xeatre imbriqu\xe9s. Comme dans le langage 4D, chaque ",(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP condition--\x3e"})," doit correspondre \xe0 une ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDLOOP--\x3e"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Il existe cinq types de conditions :"}),"\n",(0,i.jsx)(n.h3,{id:"--4dloop-table--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP [table]--\x3e"})}),"\n",(0,i.jsx)(n.p,{children:"Cette syntaxe cr\xe9e une boucle pour chaque enregistrement de la s\xe9lection courante de la table dans le process courant. La partie du code situ\xe9e entre les deux commentaires est r\xe9p\xe9t\xe9e pour chaque enregistrement de la s\xe9lection courante."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Lorsque la balise ",(0,i.jsx)(n.code,{children:"4DLOOP"}),' est utilis\xe9e avec une table, les enregistrements sont charg\xe9s en mode "lecture seule".']}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Le code suivant :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DLOOP [People]--\x3e\n\x3c!--#4DTEXT [People]Name--\x3e \x3c!--#4DTEXT [People]Surname--\x3e<br/>\n\x3c!--#4DENDLOOP--\x3e\n"})}),"\n",(0,i.jsx)(n.p,{children:"... pourrait \xeatre exprim\xe9 en langage 4D de la mani\xe8re suivante :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:" NEXT RECORD([People])\n End while\n    FIRST RECORD([People])\n While(Not(End selection([People])))\n    ...\n    FIRST RECORD([People])\n While(Not(End selection([People])))\n    ...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"--4dloop-array--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP array--\x3e"})}),"\n",(0,i.jsx)(n.p,{children:"Cette syntaxe cr\xe9e une boucle pour chaque \xe9l\xe9ment du tableau. L'indice d'\xe9l\xe9ment courant du tableau est augment\xe9 lorsque chaque portion de code est r\xe9p\xe9t\xe9e."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Cette syntaxe ne peut pas \xeatre utilis\xe9e avec des tableaux \xe0 deux dimensions. Dans ce cas, il est pr\xe9f\xe9rable de combiner une m\xe9thode avec des boucles imbriqu\xe9es."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"L'exemple de code suivant :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DLOOP arr_names--\x3e\n\x3c!--#4DTEXT arr_names{arr_names}--\x3e<br/>\n\x3c!--#4DENDLOOP--\x3e\n"})}),"\n",(0,i.jsx)(n.p,{children:"... pourrait \xeatre exprim\xe9 en langage 4D de la mani\xe8re suivante :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:" For($Elem;1;Size of array(arr_names))\n    arr_names:=$Elem\n    ...\n End for\n"})}),"\n",(0,i.jsx)(n.h3,{id:"--4dloop-method--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP method--\x3e"})}),"\n",(0,i.jsxs)(n.p,{children:["Cette syntaxe cr\xe9e une boucle tant que la m\xe9thode renvoie ",(0,i.jsx)(n.code,{children:"True"}),". La m\xe9thode prend un param\xe8tre de type entier long. Elle est d'abord appel\xe9e avec la valeur 0 pour permettre une \xe9tape d'initialisation (si n\xe9cessaire) ; elle est ensuite appel\xe9e avec les valeurs 1, puis 2, puis 3 et ainsi de suite, tant qu'elle renvoie ",(0,i.jsx)(n.code,{children:"True"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Pour des raisons de s\xe9curit\xe9, dans un process Web, la m\xe9thode base ",(0,i.jsx)(n.code,{children:"On Web Authentication"})," peut \xeatre appel\xe9e une seule fois juste avant la phase d'initialisation (ex\xe9cution de la m\xe9thode avec 0 comme param\xe8tre). Si l'authentification est correcte, l'\xe9tape d'initialisation se poursuit."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"C_BOOLEAN($0)"})," et ",(0,i.jsx)(n.code,{children:"C_LONGINT($1)"})," DOIVENT \xeatre d\xe9clar\xe9s dans la m\xe9thode \xe0 des fins de compilation."]}),"\n",(0,i.jsx)(n.p,{children:"L'exemple de code suivant :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DLOOP my_method--\x3e\n\x3c!--#4DTEXT var--\x3e <br/>\n\x3c!--#4DENDLOOP--\x3e\n"})}),"\n",(0,i.jsx)(n.p,{children:"... pourrait \xeatre exprim\xe9 en langage 4D de la mani\xe8re suivante :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:" If(AuthenticationWebOK)\n    If(my_method(0))\n       $counter:=1\n       While(my_method($counter))\n          ...\n          $counter:=$counter+1\n       End while\n    End if\n End if\n"})}),"\n",(0,i.jsxs)(n.p,{children:["La m\xe9thode ",(0,i.jsx)(n.code,{children:"my_method"})," peut \xeatre la suivante :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:" C_LONGINT($1)\n C_BOOLEAN($0)\n If($1=0) `Initialisation\n    $0:=True\n Else\n    If($1<50)\n       ...\n       var:=...\n       $0:=True\n    Else\n       $0:=False `Stops the loop\n    End if\n End if\n"})}),"\n",(0,i.jsx)(n.h3,{id:"--4dloop-expression--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP expression--\x3e"})}),"\n",(0,i.jsxs)(n.p,{children:["Avec cette syntaxe, la balise ",(0,i.jsx)(n.code,{children:"4DLOOP"})," cr\xe9e une boucle tant que l'",(0,i.jsx)(n.em,{children:"expression"})," renvoie ",(0,i.jsx)(n.code,{children:"True"}),". L'expression peut \xeatre n'importe quelle expression bool\xe9enne valide et doit contenir une partie variable \xe0 \xe9valuer dans chaque boucle afin d'\xe9viter les boucles infinies."]}),"\n",(0,i.jsx)(n.p,{children:"Par exemple, le code suivant :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DEVAL $i:=0--\x3e\n\x3c!--#4DLOOP ($i<4)--\x3e\n\x3c!--#4DEVAL $i--\x3e\n\x3c!--#4DEVAL $i:=$i+1--\x3e\n\x3c!--#4DENDLOOP--\x3e\n"})}),"\n",(0,i.jsx)(n.p,{children:"...donne le r\xe9sultat suivant :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\n0\n1\n2\n3\n"})}),"\n",(0,i.jsx)(n.h3,{id:"--4dloop-pointerarray--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP pointerArray--\x3e"})}),"\n",(0,i.jsxs)(n.p,{children:["Dans ce cas, la balise ",(0,i.jsx)(n.code,{children:"4DLOOP"})," fonctionne comme pour un tableau : elle effectue une boucle pour chaque \xe9l\xe9ment du tableau r\xe9f\xe9renc\xe9 par le pointeur. L'indice de l'\xe9l\xe9ment courant du tableau est augment\xe9 \xe0 chaque fois que la portion de code est r\xe9p\xe9t\xe9e."]}),"\n",(0,i.jsxs)(n.p,{children:["Cette syntaxe est utile lorsque vous passez un pointeur de tableau en tant que param\xe8tre de la commande ",(0,i.jsx)(n.code,{children:"PROCESS 4D TAGS"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Voici un exemple :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:' ARRAY TEXT($array;2)\n $array{1}:="hello"\n $array{2}:="world"\n $input:="\x3c!--#4DEVAL $1--\x3e"\n $input:=$input+"\x3c!--#4DLOOP $2--\x3e"\n $input:=$input+"\x3c!--#4DEVAL $2->{$2->}--\x3e "\n $input:=$input+"\x3c!--#4DENDLOOP--\x3e"\n PROCESS 4D TAGS($input;$output;"elements = ";->$array)\n  // $output = "elements = hello world "\n'})}),"\n",(0,i.jsxs)(n.p,{children:["En cas d'erreur d'interpr\xe9tation, le texte \"",(0,i.jsx)(n.code,{children:"\x3c!--#4DIF expression--\x3e"}),': Une expression bool\xe9enne \xe9tait attendue" est ins\xe9r\xe9 \xe0 la place du contenu situ\xe9 entre ',(0,i.jsx)(n.code,{children:"\x3c!--#4DIF --\x3e"})," et ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDIF--\x3e"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Les messages suivants peuvent \xeatre affich\xe9s :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Type d'expression inattendu (erreur standard) ;"}),"\n",(0,i.jsx)(n.li,{children:"Nom de table incorrect (erreur sur le nom de la table) ;"}),"\n",(0,i.jsx)(n.li,{children:"Un tableau \xe9tait attendu (la variable n'est pas un tableau ou est un tableau \xe0 deux dimensions) ;"}),"\n",(0,i.jsx)(n.li,{children:"La m\xe9thode n'existe pas ;"}),"\n",(0,i.jsx)(n.li,{children:"Erreur de syntaxe (lors de l'ex\xe9cution de la m\xe9thode) ;"}),"\n",(0,i.jsx)(n.li,{children:"Erreur d'acc\xe8s (vous ne disposez pas des privil\xe8ges d'acc\xe8s appropri\xe9s pour acc\xe9der \xe0 la table ou \xe0 la m\xe9thode)."}),"\n",(0,i.jsxs)(n.li,{children:["4DENDLOOP attendu (le nombre de ",(0,i.jsx)(n.code,{children:"\x3c!--#4DENDLOOP--\x3e"})," ne correspond pas au nombre de ",(0,i.jsx)(n.code,{children:"\x3c!--#4DLOOP --\x3e"}),")."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"4dscript",children:"4DSCRIPT/"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4dscriptmethodnamemyparam--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DSCRIPT/MethodName/MyParam--\x3e"})]}),"\n",(0,i.jsxs)(n.p,{children:["La balise ",(0,i.jsx)(n.code,{children:"4DSCRIPT"})," permet d'ex\xe9cuter des m\xe9thodes 4D lors du traitement du mod\xe8le. La pr\xe9sence de la balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DSCRIPT/MyMethod/MyParam--\x3e"})," en tant que commentaire HTML lance l'ex\xe9cution de la m\xe9thode ",(0,i.jsx)(n.code,{children:"MyMethod"})," avec le param\xe8tre ",(0,i.jsx)(n.code,{children:"Param"})," sous forme de cha\xeene de caract\xe8res en ",(0,i.jsx)(n.code,{children:"$1"}),"."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Si la balise est appel\xe9e dans le contexte d'un process Web, lorsque la page est charg\xe9e, 4D appelle la m\xe9thode base ",(0,i.jsx)(n.code,{children:"On Web Authentication"})," (si elle existe). Si elle retourne True, 4D ex\xe9cute la m\xe9thode."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["La m\xe9thode doit renvoyer du texte dans ",(0,i.jsx)(n.code,{children:"$0"}),". Si la cha\xeene commence par le code de caract\xe8re 1, elle est consid\xe9r\xe9e comme du HTML (le m\xeame principe s'applique \xe0 la balise ",(0,i.jsx)(n.code,{children:"4DHTML"})," )."]}),"\n",(0,i.jsxs)(n.p,{children:["Par exemple, supposons que vous ins\xe9riez le commentaire suivant ",(0,i.jsx)(n.code,{children:'"Aujourd\'hui, nous sommes le \x3c!--#4DSCRIPT/MYMETH/MYPARAM--\x3e"'})," dans un mod\xe8le de page web. Lors du chargement de la page, 4D appelle la m\xe9thode base ",(0,i.jsx)(n.code,{children:"On Web Authentication"}),", puis appelle la m\xe9thode ",(0,i.jsx)(n.code,{children:"MYMETH"}),' et transmet la cha\xeene "/MYPARAM" en tant que param\xe8tre ',(0,i.jsx)(n.code,{children:"$1"}),'. La m\xe9thode renvoie du texte en $0 (par exemple "12/31/21") ; l\'expression',(0,i.jsx)(n.code,{children:"\"Aujourd'hui, nous sommes le\x3c!--#4DSCRIPT/MYMETH/MYPARAM--\x3e"}),'" devient donc "Aujourd\'hui, nous sommes le 12/31/21".']}),"\n",(0,i.jsxs)(n.p,{children:["La m\xe9thode ",(0,i.jsx)(n.code,{children:"MYMETH"})," est la suivante :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:"  //MYMETH\n C_TEXT($0;$1) //Ces param\xe8tres doivent toujours \xeatre d\xe9clar\xe9s\n $0:=String(Current date)\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Une m\xe9thode appel\xe9e par ",(0,i.jsx)(n.code,{children:"4DSCRIPT"})," ne doit pas appeler des \xe9l\xe9ments d'interface",(0,i.jsx)(n.code,{children:"(DIALOG"}),", ",(0,i.jsx)(n.code,{children:"ALERT"}),", etc.)."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Comme 4D ex\xe9cute les m\xe9thodes dans leur ordre d'apparition, il est tout \xe0 fait possible d'appeler une m\xe9thode qui fixe la valeur de plusieurs variables r\xe9f\xe9renc\xe9es plus loin dans le document, quel que soit le mode utilis\xe9. Vous pouvez ins\xe9rer autant de ",(0,i.jsx)(n.code,{children:"\x3c!--#4DSCRIPT...--\x3e"})," commentaires que vous le souhaitez dans un mod\xe8le."]}),"\n",(0,i.jsx)(n.h2,{id:"4dtext",children:"4DTEXT"}),"\n",(0,i.jsxs)(n.h4,{id:"syntax---4dtext-expression--",children:["Syntax: ",(0,i.jsx)(n.code,{children:"\x3c!--#4DTEXT expression--\x3e"})]}),"\n",(0,i.jsxs)(n.h4,{id:"syntaxe-alternative--4dtextexpression",children:["Syntaxe alternative : ",(0,i.jsx)(n.code,{children:"4DTEXT(expression)"})]}),"\n",(0,i.jsxs)(n.p,{children:["La balise ",(0,i.jsx)(n.code,{children:"\x3c!--#4DTEXT expression--\x3e"})," vous permet d'ins\xe9rer une r\xe9f\xe9rence \xe0 une variable 4D ou \xe0 une expression retournant une valeur. Par exemple, si vous \xe9crivez (dans une page HTML) :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"<P>Welcome to \x3c!--#4DTEXT vtSiteName--\x3e!</P>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["La valeur de la variable 4D ",(0,i.jsx)(n.code,{children:"vtSiteName"}),' sera ins\xe9r\xe9e dans la page HTML lors de son envoi. Cette valeur est ins\xe9r\xe9e comme du texte simple, les caract\xe8res HTML sp\xe9ciaux tels que ">" sont automatiquement \xe9chapp\xe9s.']}),"\n",(0,i.jsxs)(n.p,{children:["Vous pouvez \xe9galement ins\xe9rer des expressions 4D. Par exemple, vous pouvez ins\xe9rer directement le contenu d'un champ (",(0,i.jsx)(n.code,{children:"\x3c!--#4DTEXT [tableName]fieldName--\x3e"}),"), un \xe9l\xe9ment de tableau (",(0,i.jsx)(n.code,{children:"\x3c!--#4DTEXT tabarr{1}--\x3e"}),") ou une m\xe9thode retournant une valeur (",(0,i.jsx)(n.code,{children:"\x3c!--#4DTEXT mymethod--\x3e"}),"). La conversion des expressions suit les m\xeames r\xe8gles que celles des variables. De plus, l'expression doit respecter les r\xe8gles de syntaxe 4D."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Pour des raisons de s\xe9curit\xe9, il est recommand\xe9 d'utiliser cette balise lors du traitement de donn\xe9es introduites en dehors de l'application, afin d'\xe9viter ",(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/templates#prevention-of-malicious-code-insertion",children:"l'insertion de code malveillant"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["En cas d'erreur d'\xe9valuation, le texte ins\xe9r\xe9 appara\xeetra sous la forme ",(0,i.jsx)(n.code,{children:"\x3c!--#4DTEXT myvar--\x3e: ## erreur # code d'erreur"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Vous devez utiliser des variables process."}),"\n",(0,i.jsx)(n.li,{children:"Vous pouvez afficher le contenu d'un champ image. Cependant, il n'est pas possible d'afficher le contenu d'un \xe9l\xe9ment de tableau d'images."}),"\n",(0,i.jsxs)(n.li,{children:["Il est possible d'afficher le contenu d'un champ objet \xe0 l'aide d'une formule 4D. Par exemple, vous pouvez \xe9crire ",(0,i.jsx)(n.code,{children:'\x3c!--#4DTEXT OB Get:C1224([Rect]Desc;\\"color\\")--\x3e'}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Vous travaillerez g\xe9n\xe9ralement avec des variables de type Texte. Cependant, vous pouvez \xe9galement utiliser des variables BLOB. Il vous suffit de g\xe9n\xe9rer les BLOB en mode ",(0,i.jsx)(n.code,{children:"Texte sans longueur"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"syntaxe-alternative-pour-4dtext-4dhtml-4deval",children:"Syntaxe alternative pour 4DTEXT, 4DHTML, 4DEVAL"}),"\n",(0,i.jsx)(n.p,{children:"Plusieurs balises de transformation 4D existantes peuvent \xeatre exprim\xe9es \xe0 l'aide d'une syntaxe fond\xe9e sur le symbole $ :"}),"\n",(0,i.jsx)(n.h4,{id:"4dtag-expression",children:"4dtag (expression)"}),"\n",(0,i.jsx)(n.p,{children:"peut \xeatre utilis\xe9 \xe0 la place de"}),"\n",(0,i.jsx)(n.h4,{id:"--4dtag-expression--",children:(0,i.jsx)(n.code,{children:"\x3c!--#4dtag expression--\x3e"})}),"\n",(0,i.jsx)(n.p,{children:"Cette syntaxe alternative n'est disponible que pour les balises utilis\xe9es pour retourner des valeurs trait\xe9es :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#4dtext",children:"4DTEXT"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#4dhtml",children:"4DHTML"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#4deval",children:"4DEVAL"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"(Les autres balises, telles que 4DIF ou 4DSCRIPT, doivent \xeatre \xe9crites avec la syntaxe r\xe9guli\xe8re)."}),"\n",(0,i.jsx)(n.p,{children:"Par exemple, vous pouvez \xe9crire :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"$4DEVAL(UserName)\n"})}),"\n",(0,i.jsx)(n.p,{children:"au lieu de :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"\x3c!--#4DEVAL(UserName)--\x3e\n"})}),"\n",(0,i.jsx)(n.p,{children:"Le principal avantage de cette syntaxe est qu'elle vous permet d'\xe9crire des mod\xe8les conformes \xe0 XML. Certains d\xe9veloppeurs 4D ont besoin de cr\xe9er et de valider des mod\xe8les bas\xe9s sur XML \xe0 l'aide d'outils d'analyse syntaxique XML standard. Le caract\xe8re \"<\" n'\xe9tant pas valide dans une valeur d'attribut XML, il n'\xe9tait pas possible d'utiliser la syntaxe \" \" des balises 4D sans rompre la syntaxe du document. D'autre part, ne pas mentionner le caract\xe8re \"<\" emp\xeache 4D d'interpr\xe9ter correctement les balises."}),"\n",(0,i.jsx)(n.p,{children:"Par exemple, le code suivant provoquerait une erreur d'analyse XML en raison du premier caract\xe8re \"<\" dans la valeur de l'attribut :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<line x1="\x3c!--#4DEVAL $x--\x3e" y1="\x3c!--#4DEVAL $graphY1--\x3e"/>\n'})}),"\n",(0,i.jsx)(n.p,{children:"En utilisant la syntaxe $, le code suivant est valid\xe9 par le parseur :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<line x1="$4DEVAL($x)" y1="$4DEVAL($graphY1)"/>\n'})}),"\n",(0,i.jsxs)(n.p,{children:["A noter que ",(0,i.jsx)(n.code,{children:"$4dtag"})," et ",(0,i.jsx)(n.code,{children:"<--#4dtag --\x3e"})," ne sont pas strictement \xe9quivalents : contrairement \xe0 ",(0,i.jsx)(n.code,{children:"<--#4dtag --\x3e"}),", le traitement de ",(0,i.jsx)(n.code,{children:"$4dtag"})," n'interpr\xe8te pas les balises 4D ",(0,i.jsx)(n.a,{href:"#recursive-processing",children:"de mani\xe8re r\xe9cursive"}),". Les balises ",(0,i.jsx)(n.code,{children:"$"})," sont toujours \xe9valu\xe9es une fois et le r\xe9sultat est consid\xe9r\xe9 comme du texte brut."]}),"\n",(0,i.jsxs)(n.p,{children:["Cette diff\xe9rence consiste \xe0 emp\xeacher l'injection de code malveillant. Comme ",(0,i.jsx)(n.a,{href:"/docs/fr/20/WebServer/templates#prevention-of-malicious-code-insertion",children:"expliqu\xe9 ci-dessous"}),", il est fortement recommand\xe9 d'utiliser les balises ",(0,i.jsx)(n.code,{children:"4DTEXT"})," au lieu des balises ",(0,i.jsx)(n.code,{children:"4DHTML"})," lorsque vous manipulez du texte utilisateur, afin de se prot\xe9ger contre une r\xe9interpr\xe9tation ind\xe9sirable des balises : avec ",(0,i.jsx)(n.code,{children:"4DTEXT"}),', les caract\xe8res sp\xe9ciaux tels que "<" sont \xe9chapp\xe9s, ainsi toute balise 4D utilisant la syntaxe ',(0,i.jsx)(n.code,{children:"\x3c!--#4dtag expression --\x3e"})," perdra sa signification particuli\xe8re. Cependant, \xe9tant donn\xe9 que ",(0,i.jsx)(n.code,{children:"4DTEXT"})," n'\xe9chappe pas le symbole ",(0,i.jsx)(n.code,{children:"$"}),", nous avons choisi de ne pas prendre en charge la r\xe9cursion afin d'emp\xeacher toute injection malveillante utilisant la syntaxe ",(0,i.jsx)(n.code,{children:"$4dtag (expression)"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Les exemples suivants illustrent le r\xe9sultat du traitement en fonction de la syntaxe et de la balise  utilis\xe9es :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'  // example 1\n myName:="\x3c!--#4DHTML QUIT 4D--\x3e" //injection malveillante\n input:="My name is: \x3c!--#4DHTML myName--\x3e"\n PROCESS 4D TAGS(input;output)\n  //fait quitter 4D !\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'  // exemple 2\n myName:="\x3c!--#4DHTML QUIT 4D--\x3e" //injection malveillante\n input:="My name is: \x3c!--#4DTEXT myName--\x3e"\n PROCESS 4D TAGS(input;output)\n  //la sortie est "My name is: \x3c!--#4DHTML QUIT 4D--\x3e"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'  // exemple 3\n myName:="$4DEVAL(QUIT 4D)" //injection malveillante\n input:="My name is: \x3c!--#4DTEXT myName--\x3e"\n PROCESS 4D TAGS(input;output)\n  //la sortie est "My name is: $4DEVAL(QUIT 4D)"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["A noter que la syntaxe ",(0,i.jsx)(n.code,{children:"$4dtag"})," prend en charge la correspondance de paires de guillemets ou de parenth\xe8ses. Par exemple, supposons que vous ayez besoin d'\xe9valuer la cha\xeene complexe (fictive) suivante :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'String(1) + "\\"(hello)\\""\n'})}),"\n",(0,i.jsx)(n.p,{children:"Vous pouvez \xe9crire :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:' input:="$4DEVAL( String(1)+\\"\\\\\\"(hello)\\\\\\"\\")"\n PROCESS 4D TAGS(input;output)\n --\x3eoutput is 1"(hello)"\n'})})]})}function u(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},250065:function(e,n,s){s.d(n,{Z:()=>d,a:()=>l});var t=s(667294);let i={},r=t.createContext(i);function l(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);