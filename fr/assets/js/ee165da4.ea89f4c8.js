"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["7386"],{620544:function(e,n,r){r.r(n),r.d(n,{default:()=>a,frontMatter:()=>l,metadata:()=>s,assets:()=>c,toc:()=>o,contentTitle:()=>d});var s=JSON.parse('{"id":"API/TCPListenerClass","title":"TCPListener","description":"La classe TCPListener vous permet de cr\xe9er et de configurer un serveur TCP dans 4D. Une fois le listener TCP instanci\xe9, vous pouvez recevoir des connexions TCP clientes et communiquer \xe0 l\'aide de n\'importe quel protocole prenant en charge TCP.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R9/API/TCPListenerClass.md","sourceDirName":"API","slug":"/API/TCPListenerClass","permalink":"/docs/fr/API/TCPListenerClass","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FTCPListenerClass.md%20(20-R9)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R9","frontMatter":{"id":"TCPListenerClass","title":"TCPListener"},"sidebar":"docs","previous":{"title":"TCPEvent","permalink":"/docs/fr/API/TCPEventClass"},"next":{"title":"WebForm","permalink":"/docs/fr/API/WebFormClass"}}'),t=r("785893"),i=r("250065");let l={id:"TCPListenerClass",title:"TCPListener"},d=void 0,c={},o=[{value:"Exemple",id:"exemple",level:3},{value:"TCPListener Object",id:"tcplistener-object",level:3},{value:"4D.TCPListener.new()",id:"4dtcplistenernew",level:2},{value:"Description",id:"description",level:4},{value:"Param\xe8tre <code>options</code>",id:"param\xe8tre-options",level:4},{value:"Fonctions de callback",id:"fonctions-de-callback",level:4},{value:"Objet TCPEvent",id:"objet-tcpevent",level:4},{value:".errors",id:"errors",level:2},{value:"Description",id:"description-1",level:4},{value:".port",id:"port",level:2},{value:"Description",id:"description-2",level:4},{value:".terminate()",id:"terminate",level:2},{value:"Description",id:"description-3",level:4}];function h(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["La classe ",(0,t.jsx)(n.code,{children:"TCPListener"})," vous permet de cr\xe9er et de configurer un serveur TCP dans 4D. Une fois le listener TCP instanci\xe9, vous pouvez recevoir des connexions TCP clientes et communiquer \xe0 l'aide de n'importe quel protocole prenant en charge TCP."]}),"\n",(0,t.jsxs)(n.p,{children:["La classe ",(0,t.jsx)(n.code,{children:"TCPListener"})," est disponible dans le class store ",(0,t.jsx)(n.code,{children:"4D"}),". Vous pouvez cr\xe9er un serveur TCP \xe0 l'aide de la fonction ",(0,t.jsx)(n.a,{href:"#4dtcplistenernew",children:"4D.TCPListener.new()"}),", qui renvoie un ",(0,t.jsx)(n.a,{href:"#tcplistener-object",children:"objet TCPListener"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Toutes les fonctions de la classe ",(0,t.jsx)(n.code,{children:"TCPListener"})," sont thread-safe."]}),"\n",(0,t.jsxs)(n.details,{children:[(0,t.jsx)(n.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Release"}),(0,t.jsx)(n.th,{children:"Modifications"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"20 R9"}),(0,t.jsx)(n.td,{children:"Classe ajout\xe9e"})]})})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"exemple",children:"Exemple"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'\nproperty listener : 4D.TCPListener\n\nClass constructor($port : Integer)\n	\n	This.listener:=4D.TCPListener.new($port; This)\n		\nFunction terminate()\n	\n	This.listener.terminate()\n	\nFunction onConnection($listener : 4D.TCPListener ; $event : 4D.TCPEvent)->$result\n    	//une fois connect\xe9, d\xe9marre un serveur pour g\xe9rer la communication\n	If($event.address # "192.168.@") \n		$result:=Null //dans certains cas, vous pouvez rejeter la connexion\n	Else\n		$result:=cs.MyAsyncTCPConnection.new(This) //voir classe TCPConnection\n	End if\n	\nFunction onError($listener : 4D.TCPListener ; $event : 4D.TCPEvent)\n	\nFunction onTerminate($listener : 4D.TCPListener ; $event : 4D.TCPEvent)\n\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Voir ",(0,t.jsx)(n.a,{href:"/docs/fr/API/TCPConnectionClass#asynchronous-example",children:"l'exemple de la classe TCPConnection"})," pour une description de la classe utilisateur MyAsyncTCPConnexion."]})}),"\n",(0,t.jsx)(n.h3,{id:"tcplistener-object",children:"TCPListener Object"}),"\n",(0,t.jsx)(n.p,{children:"Un objet TCPListener est un objet partag\xe9."}),"\n",(0,t.jsx)(n.p,{children:"Les objets TCPListener offrent les propri\xe9t\xe9s et fonctions suivantes :"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsx)(n.tr,{children:(0,t.jsx)(n.th,{})})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#errors",children:[(0,t.jsx)(n.strong,{children:"errors"})," : Collection"]}),(0,t.jsx)(n.br,{}),"une collection d'objets erreur associ\xe9s \xe0 la connexion"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#port",children:[(0,t.jsx)(n.strong,{children:"port"})," : Number"]}),(0,t.jsx)(n.br,{}),"le num\xe9ro de port de la machine"]})}),(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsxs)(n.a,{href:"#terminate",children:[(0,t.jsx)(n.strong,{children:".terminate"}),"()"]}),(0,t.jsx)(n.br,{}),"ferme le listener et lib\xe8re le port"]})})]})]}),"\n",(0,t.jsx)(n.h2,{id:"4dtcplistenernew",children:"4D.TCPListener.new()"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"4D.TCPListener.new"}),"( ",(0,t.jsx)(n.em,{children:"port"})," : Number ; ",(0,t.jsx)(n.em,{children:"options"})," : Object ) : 4D.TCPListener"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"port"}),(0,t.jsx)(n.td,{children:"Number"}),(0,t.jsx)(n.td,{children:"->"}),(0,t.jsx)(n.td,{children:"Port TCP \xe0 \xe9couter"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"options"}),(0,t.jsx)(n.td,{children:"Object"}),(0,t.jsx)(n.td,{children:"->"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.a,{href:"#options-parameter",children:"options"})," de configuration du listener"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"R\xe9sultat"}),(0,t.jsx)(n.td,{children:"4D.TCPListener"}),(0,t.jsx)(n.td,{children:"<-"}),(0,t.jsx)(n.td,{children:"Nouvel objet TCPListener"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La fonction ",(0,t.jsx)(n.code,{children:"4D.TCPListener.new()"})," cr\xe9e un nouveau serveur TCP \xe9coutant le ",(0,t.jsx)(n.em,{children:"port"})," sp\xe9cifi\xe9 en utilisant les ",(0,t.jsx)(n.em,{children:"options"})," d\xe9finies, et renvoie un objet ",(0,t.jsx)(n.code,{children:"4D.TCPListener"}),"."]}),"\n",(0,t.jsxs)(n.h4,{id:"param\xe8tre-options",children:["Param\xe8tre ",(0,t.jsx)(n.code,{children:"options"})]}),"\n",(0,t.jsxs)(n.p,{children:["Dans le param\xe8tre ",(0,t.jsx)(n.em,{children:"options"}),", passez un objet pour configurer le listener et toutes les ",(0,t.jsx)(n.code,{children:"TCPConnections"})," qu'il cr\xe9e :"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Propri\xe9t\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Par d\xe9faut"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"onConnection"}),(0,t.jsx)(n.td,{children:"Formula"}),(0,t.jsxs)(n.td,{children:["Callback appel\xe9e lorsqu'une nouvelle connexion est \xe9tablie. La formule re\xe7oit deux param\xe8tres (",(0,t.jsx)(n.em,{children:"$listener"})," et ",(0,t.jsx)(n.em,{children:"$event"}),", voir ci-dessous) et doit retourner soit null/undefined pour emp\xeacher la connexion, soit un objet ",(0,t.jsx)(n.em,{children:"option"})," qui sera utilis\xe9 pour cr\xe9er l'objet ",(0,t.jsx)(n.a,{href:"/docs/fr/API/TCPConnectionClass",children:(0,t.jsx)(n.code,{children:"TCPConnection"})}),"."]}),(0,t.jsx)(n.td,{children:"Undefined"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"onError"}),(0,t.jsx)(n.td,{children:"Formula"}),(0,t.jsxs)(n.td,{children:["Callback d\xe9clench\xe9e en cas d'erreur. La formule re\xe7oit l'objet ",(0,t.jsx)(n.code,{children:"TCPListener"})," dans ",(0,t.jsx)(n.em,{children:"$listener"})]}),(0,t.jsx)(n.td,{children:"Undefined"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"onTerminate"}),(0,t.jsx)(n.td,{children:"Formula"}),(0,t.jsxs)(n.td,{children:["Callback d\xe9clench\xe9e juste avant la fermeture du TCPListener. La formule re\xe7oit l'objet ",(0,t.jsx)(n.code,{children:"TCPListener"})," dans ",(0,t.jsx)(n.em,{children:"$listener"})]}),(0,t.jsx)(n.td,{children:"Undefined"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"fonctions-de-callback",children:"Fonctions de callback"}),"\n",(0,t.jsx)(n.p,{children:"Les fonctions de callback peuvent recevoir jusqu'\xe0 deux param\xe8tres :"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$listener"}),(0,t.jsx)(n.td,{children:(0,t.jsxs)(n.a,{href:"#tcplistener-object",children:["objet ",(0,t.jsx)(n.code,{children:"TCPListener"})]})}),(0,t.jsx)(n.td,{children:"L'instance courante du listener TCP."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$event"}),(0,t.jsx)(n.td,{children:(0,t.jsxs)(n.a,{href:"#tcpevent-object",children:["objet ",(0,t.jsx)(n.code,{children:"TCPEvent"})]})}),(0,t.jsx)(n.td,{children:"Contient des informations sur l'\xe9v\xe9nement."})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"S\xe9quence des appels de callbacks :"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onConnection"})," est d\xe9clench\xe9e \xe0 chaque fois qu'une connexion est \xe9tablie."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onError"})," est d\xe9clench\xe9e en cas d'erreur."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"onTerminate"})," est toujours d\xe9clench\xe9e juste avant qu'une connexion soit termin\xe9e."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"objet-tcpevent",children:"Objet TCPEvent"}),"\n",(0,t.jsxs)(n.p,{children:["Un objet ",(0,t.jsx)(n.a,{href:"/docs/fr/API/TCPEventClass",children:(0,t.jsx)(n.code,{children:"TCPEvent"})})," est renvoy\xe9 lorsqu'une ",(0,t.jsx)(n.a,{href:"#callback-functions",children:"fonction de callback"})," est appel\xe9e."]}),"\n",(0,t.jsx)(n.h2,{id:"errors",children:".errors"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"errors"})," : Collection"]}),"\n",(0,t.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,t.jsx)(n.code,{children:".errors"})," contient une collection d'objets erreur associ\xe9s \xe0 la connexion. Chaque objet erreur comprend le code d'erreur, une description et la signature du composant qui a provoqu\xe9 l'erreur."]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Propri\xe9t\xe9"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"errors"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"Collection"}),(0,t.jsx)(n.td,{children:"Pile d'erreurs 4D en cas d'erreur"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"[].errCode"}),(0,t.jsx)(n.td,{children:"Number"}),(0,t.jsx)(n.td,{children:"Code d'erreur 4D"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"[].message"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"Description de l'erreur 4D"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"[].componentSignature"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"Signature du composant interne qui a retourn\xe9 l'erreur"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"port",children:".port"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"port"})," : Number"]}),"\n",(0,t.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,t.jsx)(n.code,{children:".port"})," contient le num\xe9ro de port de la machine. Cette propri\xe9t\xe9 est en ",(0,t.jsx)(n.strong,{children:"lecture seule"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"terminate",children:".terminate()"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:".terminate"}),"()"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tres"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{style:{textAlign:"center"}}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{style:{textAlign:"center"}}),(0,t.jsx)(n.td,{children:"Ne requiert aucun param\xe8tre"})]})})]}),"\n",(0,t.jsx)(n.h4,{id:"description-3",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La fonction ",(0,t.jsx)(n.code,{children:"terminate()"})," ferme le listener et lib\xe8re le port."]})]})}function a(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return d},a:function(){return l}});var s=r(667294);let t={},i=s.createContext(t);function l(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);