"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["35346"],{540075:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>a,default:()=>u,toc:()=>o,metadata:()=>r,assets:()=>c,contentTitle:()=>i});var r=JSON.parse('{"id":"commands-legacy/query-by-formula","title":"QUERY BY FORMULA","description":"QUERY BY FORMULA ( laTable {; formule} )","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R9/commands-legacy/query-by-formula.md","sourceDirName":"commands-legacy","slug":"/commands/query-by-formula","permalink":"/docs/fr/20-R9/commands/query-by-formula","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fquery-by-formula.md%20(20-R9)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R9","frontMatter":{"id":"query-by-formula","title":"QUERY BY FORMULA","slug":"/commands/query-by-formula","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"QUERY BY EXAMPLE","permalink":"/docs/fr/20-R9/commands/query-by-example"},"next":{"title":"QUERY SELECTION","permalink":"/docs/fr/20-R9/commands/query-selection"}}'),t=s(785893),l=s(250065);let a={id:"query-by-formula",title:"QUERY BY FORMULA",slug:"/commands/query-by-formula",displayed_sidebar:"docs"},i=void 0,c={},o=[{value:"Description",id:"description",level:2},{value:"Exemple 1",id:"exemple-1",level:2},{value:"Exemple 2",id:"exemple-2",level:2},{value:"Exemple 3",id:"exemple-3",level:2},{value:"Voir aussi",id:"voir-aussi",level:2},{value:"Propri\xe9t\xe9s",id:"propri\xe9t\xe9s",level:2}];function d(e){let n={a:"a",br:"br",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"QUERY BY FORMULA"})," ( ",(0,t.jsx)(n.em,{children:"laTable"})," {; ",(0,t.jsx)(n.em,{children:"formule"}),"} )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tre"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"laTable"}),(0,t.jsx)(n.td,{children:"Table"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:"Table dans laquelle effectuer la recherche"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"formule"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:"Formule de recherche"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"QUERY BY FORMULA"})," effectue une recherche d'enregistrements dans ",(0,t.jsx)(n.em,{children:"laTable"}),".modifie la s\xe9lection courante de ",(0,t.jsx)(n.em,{children:"laTable"})," pour le process courant et fait du premier enregistrement le nouvel enregistrement courant."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"QUERY BY FORMULA"})," et la commande ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query-selection-by-formula",children:"QUERY SELECTION BY FORMULA"})," fonctionnent exactement de la m\xeame mani\xe8re, \xe0 la diff\xe9rence pr\xe8s que ",(0,t.jsx)(n.strong,{children:"QUERY BY FORMULA"})," effectue sa recherche parmi la totalit\xe9 des enregistrements de la table alors que ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query-selection-by-formula",children:"QUERY SELECTION BY FORMULA"})," se cantonne aux enregistrements de la s\xe9lection courante."]}),"\n",(0,t.jsxs)(n.p,{children:["Les deux commandes appliquent ",(0,t.jsx)(n.em,{children:"formule"})," \xe0 chaque enregistrement de la table ou de la s\xe9lection. ",(0,t.jsx)(n.em,{children:"formule"})," est une expression bool\xe9enne qui doit retourner ",(0,t.jsx)(n.strong,{children:"VRAI"})," ou ",(0,t.jsx)(n.strong,{children:"FAUX"}),". Si ",(0,t.jsx)(n.em,{children:"formule"})," retourne ",(0,t.jsx)(n.strong,{children:"Vrai"}),", l'enregistrement est inclus dans la nouvelle s\xe9lection."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"formule"})," peut \xeatre simple (par exemple la comparaison d'un champ \xe0 une valeur) ou complexe (r\xe9alisation d'un calcul ou m\xeame \xe9valuation de valeurs dans une table li\xe9e). Ce peut \xeatre une fonction 4D, ou une fonction ou une expression que vous avez cr\xe9\xe9e. Lorsque vous travaillez avec des champs de type Alpha ou Texte, vous pouvez utiliser dans ",(0,t.jsx)(n.em,{children:"formule"})," des jokers (@) ainsi que l'op\xe9rateur \"contient\" (%) pour la recherche par mots-cl\xe9s. Pour plus d'informations, reportez-vous \xe0 la description de la commande ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query",children:"QUERY"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Attention :"})," Les param\xe8tres ($1...$n) ne sont pas pris en charge par formule."]}),"\n",(0,t.jsxs)(n.p,{children:["Si vous omettez le param\xe8tre ",(0,t.jsx)(n.em,{children:"formule"}),", 4D affiche la bo\xeete de dialogue de recherche (l'utilisateur peut ajouter une ligne de formule en effectuant ",(0,t.jsx)(n.strong,{children:"Alt+clic"})," sur le bouton ",(0,t.jsx)(n.strong,{children:"[+]"}),")."]}),"\n",(0,t.jsx)(n.p,{children:"Lorsque la recherche est termin\xe9e, le premier enregistrement de la nouvelle s\xe9lection est charg\xe9 depuis le disque et devient l'enregistrement courant."}),"\n",(0,t.jsxs)(n.p,{children:["Ces commandes sont optimis\xe9es et peuvent notamment tirer parti des index. Lorsque le type de requ\xeate le permet, ces commandes ex\xe9cutent des requ\xeates \xe9quivalentes \xe0 un ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query",children:"QUERY"}),". Par exemple, l\u2019instruction ",(0,t.jsx)(n.strong,{children:"QUERY BY FORMULA([matable]; [matable]monchamp=valeur)"})," sera ex\xe9cut\xe9e comme ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query",children:"QUERY"}),(0,t.jsx)(n.strong,{children:"([matable]; [matable]monchamp=valeur)"}),", ce qui permettra d\u2019utiliser l\u2019index. 4D pourra \xe9galement optimiser les requ\xeates contenant des parties non optimisables, en ex\xe9cutant d\u2019abord les parties optimisables puis en combinant les r\xe9sultats avec le reste de la requ\xeate. Par exemple, l\u2019instruction ",(0,t.jsx)(n.strong,{children:"QUERY BY FORMULA([matable];Longueur(monchamp)=valeur)"})," ne sera pas optimis\xe9e. En revanche, ",(0,t.jsx)(n.strong,{children:"QUERY BY FORMULA([matable];Longueur(monchamp)=valeur1 | monchamp=valeur2)"})," sera partiellement optimis\xe9e."]}),"\n",(0,t.jsxs)(n.p,{children:['Ces commandes effectuent des "jointures" \xe0 la mani\xe8re du SQL lorsque vous comparez des champs de tables diff\xe9rentes. Avec ce principe, les recherches sont optimis\xe9es et il n\u2019est pas n\xe9cessaire qu\u2019un lien automatique structurel existe entre les tables. Par exemple, vous pouvez ex\xe9cuter une instruction du type ',(0,t.jsx)(n.strong,{children:'QUERY BY FORMULA([Table_A];([Table_A]champ_X = [Table_B]champ_Y) & ([Table_B]champ_Y = "abc"))'})," (cf. exemple 3). La premi\xe8re partie de la formule (",(0,t.jsx)(n.em,{children:"[Table_A]champ_X = [Table_B]champ_Y"}),") \xe9tablit la jointure entre les deux champs et la seconde partie (",(0,t.jsx)(n.em,{children:'[Table_B]champ_Y = "abc"'}),") d\xe9finit le ou les crit\xe8re(s) de recherche. Les r\xe8gles suivantes s'appliquent :"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"au moins un crit\xe8re de recherche doit \xeatre d\xe9fini"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"formule"})," ne peut pas contenir plus d'une comparaison de champ d'une m\xeame table."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"S'ils existent, les liens entre les tables ne sont en principe pas utilis\xe9s. Toutefois, ces commandes utilisent les liens automatiques dans les cas suivants :"}),"\n",(0,t.jsxs)(n.p,{children:["- si la formule ne peut se d\xe9composer en \xe9l\xe9ments de la forme ",(0,t.jsx)(n.em,{children:"{ champ ; comparateur ; valeur}"}),(0,t.jsx)(n.br,{}),"\n- si deux champs de la m\xeame table sont compar\xe9s."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note de compatibilit\xe9 :"})," Pour des raisons de compatibilit\xe9 avec des bases converties \xe0 partir de versions ant\xe9rieures \xe0 la v11, il est possible de d\xe9sactiver le m\xe9canisme de jointures via la commande ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/set-database-parameter",children:"SET DATABASE PARAMETER"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"4D Server :"})," Cette commande est ex\xe9cut\xe9e sur le serveur, ce qui optimise son ex\xe9cution. A noter qu\u2019en cas d\u2019appel direct de variables dans la ",(0,t.jsx)(n.em,{children:"formule"}),", la requ\xeate est calcul\xe9e avec la valeur de la variable sur le poste client. Par exemple, l\u2019instruction ",(0,t.jsx)(n.strong,{children:"QUERY BY FORMULA([matable];[matable]monchamp=mavariable)"})," sera ex\xe9cut\xe9e sur le serveur mais avec le contenu de la variable ",(0,t.jsx)(n.em,{children:"mavariable"})," du client."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note de compatibilit\xe9 :"})," Jusqu'\xe0 4D Server v11, cette commande \xe9tait ex\xe9cut\xe9e sur le poste client. Par compatibilit\xe9, ce fonctionnement est maintenu dans les bases de donn\xe9es converties. Toutefois, une propri\xe9t\xe9 de compatibilit\xe9 et un s\xe9lecteur de la commande ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/set-database-parameter",children:"SET DATABASE PARAMETER"})," permettent d'adopter l'ex\xe9cution sur serveur dans les bases de donn\xe9es converties."]}),"\n",(0,t.jsx)(n.h2,{id:"exemple-1",children:"Exemple 1"}),"\n",(0,t.jsxs)(n.p,{children:["L'exemple suivant recherche les enregistrements de toutes les factures qui ont \xe9t\xe9 saisies au mois de d\xe9cembre, sans tenir compte de l'ann\xe9e. Le principe est d'appliquer la fonction ",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/month-of",children:"Month of"})," \xe0 chaque enregistrement. Cette recherche ne pourrait pas \xeatre effectu\xe9e d'une autre mani\xe8re sans cr\xe9er un champ s\xe9par\xe9 pour le mois :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"\xa0QUERY BY FORMULA([Factures];Month of([Factures]Saisie)=12)\n\xa0\xa0// Chercher les factures saisies en d\xe9cembre\n"})}),"\n",(0,t.jsx)(n.h2,{id:"exemple-2",children:"Exemple 2"}),"\n",(0,t.jsx)(n.p,{children:"L'exemple suivant recherche les enregistrements de toutes les personnes dont le nom comporte plus de dix caract\xe8res :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"\xa0QUERY BY FORMULA([Personnes];Length([Personnes]Nom)>10)\n\xa0\xa0// Chercher les personnes dont le nom fait plus de dix caract\xe8res\n"})}),"\n",(0,t.jsx)(n.h2,{id:"exemple-3",children:"Exemple 3"}),"\n",(0,t.jsx)(n.p,{children:'Dans cet exemple, on utilise une jointure pour rechercher toutes les lignes de factures du client "ACME" m\xeame si les tables ne sont pas li\xe9es :'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'\xa0QUERY BY FORMULA([ligne_factures];([ligne_factures]facture_id=[facture]id&[facture]client="ACME"))\n'})}),"\n",(0,t.jsx)(n.h2,{id:"voir-aussi",children:"Voir aussi"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query",children:"QUERY"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query-by-sql",children:"QUERY BY SQL"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query-selection",children:"QUERY SELECTION"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.a,{href:"/docs/fr/20-R9/commands/query-selection-by-formula",children:"QUERY SELECTION BY FORMULA"})]}),"\n",(0,t.jsx)(n.h2,{id:"propri\xe9t\xe9s",children:"Propri\xe9t\xe9s"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Num\xe9ro de commande"}),(0,t.jsx)(n.td,{children:"48"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Thread safe"}),(0,t.jsx)(n.td,{children:"\u2713"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Change l'enregistrement courant"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Change la s\xe9lection courante"}),(0,t.jsx)(n.td,{})]})]})]})]})}function u(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},250065:function(e,n,s){s.d(n,{Z:()=>i,a:()=>a});var r=s(667294);let t={},l=r.createContext(t);function a(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);