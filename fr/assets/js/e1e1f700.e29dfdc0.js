"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[11968],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),p=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(a),c=r,k=d["".concat(o,".").concat(c)]||d[c]||m[c]||l;return a?n.createElement(k,s(s({ref:t},u),{},{components:a})):n.createElement(k,s({ref:t},u))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,s=new Array(l);s[0]=d;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var p=2;p<l;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},81431:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>u});a(67294);var n=a(3905);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={id:"DataClassClass",title:"DataClass"},i=void 0,o={unversionedId:"API/DataClassClass",id:"version-19-R7/API/DataClassClass",title:"DataClass",description:"Une dataclass fournit une interface objet \xe0 une table de la base de donn\xe9es. Toutes les dataclasses d'une application 4D sont disponibles en tant que propri\xe9t\xe9 du datastore ds .",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-19-R7/API/DataClassClass.md",sourceDirName:"API",slug:"/API/DataClassClass",permalink:"/docs/fr/API/DataClassClass",draft:!1,tags:[],version:"19-R7",frontMatter:{id:"DataClassClass",title:"DataClass"},sidebar:"docs",previous:{title:"CryptoKey",permalink:"/docs/fr/API/CryptoKeyClass"},next:{title:"DataClassAttribute",permalink:"/docs/fr/API/DataClassAttributeClass"}},p={},u=[{value:"Sommaire",id:"sommaire",level:3},{value:".<em>attributeName</em>",id:"attributename",level:2},{value:"Description",id:"description",level:4},{value:"Exemple 1",id:"exemple-1",level:4},{value:"Exemple 2",id:"exemple-2",level:4},{value:"Exemple 3",id:"exemple-3",level:4},{value:".all()",id:"all",level:2},{value:"Description",id:"description-1",level:4},{value:"Exemple",id:"exemple",level:4},{value:".clearRemoteCache()",id:"clearremotecache",level:2},{value:"Description",id:"description-2",level:4},{value:"Exemple",id:"exemple-4",level:4},{value:".fromCollection()",id:"fromcollection",level:2},{value:"Description",id:"description-3",level:4},{value:"Exemple 1",id:"exemple-1-1",level:4},{value:"Exemple 2",id:"exemple-2-1",level:4},{value:"Exemple 3",id:"exemple-3-1",level:4},{value:"Exemple 4",id:"exemple-4-1",level:4},{value:"Exemple 5",id:"exemple-5",level:4},{value:"Exemple 6",id:"exemple-6",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement",level:4},{value:".get()",id:"get",level:2},{value:"Description",id:"description-4",level:4},{value:"Exemple 1",id:"exemple-1-2",level:4},{value:"Exemple 2",id:"exemple-2-2",level:4},{value:".getCount()",id:"getcount",level:2},{value:"Description",id:"description-5",level:4},{value:"Exemple",id:"exemple-7",level:4},{value:".getDataStore()",id:"getdatastore",level:2},{value:"Description",id:"description-6",level:4},{value:"Exemple",id:"exemple-8",level:4},{value:".getInfo()",id:"getinfo",level:2},{value:"Description",id:"description-7",level:4},{value:"Exemple 1",id:"exemple-1-3",level:4},{value:"Exemple 2",id:"exemple-2-3",level:4},{value:"Exemple 3",id:"exemple-3-2",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-1",level:4},{value:".getRemoteCache()",id:"getremotecache",level:2},{value:"Description",id:"description-8",level:4},{value:"Exemple",id:"exemple-9",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-2",level:4},{value:".new()",id:"new",level:2},{value:"Description",id:"description-9",level:4},{value:"Exemple",id:"exemple-10",level:4},{value:".newSelection()",id:"newselection",level:2},{value:"Description",id:"description-10",level:4},{value:"Exemple",id:"exemple-11",level:4},{value:".query()",id:"query",level:2},{value:"Description",id:"description-11",level:4},{value:"Exemple 1",id:"exemple-1-4",level:4},{value:"Exemple 2",id:"exemple-2-4",level:4},{value:"Exemple 3",id:"exemple-3-3",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-3",level:4},{value:".setRemoteCacheSettings()",id:"setremotecachesettings",level:2},{value:"Description",id:"description-12",level:4},{value:"Exemple",id:"exemple-12",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-4",level:4}],m={toc:u};function d(e){var{components:t}=e,s=l(e,["components"]);return(0,n.kt)("wrapper",r({},m,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Une ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/ORDA/dsmapping#dataclass"}),"dataclass")," fournit une interface objet \xe0 une table de la base de donn\xe9es. Toutes les dataclasses d'une application 4D sont disponibles en tant que propri\xe9t\xe9 du ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/ORDA/dsmapping#datastore"}),"datastore")," ",(0,n.kt)("inlineCode",{parentName:"p"},"ds")," ."),(0,n.kt)("h3",r({},{id:"sommaire"}),"Sommaire"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#attributename"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : DataClassAttribute"),"\xa0","\xa0","\xa0","\xa0","objets disponibles directement en tant que propri\xe9t\xe9s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#all"}),(0,n.kt)("strong",{parentName:"a"},".all")," ( { ",(0,n.kt)("em",{parentName:"a"},"settings")," : Object } ) : 4D.EntitySelection"),"\xa0","\xa0","\xa0","\xa0","interroge le datastore pour trouver toutes les entit\xe9s de la dataclass et les renvoie en tant qu'entity selection")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#clearremotecache"}),(0,n.kt)("strong",{parentName:"a"},".clearRemoteCache()")),"\xa0","\xa0","\xa0","\xa0","vide le cache ORDA d'une dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#fromcollection"}),(0,n.kt)("strong",{parentName:"a"},".fromCollection"),"( ",(0,n.kt)("em",{parentName:"a"},"objectCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"a"},"settings")," : Object } ) : 4D.EntitySelection"),"\xa0","\xa0","\xa0","\xa0","modifie ou cr\xe9e des entit\xe9s dans la dataclass en utilisant la collection d'objets ",(0,n.kt)("em",{parentName:"td"},"objectCol")," et retourne l'entity selection correspondante")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#get"}),(0,n.kt)("strong",{parentName:"a"},".get"),"( ",(0,n.kt)("em",{parentName:"a"},"primaryKey")," : Integer { ; ",(0,n.kt)("em",{parentName:"a"},"settings")," : Object } ) : 4D.Entity",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".get"),"( ",(0,n.kt)("em",{parentName:"a"},"primaryKey")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"settings")," : Object } ) : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","interroge la dataclass pour r\xe9cup\xe9rer l'entit\xe9 correspondant au param\xe8tre ",(0,n.kt)("em",{parentName:"td"},"primaryKey"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getcount"}),(0,n.kt)("strong",{parentName:"a"},".getCount()")," : Integer "),"\xa0","\xa0","\xa0","\xa0"," retourne le nombre d'entit\xe9s dans une dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getdatastore"}),(0,n.kt)("strong",{parentName:"a"},".getDataStore()")," : cs.DataStore"),"\xa0","\xa0","\xa0","\xa0","retourne le datastore de la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getinfo"}),(0,n.kt)("strong",{parentName:"a"},".getInfo()")," : Object "),"\xa0","\xa0","\xa0","\xa0","retourne un objet qui fournit des informations sur la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getremotecache"}),(0,n.kt)("strong",{parentName:"a"},".getRemoteCache"),"() : Object "),"\xa0","\xa0","\xa0","\xa0","retourne un objet qui contient le cache ORDA pour la dataclass.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#new"}),(0,n.kt)("strong",{parentName:"a"},".new()")," : 4D.Entity "),"\xa0","\xa0","\xa0","\xa0","cr\xe9e en m\xe9moire et renvoie une nouvelle entit\xe9 vide pour la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#newselection"}),(0,n.kt)("strong",{parentName:"a"},".newSelection"),"( { ",(0,n.kt)("em",{parentName:"a"},"keepOrder")," : Integer } ) : 4D.EntitySelection "),"\xa0","\xa0","\xa0","\xa0","cr\xe9e en m\xe9moire une entity selection vide, non partageable, li\xe9e \xe0 la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#query"}),(0,n.kt)("strong",{parentName:"a"},".query"),"( ",(0,n.kt)("em",{parentName:"a"},"queryString")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"...value")," : any } { ; ",(0,n.kt)("em",{parentName:"a"},"querySettings")," : Object } ) : 4D.EntitySelection ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".query"),"( ",(0,n.kt)("em",{parentName:"a"},"formula")," : Object { ; ",(0,n.kt)("em",{parentName:"a"},"querySettings")," : Object } ) : 4D.EntitySelection "),"\xa0","\xa0","\xa0","\xa0","recherche les entit\xe9s r\xe9pondant aux crit\xe8res de recherche sp\xe9cifi\xe9s dans ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"formula")," et (optionnellement) dans ",(0,n.kt)("em",{parentName:"td"},"value"),"(s)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#setremotecachesettings"}),(0,n.kt)("strong",{parentName:"a"},".setRemoteCacheSettings"),"(",(0,n.kt)("em",{parentName:"a"},"settings")," : Object) "),"\xa0","\xa0","\xa0","\xa0","d\xe9finit le timeout et la taille maximum du cache ORDA pour la dataclass.")))),(0,n.kt)("h2",r({},{id:"attributename"}),".",(0,n.kt)("em",{parentName:"h2"},"attributeName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : DataClassAttribute"),(0,n.kt)("h4",r({},{id:"description"}),"Description"),(0,n.kt)("p",null,"Les attributs des dataclasses sont des objets disponibles directement en tant que propri\xe9t\xe9s de ces classes."),(0,n.kt)("p",null,"Les objets renvoy\xe9s sont du type ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/DataClassAttributeClass"}),(0,n.kt)("inlineCode",{parentName:"a"},"DataClassAttribute")),". Ces objets ont des propri\xe9t\xe9s que vous pouvez utiliser et lire pour obtenir des informations sur vos attributs de dataclass."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Les objets de l'attribut Dataclass peuvent \xeatre modifi\xe9s, mais la structure sous-jacente de la base de donn\xe9es ne sera pas alt\xe9r\xe9e.")),(0,n.kt)("h4",r({},{id:"exemple-1"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"$salary:=ds.Employee.salary //retourne l'attribut salary dans la dataclass Employee\n$compCity:=ds.Company[\"city\"] //retourne l'attribut city dans la dataclass Company\n")),(0,n.kt)("h4",r({},{id:"exemple-2"}),"Exemple 2"),(0,n.kt)("p",null,"Consid\xe9rant la structure suivante d'une base :"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(31078).Z,width:"454",height:"634"})),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"var $firstnameAtt;$employerAtt;$employeesAtt : Object\n\n $firstnameAtt:=ds.Employee.firstname\n  //{name:firstname,kind:storage,fieldType:0,type:string,fieldNumber:2,indexed:true,\n  //keyWordIndexed:false,autoFilled:false,mandatory:false,unique:false}\n\n $employerAtt:=ds.Employee.employer\n  //{name:employer,kind:relatedEntity,relatedDataClass:Company,\n  //fieldType:38,type:Company,inverseName:employees}\n  //38=Is object\n\n $employeesAtt:=ds.Company.employees\n  //{name:employees,kind:relatedEntities,relatedDataClass:Employee,\n  //fieldType:42,type:EmployeeSelection,inverseName:employer}\n  //42=Is collection\n")),(0,n.kt)("h4",r({},{id:"exemple-3"}),"Exemple 3"),(0,n.kt)("p",null,"Consid\xe9rant les propri\xe9t\xe9s de table suivantes :"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(55842).Z,width:"405",height:"383"})),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $sequenceNumberAtt : Object\n $sequenceNumberAtt=ds.Employee.sequenceNumber\n  //{name:sequenceNumber,kind:storage,fieldType:0,type:string,fieldNumber:13,\n  //indexed:true,keyWordIndexed:false,autoFilled:true,mandatory:false,unique:true}\n")),(0,n.kt)("h2",r({},{id:"all"}),".all()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Prise en charge du param\xe8tre ",(0,n.kt)("em",{parentName:"td"},"settings"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".all")," ( { ",(0,n.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D.EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"settings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Option de cr\xe9ation : contexte")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9f\xe9rences vers toutes les entit\xe9s de la dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-1"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".all()")," interroge le datastore pour trouver toutes les entit\xe9s de la dataclass et les renvoie en tant qu'entity selection."),(0,n.kt)("p",null,"Les entit\xe9s sont renvoy\xe9es dans l'ordre par d\xe9faut, qui est initialement l'ordre dans lequel elles ont \xe9t\xe9 cr\xe9\xe9es. Notez cependant que, si des entit\xe9s ont \xe9t\xe9 supprim\xe9es et que de nouvelles entit\xe9s ont \xe9t\xe9 ajout\xe9es, l'ordre par d\xe9faut ne refl\xe8te plus l'ordre de cr\xe9ation."),(0,n.kt)("p",null,"Si aucune entit\xe9 n'est trouv\xe9e, une entity selection vide est renvoy\xe9e."),(0,n.kt)("p",null,"Le mode lazy loading est appliqu\xe9."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"settings")),(0,n.kt)("p",null,"Dans le param\xe8tre optionnel ",(0,n.kt)("em",{parentName:"p"},"settings"),", vous pouvez passer un objet contenant des options suppl\xe9mentaires. La propri\xe9t\xe9 suivante est prise en charge :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"context"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom du contexte d'optimisation appliqu\xe9 \xe0 l'entity selection. Ce contexte sera utilis\xe9 par le code qui manipule l'entity selection afin de b\xe9n\xe9ficier de l'optimisation. Cette fonctionnalit\xe9 est ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/fr/ORDA/entities#optimisation-client-server"}),"con\xe7ue pour le traitement client/serveur ORDA"),".")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour obtenir le nombre total d'entit\xe9s dans une dataclass, il est recommand\xe9 d'utiliser la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"#getcount"}),(0,n.kt)("inlineCode",{parentName:"a"},"getCount()"))," qui est plus optimis\xe9e que l'expression ",(0,n.kt)("inlineCode",{parentName:"p"},"ds.myClass.all().length"),".")),(0,n.kt)("h4",r({},{id:"exemple"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $allEmp : cs.EmployeeSelection\n $allEmp:=ds.Employee.all()\n")),(0,n.kt)("h2",r({},{id:"clearremotecache"}),".clearRemoteCache()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clearRemoteCache()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ne requiert aucun param\xe8tre")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-2"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".clearRemoteCache()")," vide le cache ORDA d'une dataclass."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Cette fonction ne r\xe9initialise pas les valeurs de ",(0,n.kt)("inlineCode",{parentName:"p"},"timeout")," et ",(0,n.kt)("inlineCode",{parentName:"p"},"maxEntries"),".")),(0,n.kt)("h4",r({},{id:"exemple-4"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\nvar $persons : cs.PersonsSelection\nvar $p : cs.PersonsEntity\nvar $cache : Object\nvar $info : Collection\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$persons:=$ds.Persons.all()\n$text:=""\nFor each ($p; $persons)\n    $text:=$p.firstname+" lives in "+$p.address.city+" / "\nEnd for each\n\n$cache:=$ds.Persons.getRemoteCache()\n\n$ds.Persons.clearRemoteCache()\n// Cache of the Persons dataclass = {timeout:30;maxEntries:30000;stamp:255;entries:[]}\n')),(0,n.kt)("h2",r({},{id:"fromcollection"}),".fromCollection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Prise en charge du param\xe8tre ",(0,n.kt)("em",{parentName:"td"},"settings"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".fromCollection"),"( ",(0,n.kt)("em",{parentName:"p"},"objectCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D.EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"objectCol"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection d'objets \xe0 faire correspondre \xe0 des entit\xe9s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"settings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Option de cr\xe9ation : contexte")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Entity selection issue de la collection")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-3"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".fromCollection()")," modifie ou cr\xe9e des entit\xe9s dans la dataclass en utilisant la collection d'objets ",(0,n.kt)("em",{parentName:"p"},"objectCol")," et retourne l'entity selection correspondante."),(0,n.kt)("p",null,"Dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"objectCol")," passez une collection d'objets destin\xe9e \xe0 cr\xe9er ou \xe0 modifier des entit\xe9s de la dataclass. Les noms des propri\xe9t\xe9s doivent correspondre \xe0 ceux des attributs de la dataclass. Si un nom de propri\xe9t\xe9 n'existe pas dans la dataclass, il est ignor\xe9. Si une valeur d'attribut n'est pas d\xe9finie dans la collection pour une entit\xe9 cr\xe9\xe9e, l'attribut prend la valeur Null."),(0,n.kt)("p",null,"La correspondance entre les objets de la collection et les entit\xe9s est effectu\xe9e au niveau des ",(0,n.kt)("strong",{parentName:"p"},"noms d'attributs")," et de leur ",(0,n.kt)("strong",{parentName:"p"},"type de donn\xe9es"),". Si une propri\xe9t\xe9 d'objet a le m\xeame nom qu'un attribut d'entit\xe9 mais que leurs types ne sont pas compatibles, l'attribut de l'entit\xe9 ne re\xe7oit pas de valeur."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Mode cr\xe9ation ou modification")),(0,n.kt)("p",null,"Pour chaque objet de ",(0,n.kt)("em",{parentName:"p"},"objectCol")," :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si l'objet contient une propri\xe9t\xe9 bool\xe9enne \"","_","_",'NEW" fix\xe9e \xe0 faux (ou ne contient pas de propri\xe9t\xe9 bool\xe9enne "',"_","_","NEW\"), l'entit\xe9 est modifi\xe9e ou cr\xe9\xe9e avec les valeurs correspondantes des propri\xe9t\xe9s de l'objet. Aucune v\xe9rification sp\xe9cifique n'est effectu\xe9e concernant la cl\xe9 primaire :",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Si la cl\xe9 primaire est fournie et existe, l'entit\xe9 est modifi\xe9e. Dans ce cas, la cl\xe9 primaire peut \xeatre fournie telle quelle ou via la propri\xe9t\xe9 \"","_","_",'KEY" (contenant la valeur de la propri\xe9t\xe9 primaire).'),(0,n.kt)("li",{parentName:"ul"},"Si la cl\xe9 primaire est fournie (telle quelle) et n'existe pas, l'entit\xe9 est cr\xe9\xe9e"),(0,n.kt)("li",{parentName:"ul"},"Si la cl\xe9 primaire n'est pas fournie, l'entit\xe9 est cr\xe9\xe9e et la cl\xe9 primaire est assign\xe9e selon les r\xe8gles en vigueur de la base de donn\xe9es."))),(0,n.kt)("li",{parentName:"ul"},"si l'objet contient une propri\xe9t\xe9 bool\xe9enne \"","_","_",'NEW" fix\xe9e \xe0 ',(0,n.kt)("strong",{parentName:"li"},"vrai"),", l'entit\xe9 est cr\xe9\xe9e avec les valeurs correspondantes des propri\xe9t\xe9s de l'objet. Une v\xe9rification est effectu\xe9e sur la cl\xe9 primaire :",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Si la cl\xe9 primaire est fournie (telle quelle) et existe, une erreur est g\xe9n\xe9r\xe9e"),(0,n.kt)("li",{parentName:"ul"},"Si la cl\xe9 primaire est fournie (telle quelle) et n'existe pas, l'entit\xe9 est cr\xe9\xe9e"),(0,n.kt)("li",{parentName:"ul"},"Si la cl\xe9 primaire n'est pas fournie, l'entit\xe9 est cr\xe9\xe9e et la cl\xe9 primaire est assign\xe9e selon les r\xe8gles en vigueur de la base de donn\xe9es.",(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},'The nested objects featuring related entities must contain a "',"_","_",'KEY" property (filled with the primary key value of the related entity) or the primary key attribute of the related entity itself. The use of a ',"_","_","KEY property allows independence from the primary key attribute name.")))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Related entities")),(0,n.kt)("p",null,"Les objets de ",(0,n.kt)("em",{parentName:"p"},"objectCol")," peuvent contenir un ou plusieurs objet(s) imbriqu\xe9(s) d\xe9crivant une ou plusieurs entit\xe9(s) relative(s), ce qui peut \xeatre utile pour cr\xe9er ou modifier des relations entre les entit\xe9s."),(0,n.kt)("p",null,'Les objets imbriqu\xe9s d\xe9crivant les entit\xe9s relatives doivent contenir une propri\xe9t\xe9 "',"_","_","KEY\" (contenant la valeur de la cl\xe9 primaire de l'entit\xe9 relative) ou la cl\xe9 primaire de l'entit\xe9 relative elle-m\xeame. L'utilisation de la propri\xe9t\xe9 ","_","_","KEY permet de ne pas d\xe9pendre du nom de l'attribut cl\xe9 primaire."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Ce m\xe9canisme ne permet pas de cr\xe9er ou de modifier les entit\xe9s li\xe9es.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Stamp")),(0,n.kt)("p",null,"Si une propri\xe9t\xe9 ","_","_","STAMP est fournie, une v\xe9rification est effectu\xe9e sur le stamp (marqueur interne) de l'entit\xe9 dans le datastore et une erreur est retourn\xe9e en cas d'invalidit\xe9 (\"Le stamp ne correspond pas \xe0 celui de l'enregistrement# XX de la table XXXX\"). Pour plus d'informations, voir ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/ORDA/entities#verrouillage-d-une-entite"}),"Verrouillage d'une entit\xe9"),"."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"settings")),(0,n.kt)("p",null,"Dans le param\xe8tre optionnel ",(0,n.kt)("em",{parentName:"p"},"settings"),", vous pouvez passer un objet contenant des options suppl\xe9mentaires. La propri\xe9t\xe9 suivante est prise en charge :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"context"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom du contexte d'optimisation appliqu\xe9 \xe0 l'entity selection. Ce contexte sera utilis\xe9 par le code qui manipule l'entity selection afin de b\xe9n\xe9ficier de l'optimisation. Cette fonctionnalit\xe9 est ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/fr/ORDA/entities#optimisation-client-server"}),"con\xe7ue pour le traitement client/serveur ORDA"),".")))),(0,n.kt)("h4",r({},{id:"exemple-1-1"}),"Exemple 1"),(0,n.kt)("p",null,"Nous souhaitons modifier une entit\xe9 existante. La propri\xe9t\xe9 ","_","_","NEW n'est pas fix\xe9e, la cl\xe9 primaire de l'employ\xe9 est pass\xe9e et existe :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs.EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.ID:=668 //Cl\xe9 primaire existante dans la dataclass Employee\n $emp.firstName:="Arthur"\n $emp.lastName:="Martin"\n $emp.employer:=New object("ID";121) //Cl\xe9 primaire existante dans la dataclass li\xe9e Company\n  // Nous modifions la Company de cet employ\xe9 en lui assignant une autre cl\xe9 primaire existante dans la dataclass li\xe9e Company\n $empsCollection.push($emp)\n $employees:=ds.Employee.fromCollection($empsCollection)\n')),(0,n.kt)("h4",r({},{id:"exemple-2-1"}),"Exemple 2"),(0,n.kt)("p",null,"Nous souhaitons modifier une entit\xe9 existante. La propri\xe9t\xe9 ","_","_","NEW n'est pas fournie, la cl\xe9 primaire de l'employ\xe9 est avec l'attribut ","_","_","KEY et existe :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs.EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.__KEY:=1720 //Cl\xe9 primaire existante dans la dataclass Employee\n $emp.firstName:="John"\n $emp.lastName:="Boorman"\n $emp.employer:=New object("ID";121) //Cl\xe9 primaire existante dans la dataclass li\xe9e Company\n  // Nous modifions la Company de cet employ\xe9 en lui assignant une autre cl\xe9 primaire existante dans la dataclass relative Company\n $empsCollection.push($emp)\n $employees:=ds.Employee.fromCollection($empsCollection)\n')),(0,n.kt)("h4",r({},{id:"exemple-3-1"}),"Exemple 3"),(0,n.kt)("p",null,"Cr\xe9ation simple d'une entit\xe9 \xe0 partir d'une collection :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs.EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.firstName:="Victor"\n $emp.lastName:="Hugo"\n $empsCollection.push($emp)\n $employees:=ds.Employee.fromCollection($empsCollection)\n')),(0,n.kt)("h4",r({},{id:"exemple-4-1"}),"Exemple 4"),(0,n.kt)("p",null,"Nous souhaitons cr\xe9er une entit\xe9. La propri\xe9t\xe9 ","_","_","NEW est \xe0 Vrai, la cl\xe9 primaire de l'employ\xe9 n'est pas fournie :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs.EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.firstName:="Mary"\n $emp.lastName:="Smith"\n $emp.employer:=New object("__KEY";121) //Cl\xe9 primaire existante dans la dataclass li\xe9e Company\n $emp.__NEW:=True\n $empsCollection.push($emp)\n $employees:=ds.Employee.fromCollection($empsCollection)\n\n\n\n\n\n\n')),(0,n.kt)("h4",r({},{id:"exemple-5"}),"Exemple 5"),(0,n.kt)("p",null,"Nous souhaitons cr\xe9er une entit\xe9. La propri\xe9t\xe9 ","_","_","NEW n'est pas pass\xe9e, la cl\xe9 primaire de l'employ\xe9 est fournie et n'existe pas :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs.EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.ID:=10000 //cl\xe9 primaire qui n\'existe pas\n $emp.firstName:="Fran\xe7oise"\n $emp.lastName:="Sagan"\n $empsCollection.push($emp)\n $employees:=ds.Employee.fromCollection($empsCollection)\n')),(0,n.kt)("h4",r({},{id:"exemple-6"}),"Exemple 6"),(0,n.kt)("p",null,"Dans cet exemple, la premi\xe8re entit\xe9 sera bien cr\xe9\xe9e mais la seconde cr\xe9ation \xe9chouera car les deux entit\xe9s utilisent la m\xeame cl\xe9 primaire :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp; $emp2 : Object\n var $employees : cs.EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.ID:=10001 // Cl\xe9 primaire inexistante\n $emp.firstName:="Simone"\n $emp.lastName:="Martin"\n $emp.__NEW:=True\n $empsCollection.push($emp)\n\n $emp2:=New object\n $emp2.ID:=10001 // ERREUR cl\xe9 primaire identique\n $emp2.firstName:="Marc"\n $emp2.lastName:="Smith"\n $emp2.__NEW:=True\n $empsCollection.push($emp2)\n $employees:=ds.Employee.fromCollection($empsCollection)\n  //la premi\xe8re entit\xe9 est cr\xe9\xe9e\n  //erreur cl\xe9 dupliqu\xe9e pour la seconde\n')),(0,n.kt)("h4",r({},{id:"voir-\xe9galement"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/EntitySelectionClass#tocollection"}),(0,n.kt)("strong",{parentName:"a"},".toCollection()"))),(0,n.kt)("h2",r({},{id:"get"}),".get()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".get"),"( ",(0,n.kt)("em",{parentName:"p"},"primaryKey")," : Integer { ; ",(0,n.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D.Entity",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".get"),"( ",(0,n.kt)("em",{parentName:"p"},"primaryKey")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"primaryKey"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer OR Text"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valeur de la cl\xe9 primaire de l'entit\xe9 \xe0 r\xe9cup\xe9rer")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"settings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Option de cr\xe9ation : contexte")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Entit\xe9 correspondant \xe0 la cl\xe9 primaire indiqu\xe9e")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-4"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".get()")," interroge la dataclass pour r\xe9cup\xe9rer l'entit\xe9 correspondant au param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"primaryKey"),"."),(0,n.kt)("p",null,"Dans ",(0,n.kt)("em",{parentName:"p"},"primaryKey"),", passez la valeur de cl\xe9 primaire de l'entit\xe9 \xe0 r\xe9cup\xe9rer. Le type de valeur doit correspondre au type de cl\xe9 primaire d\xe9finie dans le datastore (entier long ou texte). Vous pouvez \xe9galement vous assurer que la valeur de la cl\xe9 primaire est toujours renvoy\xe9e en tant que texte en utilisant la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/EntityClass#getkey"}),(0,n.kt)("inlineCode",{parentName:"a"},".getKey()"))," avec le param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"p"},"dk key as string"),"."),(0,n.kt)("p",null,"Si aucune entit\xe9 avec ",(0,n.kt)("em",{parentName:"p"},"primaryKey")," n'est trouv\xe9e, une entit\xe9 ",(0,n.kt)("strong",{parentName:"p"},"Null")," est retourn\xe9e."),(0,n.kt)("p",null,"Le chargement diff\xe9r\xe9 (lazy loading) est appliqu\xe9, ce qui signifie que les donn\xe9es associ\xe9es sont charg\xe9es \xe0 partir du disque uniquement lorsque cela est n\xe9cessaire."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"settings")),(0,n.kt)("p",null,"Dans le param\xe8tre optionnel ",(0,n.kt)("em",{parentName:"p"},"settings"),", vous pouvez passer un objet contenant des options suppl\xe9mentaires. La propri\xe9t\xe9 suivante est prise en charge :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"context"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom du contexte d'optimisation appliqu\xe9 \xe0 l'entit\xe9. Ce contexte sera utilis\xe9 par le code qui manipule l'entit\xe9 afin de b\xe9n\xe9ficier de l'optimisation. Cette fonctionnalit\xe9 est ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/fr/ORDA/entities#optimisation-client-server"}),"con\xe7ue pour le traitement client/serveur ORDA"),".")))),(0,n.kt)("h4",r({},{id:"exemple-1-2"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $entity : cs.EmployeeEntity  \n var $entity2 : cs.InvoiceEntity\n $entity:=ds.Employee.get(167) // retourne l\'entit\xe9 dont la valeur de cl\xe9 primaire est 167\n $entity2:=ds.Invoice.get("DGGX20030") // retourne l\'entit\xe9 dont la valeur de cl\xe9 primaire est "DGGX20030"\n')),(0,n.kt)("h4",r({},{id:"exemple-2-2"}),"Exemple 2"),(0,n.kt)("p",null,"Cet exemple illustre l'utilisation de la propri\xe9t\xe9 ",(0,n.kt)("em",{parentName:"p"},"context")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $e1; $e2; $e3; $e4 : cs.EmployeeEntity\n var $settings; $settings2 : Object\n\n $settings:=New object("context";"detail")\n $settings2:=New object("context";"summary")\n\n $e1:=ds.Employee.get(1;$settings)\n completeAllData($e1) // Dans la m\xe9thode completeAllData, une optimisation est lanc\xe9e et associ\xe9e au contexte "detail"\n\n $e2:=ds.Employee.get(2;$settings)\n completeAllData($e2) // Dans la m\xe9thode completeAllData, l\'optimisation associ\xe9e au contexte "detail" est appliqu\xe9e\n\n $e3:=ds.Employee.get(3;$settings2)\n completeSummary($e3) //Dans la m\xe9thode completeSummary, une optimisation est lanc\xe9e et associ\xe9e au contexte "summary"\n\n $e4:=ds.Employee.get(4;$settings2)\n completeSummary($e4) //Dans la m\xe9thode completeSummary, l\'optimisation associ\xe9e au contexte "summary" est appliqu\xe9e\n')),(0,n.kt)("h2",r({},{id:"getcount"}),".getCount()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getCount()")," : Integer "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nombre d'entit\xe9s dans la dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-5"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getCount()"),"  retourne le nombre d'entit\xe9s dans une dataclass."),(0,n.kt)("p",null,"Si cette fonction est utilis\xe9e dans une transaction, les entit\xe9s cr\xe9\xe9es durant la transaction sont prises en compte."),(0,n.kt)("h4",r({},{id:"exemple-7"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\nvar $number : Integer\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$number:=$ds.Persons.getCount()\n')),(0,n.kt)("h2",r({},{id:"getdatastore"}),".getDataStore()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getDataStore()")," : cs.DataStore"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"cs.DataStore"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Datastore de la dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-6"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getDataStore()")," retourne le datastore de la dataclass."),(0,n.kt)("p",null,"Le datastore peut \xeatre :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"le datastore principal, retourn\xe9 par la commande ",(0,n.kt)("inlineCode",{parentName:"li"},"ds"),"."),(0,n.kt)("li",{parentName:"ul"},"un datastore distant, ouvert \xe0 l'aide de la commande ",(0,n.kt)("inlineCode",{parentName:"li"},"Open datastore"),".")),(0,n.kt)("h4",r({},{id:"exemple-8"}),"Exemple"),(0,n.kt)("p",null,"La m\xe9thode projet ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"SearchDuplicate"))," recherche des valeurs dupliqu\xe9es dans une dataclass."),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $pet : cs.CatsEntity\n $pet:=ds.Cats.all().first() //lire une entit\xe9\n SearchDuplicate($pet;"Dogs")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'  // SearchDuplicate method\n  // SearchDuplicate(entity_to_search;dataclass_name)\n\n #DECLARE ($pet : Object ; $dataClassName : Text)\n var $dataStore; $duplicates : Object  \n\n $dataStore:=$pet.getDataClass().getDataStore()\n $duplicates:=$dataStore[$dataClassName].query("name=:1";$pet.name)\n')),(0,n.kt)("h2",r({},{id:"getinfo"}),".getInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout propri\xe9t\xe9 exposed")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getInfo()")," : Object "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informations sur la dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-7"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getInfo()")," retourne un objet qui fournit des informations sur la dataclass. Cette fonction est utile pour l'\xe9criture de code g\xe9n\xe9rique."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Objet retourn\xe9")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"exposed"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai si la dataclass est expos\xe9e en REST")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom de la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"primaryKey"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom de la cl\xe9 primaire de la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"tableNumber"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Num\xe9ro interne de la table 4D")))),(0,n.kt)("h4",r({},{id:"exemple-1-3"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' #DECLARE ($entity : Object)  \n var $status : Object\n\n computeEmployeeNumber($entity) //Ex\xe9cuter des actions sur une entit\xe9\n\n $status:=$entity.save()\n if($status.success)\n    ALERT("Enregistrement mis \xe0 jour dans la table "+$entity.getDataClass().getInfo().name)\n End if\n')),(0,n.kt)("h4",r({},{id:"exemple-2-3"}),"Exemple 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $settings : Object\n var $es : cs.ClientsSelection\n\n $settings:=New object\n $settings.parameters:=New object("receivedIds";getIds())\n $settings.attributes:=New object("pk";ds.Clients.getInfo().primaryKey)\n $es:=ds.Clients.query(":pk in :receivedIds";$settings)\n')),(0,n.kt)("h4",r({},{id:"exemple-3-2"}),"Exemple 3"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $pk : Text\n var $dataClassAttribute : Object\n\n $pk:=ds.Employee.getInfo().primaryKey\n $dataClassAttribute:=ds.Employee[$pk] // Le cas \xe9ch\xe9ant, l'attribut correspondant \xe0 la cl\xe9 primaire est accessible\n")),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-1"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/DataClassAttributeClass#exposed"}),"DataClassAttribute.exposed")),(0,n.kt)("h2",r({},{id:"getremotecache"}),".getRemoteCache()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRemoteCache"),"() : Object "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objet d\xe9crivant le contenu du cache ORDA pour la dataclass.")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Mode avanc\xe9 :")," Cette fonction est destin\xe9e aux d\xe9veloppeurs qui souhaitent personnaliser les fonctionnalit\xe9s par d\xe9faut de ORDA dans le cadre de configurations sp\xe9cifiques. Dans la plupart des cas, vous n'aurez pas besoin de l'utiliser.")),(0,n.kt)("h4",r({},{id:"description-8"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"getRemoteCache()")," retourne un objet qui contient le cache ORDA pour la dataclass.."),(0,n.kt)("p",null,"Si elle est appel\xe9e depuis une application 4D monoposte, la fonction retourne ",(0,n.kt)("inlineCode",{parentName:"p"},"Null"),"."),(0,n.kt)("p",null,"L'objet retourn\xe9 contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"maxEntries"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Nombre maximum de collections "entries".')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"stamp"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Marqueur du cache.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"timeout"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Dur\xe9e avant qu'une nouvelle entr\xe9e dans le cache soit indiqu\xe9e comme expir\xe9e.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"entries"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Contient un objet pour chaque entit\xe9 dans le cache.")))),(0,n.kt)("p",null,'Chaque objet "entr\xe9e" de la collection ',(0,n.kt)("inlineCode",{parentName:"p"},"entries")," contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"data"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objet contenant les donn\xe9es de l'entr\xe9e.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"expired"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True si l'entr\xe9e a expir\xe9.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"key"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cl\xe9 primaire de l'entit\xe9.")))),(0,n.kt)("p",null,"L'objet ",(0,n.kt)("inlineCode",{parentName:"p"},"data")," de chaque entr\xe9e contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"__KEY"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cl\xe9 primaire de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"__STAMP"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Longint"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Stamp de l'entit\xe9 dans la base de donn\xe9es")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"__TIMESTAMP"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Timestamp de l'entit\xe9 dans la base de donn\xe9es (le format est YYYY-MM-DDTHH:MM:SS:ms:Z)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataClassAttributeName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Variant"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"S'il y a des donn\xe9es dans le cache pour un attribut de dataclass, il est retourn\xe9 dans une propri\xe9t\xe9 du m\xeame type que dans la base de donn\xe9es.")))),(0,n.kt)("p",null,"Les donn\xe9es concernant les entit\xe9s li\xe9es sont stock\xe9es dans le cache de l'objet data."),(0,n.kt)("h4",r({},{id:"exemple-9"}),"Exemple"),(0,n.kt)("p",null,"Dans l'exemple suivant, ",(0,n.kt)("inlineCode",{parentName:"p"},"$ds.Persons.all()")," charge la premi\xe8re entit\xe9 avec tous ses attributs. Ensuite, l'optimiseur de requ\xeates entre en jeu, et seuls ",(0,n.kt)("inlineCode",{parentName:"p"},"firstname")," et ",(0,n.kt)("inlineCode",{parentName:"p"},"address.city")," sont charg\xe9s."),(0,n.kt)("p",null,"Notez que ",(0,n.kt)("inlineCode",{parentName:"p"},"address.city")," est charg\xe9 dans le cache de la dataclass ",(0,n.kt)("inlineCode",{parentName:"p"},"Persons"),"."),(0,n.kt)("p",null,"Seule la premi\xe8re entit\xe9 de la dataclass ",(0,n.kt)("inlineCode",{parentName:"p"},"Address")," est stock\xe9e dans le cache. Elle est charg\xe9e durant la premi\xe8re it\xe9ration de la boucle."),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\nvar $persons : cs.PersonsSelection\nvar $p : cs.PersonsEntity\nvar $cachePersons; $cacheAddress : Object\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$persons:=$ds.Persons.all()\n\n$text:=""\nFor each ($p; $persons)\n    $text:=$p.firstname+" lives in "+$p.address.city+" / "\nEnd for each\n\n$cachePersons:=$ds.Persons.getRemoteCache()\n$cacheAddress:=$ds.Adress.getRemoteCache()\n')),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-2"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#setremotecachesettings"}),".setRemoteCacheSettings()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearremotecache"}),".clearRemoteCache()")),(0,n.kt)("h2",r({},{id:"new"}),".new()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".new()")," : 4D.Entity "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nouvelle entit\xe9 correspondant \xe0 la dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-9"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".new()")," cr\xe9e en m\xe9moire et renvoie une nouvelle entit\xe9 vide pour la dataclass."),(0,n.kt)("p",null,"L'objet entit\xe9 est cr\xe9\xe9 en m\xe9moire et n'est pas sauvegard\xe9 dans la base de donn\xe9es tant que la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/EntityClass#save"}),(0,n.kt)("inlineCode",{parentName:"a"},".save( )"))," n'est pas appel\xe9e. Si l'entit\xe9 est supprim\xe9e avant d'\xeatre sauvegard\xe9e, elle ne peut pas \xeatre r\xe9cup\xe9r\xe9e."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"4D Server"),": En client-serveur, si la cl\xe9 primaire de la table correspondante est auto-incr\xe9ment\xe9e, elle sera calcul\xe9e au moment de la sauvegarde de l'entit\xe9 sur le serveur."),(0,n.kt)("p",null,"Tous les attributs de l'entit\xe9 sont initialis\xe9s avec la valeur ",(0,n.kt)("strong",{parentName:"p"},"null"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Les attributs peuvent \xeatre initialis\xe9s \xe0 des valeurs par d\xe9faut si l'option ",(0,n.kt)("strong",{parentName:"p"},"Traduire les NULL en valeurs vides")," est s\xe9lectionn\xe9e au niveau de la structure de la base 4D.")),(0,n.kt)("h4",r({},{id:"exemple-10"}),"Exemple"),(0,n.kt)("p",null,'Cet exemple cr\xe9e une nouvelle entit\xe9 dans la dataclass "Log" et enregistre les informations dans l\'attribut "info" :'),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $entity : cs.LogEntity\n $entity:=ds.Log.new() //cr\xe9e une r\xe9f\xe9rence\n $entity.info:=\"New entry\" //valorise l'attribut info\n $entity.save() //sauvegarde l'entit\xe9\n")),(0,n.kt)("h2",r({},{id:"newselection"}),".newSelection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".newSelection"),"( { ",(0,n.kt)("em",{parentName:"p"},"keepOrder")," : Integer } ) : 4D.EntitySelection "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"keepOrder"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk keep ordered")," : cr\xe9e une entity selection tri\xe9e,",(0,n.kt)("br",null),(0,n.kt)("inlineCode",{parentName:"td"},"dk non ordered")," : cr\xe9e une entity selection non tri\xe9e (d\xe9faut si omis)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nouvelle entity selection vide li\xe9e \xe0 la dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-10"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".newSelection()")," cr\xe9e en m\xe9moire une entity selection vide, non partageable, li\xe9e \xe0 la dataclass."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour plus d'informations sur les s\xe9lections d'entit\xe9s non partageables, veuillez vous reporter \xe0 ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/ORDA/entities#shareable-or-non-shareable-entity-selections"}),"cette section"),".")),(0,n.kt)("p",null,"Si vous voulez cr\xe9er une entity selection tri\xe9e, passez le s\xe9lecteur ",(0,n.kt)("inlineCode",{parentName:"p"},"dk keep ordered")," dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"keepOrder"),". Par d\xe9faut, si vous omettez ce param\xe8tre ou si vous passez le s\xe9lecteur ",(0,n.kt)("inlineCode",{parentName:"p"},"dk non ordered")," la fonction cr\xe9e une entity selection non tri\xe9e. Les entity selections non tri\xe9es sont plus rapides, mais vous ne pouvez pas vous fier aux positions des entit\xe9s. Pour plus d'informations, voir ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/ORDA/dsmapping#entity-selections-triees-vs-entity-selections-non-triees"}),"Entity selections tri\xe9es vs Entity selections non-tri\xe9es"),"."),(0,n.kt)("p",null,"Une fois cr\xe9\xe9e, l'entity selection ne contient aucune entit\xe9 (",(0,n.kt)("inlineCode",{parentName:"p"},"mySelection.length")," retourne 0). Cette fonction vous permet de construire progressivement des entity selections en effectuant des appels \xe0 la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/EntitySelectionClass#add"}),(0,n.kt)("inlineCode",{parentName:"a"},"add()")),"."),(0,n.kt)("h4",r({},{id:"exemple-11"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $USelection; $OSelection : cs.EmployeeSelection\n $USelection:=ds.Employee.newSelection() //cr\xe9e une entity selection non tri\xe9e vide\n $OSelection:=ds.Employee.newSelection(dk keep ordered) //cr\xe9e une entity selection tri\xe9e vide\n")),(0,n.kt)("h2",r({},{id:"query"}),".query()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Prise en charge des param\xe8tres Formula")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Prise en charge des placeholders pour les valeurs")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".query"),"( ",(0,n.kt)("em",{parentName:"p"},"queryString")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"...value")," : any } { ; ",(0,n.kt)("em",{parentName:"p"},"querySettings")," : Object } ) : 4D.EntitySelection ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".query"),"( ",(0,n.kt)("em",{parentName:"p"},"formula")," : Object { ; ",(0,n.kt)("em",{parentName:"p"},"querySettings")," : Object } ) : 4D.EntitySelection "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"queryString"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Crit\xe8res de recherche en texte")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"formula"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Crit\xe8res de recherche en objet formule")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"value"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"any"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valeur(s) \xe0 utiliser comme placeholder(s)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"querySettings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Options de recherche : parameters, attributes, args, allowFormulas, context, queryPath, queryPlan")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nouvelle entity selection constitu\xe9e des entit\xe9s de la dataclass correspondant au(x) crit\xe8re(s) de recherche fournis dans ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"formula"))))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-11"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".query()")," recherche les entit\xe9s r\xe9pondant aux crit\xe8res de recherche sp\xe9cifi\xe9s dans ",(0,n.kt)("em",{parentName:"p"},"queryString")," ou ",(0,n.kt)("em",{parentName:"p"},"formula")," et (optionnellement) dans ",(0,n.kt)("em",{parentName:"p"},"value"),"(s), pour toutes les entit\xe9s de la dataclass, et retourne un nouvel objet de type ",(0,n.kt)("inlineCode",{parentName:"p"},"EntitySelection")," contenant toutes les entit\xe9s trouv\xe9es. Le mode lazy loading est appliqu\xe9."),(0,n.kt)("p",null,"Si aucune entit\xe9 correspondante n'est trouv\xe9e, une ",(0,n.kt)("inlineCode",{parentName:"p"},"EntitySelection")," vide est retourn\xe9e."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Param\xe8tre queryString")),(0,n.kt)("p",null,"Le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"queryString")," doit respecter la syntaxe suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"attributePath|formula comparator value   \n {logicalOperator attributePath|formula comparator value}   \n {order by attributePath {desc | asc}}\n")),(0,n.kt)("p",null,"o\xf9 :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"attributePath")," : Chemin de l'attribut sur lequel vous souhaitez ex\xe9cuter la recherche. Ce param\xe8tre peut contenir un nom simple (par exemple \"pays\") ou un chemin d'attribut valide (par exemple \"pays.nom\"). Dans le cas d'un chemin d'attribut de type ",(0,n.kt)("inlineCode",{parentName:"p"},"Collection"),", la notation ","[",' ] est utilis\xe9e pour designer toutes les occurrences (par exemple "enfants',"[",' ].age").'),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},'Vous ne pouvez pas utiliser directement des attributs dont les noms contiennent des caract\xe8res sp\xe9ciaux tels que ".", "',"[",' ]", ou "=", ">", "#"..., car ils ne seront pas correctement \xe9valu\xe9s dans la cha\xeene de recherche. Si vous souhaitez rechercher ces attributs, vous devez utiliser des placeholders, qui permettent d\'utiliser un ensemble de caract\xe8res plus \xe9tendu dans les chemins d\'attribut (voir ',(0,n.kt)("em",{parentName:"p"}," ",(0,n.kt)("strong",{parentName:"em"},"Utiliser des placeholders")," "),"ci-dessous)."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"formula")," : Une formule valide pass\xe9e en ",(0,n.kt)("inlineCode",{parentName:"p"},"Text")," ou en ",(0,n.kt)("inlineCode",{parentName:"p"},"Object"),". La formule sera \xe9valu\xe9e pour chaque entit\xe9 trait\xe9e et doit retourner une valeur bool\xe9enne. Dans la formule, l'entit\xe9 est disponible via l'objet ",(0,n.kt)("inlineCode",{parentName:"p"},"This"),"."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Text")," : la chaine de formule doit \xeatre pr\xe9c\xe9d\xe9e de la d\xe9claration ",(0,n.kt)("inlineCode",{parentName:"p"},"eval()"),", afin que l'analyseur de requ\xeates \xe9value l'expression correctement. Par exemple : ",(0,n.kt)("em",{parentName:"p"},'"eval(length(This.lastname) >=30)"'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Object"),": l'",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/FunctionClass"}),"objet formule")," est pass\xe9 en tant que ",(0,n.kt)("strong",{parentName:"p"},"placeholder")," (voir ci-dessous). La formule doit avoir \xe9t\xe9 cr\xe9\xe9e \xe0 l'aide des commandes ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/FunctionClass#formula"}),(0,n.kt)("inlineCode",{parentName:"a"},"Formula"))," ou ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/FunctionClass#formula-from-string"}),(0,n.kt)("inlineCode",{parentName:"a"},"Formula from string")),"."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"Keep in mind that 4D formulas only support ",(0,n.kt)("inlineCode",{parentName:"li"},"&")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"|")," symbols as logical operators.")))),(0,n.kt)("li",{parentName:"ul"},"Si la formule n'est pas le seul crit\xe8re de recherche, le syst\xe8me d'optimisation des requ\xeates pourra prioriser le traitement d'autres crit\xe8res (ex : attributs index\xe9s) et ainsi, la formule sera \xe9valu\xe9e uniquement pour un sous-ensemble d'entit\xe9s."))),(0,n.kt)("p",{parentName:"li"}," Les formules contenues dans les requ\xeates peuvent recevoir des param\xe8tres via $1. Ce point est d\xe9taill\xe9 dans le paragraphe ",(0,n.kt)("strong",{parentName:"p"},"Param\xe8tre formula")," ci-dessous."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"Vous pouvez \xe9galement passer directement un param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"li"},"formula")," au lieu d'un param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"li"},"queryString")," (recommand\xe9 lorsque les formules sont plus complexes). Voir le paragraphe ",(0,n.kt)("strong",{parentName:"li"},"Param\xe8tre formula")," ci-dessous."),(0,n.kt)("li",{parentName:"ul"},"Pour des raisons de s\xe9curit\xe9, les appels de formule dans les fonctions ",(0,n.kt)("inlineCode",{parentName:"li"},"query()")," peuvent \xeatre interdits. Voir la description du param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"li"},"querySettings"),".")))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"comparator")," : symbole d'op\xe9rateur utilis\xe9 pour comparer ",(0,n.kt)("em",{parentName:"p"},"attributePath")," et ",(0,n.kt)("em",{parentName:"p"},"value"),". Les symboles suivants sont pris en charge :"),(0,n.kt)("table",{parentName:"li"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Comparaison"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Symbole(s)"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Egal \xe0"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"=, =="),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Retourne les donn\xe9es correspondantes, prend en charge le joker de recherche (@), ne tient pas compte de la casse et est non diacritique.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"===, IS"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Retourne les donn\xe9es correspondantes, consid\xe8re le @ comme un caract\xe8re standard, ne tient pas compte de la casse et est non diacritique")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Diff\xe9rent de"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"#, !="),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Prend en charge le joker de recherche (@)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"!==, IS NOT"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Consid\xe8re le @ comme un caract\xe8re standard")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Inf\xe9rieur \xe0"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Sup\xe9rieur \xe0"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),">"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Inf\xe9rieur ou \xe9gal \xe0"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<="),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Sup\xe9rieur ou \xe9gal \xe0"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),">="),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Inclus parmi"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"IN"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Retourne les donn\xe9es \xe9gales \xe0 au moins une des valeurs d'une collection ou d'un ensemble de valeurs, prend en charge le joker de recherche (@)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Condition Not appliqu\xe9e \xe0 une assertion"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"NOT"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Les parenth\xe8ses sont obligatoires lorsque NOT est utilis\xe9 devant une assertion contenant plusieurs op\xe9rateurs")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Contient mot-cl\xe9"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"%"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Les mots-cl\xe9s peuvent \xeatre utilis\xe9s avec les attributs de type texte ou image"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"value")," : valeur \xe0 comparer \xe0 la valeur courante de l'attribut de chaque entit\xe9 de la s\xe9lection ou \xe9l\xe9ment de la collection. Peut \xeatre un ",(0,n.kt)("strong",{parentName:"p"},"placeholder")," (voir ",(0,n.kt)("strong",{parentName:"p"},"Utiliser des placeholders")," ci-dessous) ou toute expression correspondant \xe0 la propri\xe9t\xe9 du type de donn\xe9e. Lorsque vous utilisez une valeur constante, les r\xe8gles suivantes doivent \xeatre respect\xe9es :"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Les valeurs constantes de type ",(0,n.kt)("strong",{parentName:"li"},"texte")," peuvent \xeatre pass\xe9es avec ou sans guillemets (voir ",(0,n.kt)("strong",{parentName:"li"},"Utilisation des guillemets"),' ci-dessous). Pour rechercher une cha\xeene dans une cha\xeene (recherche de type "contient"), utilisez le symbole joker (@) dans valeur pour isoler la cha\xeene \xe0 chercher, comme dans cet exemple : "@Smith@". Les mots-cl\xe9s suivants sont interdits pour des constantes de type texte : true, false.'),(0,n.kt)("li",{parentName:"ul"},"Valeurs constantes de type",(0,n.kt)("strong",{parentName:"li"},"bool\xe9en"),": ",(0,n.kt)("strong",{parentName:"li"},"true")," or ",(0,n.kt)("strong",{parentName:"li"},"false")," (sensible \xe0 la casse)."),(0,n.kt)("li",{parentName:"ul"},"Valeurs constantes de type ",(0,n.kt)("strong",{parentName:"li"},"num\xe9rique")," : les d\xe9cimales doivent \xeatre s\xe9par\xe9es par un '.'"),(0,n.kt)("li",{parentName:"ul"},"Constantes de type ",(0,n.kt)("strong",{parentName:"li"},"date"),' : "YYYY-MM-DD" format'),(0,n.kt)("li",{parentName:"ul"},"Constantes ",(0,n.kt)("strong",{parentName:"li"},"null"),' : en utilisant le mot-cl\xe9 "null", la recherche trouvera les propri\xe9t\xe9s ayant la valeur ',(0,n.kt)("strong",{parentName:"li"},"null")," et ",(0,n.kt)("strong",{parentName:"li"},"undefined"),"."),(0,n.kt)("li",{parentName:"ul"},"Dans le cas d'une recherche avec un comparateur IN, ",(0,n.kt)("em",{parentName:"li"},"value"),"doit \xeatre une collection, ou des valeurs du m\xeame type que les donn\xe9es du chemin d'attribut, fournies entre ","["," ] et s\xe9par\xe9es par des virgules (pour les cha\xeenes, les caract\xe8res ",(0,n.kt)("inlineCode",{parentName:"li"},'"')," doivent \xeatre \xe9chapp\xe9s avec des ",(0,n.kt)("inlineCode",{parentName:"li"},"\\"),")."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"logicalOperator")," : utilis\xe9 pour relier des conditions multiples dans la recherche (optionnel). Vous pouvez utiliser un des op\xe9rateurs logiques suivants (le nom ou le symbole peut \xeatre pass\xe9) :"),(0,n.kt)("table",{parentName:"li"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Conjonction"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Symbole(s)"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"AND"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"&, &&, and")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"OU"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"|",",","|","|",", or"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"order by attributePath")," : vous pouvez inclure une d\xe9claration order by ",(0,n.kt)("em",{parentName:"p"},"attributePath")," dans la requ\xeate afin que les donn\xe9es r\xe9sultantes soient tri\xe9es selon cette d\xe9claration. Vous pouvez utiliser plusieurs tris par d\xe9claration, en les s\xe9parant par des virgules (e.g., order by ",(0,n.kt)("em",{parentName:"p"},"attributePath1")," desc, ",(0,n.kt)("em",{parentName:"p"},"attributePath2")," asc). Par d\xe9faut, le tri est par ordre croissant. Passez 'desc' pour d\xe9finir un tri par ordre d\xe9croissant et 'asc' pour d\xe9finir un tri par ordre croissant. >Si vous utilisez cette d\xe9claration, l'entity selection retourn\xe9e est tri\xe9e (pour plus d'informations, veuillez consulter ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/ORDA/dsmapping#entity-selections-triees-vs-entity-selections-non-triees"}),"Entity selections tri\xe9es vs Entity selection non tri\xe9es"),")."))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Utilisation des guillemets")),(0,n.kt)("p",null,"Lorsque vous utilisez des guillemets dans les recherches, vous devez utiliser des apostrophes ' ' \xe0 l'int\xe9rieur des requ\xeates et des guillemets \" \" pour encadrer la recherche compl\xe8te, sinon une erreur est g\xe9n\xe9r\xe9e. Par exemple :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"\"employee.name = 'smith' AND employee.firstname = 'john'\"\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Les guillemets simples (') ne sont pas pris en charge dans les valeurs recherch\xe9es car ils casseraient la cha\xeene de recherche. Par exemple, \"comp.name = 'John's pizza' \" g\xe9n\xe8rera une erreur. Si vous devez rechercher des valeurs contenant des guillemets simples, il est n\xe9cessaire d'utiliser des placeholders (voir ci-dessous).")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Utilisation des parenth\xe8ses")),(0,n.kt)("p",null,"Vous pouvez utiliser des parenth\xe8ses dans la recherche afin de prioriser les calculs. Par exemple, vous pouvez organiser une recherche de la mani\xe8re suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"\"(employee.age >= 30 OR employee.age <= 65) AND (employee.salary <= 10000 OR employee.status = 'Manager')\"\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Utilisation des placeholders")),(0,n.kt)("p",null,"4D vous permet d'utiliser des placeholders pour les arguments ",(0,n.kt)("em",{parentName:"p"},"attributePath"),", ",(0,n.kt)("em",{parentName:"p"},"formula")," et ",(0,n.kt)("em",{parentName:"p"},"value")," dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"queryString"),". Un placeholder est un param\xe8tre que vous ins\xe9rez dans des chaines de recherche et qui est remplac\xe9 par une autre valeur au moment o\xf9 la cha\xeene de recherche est \xe9valu\xe9e. La valeur des placeholders est \xe9valu\xe9e une seule fois, au d\xe9but de la requ\xeate ; elle n'est pas \xe9valu\xe9e pour chaque \xe9l\xe9ment."),(0,n.kt)("p",null,"Il existe deux types de placeholders : les ",(0,n.kt)("strong",{parentName:"p"},"placeholders index\xe9s")," et les ",(0,n.kt)("strong",{parentName:"p"},"placeholders nomm\xe9s")," :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Placeholders index\xe9s"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Placeholders nomm\xe9s"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"D\xe9finition"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"You can mix all argument kinds in ",(0,n.kt)("em",{parentName:"td"},"queryString"),". A ",(0,n.kt)("em",{parentName:"td"},"queryString")," can contain, for ",(0,n.kt)("em",{parentName:"td"},"attributePath"),", ",(0,n.kt)("em",{parentName:"td"},"formula")," and ",(0,n.kt)("em",{parentName:"td"},"value")," parameters:"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Les param\xe8tres sont ins\xe9r\xe9s sous la forme ",(0,n.kt)("inlineCode",{parentName:"td"},":paramName")," (par exemple :myparam) et leurs valeurs sont fournies dans les objets attributes et/ou parameters dans le param\xe8tre ",(0,n.kt)("em",{parentName:"td"},"querySettings"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Exemple"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},'$r:=class.query(":1=:2";"city";"Chicago")')),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},'$o.attributes:=New object("att";"city")'),(0,n.kt)("br",null)," ",(0,n.kt)("inlineCode",{parentName:"td"},'$o.parameters:=New object("name";"Chicago")'),(0,n.kt)("br",null)," ",(0,n.kt)("inlineCode",{parentName:"td"},'$r:=class.query(":att=:name";$o)'))))),(0,n.kt)("p",null,"Vous pouvez combiner tous les types d'arguments dans ",(0,n.kt)("em",{parentName:"p"},"queryString"),". in ",(0,n.kt)("em",{parentName:"p"},"queryString")," and their corresponding values are provided by the sequence of ",(0,n.kt)("em",{parentName:"p"},"value")," parameter(s). You can use up to 128 ",(0,n.kt)("em",{parentName:"p"},"value")," parameters"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"des valeurs directes (pas de placeholders)"),(0,n.kt)("li",{parentName:"ul"},"des placeholders index\xe9s et/ou nomm\xe9s.")),(0,n.kt)("p",null,"L'utilisation de placeholders dans les recherches ",(0,n.kt)("strong",{parentName:"p"},"est recommand\xe9e")," pour les raisons suivantes :"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Cela emp\xeache l'injection de code malveillant : si vous utilisez dans la cha\xeene de recherche des variables dont le contenu provient directement de la saisie de l'utilisateur, celui-ci pourrait modifier les conditions de recherche en saisissant des arguments de recherche suppl\xe9mentaires. Par exemple, imaginez une cha\xeene de recherche du type :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," $vquery:=\"status = 'public' & name = \"+myname //l'utilisateur saisit son nom\n $result:=$col.query($vquery)\n")),(0,n.kt)("p",{parentName:"li"},"Cette recherche semble s\xe9curis\xe9e puisque les donn\xe9es non publiques sont filtr\xe9es. Cependant, si l'utilisateur saisit dans la zone ",(0,n.kt)("em",{parentName:"p"},"myname")," une cha\xeene du type ",(0,n.kt)("em",{parentName:"p"},"\"smith OR status='private'"),", la cha\xeene de recherche sera modifi\xe9e \xe0 l'\xe9tape de l'interpr\xe9tation et pourra retourner des donn\xe9es priv\xe9es."),(0,n.kt)("p",{parentName:"li"},"Lorsque vous utilisez des placeholders, le contournement des options de s\xe9curit\xe9 n'est pas possible :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," $result:=$col.query(\"status='public' & name=:1\";myname)\n")),(0,n.kt)("p",{parentName:"li"},"Dans ce cas, si l'utilisateur saisit ",(0,n.kt)("em",{parentName:"p"},"smith OR status='private'")," dans la zone ",(0,n.kt)("em",{parentName:"p"},"myname"),", cela ne sera pas interpr\xe9t\xe9 dans la cha\xeene de recherche, mais uniquement pass\xe9 en tant que valeur. La recherche d'une personne nomm\xe9e \"smith OR status='private\"' \xe9chouera simplement.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Cela r\xe9sout les questions li\xe9es au formatage des valeurs ou des caract\xe8res, notamment lorsque vous g\xe9rez des param\xe8tres ",(0,n.kt)("em",{parentName:"p"},"attributePath")," et ",(0,n.kt)("em",{parentName:"p"},"value"),' qui peuvent contenir des caract\xe8res non-alphanum\xe9riques tels que ".", "["...')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Cela permet l'utilisation de variables ou d'expressions dans les arguments de recherche. Exemples :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $result:=$col.query("address.city = :1 & name =:2";$city;$myVar+"@")\n$result2:=$col.query("company.name = :1";"John\'s Pizzas")\n')))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Recherche de valeurs null")),(0,n.kt)("p",null,"Lorsque vous recherchez les valeurs null, vous ne pouvez pas utiliser la syntaxe placeholder car le moteur de recherche consid\xe8re la valeur null comme une valeur de comparaison invalide. Par exemple, si vous ex\xe9cutez la recherche suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$vSingles:=ds.Person.query("spouse = :1";Null) // ne fonctionnera PAS\n')),(0,n.kt)("p",null,"Vous n'obtiendrez pas le r\xe9sultat souhait\xe9 car la valeur null sera \xe9valu\xe9e par 4D comme une erreur r\xe9sultant de l'\xe9valuation du param\xe8tre (pouvant \xeatre, par exemple, un attribut provenant d'une autre recherche). Pour ce type de recherches, vous devez utiliser la syntaxe de recherche directe :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $vSingles:=ds.Person.query("spouse = null") //syntaxe valide\n')),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Relier les arguments de recherche aux collections dans les attributs")),(0,n.kt)("admonition",r({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Cette fonctionnalit\xe9 est disponible uniquement pour les recherches dans les dataclasses et les ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/EntitySelectionClass#query"}),"entity selections"),". Elle ne peut pas \xeatre utilis\xe9e pour les recherches dans les ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/CollectionClass#query"}),"collections"),".")),(0,n.kt)("p",null,"Lorsque vous effectuez des recherches parmi des attributs objets de dataclass contenant des collections \xe0 l'aide de plusieurs arguments de requ\xeate reli\xe9s par l'op\xe9rateur AND, vous souhaiterez \xe9ventuellement vous assurer que seules les entit\xe9s contenant des \xe9l\xe9ments correspondant \xe0 tous les arguments soient retourn\xe9es, et non les entit\xe9s o\xf9 des arguments peuvent \xeatre trouv\xe9s dans diff\xe9rents \xe9l\xe9ments. Pour ce faire, vous devez relier les arguments de requ\xeate aux \xe9l\xe9ments de collection, de sorte que seuls les \xe9l\xe9ments uniques contenant des arguments reli\xe9s soient retourn\xe9s."),(0,n.kt)("p",null,"Par exemple, avec les deux entit\xe9s suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{}),'Entity 1:\nds.People.name: "martin"\nds.People.places:\n    { "locations" : [ {\n                "kind":"home",\n                "city":"paris"\n            } ] }\n\nEntity 2:\nds.People.name: "smith"\nds.People.places:\n    { "locations" : [ {\n                "kind":"home",\n                "city":"lyon"\n            } , {\n                "kind":"office",\n                "city":"paris"\n            } ] }\n')),(0,n.kt)("p",null,'Vous souhaitez trouver des personnes dont le type d\'emplacement est "home" dans la ville de "paris". Si vous \xe9crivez :'),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'ds.People.query("places.locations[].kind= :1 and places.locations[].city= :2";"home";"paris")\n')),(0,n.kt)("p",null,'... la requ\xeate retournera "martin" ',(0,n.kt)("strong",{parentName:"p"},"et"),' "smith" car "smith" a un \xe9l\xe9ment "locations" dont "kind" (le type) est "home" et un \xe9l\xe9ment "locations" dont "city" (la ville) est "paris", m\xeame si ce sont des \xe9l\xe9ments diff\xe9rents.'),(0,n.kt)("p",null,"Si vous souhaitez obtenir uniquement les entit\xe9s dont les arguments correspondants sont dans le m\xeame \xe9l\xe9ment de collection, vous devez ",(0,n.kt)("strong",{parentName:"p"},"relier les arguments"),". Pour lier des arguments de requ\xeate :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Ajoutez une lettre entre le caract\xe8re ","[","] dans le premier chemin \xe0 lier et r\xe9p\xe9tez la m\xeame lettre dans tous les arguments li\xe9s. Par exemple : ",(0,n.kt)("inlineCode",{parentName:"li"},"locations[a].city and locations[a].kind"),". Vous pouvez utiliser n'importe quelle lettre de l'alphabet latin (non sensible \xe0 la casse)."),(0,n.kt)("li",{parentName:"ul"},"Pour ajouter diff\xe9rents crit\xe8res li\xe9s dans la m\xeame requ\xeate, utilisez une autre lettre. Vous pouvez cr\xe9er jusqu'\xe0 26 combinaisons de crit\xe8res dans une seule requ\xeate.")),(0,n.kt)("p",null,"A l'aide des entit\xe9s ci-dessus, si vous \xe9crivez :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'ds.People.query("places.locations[a].kind= :1 and places.locations[a].city= :2";"home";"paris")\n')),(0,n.kt)("p",null,'... la requ\xeate ne retournera uniquement "martin" car il poss\xe8de un \xe9l\xe9ment "locations" dont "kind" est "home" et dont "city" est "paris". La requ\xeate ne retournera pas "smith" car les valeurs "home" et "paris" ne sont pas contenus dans le m\xeame \xe9l\xe9ment de collection.'),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Recherches dans les relations N vers N")),(0,n.kt)("p",null,"ORDA propose une syntaxe sp\xe9ciale pour faciliter les recherches dans les relations N vers N. Dans ce contexte, vous pouvez avoir besoin de rechercher des valeurs diff\xe9rentes \xe0 l'aide de l'op\xe9rateur ",(0,n.kt)("inlineCode",{parentName:"p"},"AND")," MAIS dans le m\xeame attribut. Par exemple, consid\xe9rez la structure suivante :"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"alt-text",src:a(17115).Z,width:"537",height:"268"})),(0,n.kt)("p",null,"Imaginez que vous souhaitiez rechercher tous les films dans lesquels un acteur A ",(0,n.kt)("em",{parentName:"p"},"Et")," un acteur B ont jou\xe9 un r\xf4le. Si vous \xe9crivez une recherche simple utilisant l'op\xe9rateur ",(0,n.kt)("inlineCode",{parentName:"p"},"AND"),", cela ne va pas fonctionner :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'// code invalide\n$es:=ds.Movie.query("roles.actor.lastName = :1 AND roles.actor.lastName = :2";"Hanks";"Ryan")  \n// $es est vide\n')),(0,n.kt)("p",null,'Fondamentalement, le probl\xe8me vient de la logique interne de la recherche : vous ne pouvez pas rechercher une entit\xe9 dont un attribut aurait simultan\xe9ment la valeur "A" et "B".'),(0,n.kt)("p",null,"Pour rendre possible ce type de recheche, ORDA prend en charge une syntaxe sp\xe9ciale : vous devez juste ajouter un ",(0,n.kt)("em",{parentName:"p"},"class index")," entre les caract\xe8res ",(0,n.kt)("strong",{parentName:"p"},"{}")," dans tous les attributs relationnels utilis\xe9s dans la cha\xeene de recherche :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'"relationAttribute.attribute = :1 AND relationAttribute{x}.attribute = :2 [AND relationAttribute{y}.attribute...]"\n')),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"{x}")," indique \xe0 ORDA de cr\xe9er une autre r\xe9f\xe9rence pour l'attribut relationnel. Le moteur de requ\xeates effectuera alors toutes les op\xe9rations internes n\xe9cessaires. Notez que ",(0,n.kt)("strong",{parentName:"p"},"x")," peut \xeatre n'importe quel nombre ",(0,n.kt)("strong",{parentName:"p"},"\xe0 l'exception de 0"),": {1}, ou {2}, ou {1540}... ORDA a simplement besoin d'une r\xe9f\xe9rence unique dans la recherche pour chaque class index."),(0,n.kt)("p",null,"Dans notre exemple, cela pourrait donner :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'// code valide\n$es:=ds.Movie.query("roles.actor.lastName = :1 AND roles.actor{2}.lastName = :2";"Hanks";"Ryan")  \n// $es contient des films (You\'ve Got Mail, Sleepless in Seattle, Joe Versus the Volcano)\n')),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Param\xe8tre formula")),(0,n.kt)("p",null,"Au lieu d'ins\xe9rer une formule dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"queryString")," (voir ci-dessus), vous pouvez directement passer un objet formule en tant que crit\xe8re de recherche bool\xe9en. L'utilisation d'un objet formule pour les requ\xeates est ",(0,n.kt)("strong",{parentName:"p"},"recommand\xe9e")," car vous b\xe9n\xe9ficiez d'une tokenisation et le code est plus facile \xe0 rechercher/lire."),(0,n.kt)("p",null,"La formule doit avoir \xe9t\xe9 cr\xe9\xe9e \xe0 l'aide des commandes ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/FunctionClass#formula"}),(0,n.kt)("inlineCode",{parentName:"a"},"Formula"))," ou ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/FunctionClass#formula-from-string"}),(0,n.kt)("inlineCode",{parentName:"a"},"Formula from string")),". Dans ce cas :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"formula")," est \xe9valu\xe9e pour chaque entit\xe9 et doit renvoyer vrai ou faux. Lors de l'ex\xe9cution de la requ\xeate, si le r\xe9sultat de la formule n'est pas un bool\xe9en, il est consid\xe9r\xe9 comme faux."),(0,n.kt)("li",{parentName:"ul"},"dans ",(0,n.kt)("em",{parentName:"li"},"formula"),", l'entit\xe9 est disponible via l'objet ",(0,n.kt)("inlineCode",{parentName:"li"},"This"),"."),(0,n.kt)("li",{parentName:"ul"},"si l'objet ",(0,n.kt)("inlineCode",{parentName:"li"},"Formula")," est ",(0,n.kt)("strong",{parentName:"li"},"null"),", l'erreur 1626 (\"Attente d'un texte ou d'une formule\") est g\xe9n\xe9r\xe9e, que vous pouvez intercepter \xe0 l'aide d'une m\xe9thode install\xe9e avec ",(0,n.kt)("inlineCode",{parentName:"li"},"ON ERR CALL"),".",(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Pour des raisons de s\xe9curit\xe9, les appels de formule dans les fonctions ",(0,n.kt)("inlineCode",{parentName:"p"},"query()")," peuvent \xeatre interdits. Voir la description du param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"querySettings"),".")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Passer des param\xe8tres aux formules")),(0,n.kt)("p",null,"Tout param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"formula")," appel\xe9 par la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"query()")," peut recevoir des param\xe8tres :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Les param\xe8tres doivent \xeatre pass\xe9s via la propri\xe9t\xe9 ",(0,n.kt)("strong",{parentName:"li"},"args")," du param\xe8tre ",(0,n.kt)("em",{parentName:"li"},"querySettings"),"."),(0,n.kt)("li",{parentName:"ul"},"La formule re\xe7oit cet objet ",(0,n.kt)("strong",{parentName:"li"},"args")," en tant que param\xe8tre ",(0,n.kt)("strong",{parentName:"li"},"$1"),".")),(0,n.kt)("p",null,"Ce code montre comment les param\xe8tres sont pass\xe9s aux fonctions :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $settings:=New object("args";New object("exclude";"-")) //objet args pour passer des param\xe8tres\n $es:=ds.Students.query("eval(checkName($1.exclude))";$settings) //args est re\xe7u dans $1\n')),(0,n.kt)("p",null,"Des exemples suppl\xe9mentaires sont fournis dans l'exemple 3."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"4D Server")," : En client/serveur, les formules sont ex\xe9cut\xe9es sur le serveur. Dans ce contexte, seul l'objet ",(0,n.kt)("inlineCode",{parentName:"p"},"querySettings.args")," est envoy\xe9 aux formules."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Param\xe8tre querySettings")),(0,n.kt)("p",null,"Dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"querySettings")," vous pouvez passer un objet contenant des options suppl\xe9mentaires. Les propri\xe9t\xe9s suivantes sont prises en charge :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"parameters"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"Placeholders nomm\xe9s pour les valeurs")," utilis\xe9es dans ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"formula"),". Les valeurs sont exprim\xe9es sous forme de paires propri\xe9t\xe9 / valeur, o\xf9 propri\xe9t\xe9 est le nom du placeholder ins\xe9r\xe9 pour une valeur dans ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"formula"),' (":placeholder") et o\xf9 valeur correspond \xe0 la valeur \xe0 comparer. Vous pouvez combiner, dans une m\xeame recherche, des placeholders index\xe9s (valeurs pass\xe9es directement dans les param\xe8tres ',(0,n.kt)("em",{parentName:"td"},"value"),") et les valeurs des placeholders nomm\xe9s.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributes"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"Placeholders nomm\xe9s pour les chemins d'attributs")," utilis\xe9s dans ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"formula"),". Les attributs sont exprim\xe9s sous forme de paires propri\xe9t\xe9 / valeur, o\xf9 propri\xe9t\xe9 est le nom du placeholder ins\xe9r\xe9 pour un chemin d'attribut dans ",(0,n.kt)("em",{parentName:"td"},"queryString")," or ",(0,n.kt)("em",{parentName:"td"},"formula"),' (":placeholder"), et o\xf9 valeur peut \xeatre une chaine ou une collection de chaines. Chaque valeur est un chemin qui peut d\xe9signer soit un attribut scalaire ou relatif de la dataclass soit une propri\xe9t\xe9 d\'un champ objet de la dataclass',(0,n.kt)("table",null,(0,n.kt)("tr",null,(0,n.kt)("th",null,"Type"),(0,n.kt)("th",null,"Description")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"String"),(0,n.kt)("td",null,'attributePath exprim\xe9 \xe0 l\'aide de la notation \xe0 point, ex : "name" ou "user.address.zipCode"')),(0,n.kt)("tr",null,(0,n.kt)("td",null,"Collection de cha\xeenes"),(0,n.kt)("td",null,"Chaque chaine de la collection repr\xe9sente un niveau d'attributePath, ex : ","[",'"name"] ou ',"[",'"user","address","zipCode"]. L\'utilisation d\'une collection permet de rechercher des attributs dont les noms ne sont pas conformes \xe0 la notation \xe0 point, ex : ','["4Dv17.1","en/fr"]'))),"Vous pouvez combiner les valeurs des placeholders index\xe9s (valeurs pass\xe9es directement dans les param\xe8tres ",(0,n.kt)("em",{parentName:"td"},"value"),") et les valeurs des placeholders nomm\xe9s dans la m\xeame recherche.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"args"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Param\xe8tre(s) \xe0 passer aux formules, le cas \xe9ch\xe9ant. L'objet ",(0,n.kt)("strong",{parentName:"td"},"args")," sera re\xe7u dans $1 \xe0 l'int\xe9rieur des formules et donc ses valeurs seront disponibles via la propri\xe9t\xe9 ",(0,n.kt)("em",{parentName:"td"},"$1.property")," (cf. exemple 3).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"allowFormulas"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai pour autoriser les appels de formules dans la query (d\xe9faut). Passez faux pour interdire l'ex\xe9cution de formules. Si la ",(0,n.kt)("inlineCode",{parentName:"td"},"query()")," contient une formule alors que cette propri\xe9t\xe9 est \xe0 Faux, une erreur est retourn\xe9e (1278 - Formule non autoris\xe9e).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"context"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom du contexte d'optimisation automatique appliqu\xe9 \xe0 l'entity selection. Ce contexte sera utilis\xe9 par le code qui manipule l'entity selection afin de b\xe9n\xe9ficier de l'optimisation. Cette fonctionnalit\xe9 est con\xe7ue pour le traitement client/serveur ; pour plus d'informations, veuillez vous reporter \xe0 la section ",(0,n.kt)("strong",{parentName:"td"},"Optimisation client/serveur"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"queryPlan"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Dans l'entity selection r\xe9sultante, retourne ou ne retourne la description d\xe9taill\xe9e de la recherche juste avant d'\xeatre ex\xe9cut\xe9e, i.e. La propri\xe9t\xe9 retourn\xe9e est un objet qui inclut chaque recherche et sous-recherche programm\xe9e (dans le cas d'une recherche complexe). Cette option est utile durant la phase de d\xe9veloppement d'une application. Elle est utilis\xe9e conjointement \xe0 queryPath. Par d\xe9faut, si elle est omise : faux. ",(0,n.kt)("strong",{parentName:"td"},"Note")," : Cette propri\xe9t\xe9 est prise en charge uniquement par les fonctions ",(0,n.kt)("inlineCode",{parentName:"td"},"entitySelection.query()")," et ",(0,n.kt)("inlineCode",{parentName:"td"},"dataClass.query()"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"queryPath"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Dans l'entity selection r\xe9sultante, retourne ou ne retourne pas la description d\xe9taill\xe9e de la recherche telle qu'elle est effectu\xe9e. La propri\xe9t\xe9 retourn\xe9e est un objet qui contient le chemin utilis\xe9 pour la recherche (g\xe9n\xe9ralement identique \xe0 celui de queryPlan, mais il peut \xeatre diff\xe9rent si le moteur parvient \xe0 optimiser la recherche), la dur\xe9e du traitement et le nombre d'enregistrements trouv\xe9s. Cette option est utile durant la phase de d\xe9veloppement d'une application. Par d\xe9faut, si elle est omise : faux. ",(0,n.kt)("strong",{parentName:"td"},"Note")," : Cette propri\xe9t\xe9 est prise en charge uniquement par les fonctions ",(0,n.kt)("inlineCode",{parentName:"td"},"entitySelection.query()")," et ",(0,n.kt)("inlineCode",{parentName:"td"},"dataClass.query()"),".")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"A propos de queryPlan et queryPath")),(0,n.kt)("p",null,"Les informations enregistr\xe9es dans ",(0,n.kt)("inlineCode",{parentName:"p"},"queryPlan")," et ",(0,n.kt)("inlineCode",{parentName:"p"},"queryPath")," incluent le type de recherche (index\xe9e ou s\xe9quentielle), chaque sous-recherche n\xe9cessaire, ainsi que les op\xe9rateurs de conjonction. Les chemins d'acc\xe8s des requ\xeates contiennent \xe9galement le nombre d'entit\xe9s identifi\xe9es et la dur\xe9e d'ex\xe9cution de chaque crit\xe8re de recherche. Les chemins d'acc\xe8s des requ\xeates contiennent \xe9galement le nombre d'entit\xe9s identifi\xe9es et la dur\xe9e d'ex\xe9cution de chaque crit\xe8re de recherche. G\xe9n\xe9ralement, la description du plan de requ\xeate et son chemin d'acc\xe8s sont identiques mais ils peuvent diff\xe9rer car 4D peut int\xe9grer des optimisations dynamiques lorsqu'une requ\xeate est ex\xe9cut\xe9e, afin d'am\xe9liorer les performances. Par exemple, le moteur 4D peut convertir dynamiquement une requ\xeate index\xe9e en requ\xeate s\xe9quentielle s'il estime que ce processus est plus rapide. Ce cas particulier peut se produire lorsque le nombre d'entit\xe9s recherch\xe9es est faible."),(0,n.kt)("p",null,"Par exemple, si vous ex\xe9cutez la recherche suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $sel:=ds.Employee.query("salary < :1 and employer.name = :2 or employer.revenues > :3";\\  \n 50000;"Lima West Kilo";10000000;New object("queryPath";True;"queryPlan";True))\n')),(0,n.kt)("p",null,"queryPlan :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"{Or:[{And:[{item:[index : Employee.salary ] < 50000},  \n {item:Join on Table : Company  :  Employee.employerID = Company.ID,  \n subquery:[{item:[index : Company.name ] = Lima West Kilo}]}]},  \n {item:Join on Table : Company  :  Employee.employerID = Company.ID,  \n subquery:[{item:[index : Company.revenues ] > 10000000}]}]}\n")),(0,n.kt)("p",null,"queryPath :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"{steps:[{description:OR,time:63,recordsfounds:1388132,  \n steps:[{description:AND,time:32,recordsfounds:131,  \n steps:[{description:[index : Employee.salary ] < 50000,time:16,recordsfounds:728260},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:0,recordsfounds:131,  \n steps:[{steps:[{description:[index : Company.name ] = Lima West Kilo,time:0,recordsfounds:1}]}]}]},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:31,recordsfounds:1388132,  \n steps:[{steps:[{description:[index : Company.revenues ] > 10000000,time:0,recordsfounds:933}]}]}]}]}\n")),(0,n.kt)("h4",r({},{id:"exemple-1-4"}),"Exemple 1"),(0,n.kt)("p",null,"Cette section fournit divers exemples de recherches."),(0,n.kt)("p",null,"Recherche dans une cha\xeene :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"$entitySelection:=ds.Customer.query(\"firstName = 'S@'\")\n")),(0,n.kt)("p",null,"Recherche avec une instruction NOT :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("not(firstName=Kim)")\n')),(0,n.kt)("p",null,"Recherche avec des dates :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("birthDate > :1";"1970-01-01")\n$entitySelection:=ds.Employee.query("birthDate <= :1";Current date-10950)\n')),(0,n.kt)("p",null,"Recherche avec des placeholders index\xe9s pour les valeurs :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Customer.query("(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)";"D@";"R@";"S@";"K@")\n')),(0,n.kt)("p",null,"Recherche avec des placeholders index\xe9s pour les valeurs sur une dataclass li\xe9e :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("lastName = :1 and manager.lastName = :2";"M@";"S@")\n')),(0,n.kt)("p",null,"Recherche avec des placeholders index\xe9s avec tri d\xe9croissant :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Student.query("nationality = :1 order by campus.name desc, lastname";"French")\n')),(0,n.kt)("p",null,"Recherche avec des placeholders nomm\xe9s pour les valeurs :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $querySettings : Object\nvar $managedCustomers : cs.CustomerSelection\n$querySettings:=New object\n$querySettings.parameters:=New object("userId";1234;"extraInfo";New object("name";"Smith"))\n$managedCustomers:=ds.Customer.query("salesperson.userId = :userId and name = :extraInfo.name";$querySettings)\n')),(0,n.kt)("p",null,"Recherche utilisant les placeholders nomm\xe9s et index\xe9s pour les valeurs :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $querySettings : Object\nvar $managedCustomers : cs.CustomerSelection\n$querySettings.parameters:=New object("userId";1234)\n$managedCustomers:=ds.Customer.query("salesperson.userId = :userId and name=:1";"Smith";$querySettings)\n')),(0,n.kt)("p",null,"Recherche avec objets queryPlan et queryPath :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)";"D@";"R@";"S@";"K@";New object("queryPlan";True;"queryPath";True))\n\n  //vous pouvez ensuite obtenir ces propri\xe9t\xe9s dans la s\xe9lection d\'entit\xe9 r\xe9sultante\nvar $queryPlan; $queryPath : Object\n$queryPlan:=$entitySelection.queryPlan\n$queryPath:=$entitySelection.queryPath\n')),(0,n.kt)("p",null,"Recherche avec un chemin d'attribut de type Collection :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("extraInfo.hobbies[].name = :1";"horsebackriding")\n')),(0,n.kt)("p",null,"Recherche avec un chemin d'attribut de type Collection et des attributs reli\xe9s :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("extraInfo.hobbies[a].name = :1 and extraInfo.hobbies[a].level=:2";"horsebackriding";2)\n')),(0,n.kt)("p",null,"Recherche avec un chemin d'attribut de type Collection et plusieurs attributs reli\xe9s :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("extraInfo.hobbies[a].name = :1 and\n extraInfo.hobbies[a].level = :2 and extraInfo.hobbies[b].name = :3 and\n extraInfo.hobbies[b].level = :4";"horsebackriding";2;"Tennis";5)\n')),(0,n.kt)("p",null,"Recherche avec un chemin d'attribut de type Objet :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("extra.eyeColor = :1";"blue")\n')),(0,n.kt)("p",null,"Recherche avec instruction IN :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("firstName in :1";New collection("Kim";"Dixie"))\n')),(0,n.kt)("p",null,"Recherche avec instruction NOT (IN) :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds.Employee.query("not (firstName in :1)";New collection("John";"Jane"))\n')),(0,n.kt)("p",null,"Recherche avec des placeholders index\xe9s pour les attributs :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $es : cs.EmployeeSelection\n$es:=ds.Employee.query(":1 = 1234 and :2 = \'Smith\'";"salesperson.userId";"name")\n  //salesperson est une entit\xe9 reli\xe9e\n')),(0,n.kt)("p",null,"Recherche avec des placeholders index\xe9s pour les attributs et avec des placeholders nomm\xe9s pour les valeurs :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $es : cs.EmployeeSelection\nvar $querySettings : Object\n$querySettings:=New object\n$querySettings.parameters:=New object("customerName";"Smith")\n$es:=ds.Customer.query(":1 = 1234 and :2 = :customerName";"salesperson.userId";"name";$querySettings)\n  //salesperson est une entit\xe9 reli\xe9e\n')),(0,n.kt)("p",null,"Recherche avec des placeholders index\xe9s pour les attributs et les valeurs :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $es : cs.EmployeeSelection\n$es:=ds.Clients.query(":1 = 1234 and :2 = :3";"salesperson.userId";"name";"Smith")\n  //salesperson est une entit\xe9 reli\xe9e\n')),(0,n.kt)("h4",r({},{id:"exemple-2-4"}),"Exemple 2"),(0,n.kt)("p",null,"Cette section illustre les recherches avec des placeholders nomm\xe9s pour les attributs."),(0,n.kt)("p",null,"Consid\xe9rons une dataclass Employee avec 2 entit\xe9s :"),(0,n.kt)("p",null,"Entit\xe9 1 :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'name: "Marie"\nnumber: 46\nsoftwares:{\n"Word 10.2": "Installed",\n"Excel 11.3": "To be upgraded",\n"Powerpoint 12.4": "Not installed"\n}\n')),(0,n.kt)("p",null,"Entit\xe9 2 :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'name: "Sophie"\nnumber: 47\nsoftwares:{\n"Word 10.2": "Not installed",\n"Excel 11.3": "To be upgraded",\n"Powerpoint 12.4": "Not installed"\n}\n')),(0,n.kt)("p",null,"Recherche avec des placeholders nomm\xe9s pour les attributs :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $querySettings : Object\n var $es : cs.EmployeeSelection\n $querySettings:=New object\n $querySettings.attributes:=New object("attName";"name";"attWord";New collection("softwares";"Word 10.2"))\n $es:=ds.Employee.query(":attName = \'Marie\' and :attWord = \'Installed\'";$querySettings)\n  //$es.length=1 (Employee Marie)\n')),(0,n.kt)("p",null,"Recherche avec des placeholders nomm\xe9s pour les attributs et les valeurs :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $querySettings : Object\n var $es : cs.EmployeeSelection\n var $name : Text\n $querySettings:=New object\n  //Placeholders pour les valeurs\n  //Il est demand\xe9 \xe0 l\'utilisateur de saisir un nom\n $name:=Request("Veuillez saisir un nom \xe0 rechercher :")\n If(OK=1)\n    $querySettings.parameters:=New object("givenName";$name)\n  //Placeholders pour les chemins d\'attributs\n    $querySettings.attributes:=New object("attName";"name")\n    $es:=ds.Employee.query(":attName= :givenName";$querySettings)\n End if\n')),(0,n.kt)("h4",r({},{id:"exemple-3-3"}),"Exemple 3"),(0,n.kt)("p",null,"Ces exemples illustrent les diverses mani\xe8res d'utiliser des formules avec ou sans param\xe8tres dans vos recherches."),(0,n.kt)("p",null,"La formule est fournie sous forme de texte avec ",(0,n.kt)("inlineCode",{parentName:"p"},"eval()")," dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"queryString")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $es : cs.StudentsSelection\n $es:=ds.Students.query(\"eval(length(This.lastname) >=30) and nationality='French'\")\n")),(0,n.kt)("p",null,"La formule est fournie sout forme d'objet ",(0,n.kt)("inlineCode",{parentName:"p"},"Formula")," via un placeholder :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $es : cs.StudentsSelection\n var $formula : Object\n $formula:=Formula(Length(This.lastname)>=30)\n $es:=ds.Students.query(\":1 and nationality='French'\";$formula)\n")),(0,n.kt)("p",null,"Seul un objet ",(0,n.kt)("inlineCode",{parentName:"p"},"Formula")," est fourni comme crit\xe8re de recherche :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $es : cs.StudentsSelection\n var $formula : Object\n $formula:=Formula(Length(This.lastname)>=30)\n $es:=ds.Students.query($formula)\n")),(0,n.kt)("p",null,"Plusieurs formules peuvent \xeatre appliqu\xe9es :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $formula1; $1; $formula2 ;$0 : Object\n $formula1:=$1\n $formula2:=Formula(Length(This.firstname)>=30)\n $0:=ds.Students.query(\":1 and :2 and nationality='French'\";$formula1;$formula2)\n")),(0,n.kt)("p",null,"Une formule texte dans ",(0,n.kt)("em",{parentName:"p"},"queryString")," re\xe7oit un param\xe8tre :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs.StudentsSelection\n var $settings : Object\n $settings:=New object()\n $settings.args:=New object("filter";"-")\n $es:=ds.Students.query("eval(checkName($1.filter)) and nationality=:1";"French";$settings)\n')),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"  //m\xe9thode checkName \n #DECLARE($exclude : Text) -> $result : Boolean\n $result:=(Position($exclude;This.lastname)=0)\n")),(0,n.kt)("p",null,"En utilisant la m\xeame m\xe9thode ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"checkName")),", un objet ",(0,n.kt)("inlineCode",{parentName:"p"},"Formula")," en placeholder re\xe7oit un param\xe8tre :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs.StudentsSelection\n var $settings; $formula : Object\n $formula:=Formula(checkName($1.filter))\n $settings:=New object()\n $settings.args:=New object("filter";"-")\n $es:=ds.Students.query(":1 and nationality=:2";$formula;"French";$settings)\n $settings.args.filter:="*" // modifie les param\xe8tres sans mettre \xe0 jour l\'objet $formula \n $es:=ds.Students.query(":1 and nationality=:2";$formula;"French";$settings)\n')),(0,n.kt)("p",null,"Nous voulons interdire les formules, par exemple lorsque les utilisateurs saisissent leurs requ\xeates :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs.StudentsSelection\n var $settings : Object\n var $queryString : Text\n $queryString:=Request("Enter your query:")\n if(OK=1)\n    $settings:=New object("allowFormulas";False)\n    $es:=ds.Students.query($queryString;$settings) //Une erreur est gn\xe9r\xe9e si $queryString contient une formule\n End if\n')),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-3"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/API/EntitySelectionClass#query"}),(0,n.kt)("inlineCode",{parentName:"a"},".query()"))," pour les entity selections"),(0,n.kt)("h2",r({},{id:"setremotecachesettings"}),".setRemoteCacheSettings()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".setRemoteCacheSettings"),"(",(0,n.kt)("em",{parentName:"p"},"settings")," : Object) "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"settings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objet d\xe9finissant le timeout et la taille maximum du cache ORDA pour la dataclass.")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Mode avanc\xe9 :")," Cette fonction est destin\xe9e aux d\xe9veloppeurs qui souhaitent personnaliser les fonctionnalit\xe9s par d\xe9faut de ORDA dans le cadre de configurations sp\xe9cifiques. Dans la plupart des cas, vous n'aurez pas besoin de l'utiliser.")),(0,n.kt)("h4",r({},{id:"description-12"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"setRemoteCacheSettings()")," d\xe9finit le timeout et la taille maximum du cache ORDA pour la dataclass.."),(0,n.kt)("p",null,"Dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"settings"),", passez un objet contenant les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"timeout"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Timeout en secondes.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"maxEntries"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nombre maximum d'entit\xe9s.")))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"timeout")," d\xe9finit le timeout du cache ORDA pour la dataclass (30 secondes par d\xe9faut). Lorsque le timeout est atteint, les entit\xe9s de la dataclass dans le cache sont consid\xe9r\xe9es comme expir\xe9es. Cela signifie que :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"les donn\xe9es sont toujours pr\xe9sentes"),(0,n.kt)("li",{parentName:"ul"},"la prochaine fois que les donn\xe9es seront requises, elles seront demand\xe9es au serveur"),(0,n.kt)("li",{parentName:"ul"},"4D supprime automatiquement les donn\xe9es expir\xe9es lorsque le nombre maximum d'entit\xe9s est atteint")),(0,n.kt)("p",null,"Modifier la propri\xe9t\xe9 ",(0,n.kt)("inlineCode",{parentName:"p"},"timeout")," d\xe9finit un nouveau timeout pour les entit\xe9s d\xe9j\xe0 pr\xe9sentes dans le cache. Cela peut \xeatre utile lorsque vous travaillez avec des donn\xe9es qui ne changent pas souvent, et pour lesquelles de nouvelles requ\xeates au serveur ne sont donc pas n\xe9cessaires."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"maxEntries")," d\xe9finit le nombre maximum d'entit\xe9s dans le cache ORDA. Par d\xe9faut ce nombre est 30 000."),(0,n.kt)("p",null,"Le nombre d'entr\xe9es minimum est 300, donc la valeur de ",(0,n.kt)("inlineCode",{parentName:"p"},"maxEntries")," doit \xeatre \xe9gale ou sup\xe9rieure \xe0 300. Sinon la valeur est ignor\xe9e et le nombre d'entr\xe9es maximum est fix\xe9 \xe0 300."),(0,n.kt)("p",null,"Si aucune propri\xe9t\xe9 valide n'est pass\xe9e \xe0 ",(0,n.kt)("inlineCode",{parentName:"p"},"timeout")," et ",(0,n.kt)("inlineCode",{parentName:"p"},"maxEntries"),", le cache n'est pas modifi\xe9, il conserve ses valeurs pr\xe9c\xe9dentes ou par d\xe9faut."),(0,n.kt)("p",null,"Lorsqu'une entit\xe9 est sauvegard\xe9e, elle est mise \xe0 jour dans le cache expirera lorsque le timeout sera atteint."),(0,n.kt)("h4",r({},{id:"exemple-12"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$ds.Buildings.setRemoteCacheSettings(New object("timeout"; 60; "maxEntries"; 350))\n')),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-4"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#clearremotecache"}),".clearRemoteCache()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearremotecache"}),".getRemoteCache()")))}d.isMDXComponent=!0},31078:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute-a6b39462dc310d6f9b5816409d863cee.png"},55842:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute2-815959fd721b6dd175aaa338e04c2f38.png"},17115:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/manytomany-1ad2ed56ebdb101476120ab419c1994d.png"}}]);