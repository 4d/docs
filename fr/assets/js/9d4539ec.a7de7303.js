"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9948],{603905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var n=a(667294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=p(a),k=r,c=m["".concat(s,".").concat(k)]||m[k]||d[k]||l;return a?n.createElement(c,o(o({ref:t},u),{},{components:a})):n.createElement(c,o({ref:t},u))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},784077:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>u});a(667294);var n=a(603905);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const o={id:"DataStoreClass",title:"DataStore"},i=void 0,s={unversionedId:"API/DataStoreClass",id:"version-20-R4/API/DataStoreClass",title:"DataStore",description:"Un Datastore correspond \xe0 l'objet d'interface fourni par ORDA pour r\xe9f\xe9rencer et acc\xe9der \xe0 une base de donn\xe9es. Les objets Datastore sont retourn\xe9s par les commandes suivantes :",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R4/API/DataStoreClass.md",sourceDirName:"API",slug:"/API/DataStoreClass",permalink:"/docs/fr/20-R4/API/DataStoreClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FDataStoreClass.md%20(20-R4)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R4",frontMatter:{id:"DataStoreClass",title:"DataStore"},sidebar:"docs",previous:{title:"DataClass",permalink:"/docs/fr/20-R4/API/DataClassClass"},next:{title:"Email",permalink:"/docs/fr/20-R4/API/EmailObjectClass"}},p={},u=[{value:"Sommaire",id:"sommaire",level:3},{value:"ds",id:"ds",level:2},{value:"Description",id:"description",level:4},{value:"Exemple 1",id:"exemple-1",level:4},{value:"Exemple 2",id:"exemple-2",level:4},{value:"Open datastore",id:"open-datastore",level:2},{value:"Description",id:"description-1",level:4},{value:"Exemple 1",id:"exemple-1-1",level:4},{value:"Exemple 2",id:"exemple-2-1",level:4},{value:"Exemple 3",id:"exemple-3",level:4},{value:"Gestion des erreurs",id:"gestion-des-erreurs",level:4},{value:"<em>.dataclassName</em>",id:"dataclassname",level:2},{value:"Description",id:"description-2",level:4},{value:"Exemple",id:"exemple",level:4},{value:".cancelTransaction()",id:"canceltransaction",level:2},{value:"Description",id:"description-3",level:4},{value:"Exemple",id:"exemple-4",level:4},{value:".clearAllRemoteContexts()",id:"clearallremotecontexts",level:2},{value:"Description",id:"description-4",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement",level:4},{value:".encryptionStatus()",id:"encryptionstatus",level:2},{value:"Description",id:"description-5",level:4},{value:"Exemple",id:"exemple-5",level:4},{value:".flushAndLock()",id:"flushandlock",level:2},{value:"Description",id:"description-6",level:4},{value:"Exemple",id:"exemple-6",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-1",level:4},{value:".getAllRemoteContexts()",id:"getallremotecontexts",level:2},{value:"Description",id:"description-7",level:4},{value:"Exemple",id:"exemple-7",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-2",level:4},{value:".getGlobalStamp()",id:"getglobalstamp",level:2},{value:"Description",id:"description-8",level:4},{value:"Exemple",id:"exemple-8",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-3",level:4},{value:".getInfo()",id:"getinfo",level:2},{value:"Description",id:"description-9",level:4},{value:"Exemple 1",id:"exemple-1-2",level:4},{value:"Exemple 2",id:"exemple-2-2",level:4},{value:".getRemoteContextInfo()",id:"getremotecontextinfo",level:2},{value:"Description",id:"description-10",level:4},{value:"Objet retourn\xe9",id:"objet-retourn\xe9",level:4},{value:"Exemple",id:"exemple-9",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-4",level:4},{value:".getRequestLog()",id:"getrequestlog",level:2},{value:"Description",id:"description-11",level:4},{value:"Exemple",id:"exemple-10",level:4},{value:".isAdminProtected()",id:"isadminprotected",level:2},{value:"Description",id:"description-12",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-5",level:4},{value:".locked()",id:"locked",level:2},{value:"Description",id:"description-13",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-6",level:4},{value:".makeSelectionsAlterable()",id:"makeselectionsalterable",level:2},{value:"Description",id:"description-14",level:4},{value:".provideDataKey()",id:"providedatakey",level:2},{value:"Description",id:"description-15",level:4},{value:"Exemple",id:"exemple-11",level:4},{value:".setAdminProtection()",id:"setadminprotection",level:2},{value:"Description",id:"description-16",level:4},{value:"Exemple",id:"exemple-12",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-7",level:4},{value:".setGlobalStamp()",id:"setglobalstamp",level:2},{value:"Description",id:"description-17",level:4},{value:"Exemple",id:"exemple-13",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-8",level:4},{value:".setRemoteContextInfo()",id:"setremotecontextinfo",level:2},{value:"Description",id:"description-18",level:4},{value:"Exemple 1",id:"exemple-1-3",level:4},{value:"Exemple 2",id:"exemple-2-3",level:4},{value:"Example 3 - Listbox",id:"example-3---listbox",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-9",level:4},{value:".startRequestLog()",id:"startrequestlog",level:2},{value:"Description",id:"description-19",level:4},{value:"C\xf4t\xe9 client",id:"c\xf4t\xe9-client",level:4},{value:"C\xf4t\xe9 serveur",id:"c\xf4t\xe9-serveur",level:4},{value:"Exemple 1",id:"exemple-1-4",level:4},{value:"Exemple 2",id:"exemple-2-4",level:4},{value:"Exemple 3",id:"exemple-3-1",level:4},{value:".startTransaction()",id:"starttransaction",level:2},{value:"Description",id:"description-20",level:4},{value:"Exemple",id:"exemple-14",level:4},{value:".stopRequestLog()",id:"stoprequestlog",level:2},{value:"Description",id:"description-21",level:4},{value:"Exemple",id:"exemple-15",level:4},{value:".unlock()",id:"unlock",level:2},{value:"Description",id:"description-22",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement-10",level:4},{value:".validateTransaction()",id:"validatetransaction",level:2},{value:"Description",id:"description-23",level:4},{value:"Exemple",id:"exemple-16",level:4}],d={toc:u};function m(e){var{components:t}=e,a=l(e,["components"]);return(0,n.kt)("wrapper",r({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Un ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/dsmapping#datastore"}),"Datastore")," correspond \xe0 l'objet d'interface fourni par ORDA pour r\xe9f\xe9rencer et acc\xe9der \xe0 une base de donn\xe9es. Les objets ",(0,n.kt)("inlineCode",{parentName:"p"},"Datastore")," sont retourn\xe9s par les commandes suivantes :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",r({parentName:"li"},{href:"#ds"}),"ds")," : un raccourci vers le datastore principal"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",r({parentName:"li"},{href:"#open-datastore"}),"Open datastore")," : pour ouvrir n'importe quel datastore distant")),(0,n.kt)("h3",r({},{id:"sommaire"}),"Sommaire"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#canceltransaction"}),(0,n.kt)("strong",{parentName:"a"},".cancelTransaction()")),"\xa0","\xa0","\xa0","\xa0","annule la transaction")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#clearallremotecontexts"}),(0,n.kt)("strong",{parentName:"a"},".clearAllRemoteContexts()")),"\xa0","\xa0","\xa0","\xa0","efface tous les attributs pour tous les contextes actifs dans le datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#dataclassname"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".dataclassName"))," : 4D.DataClass"),"\xa0","\xa0","\xa0","\xa0","contient la description de la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#encryptionstatus"}),(0,n.kt)("strong",{parentName:"a"},".encryptionStatus()"),": Object"),"\xa0","\xa0","\xa0","\xa0","retourne un objet qui fournit le statut de chiffrement du fichier de donn\xe9es courant")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#flushAndLock"}),(0,n.kt)("strong",{parentName:"a"},".flushAndLock()")),"\xa0","\xa0","\xa0","\xa0","vide le cache du datastore local et emp\xeache les autres process d'effectuer des op\xe9rations d'\xe9criture sur la base de donn\xe9es")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getallremotecontexts"}),(0,n.kt)("strong",{parentName:"a"},".getAllRemoteContexts()")," : Collection"),"\xa0","\xa0","\xa0","\xa0","retourne une collection d'objets contenant des informations sur tous les contextes d'optimisation actifs dans le datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getglobalstamp"}),(0,n.kt)("strong",{parentName:"a"},".getGlobalStamp"),"() : R\xe9el"),"\xa0","\xa0","\xa0","\xa0","renvoie la valeur courante du marqueur de modification globale du datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getinfo"}),(0,n.kt)("strong",{parentName:"a"},".getInfo()"),": Object"),"\xa0","\xa0","\xa0","\xa0","retourne un objet qui fournit des informations sur le datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getremotecontextinfo"}),(0,n.kt)("strong",{parentName:"a"},".getRemoteContextInfo"),"(",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text) : Object "),"\xa0","\xa0","\xa0","\xa0"," retourne un objet qui contient des informations sur le contexte d'optimisation ",(0,n.kt)("em",{parentName:"td"},"contextName")," dans le datastore.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getrequestlog"}),(0,n.kt)("strong",{parentName:"a"},".getRequestLog()")," : Collection"),"\xa0","\xa0","\xa0","\xa0","retourne les requ\xeates ORDA enregistr\xe9es en m\xe9moire c\xf4t\xe9 client")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#locked"}),(0,n.kt)("strong",{parentName:"a"},".locked()")," : Boolean"),"\xa0","\xa0","\xa0","\xa0","renvoie True si le datastore local est verrouill\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#makeselectionsalterable"}),(0,n.kt)("strong",{parentName:"a"},".makeSelectionsAlterable()")),"\xa0","\xa0","\xa0","\xa0","d\xe9finit toutes les nouvelles s\xe9lections d'entit\xe9s comme alt\xe9rables par d\xe9faut dans tous les datastores de l'application")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#providedatakey"}),(0,n.kt)("strong",{parentName:"a"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"a"},"curPassPhrase")," : Text ) : Object ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"a"},"curDataKey")," : Object ) : Object "),"\xa0","\xa0","\xa0","\xa0","permet de fournir une cl\xe9 de chiffrement des donn\xe9es pour le fichier de donn\xe9es courant du datastore et d\xe9tecte si la cl\xe9 correspond aux donn\xe9es chiffr\xe9es")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#setadminprotection"}),(0,n.kt)("strong",{parentName:"a"},".setAdminProtection"),"( ",(0,n.kt)("em",{parentName:"a"},"status")," : Boolean )"),"\xa0","\xa0","\xa0","\xa0","permet de d\xe9sactiver tout acc\xe8s aux donn\xe9es sur le ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/fr/20-R4/Admin/webAdmin#http-port"}),"port admin web"),", y compris via le ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/fr/20-R4/Admin/dataExplorer"}),"Data Explorer")," dans les sessions ",(0,n.kt)("inlineCode",{parentName:"td"},"WebAdmin"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#setglobalstamp"}),(0,n.kt)("strong",{parentName:"a"},".setGlobalStamp"),"( ",(0,n.kt)("em",{parentName:"a"},"newStamp")," : Real)"),"\xa0","\xa0","\xa0","\xa0","d\xe9finit ",(0,n.kt)("em",{parentName:"td"},"newStamp")," comme nouvelle valeur du marqueur de modification global courant pour le datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#setremotecontextinfo"}),(0,n.kt)("strong",{parentName:"a"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"dataClassName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"attributes")," : Text {; ",(0,n.kt)("em",{parentName:"a"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"pageLength")," : Integer}})",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"dataClassName")," : Text; ",(0,n.kt)("em",{parentName:"a"},"attributesColl")," : Collection {; ",(0,n.kt)("em",{parentName:"a"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"pageLength")," : Integer }} )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"dataClassObject")," : 4D.DataClass ; ",(0,n.kt)("em",{parentName:"a"},"attributes")," : Text {; ",(0,n.kt)("em",{parentName:"a"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"pageLength")," : Integer }})",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"dataClassObject")," : 4D.DataClass ; ",(0,n.kt)("em",{parentName:"a"},"attributesColl")," : Collection {; ",(0,n.kt)("em",{parentName:"a"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"pageLength")," : Integer }} )"),"\xa0","\xa0","\xa0","\xa0","relie les attributs de dataclass sp\xe9cifi\xe9s au contexte d'optimisation ",(0,n.kt)("em",{parentName:"td"},"contextName"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#startrequestlog"}),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"()",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"a"},"file")," : 4D.File )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"a"},"file")," : 4D.File ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"a"},"reqNum")," : Integer )"),"\xa0","\xa0","\xa0","\xa0","d\xe9marre l'enregistrement des requ\xeates ORDA c\xf4t\xe9 client ou c\xf4t\xe9 serveur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#starttransaction"}),(0,n.kt)("strong",{parentName:"a"},".startTransaction()")),"\xa0","\xa0","\xa0","\xa0","d\xe9marre une transaction dans le process courant sur la base de donn\xe9es du datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#stoprequestlog"}),(0,n.kt)("strong",{parentName:"a"},".stopRequestLog()"),"  "),"\xa0","\xa0","\xa0","\xa0","stops any logging of ORDA requests on the machine it is called (client or server)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#unlock"}),(0,n.kt)("strong",{parentName:"a"},".unlock()")),"\xa0","\xa0","\xa0","\xa0","supprime le verrou sur les op\xe9rations d'\xe9criture dans le datastore, s'il a \xe9t\xe9 pos\xe9 dans le m\xeame process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#validatetransaction"}),(0,n.kt)("strong",{parentName:"a"},".validateTransaction()"),"  "),"\xa0","\xa0","\xa0","\xa0","valide la transaction")))),(0,n.kt)("h2",r({},{id:"ds"}),"ds"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Prise en charge du param\xe8tre localID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"ds")," { ( ",(0,n.kt)("em",{parentName:"p"},"localID")," : Text ) } : cs.DataStore "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"localID"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Identifiant local du datastore distant")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"cs.DataStore"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nouvelle r\xe9f\xe9rence de datastore")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description"}),"Description"),(0,n.kt)("p",null,"La commande ",(0,n.kt)("inlineCode",{parentName:"p"},"ds")," retourne une nouvelle r\xe9f\xe9rence vers le datastore correspondant \xe0 la base de donn\xe9es 4D courante ou \xe0 la base d\xe9sign\xe9e par ",(0,n.kt)("em",{parentName:"p"},"localID"),"."),(0,n.kt)("p",null,"Si vous omettez le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"localID")," (ou si vous passez une cha\xeene vide \"\"), la commande renvoie une r\xe9f\xe9rence au datastore correspondant \xe0 la base de donn\xe9es 4D locale (ou \xe0 la base 4D Server en cas d'ouverture d'une base de donn\xe9es distante sur 4D Server). Le datastore est ouvert automatiquement et est disponible directement via ",(0,n.kt)("inlineCode",{parentName:"p"},"ds"),"."),(0,n.kt)("p",null,"Vous pouvez \xe9galement obtenir une r\xe9f\xe9rence sur un datastore distant ouvert en passant son identifiant local dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"localID"),". Le datastore doit avoir \xe9t\xe9 pr\xe9alablement ouvert avec la commande ",(0,n.kt)("a",r({parentName:"p"},{href:"#open-datastore"}),(0,n.kt)("inlineCode",{parentName:"a"},"Open datastore"))," par la base de donn\xe9es courante (h\xf4te ou composant). L'identifiant local est d\xe9fini lors de l'utilisation de cette commande."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"La port\xe9e de l'identifiant local est la base de donn\xe9es dans laquelle le datastore a \xe9t\xe9 ouvert.")),(0,n.kt)("p",null,"Si aucun datastore nomm\xe9 ",(0,n.kt)("em",{parentName:"p"},"localID")," n'est trouv\xe9, la commande renvoie ",(0,n.kt)("strong",{parentName:"p"},"Null"),"."),(0,n.kt)("p",null,"Les objets disponibles dans le ",(0,n.kt)("inlineCode",{parentName:"p"},"cs.Datastore")," sont cr\xe9\xe9s \xe0 partir de la base de donn\xe9es cible en fonction des ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/dsmapping#r%C3%A8gles-g%C3%A9n%C3%A9rales"}),"r\xe8gles g\xe9n\xe9rales")," de correspondance d'ORDA."),(0,n.kt)("h4",r({},{id:"exemple-1"}),"Exemple 1"),(0,n.kt)("p",null,"Utilisation du datastore principal de la base 4D :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $result:=ds.Employee.query("firstName = :1";"S@")\n')),(0,n.kt)("h4",r({},{id:"exemple-2"}),"Exemple 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo; $firstFrench; $firstForeign : Object\n\n var $frenchStudents; $foreignStudents : cs.DataStore\n\n $connectTo:=New object("type";"4D Server";"hostname";"192.168.18.11:8044")\n $frenchStudents:=Open datastore($connectTo;"french")\n\n $connectTo.hostname:="192.168.18.11:8050"\n $foreignStudents:=Open datastore($connectTo;"foreign")\n  //...\n  //...\n $firstFrench:=getFirst("french";"Students")\n $firstForeign:=getFirst("foreign";"Students")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"  //m\xe9thode getFirst\n  //getFirst(localID;dataclass) -> entity\n #DECLARE( $localId : Text; $dataClassName : Text ) -> $entity : 4D.Entity\n\n $0:=ds($localId)[$dataClassName].all().first()\n")),(0,n.kt)("h2",r({},{id:"open-datastore"}),"Open datastore"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20 R4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"New ",(0,n.kt)("em",{parentName:"td"},"passwordAlgorithm")," property")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Open datastore"),"( ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," : Object ; ",(0,n.kt)("em",{parentName:"p"},"localID")," : Text ) : cs.DataStore "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"connectionInfo"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9s de connexion utilis\xe9es pour joindre le datastore distant")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"localID"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Identifiant \xe0 affecter au datastore ouvert sur l'application locale (obligatoire)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"cs.DataStore"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objet datastore")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-1"}),"Description"),(0,n.kt)("p",null,"La commande ",(0,n.kt)("inlineCode",{parentName:"p"},"Open datastore")," connecte l'application \xe0 la base de donn\xe9es 4D identifi\xe9e par le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," et retourne un objet ",(0,n.kt)("inlineCode",{parentName:"p"},"cs.DataStore")," associ\xe9 \xe0 l'alias local ",(0,n.kt)("em",{parentName:"p"},"localID"),"."),(0,n.kt)("p",null,"La base de donn\xe9es ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," 4D doit \xeatre disponible en tant que datastore distant, c'est-\xe0-dire :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"son serveur Web doit \xeatre lanc\xe9 avec http et/ou https activ\xe9,"),(0,n.kt)("li",{parentName:"ul"},"son option ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/fr/20-R4/REST/configuration#starting-the-rest-server"}),(0,n.kt)("strong",{parentName:"a"},"Activer le service REST"))," doit \xeatre coch\xe9e,"),(0,n.kt)("li",{parentName:"ul"},"au moins une licence client est disponible.")),(0,n.kt)("p",null,"Si aucune base de donn\xe9es correspondante n'est trouv\xe9e, ",(0,n.kt)("inlineCode",{parentName:"p"},"Open datastore")," retourne ",(0,n.kt)("strong",{parentName:"p"},"Null"),"."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"localID")," est un alias local de la session ouverte sur le datastore distant. Si ",(0,n.kt)("em",{parentName:"p"},"localID")," existe d\xe9j\xe0 dans l'application, il est utilis\xe9. Sinon, une nouvelle session ",(0,n.kt)("em",{parentName:"p"},"localID")," est cr\xe9\xe9e lors de l\u2019utilisation de l\u2019objet datastore."),(0,n.kt)("p",null,"Les objets disponibles dans le ",(0,n.kt)("inlineCode",{parentName:"p"},"cs.Datastore")," sont cr\xe9\xe9s \xe0 partir de la base de donn\xe9es cible en fonction des ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/dsmapping#r%C3%A8gles-g%C3%A9n%C3%A9rales"}),"r\xe8gles g\xe9n\xe9rales")," de correspondance d'ORDA."),(0,n.kt)("p",null,"Une fois la session ouverte, les instructions suivantes deviennent \xe9quivalentes et renvoient une r\xe9f\xe9rence sur le m\xeame objet datastore :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $myds:=Open datastore(connectionInfo;"myLocalId")\n $myds2:=ds("myLocalId")\n  //$myds et $myds2 sont \xe9quivalents\n')),(0,n.kt)("p",null,"Passez dans ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," un objet d\xe9crivant le datastore distant auquel vous souhaitez vous connecter. Il peut contenir les propri\xe9t\xe9s suivantes (toutes les propri\xe9t\xe9s sont optionnelles, \xe0 l'exception de ",(0,n.kt)("em",{parentName:"p"},"hostname"),") :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"hostname"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Nom ou adresse IP de la base de donn\xe9es distante + " :" + num\xe9ro de port (le num\xe9ro de port est obligatoire)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom d'utilisateur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"password"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mot de passe de l'utilisateur. By default, the password is sent in clear form, therefore it is ",(0,n.kt)("strong",{parentName:"td"},"strongly recommended")," to use encrypted communications by passing ",(0,n.kt)("inlineCode",{parentName:"td"},"true")," in the ",(0,n.kt)("inlineCode",{parentName:"td"},"tls")," property.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"idleTimeout"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Longint"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"D\xe9lai d'inactivit\xe9 de la session (exprim\xe9 en minutes), au terme duquel la session est automatiquement ferm\xe9e par 4D. Si cette propri\xe9t\xe9 est omise, la valeur par d\xe9faut est 60 (1h). La valeur ne peut pas \xeatre < 60 (si une valeur inf\xe9rieure est pass\xe9e, le timeout est fix\xe9 \xe0 60). Pour plus d'informations, voir ",(0,n.kt)("strong",{parentName:"td"},"Fermeture des sessions"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"tls"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Utilisez une connexion s\xe9curis\xe9e(*). Si cette propri\xe9t\xe9 est omise, \"false\" par d\xe9faut. L'utilisation d'une connexion s\xe9curis\xe9e est recommand\xe9e dans la mesure du possible.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"passwordAlgorithm"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Pass "4d-rest-digest" if the server validates the password using the ',(0,n.kt)("a",r({parentName:"td"},{href:"https://doc.4d.com/4dv20/help/command/en/page638.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"Validate password"))," command with the ",(0,n.kt)("em",{parentName:"td"},"digest")," parameter set to ",(0,n.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"type"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Doit \xeatre "4D Server"')))),(0,n.kt)("p",null,"(*) Si tls est vrai, le protocole HTTPS est utilis\xe9 si :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"HTTPS est activ\xe9 sur le datastore distant"),(0,n.kt)("li",{parentName:"ul"},"Le port donn\xe9 correspond au port HTTPS configur\xe9 dans les propri\xe9t\xe9s"),(0,n.kt)("li",{parentName:"ul"},'Un certificat valide et une cl\xe9 de chiffrement priv\xe9e sont install\xe9s dans la base. Sinon, l\'erreur "1610 - Une requ\xeate vers l\u2019h\xf4te: "{xxx}" a \xe9chou\xe9" est g\xe9n\xe9r\xe9e')),(0,n.kt)("h4",r({},{id:"exemple-1-1"}),"Exemple 1"),(0,n.kt)("p",null,"Connexion \xe0 un datastore distant sans utilisateur/mot de passe :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $remoteDS : cs.DataStore\n $connectTo:=New object("type";"4D Server";"hostname";"192.168.18.11:8044")\n $remoteDS:=Open datastore($connectTo;"students")\n ALERT("This remote datastore contains "+String($remoteDS.Students.all().length)+" students")\n')),(0,n.kt)("h4",r({},{id:"exemple-2-1"}),"Exemple 2"),(0,n.kt)("p",null,"Connexion \xe0 un datastore distant avec utilisateur/mot de passe/timeout/tls :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $remoteDS : cs.DataStore\n $connectTo:=New object("type";"4D Server";"hostname";\\"192.168.18.11:4443";\\  \n  "user";"marie";"password";$pwd;"idleTimeout";70;"tls";True)\n $remoteDS:=Open datastore($connectTo;"students")\n ALERT("This remote datastore contains "+String($remoteDS.Students.all().length)+" students")\n')),(0,n.kt)("h4",r({},{id:"exemple-3"}),"Exemple 3"),(0,n.kt)("p",null,"Travailler avec plusieurs datastores distants :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $frenchStudents; $foreignStudents : cs.DataStore\n $connectTo:=New object("hostname";"192.168.18.11:8044")\n $frenchStudents:=Open datastore($connectTo;"french")\n $connectTo.hostname:="192.168.18.11:8050"\n $foreignStudents:=Open datastore($connectTo;"foreign")\n ALERT("They are "+String($frenchStudents.Students.all().length)+" French students")\n ALERT("They are "+String($foreignStudents.Students.all().length)+" foreign students")\n')),(0,n.kt)("h4",r({},{id:"gestion-des-erreurs"}),"Gestion des erreurs"),(0,n.kt)("p",null,"En cas d'erreur, la commande retourne ",(0,n.kt)("strong",{parentName:"p"},"Null"),'. Si le datastore distant ne peut pas \xeatre joint (adresse incorrecte, web serveur non lanc\xe9, http et https non activ\xe9s, etc.), l\'erreur 1610 "Une requ\xeate vers l\u2019h\xf4te: {xxx} a \xe9chou\xe9" est g\xe9n\xe9r\xe9e. Vous pouvez intercepter cette erreur avec une m\xe9thode install\xe9e par ',(0,n.kt)("inlineCode",{parentName:"p"},"ON ERR CALL"),"."),(0,n.kt)("h2",r({},{id:"dataclassname"}),(0,n.kt)("em",{parentName:"h2"},".dataclassName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".dataclassName"))," : 4D.DataClass"),(0,n.kt)("h4",r({},{id:"description-2"}),"Description"),(0,n.kt)("p",null,"Chaque dataclass d'un datastore est disponible en tant que propri\xe9t\xe9 de l'objet ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/dsmapping#datastore"}),"DataStore"),". L'objet retourn\xe9 contient la description de la dataclass."),(0,n.kt)("h4",r({},{id:"exemple"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $emp : cs.Employee\n var $sel : cs.EmployeeSelection\n $emp:=ds.Employee //$emp contient la dataclass Employee \n $sel:=$emp.all() //obtient une entity selection de tous les employ\xe9s\n\n  //vous poubez \xe9galement saisir directement :\n $sel:=ds.Employee.all()\n")),(0,n.kt)("h2",r({},{id:"canceltransaction"}),".cancelTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".cancelTransaction()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ne requiert aucun param\xe8tre")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-3"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".cancelTransaction()")," annule la transaction ouverte avec la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()"))," au niveau correspondant dans le process courant du datastore sp\xe9cifi\xe9."),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".cancelTransaction()")," annule toutes les modifications apport\xe9es aux donn\xe9es durant la transaction."),(0,n.kt)("p",null,"Vous pouvez imbriquer plusieurs transactions (sous-transactions). Si la transaction principale est annul\xe9e, toutes ses sous-transactions sont \xe9galement annul\xe9es, m\xeame si elles ont \xe9t\xe9 valid\xe9es individuellement \xe0 l'aide de la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"#validatetransactions"}),(0,n.kt)("inlineCode",{parentName:"a"},".validateTransaction()")),"."),(0,n.kt)("h4",r({},{id:"exemple-4"}),"Exemple"),(0,n.kt)("p",null,"Voir l'exemple de la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()")),"."),(0,n.kt)("h2",r({},{id:"clearallremotecontexts"}),".clearAllRemoteContexts()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clearAllRemoteContexts()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ne requiert aucun param\xe8tre")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-4"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".clearAllRemoteContexts()")," efface tous les attributs pour tous les contextes actifs dans le datastore."),(0,n.kt)("p",null,"Cette fonction est utile principalement dans le contexte du d\xe9bogage. Gardez \xe0 l'esprit que lorsque vous ouvrez le d\xe9bogueur, il envoie des requ\xeates au serveur et r\xe9cup\xe8re tous les attributs de la dataclass pour les afficher. Cela peut surcharger vos contextes avec des donn\xe9es inutiles."),(0,n.kt)("p",null,"Si cela se produit, vous pouvez utiliser ",(0,n.kt)("inlineCode",{parentName:"p"},".clearAllRemoteContexts()")," pour r\xe9initialiser vos contextes."),(0,n.kt)("h4",r({},{id:"voir-\xe9galement"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#setremotecontextinfo"}),".setRemoteContextInfo()")),(0,n.kt)("h2",r({},{id:"encryptionstatus"}),".encryptionStatus()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".encryptionStatus()"),": Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informations sur le chiffrement du datastore courant et de chaque table")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-5"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".encryptionStatus()")," retourne un objet qui fournit le statut de chiffrement du fichier de donn\xe9es courant (.e., le fichier de donn\xe9es du datastore ",(0,n.kt)("inlineCode",{parentName:"p"},"ds"),"). Le statut de chiffrement pour chaque table est \xe9galement fourni."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Utilisez la commande ",(0,n.kt)("inlineCode",{parentName:"p"},"Data file encryption status")," pour d\xe9terminer l'\xe9tat de cryptage de tout autre fichier de donn\xe9es.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Valeur retourn\xe9e")),(0,n.kt)("p",null,"L'objet retourn\xe9 contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncrypted"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai si le fichier de donn\xe9es est chiffr\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"keyProvided"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai si la cl\xe9 de chiffrement correspondant au fichier de donn\xe9es chiffr\xe9 est fournie(*).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"tables"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objet contenant autant de propri\xe9t\xe9s que de tables chiffrables ou chiffr\xe9es.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},"tableName")),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Table chiffrable ou chiffr\xe9e")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom de la table")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"num"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Num\xe9ro de la table")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncryptable"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai si la table est d\xe9clar\xe9e chiffrable dans le fichier de structure")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncrypted"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai si les enregistrements de la table sont chiffr\xe9s dans le fichier de donn\xe9es")))),(0,n.kt)("p",null,"(*) La cl\xe9 de chiffrement peut \xeatre fournie :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"via la fonction ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()"),","),(0,n.kt)("li",{parentName:"ul"},"\xe0 la racine d'un appareil connect\xe9 avant l'ouverture du datastore,"),(0,n.kt)("li",{parentName:"ul"},"via la commande ",(0,n.kt)("inlineCode",{parentName:"li"},"Discover data key"),".")),(0,n.kt)("h4",r({},{id:"exemple-5"}),"Exemple"),(0,n.kt)("p",null,"Vous souhaitez connaitre le nombre de tables chiffr\xe9es dans le fichier de donn\xe9es courant :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n\n $status:=ds.encryptionStatus()\n\n If($status.isEncrypted) //the database is encrypted\n    C_LONGINT($vcount)\n    C_TEXT($tabName)\n    For each($tabName;$status.tables)\n       If($status.tables[$tabName].isEncrypted)\n          $vcount:=$vcount+1\n       End if\n    End for each\n    ALERT(String($vcount)+" encrypted table(s) in this datastore.")\n Else\n    ALERT("This database is not encrypted.")\n End if\n')),(0,n.kt)("h2",r({},{id:"flushandlock"}),".flushAndLock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".flushAndLock()")),(0,n.kt)("p",null,"| Param\xe8tres | Type |  | Description                                            |\n| ---------- | ---- |  | ------------------------------------------------------ |\n|            |      |  | Ne requiert aucun param\xe8tre|"),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-6"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," vide le cache du datastore local et emp\xeache les autres process d'effectuer des op\xe9rations d'\xe9criture sur la base de donn\xe9es. Le datastore est plac\xe9 dans un \xe9tat coh\xe9rent et fig\xe9. L'appel de cette fonction est n\xe9cessaire avant l'ex\xe9cution d'un instantan\xe9 d'application (snapshot), par exemple."),(0,n.kt)("admonition",r({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Cette fonction ne peut \xeatre appel\xe9e que :"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},"sur le datastore local (",(0,n.kt)("a",r({parentName:"li"},{href:"#ds"}),(0,n.kt)("inlineCode",{parentName:"a"},"ds")),")."),(0,n.kt)("li",{parentName:"ul"},"dans un environnement client/serveur, sur la machine serveur."))),(0,n.kt)("p",null,"Une fois cette fonction ex\xe9cut\xe9e, les op\xe9rations d'\xe9criture telles que ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," ou les autres appels ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," sont fig\xe9s dans tous les autres process jusqu'\xe0 ce que le datastore soit d\xe9verrouill\xe9."),(0,n.kt)("p",null,"Lorsque plusieurs appels \xe0 ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," ont \xe9t\xe9 effectu\xe9s dans le m\xeame process, le m\xeame nombre d'appels \xe0 ",(0,n.kt)("a",r({parentName:"p"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},".unlock()"))," doit \xeatre ex\xe9cut\xe9 pour d\xe9verrouiller r\xe9ellement le datastore."),(0,n.kt)("p",null,"Le datastore est d\xe9verrouill\xe9 lorsque :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"la fonction ",(0,n.kt)("a",r({parentName:"li"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},".unlock()"))," est appel\xe9e dans le m\xeame process, ou"),(0,n.kt)("li",{parentName:"ul"},"le process qui a appel\xe9 la fonction ",(0,n.kt)("inlineCode",{parentName:"li"},".flushAndLock()")," est tu\xe9.")),(0,n.kt)("p",null,"Si le datastore est d\xe9j\xe0 verrouill\xe9 par un autre process, l'appel de ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," est fig\xe9 et sera ex\xe9cut\xe9 lorsque le datastore sera d\xe9verrouill\xe9."),(0,n.kt)("p",null,"Une erreur est d\xe9clench\xe9e si la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," ne peut pas \xeatre ex\xe9cut\xe9e (par exemple, elle est ex\xe9cut\xe9e sur un 4D distant)."),(0,n.kt)("admonition",r({},{type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},"D'autres fonctions et services 4D, notamment le ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/Backup/"}),"backup"),", le ",(0,n.kt)("a",r({parentName:"p"},{href:"https://doc.4d.com/4Dv20/4D/20/Using-Volume-Shadow-Copy-Service-on-Windows.300-6330532.en.html"}),"vss")," et le ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/MSC/overview"}),"MSC")," , peuvent \xe9galement verrouiller le datastore. Avant d'appeler ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()"),", assurez-vous qu'aucune autre action de verrouillage n'est en cours d'utilisation, afin d'\xe9viter toute interaction inattendue.")),(0,n.kt)("h4",r({},{id:"exemple-6"}),"Exemple"),(0,n.kt)("p",null,"Vous voulez cr\xe9er une copie du dossier de donn\xe9es avec son fichier journal courant :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"$destination:=Folder(fk documents folder).folder(\"Archive\") \n$destination.create()\n\nds.flushAndLock() //Bloque les op\xe9rations d'\xe9criture des autres process\n\n$dataFolder:=Folder(fk data folder) \n$dataFolder.copyTo($destination) //Copier le dossier de donn\xe9es\n\n$oldJournalPath:=New log file //Fermer le journal et en cr\xe9er un nouveau\n$oldJournal:=File($oldJournalPath; fk platform path) \n$oldJournal.moveTo($destination) //Sauvegarder l'ancien journal avec les donn\xe9es\n\nds.unlock() //Notre copie est termin\xe9e, nous pouvons maintenant d\xe9verrouiller le datastore\n")),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-1"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#locked"}),".locked()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#unlock"}),".unlock()")),(0,n.kt)("h2",r({},{id:"getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getAllRemoteContexts()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection d'objets contextes d'optimisation")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Mode avanc\xe9 :")," Cette fonction est destin\xe9e aux d\xe9veloppeurs qui souhaitent personnaliser les fonctionnalit\xe9s par d\xe9faut de ORDA dans le cadre de configurations sp\xe9cifiques. Dans la plupart des cas, vous n'aurez pas besoin de l'utiliser.")),(0,n.kt)("h4",r({},{id:"description-7"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getAllRemoteContexts()")," retourne une collection d'objets contenant des informations sur tous les contextes d'optimisation actifs dans le datastore."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour plus d'informations sur la cr\xe9ation des contextes, voir ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/datastores#optimisation-clientserveur"}),"Optimisation client/serveur"),".")),(0,n.kt)("p",null,"Chaque objet de la collection retourn\xe9e contient les propri\xe9t\xe9s list\xe9es dans la section ",(0,n.kt)("a",r({parentName:"p"},{href:"#objet-retourn%C3%A9"}),(0,n.kt)("inlineCode",{parentName:"a"},".getRemoteContextInfo()")),"."),(0,n.kt)("h4",r({},{id:"exemple-7"}),"Exemple"),(0,n.kt)("p",null,"Le code suivant d\xe9finit deux contextes et les r\xe9cup\xe8re \xe0 l'aide de ",(0,n.kt)("inlineCode",{parentName:"p"},".getAllRemoteContexts()")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\nvar $persons : cs.PersonsSelection\nvar $addresses : cs.AddressSelection\nvar $p : cs.PersonsEntity\nvar $a : cs.AddressEntity\nvar $contextA; $contextB : Object\nvar $info : Collection\nvar $text : Text\n\n// Acc\xe8s datastore distant\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n// d\xe9finition contexte A\n$contextA:=New object("context"; "contextA")\n$persons:=$ds.Persons.all($contextA)\n$text:=""\nFor each ($p; $persons)\n    $text:=$p.firstname+" lives in "+$p.address.city+" / "\nEnd for each\n\n// d\xe9finition contexte B\n$contextB:=New object("context"; "contextB")\n$addresses:=$ds.Address.all($contextB)\n$text:=""\nFor each ($a; $addresses)\n    $text:=$a.zipCode\nEnd for each\n\n// r\xe9cup\xe9rer tous les contextes distants (ici contextA et contextB)\n$info:=$ds.getAllRemoteContexts()\n//$info = [{name:"contextB"; dataclass:"Address"; main:"zipCode"},\n{name:"contextA";dataclass:"Persons";main:"firstname,address.city"}]\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Cet exemple est \xe0 but de d\xe9monstration, il n'est pas destin\xe9 \xe0 une impl\xe9mentation r\xe9elle.")),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-2"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#setremotecontextinfo"}),".setRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearallremotecontexts"}),".clearAllRemoteContexts()")),(0,n.kt)("h2",r({},{id:"getglobalstamp"}),".getGlobalStamp()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20 R3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getGlobalStamp"),"() : R\xe9el"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Real"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valeur courante du marqueur de modification global")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-8"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getGlobalStamp()")," renvoie la valeur courante du marqueur de modification globale du datastore."),(0,n.kt)("admonition",r({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Cette fonction ne peut \xeatre appel\xe9e que :"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},"sur le datastore local (",(0,n.kt)("a",r({parentName:"li"},{href:"#ds"}),(0,n.kt)("inlineCode",{parentName:"a"},"ds")),")."),(0,n.kt)("li",{parentName:"ul"},"dans un environnement client/serveur, sur la machine serveur."))),(0,n.kt)("p",null,"Pour plus d'informations sur le marqueur global et le suivi des modifications de donn\xe9es, veuillez consulter la page ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/global-stamp"}),(0,n.kt)("strong",{parentName:"a"},"Utiliser le marqueur global"))," ."),(0,n.kt)("h4",r({},{id:"exemple-8"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"var $currentStamp : Real\nvar $hasModifications : Boolean\n\n$currentStamp:=ds.getGlobalStamp()\nmethodWhichCouldModifyEmployees //ex\xe9cuter du code \n$hasModifications:=($currentStamp # ds.getGlobalStamp())\n")),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-3"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#setglobalstamp"}),".setGlobalStamp()")),(0,n.kt)("h2",r({},{id:"getinfo"}),".getInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getInfo()"),": Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9s du datastore")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-9"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getInfo()")," retourne un objet qui fournit des informations sur le datastore. Cette fonction est utile pour l'\xe9criture de code g\xe9n\xe9rique."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Objet retourn\xe9")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"type"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"string"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("li",null,'"4D" : datastore principal, disponible via ds '),(0,n.kt)("li",null,'"4D Server" : datastore distant ouvert avec Open datastore'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"networked"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("li",null,"Vrai : le datastore est accessible via une connexion r\xe9seau."),(0,n.kt)("li",null,"Faux : le datastore n'est pas accessible via une connexion r\xe9seau (base locale)"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"localID"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Identifiant du datastore sur la machine. Correspond \xe0 la cha\xeene localID donn\xe9e avec la commande ",(0,n.kt)("inlineCode",{parentName:"td"},"Open datastore"),'. Cha\xeene vide ("") pour le datastore principal.')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"connection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objet d\xe9crivant la connexion au datastore distant (non retourn\xe9 pour le datastore principal). Propri\xe9t\xe9s disponibles :",(0,n.kt)("table",null,(0,n.kt)("tr",null,(0,n.kt)("th",null,"Propri\xe9t\xe9"),(0,n.kt)("th",null,"Type"),(0,n.kt)("th",null,"Description")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"hostname"),(0,n.kt)("td",null,"text"),(0,n.kt)("td",null,'Adresse IP ou nom du datastore distant + ":" + num\xe9ro de port')),(0,n.kt)("tr",null,(0,n.kt)("td",null,"tls"),(0,n.kt)("td",null,"boolean"),(0,n.kt)("td",null,"Vrai si une connexion s\xe9curis\xe9e est utilis\xe9e avec le datastore distant")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"idleTimeout"),(0,n.kt)("td",null,"number"),(0,n.kt)("td",null,"Delai d'inactivit\xe9 autoris\xe9 de la session (en minutes)")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"user"),(0,n.kt)("td",null,"text"),(0,n.kt)("td",null,"Utilisateur authentifi\xe9 sur le datastore distant"))))))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si la fonction ",(0,n.kt)("inlineCode",{parentName:"li"},".getInfo()")," est ex\xe9cut\xe9e sur un 4D Server ou un 4D monoposte, ",(0,n.kt)("inlineCode",{parentName:"li"},"networked")," est Faux."),(0,n.kt)("li",{parentName:"ul"},"Si la fonction ",(0,n.kt)("inlineCode",{parentName:"li"},".getInfo()")," est ex\xe9cut\xe9e sur un 4D distant, ",(0,n.kt)("inlineCode",{parentName:"li"},"networked")," est Vrai")),(0,n.kt)("h4",r({},{id:"exemple-1-2"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $info : Object\n\n $info:=ds.getInfo() //Ex\xe9cut\xe9 sur 4D Server ou 4D\n  //{"type":"4D","networked":false,"localID":""}\n\n $info:=ds.getInfo() // Ex\xe9cut\xe9 sur 4D distant\n  //{"type":"4D","networked":true,"localID":""}\n')),(0,n.kt)("h4",r({},{id:"exemple-2-2"}),"Exemple 2"),(0,n.kt)("p",null,"Sur un datastore distant :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'  var $remoteDS : cs.DataStore\n  var $info; $connectTo : Object\n\n $connectTo:=New object("hostname";"111.222.33.44:8044";"user";"marie";"password";"aaaa")\n $remoteDS:=Open datastore($connectTo;"students")\n $info:=$remoteDS.getInfo()\n\n  //{"type":"4D Server",\n  //"localID":"students",\n  //"networked":true,\n  //"connection":{hostname:"111.222.33.44:8044","tls":false,"idleTimeout":2880,"user":"marie"}}\n')),(0,n.kt)("h2",r({},{id:"getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRemoteContextInfo"),"(",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text) : Object "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"contextName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom du contexte")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Description du contexte")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Mode avanc\xe9 :")," Cette fonction est destin\xe9e aux d\xe9veloppeurs qui souhaitent personnaliser les fonctionnalit\xe9s par d\xe9faut de ORDA dans le cadre de configurations sp\xe9cifiques. Dans la plupart des cas, vous n'aurez pas besoin de l'utiliser.")),(0,n.kt)("h4",r({},{id:"description-10"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getRemoteContextInfo()"),"  retourne un objet qui contient des informations sur le contexte d'optimisation ",(0,n.kt)("em",{parentName:"p"},"contextName")," dans le datastore.."),(0,n.kt)("p",null,"Pour plus d'informations sur la cr\xe9ation des contextes, voir ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/datastores#optimisation-clientserveur"}),"Optimisation client/serveur"),"."),(0,n.kt)("h4",r({},{id:"objet-retourn\xe9"}),"Objet retourn\xe9"),(0,n.kt)("p",null,"L'objet retourn\xe9 contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom du contexte")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"main"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Attribut(s) associ\xe9(s) au contexte (les noms d'attributs sont s\xe9par\xe9s par des virgules)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataclass"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom de la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"currentItem (optionnel)"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Attributs du ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/fr/20-R4/ORDA/datastores#listbox-bas%C3%A9e-sur-une-s%C3%A9lection-dentit%C3%A9s"}),"mode page")," si le contexte est li\xe9 \xe0 une list box. Retourn ",(0,n.kt)("inlineCode",{parentName:"td"},"Null")," ou un \xe9l\xe9ment de texte vide si le contexte n'est pas utilis\xe9 pour une list box, ou s'il n'y a pas de contexte pour l'\xe9l\xe9ment courant (currentItem)")))),(0,n.kt)("p",null,"Comme les contextes se comportent comme des filtres d'attributs, si ",(0,n.kt)("em",{parentName:"p"},"main")," est retourn\xe9 vide, cela signifie qu'aucun filtre n'est appliqu\xe9 et que le serveur donc retourne tous les attributs de la dataclass."),(0,n.kt)("h4",r({},{id:"exemple-9"}),"Exemple"),(0,n.kt)("p",null,"Voir l'exemple de la section ",(0,n.kt)("a",r({parentName:"p"},{href:"#example-1-3"}),".setRemoteContextInfo()"),"."),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-4"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#setremotecontextinfo"}),".setRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearallremotecontexts"}),".clearAllRemoteContexts()")),(0,n.kt)("h2",r({},{id:"getrequestlog"}),".getRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRequestLog()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection d'objets d\xe9crivant les requ\xeates")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-11"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"getRequestLog()")," retourne les requ\xeates ORDA enregistr\xe9es en m\xe9moire c\xf4t\xe9 client. L'enregistrement des requ\xeates ORDA doit avoir \xe9t\xe9 pr\xe9alablement activ\xe9 \xe0 l'aide de la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"#startrequestlog"}),(0,n.kt)("inlineCode",{parentName:"a"},".startRequestLog()")),"."),(0,n.kt)("p",null,"Cette fonction doit \xeatre appel\xe9e sur un client 4D distant, sinon elle retourne une collection vide. Elle est con\xe7ue \xe0 des fins de d\xe9bogage dans les configurations client/serveur."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Valeur retourn\xe9e")),(0,n.kt)("p",null,"Collection d'objets requ\xeate empil\xe9s. La requ\xeate la plus r\xe9cente porte l'indice 0."),(0,n.kt)("p",null,"Pour plus de d\xe9tails sur le format d'enregistrement des requ\xeates ORDA, veuillez consulter la section ",(0,n.kt)("a",r({parentName:"p"},{href:"https://doc.4d.com/4Dv18/4D/18/Description-of-log-files.300-4575486.en.html#4385373"}),(0,n.kt)("strong",{parentName:"a"},"ORDA client requests")),"."),(0,n.kt)("h4",r({},{id:"exemple-10"}),"Exemple"),(0,n.kt)("p",null,"Voir l'exemple 2 de ",(0,n.kt)("a",r({parentName:"p"},{href:"#startrequestlog"}),(0,n.kt)("inlineCode",{parentName:"a"},".startRequestLog()")),"."),(0,n.kt)("h2",r({},{id:"isadminprotected"}),".isAdminProtected()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".isAdminProtected()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai si l'acc\xe8s au Data Explorer est d\xe9sactiv\xe9, Faux s'il est activ\xe9 (d\xe9faut)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-12"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".isAdminProtected()")," retourne ",(0,n.kt)("inlineCode",{parentName:"p"},"True")," si l'acc\xe8s au ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/Admin/dataExplorer"}),"Data Explorer")," est d\xe9sactiv\xe9 pour la session courante."),(0,n.kt)("p",null,"Par d\xe9faut, l'acc\xe8s au Data Explorer est autoris\xe9 pour les sessions ",(0,n.kt)("inlineCode",{parentName:"p"},"webAdmin"),", mais il peut \xeatre d\xe9sactiv\xe9 pour emp\xeacher que les administrateurs puissent acc\xe9der aux donn\xe9es (cf. fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"#setadminprotection"}),(0,n.kt)("inlineCode",{parentName:"a"},".setAdminProtection()")),")."),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-5"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#setadminprotection"}),(0,n.kt)("inlineCode",{parentName:"a"},".setAdminProtection()"))),(0,n.kt)("h2",r({},{id:"locked"}),".locked()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".locked()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai si verrouill\xe9")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-13"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".locked()")," renvoie True si le datastore local est verrouill\xe9."),(0,n.kt)("p",null,"Vous pouvez verrouiller le datastore \xe0 l'aide de la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),".flushAndLock()")," avant d'ex\xe9cuter un instantan\xe9 du fichier de donn\xe9es, par exemple."),(0,n.kt)("admonition",r({},{type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},"La fonction renvoie \xe9galement ",(0,n.kt)("inlineCode",{parentName:"p"},"True")," si le datastore a \xe9t\xe9 verrouill\xe9 par une autre fonction d'administration telle que la sauvegarde ou le vss (voir ",(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),".flushAndLock()"),").")),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-6"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),".flushAndLock()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#unlock"}),".unlock()")),(0,n.kt)("h2",r({},{id:"makeselectionsalterable"}),".makeSelectionsAlterable()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".makeSelectionsAlterable()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ne requiert aucun param\xe8tre")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-14"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".makeSelectionsAlterable()")," d\xe9finit toutes les nouvelles s\xe9lections d'entit\xe9s comme alt\xe9rables par d\xe9faut dans tous les datastores de l'application (y compris les ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/datastores"}),"datastores distants"),"). Elle est destin\xe9e \xe0 \xeatre appel\xe9e une fois, par exemple dans la m\xe9thode base ",(0,n.kt)("inlineCode",{parentName:"p"},"On Startup"),"."),(0,n.kt)("p",null,"Lorsque cette m\xe9thode n'est pas appel\xe9e, les nouvelles s\xe9lections d'entit\xe9s peuvent \xeatre partageables, selon la nature de leur \"parent\" ou la fa\xe7on dont elles sont cr\xe9\xe9es (voir la section ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/entities#entity-selections-partageables-et-non-partageables"}),"Entity selections partageables et non partageables"),")."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Cette fonction ne modifie pas les s\xe9lections d'entit\xe9s cr\xe9\xe9es par ",(0,n.kt)("a",r({parentName:"p"},{href:"#copy"}),(0,n.kt)("inlineCode",{parentName:"a"},".copy(")),") ou ",(0,n.kt)("inlineCode",{parentName:"p"},"OB Copy")," lorsque l'option explicite ",(0,n.kt)("inlineCode",{parentName:"p"},"ck shared")," est utilis\xe9e.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Compatibilit\xe9")," : Cette fonction doit \xeatre utilis\xe9e uniquement dans des projets convertis \xe0 partir de versions de 4D ant\xe9rieures \xe0 4D v18 R5 et contenant des appels ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/API/EntitySelectionClass#add"}),".add()"),". Dans ce contexte, l'utilisation de ",(0,n.kt)("inlineCode",{parentName:"p"},".makeSelectionsAlterable()")," peut faire gagner du temps en restaurant instantan\xe9ment le pr\xe9c\xe9dent comportement 4D dans les projets existants. En revanche, l'utilisation de cette m\xe9thode dans les nouveaux projets cr\xe9\xe9s dans 4D v18 R5 et les versions plus r\xe9centes ",(0,n.kt)("strong",{parentName:"p"},"n'est pas recommand\xe9e"),", car elle emp\xeache le partage des entity selections, ce qui offre de meilleures performances et une plus grande \xe9volutivit\xe9.")),(0,n.kt)("h2",r({},{id:"providedatakey"}),".provideDataKey()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"p"},"curPassPhrase")," : Text ) : Object ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"p"},"curDataKey")," : Object ) : Object "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"curPassPhrase"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Phrase secr\xe8te courante")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"curDataKey"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cl\xe9 de chiffrement des donn\xe9es courante")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"R\xe9sultat de la mise en correspondance de la cl\xe9 de chiffrement")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-15"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".provideDataKey()")," permet de fournir une cl\xe9 de chiffrement des donn\xe9es pour le fichier de donn\xe9es courant du datastore et d\xe9tecte si la cl\xe9 correspond aux donn\xe9es chiffr\xe9es. Cette fonction peut \xeatre utilis\xe9e \xe0 l'ouverture d'une base chiffr\xe9e, ou \xe0 l'ex\xe9cution de n'importe quelle op\xe9ration de chiffrement qui n\xe9cessite la cl\xe9 de chiffrement, telle que le re-chiffrement du fichier de donn\xe9es."),(0,n.kt)("blockquote",null,(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"La fonction ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()")," doit \xeatre appel\xe9e dans une base de donn\xe9es chiffr\xe9e. Si elle est appel\xe9e dans une base de donn\xe9es non chiffr\xe9e, l'erreur 2003 (la cl\xe9 de cryptage ne correspond pas aux donn\xe9es.) est retourn\xe9e. Utilisez la commande ",(0,n.kt)("inlineCode",{parentName:"li"},"Data file encryption status")," pour d\xe9terminer si la base de donn\xe9es est chiffr\xe9e."),(0,n.kt)("li",{parentName:"ul"},"La fonction ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()")," ne peut pas \xeatre appel\xe9e depuis un 4D distant ou un datastore distant chiffr\xe9."))),(0,n.kt)("p",null,"Si vous utilisez le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"curPassPhrase"),", passez la cha\xeene utilis\xe9e pour g\xe9n\xe9rer la cl\xe9 de chiffrement des donn\xe9es. Lorsque vous utilisez ce param\xe8tre, une cl\xe9 de chiffrement est g\xe9n\xe9r\xe9e."),(0,n.kt)("p",null,"Si vous utilisez le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"curDataKey"),", passez un objet (avec la propri\xe9t\xe9 ",(0,n.kt)("em",{parentName:"p"},"encodedKey"),") contenant la cl\xe9 de chiffrement des donn\xe9es. Cette cl\xe9 peut avoir \xe9t\xe9 g\xe9n\xe9r\xe9e \xe0 l'aide de la commande ",(0,n.kt)("inlineCode",{parentName:"p"},"New data key"),"."),(0,n.kt)("p",null,"Si une cl\xe9 de chiffrement des donn\xe9es valide est fournie, elle est ajout\xe9e \xe0 la ",(0,n.kt)("em",{parentName:"p"},"keyChain")," dans la m\xe9moire et le mode chiffrement est activ\xe9 :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"toutes les modifications de donn\xe9es apport\xe9es dans les tables chiffrables sont chiffr\xe9es sur le disque (fichiers .4DD, .journal,  . 4Dindx)."),(0,n.kt)("li",{parentName:"ul"},"toutes les donn\xe9es charg\xe9es \xe0 partir de tables chiffrables sont d\xe9chiffr\xe9es dans la m\xe9moire")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"R\xe9sultat")),(0,n.kt)("p",null,"Le r\xe9sultat de la commande est d\xe9crit dans l'objet retourn\xe9 :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai si la cl\xe9 de chiffrement fournie correspond aux donn\xe9es chiffr\xe9es, sinon Faux")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Les propri\xe9t\xe9s ci-dessous sont retourn\xe9es uniquement si success est \xe0 ",(0,n.kt)("em",{parentName:"td"},"Faux"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Code d'erreur (4 si la cl\xe9 de chiffrement fournie est erron\xe9e)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Message d'erreur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Pile d'erreurs. La premi\xe8re erreur poss\xe8de l'indice le plus \xe9lev\xe9.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].componentSignature"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom du composant interne")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Num\xe9ro de l'erreur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Message d'erreur")))),(0,n.kt)("p",null,"Si aucun param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"curPassphrase")," ou ",(0,n.kt)("em",{parentName:"p"},"curDataKey")," n'est fourni, ",(0,n.kt)("inlineCode",{parentName:"p"},".provideDataKey()")," retourne ",(0,n.kt)("strong",{parentName:"p"},"null")," (aucune erreur n'est g\xe9n\xe9r\xe9e)."),(0,n.kt)("h4",r({},{id:"exemple-11"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $keyStatus : Object\n var $passphrase : Text\n\n $passphrase:=Request("Enter the passphrase")\n If(OK=1)\n    $keyStatus:=ds.provideDataKey($passphrase)\n    If($keyStatus.success)\n       ALERT("You have provided a valid encryption key")\n    Else\n       ALERT("You have provided an invalid encryption key, you will not be able to work with encrypted data")\n    End if\n End if\n')),(0,n.kt)("h2",r({},{id:"setadminprotection"}),".setAdminProtection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".setAdminProtection"),"( ",(0,n.kt)("em",{parentName:"p"},"status")," : Boolean )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vrai pour d\xe9sactiver l'acc\xe8s au Data Explorer sur le port ",(0,n.kt)("inlineCode",{parentName:"td"},"webAdmin"),", Faux (d\xe9faut) pour permettre l'acc\xe8s")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-16"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".setAdminProtection()")," permet de d\xe9sactiver tout acc\xe8s aux donn\xe9es sur le ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/Admin/webAdmin#http-port"}),"port admin web"),", y compris via le ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/Admin/dataExplorer"}),"Data Explorer")," dans les sessions ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin"),"."),(0,n.kt)("p",null,"Par d\xe9faut lorsque la fonction n'est pas appel\xe9e, l'acc\xe8s aux donn\xe9es est possible via le Data Explorer sur le port d'administration web pour une session avec le privil\xe8ge ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin")," . Dans certaines configurations, par exemple lorsque le serveur d'application est h\xe9berg\xe9 sur la machine d'un prestataire de service, vous pouvez souhaiter que l'administrateur ne puisse pas visualiser vos donn\xe9es, m\xeame s'il peut acc\xe9der \xe0 la configuration du serveur, y compris au param\xe9trage de l'",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/Admin/webAdmin#access-key"}),"access key"),"."),(0,n.kt)("p",null,"Dans ce cas, vous pouvez appeler cette fonction pour d\xe9sactiver l'acc\xe8s aux donn\xe9es depuis le Data Explorer sur le port web admin de la machine, m\xeame pour les sessions utilisateurs ayant le privil\xe8ge ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin"),". Lorsque cette fonction est ex\xe9cut\xe9e, le fichier de donn\xe9es est imm\xe9diatement prot\xe9g\xe9 et le statut est sauvegard\xe9 sur disque : le fichier de donn\xe9es sera prot\xe9g\xe9 m\xeame si l'application est red\xe9marr\xe9e."),(0,n.kt)("h4",r({},{id:"exemple-12"}),"Exemple"),(0,n.kt)("p",null,"Vous cr\xe9ez une m\xe9thode projet ",(0,n.kt)("em",{parentName:"p"},"protectDataFile")," \xe0 appeler par exemple avant le d\xe9ploiement :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," ds.setAdminProtection(True) //D\xe9sactive l'acc\xe8s aux donn\xe9es de l'Explorateur de donn\xe9es\n")),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-7"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#isadminprotected"}),(0,n.kt)("inlineCode",{parentName:"a"},".isAdminProtected()"))),(0,n.kt)("h2",r({},{id:"setglobalstamp"}),".setGlobalStamp()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20 R3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".setGlobalStamp"),"( ",(0,n.kt)("em",{parentName:"p"},"newStamp")," : Real)"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"newStamp"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Real"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nouvelle valeur du marqueur de modification global")))),(0,n.kt)("p",null,"|"),(0,n.kt)("admonition",r({},{title:"Mode avanc\xe9",type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Cette fonction est destin\xe9e aux d\xe9veloppeurs qui ont besoin de modifier la valeur courante du marqueur global. Elle doit \xeatre utilis\xe9e avec pr\xe9caution.")),(0,n.kt)("h4",r({},{id:"description-17"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".setGlobalStamp()")," d\xe9finit ",(0,n.kt)("em",{parentName:"p"},"newStamp")," comme nouvelle valeur du marqueur de modification global courant pour le datastore."),(0,n.kt)("admonition",r({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Cette fonction ne peut \xeatre appel\xe9e que :"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},"sur le datastore local (",(0,n.kt)("a",r({parentName:"li"},{href:"#ds"}),(0,n.kt)("inlineCode",{parentName:"a"},"ds")),")."),(0,n.kt)("li",{parentName:"ul"},"dans un environnement client/serveur, sur la machine serveur."))),(0,n.kt)("p",null,"Pour plus d'informations sur le marqueur global et le suivi des modifications de donn\xe9es, veuillez consulter la page ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/global-stamp"}),(0,n.kt)("strong",{parentName:"a"},"Utiliser le marqueur global"))," ."),(0,n.kt)("h4",r({},{id:"exemple-13"}),"Exemple"),(0,n.kt)("p",null,"Le code suivant d\xe9finit le marqueur de modification global:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"var $newValue: Real\n$newValue:=ReadValueFrom //on obtient une valeur \xe0 assigner\nds.setGlobalStamp($newValue)\n")),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-8"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#getglobalstamp"}),".getGlobalStamp()")),(0,n.kt)("h2",r({},{id:"setremotecontextinfo"}),".setRemoteContextInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"dataClassName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"attributes")," : Text {; ",(0,n.kt)("em",{parentName:"p"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"pageLength")," : Integer}})",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"dataClassName")," : Text; ",(0,n.kt)("em",{parentName:"p"},"attributesColl")," : Collection {; ",(0,n.kt)("em",{parentName:"p"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"pageLength")," : Integer }} )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"dataClassObject")," : 4D.DataClass ; ",(0,n.kt)("em",{parentName:"p"},"attributes")," : Text {; ",(0,n.kt)("em",{parentName:"p"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"pageLength")," : Integer }})",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"dataClassObject")," : 4D.DataClass ; ",(0,n.kt)("em",{parentName:"p"},"attributesColl")," : Collection {; ",(0,n.kt)("em",{parentName:"p"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"pageLength")," : Integer }} )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"contextName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom du contexte")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataClassName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nom de la dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataClassObject"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D.DataClass"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objet dataclass (e.g datastore.Employee)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributes"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Liste d'attributs s\xe9par\xe9s par des virgules")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributesColl"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection de noms d'attributs (text)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"contextType"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Si pass\xe9, "main" ou "currentItem"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"pageLength"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Taille de page de l'entity selection associ\xe9e au contexte (80 par d\xe9faut)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Mode avanc\xe9 :")," Cette fonction est destin\xe9e aux d\xe9veloppeurs qui souhaitent personnaliser les fonctionnalit\xe9s par d\xe9faut de ORDA dans le cadre de configurations sp\xe9cifiques. Dans la plupart des cas, vous n'aurez pas besoin de l'utiliser.")),(0,n.kt)("h4",r({},{id:"description-18"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".setRemoteContextInfo()")," relie les attributs de dataclass sp\xe9cifi\xe9s au contexte d'optimisation ",(0,n.kt)("em",{parentName:"p"},"contextName"),". Si un contexte d'optimisation existe d\xe9j\xe0 pour les attributs sp\xe9cifi\xe9s, la commande le remplace."),(0,n.kt)("p",null,"Lorsque vous passez un contexte aux fonctions de classe ORDA, l'optimisation des requ\xeates REST est d\xe9clench\xe9e imm\xe9diatement :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"la premi\xe8re entit\xe9 n'est pas charg\xe9e int\xe9gralement, \xe0 la diff\xe9rence du mode automatique"),(0,n.kt)("li",{parentName:"ul"},"des pages de 80 entit\xe9s (ou de ",(0,n.kt)("inlineCode",{parentName:"li"},"pageLength")," entit\xe9s) sont imm\xe9ditament demand\xe9es au serveur avec uniquement les attributs du contexte")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour plus d'informations sur la cr\xe9ation des contextes, voir ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/ORDA/datastores#optimisation-clientserveur"}),"Optimisation client/serveur"))),(0,n.kt)("p",null,"Dans ",(0,n.kt)("em",{parentName:"p"},"contextName"),", passez le nom du contexte d'optimisation \xe0 lier aux attributs de la dataclass."),(0,n.kt)("p",null,"Pour d\xe9signer la dataclass qui doit recevoir le contexte, vous pouvez passer un ",(0,n.kt)("em",{parentName:"p"},"dataClassName")," ou un ",(0,n.kt)("em",{parentName:"p"},"dataClassObject"),"."),(0,n.kt)("p",null,"Pour d\xe9signer les attributs \xe0 lier au contexte, passez soit une liste d'attributs s\xe9par\xe9s par des virgules dans ",(0,n.kt)("em",{parentName:"p"},"attributes")," (Text), soit une collection de noms d'attributs dans ",(0,n.kt)("em",{parentName:"p"},"attributesColl")," (collection de textes)."),(0,n.kt)("p",null,"Si ",(0,n.kt)("em",{parentName:"p"},"attributes")," est un texte vide, ou si ",(0,n.kt)("em",{parentName:"p"},"attributesColl")," est une collection vide, tous les attributs scalaires de la dataclass sont int\xe9gr\xe9s au contexte d'optimisation. Si vous passez un attribut qui n'existe pas dans la dataclass, la fonction l'ignore et une erreur est g\xe9n\xe9r\xe9e."),(0,n.kt)("p",null,"Vous pouvez passer un ",(0,n.kt)("em",{parentName:"p"},"contextType")," pour sp\xe9cifier si le contexte est standard ou s'il s'agit du contexte de l'\xe9l\xe9ment courant de l'entity selection affich\xe9e dans une list box :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'Si sa valeur est "main" (d\xe9faut), ',(0,n.kt)("em",{parentName:"li"},"contextName")," d\xe9signe un contexte standard."),(0,n.kt)("li",{parentName:"ul"},'Si sa valeur est "currentItem", les attributs pass\xe9s sont int\xe9gr\xe9s dans le contexte de l\'\xe9l\xe9ment courant.  Voir  ',(0,n.kt)("a",r({parentName:"li"},{href:"/docs/fr/20-R4/ORDA/datastores#listbox-bas%C3%A9e-sur-une-s%C3%A9lection-dentit%C3%A9s"}),"Listbox bas\xe9e sur une s\xe9lection d'entit\xe9s"),".")),(0,n.kt)("p",null,"Dans ",(0,n.kt)("em",{parentName:"p"},"pageLength"),", sp\xe9cifiez le nombre d'entit\xe9s de dataclass \xe0 demander au serveur."),(0,n.kt)("p",null,"Vous pouvez passer une ",(0,n.kt)("em",{parentName:"p"},"pageLength")," pour un attribut relationnel qui est une entity selection (1-vers-N). La syntaxe est ",(0,n.kt)("inlineCode",{parentName:"p"},"relationAttributeName:pageLength")," (e.g employees:20)."),(0,n.kt)("h4",r({},{id:"exemple-1-3"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\nvar $persons : cs.PersonsSelection\nvar $p : cs.PersonsEntity\nvar $contextA : Object\nvar $info : Object\nvar $text : Text\n\n// Ouvrir datastore distant\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n// d\xe9finir le contexte\n$contextA:=New object("context"; "contextA")\n$ds.setRemoteContextInfo("contextA"; $ds.Persons; "firstname, lastname")\n\n// envoi de requ\xeates au serveur dans une boucle\n$persons:=$ds.Persons.all($contextA)\n$text:=""\nFor each ($p; $persons)\n    $text:=$p.firstname + " " + $p.lastname\nEnd for each\n\n// v\xe9rifier le contenu du contexte\n$info:=$ds.getRemoteContextInfo("contextA")\n// $info = {name:"contextA";dataclass:"Persons";main:"firstname, lastname"}\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Cet exemple est \xe0 but de d\xe9monstration, il n'est pas destin\xe9 \xe0 une impl\xe9mentation r\xe9elle.")),(0,n.kt)("h4",r({},{id:"exemple-2-3"}),"Exemple 2"),(0,n.kt)("p",null,"Le code suivant demande des pages de 30 entit\xe9s de la dataclass ",(0,n.kt)("inlineCode",{parentName:"p"},"Address")," au serveur. Les entit\xe9s retourn\xe9es contiennent uniquement l'attribut ",(0,n.kt)("inlineCode",{parentName:"p"},"zipCode"),"."),(0,n.kt)("p",null,"Pour chaque entit\xe9 ",(0,n.kt)("inlineCode",{parentName:"p"},"Address"),", 20 entit\xe9s Persons sont retourn\xe9es, et elles contiennent uniquement les attributs ",(0,n.kt)("inlineCode",{parentName:"p"},"lastname")," et ",(0,n.kt)("inlineCode",{parentName:"p"},"firstname")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$ds.setRemoteContextInfo("contextA"; $ds.Address; "zipCode, persons:20,\\\npersons.lastname, persons.firstname"; "main"; 30)\n')),(0,n.kt)("h4",r({},{id:"example-3---listbox"}),"Example 3 - Listbox"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'// Au chargement du formulaire\nCase of\n    : (Form event code=On Load)\n\n        Form.ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n       // d\xe9finir les attributs du contexte de page\n        Form.ds.setRemoteContextInfo("LB"; Form.ds.Persons; "age, gender,\\\n        children"; "currentItem")\n\n        Form.settings:=New object("context"; "LB")\n        Form.persons:=Form.ds.Persons.all(Form.settings)\n        // Form.persons est affich\xe9 dans une list box\nEnd case\n\n// vous r\xe9cup\xe9rez les attributs dans le contexte de l\'\xe9l\xe9ment courant:\nForm.currentItemLearntAttributes:=Form.selectedPerson.getRemoteContextAttributes()\n// Form.currentItemLearntAttributes = "age, gender, children"\n')),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-9"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearallremotecontexts"}),".clearAllRemoteContexts()")),(0,n.kt)("h2",r({},{id:"startrequestlog"}),".startRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Prise en charge c\xf4t\xe9 serveur, nouveau param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"td"},"options"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"()",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"p"},"file")," : 4D.File )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"p"},"file")," : 4D.File ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"p"},"reqNum")," : Integer )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"file"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D.File"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objet File")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"options"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Option d'enregistrement de r\xe9ponse (serveur uniquement)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"reqNum"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nombre de demandes \xe0 garder en m\xe9moire (client uniquement)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-19"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"startRequestLog()")," d\xe9marre l'enregistrement des requ\xeates ORDA c\xf4t\xe9 client ou c\xf4t\xe9 serveur. Elle est con\xe7ue \xe0 des fins de d\xe9bogage dans les configurations client/serveur."),(0,n.kt)("admonition",r({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Pour une description du format du journal des requ\xeates ORDA, veuillez vous r\xe9f\xe9rer \xe0 la section ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/fr/20-R4/Debugging/debugLogFiles#orda-requests"}),(0,n.kt)("strong",{parentName:"a"},"Requ\xeates ORDA")),".")),(0,n.kt)("h4",r({},{id:"c\xf4t\xe9-client"}),"C\xf4t\xe9 client"),(0,n.kt)("p",null,"Pour cr\xe9er un journal des requ\xeates ORDA c\xf4t\xe9 client, appelez cette fonction sur une machine distante. Le journal peut \xeatre envoy\xe9 \xe0 un fichier ou en m\xe9moire, selon le type de param\xe8tre :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si vous avez pass\xe9 un objet ",(0,n.kt)("em",{parentName:"p"},"file")," cr\xe9\xe9 \xe0 l'aide de la commande ",(0,n.kt)("inlineCode",{parentName:"p"},"File"),", les donn\xe9es de l'enregistrement sont \xe9crites dans ce fichier sous forme de collection d'objets (format JSON). Chaque objet repr\xe9sente une requ\xeate.",(0,n.kt)("br",null),"Si le fichier n'existe pas encore, il est cr\xe9\xe9. Sinon, s'il existe d\xe9j\xe0, les nouvelles donn\xe9es d'enregistrement y sont ajout\xe9es. Si la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," est appel\xe9e avec un fichier alors qu'un enregistrement des requ\xeates est d\xe9j\xe0 en cours en m\xe9moire, l'enregistrement en m\xe9moire est stopp\xe9 et vid\xe9."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Un caract\xe8re ","]"," doit \xeatre ajout\xe9 manuellement \xe0 la fin du fichier pour effectuer une validation JSON"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si vous avez pass\xe9 un num\xe9ro ",(0,n.kt)("em",{parentName:"p"},"reqNum"),", l'enregistrement en m\xe9moire est vid\xe9 (le cas \xe9ch\xe9ant) et un nouvel enregistrement est lanc\xe9. Il gardera en m\xe9moire les requ\xeates jusqu'\xe0 atteindre le nombre ",(0,n.kt)("em",{parentName:"p"},"reqNum"),", auquel cas les entr\xe9es pr\xe9c\xe9dentes sont vid\xe9es (pile FIFO).",(0,n.kt)("br",null),"Si la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," est appel\xe9e avec un ",(0,n.kt)("em",{parentName:"p"},"reqNum")," alors qu'un enregistrement des requ\xeates dans un fichier est d\xe9j\xe0 en cours, l'enregistrement dans le fichier est stopp\xe9.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si vous n'avez pass\xe9 aucun param\xe8tre, l'enregistrement est lanc\xe9 dans la m\xe9moire. Si ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," a \xe9t\xe9 pr\xe9alablement appel\xe9e avec un ",(0,n.kt)("em",{parentName:"p"},"reqNum")," (avant un ",(0,n.kt)("inlineCode",{parentName:"p"},".stopRequestLog()"),"), les donn\xe9es enregistr\xe9es sont empil\xe9es dans la m\xe9moire jusqu'au prochain vidage ou appel de ",(0,n.kt)("inlineCode",{parentName:"p"},".stopRequestLog()"),"."))),(0,n.kt)("h4",r({},{id:"c\xf4t\xe9-serveur"}),"C\xf4t\xe9 serveur"),(0,n.kt)("p",null,"Pour cr\xe9er un journal des requ\xeates ORDA c\xf4t\xe9 serveur, appelez cette fonction sur la machine serveur. Les donn\xe9es du journal sont \xe9crites dans un fichier au format ",(0,n.kt)("inlineCode",{parentName:"p"},".jsonl"),". Chaque objet repr\xe9sente une requ\xeate. Si le fichier n'existe pas encore, il est cr\xe9\xe9. Sinon, s'il existe d\xe9j\xe0, les nouvelles donn\xe9es d'enregistrement y sont ajout\xe9es."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si vous avez pass\xe9 le param\xe8tre ",(0,n.kt)("em",{parentName:"li"},"file")," , les donn\xe9es du journal sont \xe9crites dans ce fichier, \xe0 l'emplacement demand\xe9. - Si vous omettez le param\xe8tre ",(0,n.kt)("em",{parentName:"li"},"file")," ou s'il est null, les donn\xe9es du journal sont \xe9crites dans un fichier nomm\xe9 ",(0,n.kt)("em",{parentName:"li"},"ordaRequests.jsonl"),' et stock\xe9es dans le dossier "/LOGS".'),(0,n.kt)("li",{parentName:"ul"},"Le param\xe8tre ",(0,n.kt)("em",{parentName:"li"},"options")," peut \xeatre utilis\xe9 pour sp\xe9cifier si la r\xe9ponse du serveur doit \xeatre enregistr\xe9e et si elle doit inclure le corps du message. Par d\xe9faut, lorsque le param\xe8tre est omis, la r\xe9ponse compl\xe8te est enregistr\xe9e. Les constantes suivantes peuvent \xeatre utilis\xe9es dans ce param\xe8tre :")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"srl log all"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Enregistrer enti\xe8rement la r\xe9ponse (valeur par d\xe9faut)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"srl log no response"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"D\xe9sactiver l'enregistrement de la r\xe9ponse")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"srl log response without body"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Enregistrer la r\xe9ponse sans le corps (body)")))),(0,n.kt)("h4",r({},{id:"exemple-1-4"}),"Exemple 1"),(0,n.kt)("p",null,"Vous souhaitez enregistrer des requ\xeates ORDA clientes dans un fichier et utiliser le num\xe9ro de s\xe9quence de l'enregistrement :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $file : 4D.File\n var $e : cs.PersonsEntity\n\n $file:=File("/LOGS/ORDARequests.txt") //dossier logs\n\n SET DATABASE PARAMETER(Client Log Recording;1) //pour d\xe9clencher le num\xe9ro de s\xe9quence log global \n ds.startRequestLog($file)\n $e:=ds.Persons.get(30001) //envoyer une requ\xeate\n ds.stopRequestLog()\n SET DATABASE PARAMETER(Client Log Recording;0)\n')),(0,n.kt)("h4",r({},{id:"exemple-2-4"}),"Exemple 2"),(0,n.kt)("p",null,"Vous souhaitez enregistrer des requ\xeates ORDA clientes dans la m\xe9moire :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs.PersonsSelection\n var $log : Collection\n\n ds.startRequestLog(3) //garde 3 requ\xeates dans la m\xe9moire\n\n $es:=ds.Persons.query("name=:1";"Marie")\n $es:=ds.Persons.query("name IN :1";New collection("Marie"))\n $es:=ds.Persons.query("name=:1";"So@")\n\n $log:=ds.getRequestLog()\n ALERT("The longest request lasted: "+String($log.max("duration"))+" ms")\n')),(0,n.kt)("h4",r({},{id:"exemple-3-1"}),"Exemple 3"),(0,n.kt)("p",null,"Vous souhaitez enregistrer les requ\xeates du serveur ORDA dans un fichier sp\xe9cifique et activer le num\xe9ro de s\xe9quence du log et la dur\xe9e :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'SET DATABASE PARAMETER(4D Server Log Recording;1)\n\n$file:=Folder(fk logs folder).file("myOrdaLog.jsonl")\nds.startRequestLog($file)\n...\nds.stopRequestLog()\nSET DATABASE PARAMETER(4D Server Log Recording;0)\n\n\n')),(0,n.kt)("h2",r({},{id:"starttransaction"}),".startTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".startTransaction()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ne requiert aucun param\xe8tre")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-20"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".startTransaction()")," d\xe9marre une transaction dans le process courant sur la base de donn\xe9es du datastore. Toute modification apport\xe9e aux entit\xe9s du datastore dans le process de la transaction est temporairement stock\xe9e jusqu'\xe0 ce que la transaction soit valid\xe9e ou annul\xe9e."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Si cette m\xe9thode est appel\xe9e sur le datastore principal (c'est-\xe0-dire le datastore retourn\xe9 par la commande ",(0,n.kt)("inlineCode",{parentName:"p"},"ds"),"), la transaction est appliqu\xe9e \xe0 toutes les op\xe9rations effectu\xe9es sur le datastore principal et sur la base de donn\xe9es sous-jacente, incluant donc le langage ORDA et le langage classique.")),(0,n.kt)("p",null,"Vous pouvez imbriquer plusieurs transactions (sous-transactions). Chaque transaction ou sous-transaction doit \xeatre annul\xe9e ou valid\xe9e. A noter que si la transaction principale est annul\xe9e, toutes ses sous-transactions le sont \xe9galement, m\xeame si elles avaient \xe9t\xe9 valid\xe9es individuellement \xe0 l'aide de la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".validateTransaction()"),"."),(0,n.kt)("h4",r({},{id:"exemple-14"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connect; $status : Object\n var $person : cs.PersonsEntity\n var $ds : cs.DataStore\n var $choice : Text\n var $error : Boolean\n\n Case of\n    :($choice="local")\n       $ds:=ds\n    :($choice="remote")\n       $connect:=New object("hostname";"111.222.3.4:8044")\n       $ds:=Open datastore($connect;"myRemoteDS")\n End case\n\n $ds.startTransaction()\n $person:=$ds.Persons.query("lastname=:1";"Peters").first()\n\n If($person#Null)\n    $person.lastname:="Smith"\n    $status:=$person.save()\n End if\n ...\n ...\n If($error)\n    $ds.cancelTransaction()\n Else\n    $ds.validateTransaction()\n End if\n')),(0,n.kt)("h2",r({},{id:"stoprequestlog"}),".stopRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Server side support")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".stopRequestLog()"),"  "),(0,n.kt)("p",null,"| Param\xe8tres | Type |  | Description                                            |\n| ---------- | ---- |  | ------------------------------------------------------ |\n|            |      |  | Ne requiert aucun param\xe8tre|"),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-21"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"stopRequestLog()")," stops any logging of ORDA requests on the machine it is called (client or server)."),(0,n.kt)("p",null,"Cela ferme en fait le document ouvert sur le disque. C\xf4t\xe9 client, si le journal a \xe9t\xe9 d\xe9marr\xe9 en m\xe9moire, il est arr\xeat\xe9."),(0,n.kt)("p",null,"Cette fonction ne fait rien si la journalisation des requ\xeates ORDA n'a pas \xe9t\xe9 d\xe9marr\xe9e sur la machine."),(0,n.kt)("h4",r({},{id:"exemple-15"}),"Exemple"),(0,n.kt)("p",null,"Voir les exemples de ",(0,n.kt)("a",r({parentName:"p"},{href:"#startrequestlog"}),(0,n.kt)("inlineCode",{parentName:"a"},".startRequestLog()")),"."),(0,n.kt)("h2",r({},{id:"unlock"}),".unlock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".unlock()")),(0,n.kt)("p",null,"| Param\xe8tres | Type |  | Description                                            |\n| ---------- | ---- |  | ------------------------------------------------------ |\n|            |      |  | Ne requiert aucun param\xe8tre|"),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-22"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"unlock()")," supprime le verrou sur les op\xe9rations d'\xe9criture dans le datastore, s'il a \xe9t\xe9 pos\xe9 dans le m\xeame process. Les op\xe9rations d'\xe9criture peuvent \xeatre verrouill\xe9es dans le datastore local \xe0 l'aide de la fonction ",(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),(0,n.kt)("inlineCode",{parentName:"a"},".flushAndLock()")),"."),(0,n.kt)("p",null,"Si le verrou courant \xe9tait le seul verrou sur le datastore, les op\xe9rations d'\xe9criture sont imm\xe9diatement r\xe9activ\xe9es. Si la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," a \xe9t\xe9 appel\xe9e plusieurs fois dans le process, le m\xeame nombre de ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," doit \xeatre appel\xe9 pour d\xe9verrouiller r\xe9ellement le datastore."),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," doit \xeatre appel\xe9e par le process qui a appel\xe9 la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()"),"correspondante, sinon la fonction ne fait rien et le verrou n'est pas supprim\xe9."),(0,n.kt)("p",null,"Si la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," est appel\xe9e dans un datastore d\xe9verrouill\xe9, elle ne fait rien."),(0,n.kt)("h4",r({},{id:"voir-\xe9galement-10"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),".flushAndLock()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#locked"}),".locked()")),(0,n.kt)("h2",r({},{id:"validatetransaction"}),".validateTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".validateTransaction()"),"  "),(0,n.kt)("p",null,"| Param\xe8tres | Type |  | Description                                            |\n| ---------- | ---- |  | ------------------------------------------------------ |\n|            |      |  | Ne requiert aucun param\xe8tre|"),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"description-23"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".validateTransaction()")," valide la transaction d\xe9marr\xe9e avec ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()"))," au niveau correspondant dans le datastore."),(0,n.kt)("p",null,"La fonction sauvegarde les modifications apport\xe9es aux donn\xe9es sur le datastore durant la transaction."),(0,n.kt)("p",null,"Vous pouvez imbriquer plusieurs transactions (sous-transactions). Si la transaction principale est annul\xe9e, toutes ses sous-transactions sont \xe9galement annul\xe9es, m\xeame si elles ont \xe9t\xe9 valid\xe9es individuellement \xe0 l'aide de cette fonction."),(0,n.kt)("h4",r({},{id:"exemple-16"}),"Exemple"),(0,n.kt)("p",null,"Voir l'exemple de ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()")),"."))}m.isMDXComponent=!0}}]);