"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[73642],{338177:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>o,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var t=r(474848),s=r(28453);const a={id:"ldap-search-all",title:"LDAP SEARCH ALL",slug:"/commands/ldap-search-all",displayed_sidebar:"docs"},l=void 0,i={id:"commands-legacy/ldap-search-all",title:"LDAP SEARCH ALL",description:"LDAP SEARCH ALL ( dnRootEntry ; tabR\xe9sultat ; filtre {; scope {; attributs {; attributsEnTableau}}} )",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R7/commands-legacy/ldap-search-all.md",sourceDirName:"commands-legacy",slug:"/commands/ldap-search-all",permalink:"/docs/fr/commands/ldap-search-all",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fldap-search-all.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"ldap-search-all",title:"LDAP SEARCH ALL",slug:"/commands/ldap-search-all",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"LDAP Search",permalink:"/docs/fr/commands/ldap-search"},next:{title:"Language",permalink:"/docs/fr/category/commands/Language"}},d={},c=[{value:"Description",id:"description",level:4},{value:"Exemple 1",id:"exemple-1",level:4},{value:"Exemple 2",id:"exemple-2",level:4},{value:"Voir aussi",id:"voir-aussi",level:4}];function u(e){const n={a:"a",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"LDAP SEARCH ALL"})," ( ",(0,t.jsx)(n.em,{children:"dnRootEntry"})," ; ",(0,t.jsx)(n.em,{children:"tabR\xe9sultat"})," ; ",(0,t.jsx)(n.em,{children:"filtre"})," {; ",(0,t.jsx)(n.em,{children:"scope"})," {; ",(0,t.jsx)(n.em,{children:"attributs"})," {; ",(0,t.jsx)(n.em,{children:"attributsEnTableau"}),"}}} )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Param\xe8tre"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"dnRootEntry"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:"Distinguished Name de l'\xe9l\xe9ment racine o\xf9 d\xe9marrer la recherche"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"tabR\xe9sultat"}),(0,t.jsx)(n.td,{children:"Object array"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"R\xe9sultat de la recherche"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"filtre"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:"Filtre de recherche LDAP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"scope"}),(0,t.jsx)(n.td,{children:"Text"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:'Champ d\'action de la recherche : "base" (d\xe9faut), "one" ou "sub"'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"attributs"}),(0,t.jsx)(n.td,{children:"Text array"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:"Attribut(s) \xe0 r\xe9cup\xe9rer"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"attributsEnTableau"}),(0,t.jsx)(n.td,{children:"Boolean array"}),(0,t.jsx)(n.td,{children:"\u2192"}),(0,t.jsx)(n.td,{children:"Vrai = forcer le retour des attributs en tableaux, Faux = forcer le retour des attributs en variables simples"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Cette commande n'est pas thread-safe, elle ne peut pas \xeatre utilis\xe9e dans du code pr\xe9emptif."})}),"\n",(0,t.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["La commande ",(0,t.jsx)(n.strong,{children:"LDAP SEARCH ALL"})," recherche sur le server LDAP cible toutes les occurrences correspondant aux crit\xe8res d\xe9finis. Cette commande doit \xeatre ex\xe9cut\xe9e dans le contexte d'une connexion serveur LDAP ouverte par la commande ",(0,t.jsx)(n.a,{href:"/docs/fr/commands/ldap-login",children:"LDAP LOGIN"})," dans le process courant ; sinon une erreur 1003 est retourn\xe9e."]}),"\n",(0,t.jsx)(n.p,{children:"A noter que les serveurs LDAP imposent g\xe9n\xe9ralement un nombre maximum d'entr\xe9es qui peuvent \xeatre r\xe9cup\xe9r\xe9es lors d'une recherche. Par exemple, Microsoft Active directory limite de nombre \xe0 1000 entr\xe9es par d\xe9faut."}),"\n",(0,t.jsxs)(n.p,{children:["Dans ",(0,t.jsx)(n.em,{children:"dnRootEntry"}),", passez le ",(0,t.jsx)(n.em,{children:"Distinguished Name"})," de l'\xe9l\xe9ment racine du serveur LDAP ; la recherche d\xe9marrera \xe0 partir de cet \xe9l\xe9ment."]}),"\n",(0,t.jsxs)(n.p,{children:["Dans ",(0,t.jsx)(n.em,{children:"tabResult"}),", passez un tableau objet qui sera rempli avec les entr\xe9es trouv\xe9es ; dans ce tableau, chaque \xe9l\xe9ment est un objet contenant les paires attributs/valeurs retourn\xe9es pour une entr\xe9e trouv\xe9e. Vous pouvez utiliser le param\xe8tre ",(0,t.jsx)(n.em,{children:"attributs"})," pour d\xe9finir les param\xe8tres \xe0 retourner."]}),"\n",(0,t.jsxs)(n.p,{children:["Dans ",(0,t.jsx)(n.em,{children:"filtre"}),", passez le filtre de recherche LDAP \xe0 appliquer. Ce filtre doit \xeatre conforme \xe0 la ",(0,t.jsx)(n.a,{href:"http://tools.ietf.org/search/rfc2254",children:"rfc2225"}),'. Vous pouvez passer une cha\xeene vide "" afin de ne pas appliquer de filtre. Le joker "*" pour chercher des sous-cha\xeenes est pris en charge.']}),"\n",(0,t.jsxs)(n.p,{children:["Dans ",(0,t.jsx)(n.em,{children:"scope"}),', passez une des constantes suivantes du th\xe8me "',(0,t.jsx)(n.em,{children:"LDAP"}),'" :']}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Constante"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Valeur"}),(0,t.jsx)(n.th,{children:"Comment"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"LDAP all levels"}),(0,t.jsx)(n.td,{children:"Cha\xeene"}),(0,t.jsx)(n.td,{children:"sub"}),(0,t.jsxs)(n.td,{children:["Chercher dans l'\xe9l\xe9ment racine d\xe9fini par ",(0,t.jsx)(n.em,{children:"dnRootEntry"})," et dans toutes les branches suivantes"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"LDAP root and next"}),(0,t.jsx)(n.td,{children:"Cha\xeene"}),(0,t.jsx)(n.td,{children:"one"}),(0,t.jsxs)(n.td,{children:["Chercher dans l'\xe9l\xe9ment racine d\xe9fini par ",(0,t.jsx)(n.em,{children:"dnRootEntry"})," et dans les branches directement suivantes sur un niveau"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"LDAP root only"}),(0,t.jsx)(n.td,{children:"Cha\xeene"}),(0,t.jsx)(n.td,{children:"base"}),(0,t.jsxs)(n.td,{children:["Chercher uniquement dans l'\xe9l\xe9ment racine d\xe9fini par ",(0,t.jsx)(n.em,{children:"dnRootEntry"})," (d\xe9faut si omis)"]})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Dans ",(0,t.jsx)(n.em,{children:"attributs"}),", passez un tableau texte contenant la liste de tous les attributs LDAP \xe0 r\xe9cup\xe9rer \xe0 partir des entr\xe9es trouv\xe9es. Par d\xe9faut, si ce param\xe8tre est omis, tous les attributs sont r\xe9cup\xe9r\xe9s."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note :"})," Les noms d'attributs LDAP tiennent compte des majuscules/minuscules. Pour plus d'informations sur les attributs LDAP, vous pouvez consulter ",(0,t.jsx)(n.a,{href:"https://msdn.microsoft.com/en-us/library/ms675089%28v=vs.85%29.aspx",children:"cette page"})," qui liste tous les attributs disponibles pour MS Active Directory."]}),"\n",(0,t.jsxs)(n.p,{children:["Par d\xe9faut, la commande retourne les attributs sous forme de tableau si plusieurs r\xe9sultats sont trouv\xe9s, ou sous forme de variable simple si un seul r\xe9sultat est trouv\xe9. Le param\xe8tre optionnel ",(0,t.jsx)(n.em,{children:"attributsEnTableau"}),' vous permet de "forcer" le formatage des attributs retourn\xe9s en tableau ou en variable pour chaque attribut d\xe9fini :']}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Lorsque vous passez ",(0,t.jsx)(n.strong,{children:"true"})," dans un \xe9l\xe9ment, l'\xe9l\xe9ment correspondant du param\xe8tre ",(0,t.jsx)(n.em,{children:"attributs"})," sera retourn\xe9 en tableau. Si une seule valeur est trouv\xe9e, la commande retourne un tableau \xe0 un seul \xe9l\xe9ment."]}),"\n",(0,t.jsxs)(n.li,{children:["Lorsque vous passez ",(0,t.jsx)(n.strong,{children:"false"})," dans un \xe9l\xe9ment, l'\xe9l\xe9ment correspondant du param\xe8tre ",(0,t.jsx)(n.em,{children:"attributs"})," sera retourn\xe9 en variable simple. Si plusieurs valeurs sont trouv\xe9es, la commande retourne uniquement le premier \xe9l\xe9ment."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"exemple-1",children:"Exemple 1"}),"\n",(0,t.jsx)(n.p,{children:"Nous voulons r\xe9cup\xe9rer les num\xe9ros de t\xe9l\xe9phone de tous les utilisateurs nomm\xe9s \"smith\" dans l'annuaire d'enterprise :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY TEXT($_tabAttributes;0)\n\xa0ARRAY BOOLEAN($_tabAttributes_asArray;0)\n\xa0APPEND TO ARRAY($_tabAttributes;"cn")\n\xa0APPEND TO ARRAY($_tabAttributes_asArray;False)\n\xa0APPEND TO ARRAY($_tabAttributes;"telephoneNumber")\n\xa0APPEND TO ARRAY($_tabAttributes_asArray;False)\n\xa0ARRAY OBJECT($_entry;0)\n\xa0\n\xa0LDAP LOGIN($url;$myLogin;$pwd)\n\xa0$filter:="cn=*smith*"\n\xa0LDAP SEARCH ALL($dnSearchRootEntry;$_entry;$filter;LDAP all levels;$_tabAttributes)\n\xa0LDAP LOGOUT\n\xa0\n\xa0\n\xa0\xa0//$_entry contiendra par exemple\n\xa0\xa0// $_entry{1} = {"cn":"John Smith","telephoneNumber":"01 40 87 00 00"}\n\xa0\xa0// $_entry{2} = {"cn":"Adele Smith","telephoneNumber":"01 40 87 00 01"}\n\xa0\xa0// $_entry{3} = {"cn":"Adrian Smith","telephoneNumber":"01 23 45 67 89"}\n\xa0\xa0// ...\n'})}),"\n",(0,t.jsx)(n.h4,{id:"exemple-2",children:"Exemple 2"}),"\n",(0,t.jsxs)(n.p,{children:["Ces exemples illustrent plus particuli\xe8rement l'utilisation du param\xe8tre ",(0,t.jsx)(n.em,{children:"attributsEnTableau"})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY OBJECT($_entry;0)\n\xa0ARRAY TEXT($_tabAttributes;0)\n\xa0ARRAY BOOLEAN($_tabAttributes_asArray;0)\n\xa0APPEND TO ARRAY($_tabAttributes;"cn")\n\xa0APPEND TO ARRAY($_tabAttributes_asArray;False)\n\xa0APPEND TO ARRAY($_tabAttributes;"memberOf")\n\xa0APPEND TO ARRAY($_tabAttributes_asArray;True)\n\xa0\n\xa0LDAP LOGIN($url;$login;$pwd;LDAP password plain text)\n\xa0LDAP SEARCH ALL($dnSearchRootEntry;$_entry;$filter;LDAP all levels;$_tabAttributes;$_tabAttributes_asArray)\n\xa0LDAP LOGOUT\n\xa0\n\xa0ARRAY TEXT($_arrMemberOf;0)\n\xa0OB GET ARRAY($_entry{1};"memberOf";$_arrMemberOf)\n\xa0\xa0// $_arrMemberOf est un tableau contenant tous les groupes de l\'entr\xe9e\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'\xa0ARRAY TEXT($_tabAttributes;0)\n\xa0ARRAY BOOLEAN($_tabAttributes_asArray;0)\n\xa0APPEND TO ARRAY($_tabAttributes;"cn")\n\xa0APPEND TO ARRAY($_tabAttributes_asArray;False)\n\xa0APPEND TO ARRAY($_tabAttributes;"memberOf")\n\xa0APPEND TO ARRAY($_tabAttributes_asArray;False)\n\xa0\n\xa0LDAP LOGIN($url;$login;$pwd;LDAP password plain text)\n\xa0LDAP SEARCH ALL($dnSearchRootEntry;$_entry;$filter;LDAP all levels;$_tabAttributes;$_tabAttributes_asArray)\n\xa0LDAP LOGOUT\n\xa0\n\xa0$memberOf:=OB Get($_entry{1};"memberOf")\n\xa0\xa0// $memberOf est une variable contenant le premier groupe de l\'entr\xe9e\n'})}),"\n",(0,t.jsx)(n.h4,{id:"voir-aussi",children:"Voir aussi"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"LDAP"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.a,{href:"/docs/fr/commands/ldap-search",children:"LDAP Search"})]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>i});var t=r(296540);const s={},a=t.createContext(s);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);