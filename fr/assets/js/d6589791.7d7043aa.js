"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["71268"],{805136:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>l,default:()=>h,toc:()=>c,metadata:()=>r,assets:()=>d,contentTitle:()=>i});var r=JSON.parse('{"id":"commands-legacy/wa-evaluate-javascript","title":"WA Evaluate JavaScript","description":"WA Evaluate JavaScript ( { ;} objet ; codeJS {; type*} )  : any","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R9/commands-legacy/wa-evaluate-javascript.md","sourceDirName":"commands-legacy","slug":"/commands/wa-evaluate-javascript","permalink":"/docs/fr/20-R9/commands/wa-evaluate-javascript","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fwa-evaluate-javascript.md%20(20-R9)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R9","frontMatter":{"id":"wa-evaluate-javascript","title":"WA Evaluate JavaScript","slug":"/commands/wa-evaluate-javascript","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"WA Create URL history menu","permalink":"/docs/fr/20-R9/commands/wa-create-url-history-menu"},"next":{"title":"WA EXECUTE JAVASCRIPT FUNCTION","permalink":"/docs/fr/20-R9/commands/wa-execute-javascript-function"}}'),s=t(785893),a=t(250065);let l={id:"wa-evaluate-javascript",title:"WA Evaluate JavaScript",slug:"/commands/wa-evaluate-javascript",displayed_sidebar:"docs"},i=void 0,d={},c=[{value:"Description",id:"description",level:2},{value:"Exemple 1",id:"exemple-1",level:2},{value:"Exemple 2",id:"exemple-2",level:2},{value:"Voir aussi",id:"voir-aussi",level:2},{value:"Propri\xe9t\xe9s",id:"propri\xe9t\xe9s",level:2}];function o(e){let n={a:"a",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"WA Evaluate JavaScript"})," ( {* ;} ",(0,s.jsx)(n.em,{children:"objet"})," ; ",(0,s.jsx)(n.em,{children:"codeJS"})," {; ",(0,s.jsx)(n.em,{children:"type"}),"} )  : any"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Param\xe8tre"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"*"}),(0,s.jsx)(n.td,{children:"Op\xe9rateur"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Si sp\xe9cifi\xe9, objet est un nom d'objet (cha\xeene) Si omis, objet est une variable"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"objet"}),(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Nom d'objet (si * est sp\xe9cifi\xe9) ou Variable (si * est omis)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"codeJS"}),(0,s.jsx)(n.td,{children:"Text"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Code JavaScript"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"type"}),(0,s.jsx)(n.td,{children:"Integer"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Type dans lequel convertir le r\xe9sultat"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"R\xe9sultat"}),(0,s.jsx)(n.td,{children:"Date, Time, Object, Pointer, Real, Text"}),(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"R\xe9sultat de l\u2019ex\xe9cution"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["La commande ",(0,s.jsx)(n.strong,{children:"WA Evaluate JavaScript"})," ex\xe9cute dans la zone Web d\xe9sign\xe9e par les param\xe8tres ",(0,s.jsx)(n.em,{children:"*"})," et ",(0,s.jsx)(n.em,{children:"objet"})," le code JavaScript pass\xe9 dans ",(0,s.jsx)(n.em,{children:"codeJS"})," et retourne le r\xe9sultat. Cette commande doit \xeatre appel\xe9e apr\xe8s le chargement complet de la page (l'\xe9v\xe9nement formulaire On End URL Loading doit avoir \xe9t\xe9 g\xe9n\xe9r\xe9)."]}),"\n",(0,s.jsxs)(n.p,{children:["Par d\xe9faut, la commande retourne le r\xe9sultat sous forme de cha\xeene. Vous pouvez toutefois pr\xe9ciser le typage de la valeur retourn\xe9e \xe0 l\u2019aide du param\xe8tre optionnel ",(0,s.jsx)(n.em,{children:"type"}),". Pour cela, vous pouvez passer dans ",(0,s.jsx)(n.em,{children:"type"}),' une des constantes suivantes, plac\xe9es dans le th\xe8me "',(0,s.jsx)(n.em,{children:"Types champs et variables"}),'" :']}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Constante"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Valeur"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Is Boolean"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"6"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Is collection"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"42"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Is date"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Is longint"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"9"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Is object"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"38"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Is real"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Is text"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Is time"}),(0,s.jsx)(n.td,{children:"Entier long"}),(0,s.jsx)(n.td,{children:"11"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Attention :"})," L'utilisation de cette commande pour appeler directement une fonction JavaScript qui affiche un dialogue (",(0,s.jsx)(n.strong,{children:"alert()"}),", ",(0,s.jsx)(n.strong,{children:"print()."}),"..) n'est pas recommand\xe9e car l'utilisateur ne peut pas interagir avec la zone Web pendant l'ex\xe9cution du code 4D. Si vous devez impl\xe9menter une telle interface, vous pouvez par exemple appeler ",(0,s.jsx)(n.strong,{children:"setTimeout(function(){alert();}, 50))"})," pour laisser l'ex\xe9cution du code 4D se terminer et permettre l'interaction de l'utilisateur."]}),"\n",(0,s.jsx)(n.h2,{id:"exemple-1",children:"Exemple 1"}),"\n",(0,s.jsx)(n.p,{children:"Cet exemple de code JavaScript provoque l'affichage de l'url pr\xe9c\xe9dent :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0$r\xe9sultat:=WA Evaluate JavaScript(MaZoneW;"history.back()")\n'})}),"\n",(0,s.jsx)(n.h2,{id:"exemple-2",children:"Exemple 2"}),"\n",(0,s.jsx)(n.p,{children:"Cet exemple montre quelques \xe9valuations avec conversion des valeurs re\xe7ues."}),"\n",(0,s.jsx)(n.p,{children:"Des fonctions JavaScript sont plac\xe9es dans un fichier html :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-HTML",children:'<!DOCTYPE html>\n<html>\n\xa0\xa0\xa0 <head>\n\xa0\xa0\xa0 \xa0\xa0\xa0 <script>\n\xa0\xa0\xa0 \xa0\xa0\xa0 function evalLong(){\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 return 123;\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 function evalTexte(){\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 return "456";\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 function evalObjet(){\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 return {a:1,b:"hello world"};\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 \xa0\xa0\xa0 function evalDate(){\n\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 return new Date();\n\xa0\xa0\xa0 \xa0\xa0\xa0 }\n\xa0\xa0\xa0 <\/script>\n\xa0\xa0\xa0 </head>\n\xa0\xa0\xa0 <body>\n\xa0\xa0\xa0 \xa0\xa0\xa0 TEST PAGE\n\xa0\xa0\xa0 </body>\n</html>\n'})}),"\n",(0,s.jsx)(n.p,{children:"Vous \xe9crivez dans la m\xe9thode du formulaire 4D :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0If(Form event code=On Load)\n\xa0\xa0\xa0\xa0WA OPEN URL(*;"Web Area";"C:\\\\myBase\\\\index.html")\n\xa0End if\n'})}),"\n",(0,s.jsx)(n.p,{children:"Vous pouvez alors \xe9valuer le code JavaScript depuis 4D :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0$Eval1:=WA Evaluate JavaScript(*;"Web Area";"evalLong()";Is longint)\n\xa0\xa0\xa0\xa0\xa0//$Eval1 = 123\n\xa0\xa0\xa0\xa0\xa0//$Eval1 = "123" si le type est omis\n\xa0$Eval2:=WA Evaluate JavaScript(*;"Web Area";"evalTexte()";Is text)\n\xa0\xa0\xa0\xa0\xa0//$Eval2 = "456"\n\xa0$Eval3:=WA Evaluate JavaScript(*;"Web Area";"evalObjet()";Is object)\n\xa0\xa0\xa0\xa0\xa0//$Eval3 = {"a":1,"b":"hello world"}\n\xa0$Eval4:=WA Evaluate JavaScript(*;"Web Area";"evalDate()";Is date)\n\xa0\xa0\xa0\xa0\xa0//$Eval4 = 21/06/13\n\xa0\xa0\xa0\xa0\xa0//$Eval4 = "2013-06-21T14:45:09.694Z" si le type est omis\n'})}),"\n",(0,s.jsx)(n.h2,{id:"voir-aussi",children:"Voir aussi"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/docs/fr/20-R9/commands/wa-execute-javascript-function",children:"WA EXECUTE JAVASCRIPT FUNCTION"})}),"\n",(0,s.jsx)(n.h2,{id:"propri\xe9t\xe9s",children:"Propri\xe9t\xe9s"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Num\xe9ro de commande"}),(0,s.jsx)(n.td,{children:"1029"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Thread safe"}),(0,s.jsx)(n.td,{children:"\u2717"})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},250065:function(e,n,t){t.d(n,{Z:()=>i,a:()=>l});var r=t(667294);let s={},a=r.createContext(s);function l(e){let n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);