"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["60343"],{987364:function(e,n,t){t.r(n),t.d(n,{metadata:()=>s,contentTitle:()=>a,default:()=>u,assets:()=>d,toc:()=>c,frontMatter:()=>l});var s=JSON.parse('{"id":"REST/classFunctions","title":"Appel des fonctions de classe","description":"You can call data model class functions defined for the ORDA Data Model and singleton class functions through REST requests, so that you can benefit from the exposed API of the targeted 4D application.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R7/REST/ClassFunctions.md","sourceDirName":"REST","slug":"/REST/classFunctions","permalink":"/docs/fr/REST/classFunctions","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20REST%2FClassFunctions.md%20(20-R7)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R7","frontMatter":{"id":"classFunctions","title":"Appel des fonctions de classe"},"sidebar":"docs","previous":{"title":"Manipulation des donn\xe9es","permalink":"/docs/fr/REST/manData"},"next":{"title":"A propos des requ\xeates REST","permalink":"/docs/fr/REST/REST_requests"}}'),i=t("785893"),r=t("250065");let l={id:"classFunctions",title:"Appel des fonctions de classe"},a=void 0,d={},c=[{value:"Appeler des fonctions",id:"appeler-des-fonctions",level:2},{value:"POST request",id:"post-request",level:4},{value:"GET request",id:"get-request",level:4},{value:"Function configuration",id:"function-configuration",level:2},{value:"<code>exposed</code>",id:"exposed",level:3},{value:"<code>onHttpGet</code>",id:"onhttpget",level:3},{value:"Thread-safe",id:"thread-safe",level:3},{value:"Param\xe8tres",id:"param\xe8tres",level:2},{value:"Param\xe8tre de valeur scalaire",id:"param\xe8tre-de-valeur-scalaire",level:3},{value:"POST request",id:"post-request-1",level:4},{value:"GET request",id:"get-request-1",level:4},{value:"Param\xe8tre d&#39;entit\xe9",id:"param\xe8tre-dentit\xe9",level:3},{value:"Param\xe8tre d&#39;entit\xe9 associ\xe9",id:"param\xe8tre-dentit\xe9-associ\xe9",level:4},{value:"Param\xe8tre d&#39;entity selection",id:"param\xe8tre-dentity-selection",level:3},{value:"POST request examples",id:"post-request-examples",level:2},{value:"Utiliser une fonction de classe de datastore",id:"utiliser-une-fonction-de-classe-de-datastore",level:3},{value:"R\xe9sultat",id:"r\xe9sultat",level:4},{value:"Utiliser une fonction de classe de dataclass",id:"utiliser-une-fonction-de-classe-de-dataclass",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-1",level:4},{value:"Utiliser une fonction de classe d&#39;entit\xe9",id:"utiliser-une-fonction-de-classe-dentit\xe9",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-2",level:4},{value:"Utiliser une fonction de classe d&#39;entity selection",id:"utiliser-une-fonction-de-classe-dentity-selection",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-3",level:4},{value:"Utiliser une fonction de classe d&#39;entity selection et un entity set",id:"utiliser-une-fonction-de-classe-dentity-selection-et-un-entity-set",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-4",level:4},{value:"Utiliser une fonction de classe d&#39;entity selection et un &quot;orderBy&quot;",id:"utiliser-une-fonction-de-classe-dentity-selection-et-un-orderby",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-5",level:4},{value:"Utiliser une entit\xe9 \xe0 cr\xe9er sur le serveur",id:"utiliser-une-entit\xe9-\xe0-cr\xe9er-sur-le-serveur",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-6",level:4},{value:"Utiliser une entit\xe9 \xe0 mettre \xe0 jour sur le serveur",id:"utiliser-une-entit\xe9-\xe0-mettre-\xe0-jour-sur-le-serveur",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-7",level:4},{value:"Cr\xe9er une entit\xe9 avec une entit\xe9 li\xe9e",id:"cr\xe9er-une-entit\xe9-avec-une-entit\xe9-li\xe9e",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-8",level:4},{value:"Mettre \xe0 jour une entit\xe9 avec une entit\xe9 li\xe9e",id:"mettre-\xe0-jour-une-entit\xe9-avec-une-entit\xe9-li\xe9e",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-9",level:4},{value:"Recevoir une entity selection comme param\xe8tre",id:"recevoir-une-entity-selection-comme-param\xe8tre",level:3},{value:"R\xe9sultat",id:"r\xe9sultat-10",level:4},{value:"Utiliser une entity selection mise \xe0 jour sur le client",id:"utiliser-une-entity-selection-mise-\xe0-jour-sur-le-client",level:3},{value:"GET request examples",id:"get-request-examples",level:2},{value:"Returning a document",id:"returning-a-document",level:3},{value:"Using an entity to download a PDF document",id:"using-an-entity-to-download-a-pdf-document",level:3},{value:"Using an entity selection to get a list",id:"using-an-entity-selection-to-get-a-list",level:3}];function o(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["You can call ",(0,i.jsx)(n.a,{href:"/docs/fr/ORDA/ordaClasses",children:"data model class functions"})," defined for the ORDA Data Model and ",(0,i.jsx)(n.a,{href:"/docs/fr/REST/singleton",children:"singleton class functions"})," through REST requests, so that you can benefit from the exposed API of the targeted 4D application."]}),"\n",(0,i.jsx)(n.p,{children:"Functions can be called in two ways:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["using ",(0,i.jsx)(n.strong,{children:"POST requests"}),", with data parameters passed in the body of the request."]}),"\n",(0,i.jsxs)(n.li,{children:["using ",(0,i.jsx)(n.strong,{children:"GET requests"}),", with parameters directly passed in the URL."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"POST requests provide a better security level because they avoid running sensitive code through an action as simple as clicking on a link. However, GET requests can be more compliant with user experience, allowing to call functions by entering an URL in a browser (note: the developer must ensure no sensitive action is done in such functions)."}),"\n",(0,i.jsx)(n.h2,{id:"appeler-des-fonctions",children:"Appeler des fonctions"}),"\n",(0,i.jsx)(n.p,{children:"The following ORDA and singleton functions can be called in REST:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Fonction de classe"}),(0,i.jsx)(n.th,{children:"Syntaxe"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/docs/fr/ORDA/ordaClasses#datastore-class",children:"datastore class"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/rest/$catalog/DataStoreClassFunction"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/docs/fr/ORDA/ordaClasses#dataclass-class",children:"dataclass class"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/rest/\\{dataClass\\}/DataClassClassFunction"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/docs/fr/ORDA/ordaClasses#entityselection-class",children:"entitySelection class"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/rest/\\{dataClass\\}/EntitySelectionClassFunction"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/rest/{dataClass}/EntitySelectionClassFunction/$entityset/entitySetNumber"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/rest/{dataClass}/EntitySelectionClassFunction/$filter"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/rest/{dataClass}/EntitySelectionClassFunction/$orderby"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/docs/fr/ORDA/ordaClasses#entity-class",children:"entity class"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/rest/{dataClass}(key)/EntityClassFunction/"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/docs/fr/Concepts/classes#classes-singleton",children:"Classe singleton"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"/rest/$singleton/SingletonClass/SingletonClassFunction"})," (voir ",(0,i.jsx)(n.a,{href:"/docs/fr/REST/singleton",children:"page $singleton"}),")"]})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"/rest/{dataClass}/Function"})," can be used to call either a dataclass or an entity selection function (",(0,i.jsx)(n.code,{children:"/rest/{dataClass}"})," returns all entities of the DataClass as an entity selection). The function is searched in the entity selection class first. Si elle n'est pas trouv\xe9e, elle est recherch\xe9e dans la dataclass. En d'autres termes, si une fonction portant le m\xeame nom est d\xe9finie \xe0 la fois dans la classe DataClass et la classe EntitySelection, la fonction de classe de dataclass ne sera jamais ex\xe9cut\xe9e."]})}),"\n",(0,i.jsxs)(n.p,{children:["Functions are simply called on the appropriate ORDA interface or singleton class, without (). ",(0,i.jsx)(n.a,{href:"#parameters",children:"Parameters"})," are passed either in the body of the POST request (",(0,i.jsx)(n.code,{children:"POST"})," calls) or in the ",(0,i.jsx)(n.code,{children:"params"})," collection in the URL (",(0,i.jsx)(n.code,{children:"GET"})," calls)."]}),"\n",(0,i.jsxs)(n.p,{children:["Par exemple, si vous avez d\xe9fini une fonction ",(0,i.jsx)(n.code,{children:"getCity()"})," dans la dataclass City, vous pouvez l'appeler \xe0 l'aide de la requ\xeate suivante :"]}),"\n",(0,i.jsx)(n.h4,{id:"post-request",children:"POST request"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/rest/City/getCity"})}),"\n",(0,i.jsxs)(n.p,{children:["avec des donn\xe9es contenues dans le body de la requ\xeate POST : ",(0,i.jsx)(n.code,{children:'["Aguada"]'})]}),"\n",(0,i.jsx)(n.h4,{id:"get-request",children:"GET request"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/rest/City/getCity?$params='[\"Aguada\"]'"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"getCity()"})," function must have been declared with the ",(0,i.jsx)(n.code,{children:"onHttpGet"})," keyword (see ",(0,i.jsx)(n.a,{href:"#function-configuration",children:"Function configuration"})," below)."]})}),"\n",(0,i.jsx)(n.p,{children:"En langage 4D, cet appel est \xe9quivalent \xe0 :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'$city:=ds.City.getCity("Aguada")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"function-configuration",children:"Function configuration"}),"\n",(0,i.jsx)(n.h3,{id:"exposed",children:(0,i.jsx)(n.code,{children:"exposed"})}),"\n",(0,i.jsxs)(n.p,{children:["All functions allowed to be called directly from HTTP REST requests (",(0,i.jsx)(n.code,{children:"POST"})," or ",(0,i.jsx)(n.code,{children:"GET"}),") must be declared with the ",(0,i.jsx)(n.code,{children:"exposed"})," keyword. Par exemple :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:"exposed Function getSomeInfo() : 4D.OutgoingMessage\n"})}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/docs/fr/ORDA/ordaClasses#exposed-vs-non-exposed-functions",children:"Exposed vs non-exposed functions"})," section."]}),"\n",(0,i.jsx)(n.h3,{id:"onhttpget",children:(0,i.jsx)(n.code,{children:"onHttpGet"})}),"\n",(0,i.jsxs)(n.p,{children:["Functions allowed to be called from HTTP ",(0,i.jsx)(n.code,{children:"GET"})," requests must also be specifically declared with the ",(0,i.jsxs)(n.a,{href:"/docs/fr/ORDA/ordaClasses#onhttpget-keyword",children:[(0,i.jsx)(n.code,{children:"onHttpGet"})," keyword"]}),". Par exemple :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:"//allowing GET requests\nexposed onHttpGet Function getSomeInfo() : 4D.OutgoingMessage\n"})}),"\n",(0,i.jsx)(n.h3,{id:"thread-safe",children:"Thread-safe"}),"\n",(0,i.jsxs)(n.p,{children:["La totalit\xe9 du code 4D appel\xe9 \xe0 partir de requ\xeates REST ",(0,i.jsx)(n.strong,{children:"doit \xeatre thread-safe"})," si le projet fonctionne en mode compil\xe9, car le serveur REST utilise toujours des process pr\xe9emptifs dans ce cas (la valeur du param\xe8tre ",(0,i.jsx)(n.a,{href:"/docs/fr/WebServer/preemptiveWeb#activer-le-mode-pr%C3%A9emptif-pour-le-serveur-web",children:(0,i.jsx)(n.em,{children:"Utiliser un process pr\xe9emptif"})})," est ignor\xe9e par le serveur REST)."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["You can restrict calls to specific ORDA functions by configuring appropriate privileges in the ",(0,i.jsx)(n.a,{href:"/docs/fr/ORDA/privileges#rolesjson-file",children:(0,i.jsx)(n.strong,{children:"roles.json"})})," file."]})}),"\n",(0,i.jsx)(n.h2,{id:"param\xe8tres",children:"Param\xe8tres"}),"\n",(0,i.jsxs)(n.p,{children:["You can send parameters to functions defined in ORDA user classes or singletons. C\xf4t\xe9 serveur, ils seront re\xe7us dans les ",(0,i.jsx)(n.a,{href:"/docs/fr/Concepts/parameters#declaration-des-parametres",children:"param\xe8tres d\xe9clar\xe9s"})," des fonctions de classe."]}),"\n",(0,i.jsx)(n.p,{children:"Les r\xe8gles suivantes s'appliquent :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In functions called through POST requests, parameters must be passed ",(0,i.jsx)(n.strong,{children:"in the body of the POST request"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["In functions called through GET requests, parameters must be passed ",(0,i.jsx)(n.strong,{children:'in the URL with "?$params=" syntax'}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Parameters must be enclosed within a collection (JSON format)."}),"\n",(0,i.jsx)(n.li,{children:"Tous les types de donn\xe9es scalaires pris en charge dans les collections JSON peuvent \xeatre pass\xe9s en tant que param\xe8tres."}),"\n",(0,i.jsxs)(n.li,{children:["L'entity selection et l'entit\xe9 peuvent \xeatre pass\xe9es en tant que param\xe8tres. The parameter list must contain specific attributes used by the REST server to assign data to the corresponding ORDA objects: ",(0,i.jsx)(n.code,{children:"__DATACLASS"}),", ",(0,i.jsx)(n.code,{children:"__ENTITY"}),", ",(0,i.jsx)(n.code,{children:"__ENTITIES"}),", ",(0,i.jsx)(n.code,{children:"__DATASET"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"#using-an-entity-to-be-created-on-the-server",children:"this example"})," and ",(0,i.jsx)(n.a,{href:"#receiving-an-entity-selection-as-parameter",children:"this example"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"param\xe8tre-de-valeur-scalaire",children:"Param\xe8tre de valeur scalaire"}),"\n",(0,i.jsx)(n.p,{children:'Scalar value parameter(s) must simply be enclosed in a collection. Tous les types de donn\xe9es JSON sont pris en charge dans les param\xe8tres, y compris les pointeurs JSON. Les dates peuvent \xeatre pass\xe9es sous forme de cha\xeenes au format de date ISO 8601 (par exemple, "2020-08-22T22:00:000Z").'}),"\n",(0,i.jsxs)(n.p,{children:["For example, with a  dataclass function ",(0,i.jsx)(n.code,{children:"getCities()"})," receiving text parameters:"]}),"\n",(0,i.jsx)(n.h4,{id:"post-request-1",children:"POST request"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/rest/City/getCities"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Param\xe8tres dans le body :"}),' ["Aguada","Paris"]']}),"\n",(0,i.jsx)(n.h4,{id:"get-request-1",children:"GET request"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:'/rest/City/getCities?$params=\'["Aguada","Paris"]\''})}),"\n",(0,i.jsx)(n.h3,{id:"param\xe8tre-dentit\xe9",children:"Param\xe8tre d'entit\xe9"}),"\n",(0,i.jsx)(n.p,{children:"Les entit\xe9s pass\xe9es en param\xe8tres sont r\xe9f\xe9renc\xe9es sur le serveur via leur cl\xe9 (c'est-\xe0-dire la propri\xe9t\xe9 __KEY). If the key parameter is omitted in a request, a new entity is loaded in memory on the server.\nVous pouvez \xe9galement transmettre des valeurs pour tous les attributs de l'entit\xe9. Ces valeurs seront automatiquement utilis\xe9es pour l'entit\xe9 trait\xe9e sur le serveur."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Si la requ\xeate envoie des valeurs d'attribut modifi\xe9es pour une entit\xe9 existante sur le serveur, la fonction de mod\xe8le de donn\xe9es ORDA appel\xe9e sera automatiquement ex\xe9cut\xe9e sur le serveur avec des valeurs modifi\xe9es. Cette fonctionnalit\xe9 vous permet, par exemple, de v\xe9rifier le r\xe9sultat d'une op\xe9ration sur une entit\xe9, apr\xe8s avoir appliqu\xe9 toutes les r\xe8gles m\xe9tier, depuis l'application cliente. Vous pouvez alors d\xe9cider de sauvegarder ou non l'entit\xe9 sur le serveur."}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Propri\xe9t\xe9s"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Attributs de l'entit\xe9"}),(0,i.jsx)(n.td,{children:"mixte"}),(0,i.jsx)(n.td,{children:"Optionnelle - Valeurs \xe0 modifier"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"__DATACLASS"}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:"Obligatoire - Indique la Dataclass de l'entit\xe9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"__ENTITY"}),(0,i.jsx)(n.td,{children:"Boolean"}),(0,i.jsx)(n.td,{children:"Obligatoire - Vrai pour indiquer au serveur que le param\xe8tre est une entit\xe9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"__KEY"}),(0,i.jsx)(n.td,{children:"mixte (type identique \xe0 celui de la cl\xe9 primaire)"}),(0,i.jsx)(n.td,{children:"Optionnel - cl\xe9 primaire de l'entit\xe9"})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"__KEY"})," is not provided, a new entity is created on the server with the given attributes."]}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"__KEY"})," is provided, the entity corresponding to ",(0,i.jsx)(n.code,{children:"__KEY"})," is loaded on the server with the given attributes"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["See examples for ",(0,i.jsx)(n.a,{href:"#creating-an-entity",children:"creating"})," or ",(0,i.jsx)(n.a,{href:"#updating-an-entity",children:"updating"})," entities with POST requests.\nSee an example of ",(0,i.jsx)(n.a,{href:"#using-an-entity-to-download-contents",children:"contents downloading using an entity"})," with a GET request."]}),"\n",(0,i.jsx)(n.h4,{id:"param\xe8tre-dentit\xe9-associ\xe9",children:"Param\xe8tre d'entit\xe9 associ\xe9"}),"\n",(0,i.jsxs)(n.p,{children:["M\xeames propri\xe9t\xe9s que pour un ",(0,i.jsx)(n.a,{href:"#entity-parameter",children:"param\xe8tre d'entit\xe9"}),". De plus, l'entit\xe9 associ\xe9e doit exister et est r\xe9f\xe9renc\xe9e par __KEY, qui contient sa cl\xe9 primaire."]}),"\n",(0,i.jsxs)(n.p,{children:["Reportez-vous aux exemples de ",(0,i.jsx)(n.a,{href:"#creating-an-entity-with-a-related-entity",children:"cr\xe9ation"})," ou de ",(0,i.jsx)(n.a,{href:"#updating-an-entity-with-a-related-entity",children:"mise \xe0 jour"})," des entit\xe9s avec des entit\xe9s associ\xe9es."]}),"\n",(0,i.jsx)(n.h3,{id:"param\xe8tre-dentity-selection",children:"Param\xe8tre d'entity selection"}),"\n",(0,i.jsxs)(n.p,{children:["L'entity selection doit avoir \xe9t\xe9 d\xe9finie au pr\xe9alable \xe0 l'aide de ",(0,i.jsx)(n.a,{href:"/docs/fr/REST/method#methodentityset",children:"$method=entityset"}),"."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Si la requ\xeate envoie une entity selection modifi\xe9e au serveur, la fonction de mod\xe8le de donn\xe9es ORDA appel\xe9e sera automatiquement ex\xe9cut\xe9e sur le serveur avec l'entity selection modifi\xe9e."}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Propri\xe9t\xe9s"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Attributs de l'entit\xe9"}),(0,i.jsx)(n.td,{children:"mixte"}),(0,i.jsx)(n.td,{children:"Optionnelle - Valeurs \xe0 modifier"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"__DATASET"}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:"Obligatoire - entitySetID (UUID) de la s\xe9lection d'entit\xe9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"__ENTITIES"}),(0,i.jsx)(n.td,{children:"Boolean"}),(0,i.jsx)(n.td,{children:"Obligatoire - Vrai pour indiquer au serveur que le param\xe8tre est une s\xe9lection d'entit\xe9"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["See example for ",(0,i.jsx)(n.a,{href:"#receiving-an-entity-selection-as-parameter",children:"receiving an entity selection"})," with a POST request.\nSee example for ",(0,i.jsx)(n.a,{href:"#using-an-entity-selection-to-get-a-list",children:"getting a list built upon an entity selection"})," with a GET request."]}),"\n",(0,i.jsx)(n.h2,{id:"post-request-examples",children:"POST request examples"}),"\n",(0,i.jsx)(n.p,{children:"Cette base de donn\xe9es est expos\xe9e comme un datastore distant sur localhost (port 8111) :"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt-text",src:t(840323).Z+"",width:"882",height:"599"})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-fonction-de-classe-de-datastore",children:"Utiliser une fonction de classe de datastore"}),"\n",(0,i.jsxs)(n.p,{children:["La classe de ",(0,i.jsx)(n.code,{children:"DataStore"})," US_Cities fournit une API :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'// DataStore class\n\nClass extends DataStoreImplementation\n\nexposed Function getName() : Text\n    return "US cities and zip codes manager"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Vous pouvez lancer cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"127.0.0.1:8111/rest/$catalog/getName"})]}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n"result": "US cities and zip codes manager"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-fonction-de-classe-de-dataclass",children:"Utiliser une fonction de classe de dataclass"}),"\n",(0,i.jsxs)(n.p,{children:["La classe de Dataclass ",(0,i.jsx)(n.code,{children:"City"})," fournit une API qui retourne une entit\xe9 de ville \xe0 partir du nom pass\xe9 en param\xe8tre :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'// City class\n\nClass extends DataClass\n\nexposed Function getCity($city : Text ) : cs.CityEntity\n	return This.query("name = :1";$city).first()\n'})}),"\n",(0,i.jsx)(n.p,{children:"Vous pouvez lancer cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"127.0.0.1:8111/rest/City/getCity"})]}),"\n",(0,i.jsx)(n.p,{children:'Requ\xeate : ["Paris"]'}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-1",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.p,{children:"Le r\xe9sultat est une entit\xe9 :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "__entityModel": "City",\n    "__DATACLASS": "City",\n    "__KEY": "1",\n    "__TIMESTAMP": "2020-03-09T08:03:19.923Z",\n    "__STAMP": 1,\n    "ID": 1,\n    "name": "Aguada",\n    "countyFIPS": 72003,\n    "county": {\n        "__deferred": {\n            "uri": "/rest/County(72003)",\n            "__KEY": "72003"\n        }\n    },\n    "zips": {\n        "__deferred": {\n            "uri": "/rest/City(1)/zips?$expand=zips"\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-fonction-de-classe-dentit\xe9",children:"Utiliser une fonction de classe d'entit\xe9"}),"\n",(0,i.jsxs)(n.p,{children:["La classe d'entit\xe9 ",(0,i.jsx)(n.code,{children:"CityEntity"})," fournit une API :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'// CityEntity class\n\nClass extends Entity\n\nexposed Function getPopulation()\n    return This.zips.sum("population")\n'})}),"\n",(0,i.jsx)(n.p,{children:"Vous pouvez lancer cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"127.0.0.1:8111/rest/City(2)/getPopulation"})]}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-2",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "result": 48814\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-fonction-de-classe-dentity-selection",children:"Utiliser une fonction de classe d'entity selection"}),"\n",(0,i.jsxs)(n.p,{children:["La classe d'entity selection ",(0,i.jsx)(n.code,{children:"CityEntity"})," fournit une API :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'// CitySelection class\n\nClass extends EntitySelection\n\nexposed Function getPopulation()\n    return This.zips.sum("population")\n'})}),"\n",(0,i.jsx)(n.p,{children:"Vous pouvez lancer cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:'127.0.0.1:8111/rest/City/getPopulation/?$filter="ID<3"'})]}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-3",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "result": 87256\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-fonction-de-classe-dentity-selection-et-un-entity-set",children:"Utiliser une fonction de classe d'entity selection et un entity set"}),"\n",(0,i.jsxs)(n.p,{children:["La classe ",(0,i.jsx)(n.code,{children:"StudentsSelection"})," a une fonction ",(0,i.jsx)(n.code,{children:"getAgeAverage"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// StudentsSelection Class\n\nClass extends EntitySelection\n\nexposed Function getAgeAverage : Integer\n	var $sum : Integer\n	var $s : Object\n\n	$sum:=0\n	For each ($s;This)\n	    $sum:=$sum+$s.age()\n	End for each\n	return $sum/This.length\n"})}),"\n",(0,i.jsx)(n.p,{children:"Une fois que vous avez cr\xe9\xe9 un ensemble d'entit\xe9, vous pouvez lancer cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"127.0.0.1:8044/rest/Students/getAgeAverage/$entityset/17E83633FFB54ECDBF947E5C620BB532"})]}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-4",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "result": 34\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-fonction-de-classe-dentity-selection-et-un-orderby",children:'Utiliser une fonction de classe d\'entity selection et un "orderBy"'}),"\n",(0,i.jsxs)(n.p,{children:["La classe ",(0,i.jsx)(n.code,{children:"StudentsSelection"})," a une fonction ",(0,i.jsx)(n.code,{children:"getLastSummary"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'// StudentsSelection Class\n\n\nClass extends EntitySelection\n\nexposed Function getLastSummary : Text\n	var $last : Object\n\n	$last:=This.last()\n	return =$last.firstname+" - "+$last.lastname+" is ... "+String($last.age())\n'})}),"\n",(0,i.jsx)(n.p,{children:"Vous pouvez lancer cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:'127.0.0.1:8044/rest/Students/getLastSummary/$entityset/?$filter="lastname=b@"&$orderby="lastname"'})]}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-5",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "result": "Wilbert - Bull is ... 21"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-entit\xe9-\xe0-cr\xe9er-sur-le-serveur",children:"Utiliser une entit\xe9 \xe0 cr\xe9er sur le serveur"}),"\n",(0,i.jsxs)(n.p,{children:["La classe de Dataclass ",(0,i.jsx)(n.code,{children:"Students"})," poss\xe8de la fonction ",(0,i.jsx)(n.code,{children:"pushData()"})," qui re\xe7oit une entit\xe9 contenant les donn\xe9es du client. La m\xe9thode ",(0,i.jsx)(n.code,{children:"checkData()"})," effectue quelques contr\xf4les. Si elles sont valides, l'entit\xe9 est sauvegard\xe9e et retourn\xe9e."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// Students Class\n\nClass extends DataClass\n\nexposed Function pushData($entity : Object) : Object\n	var $status : Object\n\n	$status:=checkData($entity) // $status est un objet avec une propri\xe9t\xe9 bool\xe9enne success\n\n	If ($status.success)\n	    $status:=$entity.save()\n 	   If ($status.success)\n 	       return $entity\n  	  End if\n	End if\n\n	return $status\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"Lancez cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students/pushData"})]}),"\n",(0,i.jsx)(n.p,{children:"Body de la requ\xeate :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"firstname":"Ann",\n"lastname":"Brown"\n}]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Si aucune ",(0,i.jsx)(n.code,{children:"__KEY"})," n'est donn\xe9e, une nouvelle entit\xe9 Students est charg\xe9e sur le serveur ",(0,i.jsx)(n.strong,{children:"avec les attributs du client"}),". Parce que la fonction ",(0,i.jsx)(n.code,{children:"pushData()"})," ex\xe9cute une action ",(0,i.jsx)(n.code,{children:"save()"}),", la nouvelle entit\xe9 est cr\xe9\xe9e."]}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-6",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "55",\n    "__TIMESTAMP": "2020-06-16T10:54:41.805Z",\n    "__STAMP": 1,\n    "ID": 55,\n    "firstname": "Ann",\n    "lastname": "BROWN",\n    "schoolID": null,\n    "school": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-entit\xe9-\xe0-mettre-\xe0-jour-sur-le-serveur",children:"Utiliser une entit\xe9 \xe0 mettre \xe0 jour sur le serveur"}),"\n",(0,i.jsx)(n.p,{children:"Description semblable \xe0 la pr\xe9c\xe9dente, avec l'attribut _KEY"}),"\n",(0,i.jsx)(n.p,{children:"Lancez cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST:"}),(0,i.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students/pushData"})]}),"\n",(0,i.jsx)(n.p,{children:"Body de la requ\xeate :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"lastname":"Brownie",\n"__KEY":55\n}]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Si aucune ",(0,i.jsx)(n.code,{children:"__KEY"})," n'est donn\xe9e, l'entit\xe9 Students est charg\xe9e avec la cl\xe9 primaire 55 ",(0,i.jsx)(n.strong,{children:"avec la valeur lastname re\xe7ue par le client"}),". Parce que la fonction ex\xe9cute une action ",(0,i.jsx)(n.code,{children:"save()"}),", la nouvelle entit\xe9 est mise \xe0 jour."]}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-7",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "55",\n    "__TIMESTAMP": "2020-06-16T11:10:21.679Z",\n    "__STAMP": 3,\n    "ID": 55,\n    "firstname": "Ann",\n    "lastname": "BROWNIE",\n    "schoolID": null,\n    "school": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cr\xe9er-une-entit\xe9-avec-une-entit\xe9-li\xe9e",children:"Cr\xe9er une entit\xe9 avec une entit\xe9 li\xe9e"}),"\n",(0,i.jsx)(n.p,{children:"Dans cet exemple, nous cr\xe9ons une nouvelle entit\xe9 Students avec l'entit\xe9 Schools ayant la cl\xe9 primaire 2."}),"\n",(0,i.jsx)(n.p,{children:"Lancez cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST:"}),(0,i.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students/pushData"})]}),"\n",(0,i.jsx)(n.p,{children:"Body de la requ\xeate :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"firstname":"John",\n"lastname":"Smith",\n"school":{"__KEY":2}\n}]\n'})}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-8",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "56",\n    "__TIMESTAMP": "2020-06-16T11:16:47.601Z",\n    "__STAMP": 1,\n    "ID": 56,\n    "firstname": "John",\n    "lastname": "SMITH",\n    "schoolID": 2,\n       "school": {\n        "__deferred": {\n            "uri": "/rest/Schools(2)",\n            "__KEY": "2"\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"mettre-\xe0-jour-une-entit\xe9-avec-une-entit\xe9-li\xe9e",children:"Mettre \xe0 jour une entit\xe9 avec une entit\xe9 li\xe9e"}),"\n",(0,i.jsxs)(n.p,{children:["Dans cet exemple, nous associons une \xe9cole existante \xe0 l'entit\xe9 Students. La classe ",(0,i.jsx)(n.code,{children:"StudentsEntity"})," poss\xe8de une API :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// StudentsEntity class\n\nClass extends Entity\n\nexposed Function putToSchool()\n	var $1, $school , $0, $status : Object\n\n		//$1 est une entit\xe9 school\n	$school:=$1\n		//associer l'entit\xe9 li\xe9e school \xe0 l'entit\xe9 courante students\n	This.school:=$school\n\n	$status:=This.save()\n\n	$0:=$status\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Vous ex\xe9cutez cette requ\xeate, appel\xe9e sur une entit\xe9 Students :\n",(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students(1)/putToSchool"}),"\nBody de la requ\xeate :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'[{\n"__DATACLASS":"Schools",\n"__ENTITY":true,\n"__KEY":2\n}]\n'})}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-9",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "result": {\n        "success": true\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"recevoir-une-entity-selection-comme-param\xe8tre",children:"Recevoir une entity selection comme param\xe8tre"}),"\n",(0,i.jsxs)(n.p,{children:["Dans la classe de Dataclass ",(0,i.jsx)(n.code,{children:"Students"}),", la fonction ",(0,i.jsx)(n.code,{children:"setFinalExam()"})," met \xe0 jour une s\xe9lection d'entit\xe9 re\xe7ue ($1). Elle met \xe0 jour l'attribut ",(0,i.jsx)(n.em,{children:"finalExam"})," avec la valeur re\xe7ue ($2). Elle retourne les cl\xe9s primaires des entit\xe9s mises \xe0 jour."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// Students class\n\nClass extends DataClass\n\nexposed Function setFinalExam()\n\n\n    var $1, $es, $student, $status : Object\n    var $2, $examResult : Text\n\n    var $keys, $0 : Collection\n\n      //Entity selection\n    $es:=$1\n\n    $examResult:=$2\n\n    $keys:=New collection()\n\n      //Loop on the entity selection\n    For each ($student;$es)\n        $student.finalExam:=$examResult\n        $status:=$student.save()\n        If ($status.success)\n            $keys.push($student.ID)\n        End if\n    End for each\n\n    $0:=$keys\n"})}),"\n",(0,i.jsx)(n.p,{children:"Un ensemble d'entit\xe9 est d'abord cr\xe9\xe9 avec cette requ\xeate :"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:'http://127.0.0.1:8044/rest/Students/?$filter="ID<3"&$method=entityset'})}),"\n",(0,i.jsx)(n.p,{children:"Vous pouvez ensuite ex\xe9cuter cette requ\xeate :"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"POST"})," ",(0,i.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students/setFinalExam"})]}),"\n",(0,i.jsx)(n.p,{children:"Body de la requ\xeate :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'[\n{\n"__ENTITIES":true,\n"__DATASET":"9B9C053A111E4A288E9C1E48965FE671"\n},\n"Passed"\n]\n\n'})}),"\n",(0,i.jsx)(n.h4,{id:"r\xe9sultat-10",children:"R\xe9sultat"}),"\n",(0,i.jsx)(n.p,{children:"Les entit\xe9s ayant les cl\xe9s primaires sont 1 et 2 ont \xe9t\xe9 mises \xe0 jour."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "result": [\n        1,\n        2\n    ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"utiliser-une-entity-selection-mise-\xe0-jour-sur-le-client",children:"Utiliser une entity selection mise \xe0 jour sur le client"}),"\n",(0,i.jsxs)(n.p,{children:["A l'aide de la fonction ",(0,i.jsx)(n.code,{children:"getAgeAverage()"})," ",(0,i.jsx)(n.a,{href:"#using-an-entityselection-class-function-and-an-entityset",children:"d\xe9finie ci-dessus"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'var $remoteDS, $newStudent, $students : Object\nvar $ageAverage : Integer\n\n$remoteDS:=Open datastore(New object("hostname" ; "127.0.0.1:8044") ; "students")\n\n// $newStudent est une entit\xe9 \xe9tudiant \xe0 traiter\n$newStudent:=...\n$students:=$remoteDS.Students.query("school.name = :1" ; "Math school")\n// Nous ajoutons une entit\xe9 \xe0 l\'entity selection $students sur le client\n$students.add($newStudent)\n\n// Nous appelons une fonction de la classe StudentsSelection qui renvoie la moyenne d\'\xe2ge des \xe9tudiants de l\'entity selection\n// La fonction est ex\xe9cut\xe9e sur le serveur dans l\'entity selection $students mise \xe0 jour qui comprend l\'\xe9tudiant ajout\xe9 par le client\n$ageAverage:=$students.getAgeAverage()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"get-request-examples",children:"GET request examples"}),"\n",(0,i.jsx)(n.h3,{id:"returning-a-document",children:"Returning a document"}),"\n",(0,i.jsxs)(n.p,{children:["You want to propose a link to download the user manual for a selected product with several formats available. You write a ",(0,i.jsx)(n.code,{children:"getUserManual()"})," function of the Products dataclass. You return an object of the ",(0,i.jsxs)(n.a,{href:"/docs/fr/API/OutgoingMessageClass",children:[(0,i.jsx)(n.code,{children:"OutgoingMessage"})," class"]}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'// Product dataclass\nexposed onHTTPGet Function getUserManual($productId : Integer; $type : Text) : 4D.OutgoingMessage\n	\nvar $file : 4D.File\nvar $response:=4D.OutgoingMessage.new()\nvar $doc:="/RESOURCES/User manuals/product_"+String($productId)\n\nCase of \n	: ($type="pdf")\n		$file:=File($doc+".pdf")\n                $response.setBody($file.getContent()) // This is binary content \n		$response.setHeader("Content-Type"; "application/pdf")\n			\n	: ($type="jpeg")\n		$file:=File($doc+".jpeg")\n                $response.setBody($file.getContent()) // This is binary content \n		$response.setHeader("Content-Type"; "image/jpeg")\nEnd case \n	\nreturn $response\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"You can call the function using a request like:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GET"})," ",(0,i.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Products/getUserManual?$params='[1,\"pdf\"]'"})]}),"\n",(0,i.jsx)(n.h3,{id:"using-an-entity-to-download-a-pdf-document",children:"Using an entity to download a PDF document"}),"\n",(0,i.jsx)(n.p,{children:"Same example as above but you want to pass an entity as parameter to the datastore function."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'// Product dataclass\nexposed onHTTPGet Function getUserManual($product : cs.ProductEntity) : 4D.OutgoingMessage\n	\n	var $file : 4D.File\n	var $response := 4D.OutgoingMessage.new()\n	\n	$file:=File("/RESOURCES/User manuals/"+$product.name+".pdf")\n	$response.setBody($file.getContent())\n	$response.setHeader("Content-Type"; "application/pdf")\n	\n	return $response\n'})}),"\n",(0,i.jsx)(n.p,{children:"You can call the function using this request:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GET"})," ",(0,i.jsx)(n.code,{children:'http://127.0.0.1:8044/rest/Product/getUserManual?$params=\'[{"__DATACLASS":"Product","__ENTITY":true,"__KEY":41}]\''})]}),"\n",(0,i.jsx)(n.h3,{id:"using-an-entity-selection-to-get-a-list",children:"Using an entity selection to get a list"}),"\n",(0,i.jsxs)(n.p,{children:["You want to send an entity selection as parameter to a singleton function using a REST GET request and return a list using an object of the ",(0,i.jsxs)(n.a,{href:"/docs/fr/API/OutgoingMessageClass",children:[(0,i.jsx)(n.code,{children:"OutgoingMessage"})," class"]}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'shared singleton Class constructor()\n	\nexposed onHTTPGet Function buildShoppingList($products : cs.ProductSelection) : 4D.OutgoingMessage\n	\n	var $p : cs.ProductsEntity\n	var $content : Text\n	var $response := 4D.OutgoingMessage.new()\n	\n	$content:=""\n	\n	For each ($p; $products)\n		$content:=$content+" "+$p.manufacturer+" - "+$p.name\n		$content:=$content+Char(Carriage return)\n	End for each \n	\n	$response.setBody($content)\n	$response.setHeader("Content-Type"; "text/plain")\n	\n	return $response\n'})}),"\n",(0,i.jsx)(n.p,{children:"You can call the function using this request:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GET"})," ",(0,i.jsx)(n.code,{children:'http://127.0.0.1:8044/rest/$singleton/Shopping/buildShoppingList?$params=\'[{"__DATASET":"8DB0556854HDK52FR5974F","__ENTITIES":true}]\''})]})]})}function u(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},840323:function(e,n,t){t.d(n,{Z:function(){return s}});let s=t.p+"assets/images/ordastructure-64d64d76ce9764a2365629e381bde282.png"},250065:function(e,n,t){t.d(n,{Z:function(){return a},a:function(){return l}});var s=t(667294);let i={},r=s.createContext(i);function l(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);