"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["94902"],{439253:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>r,toc:()=>a,default:()=>u,metadata:()=>t,assets:()=>o,contentTitle:()=>d});var t=JSON.parse('{"id":"aikit/Classes/openaimessage","title":"OpenAIMessage","description":"La classe OpenAIMessage repr\xe9sente un message structur\xe9 contenant un r\xf4le, un contenu et un utilisateur optionnel. Cette classe fournit des m\xe9thodes pour manipuler et r\xe9cup\xe9rer le texte et d\'autres contenus du message.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-21/aikit/Classes/OpenAIMessage.md","sourceDirName":"aikit/Classes","slug":"/aikit/Classes/openaimessage","permalink":"/docs/fr/aikit/Classes/openaimessage","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20aikit%2FClasses%2FOpenAIMessage.md%20(21)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"21","frontMatter":{"id":"openaimessage","title":"OpenAIMessage"},"sidebar":"docs","previous":{"title":"OpenAIImagesResult","permalink":"/docs/fr/aikit/Classes/openaiimagesresult"},"next":{"title":"OpenAIModel","permalink":"/docs/fr/aikit/Classes/openaimodel"}}'),i=s(474848),l=s(884429);let r={id:"openaimessage",title:"OpenAIMessage"},d="OpenAIMessage",o={},a=[{value:"Propri\xe9t\xe9s",id:"propri\xe9t\xe9s",level:2},{value:"Propri\xe9t\xe9s calcul\xe9es",id:"propri\xe9t\xe9s-calcul\xe9es",level:2},{value:"Fonctions",id:"fonctions",level:2},{value:"addImageURL()",id:"addimageurl",level:3},{value:"Exemple d&#39;utilisation",id:"exemple-dutilisation",level:2},{value:"Cr\xe9er un message simple et joindre une image",id:"cr\xe9er-un-message-simple-et-joindre-une-image",level:3},{value:"R\xe9pondre \xe0 un message d&#39;appel d&#39;outil",id:"r\xe9pondre-\xe0-un-message-dappel-doutil",level:3},{value:"Voir aussi",id:"voir-aussi",level:2}];function c(e){let n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"openaimessage",children:"OpenAIMessage"})}),"\n",(0,i.jsxs)(n.p,{children:["La classe ",(0,i.jsx)(n.code,{children:"OpenAIMessage"})," repr\xe9sente un message structur\xe9 contenant un r\xf4le, un contenu et un utilisateur optionnel. Cette classe fournit des m\xe9thodes pour manipuler et r\xe9cup\xe9rer le texte et d'autres contenus du message."]}),"\n",(0,i.jsx)(n.h2,{id:"propri\xe9t\xe9s",children:"Propri\xe9t\xe9s"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Propri\xe9t\xe9"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"role"})}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:'Le r\xf4le du message (par exemple, "user", "assistant", "system", "tool").'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"content"})}),(0,i.jsx)(n.td,{children:"Variant"}),(0,i.jsx)(n.td,{children:"Le contenu du message, qui peut \xeatre un texte ou une collection d'objets."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user"})}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:"Une propri\xe9t\xe9 facultative repr\xe9sentant l'utilisateur associ\xe9 au message."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tool_calls"})}),(0,i.jsx)(n.td,{children:"Collection"}),(0,i.jsxs)(n.td,{children:["Une collection d'appels d'outils requis par l'assistant. Chaque appel d'outil contient un objet ",(0,i.jsx)(n.code,{children:"id"}),", ",(0,i.jsx)(n.code,{children:"type"})," et ",(0,i.jsx)(n.code,{children:"function"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tool_call_id"})}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsxs)(n.td,{children:["L'ID de l'appel d'outil auquel ce message r\xe9pond (utilis\xe9 lorsque ",(0,i.jsx)(n.code,{children:"role"}),' est "tool").']})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"propri\xe9t\xe9s-calcul\xe9es",children:"Propri\xe9t\xe9s calcul\xe9es"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Propri\xe9t\xe9"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"text"})}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:"Une propri\xe9t\xe9 repr\xe9sentant le message textuel."})]})})]}),"\n",(0,i.jsx)(n.h2,{id:"fonctions",children:"Fonctions"}),"\n",(0,i.jsx)(n.h3,{id:"addimageurl",children:"addImageURL()"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"addImageURL"}),"(",(0,i.jsx)(n.em,{children:"imageURL"})," : Text; ",(0,i.jsx)(n.em,{children:"detail"})," : Text)"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Param\xe8tres"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"imageURL"})}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:"L'URL de l'image \xe0 ajouter au message."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"detail"})}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:"D\xe9tails suppl\xe9mentaires sur l'image."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Ajoute une URL d'image au contenu du message."}),"\n",(0,i.jsx)(n.h2,{id:"exemple-dutilisation",children:"Exemple d'utilisation"}),"\n",(0,i.jsx)(n.h3,{id:"cr\xe9er-un-message-simple-et-joindre-une-image",children:"Cr\xe9er un message simple et joindre une image"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'// Cr\xe9er une instance d\'OpenAIMessage\nvar $message:=cs.AIKit.OpenAIMessage({role : "user" ; content : "Hello !"})\n\n// Ajouter une image URL avec des d\xe9tails\n$message.addImageURL("http://example.com/image.jpg" ; "high")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"r\xe9pondre-\xe0-un-message-dappel-doutil",children:"R\xe9pondre \xe0 un message d'appel d'outil"}),"\n",(0,i.jsxs)(n.p,{children:["Lorsqu'un assistant doit utiliser des fonctions externes, il g\xe9n\xe8re un message avec ",(0,i.jsx)(n.code,{children:"tool_calls"})," pour demander l'ex\xe9cution de la fonction."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Message de l'assistant demandant des appels \xe0 l'outil :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "role": "assistant",\n  "tool_calls": [\n    {\n      "id": "call_12345",\n      "type": "function",\n      "function": {\n        "name": "get_database_tables",\n        "arguments": "{}"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Gestion de l'appel d'outil :"})}),"\n",(0,i.jsx)(n.p,{children:"Lorsque vous recevez un message d'appel d'outil, vous devez :"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Extraire les informations relatives \xe0 la fonction :"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"function.name"})," : Le nom de la fonction \xe0 appeler (doit correspondre \xe0 une fonction d\xe9finie dans votre ",(0,i.jsx)(n.a,{href:"/docs/fr/aikit/Classes/openaitool",children:"OpenAITool"})," - vous pouvez s\xe9lectionner le code \xe0 ex\xe9cuter en fonction de ce nom)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"function.arguments"})," : Une cha\xeene JSON contenant les param\xe8tres de la fonction qui doivent \xeatre analys\xe9s avec ",(0,i.jsx)(n.code,{children:"JSON Parse"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"})," : L'identifiant unique pour cet appel d'outil sp\xe9cifique"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Ex\xe9cuter la fonction :"}),"\nAnalyser les arguments (qui sont une cha\xeene JSON) et appeler la fonction correspondante que vous avez d\xe9finie dans votre configuration OpenAITool."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xe9pondre avec le r\xe9sultat de l'outil :"}),"\nCr\xe9er un message de r\xe9ponse en utilisant le ",(0,i.jsx)(n.code,{children:"tool_call_id"})," exact de la requ\xeate originale."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Exemple de r\xe9ponse d'outil :"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'// Analyse des arguments de la fonction (le cas \xe9ch\xe9ant)\nvar $arguments : Object := JSON Parse($toolCall.function.arguments)\n\n// Ex\xe9cution du code correspondant \xe0 "get_database_tables" \nvar $tableNames: Text := OB Keys(ds).join(", ")\n\n// Cr\xe9ation du message de r\xe9ponse de l\'outil avec le tool_call_id requis\nvar $toolResponse:=cs.AIKit.OpenAIMessage.new({ \\\n  role : "tool" ; \\\n  tool_call_id : "call_12345" ; \\\n  content : $tableNames \\\n})\n// Ajoutez-le \xe0 la conversation et continuez\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important :"})," Le ",(0,i.jsx)(n.code,{children:"tool_call_id"})," de votre r\xe9ponse doit correspondre exactement \xe0 l'",(0,i.jsx)(n.code,{children:"id"})," de l'appel d'outil original. Cela permet au mod\xe8le d'IA d'associer correctement votre r\xe9ponse \xe0 l'appel de fonction sp\xe9cifique qui a \xe9t\xe9 effectu\xe9."]}),"\n",(0,i.jsx)(n.h2,{id:"voir-aussi",children:"Voir aussi"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/fr/aikit/Classes/openaitool",children:"OpenAITool"})," - Pour la d\xe9finition de l'outil"]}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},884429:function(e,n,s){s.d(n,{R:()=>r,x:()=>d});var t=s(296540);let i={},l=t.createContext(i);function r(e){let n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);