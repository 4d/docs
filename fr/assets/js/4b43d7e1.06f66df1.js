"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["30448"],{633934:function(e,s,r){r.r(s),r.d(s,{default:()=>u,frontMatter:()=>t,metadata:()=>n,assets:()=>i,toc:()=>c,contentTitle:()=>a});var n=JSON.parse('{"id":"commands-legacy/call-worker","title":"CALL WORKER","description":"CALL WORKER ( process ; formule {; param}{; param2 ; ... ; paramN} )","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R8/commands-legacy/call-worker.md","sourceDirName":"commands-legacy","slug":"/commands/call-worker","permalink":"/docs/fr/20-R8/commands/call-worker","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fcall-worker.md%20(20-R8)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R8","frontMatter":{"id":"call-worker","title":"CALL WORKER","slug":"/commands/call-worker","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"Process (Communications)","permalink":"/docs/fr/20-R8/commands/theme/Process-Communications"},"next":{"title":"CLEAR SEMAPHORE","permalink":"/docs/fr/20-R8/commands/clear-semaphore"}}'),o=r("785893"),l=r("250065");let t={id:"call-worker",title:"CALL WORKER",slug:"/commands/call-worker",displayed_sidebar:"docs"},a=void 0,i={},c=[{value:"Description",id:"description",level:2},{value:"Exemple",id:"exemple",level:2},{value:"Voir aussi",id:"voir-aussi",level:2},{value:"Propri\xe9t\xe9s",id:"propri\xe9t\xe9s",level:2}];function d(e){let s={a:"a",br:"br",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"CALL WORKER"})," ( ",(0,o.jsx)(s.em,{children:"process"})," ; ",(0,o.jsx)(s.em,{children:"formule"})," {; ",(0,o.jsx)(s.em,{children:"param"}),"}{; ",(0,o.jsx)(s.em,{children:"param2"})," ; ... ; ",(0,o.jsx)(s.em,{children:"paramN"}),"} )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Param\xe8tre"}),(0,o.jsx)(s.th,{children:"Type"}),(0,o.jsx)(s.th,{}),(0,o.jsx)(s.th,{children:"Description"})]})}),(0,o.jsxs)(s.tbody,{children:[(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"process"}),(0,o.jsx)(s.td,{children:"Text, Integer"}),(0,o.jsx)(s.td,{children:"\u2192"}),(0,o.jsx)(s.td,{children:"Nom ou num\xe9ro du process worker"})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"formule"}),(0,o.jsx)(s.td,{children:"Object, Text"}),(0,o.jsx)(s.td,{children:"\u2192"}),(0,o.jsx)(s.td,{children:"Objet Formula ou Nom de la m\xe9thode projet"})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"param"}),(0,o.jsx)(s.td,{children:"Expression"}),(0,o.jsx)(s.td,{children:"\u2192"}),(0,o.jsx)(s.td,{children:"Param\xe8tre(s) pass\xe9(s) \xe0 la m\xe9thode"})]})]})]}),"\n",(0,o.jsx)(s.h2,{id:"description",children:"Description"}),"\n",(0,o.jsxs)(s.p,{children:["La commande ",(0,o.jsx)(s.strong,{children:"CALL WORKER"})," cr\xe9e ou appelle le process worker dont vous avez pass\xe9 le nom ou le num\xe9ro dans ",(0,o.jsx)(s.em,{children:"process"})," et demande l\u2019ex\xe9cution du code d\xe9sign\xe9 par la ",(0,o.jsx)(s.em,{children:"formule"})," dans son contexte avec le ou les param\xe8tre(s) optionnel(s) sp\xe9cifi\xe9(s) dans ",(0,o.jsx)(s.em,{children:"param"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["La commande ",(0,o.jsx)(s.strong,{children:"CALL WORKER"})," encapsule ",(0,o.jsx)(s.em,{children:"param"})," dans un message qu'elle envoie dans la bo\xeete aux lettres du worker. Pour plus d'informations sur les process workers, reportez-vous \xe0 la section ",(0,o.jsx)(s.em,{children:"A propos des workers"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Dans le param\xe8tre ",(0,o.jsx)(s.em,{children:"process"}),", vous passez soit le nom soit le num\xe9ro du process worker :"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Si vous passez le num\xe9ro d'un process qui n'existe pas, ou si le process sp\xe9cifi\xe9 n'a pas \xe9t\xe9 cr\xe9\xe9 par ",(0,o.jsx)(s.strong,{children:"CALL WORKER"})," ni par 4D lui-m\xeame (tel quel le process principal de l\u2019application), ",(0,o.jsx)(s.strong,{children:"CALL WORKER"})," ne fait rien."]}),"\n",(0,o.jsx)(s.li,{children:"Si vous passez le nom d'un process qui n'existe pas, un nouveau process worker est cr\xe9\xe9."}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Note :"})," Le ",(0,o.jsx)(s.strong,{children:"process principal"}),", cr\xe9\xe9 par 4D pour l'interface utilisateur et le mode application \xe0 l'ouverture de la base, est un process worker et peut \xeatre appel\xe9 par ",(0,o.jsx)(s.strong,{children:"CALL WORKER"}),". Le nom de ce process pouvant varier en fonction de la langue de 4D, il est pr\xe9f\xe9rable de le d\xe9signer par son num\xe9ro (toujours 1) lorsque vous utilisez ",(0,o.jsx)(s.strong,{children:"CALL WORKER"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Le process worker est affich\xe9 dans la liste des process de l'Explorateur d'ex\xe9cution et est retourn\xe9 par la commande ",(0,o.jsx)(s.a,{href:"/docs/fr/20-R8/commands/process-info",children:"Process info"})," lorsqu'elle est appliqu\xe9e \xe0 ce process."]}),"\n",(0,o.jsxs)(s.p,{children:["Dans le param\xe8tre ",(0,o.jsx)(s.em,{children:"formule"}),", vous d\xe9signez le code 4D que vous souhaitez ex\xe9cuter dans le contexte du process worker. Vous pouvez passer soit :"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["un objet ",(0,o.jsx)(s.strong,{children:"formula"})," (voir ",(0,o.jsx)(s.em,{children:"Objets Formula"}),"). Les objets formula peuvent encapsuler toute expression ex\xe9cutable, y compris les fonctions et les m\xe9thodes projet ;"]}),"\n",(0,o.jsxs)(s.li,{children:["une ",(0,o.jsx)(s.strong,{children:"cha\xeene"})," contenant le nom d'une m\xe9thode projet.",(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.strong,{children:"Note :"})," Il n'est pas possible de passer une cha\xeene vide dans ",(0,o.jsx)(s.em,{children:"m\xe9thode"})," lorsque la commande appelle le process principal (process n\xb01), puisqu'il n'est pas d\xe9marr\xe9 via une m\xe9thode projet. Par cons\xe9quent, ",(0,o.jsxs)(s.em,{children:[(0,o.jsx)(s.em,{children:"CALL WORKER"}),'(1;"")']})," ne fait rien."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Vous pouvez aussi passer des param\xe8tres \xe0 la formule en utilisant un ou plusieurs param\xe8tres ",(0,o.jsx)(s.em,{children:"param"}),". Vous pouvez utiliser des ",(0,o.jsx)(s.em,{children:"param\xe8tres s\xe9quentiels"})," ou, si l'expression de la formule est une fonction ou une m\xe9thode projet, des ",(0,o.jsx)(s.em,{children:"param\xe8tres nomm\xe9s"}),". Lors de l'ex\xe9cution dans le contexte du formulaire, la formule du process re\xe7oit les valeurs du param\xe8tre soit dans les param\xe8tres nomm\xe9s soit dans ",(0,o.jsx)(s.em,{children:"$1"}),", ",(0,o.jsx)(s.em,{children:"$2"}),", et ainsi de suite. N'oubliez pas que des tableaux ne peuvent pas \xeatre pass\xe9s en param\xe8tre Notez qu'un tableau ne peut pas \xeatre pass\xe9 comme param\xe8tre \xe0 une m\xe9thode. Par ailleurs, dans le contexte de la commande ",(0,o.jsx)(s.strong,{children:"CALL WORKER"}),", les consid\xe9rations suivantes doivent \xeatre prises en compte :"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Les pointeurs vers les tables ou les champs sont autoris\xe9s."}),"\n",(0,o.jsx)(s.li,{children:"Les pointeurs vers les variables, notamment les variables locales ou les variables process, ne sont pas recommand\xe9s car ils peuvent \xeatre ind\xe9finis au moment de leur acc\xe8s par la m\xe9thode du process."}),"\n",(0,o.jsxs)(s.li,{children:["Les param\xe8tres standard de type objet ou collection sont pass\xe9s ",(0,o.jsx)(s.strong,{children:"par copie"}),", c'est-\xe0-dire que 4D cr\xe9era une copie de l'objet ou de la collection dans le process de destination si le worker est dans un process autre que celui qui appelle la commande ",(0,o.jsx)(s.strong,{children:"CALL WORKER"}),". Dans ce contexte, si vous souhaitez passer un param\xe8tre objet ou collection ",(0,o.jsx)(s.strong,{children:"par r\xe9f\xe9rence"}),", vous devez utiliser un objet ou une collection partag\xe9(e) (voir ",(0,o.jsx)(s.em,{children:"Objets partag\xe9s et collections partag\xe9es"}),")."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Un process worker reste actif jusqu\u2019\xe0 la fermeture de l'application ou jusqu'\xe0 ce que la commande ",(0,o.jsx)(s.a,{href:"/docs/fr/20-R8/commands/kill-worker",children:"KILL WORKER"})," soit appel\xe9e explicitement pour ce process. Pensez \xe0 appeler cette commande une fois que le process worker n'est plus utile afin de lib\xe9rer l'espace m\xe9moire."]}),"\n",(0,o.jsx)(s.h2,{id:"exemple",children:"Exemple"}),"\n",(0,o.jsx)(s.p,{children:"Dans un formulaire, un bouton d\xe9marre un calcul, par exemple des statistiques pour l'ann\xe9e s\xe9lectionn\xe9e. Ce bouton cr\xe9e ou appelle un process worker qui effectue le calcul des donn\xe9es tandis que l'utilisateur peut continuer \xe0 travailler dans le formulaire."}),"\n",(0,o.jsx)(s.p,{children:"Voici la m\xe9thode du bouton :"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-4d",children:'\xa0\xa0//appelle le process worker vNomWorker avec le param\xe8tre\n\xa0var $vAnn: \xe9eInteger\n\xa0$vAnn\xe9e:=2015\xa0//peut \xeatre s\xe9lectionn\xe9 par l\u2019utilisateur dans le formulaire\n\xa0CALL WORKER("monWorker";Formula(workerMethod);vAnn\xe9e;Current form window)\n'})}),"\n",(0,o.jsxs)(s.p,{children:["Voici le code de ",(0,o.jsx)(s.em,{children:"m\xe9thodeWorker"})," :"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-4d",children:"\xa0\xa0//voici la m\xe9thode du worker\n\xa0\xa0//peut \xeatre pr\xe9emptif ou coop\xe9ratif\n\xa0#DECLARE($vAnn\xe9eInteger;$fenetreInteger)\xa0//r\xe9f\xe9rence de l'ann\xe9e et de la fen\xeatre\n\xa0var $vR: \xe9sultatStatistiquesObject\xa0//stockage de r\xe9sultats statistiques\n\xa0...\xa0//calcul des statistiques\n\xa0\xa0//une fois le calcul termin\xe9, rappel du formulaire avec les valeurs calcul\xe9es\n\xa0\xa0//$vR\xe9sultatStatistiques peut afficher les r\xe9sultats dans le formulaire\n\xa0CALL FORM($fenetre;Formula(affichageStats);vR\xe9sultatStatistiques)\n"})}),"\n",(0,o.jsx)(s.h2,{id:"voir-aussi",children:"Voir aussi"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.em,{children:"A propos des workers"}),(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.a,{href:"/docs/fr/20-R8/commands/call-form",children:"CALL FORM"}),(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.a,{href:"/docs/fr/20-R8/commands/current-process-name",children:"Current process name"}),(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.a,{href:"/docs/fr/20-R8/commands/kill-worker",children:"KILL WORKER"})]}),"\n",(0,o.jsx)(s.h2,{id:"propri\xe9t\xe9s",children:"Propri\xe9t\xe9s"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{}),(0,o.jsx)(s.th,{})]})}),(0,o.jsxs)(s.tbody,{children:[(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"Num\xe9ro de commande"}),(0,o.jsx)(s.td,{children:"1389"})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"Thread safe"}),(0,o.jsx)(s.td,{children:"\u2713"})]})]})]})]})}function u(e={}){let{wrapper:s}={...(0,l.a)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},250065:function(e,s,r){r.d(s,{Z:function(){return a},a:function(){return t}});var n=r(667294);let o={},l=n.createContext(o);function t(e){let s=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);