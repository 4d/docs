"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1244],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var n=a(67294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),o=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=o(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=o(a),k=l,N=d["".concat(s,".").concat(k)]||d[k]||m[k]||r;return a?n.createElement(N,i(i({ref:t},u),{},{components:a})):n.createElement(N,i({ref:t},u))}));function k(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=d;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:l,i[1]=p;for(var o=2;o<r;o++)i[o]=a[o];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},21710:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>p,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>u});a(67294);var n=a(3905);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}const i={id:"EntityClass",title:"Entity"},p=void 0,s={unversionedId:"API/EntityClass",id:"version-19-R8/API/EntityClass",title:"Entity",description:"Une entity est une instance d'une Dataclass, tel un enregistrement de la table correspondant \xe0 la dataclass contenue dans son datastore associ\xe9. Elle contient les m\xeames attributs que la dataclass ainsi que les valeurs des donn\xe9es et des propri\xe9t\xe9s et fonctions sp\xe9cifiques.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-19-R8/API/EntityClass.md",sourceDirName:"API",slug:"/API/EntityClass",permalink:"/docs/fr/API/EntityClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FEntityClass.md%20(19-R8)&body=Please%20enter%20your%20comment%3A",tags:[],version:"19-R8",frontMatter:{id:"EntityClass",title:"Entity"},sidebar:"docs",previous:{title:"Email",permalink:"/docs/fr/API/EmailObjectClass"},next:{title:"EntitySelection",permalink:"/docs/fr/API/EntitySelectionClass"}},o={},u=[{value:"Sommaire",id:"sommaire",level:3},{value:".<em>attributeName</em>",id:"attributename",level:2},{value:"Description",id:"description",level:4},{value:"Exemple",id:"exemple",level:4},{value:".clone()",id:"clone",level:2},{value:"Description",id:"description-1",level:4},{value:"Exemple",id:"exemple-1",level:4},{value:".diff()",id:"diff",level:2},{value:"Description",id:"description-2",level:4},{value:"Exemple 1",id:"exemple-1-1",level:4},{value:"Exemple 2",id:"exemple-2",level:4},{value:".drop()",id:"drop",level:2},{value:"Description",id:"description-3",level:4},{value:"Exemple 1",id:"exemple-1-2",level:4},{value:"Exemple 2",id:"exemple-2-1",level:4},{value:".first()",id:"first",level:2},{value:"Description",id:"description-4",level:4},{value:"Exemple",id:"exemple-3",level:4},{value:".fromObject()",id:"fromobject",level:2},{value:"Description",id:"description-5",level:4},{value:"Exemple",id:"exemple-4",level:4},{value:".getDataClass()",id:"getdataclass",level:2},{value:"Description",id:"description-6",level:4},{value:"Exemple",id:"exemple-5",level:4},{value:".getKey()",id:"getkey",level:2},{value:"Description",id:"description-7",level:4},{value:"Exemple",id:"exemple-6",level:4},{value:".getRemoteContextAttributes()",id:"getremotecontextattributes",level:2},{value:"Description",id:"description-8",level:4},{value:"Exemple",id:"exemple-7",level:4},{value:"Voir \xe9galement",id:"voir-\xe9galement",level:4},{value:".getSelection()",id:"getselection",level:2},{value:"Description",id:"description-9",level:4},{value:"Exemple",id:"exemple-8",level:4},{value:".getStamp()",id:"getstamp",level:2},{value:"Description",id:"description-10",level:4},{value:"Exemple",id:"exemple-9",level:4},{value:".indexOf()",id:"indexof",level:2},{value:"Description",id:"description-11",level:4},{value:"Exemple",id:"exemple-10",level:4},{value:".isNew()",id:"isnew",level:2},{value:"Description",id:"description-12",level:4},{value:"Exemple",id:"exemple-11",level:4},{value:".last()",id:"last",level:2},{value:"Description",id:"description-13",level:4},{value:"Exemple",id:"exemple-12",level:4},{value:".lock()",id:"lock",level:2},{value:"Description",id:"description-14",level:4},{value:"Exemple 1",id:"exemple-1-3",level:4},{value:"Exemple 2",id:"exemple-2-2",level:4},{value:".next()",id:"next",level:2},{value:"Description",id:"description-15",level:4},{value:"Exemple",id:"exemple-13",level:4},{value:".previous()",id:"previous",level:2},{value:"Description",id:"description-16",level:4},{value:"Exemple",id:"exemple-14",level:4},{value:".reload( )",id:"reload-",level:2},{value:"Description",id:"description-17",level:4},{value:"Exemple",id:"exemple-15",level:4},{value:".save()",id:"save",level:2},{value:"Description",id:"description-18",level:4},{value:"status et statusText",id:"status-et-statustext",level:5},{value:"Exemple 1",id:"exemple-1-4",level:4},{value:"Exemple 2",id:"exemple-2-3",level:4},{value:"Exemple 3",id:"exemple-3-1",level:4},{value:".toObject()",id:"toobject",level:2},{value:"Description",id:"description-19",level:4},{value:"Exemple 1",id:"exemple-1-5",level:4},{value:"Exemple 2",id:"exemple-2-4",level:4},{value:"Exemple 3",id:"exemple-3-2",level:4},{value:"Exemple 4",id:"exemple-4-1",level:4},{value:"Exemple 5",id:"exemple-5-1",level:4},{value:"Exemple 6",id:"exemple-6-1",level:4},{value:"Exemple 7",id:"exemple-7-1",level:4},{value:".touched( )",id:"touched-",level:2},{value:"Description",id:"description-20",level:4},{value:"Exemple",id:"exemple-16",level:4},{value:".touchedAttributes( )",id:"touchedattributes-",level:2},{value:"Description",id:"description-21",level:4},{value:"Exemple 1",id:"exemple-1-6",level:4},{value:"Exemple 2",id:"exemple-2-5",level:4},{value:".unlock()",id:"unlock",level:2},{value:"Description",id:"description-22",level:4},{value:"Exemple",id:"exemple-17",level:4}],m={toc:u};function d(e){var{components:t}=e,i=r(e,["components"]);return(0,n.kt)("wrapper",l({},m,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Une ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/dsmapping#entity"}),"entity")," est une instance d'une ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/dsmapping#dataclass"}),"Dataclass"),", tel un enregistrement de la table correspondant \xe0 la dataclass contenue dans son datastore associ\xe9. Elle contient les m\xeames attributs que la dataclass ainsi que les valeurs des donn\xe9es et des propri\xe9t\xe9s et fonctions sp\xe9cifiques."),(0,n.kt)("h3",l({},{id:"sommaire"}),"Sommaire"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#attributename"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : any"),"\xa0","\xa0","\xa0","\xa0","stocke la valeur de l'attribut pour l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#clone"}),(0,n.kt)("strong",{parentName:"a"},".clone()")," : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","cr\xe9e en m\xe9moire une nouvelle entit\xe9 r\xe9f\xe9ren\xe7ant le m\xeame enregistrement que l'entit\xe9 d'origine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#diff"}),(0,n.kt)("strong",{parentName:"a"},".diff"),"( ",(0,n.kt)("em",{parentName:"a"},"entityToCompare")," : 4D.Entity { ; ",(0,n.kt)("em",{parentName:"a"},"attributesToCompare")," : Collection } ) : Collection"),"\xa0","\xa0","\xa0","\xa0","compare les contenus de deux entit\xe9s et renvoie leurs diff\xe9rences")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#drop"}),(0,n.kt)("strong",{parentName:"a"},".drop"),"( {",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer} ) : Object"),"\xa0","\xa0","\xa0","\xa0","supprime du datastore les donn\xe9es contenues dans l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#first"}),(0,n.kt)("strong",{parentName:"a"},".first()"),": 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","retourne une r\xe9f\xe9rence vers l'entit\xe9 en premi\xe8re position dans l'entity selection \xe0 laquelle appartient l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#fromobject"}),(0,n.kt)("strong",{parentName:"a"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filler")," : Object )"),"\xa0","\xa0","\xa0","\xa0","remplit les attributs de l'entit\xe9 avec le contenu de ",(0,n.kt)("em",{parentName:"td"},"filler"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getdataclass"}),(0,n.kt)("strong",{parentName:"a"},".getDataClass()")," : 4D.DataClass"),"\xa0","\xa0","\xa0","\xa0","retourne la dataclass de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getkey"}),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Integer"),"\xa0","\xa0","\xa0","\xa0","renvoie la valeur de la cl\xe9 primaire de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getremotecontextattributes"}),(0,n.kt)("strong",{parentName:"a"},".getRemoteContextAttributes()")," : Text"),"\xa0","\xa0","\xa0","\xa0","renvoie des informations sur le contexte d'optimisation utilis\xe9 par l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getselection"}),(0,n.kt)("strong",{parentName:"a"},".getSelection()"),": 4D.EntitySelection"),"\xa0","\xa0","\xa0","\xa0","renvoie l'entity selection \xe0 laquelle l'entit\xe9 appartient")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getstamp"}),(0,n.kt)("strong",{parentName:"a"},".getStamp()")," : Integer"),"\xa0","\xa0","\xa0","\xa0"," retourne la valeur courante du stamp de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#indexof"}),(0,n.kt)("strong",{parentName:"a"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"a"},"entitySelection")," : 4D.EntitySelection } ) : Integer"),"\xa0","\xa0","\xa0","\xa0","retourne la position de l'entit\xe9 dans une entity selection")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#isnew"}),(0,n.kt)("strong",{parentName:"a"},".isNew()")," : Boolean"),"\xa0","\xa0","\xa0","\xa0"," renvoie Vrai si l'entit\xe9 \xe0 laquelle elle est appliqu\xe9e vient d'\xeatre cr\xe9\xe9e et n'a pas encore \xe9t\xe9 sauvegard\xe9e dans le datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#last"}),(0,n.kt)("strong",{parentName:"a"},".last()")," : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","retourne une r\xe9f\xe9rence vers l'entit\xe9 en derni\xe8re position dans l'entity selection \xe0 laquelle appartient l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#lock"}),(0,n.kt)("strong",{parentName:"a"},".lock"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","pose un verrou pessimiste sur l'enregistrement r\xe9f\xe9renc\xe9 par l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#next"}),(0,n.kt)("strong",{parentName:"a"},".next()")," : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","retourne une r\xe9f\xe9rence vers l'entit\xe9 suivante dans l'entity selection \xe0 laquelle appartient l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#previous"}),(0,n.kt)("strong",{parentName:"a"},".previous()"),"  : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0"," retourne une r\xe9f\xe9rence vers l'entit\xe9 pr\xe9c\xe9dente dans l'entity selection \xe0 laquelle appartient l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#reload"}),(0,n.kt)("strong",{parentName:"a"},".reload()")," : Object"),"\xa0","\xa0","\xa0","\xa0","recharge en m\xe9moire le contenu de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#save"}),(0,n.kt)("strong",{parentName:"a"},".save"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","sauvegarde les modifications apport\xe9es \xe0 l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#toobject"}),(0,n.kt)("strong",{parentName:"a"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","retourne un objet construit \xe0 partir de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#touched"}),(0,n.kt)("strong",{parentName:"a"},".touched()")," : Boolean"),"\xa0","\xa0","\xa0","\xa0","v\xe9rifie si un attribut de l'entit\xe9 a \xe9t\xe9 modifi\xe9 depuis que l'entit\xe9 a \xe9t\xe9 charg\xe9e en m\xe9moire ou sauvegard\xe9e")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#touchedattributes"}),(0,n.kt)("strong",{parentName:"a"},".touchedAttributes()")," : Collection"),"\xa0","\xa0","\xa0","\xa0","retourne les noms des attributs qui ont \xe9t\xe9 modifi\xe9s depuis que l'entit\xe9 a \xe9t\xe9 charg\xe9e en m\xe9moire")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#unlock"}),(0,n.kt)("strong",{parentName:"a"},".unlock()")," : Object"),"\xa0","\xa0","\xa0","\xa0","supprime le verrou pessimiste pos\xe9 sur l'enregistrement correspondant \xe0 l'entit\xe9")))),(0,n.kt)("h2",l({},{id:"attributename"}),".",(0,n.kt)("em",{parentName:"h2"},"attributeName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : any"),(0,n.kt)("h4",l({},{id:"description"}),"Description"),(0,n.kt)("p",null,"Tout attribut de dataclass est disponible en tant que propri\xe9t\xe9 d'une entit\xe9, qui stocke la valeur de l'attribut pour l'entit\xe9."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Les attributs de dataclass peuvent \xe9galement \xeatre obtenus en utilisant la syntaxe alternative avec ","["," ].")),(0,n.kt)("p",null,"Le type de valeur de l'attribut d\xe9pend du type (",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassAttributeClass#kind"}),"kind"),") d'attribut (relation ou stockage) :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si le type de ",(0,n.kt)("em",{parentName:"li"},"attributeName")," est ",(0,n.kt)("strong",{parentName:"li"},"storage")," : ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," retourne une valeur du m\xeame type que ",(0,n.kt)("em",{parentName:"li"},"attributeName"),"."),(0,n.kt)("li",{parentName:"ul"},"Si le type de ",(0,n.kt)("em",{parentName:"li"},"attributeName")," est ",(0,n.kt)("strong",{parentName:"li"},"relatedEntity")," : ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," retourne une entit\xe9 reli\xe9e. Les valeurs de l'entit\xe9 li\xe9e sont directement disponibles par le biais des propri\xe9t\xe9s en cascade, par exemple \"myEntity.employer.employees","[",'0].lastname".'),(0,n.kt)("li",{parentName:"ul"},"Si le type de ",(0,n.kt)("em",{parentName:"li"},"attributeName")," est ",(0,n.kt)("strong",{parentName:"li"},"relatedEntities")," : ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," retourne une nouvelle entity selection d'entit\xe9s li\xe9es. Les doublons sont supprim\xe9s (une entity selection non ordonn\xe9e est retourn\xe9e).")),(0,n.kt)("h4",l({},{id:"exemple"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $myEntity : cs.EmployeeEntity\n$myEntity:=ds.Employee.new() //Cr\xe9er une nouvelle entity\n$myEntity.name:=\"Dupont\" //assigner 'Dupont' \xe0 l'attribut 'name'\n$myEntity.firstname:=\"John\" //assigner 'John' \xe0 l'attribut 'firstname' \n$myEntity.save() //sauvegarder l'entity\n")),(0,n.kt)("h2",l({},{id:"clone"}),".clone()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clone()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nouvelle entit\xe9 r\xe9f\xe9ren\xe7ant l'enregistrement")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-1"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"clone()")," cr\xe9e en m\xe9moire une nouvelle entit\xe9 r\xe9f\xe9ren\xe7ant le m\xeame enregistrement que l'entit\xe9 d'origine. Cette fonction vous permet de mettre \xe0 jour des entit\xe9s s\xe9par\xe9ment."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"A noter que toute modification apport\xe9e aux entit\xe9s n'est stock\xe9e dans l'enregistrement r\xe9f\xe9renc\xe9 qu'au moment o\xf9 la fonction ",(0,n.kt)("a",l({parentName:"p"},{href:"#save"}),(0,n.kt)("inlineCode",{parentName:"a"},".save( )"))," est ex\xe9cut\xe9e.")),(0,n.kt)("p",null,"Cette fonction ne peut \xeatre utilis\xe9e qu'avec des entit\xe9s d\xe9j\xe0 enregistr\xe9es dans la base de donn\xe9es. Elle ne peut pas \xeatre appel\xe9e sur une entit\xe9 nouvellement cr\xe9\xe9e (pour laquelle ",(0,n.kt)("a",l({parentName:"p"},{href:"#isnew"}),(0,n.kt)("inlineCode",{parentName:"a"},".isNew()"))," retourne ",(0,n.kt)("strong",{parentName:"p"},"True"),")."),(0,n.kt)("h4",l({},{id:"exemple-1"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp; $empCloned : cs.EmployeeEntity\n $emp:=ds.Employee.get(672)\n $empCloned:=$emp.clone()\n\n $emp.lastName:="Smith" //Les mises \xe0 jour effectu\xe9es sur $emp ne le sont pas sur $empCloned\n\n')),(0,n.kt)("h2",l({},{id:"diff"}),".diff()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".diff"),"( ",(0,n.kt)("em",{parentName:"p"},"entityToCompare")," : 4D.Entity { ; ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare")," : Collection } ) : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"entityToCompare"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Entit\xe9 \xe0 comparer \xe0 l'entit\xe9 d'origine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"attributesToCompare"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Noms des attributs \xe0 comparer")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Diff\xe9rences entre les entit\xe9s")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-2"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"diff()")," compare les contenus de deux entit\xe9s et renvoie leurs diff\xe9rences."),(0,n.kt)("p",null,"Dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"entityToCompare"),", passez l'entit\xe9 \xe0 comparer \xe0 l'entit\xe9 d'origine."),(0,n.kt)("p",null,"Dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare"),", vous pouvez d\xe9signer les attributs sp\xe9cifiques \xe0 comparer. Si le param\xe8tre est pass\xe9, la comparaison est effectu\xe9e uniquement sur les attributs sp\xe9cifi\xe9s. S'il est omis, toutes les diff\xe9rences entre les entit\xe9s sont retourn\xe9es."),(0,n.kt)("p",null,"Les diff\xe9rences sont retourn\xe9es sous forme de collection d'objets dont les propri\xe9t\xe9s sont :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Nom de propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"attributeName"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom de l'attribut")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"value"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"D\xe9pend du type d'attribut"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur de l'attribut dans l'entit\xe9 d'origine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"otherValue"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"D\xe9pend du type d'attribut"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur de l'attribut dans ",(0,n.kt)("em",{parentName:"td"},"entityToCompare"))))),(0,n.kt)("p",null,"Seuls les attributs dont les valeurs diff\xe8rent sont inclus dans la collection. Si aucune diff\xe9rence n'est trouv\xe9e, ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," retourne une collection vide."),(0,n.kt)("p",null,"La fonction s'applique aux attributs dont le ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassAttributeClass#kind"}),"kind")," est ",(0,n.kt)("strong",{parentName:"p"},"storage")," ou ",(0,n.kt)("strong",{parentName:"p"},"relatedEntity"),". Dans le cas o\xf9 une entit\xe9 li\xe9e a \xe9t\xe9 mise \xe0 jour (c'est-\xe0-dire la cl\xe9 \xe9trang\xe8re), le nom de l'entit\xe9 li\xe9e et de sa cl\xe9 primaire sont retourn\xe9s comme propri\xe9t\xe9s ",(0,n.kt)("em",{parentName:"p"},"attributeName")," (",(0,n.kt)("em",{parentName:"p"},"value")," et ",(0,n.kt)("em",{parentName:"p"},"otherValue")," sont vides pour l'entit\xe9 li\xe9e)."),(0,n.kt)("p",null,"Si l'une des entit\xe9s compar\xe9es vaut ",(0,n.kt)("strong",{parentName:"p"},"Null"),", une erreur est retourn\xe9e."),(0,n.kt)("h4",l({},{id:"exemple-1-1"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $diff1; $diff2 : Collection\n employee:=ds.Employee.query("ID=1001").first()\n $clone:=employee.clone()\n employee.firstName:="MARIE"\n employee.lastName:="SOPHIE"\n employee.salary:=500\n $diff1:=$clone.diff(employee) // All differences are returned\n $diff2:=$clone.diff(employee;New collection("firstName";"lastName"))\n  // Only differences on firstName and lastName are returned\n')),(0,n.kt)("p",null,"$diff1:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    },\n    {\n        "attributeName": "salary",\n        "value": 66600,\n        "otherValue": 500\n    }\n]\n$diff2:\n\n[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    }\n]\n')),(0,n.kt)("h4",l({},{id:"exemple-2"}),"Exemple 2"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var vCompareResult1; vCompareResult2; vCompareResult3; $attributesToInspect : Collection\n vCompareResult1:=New collection\n vCompareResult2:=New collection\n vCompareResult3:=New collection\n $attributesToInspect:=New collection\n\n $e1:=ds.Employee.get(636)\n $e2:=ds.Employee.get(636)\n\n $e1.firstName:=$e1.firstName+" update"\n $e1.lastName:=$e1.lastName+" update"\n\n $c:=ds.Company.get(117)\n $e1.employer:=$c\n $e2.salary:=100\n\n $attributesToInspect.push("firstName")\n $attributesToInspect.push("lastName")\n\n vCompareResult1:=$e1.diff($e2)\n vCompareResult2:=$e1.diff($e2;$attributesToInspect)\n vCompareResult3:=$e1.diff($e2;$e1.touchedAttributes())\n')),(0,n.kt)("p",null,"vCompareResult1 (toutes les diff\xe9rences sont retourn\xe9es) :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "salary",\n        "value": 33500,\n        "otherValue": 100\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n  {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 de Company\n        "otherValue": "[object Entity]"// Entity 118 de Company\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult2 (seules les diff\xe9rences sur $attributesToInspect sont retourn\xe9es)"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult3 (seules les diff\xe9rences sur les attributs touch\xe9s de $e1 sont retourn\xe9s)"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n     {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 de Company\n        "otherValue": "[object Entity]"// Entity 118 de Company\n\n    }\n]\n')),(0,n.kt)("h2",l({},{id:"drop"}),".drop()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".drop"),"( {",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer} ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," : Force la suppression m\xeame si le marqueur interne a chang\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat de l'op\xe9ration de suppression")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-3"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," supprime du datastore les donn\xe9es contenues dans l'entit\xe9, dans la table li\xe9e \xe0 sa dataclass. A noter que l'entit\xe9 reste en m\xe9moire."),(0,n.kt)("p",null,"Dans une application multiprocess ou multi-utilisateurs, la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," est ex\xe9cut\xe9e en mode ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#verrouillage-d-une-entite"}),'"verrouillage optimiste"')," dans lequel un marqueur de verrouillage interne est automatiquement incr\xe9ment\xe9 \xe0 chaque sauvegarde de l'enregistrement."),(0,n.kt)("p",null,"Par d\xe9faut, lorsque le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"mode")," est omis, la m\xe9thode retourne une erreur (cf. ci-dessous) si l'entit\xe9 a \xe9t\xe9 modifi\xe9e (i.e. le marqueur interne a chang\xe9) entre-temps par un autre process ou utilisateur."),(0,n.kt)("p",null,"Sinon, vous pouvez passer l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"mode")," : dans ce cas, l'entit\xe9 est supprim\xe9e m\xeame si la valeur du marqueur interne est diff\xe9rente (si la cl\xe9 primaire est identique)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"R\xe9sultat")),(0,n.kt)("p",null,"L'objet retourn\xe9 par ",(0,n.kt)("inlineCode",{parentName:"p"},".drop( )")," contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"vrai si l'action de suppression a \xe9t\xe9 effectu\xe9e avec succ\xe8s, sinon Faux.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur :")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(*)"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(*)"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Description de l'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur de verrouillage pessimiste :")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"LockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Information sur l'origine du verrouillage")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Id du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom d'utilisateur de la session sur la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Alias utilisateur si d\xe9fini avec ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", sinon le nom d'utilisateur dans le r\xe9pertoire de la base 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom de la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur critique (cl\xe9 primaire dupliqu\xe9e, disque plein..) :")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Message d'erreur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"component signature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'signature du composant interne (e.g. "dmbg" pour le composant de base de donn\xe9es)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur")))),(0,n.kt)("p",null,"(","*",") Les valeurs suivantes peuvent \xeatre retourn\xe9es dans les propri\xe9t\xe9s ",(0,n.kt)("em",{parentName:"p"},"status")," et ",(0,n.kt)("em",{parentName:"p"},"statusText")," de l'objet ",(0,n.kt)("em",{parentName:"p"},"R\xe9sultat")," en cas d'erreur :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Value"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 n'existe plus dans les donn\xe9es. Cette erreur peut se produire dans les cas suivants :",(0,n.kt)("br",null),(0,n.kt)("li",null,"l'entit\xe9 a \xe9t\xe9 supprim\xe9e (le stamp est modifi\xe9 et l'espace m\xe9moire est lib\xe9r\xe9)"),(0,n.kt)("li",null,"l'entit\xe9 a \xe9t\xe9 supprim\xe9e et remplac\xe9e par une autre avec une cl\xe9 primaire diff\xe9rente (le stamp est modifi\xe9 et une nouvelle entit\xe9 occupe l'espace m\xe9moire). Avec drop( ), cette erreur peut \xeatre retourn\xe9e lorsque l'option dk force drop if stamp changed est utilis\xe9e. Avec lock( ), cette erreur peut \xeatre retourn\xe9e lorsque l'option dk reload if stamp changed est utilis\xe9e")," ",(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 est verrouill\xe9e par un verrou pessimiste.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Une erreur critique peut \xeatre une erreur de bas niveau de la base de donn\xe9es (ex. cl\xe9 dupliqu\xe9e), une erreur mat\xe9rielle, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La valeur du marqueur interne (stamp) de l'entit\xe9 ne correspond pas \xe0 celle de l'entit\xe9 stock\xe9e dans les donn\xe9es (verrouillage optimiste).",(0,n.kt)("br",null),(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," n'est pas utilis\xe9e"),(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," n'est pas utilis\xe9e"),(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," n'est pas utilis\xe9e"),(0,n.kt)("li",null,(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Stamp has changed"'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Les privil\xe8ges courants ne permettent pas de supprimer l'entit\xe9. ",(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Permission error"')))),(0,n.kt)("h4",l({},{id:"exemple-1-2"}),"Exemple 1"),(0,n.kt)("p",null,"Exemple sans option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $status : Object\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop()\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //L\'entit\xe9 supprim\xe9e reste en m\xe9moire\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"exemple-2-1"}),"Exemple 2"),(0,n.kt)("p",null,"M\xeame exemple avec l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $status : Object\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop(dk force drop if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //L\'entit\xe9 supprim\xe9e reste en m\xe9moire\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"first"}),".first()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".first()"),": 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9f\xe9rence \xe0 la premi\xe8re entit\xe9 de l'entity selection (Null si non trouv\xe9e)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-4"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".first()")," retourne une r\xe9f\xe9rence vers l'entit\xe9 en premi\xe8re position dans l'entity selection \xe0 laquelle appartient l'entit\xe9."),(0,n.kt)("p",null,"Si l'entit\xe9 n'appartient \xe0 aucune entity selection (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection( )")," retourne Null), la fonction renvoie une valeur Null."),(0,n.kt)("h4",l({},{id:"exemple-3"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $firstEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Cette entity selection contient 3 entit\xe9s\n $employee:=$employees[2]\n $firstEmployee:=$employee.first() //$firstEmployee est la premi\xe8re entit\xe9 de l\'entity selection $employees\n')),(0,n.kt)("h2",l({},{id:"fromobject"}),".fromObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filler")," : Object )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filler"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objet avec lequel remplir l'entit\xe9")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-5"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()")," remplit les attributs de l'entit\xe9 avec le contenu de ",(0,n.kt)("em",{parentName:"p"},"filler"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Cette fonction modifie l'entity d'origine.")),(0,n.kt)("p",null,"La correspondance entre l'objet et l'entit\xe9 est \xe9tablie \xe0 partir des noms de propri\xe9t\xe9s/d'attributs :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si une propri\xe9t\xe9 de l'objet n'existe pas dans la dataclass, elle est ignor\xe9e."),(0,n.kt)("li",{parentName:"ul"},"Les types de donn\xe9es doivent \xeatre \xe9quivalents. S'il existe une diff\xe9rence de type entre l'objet et la dataclass, 4D essaie de convertir les donn\xe9es lorsque cela est possible (voir ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/fr/Concepts/data-types#converting-data-types"}),(0,n.kt)("inlineCode",{parentName:"a"},"Conversion des types de donn\xe9es")),"), sinon l'attribut demeure intact."),(0,n.kt)("li",{parentName:"ul"},"La cl\xe9 primaire peut \xeatre donn\xe9e telle quelle ou avec une propri\xe9t\xe9 \"__KEY\" (remplie avec la valeur de la cl\xe9 primaire). Si elle n'existe pas d\xe9j\xe0 dans la dataclass, l'entit\xe9 est cr\xe9\xe9e avec la valeur donn\xe9e lorsque ",(0,n.kt)("a",l({parentName:"li"},{href:"#save"}),".save()")," est appel\xe9. Si la cl\xe9 primaire n'est pas fournie, l'entit\xe9 est cr\xe9\xe9e et la valeur de la cl\xe9 primaire est affect\xe9e en fonction des r\xe8gles de la base de donn\xe9es. L'auto-incr\xe9mentation n'est calcul\xe9e que si la cl\xe9 primaire est nulle.")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"filler")," peut contenir une related entity dans les conditions suivantes :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler")," contient lui-m\xeame la cl\xe9 \xe9trang\xe8re, ou"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler")," contient une propri\xe9t\xe9 de type objet qui a le m\xeame nom que l'entit\xe9 relative, contenant une seule propri\xe9t\xe9 nomm\xe9e \"","_","_",'KEY".'),(0,n.kt)("li",{parentName:"ul"},"si l'entit\xe9 relative n'existe pas, elle est ignor\xe9e.")),(0,n.kt)("h4",l({},{id:"exemple-4"}),"Exemple"),(0,n.kt)("p",null,"Avec l'objet $o suivant :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Mary",\n    "lastName": "Smith",\n    "salary": 36500,\n    "birthDate": "1958-10-27T00:00:00.000Z",\n    "woman": true,\n    "managerID": 411,// relatedEntity fournie avec cl\xe9 primaire\n    "employerID": 20 // relatedEntity fournie avec cl\xe9 primaire\n}\n')),(0,n.kt)("p",null,"Le code suivant cr\xe9era une entit\xe9 avec les entit\xe9s relatives manager et employer."),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $o : Object\n var $entity : cs.EmpEntity\n $entity:=ds.Emp.new()\n $entity.fromObject($o)\n $entity.save()\n")),(0,n.kt)("p",null,"Vous pouvez \xe9galement utiliser une entit\xe9 relative fournie sous forme d'objet :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'\n{\n    "firstName": "Marie",\n    "lastName": "Lechat",\n    "salary": 68400,\n    "birthDate": "1971-09-03T00:00:00.000Z",\n    "woman": false,\n    "employer": {// relatedEntity fournie sous forme d\'objet\n        "__KEY": "21"\n    },\n    "manager": {// relatedEntity fournie sous forme d\'objet\n        "__KEY": "411"\n    }\n}\n')),(0,n.kt)("h2",l({},{id:"getdataclass"}),".getDataClass()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getDataClass()")," : 4D.DataClass"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.DataClass"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Dataclass \xe0 laquelle appartient l'entit\xe9")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-6"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getDataClass()")," retourne la dataclass de l'entit\xe9. Cette fonction est utile pour l'\xe9criture du code g\xe9n\xe9rique."),(0,n.kt)("h4",l({},{id:"exemple-5"}),"Exemple"),(0,n.kt)("p",null,"Le code g\xe9n\xe9rique suivant duplique toute entit\xe9 :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),"  //m\xe9thode duplicate_entity \n  //duplicate_entity($entity) \n\n #DECLARE($entity : 4D.Entity)  \n var $entityNew : 4D.Entity\n var $status : Object\n\n $entityNew:=$entity.getDataClass().new() //cr\xe9e une nouvelle entit\xe9 dans la dataclass parente\n $entityNew.fromObject($entity.toObject()) //lire tous les attributs\n $entityNew[$entity.getDataClass().getInfo().primaryKey]:=Null //r\xe9initialise la cl\xe9 primaire\n $status:=$entityNew.save() //sauvegarde l'entit\xe9 dupliqu\xe9e\n")),(0,n.kt)("h2",l({},{id:"getkey"}),".getKey()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk key as string"),": retourner la cl\xe9 primaire en texte, quel que soit son type d'origine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur de la cl\xe9 primaire texte de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur de la cl\xe9 primaire num\xe9rique de l'entit\xe9")))),(0,n.kt)("h4",l({},{id:"description-7"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getKey()")," renvoie la valeur de la cl\xe9 primaire de l'entit\xe9."),(0,n.kt)("p",null,"Les cl\xe9s primaires peuvent \xeatre des nombres (integer) ou des textes. Vous pouvez \"forcer\" la m\xe9thode \xe0 retourner la valeur de cl\xe9 primaire sous forme de cha\xeene, quel que soit son type d'origine, en passant l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk key as string")," dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"mode"),"."),(0,n.kt)("h4",l({},{id:"exemple-6"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees[0]\n ALERT("The primary key is "+$employee.getKey(dk key as string))\n')),(0,n.kt)("h2",l({},{id:"getremotecontextattributes"}),".getRemoteContextAttributes()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v19R5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRemoteContextAttributes()")," : Text"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Attributs de contexte associ\xe9s \xe0 l'entity, s\xe9par\xe9s par une virgule")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Mode avanc\xe9 :")," Cette fonction est destin\xe9e aux d\xe9veloppeurs qui souhaitent personnaliser les fonctionnalit\xe9s par d\xe9faut de ORDA dans le cadre de configurations sp\xe9cifiques. Dans la plupart des cas, vous n'aurez pas besoin de l'utiliser.")),(0,n.kt)("h4",l({},{id:"description-8"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getRemoteContextAttributes()")," renvoie des informations sur le contexte d'optimisation utilis\xe9 par l'entit\xe9 ."),(0,n.kt)("p",null,"S'il n'existe pas de ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/datastores#clientserver-optimization"}),"contexte d'optimisation")," pour l'entity, la fonction retourne un texte vide."),(0,n.kt)("h4",l({},{id:"exemple-7"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\nvar $address : cs.AddressEntity\nvar $p : cs.PersonsEntity\nvar $contextA : Object\nvar $info : Text\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$contextA:=New object("context"; "contextA")\n\n$address:=$ds.Address.get(1; $contextA)\n$text:=""\nFor each ($p; $address.persons)\n    $text:=$p.firstname+" "+$p.lastname\nEnd for each\n\n$info:=$address.getRemoteContextAttributes()\n\n//$info = "persons,persons.lastname,persons.firstname"\n')),(0,n.kt)("h4",l({},{id:"voir-\xe9galement"}),"Voir \xe9galement"),(0,n.kt)("p",null,(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/EntitySelectionClass#getRemoteContextAttributes"}),"EntitySelection.getRemoteContextAttributes()"),(0,n.kt)("br",null),(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataStoreClass#clearallremotecontexts"}),".clearAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataStoreClass#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataStoreClass#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataStoreClass#setremotecontextinfo"}),".setRemoteContextInfo()")),(0,n.kt)("h2",l({},{id:"getselection"}),".getSelection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getSelection()"),": 4D.EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Entity selection \xe0 laquelle appartient l'entit\xe9 (Null si non trouv\xe9e)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-9"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getSelection()")," renvoie l'entity selection \xe0 laquelle l'entit\xe9 appartient."),(0,n.kt)("p",null,"Si l'entit\xe9 n'appartient pas \xe0 une entity selection, la fonction renvoie Null."),(0,n.kt)("h4",l({},{id:"exemple-8"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp : cs.EmployeeEntity\n var $employees; $employees2 : cs.EmployeeSelection\n $emp:=ds.Employee.get(672) // Cette entit\xe9 n\'appartient \xe0 aucune entity selection\n $employees:=$emp.getSelection() // $employees contient Null\n\n $employees2:=ds.Employee.query("lastName=:1";"Smith") //Cette entity selection contient 6 entit\xe9s\n $emp:=$employees2[0]  // Cette entit\xe9 appartient \xe0 une entity selection\n\n ALERT("L\'entity selection contient "+String($emp.getSelection().length)+" entit\xe9s")\n')),(0,n.kt)("h2",l({},{id:"getstamp"}),".getStamp()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getStamp()")," : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valeur du \"stamp\" de l'entit\xe9 (0 si l'entit\xe9 vient d'\xeatre cr\xe9\xe9e)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-10"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".getStamp()"),"  retourne la valeur courante du stamp de l'entit\xe9."),(0,n.kt)("p",null,"Le stamp (marqueur interne) d'une entit\xe9 est automatiquement incr\xe9ment\xe9 par 4D \xe0 chaque fois qu'une entit\xe9 est enregistr\xe9e sur disque. Il permet de g\xe9rer les acc\xe8s et modifications concurrent(e)s sur les m\xeames entit\xe9s (cf. ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#verrouillage-d-une-entite"}),(0,n.kt)("strong",{parentName:"a"},"Entity locking")),")."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour une nouvelle entit\xe9 (jamais enregistr\xe9e), la fonction retourne 0. Pour savoir si une entit\xe9 vient d'\xeatre cr\xe9\xe9e, il est cependant recommand\xe9 d'utiliser ",(0,n.kt)("a",l({parentName:"p"},{href:"#isnew"}),".isNew()"),".")),(0,n.kt)("h4",l({},{id:"exemple-9"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $entity : cs.EmployeeEntity\n var $stamp : Integer\n\n $entity:=ds.Employee.new()\n $entity.lastname:="Smith"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=1\n\n $entity.lastname:="Wesson"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=2\n')),(0,n.kt)("h2",l({},{id:"indexof"}),".indexOf()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," : 4D.EntitySelection } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"entitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Entity selection dans laquelle obtenir la position de l'entit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Position de l'entit\xe9 dans l'entity selection")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-11"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".indexOf()")," retourne la position de l'entit\xe9 dans une entity selection."),(0,n.kt)("p",null,"Par d\xe9faut, si le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," est omis, la fonction retourne la position de l'entit\xe9 dans sa propre entity selection (si elle existe). Sinon, elle renvoie la position de l'entit\xe9 dans l'",(0,n.kt)("em",{parentName:"p"},"entitySelection")," sp\xe9cifi\xe9e."),(0,n.kt)("p",null,"La valeur r\xe9sultante est comprise entre 0 et la longueur de l'entity selection -1."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si l'entit\xe9 n'a pas d'entity selection ou n'appartient pas \xe0 ",(0,n.kt)("em",{parentName:"li"},"entitySelection"),", la fonction retourne -1."),(0,n.kt)("li",{parentName:"ul"},"Si ",(0,n.kt)("em",{parentName:"li"},"entitySelection")," est Null ou n'appartient pas \xe0 la m\xeame dataclass que l'entit\xe9, une erreur est g\xe9n\xe9r\xe9e.")),(0,n.kt)("h4",l({},{id:"exemple-10"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Cette entity selection contient 3 entit\xe9s\n $employee:=$employees[1] //Cette entit\xe9 appartient \xe0 l\'entity selection\n ALERT("La position de cette entit\xe9 dans son entity selection est "+String($employee.indexOf())) //1\n\n $employee:=ds.Employee.get(725) //Cette entit\xe9 n\'appartient pas \xe0 l\'entity selection\n ALERT("La position de cette entit\xe9 est "+String($employee.indexOf())) // -1\n')),(0,n.kt)("h2",l({},{id:"isnew"}),".isNew()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".isNew()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si l'entit\xe9 vient juste d'\xeatre cr\xe9\xe9e et n'a pas encore \xe9t\xe9 enregistr\xe9e. Sinon, Faux.")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-12"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".isNew()"),"  renvoie Vrai si l'entit\xe9 \xe0 laquelle elle est appliqu\xe9e vient d'\xeatre cr\xe9\xe9e et n'a pas encore \xe9t\xe9 sauvegard\xe9e dans le datastore. Sinon, elle renvoie Faux."),(0,n.kt)("h4",l({},{id:"exemple-11"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp : cs.EmployeeEntity\n\n $emp:=ds.Employee.new()\n\n If($emp.isNew())\n    ALERT("Ceci est une nouvelle entit\xe9")\n End if\n')),(0,n.kt)("h2",l({},{id:"last"}),".last()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".last()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9f\xe9rence \xe0 la derni\xe8re entit\xe9 de l'entity selection (Null si non trouv\xe9e)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-13"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".last()")," retourne une r\xe9f\xe9rence vers l'entit\xe9 en derni\xe8re position dans l'entity selection \xe0 laquelle appartient l'entit\xe9."),(0,n.kt)("p",null,"Si l'entit\xe9 n'appartient \xe0 aucune entity selection (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection( )")," retourne Null), la fonction renvoie une valeur Null."),(0,n.kt)("h4",l({},{id:"exemple-12"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $lastEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Cette entity selection contient 3 entit\xe9s $employee:=$employees[0]\n $lastEmployee:=$employee.last() //$lastEmployee est la derni\xe8re entit\xe9 de l\'entity selection $employees\n')),(0,n.kt)("h2",l({},{id:"lock"}),".lock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".lock"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," : Recharger avant de verrouiller si le marqueur interne a chang\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat de l'op\xe9ration lock")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-14"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"lock()")," pose un verrou pessimiste sur l'enregistrement r\xe9f\xe9renc\xe9 par l'entit\xe9. Le ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#verrouillage-d-une-entite"}),"verrou est pos\xe9")," pour l'enregistrement et toutes les r\xe9f\xe9rences de l'entit\xe9 dans le process courant."),(0,n.kt)("p",null,"Pour les autres process, cet enregistrement appara\xeetra verrouill\xe9 (la propri\xe9t\xe9 ",(0,n.kt)("inlineCode",{parentName:"p"},"result.success")," contiendra Faux s'ils tentent de verrouiller la m\xeame entit\xe9 \xe0 l'aide de cette fonction). Seules les fonctions ex\xe9cut\xe9es dans la session \xe0 l'origine du verrouillage auront la possibilit\xe9 de modifier et de sauvegarder les attributs de l'entit\xe9. L'entit\xe9 peut \xeatre charg\xe9e en lecture seulement dans les autres sessions, mais elles ne pourront ni saisir ni sauvegarder des valeurs."),(0,n.kt)("p",null,"Un enregistrement verrouill\xe9 peut \xeatre d\xe9verrouill\xe9 :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"lorsque la fonction ",(0,n.kt)("a",l({parentName:"li"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},"unlock()"))," est appel\xe9e sur une entit\xe9 correspondante dans le m\xeame process"),(0,n.kt)("li",{parentName:"ul"},"automatiquement, lorsqu'elle n'est plus r\xe9f\xe9renc\xe9e par aucune entit\xe9 en m\xe9moire. Par exemple, si le verrou n'est pos\xe9 que sur une r\xe9f\xe9rence locale d'une entit\xe9, celle-ci est d\xe9verrouill\xe9e \xe0 la fin de la fonction. Tant qu'il existe des r\xe9f\xe9rences \xe0 l'entit\xe9 en m\xe9moire, l'enregistrement reste verrouill\xe9.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour plus d'informations, veuillez consulter la section ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#verrouillage-d-une-entite"}),"Verrouillage d'une entit\xe9"),".")),(0,n.kt)("p",null,"Par d\xe9faut, lorsque le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"mode")," est omis, la m\xe9thode retourne une erreur (cf. ci-dessous) si l'entit\xe9 a \xe9t\xe9 modifi\xe9e (i.e. le marqueur interne a chang\xe9) entre-temps par un autre process ou utilisateur."),(0,n.kt)("p",null,"Sinon, vous pouvez passer l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed")," dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"mode")," : dans ce cas, aucune erreur n'est g\xe9n\xe9r\xe9e et l'entit\xe9 est simplement recharg\xe9e si le stamp a chang\xe9 (si l'entit\xe9 existe toujours et si la cl\xe9 primaire est toujours la m\xeame)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"R\xe9sultat")),(0,n.kt)("p",null,"L'objet retourn\xe9 par ",(0,n.kt)("inlineCode",{parentName:"p"},".lock( )")," contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"vrai si l'action de verrouillage a \xe9t\xe9 effectu\xe9e avec succ\xe8s (ou si l'entit\xe9 est d\xe9j\xe0 verrouill\xe9e dans le process courant), sinon faux.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"em"},"dk reload if stamp changed")," est utilis\xe9e :")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"wasReloaded")),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"vrai si l'entit\xe9 a \xe9t\xe9 correctement recharg\xe9e, sinon faux.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur :")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Description de l'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur de verrouillage pessimiste :")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record" si verrouillage par un process 4D, "Locked by session" si verrouillage par une session REST')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Information sur l'origine du verrouillage. Les propri\xe9t\xe9s retourn\xe9es d\xe9pendent de l'origine du verrouillage (process 4D ou session REST).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement pour un verrouillage par process 4D:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"ID du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom d'utilisateur de la session sur la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom ou alias de l'utilisateur 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Identifiant utilisateur dans le r\xe9pertoire de la base 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom de la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Version du client")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement pour un verrouillage par session REST :")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"URL ayant verrouill\xe9 l'entit\xe9 (ex : \"",(0,n.kt)("a",l({parentName:"td"},{href:"http://www.myserver.com%22"}),'www.myserver.com"'),")")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"IPAddr"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Adresse IP d'origine du verrouillage (ex. 127.0.0.1\")")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"userAgent"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'userAgent de l\'origine du verouillage (ex : "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36")')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur critique"))," (cl\xe9 primaire dupliqu\xe9e, disque plein...) :")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Message d'erreur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"component signature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'signature du composant interne (e.g. "dmbg" pour le composant de base de donn\xe9es)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur")))),(0,n.kt)("p",null,"(","*",") Les valeurs suivantes peuvent \xeatre retourn\xe9es dans les propri\xe9t\xe9s ",(0,n.kt)("em",{parentName:"p"},"status")," et ",(0,n.kt)("em",{parentName:"p"},"statusText")," de l'objet ",(0,n.kt)("em",{parentName:"p"},"R\xe9sultat")," en cas d'erreur :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Value"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 n'existe plus dans les donn\xe9es. Cette erreur peut se produire dans les cas suivants :",(0,n.kt)("li",null,"l'entit\xe9 a \xe9t\xe9 supprim\xe9e (le stamp est modifi\xe9 et l'espace m\xe9moire est lib\xe9r\xe9)"),(0,n.kt)("li",null,"l'entit\xe9 a \xe9t\xe9 supprim\xe9e et remplac\xe9e par une autre avec une cl\xe9 primaire diff\xe9rente (le stamp est modifi\xe9 et une nouvelle entit\xe9 occupe l'espace m\xe9moire). Avec ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),", cette erreur peut \xeatre retourn\xe9e lorsque l'option dk force drop if stamp changed est utilis\xe9e. Avec ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", cette erreur peut \xeatre retourn\xe9e lorsque l'option dk reload if stamp changed est utilis\xe9e."),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 est verrouill\xe9e par un verrou pessimiste.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Une erreur critique peut \xeatre une erreur de bas niveau de la base de donn\xe9es (ex. cl\xe9 dupliqu\xe9e), une erreur mat\xe9rielle, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La valeur du marqueur interne (stamp) de l'entit\xe9 ne correspond pas \xe0 celle de l'entit\xe9 stock\xe9e dans les donn\xe9es (verrouillage optimiste).",(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," n'est pas utilis\xe9e"),(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," n'est pas utilis\xe9e"),(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," n'est pas utilis\xe9e"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Stamp has changed"')))),(0,n.kt)("h4",l({},{id:"exemple-1-3"}),"Exemple 1"),(0,n.kt)("p",null,"Exemple avec erreur :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n $employee:=ds.Employee.get(716)\n $status:=$employee.lock()\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"exemple-2-2"}),"Exemple 2"),(0,n.kt)("p",null,"Exemple avec option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n $employee:=ds.Employee.get(717)\n $status:=$employee.lock(dk reload if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"next"}),".next()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".next()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9f\xe9rence \xe0 l'entit\xe9 suivante dans l'entity selection (Null si non trouv\xe9e)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-15"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".next()")," retourne une r\xe9f\xe9rence vers l'entit\xe9 suivante dans l'entity selection \xe0 laquelle appartient l'entit\xe9."),(0,n.kt)("p",null,"Si l'entit\xe9 n'appartient \xe0 aucune entity selection existante (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection()")," retourne Null), la fonction renvoie une valeur Null."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection( )")," returns Null), the function returns a Null value."),(0,n.kt)("h4",l({},{id:"exemple-13"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $nextEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Cette entity selection contient 3 entit\xe9s\n $employee:=$employees[0]\n $nextEmployee:=$employee.next() //$nextEmployee est la deuxi\xe8me entit\xe9 de l\'entity selection $employees\n\n')),(0,n.kt)("h2",l({},{id:"previous"}),".previous()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".previous()"),"  : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9f\xe9rence \xe0 l'entit\xe9 pr\xe9c\xe9dente dans l'entity selection (Null si non trouv\xe9e)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-16"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".previous()"),"  retourne une r\xe9f\xe9rence vers l'entit\xe9 pr\xe9c\xe9dente dans l'entity selection \xe0 laquelle appartient l'entit\xe9."),(0,n.kt)("p",null,"Si l'entit\xe9 n'appartient \xe0 aucune entity selection existante (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection()")," retourne Null), la fonction renvoie une valeur Null."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection( )")," returns Null), the function returns a Null value."),(0,n.kt)("h4",l({},{id:"exemple-14"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $previousEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Cette entity selection contient 3 entit\xe9s\n $employee:=$employees[1]\n $previousEmployee:=$employee.previous() //$previousEmployee est la premi\xe8re entit\xe9 de l\'entity selection $employees\n')),(0,n.kt)("h2",l({},{id:"reload-"}),".reload( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".reload()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objet statut")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-17"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".reload()")," recharge en m\xe9moire le contenu de l'entit\xe9, \xe0 partir des informations stock\xe9es dans la table associ\xe9e \xe0 la dataclass dans le datastore. Le rechargement est effectu\xe9 uniquement si l'entit\xe9 existe toujours avec la m\xeame cl\xe9 primaire."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"R\xe9sultat")),(0,n.kt)("p",null,"L'objet retourn\xe9 par ",(0,n.kt)("inlineCode",{parentName:"p"},".reload( )")," contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si l'action de rechargement est r\xe9ussie, Faux sinon. ",(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur, voir ci-dessous")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Description de l'erreur, voir ci-dessous")))),(0,n.kt)("p",null,"(","*",") Les valeurs suivantes peuvent \xeatre retourn\xe9es dans les propri\xe9t\xe9s ",(0,n.kt)("em",{parentName:"p"},"status")," et ",(0,n.kt)("em",{parentName:"p"},"statusText")," de l'objet ",(0,n.kt)("em",{parentName:"p"},"R\xe9sultat")," en cas d'erreur :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Value"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 n'existe plus dans les donn\xe9es. Cette erreur peut se produire dans les cas suivants :",(0,n.kt)("br",null),(0,n.kt)("li",null,"l'entit\xe9 a \xe9t\xe9 supprim\xe9e (le stamp est modifi\xe9 et l'espace m\xe9moire est lib\xe9r\xe9)"),(0,n.kt)("li",null,"l'entit\xe9 a \xe9t\xe9 supprim\xe9e et remplac\xe9e par une autre avec une cl\xe9 primaire diff\xe9rente (le stamp est modifi\xe9 et une nouvelle entit\xe9 occupe l'espace m\xe9moire). the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Avec ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", cette erreur peut \xeatre retourn\xe9e lorsque l'option dk reload if stamp changed est utilis\xe9e."),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"statusText associ\xe9")),' : "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Une erreur critique peut \xeatre une erreur de bas niveau de la base de donn\xe9es (ex. cl\xe9 dupliqu\xe9e), une erreur mat\xe9rielle, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"statusText associ\xe9")),' : "Other error"')))),(0,n.kt)("h4",l({},{id:"exemple-15"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n var $result : Object\n\n $employees:=ds.Employee.query("lastName=:1";"Hollis")\n $employee:=$employees[0]\n $employee.firstName:="Mary"\n $result:=$employee.reload()\n Case of\n    :($result.success)\n       ALERT("Rechargement effectu\xe9")\n    :($result.status=dk status entity does not exist anymore)\n       ALERT("L\'entit\xe9 a \xe9t\xe9 supprim\xe9e")\n End case\n')),(0,n.kt)("h2",l({},{id:"save"}),".save()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".save"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge"),' : Active le mode "automatic merge"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat de la sauvegarde")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-18"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"save()")," sauvegarde les modifications apport\xe9es \xe0 l'entit\xe9 dans la table li\xe9e \xe0 sa dataclass. Vous devez appeler cette fonction apr\xe8s toute cr\xe9ation ou modification d'entit\xe9 si vous souhaitez sauvegarder les changements."),(0,n.kt)("p",null,'La sauvegarde est effectu\xe9e si et seulement si au moins un attribut de l\'entit\xe9 a \xe9t\xe9 "touch\xe9" (cf. les fonctions ',(0,n.kt)("a",l({parentName:"p"},{href:"#touched"}),(0,n.kt)("inlineCode",{parentName:"a"},".touched()"))," et ",(0,n.kt)("a",l({parentName:"p"},{href:"#touchedattributes"}),(0,n.kt)("inlineCode",{parentName:"a"},".touchedAttributes()")),"). Sinon, la fonction ne fait rien (le trigger n'est pas appel\xe9)."),(0,n.kt)("p",null,"Dans une application multi-utilisateur ou multi-process, la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," est ex\xe9cut\xe9e avec le m\xe9canisme du ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#entity-locking"}),'"verrouillage optimiste"'),", dans lequel un compteur interne (stamp) est automatiquement incr\xe9ment\xe9 \xe0 chaque sauvegarde de l'enregistrement."),(0,n.kt)("p",null,"Par d\xe9faut, si le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"mode")," est omis, la fonction retournera syst\xe9matiquement une erreur (voir ci-dessous) lorsque la m\xeame entit\xe9 a \xe9t\xe9 modifi\xe9e entre-temps par un autre process ou utilisateur, quel(s) que soi(en)t l(es) attribut(s) modifi\xe9(s)."),(0,n.kt)("p",null,"Sinon, vous pouvez passer l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"mode"),' afin d\'activer le mode "automatic merge". Dans ce mode, une modification simultan\xe9e effectu\xe9e par un autre process/utilisateur sur la m\xeame entit\xe9 mais sur un attribut diff\xe9rent ne g\xe9n\xe8re pas d\'erreur. Les donn\xe9es effectivement stock\xe9es dans l\'enregistrement r\xe9sultent alors de la combinaison (le "merge") des modifications non-concurrentes (si des modifications ont \xe9t\xe9 effectu\xe9es sur le m\xeame attribut, la sauvegarde \xe9choue et une erreur est retourn\xe9e, m\xeame en mode "automatic merge").'),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Le mode de fusion automatique n'est pas disponible pour les attributs de type Image, Objet et Texte lorsqu'ils sont stock\xe9s en dehors de l'enregistrement. Des modifications simultan\xe9es de ces attributs entra\xeeneront une erreur \"",(0,n.kt)("inlineCode",{parentName:"p"},"dk status stamp has changed"),'".')),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"R\xe9sultat")),(0,n.kt)("p",null,"L'objet retourn\xe9 par ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," contient les propri\xe9t\xe9s suivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si la sauvegarde a \xe9t\xe9 effectu\xe9e avec succ\xe8s, sinon faux.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"em"},"dk auto merge")," a \xe9t\xe9 utilis\xe9e"))," :")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"autoMerged"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'Vrai si un "auto merge" a \xe9t\xe9 effectu\xe9, sinon faux.')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur"))," :")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur, ",(0,n.kt)("a",l({parentName:"td"},{href:"#status-and-statustext"}),"voir ci-dessous"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Description de l'erreur, ",(0,n.kt)("a",l({parentName:"td"},{href:"#status-and-statustext"}),"voir ci-dessous"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur en verrouillage pessimiste"))," :")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Information sur l'origine du verrouillage")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Id du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom d'utilisateur de la session sur la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Alias utilisateur si d\xe9fini avec ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", sinon le nom d'utilisateur dans le r\xe9pertoire de la base 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom de la machine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nom du process")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible uniquement en cas d'erreur critique"))," (cl\xe9 primaire dupliqu\xe9e, disque plein...) :")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Message d'erreur")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"componentSignature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'Signature du composant interne (e.g. "dmbg" pour le composant de base de donn\xe9es)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Code d'erreur")))),(0,n.kt)("h5",l({},{id:"status-et-statustext"}),"status et statusText"),(0,n.kt)("p",null,"Les valeurs suivantes peuvent \xeatre retourn\xe9es dans les propri\xe9t\xe9s ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," et ",(0,n.kt)("inlineCode",{parentName:"p"},"statusText")," de l'objet R\xe9sultat en cas d'erreur :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Value"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Commentaire"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status automerge failed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"6"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"(Uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," est utilis\xe9e) Echec du m\xe9canisme de merge automatique lors de la sauvegarde de l'entit\xe9. ",(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9 "),': "Auto merge failed".')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 n'existe plus dans les donn\xe9es. Cette erreur peut se produire dans les cas suivants :",(0,n.kt)("br",null),(0,n.kt)("li",null,"l'entit\xe9 a \xe9t\xe9 supprim\xe9e (le stamp est modifi\xe9 et l'espace m\xe9moire est lib\xe9r\xe9)"),(0,n.kt)("li",null,"l'entit\xe9 a \xe9t\xe9 supprim\xe9e et remplac\xe9e par une autre avec une cl\xe9 primaire diff\xe9rente (le stamp est modifi\xe9 et une nouvelle entit\xe9 occupe l'espace m\xe9moire). the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Avec ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", cette erreur peut \xeatre retourn\xe9e lorsque l'option dk reload if stamp changed est utilis\xe9e."),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"L'entit\xe9 est verrouill\xe9e par un verrou pessimiste.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Une erreur critique peut \xeatre une erreur de bas niveau de la base de donn\xe9es (ex. cl\xe9 dupliqu\xe9e), une erreur mat\xe9rielle, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La valeur du marqueur interne (stamp) de l'entit\xe9 ne correspond pas \xe0 celle de l'entit\xe9 stock\xe9e dans les donn\xe9es (verrouillage optimiste).",(0,n.kt)("br",null),(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," n'est pas utilis\xe9e"),(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," n'est pas utilis\xe9e"),(0,n.kt)("li",null,"avec ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )")," : erreur uniquement si l'option ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," n'est pas utilis\xe9e"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Stamp has changed"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Les privil\xe8ges courants ne permettent pas de sauvegarder l'entit\xe9. ",(0,n.kt)("strong",{parentName:"td"},"statusText associ\xe9"),' : "Permission error"')))),(0,n.kt)("h4",l({},{id:"exemple-1-4"}),"Exemple 1"),(0,n.kt)("p",null,"Cr\xe9ation d'une entit\xe9 :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs.EmployeeEntity\n $employee:=ds.Employee.new()\n $employee.firstName:="Mary"\n $employee.lastName:="Smith"\n $status:=$employee.save()\n If($status.success)\n    ALERT("Employ\xe9 cr\xe9\xe9")\n End if\n')),(0,n.kt)("h4",l({},{id:"exemple-2-3"}),"Exemple 2"),(0,n.kt)("p",null,"Mise \xe0 jour d'une entit\xe9 sans option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save()\n Case of\n    :($status.success)\n       ALERT("Employ\xe9 mis \xe0 jour")\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"exemple-3-1"}),"Exemple 3"),(0,n.kt)("p",null,"Mise \xe0 jour d'une entit\xe9 avec option ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n\n var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save(dk auto merge)\n Case of\n    :($status.success)\n       ALERT("Employ\xe9 mis \xe0 jour")\n    :($status.status=dk status automerge failed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"toobject"}),".toObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filterString"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Attribut(s) \xe0 extraire (cha\xeenes s\xe9par\xe9es par des virgules)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filterCol"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection d'attribut(s) \xe0 extraire")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"options"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk with primary key"),": ajoute la propri\xe9t\xe9 ","_","_","KEY ;",(0,n.kt)("br",null),(0,n.kt)("inlineCode",{parentName:"td"},"dk with stamp"),": ajoute la propri\xe9t\xe9 ","_","STAMP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objet g\xe9n\xe9r\xe9 \xe0 partir de l'entit\xe9")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-19"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," retourne un objet construit \xe0 partir de l'entit\xe9. Les noms des propri\xe9t\xe9s de l'objet correspondent aux noms des attributs de l'entit\xe9."),(0,n.kt)("p",null,"Si aucun filtre n'est pass\xe9 ou si le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"filterString"),' contient une cha\xeene vide ou "*", l\'objet retourn\xe9 contiendra :'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"tous les attributs storage de l'entit\xe9"),(0,n.kt)("li",{parentName:"ul"},"attributs dont le ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/fr/API/DataClassAttributeClass#kind"}),"kind")," est ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")," : vous obtenez une propri\xe9t\xe9 avec le m\xeame nom que l'entit\xe9 li\xe9e (nom du lien N vers 1). L'attribut est extrait sous forme simple."),(0,n.kt)("li",{parentName:"ul"},"attributs dont le ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/fr/API/DataClassAttributeClass#kind"}),"kind")," est ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntities")," : non retourn\xe9s.")),(0,n.kt)("p",null,"Dans le premier param\xe8tre, indiquez le ou les attribut(s) \xe0 extraire. Vous pouvez passer :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterString"),' : une cha\xeene avec les chemins des propri\xe9t\xe9s s\xe9par\xe9s par des virgules : "propertyPath1, propertyPath2, ...", ou'),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterCol")," : une collection de cha\xeenes contenant des chemins de propri\xe9t\xe9s : ","[",'"propertyPath1","propertyPath2";...]')),(0,n.kt)("p",null,"Si un filtre contient des attributs dont le ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassAttributeClass#kind"}),"kind")," est relatedEntity :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity" -> l\'attribut est extrait sous forme simple : un objet avec la propri\xe9t\xe9 ',"_","_","KEY (cl\xe9 primaire)."),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.*" -> toutes les propri\xe9t\xe9s sont extraites'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.propertyName1; relatedEntity.propertyName2; ..." -> seules ces propri\xe9t\xe9s sont extraites')),(0,n.kt)("p",null,"Si un filtre contient de attributs dont le ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassAttributeClass#kind"}),"kind")," est relatedEntities :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.*" -> toutes les propri\xe9t\xe9s sont extraites'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.propertyName1; relatedEntities.propertyName2; ..." -> seules ces propri\xe9t\xe9s sont extraites')),(0,n.kt)("p",null,"Dans le param\xe8tre ",(0,n.kt)("em",{parentName:"p"},"options"),", vous pouvez passer les s\xe9lecteurs ",(0,n.kt)("inlineCode",{parentName:"p"},"dk with primary key")," et/ou ",(0,n.kt)("inlineCode",{parentName:"p"},"dk with stamp")," afin d'ajouter les cl\xe9s primaires et/ou les stamps dans les objets extraits."),(0,n.kt)("admonition",l({},{title:"Avertissement",type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},"Si vous utilisez un autre attribut que la cl\xe9 primaire comme attribut 1 dans une relation, la valeur de cet attribut sera inscrite dans la propri\xe9t\xe9 \"__KEY\". Gardez \xe0 l'esprit qu'il est recommand\xe9 d'utiliser la cl\xe9 primaire comme attribut 1 dans vos relations, en particulier lorsque vous utilisez les fonctions ",(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," et ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()")," .")),(0,n.kt)("h4",l({},{id:"exemple-1-5"}),"Exemple 1"),(0,n.kt)("p",null,"La structure suivante sera utilis\xe9e pour les exemples de cette section :"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(36969).Z,width:"1000",height:"610"})),(0,n.kt)("p",null,"Sans param\xe8tre filtre :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),"employeeObject:=employeeSelected.toObject()\n")),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": { // relatedEntity extraite sous forme simple\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-2-4"}),"Exemple 2"),(0,n.kt)("p",null,"Extraction de la cl\xe9 primaire et du stamp :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("";dk with primary key+dk with stamp)\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "__KEY": 413,\n   "__STAMP": 1,\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": {\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-3-2"}),"Exemple 3"),(0,n.kt)("p",null,"Extraction compl\xe8te des attributs des ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("directReports.*")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "directReports": [\n        {\n            "ID": 418,\n            "firstName": "Lorena",\n            "lastName": "Boothe",\n            "salary": 44800,\n            "birthDate": "1970-10-02T00:00:00.000Z",\n            "woman": true,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 419,\n            "firstName": "Drew",\n            "lastName": "Caudill",\n            "salary": 41000,\n            "birthDate": "2030-01-12T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 420,\n            "firstName": "Nathan",\n            "lastName": "Gomes",\n            "salary": 46300,\n            "birthDate": "2010-05-29T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        }\n    ]\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-4-1"}),"Exemple 4"),(0,n.kt)("p",null,"Extraction de quelques attributs des ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("firstName, directReports.lastName")\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "directReports": [\n        {\n            "lastName": "Boothe"\n        },\n        {\n            "lastName": "Caudill"\n        },\n        {\n            "lastName": "Gomes"\n        }\n    ]\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-5-1"}),"Exemple 5"),(0,n.kt)("p",null,"Extraction d'une ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," sous forme simple :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' $coll:=New collection("firstName";"employer")\n employeeObject:=employeeSelected.toObject($coll)\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "employer": {\n        "__KEY": 20\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-6-1"}),"Exemple 6"),(0,n.kt)("p",null,"Extraction de tous les attributs d'une ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("employer.*")\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "ID": 20,\n        "name": "India Astral Secretary",\n        "creationDate": "1984-08-25T00:00:00.000Z",\n        "revenues": 12000000,\n        "extra": null\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"exemple-7-1"}),"Exemple 7"),(0,n.kt)("p",null,"Extraction de quelques attributs d'une ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' $col:=New collection\n $col.push("employer.name")\n $col.push("employer.revenues")\n employeeObject:=employeeSelected.toObject($col)\n')),(0,n.kt)("p",null,"Retourne :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "name": "India Astral Secretary",\n        "revenues": 12000000\n    }\n}\n')),(0,n.kt)("h2",l({},{id:"touched-"}),".touched( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touched()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si au moins un attribut de l'entit\xe9 a \xe9t\xe9 modifi\xe9 et non encore sauvegard\xe9, sinon Faux")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-20"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"touched()")," v\xe9rifie si un attribut de l'entit\xe9 a \xe9t\xe9 modifi\xe9 depuis que l'entit\xe9 a \xe9t\xe9 charg\xe9e en m\xe9moire ou sauvegard\xe9e."),(0,n.kt)("p",null,"Si un attribut a \xe9t\xe9 modifi\xe9 ou calcul\xe9, la fonction retourne Vrai, sinon elle retourne Faux. Vous pouvez utiliser cette fonction pour savoir s'il est n\xe9cessaire de sauvegarder l'entit\xe9."),(0,n.kt)("p",null,"Cette fonction retourne Faux pour une entit\xe9 qui vient d'\xeatre cr\xe9\xe9e (avec ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassClass#new"}),(0,n.kt)("inlineCode",{parentName:"a"},".new( )")),"). A noter cependant que si vous utilisez une fonction pour calculer un attribut de l'entit\xe9, la fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," retournera Vrai. Par exemple, si vous appelez ",(0,n.kt)("a",l({parentName:"p"},{href:"#getkey"}),(0,n.kt)("inlineCode",{parentName:"a"},".getKey()"))," pour calculer la cl\xe9 primaire, ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," retourne alors Vrai."),(0,n.kt)("h4",l({},{id:"exemple-16"}),"Exemple"),(0,n.kt)("p",null,"Cet exemple v\xe9rifie s'il est n\xe9cessaire de sauvegarder l'entit\xe9 :"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $emp : cs.EmployeeEntity\n $emp:=ds.Employee.get(672)\n $emp.firstName:=$emp.firstName //M\xeame r\xe9assign\xe9 avec sa propre valeur, l'attribut est consid\xe9r\xe9 \"touched\"\n\n If($emp.touched()) //si au moins l'un des attributs a \xe9t\xe9 modifi\xe9\n    $emp.save()\n End if // sinon, inutile de sauvegarder l'entit\xe9\n")),(0,n.kt)("h2",l({},{id:"touchedattributes-"}),".touchedAttributes( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touchedAttributes()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Noms des attributs touch\xe9s ou collection vide")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-21"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},".touchedAttributes()")," retourne les noms des attributs qui ont \xe9t\xe9 modifi\xe9s depuis que l'entit\xe9 a \xe9t\xe9 charg\xe9e en m\xe9moire."),(0,n.kt)("p",null,"Cette fonction est applicable aux attributs dont le ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/API/DataClassAttributeClass#kind"}),"kind")," est ",(0,n.kt)("inlineCode",{parentName:"p"},"storage")," ou ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),"."),(0,n.kt)("p",null,"Dans le cas d'un attribut relationnel ayant \xe9t\xe9 \"touch\xe9\" (i.e., la cl\xe9 \xe9trang\xe8re), le nom de l'entit\xe9 li\xe9e et celui de sa cl\xe9 primaire sont retourn\xe9s."),(0,n.kt)("p",null,"Si aucun attribut de l'entit\xe9 n'a \xe9t\xe9 touch\xe9, la fonction retourne une collection vide."),(0,n.kt)("h4",l({},{id:"exemple-1-6"}),"Exemple 1"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs.EmployeeEntity\n\n $touchedAttributes:=New collection\n $emp:=ds.Employee.get(725)\n $emp.firstName:=$emp.firstName //M\xeame modifi\xe9 avec la m\xeame valeur, l\'attribut est consid\xe9r\xe9 comme touch\xe9\n $emp.lastName:="Martin"\n $touchedAttributes:=$emp.touchedAttributes()\n  //$touchedAttributes: ["firstName","lastName"]\n')),(0,n.kt)("h4",l({},{id:"exemple-2-5"}),"Exemple 2"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs.EmployeeEntity\n var $company : cs.CompanyEntity\n\n $touchedAttributes:=New collection\n\n $emp:=ds.Employee.get(672)\n $emp.firstName:=$emp.firstName\n $emp.lastName:="Martin"\n\n $company:=ds.Company.get(121)\n $emp.employer:=$company\n\n $touchedAttributes:=$emp.touchedAttributes()\n\n  //collection $touchedAttributes: ["firstName","lastName","employer","employerID"]\n')),(0,n.kt)("p",null,"Dans ce cas :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"firstName et lastName ont un type ",(0,n.kt)("inlineCode",{parentName:"li"},"storage")),(0,n.kt)("li",{parentName:"ul"},"employer a un type ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")),(0,n.kt)("li",{parentName:"ul"},"employerID est la cl\xe9 \xe9trang\xe8re de l'entit\xe9 reli\xe9e employer")),(0,n.kt)("h2",l({},{id:"unlock"}),".unlock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Historique"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Version"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modifications"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Ajout"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".unlock()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objet statut")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"description-22"}),"Description"),(0,n.kt)("p",null,"La fonction ",(0,n.kt)("inlineCode",{parentName:"p"},"unlock()")," supprime le verrou pessimiste pos\xe9 sur l'enregistrement correspondant \xe0 l'entit\xe9 dans la table li\xe9e \xe0 sa dataclass."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour plus d'informations, veuillez consulter la section ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/fr/ORDA/entities#verrouillage-d-une-entite"}),"Verrouillage d'une entit\xe9"),".")),(0,n.kt)("p",null,"Un enregistrement est automatiquement d\xe9verrouill\xe9 lorsqu'il n'est plus r\xe9f\xe9renc\xe9 par aucune entit\xe9 dans le process qui l'a verrouill\xe9 (par exemple : si le verrou est pos\xe9 sur uniquement sur une r\xe9f\xe9rence locale d'une entit\xe9, l'entit\xe9 et donc l'enregistrement sont d\xe9verrouill\xe9s lorsque le process se termine)."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Lorsqu'un enregistrement est verrouill\xe9, il doit \xeatre d\xe9verrouill\xe9 depuis le process qui l'a verrouill\xe9 et via la r\xe9f\xe9rence d'entit\xe9 sur laquelle le verrou a \xe9t\xe9 pos\xe9. Par exemple :")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," $e1:=ds.Emp.all()[0]\n $e2:=ds.Emp.all()[0]\n $res:=$e1.lock() //$res.success=true\n $res:=$e2.unlock() //$res.success=false\n $res:=$e1.unlock() //$res.success=true\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"R\xe9sultat")),(0,n.kt)("p",null,"L'objet retourn\xe9 par ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," contient la propri\xe9t\xe9 suivante :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Vrai si l'action unlock a \xe9t\xe9 ex\xe9cut\xe9e avec succ\xe8s, Faux sinon. Si le d\xe9verrouillage est effectu\xe9 sur une entit\xe9 qui a \xe9t\xe9 supprim\xe9e, sur un enregistrement non verrouill\xe9 ou sur un enregistrement verrouill\xe9 par un autre process ou une autre entit\xe9, success vaut Faux.")))),(0,n.kt)("h4",l({},{id:"exemple-17"}),"Exemple"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n\n $employee:=ds.Employee.get(725)\n $status:=$employee.lock()\n ... //processing\n $status:=$employee.unlock()\n If($status.success)\n    ALERT("L\'entit\xe9 est d\xe9verrouill\xe9e")\n End if\n')))}d.isMDXComponent=!0},36969:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute4-96c4a541a87b02eee83316636b0ae059.png"}}]);