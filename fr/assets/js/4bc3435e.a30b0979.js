"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[94846],{60967:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>d,toc:()=>i});var n=s(474848),r=s(28453);const a={id:"on-server-shutdown-database-method",title:"On Server Shutdown database method",slug:"/commands/on-server-shutdown-database-method",displayed_sidebar:"docs"},o=void 0,d={id:"commands-legacy/on-server-shutdown-database-method",title:"On Server Shutdown database method",description:"On Server Shutdown database method",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R7/commands-legacy/on-server-shutdown-database-method.md",sourceDirName:"commands-legacy",slug:"/commands/on-server-shutdown-database-method",permalink:"/docs/fr/commands/on-server-shutdown-database-method",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fon-server-shutdown-database-method.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"on-server-shutdown-database-method",title:"On Server Shutdown database method",slug:"/commands/on-server-shutdown-database-method",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"On Server Open Connection database method",permalink:"/docs/fr/commands/on-server-open-connection-database-method"},next:{title:"On Server Startup database method",permalink:"/docs/fr/commands/on-server-startup-database-method"}},u={},i=[];function c(e){const t={a:"a",br:"br",em:"em",h4:"h4",li:"li",p:"p",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"})}),"\n\n\n\n\n\n\n\n",(0,n.jsx)(t.table,{children:(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Ne requiert pas de param\xe8tre"}),(0,n.jsx)(t.th,{})]})})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"Cette commande n'est pas thread-safe, elle ne peut pas \xeatre utilis\xe9e dans du code pr\xe9emptif."})}),"\n",(0,n.jsx)(t.h4,{id:""}),"\n",(0,n.jsxs)(t.p,{children:["La ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"})," est appel\xe9e une fois sur le poste serveur lorsque la base courante est referm\xe9e sur 4D Server. La ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"})," n'est appel\xe9e dans aucun environnement 4D autre que 4D Server."]}),"\n",(0,n.jsxs)(t.p,{children:["Pour refermer la base courante sur le serveur, vous pouvez s\xe9lectionner la commande de menu ",(0,n.jsx)(t.strong,{children:"Fermer la base..."})," sur le serveur. Vous pouvez \xe9galement choisir la commande ",(0,n.jsx)(t.strong,{children:"Quitter"})," ou appeler la commande ",(0,n.jsx)(t.a,{href:"/docs/fr/commands/quit-4d",children:"QUIT 4D"})," au sein d'une proc\xe9dure stock\xe9e ex\xe9cut\xe9e sur le serveur."]}),"\n",(0,n.jsx)(t.p,{children:"Lorsque le processus de fermeture de la base a \xe9t\xe9 engag\xe9, 4D effectue les actions suivantes :"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["S'il n'y a pas de ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"}),", 4D Server tue un \xe0 un chaque process en cours d'ex\xe9cution, sans distinction."]}),"\n",(0,n.jsxs)(t.li,{children:["S'il existe une ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"}),", 4D Server ex\xe9cute cette m\xe9thode dans un nouveau process local. Vous pouvez donc utiliser cette m\xe9thode base pour informer les autres process, via la communication interprocess, qu'ils doivent mettre fin \xe0 leur ex\xe9cution. Notez que dans tous les cas 4D Server quittera en fin de compte \u2014la ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"})," peut effectuer toutes les op\xe9rations de nettoyage et de fermeture que vous voulez, mais elle ne peut refuser de quitter, et finira par se terminer."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["La ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"})," est l'emplacement id\xe9al pour :"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Stopper les proc\xe9dures stock\xe9es lanc\xe9es automatiquement \xe0 l'ouverture de la base."}),"\n",(0,n.jsxs)(t.li,{children:["Sauvegarder (localement, sur disque) des pr\xe9f\xe9rences ou des param\xe9trages \xe0 r\xe9utiliser au d\xe9but de la session suivante dans la ",(0,n.jsx)(t.em,{children:"On Server Startup Database Method"}),"."]}),"\n",(0,n.jsx)(t.li,{children:"Effectuer toute autre action que vous souhaitez d\xe9clencher automatiquement \xe0 chaque fois que vous quittez la base."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Important"})," : Si vous utilisez la ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"})," pour refermer des proc\xe9dures stock\xe9es, tenez compte du fait que le serveur quitte d\xe8s la fin de l'ex\xe9cution de la ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"})," (et non des proc\xe9dures stock\xe9es). Si des proc\xe9dures stock\xe9es tournent encore \xe0 cet instant, elles sont purement et simplement tu\xe9es.",(0,n.jsx)(t.br,{}),"\nPar cons\xe9quent, si vous voulez \xeatre certain que les proc\xe9dures stock\xe9es se terminent avant que le serveur ne les tue, il faut que la ",(0,n.jsx)(t.strong,{children:"On Server Shutdown database method"})," leur signale qu'elles doivent mettre fin \xe0 leur ex\xe9cution (par le test d'une variable interprocess, par exemple) mais aussi qu'elle leur laisse le temps de se refermer (boucle de n secondes ou test d'une autre variable interprocess)."]}),"\n",(0,n.jsxs)(t.p,{children:["Si vous voulez que du code soit ex\xe9cut\xe9 automatiquement sur un poste client lorsqu'un 4D distant met un terme \xe0 sa connexion au serveur, utilisez la ",(0,n.jsx)(t.a,{href:"/docs/fr/commands/semaphore",children:"Semaphore"}),"."]})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>d});var n=s(296540);const r={},a=n.createContext(r);function o(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);