"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["35840"],{991939:function(e,n,t){t.r(n),t.d(n,{default:()=>u,frontMatter:()=>l,metadata:()=>s,assets:()=>o,toc:()=>c,contentTitle:()=>d});var s=JSON.parse('{"id":"API/HTTPAgentClass","title":"HTTPAgent","description":"La classe HTTPAgent vous permet de manipuler des objets HTTPAgent qui peuvent \xeatre utilis\xe9s pour g\xe9rer la persistance et la r\xe9utilisation des connexions aux serveurs en utilisant la classe HTTPRequest.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R6/API/HTTPAgentClass.md","sourceDirName":"API","slug":"/API/HTTPAgentClass","permalink":"/docs/fr/20-R6/API/HTTPAgentClass","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FHTTPAgentClass.md%20(20-R6)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R6","frontMatter":{"id":"HTTPAgentClass","title":"HTTPAgent"},"sidebar":"docs","previous":{"title":"Function","permalink":"/docs/fr/20-R6/API/FunctionClass"},"next":{"title":"HTTPRequest","permalink":"/docs/fr/20-R6/API/HTTPRequestClass"}}'),r=t("785893"),i=t("250065");let l={id:"HTTPAgentClass",title:"HTTPAgent"},d=void 0,o={},c=[{value:"Objet HTTPAgent",id:"objet-httpagent",level:3},{value:"4D.HTTPAgent.new()",id:"4dhttpagentnew",level:2},{value:"Description",id:"description",level:4},{value:"Param\xe8tre <code>options</code>",id:"param\xe8tre-options",level:4},{value:"Exemple",id:"exemple",level:4},{value:".options",id:"options",level:2},{value:"Description",id:"description-1",level:4},{value:".requestsCount",id:"requestscount",level:2},{value:"Description",id:"description-2",level:4},{value:".freeSocketsCount",id:"freesocketscount",level:2},{value:"Description",id:"description-3",level:4}];function a(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["La classe ",(0,r.jsx)(n.code,{children:"HTTPAgent"})," vous permet de manipuler des ",(0,r.jsxs)(n.a,{href:"#objet-httpagent",children:["objets ",(0,r.jsx)(n.code,{children:"HTTPAgent"})]})," qui peuvent \xeatre utilis\xe9s pour g\xe9rer la persistance et la r\xe9utilisation des connexions aux serveurs en utilisant la classe ",(0,r.jsx)(n.a,{href:"/docs/fr/20-R6/API/HTTPRequestClass",children:"HTTPRequest"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["La classe ",(0,r.jsx)(n.code,{children:"HTTPAgent"})," est disponible dans le class store ",(0,r.jsx)(n.code,{children:"4D"}),". Vous pouvez cr\xe9er un nouvel objet ",(0,r.jsx)(n.a,{href:"#httpagent-object",children:(0,r.jsx)(n.code,{children:"HTTPAgent"})})," en utilisant la fonction ",(0,r.jsx)(n.a,{href:"#4dhttpagentnew",children:"4D.HTTPAgent.new()"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Si aucun agent n'est associ\xe9 \xe0 une requ\xeate HTTP, un agent global avec des valeurs par d\xe9faut est utilis\xe9. L'agent par d\xe9faut est la forme la plus simple d'agent HTTP, adapt\xe9e aux cas d'utilisation de base. Il est recommand\xe9 d'utiliser des agents personnalis\xe9s pour mieux contr\xf4ler, au niveau de l'agent plut\xf4t que pour chaque requ\xeate HTTP, des aspects sp\xe9cifiques de la connexion tels que les param\xe8tres keep-alive, les d\xe9lais d'attente ou les configurations TLS/SSL."}),"\n",(0,r.jsxs)(n.details,{children:[(0,r.jsx)(n.summary,{children:"Historique"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Release"}),(0,r.jsx)(n.th,{children:"Modifications"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"20 R6"}),(0,r.jsx)(n.td,{children:"Classe ajout\xe9e"})]})})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"objet-httpagent",children:"Objet HTTPAgent"}),"\n",(0,r.jsx)(n.p,{children:"Un objet HTTPAgent est un objet partageable."}),"\n",(0,r.jsx)(n.p,{children:"Les objets HTTPAgent fournissent les propri\xe9t\xe9s et fonctions suivantes :"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsx)(n.tr,{children:(0,r.jsx)(n.th,{})})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsx)(n.tr,{children:(0,r.jsxs)(n.td,{children:[(0,r.jsxs)(n.a,{href:"#options",children:[(0,r.jsx)(n.strong,{children:"options"})," : Object"]}),(0,r.jsx)(n.br,{}),"les options actuellement utilis\xe9es par le HTTPAgent"]})}),(0,r.jsx)(n.tr,{children:(0,r.jsxs)(n.td,{children:[(0,r.jsxs)(n.a,{href:"#requestsCount",children:[(0,r.jsx)(n.strong,{children:"requestsCount"})," : Integer"]}),(0,r.jsx)(n.br,{}),"le nombre de requ\xeates actuellement trait\xe9es par le HTTPAgent"]})}),(0,r.jsx)(n.tr,{children:(0,r.jsxs)(n.td,{children:[(0,r.jsxs)(n.a,{href:"#freeSocketsCount",children:[(0,r.jsx)(n.strong,{children:"freeSocketsCount"})," : Integer"]}),(0,r.jsx)(n.br,{}),"le nombre de sockets libres du ",(0,r.jsx)(n.code,{children:"maxSockets"})," associ\xe9 au HTTPAgent"]})})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Comme HTTPAgent est un objet partageable, vous pouvez en ajouter un \xe0 une classe singleton afin d'utiliser le m\xeame agent pour toutes les requ\xeates adress\xe9es au m\xeame serveur."})}),"\n",(0,r.jsx)(n.h2,{id:"4dhttpagentnew",children:"4D.HTTPAgent.new()"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"4D.HTTPAgent.new"}),"( { ",(0,r.jsx)(n.em,{children:"options"})," : Object } ) : 4D.HTTPAgent"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Param\xe8tres"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"}}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"options"}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"->"}),(0,r.jsx)(n.td,{children:"options par d\xe9faut pour le HTTPAgent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"R\xe9sultat"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#objet-httpagent",children:"4D.HTTPAgent"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"<-"}),(0,r.jsx)(n.td,{children:"Nouvel objet HTTPAgent"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["La fonction ",(0,r.jsx)(n.code,{children:"4D.HTTPAgent.new()"})," cr\xe9e un objet HTTPAgent partageable avec les ",(0,r.jsx)(n.em,{children:"options"})," d\xe9finies, et renvoie un objet ",(0,r.jsx)(n.code,{children:"4D.HTTPAgent"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["L'objet ",(0,r.jsx)(n.a,{href:"#objet-httpagent",children:(0,r.jsx)(n.code,{children:"HTTPAgent"})})," renvoy\xe9 est utilis\xe9 pour personnaliser les connexions aux serveurs HTTP."]}),"\n",(0,r.jsxs)(n.h4,{id:"param\xe8tre-options",children:["Param\xe8tre ",(0,r.jsx)(n.code,{children:"options"})]}),"\n",(0,r.jsxs)(n.p,{children:["Dans le param\xe8tre ",(0,r.jsx)(n.em,{children:"options"}),", passez un objet qui peut contenir les propri\xe9t\xe9s suivantes (toutes les propri\xe9t\xe9s sont facultatives) :"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Les options HTTPAgent seront fusionn\xe9es avec les ",(0,r.jsx)(n.a,{href:"/docs/fr/20-R6/API/HTTPRequestClass#4dhttprequestnew",children:"options HTTPRequest"})," (les options HTTPRequest sont prioritaires) ; si aucun agent sp\xe9cifique n'est d\xe9fini, un agent global est utilis\xe9."]})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Propri\xe9t\xe9"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Par d\xe9faut"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"keepAlive"}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsx)(n.td,{children:"true"}),(0,r.jsx)(n.td,{children:"Active le keep-alive de l'agent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"maxSockets"}),(0,r.jsx)(n.td,{children:"Integer"}),(0,r.jsx)(n.td,{children:"65535"}),(0,r.jsx)(n.td,{children:"Nombre maximum de sockets par serveur"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"maxTotalSockets"}),(0,r.jsx)(n.td,{children:"Integer"}),(0,r.jsx)(n.td,{children:"65535"}),(0,r.jsx)(n.td,{children:"Nombre maximum de sockets pour l'agent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"timeout"}),(0,r.jsx)(n.td,{children:"Real"}),(0,r.jsx)(n.td,{children:"undefined"}),(0,r.jsx)(n.td,{children:"Si d\xe9fini, d\xe9lai apr\xe8s lequel une socket inutilis\xe9e est ferm\xe9e"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"certificatesFolder"}),(0,r.jsx)(n.td,{children:"Folder"}),(0,r.jsxs)(n.td,{children:["undefined (voir valeur par d\xe9faut dans ",(0,r.jsx)(n.a,{href:"/docs/fr/20-R6/API/HTTPRequestClass#options-parameter",children:"HTTPRequest.new()"}),")"]}),(0,r.jsx)(n.td,{children:"D\xe9finit le dossier actif des certificats du client pour les requ\xeates utilisant l'agent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"minTLSVersion"}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsxs)(n.td,{children:["undefined (voir valeur par d\xe9faut dans ",(0,r.jsx)(n.a,{href:"/docs/fr/20-R6/API/HTTPRequestClass#options-parameter",children:"HTTPRequest.new()"}),")"]}),(0,r.jsx)(n.td,{children:"D\xe9finit la version minimale de TLS pour les requ\xeates utilisant cet agent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"protocol"}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsxs)(n.td,{children:["undefined (voir valeur par d\xe9faut dans ",(0,r.jsx)(n.a,{href:"/docs/fr/20-R6/API/HTTPRequestClass#options-parameter",children:"HTTPRequest.new()"}),")"]}),(0,r.jsx)(n.td,{children:"Protocole mis en oeuvre pour les requ\xeates utilisant l'agent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"validateTLSCertificate"}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsxs)(n.td,{children:["undefined (voir valeur par d\xe9faut dans ",(0,r.jsx)(n.a,{href:"/docs/fr/20-R6/API/HTTPRequestClass#options-parameter",children:"HTTPRequest.new()"}),")"]}),(0,r.jsx)(n.td,{children:"validateTLSCertificate pour les requ\xeates utilisant l'agent"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Vous pouvez effectuer des requ\xeates vers plusieurs serveurs en utilisant le m\xeame agent. Dans ce cas, chaque serveur aura son propre pool de connexions utilisant les m\xeames options d'agent."})}),"\n",(0,r.jsx)(n.h4,{id:"exemple",children:"Exemple"}),"\n",(0,r.jsx)(n.p,{children:"Cr\xe9ation du HTTPAgent :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:"var $options:={}\n$options.maxSockets:=5 //5 est le nombre maximum de sockets par serveur\n$options.maxTotalSockets:=10 //10 est le nombre maximum de sockets pour l'agent\n$options.validateTLSCertificate:=True //Valider le certificat du serveur\n\nvar $myAgent:=4D.HTTPAgent.new($options)\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"Envoi d'une requ\xeate de v\xe9rification de l'heure locale de n'importe quelle ville :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:'var $options:={}\n$options.method:= "GET"\n$options.agent:=$myAgent\nvar $myRequest:=4D.HTTPRequest.new("http://worldtimeapi.org/api/timezone/Europe/Paris" ; $options) \n\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Si aucun agent n'est associ\xe9 \xe0 une requ\xeate HTTP, un agent global avec des valeurs par d\xe9faut est utilis\xe9."})}),"\n",(0,r.jsx)(n.h2,{id:"options",children:".options"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"options"})," : Object"]}),"\n",(0,r.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["L'objet propri\xe9t\xe9 ",(0,r.jsx)(n.code,{children:".options"})," contient les options actuellement utilis\xe9es par le HTTPAgent."]}),"\n",(0,r.jsx)(n.h2,{id:"requestscount",children:".requestsCount"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"requestsCount"})," : Integer"]}),"\n",(0,r.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(n.code,{children:".requestsCount"})," contient le nombre de requ\xeates actuellement trait\xe9es par le HTTPAgent."]}),"\n",(0,r.jsx)(n.h2,{id:"freesocketscount",children:".freeSocketsCount"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"freeSocketsCount"})," : Integer"]}),"\n",(0,r.jsx)(n.h4,{id:"description-3",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["La propri\xe9t\xe9 ",(0,r.jsx)(n.code,{children:".freeSocketsCount"})," contient le nombre de sockets libres du ",(0,r.jsx)(n.code,{children:"maxSockets"})," associ\xe9 au HTTPAgent."]})]})}function u(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return d},a:function(){return l}});var s=t(667294);let r={},i=s.createContext(r);function l(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);