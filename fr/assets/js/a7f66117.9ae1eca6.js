"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["77409"],{87539:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>d,toc:()=>c,default:()=>h,metadata:()=>t,assets:()=>l,contentTitle:()=>a});var t=JSON.parse('{"id":"commands-legacy/on-web-connection-database-method","title":"On Web Connection database method","description":"On Web Connection($url Text ; $ipBrowser Text ; $user Text)","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R10/commands-legacy/on-web-connection-database-method.md","sourceDirName":"commands-legacy","slug":"/commands/on-web-connection-database-method","permalink":"/docs/fr/commands/on-web-connection-database-method","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fon-web-connection-database-method.md%20(20-R10)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R10","frontMatter":{"id":"on-web-connection-database-method","title":"On Web Connection database method","slug":"/commands/on-web-connection-database-method","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"On Web Authentication database method","permalink":"/docs/fr/commands/on-web-authentication-database-method"},"next":{"title":"On Web Legacy Close Session database method","permalink":"/docs/fr/commands/on-web-legacy-close-session-database-method"}}'),r=s(785893),i=s(250065);let d={id:"on-web-connection-database-method",title:"On Web Connection database method",slug:"/commands/on-web-connection-database-method",displayed_sidebar:"docs"},a=void 0,l={},c=[{value:"Appels de la M\xe9thode base Sur connexion Web",id:"appels-de-la-m\xe9thode-base-sur-connexion-web",level:2}];function o(e){let n={a:"a",action:"action",br:"br",chemin:"chemin",code:"code",em:"em",fichier:"fichier",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"On Web Connection($url : Text ; $http : Text ; $ipBrowser : Text ; $ipServer : Text ; $user : Text ; $pw : Text)"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Param\xe8tre"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$url"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$http"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"En-t\xeate + corps HTTP"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$ipBrowser"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"Adresse IP du navigateur"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$ipServer"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"Adresse IP appel\xe9e du serveur"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$user"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"Nom d\u2019utilisateur"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$pw"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"Mot de passe"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:""}),"\n",(0,r.jsxs)(n.p,{children:["La ",(0,r.jsx)(n.strong,{children:"On Web Connection database method"})," peut \xeatre appel\xe9e dans les cas suivants :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["le serveur Web re\xe7oit une requ\xeate d\xe9butant par l'URL ",(0,r.jsx)(n.em,{children:"4DCGI"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"le serveur Web re\xe7oit une requ\xeate invalide."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Pour plus d'informations, reportez-vous ci-dessous au paragraphe \u201CAppels de la M\xe9thode base Sur connexion Web\u201D."}),"\n",(0,r.jsxs)(n.p,{children:['Le serveur Web doit avoir d\xe9marr\xe9 et la requ\xeate doit avoir \xe9t\xe9 "accept\xe9e" par la ',(0,r.jsx)(n.a,{href:"/docs/fr/commands/on-web-authentication-database-method",children:"On Web Authentication database method"})," (si elle existe)."]}),"\n",(0,r.jsxs)(n.p,{children:["La ",(0,r.jsx)(n.strong,{children:"On Web Connection database method"})," re\xe7oit six param\xe8tres de type Texte, pass\xe9s par 4D ($url, $http, $ipBrowser, $ipServer, $user et $pw). Voici leur description :"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Param\xe8tres"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Type"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$url"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$http"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"En-t\xeate + corps HTTP (32 ko maximum)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$ipBrowser"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"Adresse IP du navigateur"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$ipServer"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"Adresse IP appel\xe9e du serveur"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$user"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"Nom d\u2019utilisateur"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"$pw"}),(0,r.jsx)(n.td,{children:"Texte"}),(0,r.jsx)(n.td,{children:"Mot de passe"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Vous devez d\xe9clarer ces six param\xe8tres de la mani\xe8re suivante :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:"\xa0\xa0// M\xe9thode base Sur connexion Web\n\xa0\n#DECLARE($url : Text ; $http : Text ; $ipBrowser : Text ; $ipServer : Text ;\\ $user : Text ; $pw : Text) -> $result : Boolean\n\xa0\n\xa0\xa0// Code pour la m\xe9thode\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Donn\xe9es suppl\xe9mentaires de l\u2019URL"}),(0,r.jsx)(n.br,{}),"\nLe premier param\xe8tre (",(0,r.jsx)(n.em,{children:"$url"}),") est l\u2019URL saisi par l'utilisateur dans la zone 'Adresse' de son navigateur Web, moins l\u2019adresse h\xf4te.",(0,r.jsx)(n.br,{}),"\nPrenons l\u2019exemple d\u2019une connexion Intranet. Supposons que l\u2019adresse IP de votre machine serveur Web 4D est ",(0,r.jsx)(n.em,{children:"123.45.67.89"}),". Le tableau suivant liste les valeurs de ",(0,r.jsx)(n.em,{children:"$url"})," selon l\u2019URLsaisi dans le navigateur Web :"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"URL saisi dans le navigateur"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Valeur du param\xe8tre $url"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"123.45.67.89"}),(0,r.jsx)(n.td,{children:"/"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"http://123.45.67.89",children:"http://123.45.67.89"})}),(0,r.jsx)(n.td,{children:"/"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"123.45.67.89/Clients"}),(0,r.jsx)(n.td,{children:"/Clients"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"http://123.45.67.89/Clients",children:"http://123.45.67.89/Clients"})}),(0,r.jsx)(n.td,{children:"/Clients"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"http://123.45.67.89/Clients/Ajouter",children:"http://123.45.67.89/Clients/Ajouter"})}),(0,r.jsx)(n.td,{children:"/Clients/Ajouter"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"123.45.67.89/Faire_ceci/Si_OK/Faire_cela"}),(0,r.jsx)(n.td,{children:"/Faire_ceci/Si_OK/Faire_cela"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Notez que vous \xeates libre d'utiliser ce param\xe8tre \xe0 votre convenance. 4D ignore simplement les valeurs pass\xe9es au-del\xe0 de la partie h\xf4te de l\u2019URL. Par exemple, vous pouvez \xe9tablir une convention dans laquelle la valeur ",(0,r.jsx)(n.em,{children:'"/Clients/Ajouter"'})," signifie \u201Caller directement \xe0 l'ajout d'un nouvel enregistrement dans la table ",(0,r.jsx)(n.em,{children:"[Clients]"}),".\u201D En fournissant aux utilisateurs Web de votre base une liste des valeurs possibles et/ou des marqueurs par d\xe9faut, vous pouvez proposer des raccourcis vers diff\xe9rentes parties de votre application. Ainsi, les utilisateurs Web peuvent acc\xe9der rapidement aux ressources de votre site Web sans devoir naviguer dans toute la base \xe0 chaque connexion."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ATTENTION :"})," Pour emp\xeacher un utilisateur d'acc\xe9der directement \xe0 une base \xe0 l'aide d'un marqueur cr\xe9\xe9 pendant une session pr\xe9c\xe9dente, 4D intercepte tout URL correspondant \xe0 un des URLs standard de 4D."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"En-t\xeate et corps de la requ\xeate HTTP"}),(0,r.jsx)(n.br,{}),"\nLe deuxi\xe8me param\xe8tre (",(0,r.jsx)(n.em,{children:"$http"}),") est l'en-t\xeate suivi du corps de la requ\xeate ",(0,r.jsx)(n.em,{children:"HTTP"})," envoy\xe9e par le navigateur Web. Notez que ces informations sont pass\xe9es telles quelles \xe0 votre ",(0,r.jsx)(n.strong,{children:"On Web Connection database method"}),". Le contenu varie en fonction du type de navigateur Web qui tente de se connecter.",(0,r.jsx)(n.br,{}),"\nAvec Safari sous Mac OS, vous recevrez un en-t\xeate semblable \xe0 celui-ci :"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-RAW",children:"GET /favicon.ico HTTP/1.1Referer: http://123.45.67.89/4dcgi/testUser-Agent: Mozilla/5.0 (Macintosh; U; Intel macOS; fr-fr) AppleWebKit/523.10.3 (KHTML, like Gecko) Version/3.0.4 Safari/523.10Cache-Control: max-age=0Accept: */*Accept-Language: fr-frAccept-Encoding: gzip, deflateConnection: keep-aliveHost: 123.45.67.89  \n"})}),"\n",(0,r.jsx)(n.p,{children:"Avec Microsoft Edge sous Windows, vous recevrez un en-t\xeate semblable \xe0 celui-ci :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-RAW",children:"GET /test HTTP/1.1Accept: text/html, application/xhtml+xml, image/jxr, */*Accept-Encoding: gzip, deflateAccept-Language: fr-FRConnection: Keep-AliveHost: 123.45.67.89User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586  \n"})}),"\n",(0,r.jsx)(n.p,{children:"Si votre application exploite ces informations, il est de votre ressort d'analyser l'en-t\xeate et le corps."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note :"})," Pour des raisons de performances, la taille de ces donn\xe9es ne peut d\xe9passer 32 Ko. Au-del\xe0, elles sont tronqu\xe9es par le serveur HTTP de 4D."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Adresse IP du navigateur"}),(0,r.jsx)(n.br,{}),"\nLe troisi\xe8me param\xe8tre (",(0,r.jsx)(n.em,{children:"$ipBrowser"}),") re\xe7oit l\u2019adresse IP de la machine du navigateur. Cette information peut vous permettre, en particulier, de distinguer les connexions Intranet des connexions Internet.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Note :"})," 4D retourne les adresses IPv4 dans un format hybride IPv6 comprenant un pr\xe9fixe de 96 bits, par exemple ::ffff:192.168.2.34 pour l'adresse IPv4 192.168.2.34. Pour plus d'informations, reportez-vous \xe0 la section ",(0,r.jsx)(n.em,{children:"Prise en charge d\u2019IP v6"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Adresse IP demand\xe9e du serveur"}),(0,r.jsx)(n.br,{}),"\nLe quatri\xe8me param\xe8tre (",(0,r.jsx)(n.em,{children:"$ipServer"}),") re\xe7oit l\u2019adresse IP demand\xe9e du serveur Web 4D. En effet, 4D autorise le multi-homing, permettant d\u2019exploiter des machines disposant de plusieurs adresses IP. Pour plus d\u2019informations sur ce point, reportez-vous \xe0 la section ",(0,r.jsx)(n.em,{children:"Param\xe9trages du serveur Web"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nom d'utilisateur et Mot de passe"}),(0,r.jsx)(n.br,{}),"\nLes param\xe8tres ",(0,r.jsx)(n.em,{children:"$user"})," et ",(0,r.jsx)(n.em,{children:"$pw"})," re\xe7oivent le nom d\u2019utilisateur et le mot de passe saisis par l\u2019utilisateur dans la bo\xeete de dialogue standard d\u2019identification affich\xe9e par le navigateur, le cas \xe9ch\xe9ant.",(0,r.jsx)(n.br,{}),"\nCette bo\xeete de dialogue appara\xeet pour chaque connexion d\xe8s que l\u2019option ",(0,r.jsx)(n.strong,{children:"Utiliser les mots de passe"})," est coch\xe9e dans les Propri\xe9t\xe9s de la base (cf. section ",(0,r.jsx)(n.em,{children:"S\xe9curit\xe9 des connexions"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note :"})," Si le nom d\u2019utilisateur envoy\xe9 par le navigateur existe dans 4D, pour des raisons de confidentialit\xe9 le param\xe8tre ",(0,r.jsx)(n.em,{children:"$pw"})," n\u2019est alors pas rempli (il re\xe7oit une cha\xeene vide)."]}),"\n",(0,r.jsx)(n.h2,{id:"appels-de-la-m\xe9thode-base-sur-connexion-web",children:"Appels de la M\xe9thode base Sur connexion Web"}),"\n",(0,r.jsxs)(n.p,{children:["La ",(0,r.jsx)(n.strong,{children:"On Web Connection database method"})," peut \xeatre utilis\xe9e comme point d'entr\xe9e dans le serveur Web 4D, soit \xe0 l'aide de l'URL sp\xe9cial ",(0,r.jsx)(n.em,{children:"4DCGI"}),", soit \xe0 l'aide d'URLs de commande personnalis\xe9s."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attention :"})," L\u2019appel d\u2019une commande 4D affichant un \xe9l\xe9ment d\u2019interface (",(0,r.jsx)(n.a,{href:"/docs/fr/commands/dialog",children:"DIALOG"}),", ",(0,r.jsx)(n.a,{href:"/docs/fr/commands/alert",children:"ALERT"}),"...) entra\xeene l\u2019arr\xeat du traitement de la m\xe9thode."]}),"\n",(0,r.jsxs)(n.p,{children:["La ",(0,r.jsx)(n.strong,{children:"On Web Connection database method"})," est donc appel\xe9e dans les cas suivants :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["lorsque 4D re\xe7oit l\u2019URL ",(0,r.jsx)(n.em,{children:"/4DCGI"}),". La m\xe9thode base est appel\xe9e avec l\u2019URL ",(0,r.jsxs)(n.em,{children:["/4DCGI/",(0,r.jsx)(n.action,{})]})," dans ",(0,r.jsx)(n.em,{children:"$url"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["lorsqu\u2019une page Web appel\xe9e avec un URL du type ",(0,r.jsx)(n.em,{children:(0,r.jsxs)(n.chemin,{children:["/",(0,r.jsx)(n.fichier,{})]})})," n\u2019est pas trouv\xe9e. La m\xe9thode base est appel\xe9e avec l\u2019URL."]}),"\n",(0,r.jsxs)(n.li,{children:["lorsqu\u2019une page Web est appel\xe9e avec un URL du type ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.chemin,{children:"/"})})," et qu\u2019aucune page d\u2019accueil par d\xe9faut n\u2019est d\xe9finie. La m\xe9thode base est appel\xe9e avec l\u2019URL."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},250065:function(e,n,s){s.d(n,{Z:()=>a,a:()=>d});var t=s(667294);let r={},i=t.createContext(r);function d(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);