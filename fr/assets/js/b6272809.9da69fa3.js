"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["64230"],{282299:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>r,toc:()=>c,default:()=>u,metadata:()=>o,assets:()=>a,contentTitle:()=>i});var o=JSON.parse('{"id":"aikit/asynchronous-call","title":"Appel asynchrone","description":"Si vous ne souhaitez pas attendre la r\xe9ponse de l\'OpenAPI lorsque vous envoyez une requ\xeate \xe0 son API, vous devez utiliser un code asynchrone.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/version-20-R10/aikit/asynchronous-call.md","sourceDirName":"aikit","slug":"/aikit/asynchronous-call","permalink":"/docs/fr/20-R10/aikit/asynchronous-call","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20aikit%2Fasynchronous-call.md%20(20-R10)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R10","frontMatter":{"id":"asynchronous-call","title":"Appel asynchrone"},"sidebar":"docs","previous":{"title":"4D-AIKit","permalink":"/docs/fr/20-R10/aikit/overview"},"next":{"title":"Fournisseurs (Providers)","permalink":"/docs/fr/20-R10/aikit/compatible-openai"}}'),t=n(785893),l=n(250065);let r={id:"asynchronous-call",title:"Appel asynchrone"},i="Appel asynchrone",a={},c=[{value:"Exemples d\u2019utilisation",id:"exemples-dutilisation",level:2},{value:"Liste de mod\xe8les",id:"liste-de-mod\xe8les",level:3},{value:"Compl\xe9tions de chat",id:"compl\xe9tions-de-chat",level:3}];function d(e){let s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"appel-asynchrone",children:"Appel asynchrone"})}),"\n",(0,t.jsx)(s.p,{children:"Si vous ne souhaitez pas attendre la r\xe9ponse de l'OpenAPI lorsque vous envoyez une requ\xeate \xe0 son API, vous devez utiliser un code asynchrone."}),"\n",(0,t.jsxs)(s.p,{children:["Vous devez fournir une ",(0,t.jsx)(s.code,{children:"4D.Formula"})," pour recevoir le r\xe9sultat. Voir ",(0,t.jsx)(s.a,{href:"/docs/fr/20-R10/aikit/Classes/openaiparameters",children:"OpenAIParameters"})," pour une liste de ces param\xe8tres."]}),"\n",(0,t.jsxs)(s.p,{children:["La m\xe9thode asynchrone est bas\xe9e sur ",(0,t.jsx)(s.a,{href:"https://developer.4d.com/docs/API/HTTPRequestClass",children:"4D.HTTPRequest"}),", ainsi la r\xe9ponse sera re\xe7ue dans le process courant."]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u26A0\uFE0F Si votre process se termine \xe0 la fin de la m\xe9thode courante (par exemple, si vous utilisez New process ou l'\xe9diteur de m\xe9thode), la formule de callback peut ne pas \xeatre appel\xe9e de mani\xe8re asynchrone. Dans ce cas, il est n\xe9cessaire d'utiliser ",(0,t.jsx)(s.code,{children:"CALL WORKER"})," ou ",(0,t.jsx)(s.code,{children:"CALL FORM"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"exemples-dutilisation",children:"Exemples d\u2019utilisation"}),"\n",(0,t.jsx)(s.h3,{id:"liste-de-mod\xe8les",children:"Liste de mod\xe8les"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:"$client.models.list({formula: Formula(MyReceiveMethod($1))})\n"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"$1"})," sera une instance de ",(0,t.jsx)(s.a,{href:"/docs/fr/20-R10/aikit/Classes/openaimodellistresult",children:"OpenAIModelListResult"}),", donc la m\xe9thode ",(0,t.jsx)(s.code,{children:"MyReceiveMethod"})," pourrait \xeatre :"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:'#DECLARE($result: cs.AIKit.OpenAIModelListResult)\n\nIf($result.success)\n\n   Form.models:=$result.models\n\nElse\n\n  Alert($result.errors.formula(Formula(JSON Stringify($1))).join("\\n"))\n\nEnd if\n'})}),"\n",(0,t.jsx)(s.h3,{id:"compl\xe9tions-de-chat",children:"Compl\xe9tions de chat"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:'var $messages:=[{role: "system"; content: "You are a helpful assistant."}]\n$messages.push({role: "user"; content: "Could you explain me why 42 is a special number"})\n\n$client.chat.completions.create($messages; { onResponse: Formula(MyChatCompletionsReceiveMethod($1))})\n'})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"$1"})," sera une instance de ",(0,t.jsx)(s.a,{href:"/docs/fr/20-R10/aikit/Classes/openaichatcompletionsresult",children:"OpenAIChatCompletionsResult"}),", donc la m\xe9thode ",(0,t.jsx)(s.code,{children:"MyChatCompletionsReceiveMethod"})," pourrait \xeatre :"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:"#DECLARE($result: cs.AIKit.OpenAIChatCompletionsResult)\n\nASSERT($result.success) // Nous utilisons ici onResponse, le callback n'est re\xe7u qu'en cas de succ\xe8s.\nForm.assistantMessage:=$result.choices[0].text\n"})})]})}function u(e={}){let{wrapper:s}={...(0,l.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},250065:function(e,s,n){n.d(s,{Z:()=>i,a:()=>r});var o=n(667294);let t={},l=o.createContext(t);function r(e){let s=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(l.Provider,{value:s},e.children)}}}]);