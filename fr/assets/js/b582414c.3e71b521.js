"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[88961],{603905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>k});var r=n(667294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),u=p(n),k=a,c=u["".concat(s,".").concat(k)]||u[k]||d[k]||l;return n?r.createElement(c,o(o({ref:t},m),{},{components:n})):r.createElement(c,o({ref:t},m))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var p=2;p<l;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},376491:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>m});n(667294);var r=n(603905);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const o={id:"SystemWorkerClass",title:"SystemWorker"},i=void 0,s={unversionedId:"API/SystemWorkerClass",id:"version-20/API/SystemWorkerClass",title:"SystemWorker",description:"Les System workers permettent au code 4D d'appeler n'importe quel process externe (une commande shell, PHP, etc.) sur la m\xeame machine. Les System workers sont appel\xe9s de mani\xe8re asynchrone. En utilisant des callbacks, 4D permet de communiquer dans les deux sens.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-20/API/SystemWorkerClass.md",sourceDirName:"API",slug:"/API/SystemWorkerClass",permalink:"/docs/fr/20/API/SystemWorkerClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FSystemWorkerClass.md%20(20)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20",frontMatter:{id:"SystemWorkerClass",title:"SystemWorker"},sidebar:"docs",previous:{title:"SMTPTransporter",permalink:"/docs/fr/20/API/SMTPTransporterClass"},next:{title:"WebServer",permalink:"/docs/fr/20/API/WebServerClass"}},p={},m=[{value:"Exemple",id:"exemple",level:3},{value:"Sommaire",id:"sommaire",level:3},{value:"4D.SystemWorker.new()",id:"4dsystemworkernew",level:2},{value:"Description",id:"description",level:4},{value:"Objet <em>options</em>",id:"objet-options",level:4},{value:"Valeur retourn\xe9e",id:"valeur-retourn\xe9e",level:4},{value:"Exemples sous Windows",id:"exemples-sous-windows",level:4},{value:"Exemples sous macOS",id:"exemples-sous-macos",level:4},{value:".closeInput()",id:"closeinput",level:2},{value:"Description",id:"description-1",level:4},{value:"Exemple",id:"exemple-1",level:4},{value:".commandLine",id:"commandline",level:2},{value:"Description",id:"description-2",level:4},{value:".currentDirectory",id:"currentdirectory",level:2},{value:"Description",id:"description-3",level:4},{value:".dataType",id:"datatype",level:2},{value:"Description",id:"description-4",level:4},{value:".encoding",id:"encoding",level:2},{value:"Description",id:"description-5",level:4},{value:".errors",id:"errors",level:2},{value:"Description",id:"description-6",level:4},{value:".exitCode",id:"exitcode",level:2},{value:"Description",id:"description-7",level:4},{value:".hideWindow",id:"hidewindow",level:2},{value:"Description",id:"description-8",level:4},{value:".pid",id:"pid",level:2},{value:"Description",id:"description-9",level:4},{value:".postMessage()",id:"postmessage",level:2},{value:"Description",id:"description-10",level:4},{value:".response",id:"response",level:2},{value:"Description",id:"description-11",level:4},{value:".responseError",id:"responseerror",level:2},{value:"Description",id:"description-12",level:4},{value:".terminate()",id:"terminate",level:2},{value:"Description",id:"description-13",level:4},{value:".terminated",id:"terminated",level:2},{value:"Description",id:"description-14",level:4},{value:".timeout",id:"timeout",level:2},{value:"Description",id:"description-15",level:4},{value:".wait()",id:"wait",level:2},{value:"Description",id:"description-16",level:4}],d={toc:m};function u(e){var{components:t}=e,n=l(e,["components"]);return(0,r.kt)("wrapper",a({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Les System workers permettent au code 4D d'appeler n'importe quel process externe (une commande shell, PHP, etc.) sur la m\xeame machine. Les System workers sont appel\xe9s de mani\xe8re asynchrone. En utilisant des callbacks, 4D permet de communiquer dans les deux sens."),(0,r.kt)("p",null,"La classe ",(0,r.kt)("inlineCode",{parentName:"p"},"SystemWorker")," est disponible dans le class store ",(0,r.kt)("inlineCode",{parentName:"p"},"4D")," ."),(0,r.kt)("h3",a({},{id:"exemple"}),"Exemple"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'    // Exemple Windows pour avoir acc\xe8s aux informations d\'ipconfig\nvar $myWinWorker : 4D.SystemWorker\nvar $ipConfig : Text\n$myWinWorker:= 4D.SystemWorker.new("ipconfig")\n$ipConfig:=$myWinWorker.wait(1).response //timeout 1 seconde\n\n    // Exemple macOS pour modifier les permissions d\'un fichier sous macOS\n    // chmod est la commande macOS utilis\xe9e pour modifier l\'acc\xe8s aux fichiers\nvar $myMacWorker : 4D.SystemWorker\n$myMacWorker:= 4D.SystemWorker.new("chmod x /folder/myfile.sh")\n\n')),(0,r.kt)("h3",a({},{id:"sommaire"}),"Sommaire"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null})))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#4d-systemworker-new"}),(0,r.kt)("strong",{parentName:"a"},"4D.SystemWorker.new")," ( ",(0,r.kt)("em",{parentName:"a"},"commandLine")," : Text { ; options : Object } ) : 4D.SystemWorker"),"\xa0","\xa0","\xa0","\xa0","cr\xe9e et renvoie un objet ",(0,r.kt)("inlineCode",{parentName:"td"},"4D.SystemWorker")," qui ex\xe9cutera la ",(0,r.kt)("em",{parentName:"td"},"commandLine")," que vous avez pass\xe9e en param\xe8tre pour lancer un process externe")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#closeinput"}),(0,r.kt)("strong",{parentName:"a"},".closeInput"),"()"),"\xa0","\xa0","\xa0","\xa0","ferme le flux d'entr\xe9e (",(0,r.kt)("em",{parentName:"td"},"stdin"),") du process externe")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#commandline"}),(0,r.kt)("strong",{parentName:"a"},".commandLine")," : Text"),"\xa0","\xa0","\xa0","\xa0","contient la ligne de commande pass\xe9e en param\xe8tre \xe0 la fonction ",(0,r.kt)("a",a({parentName:"td"},{href:"#4d-systemworker-new"}),(0,r.kt)("inlineCode",{parentName:"a"},"new()")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#currentdirectory"}),(0,r.kt)("strong",{parentName:"a"},".currentDirectory")," : 4D.Folder"),"\xa0","\xa0","\xa0","\xa0","contient le r\xe9pertoire de travail dans lequel le process externe est ex\xe9cut\xe9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#dataype"}),(0,r.kt)("strong",{parentName:"a"},".dataType")," : Text"),"\xa0","\xa0","\xa0","\xa0","contient le type du contenu du corps de la r\xe9ponse")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#encoding"}),(0,r.kt)("strong",{parentName:"a"},".encoding")," : Text"),"\xa0","\xa0","\xa0","\xa0","contient l'encodage du contenu du corps de la r\xe9ponse")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#errors"}),(0,r.kt)("strong",{parentName:"a"},".errors")," : Collection"),"\xa0","\xa0","\xa0","\xa0","contient une collection d'erreurs 4D en cas d'erreur(s) d'ex\xe9cution, le cas \xe9ch\xe9ant")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#exitcode"}),(0,r.kt)("strong",{parentName:"a"},".exitCode")," : Integer"),"\xa0","\xa0","\xa0","\xa0","contient le code de sortie renvoy\xe9 par le process externe")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#hideWindow"}),(0,r.kt)("strong",{parentName:"a"},".hideWindow")," : Boolean"),"\xa0","\xa0","\xa0","\xa0","peut \xeatre utilis\xe9 pour cacher la fen\xeatre de la console DOS ou la fen\xeatre de l'ex\xe9cutable lanc\xe9 (",(0,r.kt)("strong",{parentName:"td"},"Windows seulement"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#pid"}),(0,r.kt)("strong",{parentName:"a"},".pid")," : Integer"),"\xa0","\xa0","\xa0","\xa0","contient l'identifiant unique du process externe au niveau du syst\xe8me")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#postmessage"}),(0,r.kt)("strong",{parentName:"a"},".postMessage"),"( ",(0,r.kt)("em",{parentName:"a"},"message")," : Text)",(0,r.kt)("br",null),(0,r.kt)("strong",{parentName:"a"},".postMessage"),"( ",(0,r.kt)("em",{parentName:"a"},"messageBLOB")," : Blob)"),"\xa0","\xa0","\xa0","\xa0","permet d'\xe9crire dans le flux d'entr\xe9e (stdin) du process externe")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#response"}),(0,r.kt)("strong",{parentName:"a"},".response")," : Text",(0,r.kt)("br",null),(0,r.kt)("strong",{parentName:"a"},".response")," : Blob"),"\xa0","\xa0","\xa0","\xa0","contient la concat\xe9nation de toutes les donn\xe9es renvoy\xe9es une fois la demande termin\xe9e")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#responseerror"}),(0,r.kt)("strong",{parentName:"a"},".responseError")," : Text"),"\xa0","\xa0","\xa0","\xa0","contient la concat\xe9nation de toutes les erreurs renvoy\xe9es, une fois la requ\xeate termin\xe9e")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#terminate"}),(0,r.kt)("strong",{parentName:"a"},".terminate"),"()"),"\xa0","\xa0","\xa0","\xa0","force le ",(0,r.kt)("inlineCode",{parentName:"td"},"SystemWorker")," \xe0 mettre fin \xe0 son ex\xe9cution")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#terminated"}),(0,r.kt)("strong",{parentName:"a"},".terminated")," : Boolean"),"\xa0","\xa0","\xa0","\xa0","contient ",(0,r.kt)("strong",{parentName:"td"},"vrai")," si le process externe est termin\xe9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#timeout"}),(0,r.kt)("strong",{parentName:"a"},".timeout")," : Integer"),"\xa0","\xa0","\xa0","\xa0","contient la dur\xe9e en secondes avant que le process externe ne soit tu\xe9 s'il est toujours en vie")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),(0,r.kt)("a",a({parentName:"td"},{href:"#wait"}),(0,r.kt)("strong",{parentName:"a"},".wait"),"( {",(0,r.kt)("em",{parentName:"a"},"timeout")," : Real} ) : 4D.SystemWorker"),"\xa0","\xa0","\xa0","\xa0","attend la fin de l'ex\xe9cution du ",(0,r.kt)("inlineCode",{parentName:"td"},"SystemWorker")," ou du ",(0,r.kt)("em",{parentName:"td"},"timeout")," sp\xe9cifi\xe9")))),(0,r.kt)("h2",a({},{id:"4dsystemworkernew"}),"4D.SystemWorker.new()"),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Historique"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Version"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Modifications"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"v19 R4"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Ajout"))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"4D.SystemWorker.new")," ( ",(0,r.kt)("em",{parentName:"p"},"commandLine")," : Text { ; options : Object } ) : 4D.SystemWorker"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Type"),(0,r.kt)("th",a({parentName:"tr"},{align:"center"})),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"commandLine"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Text"),(0,r.kt)("td",a({parentName:"tr"},{align:"center"}),"->"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Ligne de commande \xe0 ex\xe9cuter")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"options"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Object"),(0,r.kt)("td",a({parentName:"tr"},{align:"center"}),"->"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Param\xe8tres du worker")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"result"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"4D.SystemWorker"),(0,r.kt)("td",a({parentName:"tr"},{align:"center"}),"<-"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Nouveau System worker asynchrone ou null si le process n'a pas d\xe9marr\xe9")))),(0,r.kt)("h4",a({},{id:"description"}),"Description"),(0,r.kt)("p",null,"La fonction ",(0,r.kt)("inlineCode",{parentName:"p"},".4D.SystemWorker.new()")," cr\xe9e et renvoie un objet ",(0,r.kt)("inlineCode",{parentName:"p"},"4D.SystemWorker")," qui ex\xe9cutera la ",(0,r.kt)("em",{parentName:"p"},"commandLine")," que vous avez pass\xe9e en param\xe8tre pour lancer un process externe."),(0,r.kt)("p",null,"L'objet system worker retourn\xe9 peut \xeatre utilis\xe9 pour envoyer des messages au worker et obtenir les r\xe9sultats du worker."),(0,r.kt)("p",null,"Si une erreur se produit pendant la cr\xe9ation de l'objet proxy, la fonction renvoie un objet ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," et une erreur est lev\xe9e."),(0,r.kt)("p",null,"Dans le param\xe8tre ",(0,r.kt)("em",{parentName:"p"},"commandLine")," , passez le chemin complet du fichier de l'application \xe0 ex\xe9cuter (syntaxe posix), ainsi que les arguments requis, si n\xe9cessaire. Si vous ne passez que le nom de l'application, 4D utilisera la variable d'environnement ",(0,r.kt)("inlineCode",{parentName:"p"},"PATH")," pour localiser l'ex\xe9cutable."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Attention :")," Cette fonction ne peut lancer que des applications ex\xe9cutables ; elle ne peut pas ex\xe9cuter les instructions qui font partie du shell (interpr\xe9teur de commandes). Par exemple, sous Windows, il n'est pas possible d'utiliser cette commande pour ex\xe9cuter l'instruction ",(0,r.kt)("inlineCode",{parentName:"p"},"dir")," ."),(0,r.kt)("h4",a({},{id:"objet-options"}),"Objet ",(0,r.kt)("em",{parentName:"h4"},"options")),(0,r.kt)("p",null,"Dans le param\xe8tre ",(0,r.kt)("em",{parentName:"p"},"options"),", passez un objet qui peut contenir les propri\xe9t\xe9s suivantes :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Type"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Par d\xe9faut"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"onResponse"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Formula"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"undefined"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Callback pour les messages du system worker. Ce callback est appel\xe9 une fois que la r\xe9ponse compl\xe8te est re\xe7ue. Elle re\xe7oit deux objets en param\xe8tres (voir ci-dessous)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"onData"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Formula"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"undefined"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Callback pour les donn\xe9es du system worker. Ce callback est appel\xe9 chaque fois que le system worker re\xe7oit des donn\xe9es. Elle re\xe7oit deux objets en param\xe8tres (voir ci-dessous)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"onDataError"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Formula"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"undefined"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Callback pour les erreurs du process externe (",(0,r.kt)("em",{parentName:"td"},"stderr")," du processs externe). Elle re\xe7oit deux objets en param\xe8tres (voir ci-dessous)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"onError"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Formula"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"undefined"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Callback pour les erreurs d'ex\xe9cution, renvoy\xe9es par le system worker en cas de conditions d'ex\xe9cution inhabituelles (erreurs syst\xe8me). Elle re\xe7oit deux objets en param\xe8tres (voir ci-dessous)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"onTerminate"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Formula"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"undefined"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Callback lorsque le process externe est termin\xe9. Elle re\xe7oit deux objets en param\xe8tres (voir ci-dessous)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"timeout"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Number"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"undefined"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"D\xe9lai en secondes avant que le process soit tu\xe9 s'il est toujours actif")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"dataType"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Text"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),'"text"'),(0,r.kt)("td",a({parentName:"tr"},{align:null}),'Type de contenu du corps de la r\xe9ponse. Valeurs possibles : "text" (par d\xe9faut), "blob".')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"encoding"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Text"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),'"UTF-8"'),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Seulement si ",(0,r.kt)("inlineCode",{parentName:"td"},'dataType="text"'),". Encodage du contenu du corps de la r\xe9ponse. Pour la liste des valeurs disponibles, voir la description de la commande ",(0,r.kt)("a",a({parentName:"td"},{href:"https://doc.4d.com/4dv19R/help/command/fe/page1011.html"}),(0,r.kt)("inlineCode",{parentName:"a"},"CONVERT FROM TEXT")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"variables"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Object"),(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"D\xe9finit des variables d'environnement personnalis\xe9es pour le system worker. Syntaxe : ",(0,r.kt)("inlineCode",{parentName:"td"},"variables.key=value"),", o\xf9 ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," est le nom de la variable et ",(0,r.kt)("inlineCode",{parentName:"td"},"value")," sa valeur. Les valeurs sont converties en cha\xeenes de caract\xe8res lorsque cela est possible. La valeur ne peut pas contenir un '='. S'il n'est pas d\xe9fini, le system worker h\xe9rite de l'environnement 4D.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"currentDirectory"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Folder"),(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"R\xe9pertoire de travail dans lequel le process est ex\xe9cut\xe9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"hideWindow"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Boolean"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"vrai"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"(Windows) Masquer la fen\xeatre de l'application (si possible) ou la console Windows")))),(0,r.kt)("p",null,"Toutes les fonctions de callback re\xe7oivent deux param\xe8tres objet. Leur contenu d\xe9pend du callback :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Type"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),(0,r.kt)("em",{parentName:"th"},"onResponse")),(0,r.kt)("th",a({parentName:"tr"},{align:null}),(0,r.kt)("em",{parentName:"th"},"onData")),(0,r.kt)("th",a({parentName:"tr"},{align:null}),(0,r.kt)("em",{parentName:"th"},"onDataError")),(0,r.kt)("th",a({parentName:"tr"},{align:null}),(0,r.kt)("em",{parentName:"th"},"onError")),(0,r.kt)("th",a({parentName:"tr"},{align:null}),(0,r.kt)("em",{parentName:"th"},"onTerminate")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"$param1"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Object"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"SystemWorker"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"SystemWorker"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"SystemWorker"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"SystemWorker"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"SystemWorker")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"$param2.type"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Text"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),'"response"'),(0,r.kt)("td",a({parentName:"tr"},{align:null}),'"data"'),(0,r.kt)("td",a({parentName:"tr"},{align:null}),'"error"'),(0,r.kt)("td",a({parentName:"tr"},{align:null}),'"error"'),(0,r.kt)("td",a({parentName:"tr"},{align:null}),'"termination"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"$param2.data"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Text ou Blob"),(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"donn\xe9es re\xe7ues"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"donn\xe9es d'erreur"),(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:null}))))),(0,r.kt)("p",null,"Voici la s\xe9quence des appels de callbacks :"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"onData")," et ",(0,r.kt)("inlineCode",{parentName:"li"},"onDataError")," sont ex\xe9cut\xe9s une ou plusieurs fois"),(0,r.kt)("li",{parentName:"ol"},"s'il est appel\xe9, ",(0,r.kt)("inlineCode",{parentName:"li"},"onError")," est ex\xe9cut\xe9 une fois (arr\xeate le traitement du system worker)"),(0,r.kt)("li",{parentName:"ol"},"si aucune erreur ne s'est produite, ",(0,r.kt)("inlineCode",{parentName:"li"},"onResponse")," est ex\xe9cut\xe9 une fois"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"onTerminate")," est toujours ex\xe9cut\xe9")),(0,r.kt)("h4",a({},{id:"valeur-retourn\xe9e"}),"Valeur retourn\xe9e"),(0,r.kt)("p",null,"La fonction renvoie un objet system worker sur lequel vous pouvez appeler les fonctions et les propri\xe9t\xe9s de la classe SystemWorker."),(0,r.kt)("h4",a({},{id:"exemples-sous-windows"}),"Exemples sous Windows"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Pour ouvrir le Bloc-notes et ouvrir un document sp\xe9cifique :")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'var $sw : 4D.SystemWorker\nvar $options : Object\n$options:=New object\n$options.hideWindow:= False\n\n$sw:=4D.SystemWorker.new ("C:\\\\WINDOWS\\\\notepad.exe C:\\\\Docs\\\\new folder\\\\res.txt";$options)\n')),(0,r.kt)("ol",a({},{start:2}),(0,r.kt)("li",{parentName:"ol"},"Ex\xe9cuter npm install dans la console :")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'var $folder : 4D.Folder\nvar $options : Object\nvar $worker : 4D.SystemWorker\n\n$folder:=Folder(fk database folder)\n$options:=New object\n$options.currentDirectory:=$folder\n$options.hideWindow:=False\n\n$worker:=4D.SystemWorker.new("cmd /c npm install";$options)\n\n')),(0,r.kt)("ol",a({},{start:3}),(0,r.kt)("li",{parentName:"ol"},"Pour lancer l'application Microsoft\xae Word\xae et ouvrir un document sp\xe9cifique :")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'$mydoc:="C:\\\\Program Files\\\\Microsoft Office\\\\Office15\\\\WINWORD.EXE C:\\\\Tempo\\\\output.txt"\nvar $sw : 4D.SystemWorker\n$sw:=4D.SystemWorker.new($mydoc)\n')),(0,r.kt)("ol",a({},{start:4}),(0,r.kt)("li",{parentName:"ol"},"Pour lancer une commande avec le r\xe9pertoire courant et poster un message :")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'var $param : Object\nvar $sys : 4D.SystemWorker\n\n$param:=New object\n$param.currentDirectory:=Folder(fk database folder)\n$sys:=4D.SystemWorker.new("git commit -F -";$param)\n$sys.postMessage("This is a postMessage")\n$sys.closeInput()\n')),(0,r.kt)("ol",a({},{start:5}),(0,r.kt)("li",{parentName:"ol"},"Pour permettre \xe0 l'utilisateur d'ouvrir un document externe sous Windows :")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'$docname:=Select document(" ; "*.*" ; "Choisissez le fichier \xe0 ouvrir";0)\nIf(OK=1)\n var $sw : 4D.SystemWorker\n $sw:=4D.SystemWorker.new("cmd.exe /C start \\"\\" \\""$docname"\\"")\nEnd if\n')),(0,r.kt)("h4",a({},{id:"exemples-sous-macos"}),"Exemples sous macOS"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Modifier un fichier texte (",(0,r.kt)("inlineCode",{parentName:"li"},"cat")," est la commande macOS utilis\xe9e pour modifier les fichiers). Dans cet exemple, le chemin d'acc\xe8s complet de la commande est transmis :")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'\nvar $sw : 4D.SystemWorker\n$sw:=4D.SystemWorker.new("/bin/cat /folder/myfile.txt")\n$sw.wait() /ex\xe9cution synchrone\n\n')),(0,r.kt)("ol",a({},{start:2}),(0,r.kt)("li",{parentName:"ol"},'Pour lancer une application "graphique" ind\xe9pendante, il est pr\xe9f\xe9rable d\'utiliser la commande syst\xe8me ',(0,r.kt)("inlineCode",{parentName:"li"},"open")," (dans ce cas, le code a le m\xeame effet qu'un double-clic sur l'application) :")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'var $sw : 4D.SystemWorker\n$sw:=4D.SystemWorker.new ("open /Applications/Calculator.app")\n')),(0,r.kt)("ol",a({},{start:3}),(0,r.kt)("li",{parentName:"ol"},'Pour obtenir le contenu du dossier "Users" (ls -l est l\'\xe9quivalent sous macOS de la commande dir sous DOS).')),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'var $systemworker : 4D.SystemWorker\nvar $output : Text\nvar $errors : Collection\n\n$systemworker:=4D.SystemWorker.new("/bin/ls -l /Users ")\n$systemworker.wait(5)\n$output:=$systemworker.response\n$error:=$systemworker.errors\n\n')),(0,r.kt)("ol",a({},{start:4}),(0,r.kt)("li",{parentName:"ol"},'M\xeame commande que ci-dessus, mais en utilisant un exemple de classe utilisateur "Params" pour montrer comment g\xe9rer les fonctions de callback :')),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4d"}),'\nvar $systemworker : 4D.SystemWorker\n$systemworker:=4D.SystemWorker.new("/bin/ls -l /Users ";cs.Params.new())\n\n\n// "Params" class\n\nClass constructor\n This.dataType:="text"\n    This.data:=""\n    This.dataError:=""\n\nFunction onResponse($systemWorker : Object)\n     This._createFile("onResponse"; $systemWorker.response)\n\nFunction onData($systemWorker : Object; $info : Object)\n     This.data+=$info.data\n     This._createFile("onData";this.data)\n\nFunction onDataError($systemWorker : Object; $info : Object)\n     This.dataError+=$info.data\n     This._createFile("onDataError";this.dataError)\n\nFunction onTerminate($systemWorker : Object)\n     var $textBody : Text\n     $textBody:="Response: "+$systemWorker.response\n     $textBody+="ResponseError: "+$systemWorker.responseError\n     This._createFile("onTerminate"; $textBody)\n\nFunction _createFile($title : Text; $textBody : Text)\n     TEXT TO DOCUMENT(Get 4D folder(Current resources folder)+$title+".txt"; $textBody)\n\n')),(0,r.kt)("h2",a({},{id:"closeinput"}),".closeInput()"),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Historique"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Version"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Modifications"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"v19 R4"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Ajout"))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".closeInput"),"()"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Type"),(0,r.kt)("th",a({parentName:"tr"},{align:"center"})),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:"center"})),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Ne requiert aucun param\xe8tre")))),(0,r.kt)("p",null,"|"),(0,r.kt)("h4",a({},{id:"description-1"}),"Description"),(0,r.kt)("p",null,"La fonction ",(0,r.kt)("inlineCode",{parentName:"p"},".closeInput()")," ferme le flux d'entr\xe9e (",(0,r.kt)("em",{parentName:"p"},"stdin"),") du process externe."),(0,r.kt)("p",null,"Lorsque l'ex\xe9cutable attend que toutes les donn\xe9es soient re\xe7ues par ",(0,r.kt)("inlineCode",{parentName:"p"},"postMessage()"),", ",(0,r.kt)("inlineCode",{parentName:"p"},".closeInput()")," est utile pour indiquer \xe0 l'ex\xe9cutable que l'envoi des donn\xe9es est termin\xe9 et qu'il peut continuer."),(0,r.kt)("h4",a({},{id:"exemple-1"}),"Exemple"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-4D"}),'// Cr\xe9er quelques donn\xe9es \xe0 gzipper\nvar $input;$output : Blob\nvar $gzip : Text\nTEXT TO BLOB("Hello, World !" ;$input)\n$gzip:="\\"C:\\\\Program Files (x86)\\GnuWin32\\bin\\\\\\\\\\gzip.exe\\" "\n\n// Cr\xe9er un system worker asynchrone\nvar $worker : 4D.SystemWorker\n$worker:= 4D.SystemWorker.new($gzip;New object("dataType" ; "blob"))\n\n// Envoyer le fichier compress\xe9 sur stdin.\n$worker.postMessage($input)\n// Notez que nous appelons closeInput() pour indiquer que nous avons termin\xe9.\n// gzip (et la plupart des programmes attendant des donn\xe9es de stdin) attendra plus de donn\xe9es jusqu\'\xe0 ce que l\'entr\xe9e soit explicitement ferm\xe9e.\n$worker.closeInput()\n$worker.wait()\n\n$output:=$worker.response\n\n')),(0,r.kt)("h2",a({},{id:"commandline"}),".commandLine"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".commandLine")," : Text"),(0,r.kt)("h4",a({},{id:"description-2"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".commandLine")," contient la ligne de commande pass\xe9e en param\xe8tre \xe0 la fonction ",(0,r.kt)("a",a({parentName:"p"},{href:"#4d-systemworker-new"}),(0,r.kt)("inlineCode",{parentName:"a"},"new()")),"."),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture seule"),"."),(0,r.kt)("h2",a({},{id:"currentdirectory"}),".currentDirectory"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".currentDirectory")," : 4D.Folder"),(0,r.kt)("h4",a({},{id:"description-3"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".currentDirectory")," contient le r\xe9pertoire de travail dans lequel le process externe est ex\xe9cut\xe9."),(0,r.kt)("h2",a({},{id:"datatype"}),".dataType"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".dataType")," : Text"),(0,r.kt)("h4",a({},{id:"description-4"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".dataType"),' contient le type du contenu du corps de la r\xe9ponse. Valeurs possibles : "text" ou "blob".'),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture seule"),"."),(0,r.kt)("h2",a({},{id:"encoding"}),".encoding"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".encoding")," : Text"),(0,r.kt)("h4",a({},{id:"description-5"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".encoding")," contient l'encodage du contenu du corps de la r\xe9ponse. Cette propri\xe9t\xe9 est uniquement disponible si le ",(0,r.kt)("a",a({parentName:"p"},{href:"#datatype"}),(0,r.kt)("inlineCode",{parentName:"a"},"dataType")),' est "text".'),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture seule"),"."),(0,r.kt)("h2",a({},{id:"errors"}),".errors"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".errors")," : Collection"),(0,r.kt)("h4",a({},{id:"description-6"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".errors")," contient une collection d'erreurs 4D en cas d'erreur(s) d'ex\xe9cution, le cas \xe9ch\xe9ant."),(0,r.kt)("p",null,"Chaque \xe9l\xe9ment de la collection est un objet avec les propri\xe9t\xe9s suivantes :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Propri\xe9t\xe9"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Type"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"[].errorCode"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"number"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Code d'erreur 4D")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"[].message"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"text"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Description de l'erreur 4D")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"[ ]",".componentSignature"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"text"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Signature du composant interne qui a retourn\xe9 l'erreur")))),(0,r.kt)("p",null,"Si aucune erreur ne s'est produite, ",(0,r.kt)("inlineCode",{parentName:"p"},".errors")," est undefined."),(0,r.kt)("h2",a({},{id:"exitcode"}),".exitCode"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".exitCode")," : Integer"),(0,r.kt)("h4",a({},{id:"description-7"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".exitCode")," contient le code de sortie renvoy\xe9 par le process externe. Si le process ne s'est pas termin\xe9 normalement, ",(0,r.kt)("inlineCode",{parentName:"p"},"exitCode")," est ",(0,r.kt)("em",{parentName:"p"},"undefined"),"."),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture seule"),"."),(0,r.kt)("h2",a({},{id:"hidewindow"}),".hideWindow"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".hideWindow")," : Boolean"),(0,r.kt)("h4",a({},{id:"description-8"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".hideWindow")," peut \xeatre utilis\xe9 pour cacher la fen\xeatre de la console DOS ou la fen\xeatre de l'ex\xe9cutable lanc\xe9 (",(0,r.kt)("strong",{parentName:"p"},"Windows seulement"),")."),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture-\xe9criture"),"."),(0,r.kt)("h2",a({},{id:"pid"}),".pid"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".pid")," : Integer"),(0,r.kt)("h4",a({},{id:"description-9"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".pid")," contient l'identifiant unique du process externe au niveau du syst\xe8me."),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture seule"),"."),(0,r.kt)("h2",a({},{id:"postmessage"}),".postMessage()"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".postMessage"),"( ",(0,r.kt)("em",{parentName:"p"},"message")," : Text)",(0,r.kt)("br",null),(0,r.kt)("strong",{parentName:"p"},".postMessage"),"( ",(0,r.kt)("em",{parentName:"p"},"messageBLOB")," : Blob)"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Type"),(0,r.kt)("th",a({parentName:"tr"},{align:"center"})),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"message"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Text"),(0,r.kt)("td",a({parentName:"tr"},{align:"center"}),"->"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Texte \xe0 \xe9crire dans le flux d'entr\xe9e (stdin) du process externe")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"messageBLOB"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Blob"),(0,r.kt)("td",a({parentName:"tr"},{align:"center"}),"->"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Octets \xe9crits dans le flux d'entr\xe9e")))),(0,r.kt)("p",null,"|"),(0,r.kt)("h4",a({},{id:"description-10"}),"Description"),(0,r.kt)("p",null,"La fonction ",(0,r.kt)("inlineCode",{parentName:"p"},".postMessage()")," permet d'\xe9crire dans le flux d'entr\xe9e (stdin) du process externe. Dans le param\xe8tre ",(0,r.kt)("em",{parentName:"p"},"message"),", passez le texte \xe0 \xe9crire dans ",(0,r.kt)("em",{parentName:"p"},"stdin"),"."),(0,r.kt)("p",null,"La fonction ",(0,r.kt)("inlineCode",{parentName:"p"},".postMessage()")," accepte \xe9galement une valeur de type Blob dans ",(0,r.kt)("em",{parentName:"p"},"messageBLOB"),", de sorte que vous pouvez poster des donn\xe9es binaires dans ",(0,r.kt)("em",{parentName:"p"},"stdin"),"."),(0,r.kt)("p",null,"Vous pouvez utiliser la propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".dataType")," de l'objet ",(0,r.kt)("a",a({parentName:"p"},{href:"#options-object"}),"options")," pour que le corps de r\xe9ponse renvoie des valeurs Blob."),(0,r.kt)("h2",a({},{id:"response"}),".response"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".response")," : Text",(0,r.kt)("br",null),(0,r.kt)("strong",{parentName:"p"},".response")," : Blob"),(0,r.kt)("h4",a({},{id:"description-11"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".response")," contient la concat\xe9nation de toutes les donn\xe9es renvoy\xe9es une fois la demande termin\xe9e, c'est-\xe0-dire le message complet re\xe7u \xe0 partir de l'output du process."),(0,r.kt)("p",null,"Le type du message est d\xe9fini selon l'attribut ",(0,r.kt)("a",a({parentName:"p"},{href:"#datatype"}),(0,r.kt)("inlineCode",{parentName:"a"},"dataType"))," ."),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture seule"),"."),(0,r.kt)("h2",a({},{id:"responseerror"}),".responseError"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".responseError")," : Text"),(0,r.kt)("h4",a({},{id:"description-12"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".responseError")," contient la concat\xe9nation de toutes les erreurs renvoy\xe9es, une fois la requ\xeate termin\xe9e."),(0,r.kt)("h2",a({},{id:"terminate"}),".terminate()"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".terminate"),"()"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Type"),(0,r.kt)("th",a({parentName:"tr"},{align:"center"})),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:"center"})),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Ne requiert aucun param\xe8tre")))),(0,r.kt)("p",null,"|"),(0,r.kt)("h4",a({},{id:"description-13"}),"Description"),(0,r.kt)("p",null,"La fonction ",(0,r.kt)("inlineCode",{parentName:"p"},".terminate()")," force le ",(0,r.kt)("inlineCode",{parentName:"p"},"SystemWorker")," \xe0 mettre fin \xe0 son ex\xe9cution."),(0,r.kt)("p",null,"Cette fonction envoie l'instruction de terminer et de redonner le contr\xf4le au script en cours d'ex\xe9cution."),(0,r.kt)("h2",a({},{id:"terminated"}),".terminated"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".terminated")," : Boolean"),(0,r.kt)("h4",a({},{id:"description-14"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".terminated")," contient ",(0,r.kt)("strong",{parentName:"p"},"vrai")," si le process externe est termin\xe9."),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture seule"),"."),(0,r.kt)("h2",a({},{id:"timeout"}),".timeout"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".timeout")," : Integer"),(0,r.kt)("h4",a({},{id:"description-15"}),"Description"),(0,r.kt)("p",null,"La propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},".timeout")," contient la dur\xe9e en secondes avant que le process externe ne soit tu\xe9 s'il est toujours en vie."),(0,r.kt)("p",null,"Cette propri\xe9t\xe9 est en ",(0,r.kt)("strong",{parentName:"p"},"lecture seule"),"."),(0,r.kt)("h2",a({},{id:"wait"}),".wait()"),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Historique"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Version"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Modifications"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null})),(0,r.kt)("td",a({parentName:"tr"},{align:null}))))),(0,r.kt)("p",null,"|v19 R4|Ajout\xe9|")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},".wait"),"( {",(0,r.kt)("em",{parentName:"p"},"timeout")," : Real} ) : 4D.SystemWorker"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Param\xe8tres"),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Type"),(0,r.kt)("th",a({parentName:"tr"},{align:"center"})),(0,r.kt)("th",a({parentName:"tr"},{align:null}),"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"timeout"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Real"),(0,r.kt)("td",a({parentName:"tr"},{align:"center"}),"->"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Temps d'attente (en secondes)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",a({parentName:"tr"},{align:null}),"R\xe9sultat"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"4D.SystemWorker"),(0,r.kt)("td",a({parentName:"tr"},{align:"center"}),"<-"),(0,r.kt)("td",a({parentName:"tr"},{align:null}),"Objet SystemWorker")))),(0,r.kt)("p",null,"|"),(0,r.kt)("h4",a({},{id:"description-16"}),"Description"),(0,r.kt)("p",null,"La fonction ",(0,r.kt)("inlineCode",{parentName:"p"},".wait()")," attend la fin de l'ex\xe9cution du ",(0,r.kt)("inlineCode",{parentName:"p"},"SystemWorker")," ou du ",(0,r.kt)("em",{parentName:"p"},"timeout")," sp\xe9cifi\xe9."),(0,r.kt)("p",null,"Dans ",(0,r.kt)("em",{parentName:"p"},"timeout"),", passez une valeur en secondes. Le script ",(0,r.kt)("inlineCode",{parentName:"p"},"SystemWorker")," attendra le process externe pendant la dur\xe9e d\xe9finie dans le param\xe8tre ",(0,r.kt)("em",{parentName:"p"},"timeout")," . Si vous omettez le param\xe8tre ",(0,r.kt)("em",{parentName:"p"},"timeout"),", l'ex\xe9cution du script attendra ind\xe9finiment."),(0,r.kt)("p",null,"En fait, ",(0,r.kt)("inlineCode",{parentName:"p"},".wait()")," attend la fin du traitement de la formule ",(0,r.kt)("inlineCode",{parentName:"p"},"onTerminate"),", sauf si le ",(0,r.kt)("em",{parentName:"p"},"timeout")," est atteint. Si le ",(0,r.kt)("em",{parentName:"p"},"timeout")," est atteint, le ",(0,r.kt)("inlineCode",{parentName:"p"},"SystemWorker")," n'est pas tu\xe9."),(0,r.kt)("p",null,"Pendant une ex\xe9cution ",(0,r.kt)("inlineCode",{parentName:"p"},".wait()"),", les fonctions de callback sont ex\xe9cut\xe9es, en particulier les callbacks provenant d'autres \xe9v\xe9nements ou d'autres instances de ",(0,r.kt)("inlineCode",{parentName:"p"},"SystemWorker"),". Vous pouvez sortir d'un ",(0,r.kt)("inlineCode",{parentName:"p"},".wait()")," en appelant ",(0,r.kt)("a",a({parentName:"p"},{href:"#terminate"}),(0,r.kt)("inlineCode",{parentName:"a"},"terminate()"))," \xe0 partir d'un callback."),(0,r.kt)("p",null,"Cette fonction renvoie l'objet SystemWorker."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Cette fonction n'est pas n\xe9cessaire si vous avez cr\xe9\xe9 le ",(0,r.kt)("inlineCode",{parentName:"p"},"SystemWorker")," \xe0 partir d'un process worker 4D.")))}u.isMDXComponent=!0}}]);