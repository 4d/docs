<!DOCTYPE html><html lang="fr"><head><meta name="docsearch:version" content="19 R5"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Sessions utilisateur · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Le serveur Web de 4D offre des fonctions intégrées pour la gestion des **sessions utilisateur**. Creating and maintaining user sessions allows you to control and improve the user experience on your web application. When user sessions are enabled, web clients can reuse the same server context from one request to another."/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Sessions utilisateur · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/Rx/index.html"/><meta property="og:description" content="Le serveur Web de 4D offre des fonctions intégrées pour la gestion des **sessions utilisateur**. Creating and maintaining user sessions allows you to control and improve the user experience on your web application. When user sessions are enabled, web clients can reuse the same server context from one request to another."/><meta property="og:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><link rel="shortcut icon" href="/docs/Rx/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/Rx/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/Rx/js/code-blocks-buttons.js"></script><script src="/docs/Rx/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/Rx/css/main.css"/><script src="/docs/Rx/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/Rx/fr"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://developer.4d.com/docs" target="_self">v19 R6 BETA</a></li><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs/Rx" target="_self">v19 R5</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/Rx/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/Rx/en/WebServer/sessions.html">English</a></li><li><a href="/docs/Rx/ja/WebServer/sessions.html">日本語</a></li><li><a href="/docs/Rx/de/WebServer/sessions.html">Deutsch</a></li><li><a href="/docs/Rx/es/WebServer/sessions.html">Español</a></li><li><a href="/docs/Rx/pt/WebServer/sessions.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Développement Web</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Serveur Web<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/webServer.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/webServerConfig.html">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/webServerAdmin.html">Administration</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/webServerObject.html">Objet Serveur Web</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Développement Web<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/gettingStarted.html">Prise en main</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/templates.html">Template pages</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/httpRequests.html">Traitement des requêtes HTTP</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/allowProject.html">Allowing project methods</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/errorPages.html">Pages d&#x27;erreur HTTP personnalisées</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/authentication.html">Authentification</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/Rx/fr/WebServer/sessions.html">Sessions utilisateur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/WebServer/preemptiveWeb.html">Using preemptive web processes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Serveur REST<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/gettingStarted.html">Prise en main</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/configuration.html">Configuration du serveur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/authUsers.html">Sessions et utilisateurs</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/genInfo.html">Obtenir des informations du serveur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/manData.html">Manipulation des données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/classFunctions.html">Appeler des fonctions de classe ORDA</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/REST_requests.html">A propos des requêtes REST</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (general)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/catalog.html">$catalog</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/directory.html">$directory</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/info.html">$info</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/upload.html">$upload</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (dataClass)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/{dataClass}.html">{dataClass}</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/asArray.html">$asArray</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/atomic_$atonce.html">$atomic/$atonce</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/attributes.html">$attributes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/binary.html">$binary</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/compute.html">$compute</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/distinct.html">$distinct</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/entityset.html">$entityset</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/expand.html">$expand</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/filter.html">$filter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/imageformat.html">$imageformat</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/lock.html">$lock</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/method.html">$method</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/orderby.html">$orderby</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/querypath.html">$querypath</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/queryplan.html">$queryplan</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/savedfilter.html">$savedfilter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/savedorderby.html">$savedorderby</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/skip.html">$skip</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/timeout.html">$timeout</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/top_$limit.html">$top/$limit</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/REST/version.html">$version</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/Rx/docs/WebServer/sessions.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Sessions utilisateur</h1></header><article><div><span><p>Le serveur Web de 4D offre des fonctions intégrées pour la gestion des <strong>sessions utilisateur</strong>. Creating and maintaining user sessions allows you to control and improve the user experience on your web application. When user sessions are enabled, web clients can reuse the same server context from one request to another.</p>
<p>Web server user sessions allow to:</p>
<ul>
<li>handle multiple requests simultaneously from the same web client through an unlimited number of preemptive processes (web server sessions are <strong>scalable</strong>),</li>
<li>share data between the processes of a web client,</li>
<li>associate privileges to user sessions,</li>
<li>gérer l'accès via un objet <code>Session</code> et l'<a href="/docs/Rx/fr/API/SessionClass.html">API Session</a>.</li>
</ul>
<blockquote>
<p><strong>Note :</strong> l'implémentation actuelle n'est que la première étape d'une fonctionnalité complète à venir qui permet aux développeurs de gérer les autorisations utilisateur hiérarchiques via des sessions dans l'ensemble de l'application Web.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="activation-des-sessions"></a><a href="#activation-des-sessions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Activation des sessions</h2>
<p>The session management feature can be enabled and disabled on your 4D web server. There are different ways to enable session management:</p>
<ul>
<li>Using the <strong>Scalable sessions</strong> option on the &quot;Web/Options (I)&quot; page of the Settings (permanent setting): <img src="/docs/Rx/assets/en/WebServer/settingsSession.png" alt="alt-text"></li>
</ul>
<p>This option is selected by default in new projects. It can however be disabled by selecting the <strong>No sessions</strong> option, in which case the web session features are disabled (no <code>Session</code> object is available).</p>
<ul>
<li>Utilisation de la propriété <a href="/docs/Rx/fr/API/WebServerClass.html#scalablesession"><code>.scalableSession</code></a> de l'objet Web Server (pour passer le paramètre <em>settings</em> de la fonction <a href="/docs/Rx/fr/API/WebServerClass.html#start"><code>.start()</code></a>). In this case, this setting overrides the option defined in the Settings dialog box for the Web Server object (it is not stored on disk).</li>
</ul>
<blockquote>
<p>The <code>WEB SET OPTION</code> command can also set the session mode for the main Web server.</p>
</blockquote>
<p>In any cases, the setting is local to the machine; so it can be different on the 4D Server Web server and the Web servers of remote 4D machines.</p>
<blockquote>
<p><strong>Compatibility</strong>: A <strong>Legacy sessions</strong> option is available in projects created with a 4D version prior to 4D v18 R6 (for more information, please refer to the <a href="https://doc.4d.com">doc.4d.com</a> web site).</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="session-implementation"></a><a href="#session-implementation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Session implementation</h2>
<p>When <a href="#enabling-sessions">sessions are enabled</a>, automatic mechanisms are implemented, based upon a private cookie set by 4D itself: &quot;4DSID_<em>AppName</em>&quot;, where <em>AppName</em> is the name of the application project. This cookie references the current web session for the application.</p>
<blockquote>
<p>Le nom du cookie peut être obtenu à l'aide de la propriété <a href="/docs/Rx/fr/API/WebServerClass.html#sessioncookiename"><code>.sessionCookieName</code></a>.</p>
</blockquote>
<ol>
<li><p>In each web client request, the Web server checks for the presence and the value of the private &quot;4DSID_<em>AppName</em>&quot; cookie.</p></li>
<li><p>If the cookie has a value, 4D looks for the session that created this cookie among the existing sessions; if this session is found, it is reused for the call.</p></li>
<li><p>If the client request does not correspond to an already opened session:</p></li>
</ol>
<ul>
<li>a new session with a private &quot;4DSID_<em>AppName</em>&quot; cookie is created on the web server</li>
<li>a new Guest <code>Session</code> object is created and is dedicated to the scalable web session.</li>
</ul>
<p>L'objet <code>Session</code> courant est alors accessible via la commande <a href="/docs/Rx/fr/API/SessionClass.html#session"><code>Session</code></a> dans le code de n'importe quel processus Web.</p>
<p><img src="/docs/Rx/assets/en/WebServer/schemaSession.png" alt="alt-text"></p>
<p>Web processes usually do not end, they are recycled in a pool for efficiency. When a process finishes executing a request, it is put back in the pool and made available for the next request. Since a web process can be reused by any session, <a href="/docs/Rx/fr/Concepts/variables.html#process-variables">process variables</a> must be cleared by your code at the end of its execution (using <a href="https://doc.4d.com/4dv18/help/command/en/page89.html"><code>CLEAR VARIABLE</code></a> for example). This cleanup is necessary for any process related information, such as a reference to an opened file. This is the reason why <strong>it is recommended</strong> to use the <a href="/docs/Rx/fr/API/SessionClass.html">Session</a> object when you want to keep session related information.</p>
<h3><a class="anchor" aria-hidden="true" id="mode-préemptif"></a><a href="#mode-préemptif" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mode préemptif</h3>
<p>Sur 4D Server, les sessions du serveur Web sont automatiquement gérées par des process préemptifs, <strong>y compris en mode interprété</strong>. Vous devez vous assurer que le code de votre serveur web est <a href="/docs/Rx/fr/WebServer/preemptiveWeb.html#writing-thread-safe-web-server-code">conforme à une exécution préemptive</a>.</p>
<blockquote>
<p>Pour déboguer le code web interprété sur la machine serveur, assurez-vous que le débogueur est <a href="/docs/Rx/fr/Debugging/debugging-remote.html">rattaché au serveur</a> ou <a href="/docs/Rx/fr/Debugging/debugging-remote.html#attaching-the-debugger-to-a-remote-4d-client">à une machine distante</a>. Les process Web passent alors en mode coopératif et le code du serveur Web peut être débogué.</p>
</blockquote>
<p>Avec 4D monoposte, le code interprété s'exécute toujours en mode coopératif.</p>
<h2><a class="anchor" aria-hidden="true" id="partage-dinformations"></a><a href="#partage-dinformations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Partage d'informations</h2>
<p>Chaque objet <code>Session</code> fournit une propriété <a href="/docs/Rx/fr/API/SessionClass.html#storage"><code>.storage</code></a> qui est un <a href="/docs/Rx/fr/Concepts/shared.html">objet partagé</a>. This property allows you to share information between all processes handled by the session.</p>
<h2><a class="anchor" aria-hidden="true" id="session-lifetime"></a><a href="#session-lifetime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Session lifetime</h2>
<p>A scalable web session is closed when:</p>
<ul>
<li>the web server is stopped,</li>
<li>the timeout of the session cookie has been reached.</li>
</ul>
<p>The lifespan of an inactive cookie is 60 minutes by default, which means that the web server will automatically close inactive sessions after 60 minutes.</p>
<p>Ce timeout peut être défini à l'aide de la propriété <a href="/docs/Rx/fr/API/SessionClass.html#idletimeout"><code>.idleTimeout</code></a> de l'objet <code>Session</code> (le timeout ne peut pas être inférieur à 60 minutes).</p>
<p>Lorsqu'une session Web évolutive est fermée, si la commande <a href="/docs/Rx/fr/API/SessionClass.html#session"><code>Session</code></a> est appelée par la suite :</p>
<ul>
<li>the <code>Session</code> object does not contain privileges (it is a Guest session)</li>
<li>la propriété <a href="/docs/Rx/fr/API/SessionClass.html#storage"><code>.storage</code></a> est vide</li>
<li>a new session cookie is associated to the session</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="privileges"></a><a href="#privileges" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Privileges</h2>
<p>Privileges can be associated to sessions. On the web server, you can provide specific access or features depending on the privileges of the session.</p>
<p>Vous pouvez attribuer des privilèges à l'aide de la fonction <a href="/docs/Rx/fr/API/SessionClass.html#setprivileges"><code>.setPrivileges()</code></a>. Dans votre code, vous pouvez vérifier les privilèges de la session pour autoriser ou refuser l'accès à l'aide de la fonction <a href="/docs/Rx/fr/API/SessionClass.html#hasprivilege"><code>.hasPrivilege()</code></a>. Par défaut, les nouvelles sessions n'ont aucun privilège : ce sont des sessions <strong>invité</strong> (la fonction <a href="/docs/Rx/fr/API/SessionClass.html#isguest"><code>.isGuest()</code></a> retourne true).</p>
<blockquote>
<p>Dans l'implémentation actuelle, seul le privilège &quot;WebAdmin&quot; est disponible.</p>
</blockquote>
<p>Exemple :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">If</span> (Session.<span class="hljs-function">hasPrivilege</span>(<span class="hljs-string">"WebAdmin"</span>))
    <span class="hljs-comment">//Access is granted, do nothing</span><span class="hljs-keyword">
Else</span>
    <span class="hljs-comment">//Display an authentication page</span><span class="hljs-keyword">
End if</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="exemple"></a><a href="#exemple" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h2>
<p>In a CRM application, each salesperson manages their own client portfolio. The datastore contains at least two linked dataclasses: Customers and SalesPersons (a salesperson has several customers).</p>
<p><img src="/docs/Rx/assets/en/WebServer/exampleSession.png" alt="alt-text"></p>
<p>We want a salesperson to authenticate, open a session on the web server, and have the top 3 customers be loaded in the session.</p>
<ol>
<li>We run this URL to open a session:</li>
</ol>
<pre><code class="hljs"><span class="hljs-symbol">http:</span><span class="hljs-comment">//localhost:8044/authenticate.shtml</span>
</code></pre>
<blockquote>
<p>Dans un environnement de production, il est nécessaire d'utiliser une <a href="/docs/Rx/fr/API/WebServerClass.html#httpsenabled">connexion HTTPS</a> pour éviter la circulation d'informations non chiffrées sur le réseau.</p>
</blockquote>
<ol start="2">
<li>The <code>authenticate.shtml</code> page is a form containing <em>userId</em> et <em>password</em> input fields and sending a 4DACTION POST action:</li>
</ol>
<pre><code class="hljs css language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">bgcolor</span>=<span class="hljs-string">"#ffffff"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">FORM</span> <span class="hljs-attr">ACTION</span>=<span class="hljs-string">"/4DACTION/authenticate"</span> <span class="hljs-attr">METHOD</span>=<span class="hljs-string">POST</span>&gt;</span>
    UserId: <span class="hljs-tag">&lt;<span class="hljs-name">INPUT</span> <span class="hljs-attr">TYPE</span>=<span class="hljs-string">TEXT</span> <span class="hljs-attr">NAME</span>=<span class="hljs-string">userId</span> <span class="hljs-attr">VALUE</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span>
    Password: <span class="hljs-tag">&lt;<span class="hljs-name">INPUT</span> <span class="hljs-attr">TYPE</span>=<span class="hljs-string">TEXT</span> <span class="hljs-attr">NAME</span>=<span class="hljs-string">password</span> <span class="hljs-attr">VALUE</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">INPUT</span> <span class="hljs-attr">TYPE</span>=<span class="hljs-string">SUBMIT</span> <span class="hljs-attr">NAME</span>=<span class="hljs-string">OK</span> <span class="hljs-attr">VALUE</span>=<span class="hljs-string">"Log In"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">FORM</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="/docs/Rx/assets/en/WebServer/authenticate.png" alt="alt-text"></p>
<ol start="3">
<li>The authenticate project method looks for the <em>userID</em> person and validates the password against the hashed value already stored in the <em>SalesPersons</em> table:</li>
</ol>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$indexUserId</span>; <span class="hljs-variable">$indexPassword</span>; <span class="hljs-variable">$userId </span>: Integer<span class="hljs-keyword">
var</span> <span class="hljs-variable">$password </span>: Text<span class="hljs-keyword">
var</span> <span class="hljs-variable">$userTop3</span>; <span class="hljs-variable">$sales</span>; <span class="hljs-variable">$info </span>: Object


<span class="hljs-function">ARRAY TEXT</span>(<span class="hljs-variable">$anames</span>; <span class="hljs-number">0</span>)
<span class="hljs-function">ARRAY TEXT</span>(<span class="hljs-variable">$avalues</span>; <span class="hljs-number">0</span>)

<span class="hljs-function">WEB GET VARIABLES</span>(<span class="hljs-variable">$anames</span>; <span class="hljs-variable">$avalues</span>)

<span class="hljs-variable">$indexUserId</span>:=<span class="hljs-function">Find in array</span>(<span class="hljs-variable">$anames</span>; <span class="hljs-string">"userId"</span>)
<span class="hljs-variable">$userId</span>:=<span class="hljs-function">Num</span>(<span class="hljs-variable">$avalues{</span><span class="hljs-variable">$indexUserId}</span>)

<span class="hljs-variable">$indexPassword</span>:=<span class="hljs-function">Find in array</span>(<span class="hljs-variable">$anames</span>; <span class="hljs-string">"password"</span>)
<span class="hljs-variable">$password</span>:=<span class="hljs-variable">$avalues{</span><span class="hljs-variable">$indexPassword}</span>

<span class="hljs-variable">$sales</span>:=ds.SalesPersons.<span class="hljs-function">query</span>(<span class="hljs-string">"userId = :1"</span>; <span class="hljs-variable">$userId</span>).<span class="hljs-function">first</span>()<span class="hljs-keyword">

If</span> (<span class="hljs-variable">$sales</span>#<span class="hljs-literal">Null</span>)<span class="hljs-keyword">
    If</span> (<span class="hljs-function">Verify password hash</span>(<span class="hljs-variable">$password</span>; <span class="hljs-variable">$sales</span>.password))
        <span class="hljs-variable">$info</span>:=<span class="hljs-function">New object</span>()
        <span class="hljs-variable">$info</span>.userName:=<span class="hljs-variable">$sales</span>.firstname+<span class="hljs-string">" "</span>+<span class="hljs-variable">$sales</span>.lastname
        Session.<span class="hljs-function">setPrivileges</span>(<span class="hljs-variable">$info</span>)<span class="hljs-keyword">
        Use</span> (Session.storage)<span class="hljs-keyword">
            If</span> (Session.storage.myTop3=<span class="hljs-literal">Null</span>)
                <span class="hljs-variable">$userTop3</span>:=<span class="hljs-variable">$sales</span>.customers.<span class="hljs-function">orderBy</span>(<span class="hljs-string">"totalPurchase desc"</span>).<span class="hljs-function">slice</span>(<span class="hljs-number">0</span>; <span class="hljs-number">3</span>)
                Session.storage.myTop3:=<span class="hljs-variable">$userTop3</span><span class="hljs-keyword">
            End if</span><span class="hljs-keyword">
        End use</span>
<span class="hljs-function">        WEB SEND HTTP REDIRECT</span>(<span class="hljs-string">"/authenticationOK.shtml"</span>)<span class="hljs-keyword">
    Else</span>
<span class="hljs-function">        WEB SEND TEXT</span>(<span class="hljs-string">"This password is wrong"</span>)<span class="hljs-keyword">
    End if</span><span class="hljs-keyword">
Else</span>
<span class="hljs-function">    WEB SEND TEXT</span>(<span class="hljs-string">"This userId is unknown"</span>)<span class="hljs-keyword">
End if</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/Rx/fr/WebServer/authentication.html"><span class="arrow-prev">← </span><span>Authentification</span></a><a class="docs-next button" href="/docs/Rx/fr/WebServer/preemptiveWeb.html"><span>Using preemptive web processes</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#activation-des-sessions">Activation des sessions</a></li><li><a href="#session-implementation">Session implementation</a><ul class="toc-headings"><li><a href="#mode-préemptif">Mode préemptif</a></li></ul></li><li><a href="#partage-dinformations">Partage d'informations</a></li><li><a href="#session-lifetime">Session lifetime</a></li><li><a href="#privileges">Privileges</a></li><li><a href="#exemple">Exemple</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/Rx/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:fr","version:19 R5"]}
              });
            </script></body></html>