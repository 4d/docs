<!DOCTYPE html><html lang="fr"><head><meta name="docsearch:version" content="19 R5"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>DataClass · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Une [dataclass](/docs/Rx/fr/ORDA/dsmapping.html#dataclass) fournit une interface objet à une table de la base de données. Toutes les dataclasses d&#x27;une application 4D sont disponibles en tant que propriété du [datastore](/docs/Rx/fr/ORDA/dsmapping.html#datastore) `ds` ."/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="DataClass · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/Rx/index.html"/><meta property="og:description" content="Une [dataclass](/docs/Rx/fr/ORDA/dsmapping.html#dataclass) fournit une interface objet à une table de la base de données. Toutes les dataclasses d&#x27;une application 4D sont disponibles en tant que propriété du [datastore](/docs/Rx/fr/ORDA/dsmapping.html#datastore) `ds` ."/><meta property="og:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><link rel="shortcut icon" href="/docs/Rx/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/Rx/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/Rx/js/code-blocks-buttons.js"></script><script src="/docs/Rx/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/Rx/css/main.css"/><script src="/docs/Rx/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/Rx/fr"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://developer.4d.com/docs" target="_self">v19 R6 BETA</a></li><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs/Rx" target="_self">v19 R5</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/Rx/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/Rx/en/API/DataClassClass.html">English</a></li><li><a href="/docs/Rx/ja/API/DataClassClass.html">日本語</a></li><li><a href="/docs/Rx/de/API/DataClassClass.html">Deutsch</a></li><li><a href="/docs/Rx/es/API/DataClassClass.html">Español</a></li><li><a href="/docs/Rx/pt/API/DataClassClass.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Classes API</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Gestion de projet<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/architecture.html">Architecture of a project</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/documentation.html">Documenter un projet</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/compiler.html">Compilation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts du langage 4D<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/about.html">À propos du Langage 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/quick-tour.html">Tour d&#x27;horizon</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/operators.html">Opérateurs</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/data-types.html">Types de données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/boolean.html">Booléen</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/date.html">Date</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/null-undefined.html">Null et Indefinie</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/number.html">Numérique (Réel, Entier, Entier long)</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/object.html">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/picture.html">Image</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/pointer.html">Pointeur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/string.html">Chaine</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/time.html">Heure</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/variables.html">Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/arrays.html">Tableaux</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/methods.html">Méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/parameters.html">Paramètres</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/shared.html">Objets et collections partagés</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/classes.html">Classes</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/control-flow.html">Conditions et boucles</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/branching.html">Structures conditionnelles</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/looping.html">Structures répétitives (ou &quot;boucles&quot;)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/error-handling.html">Gestion des erreurs</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/interpreted-compiled.html">Modes interprété et compilé</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/components.html">Composants</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/identifiers.html">Identifiants</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/overview.html">Que signifie ORDA ?</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/dsmapping.html">Objets Data Model</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/ordaClasses.html">Classes du modèle de données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/entities.html">Travailler avec des données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/datastores.html">Utiliser un datastore distant</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/glossary.html">Glossaire</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Classes API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/overview.html">Aperçu - API des classes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/BlobClass.html">Blob</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ClassClass.html">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/CollectionClass.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/CryptoKeyClass.html">CryptoKey</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/Rx/fr/API/DataClassClass.html">DataClass</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/DataClassAttributeClass.html">DataClassAttribute</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/DataStoreClass.html">DataStore</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EmailObjectClass.html">Email</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EntityClass.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EntitySelectionClass.html">EntitySelection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FileClass.html">File</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FolderClass.html">Folder</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FunctionClass.html">Formula</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/IMAPTransporterClass.html">IMAPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/MailAttachmentClass.html">MailAttachment</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/POP3TransporterClass.html">POP3Transporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SessionClass.html">Session</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SignalClass.html">Signal</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SMTPTransporterClass.html">SMTPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SystemWorkerClass.html">SystemWorker</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/WebServerClass.html">WebServer</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipArchiveClass.html">ZIPArchive</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipFileClass.html">ZIPFile</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipFolderClass.html">ZIPFolder</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Éditeur de code<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/code-editor/navigation.html">Navigation dropdown</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Débogage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/basics.html">Principes de base</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugger.html">Débogueur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/breakpoints.html">Points d&#x27;arrêt et points d&#x27;arrêt sur commande</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugging-remote.html">Débogage depuis des machines distantes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugLogFiles.html">Description des fichiers d&#x27;historique</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Transformation Tags<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Tags/tags.html">Balises de transformation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Settings<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/general.html">Page Général</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/interface.html">Page Interface</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/compiler.html">Page Compilateur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/database.html">Page Base de données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/backup.html">Page Sauvegarde</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/client-server.html">Page Client/Serveur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/web.html">Page Web</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/sql.html">Page SQL</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/php.html">Page PHP</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/security.html">Page sécurité</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/compatibility.html">Page de compatibilité</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Préférences<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/general.html">Page Général</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/structure.html">Page Structure</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/forms.html">Page Formulaires</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/methods.html">Page Méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/shortcuts.html">Page Raccourcis</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/Rx/docs/API/DataClassClass.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">DataClass</h1></header><article><div><span><p>Une <a href="/docs/Rx/fr/ORDA/dsmapping.html#dataclass">dataclass</a> fournit une interface objet à une table de la base de données. Toutes les dataclasses d'une application 4D sont disponibles en tant que propriété du <a href="/docs/Rx/fr/ORDA/dsmapping.html#datastore">datastore</a> <code>ds</code> .</p>
<h3><a class="anchor" aria-hidden="true" id="sommaire"></a><a href="#sommaire" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sommaire</h3>
<table>
<thead>
<tr><th></th></tr>
</thead>
<tbody>
<tr><td><a href="#attributename"><strong><em>.attributeName</em></strong> : DataClassAttribute</a><p>    objets disponibles directement en tant que propriétés</td></tr>
<tr><td><a href="#all"><strong>.all</strong> ( { <em>settings</em> : Object } ) : 4D.EntitySelection</a><p>    interroge le datastore pour trouver toutes les entités de la dataclass et les renvoie en tant qu&quot;entity selection</td></tr>
<tr><td><a href="#fromcollection"><strong>.fromCollection</strong>( <em>objectCol</em> : Collection { ; <em>settings</em> : Object } ) : 4D.EntitySelection</a><p>    modifie ou crée des entités dans la dataclass en utilisant la collection d'objets <em>objectCol</em> et retourne l'entity selection correspondante</td></tr>
<tr><td><a href="#get"><strong>.get</strong>( <em>primaryKey</em> : Integer { ; <em>settings</em> : Object } ) : 4D.Entity<br><strong>.get</strong>( <em>primaryKey</em> : Text { ; <em>settings</em> : Object } ) : 4D.Entity</a><p>    interroge la dataclass pour récupérer l'entité correspondant au paramètre <em>primaryKey</em></td></tr>
<tr><td><a href="#getdatastore"><strong>.getDataStore()</strong> : cs.DataStore</a><p>    retourne le datastore de la dataclass</td></tr>
<tr><td><a href="#getinfo"><strong>.getInfo()</strong> : Object </a><p>    retourne un objet qui fournit des informations sur la dataclass</td></tr>
<tr><td><a href="#new"><strong>.new()</strong> : 4D.Entity </a><p>    crée en mémoire et renvoie une nouvelle entité vide pour la dataclass</td></tr>
<tr><td><a href="#newselection"><strong>.newSelection</strong>( { <em>keepOrder</em> : Integer } ) : 4D.EntitySelection </a><p>    crée en mémoire une entity selection vide, non partageable, liée à la dataclass</td></tr>
<tr><td><a href="#query"><strong>.query</strong>( <em>queryString</em> : Text { ; <em>...value</em> : any } { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection <br><strong>.query</strong>( <em>formula</em> : Object { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection </a><p>    recherche les entités répondant aux critères de recherche spécifiés dans <em>queryString</em> ou <em>formula</em> et (optionnellement) dans <em>value</em>toutes les entités de la dataclass</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="attributename"></a><a href="#attributename" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.<em>attributeName</em></h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong><em>.attributeName</em></strong> : DataClassAttribute</p>
<h4><a class="anchor" aria-hidden="true" id="description"></a><a href="#description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>Les attributs des dataclasses sont des objets disponibles directement en tant que propriétés de ces classes.</p>
<p>Les objets renvoyés sont du type <a href="/docs/Rx/fr/API/DataClassAttributeClass.html"><code>DataClassAttribute</code></a>. Ces objets ont des propriétés que vous pouvez utiliser et lire pour obtenir des informations sur vos attributs de dataclass.</p>
<blockquote>
<p>Les objets de l'attribut Dataclass peuvent être modifiés, mais la structure sous-jacente de la base de données ne sera pas altérée.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="exemple-1"></a><a href="#exemple-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$salary</span>:=ds.Employee.salary <span class="hljs-comment">//retourne l'attribut salary dans la dataclass Employee</span>
<span class="hljs-variable">$compCity</span>:=ds.Company[<span class="hljs-string">"city"</span>] <span class="hljs-comment">//retourne l'attribut city dans la dataclass Company</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-2"></a><a href="#exemple-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 2</h4>
<p>Considérant la structure suivante d'une base :</p>
<p><img src="/docs/Rx/assets/en/API/dataclassAttribute.png" alt=""></p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$firstnameAtt</span>;<span class="hljs-variable">$employerAtt</span>;<span class="hljs-variable">$employeesAtt </span>: Object

 <span class="hljs-variable">$firstnameAtt</span>:=ds.Employee.firstname
  <span class="hljs-comment">//{name:firstname,kind:storage,fieldType:0,type:string,fieldNumber:2,indexed:true,</span>
  <span class="hljs-comment">//keyWordIndexed:false,autoFilled:false,mandatory:false,unique:false}</span>

 <span class="hljs-variable">$employerAtt</span>:=ds.Employee.employer
  <span class="hljs-comment">//{name:employer,kind:relatedEntity,relatedDataClass:Company,</span>
  <span class="hljs-comment">//fieldType:38,type:Company,inverseName:employees}</span>
  <span class="hljs-comment">//38=Is object</span>

 <span class="hljs-variable">$employeesAtt</span>:=ds.Company.employees
  <span class="hljs-comment">//{name:employees,kind:relatedEntities,relatedDataClass:Employee,</span>
  <span class="hljs-comment">//fieldType:42,type:EmployeeSelection,inverseName:employer}</span>
  <span class="hljs-comment">//42=Is collection</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-3"></a><a href="#exemple-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 3</h4>
<p>Considérant les propriétés de table suivantes :</p>
<p><img src="/docs/Rx/assets/en/API/dataclassAttribute2.png" alt=""></p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sequenceNumberAtt </span>: Object
 <span class="hljs-variable">$sequenceNumberAtt</span>=ds.Employee.sequenceNumber
  <span class="hljs-comment">//{name:sequenceNumber,kind:storage,fieldType:0,type:string,fieldNumber:13,</span>
  <span class="hljs-comment">//indexed:true,keyWordIndexed:false,autoFilled:true,mandatory:false,unique:true}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="all"></a><a href="#all" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.all()</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v17 R5</td><td>Prise en charge du paramètre <em>settings</em></td></tr>
<tr><td>v17</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.all</strong> ( { <em>settings</em> : Object } ) : 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Option de création : contexte</td></tr>
<tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Références vers toutes les entités de la dataclass</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-1"></a><a href="#description-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>La fonction <code>.all()</code> interroge le datastore pour trouver toutes les entités de la dataclass et les renvoie en tant qu&quot;entity selection.</p>
<p>Les entités sont renvoyées dans l'ordre par défaut, qui est initialement l'ordre dans lequel elles ont été créées. Notez cependant que, si des entités ont été supprimées et que de nouvelles entités ont été ajoutées, l'ordre par défaut ne reflète plus l'ordre de création.</p>
<p>Si aucune entité n'est trouvée, une entity selection vide est renvoyée.</p>
<p>Le mode lazy loading est appliqué.</p>
<p><strong>settings</strong></p>
<p>Dans le paramètre optionnel <em>settings</em>, vous pouvez passer un objet contenant des options supplémentaires. La propriété suivante est prise en charge :</p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>context</td><td>Text</td><td>Nom du contexte d'optimisation appliqué à l'entity selection. Ce contexte sera utilisé par le code qui manipule l'entity selection afin de bénéficier de l'optimisation. Cette fonctionnalité est <a href="/docs/Rx/fr/ORDA/entities.html#optimisation-client-server">conçue pour le traitement client/serveur ORDA</a>.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemple"></a><a href="#exemple" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$allEmp </span>: cs.EmployeeSelection
 <span class="hljs-variable">$allEmp</span>:=ds.Employee.<span class="hljs-function">all</span>()
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fromcollection"></a><a href="#fromcollection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.fromCollection()</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v17 R5</td><td>Prise en charge du paramètre <em>settings</em></td></tr>
<tr><td>v17</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.fromCollection</strong>( <em>objectCol</em> : Collection { ; <em>settings</em> : Object } ) : 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>objectCol</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Collection d'objets à faire correspondre à des entités</td></tr>
<tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Option de création : contexte</td></tr>
<tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection issue de la collection</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-2"></a><a href="#description-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>La fonction <code>.fromCollection()</code> modifie ou crée des entités dans la dataclass en utilisant la collection d'objets <em>objectCol</em> et retourne l'entity selection correspondante.</p>
<p>Dans le paramètre <em>objectCol</em> passez une collection d'objets destinée à créer ou à modifier des entités de la dataclass. Les noms des propriétés doivent correspondre à ceux des attributs de la dataclass. Si un nom de propriété n'existe pas dans la dataclass, il est ignoré. Si une valeur d'attribut n'est pas définie dans la collection pour une entité créée, l'attribut prend la valeur Null.</p>
<p>La correspondance entre les objets de la collection et les entités est effectuée au niveau des <strong>noms d'attributs</strong> et de leur <strong>type de données</strong>. Si une propriété d'objet a le même nom qu'un attribut d'entité mais que leurs types ne sont pas compatibles, l'attribut de l'entité ne reçoit pas de valeur.</p>
<p><strong>Mode création ou modification</strong></p>
<p>Pour chaque objet de <em>objectCol</em> :</p>
<ul>
<li>Si l'objet contient une propriété booléenne &quot;__NEW&quot; fixée à faux (ou ne contient pas de propriété booléenne &quot;__NEW&quot;), l'entité est modifiée ou créée avec les valeurs correspondantes des propriétés de l'objet. Aucune vérification spécifique n'est effectuée concernant la clé primaire :
<ul>
<li>Si la clé primaire est fournie et existe, l'entité est modifiée. Dans ce cas, la clé primaire peut être fournie telle quelle ou via la propriété &quot;__KEY&quot; (contenant la valeur de la propriété primaire).</li>
<li>Si la clé primaire est fournie (telle quelle) et n'existe pas, l'entité est créée</li>
<li>Si la clé primaire n'est pas fournie, l'entité est créée et la clé primaire est assignée selon les règles en vigueur de la base de données.</li>
</ul></li>
<li>si l'objet contient une propriété booléenne &quot;__NEW&quot; fixée à <strong>vrai</strong>, l'entité est créée avec les valeurs correspondantes des propriétés de l'objet. Une vérification est effectuée sur la clé primaire :
<ul>
<li>Si la clé primaire est fournie (telle quelle) et existe, une erreur est générée</li>
<li>Si la clé primaire est fournie (telle quelle) et n'existe pas, l'entité est créée</li>
<li>Si la clé primaire n'est pas fournie, l'entité est créée et la clé primaire est assignée selon les règles en vigueur de la base de données.</li>
</ul></li>
</ul>
<blockquote>
<p>Les objets imbriqués décrivant les entités relatives doivent contenir une propriété &quot;__KEY&quot; (contenant la valeur de la clé primaire de l'entité relative) ou la clé primaire de l'entité relative elle-même. L'utilisation de la propriété __KEY permet de ne pas dépendre du nom de l'attribut clé primaire.</p>
</blockquote>
<p><strong>Related entities</strong></p>
<p>Les objets de <em>objectCol</em> peuvent contenir un ou plusieurs objet(s) imbriqué(s) décrivant une ou plusieurs entité(s) relative(s), ce qui peut être utile pour créer ou modifier des relations entre les entités.</p>
<p>Les objets imbriqués décrivant les entités relatives doivent contenir une propriété &quot;__KEY&quot; (contenant la valeur de la clé primaire de l'entité relative) ou la clé primaire de l'entité relative elle-même. L'utilisation de la propriété __KEY permet de ne pas dépendre du nom de l'attribut clé primaire.</p>
<blockquote>
<p>Ce mécanisme ne permet pas de créer ou de modifier les entités liées.</p>
</blockquote>
<p><strong>Stamp</strong></p>
<p>Si une propriété __STAMP est fournie, une vérification est effectuée sur le stamp (marqueur interne) de l'entité dans le datastore et une erreur est retournée en cas d'invalidité (&quot;Le stamp ne correspond pas à celui de l'enregistrement# XX de la table XXXX&quot;). Pour plus d'informations, voir <a href="/docs/Rx/fr/ORDA/entities.html#verrouillage-d-une-entite">Verrouillage d'une entité</a>.</p>
<p><strong>settings</strong></p>
<p>Dans le paramètre optionnel <em>settings</em>, vous pouvez passer un objet contenant des options supplémentaires. La propriété suivante est prise en charge :</p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>context</td><td>Text</td><td>Nom du contexte d'optimisation appliqué à l'entity selection. Ce contexte sera utilisé par le code qui manipule l'entity selection afin de bénéficier de l'optimisation. Cette fonctionnalité est <a href="/docs/Rx/fr/ORDA/entities.html#optimisation-client-server">conçue pour le traitement client/serveur ORDA</a>.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemple-1-1"></a><a href="#exemple-1-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 1</h4>
<p>Nous souhaitons modifier une entité existante. La propriété __NEW n'est pas fixée, la clé primaire de l'employé est passée et existe :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">668</span> <span class="hljs-comment">//Clé primaire existante dans la dataclass Employee</span>
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Arthur"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"ID"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Clé primaire existante dans la dataclass liée Company</span>
  <span class="hljs-comment">// Nous modifions la Company de cet employé en lui assignant une autre clé primaire existante dans la dataclass liée Company</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-2-1"></a><a href="#exemple-2-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 2</h4>
<p>Nous souhaitons modifier une entité existante. La propriété __NEW n'est pas fournie, la clé primaire de l'employé est avec l'attribut __KEY et existe :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.__KEY:=<span class="hljs-number">1720</span> <span class="hljs-comment">//Clé primaire existante dans la dataclass Employee</span>
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"John"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Boorman"</span>
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"ID"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Clé primaire existante dans la dataclass liée Company</span>
  <span class="hljs-comment">// Nous modifions la Company de cet employé en lui assignant une autre clé primaire existante dans la dataclass relative Company</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-3-1"></a><a href="#exemple-3-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 3</h4>
<p>Création simple d'une entité à partir d'une collection :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Victor"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Hugo"</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-4"></a><a href="#exemple-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 4</h4>
<p>Nous souhaitons créer une entité. La propriété __NEW est à Vrai, la clé primaire de l'employé n'est pas fournie :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Mary"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"__KEY"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Clé primaire existante dans la dataclass liée Company</span>
 <span class="hljs-variable">$emp</span>.__NEW:=<span class="hljs-literal">True</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)






</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-5"></a><a href="#exemple-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 5</h4>
<p>Nous souhaitons créer une entité. La propriété __NEW n'est pas passée, la clé primaire de l'employé est fournie et n'existe pas :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">10000</span> <span class="hljs-comment">//clé primaire qui n'existe pas</span>
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Françoise"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Sagan"</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-6"></a><a href="#exemple-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 6</h4>
<p>Dans cet exemple, la première entité sera bien créée mais la seconde création échouera car les deux entités utilisent la même clé primaire :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp</span>; <span class="hljs-variable">$emp2 </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">10001</span> <span class="hljs-comment">// Clé primaire inexistante</span>
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Simone"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>
 <span class="hljs-variable">$emp</span>.__NEW:=<span class="hljs-literal">True</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)

 <span class="hljs-variable">$emp2</span>:=New object
 <span class="hljs-variable">$emp2</span>.ID:=<span class="hljs-number">10001</span> <span class="hljs-comment">// ERREUR clé primaire identique</span>
 <span class="hljs-variable">$emp2</span>.firstName:=<span class="hljs-string">"Marc"</span>
 <span class="hljs-variable">$emp2</span>.lastName:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$emp2</span>.__NEW:=<span class="hljs-literal">True</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp2</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
  <span class="hljs-comment">//la première entité est créée</span>
  <span class="hljs-comment">//erreur clé dupliquée pour la seconde</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="voir-aussi"></a><a href="#voir-aussi" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Voir aussi</h4>
<p><a href="/docs/Rx/fr/API/EntitySelectionClass.html#tocollection"><strong>.toCollection()</strong></a></p>
<h2><a class="anchor" aria-hidden="true" id="get"></a><a href="#get" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.get()</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.get</strong>( <em>primaryKey</em> : Integer { ; <em>settings</em> : Object } ) : 4D.Entity<br><strong>.get</strong>( <em>primaryKey</em> : Text { ; <em>settings</em> : Object } ) : 4D.Entity</p>
<table>
<thead>
<tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>primaryKey</td><td>Integer OR Text</td><td style="text-align:center">-&gt;</td><td>Valeur de la clé primaire de l'entité à récupérer</td></tr>
<tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Option de création : contexte</td></tr>
<tr><td>Résultat</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Entité correspondant à la clé primaire indiquée</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-3"></a><a href="#description-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>La fonction <code>.get()</code> interroge la dataclass pour récupérer l'entité correspondant au paramètre <em>primaryKey</em>.</p>
<p>Dans <em>primaryKey</em>, passez la valeur de clé primaire de l'entité à récupérer. Le type de valeur doit correspondre au type de clé primaire définie dans le datastore (entier long ou texte). Vous pouvez également vous assurer que la valeur de la clé primaire est toujours renvoyée en tant que texte en utilisant la fonction <a href="/docs/Rx/fr/API/EntityClass.html#getkey"><code>.getKey()</code></a> avec le paramètre <code>dk key as string</code>.</p>
<p>Si aucune entité avec <em>primaryKey</em> n'est trouvée, une entité <strong>Null</strong> est retournée.</p>
<p>Le chargement différé (lazy loading) est appliqué, ce qui signifie que les données associées sont chargées à partir du disque uniquement lorsque cela est nécessaire.</p>
<p><strong>settings</strong></p>
<p>Dans le paramètre optionnel <em>settings</em>, vous pouvez passer un objet contenant des options supplémentaires. La propriété suivante est prise en charge :</p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>context</td><td>Text</td><td>Nom du contexte d'optimisation appliqué à l'entité. Ce contexte sera utilisé par le code qui manipule l'entité afin de bénéficier de l'optimisation. Cette fonctionnalité est <a href="/docs/Rx/fr/ORDA/entities.html#optimisation-client-server">conçue pour le traitement client/serveur ORDA</a>.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemple-1-2"></a><a href="#exemple-1-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmployeeEntity<span class="hljs-keyword">  
 var</span> <span class="hljs-variable">$entity2 </span>: cs.InvoiceEntity
 <span class="hljs-variable">$entity</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">167</span>) <span class="hljs-comment">// retourne l'entité dont la valeur de clé primaire est 167</span>
 <span class="hljs-variable">$entity2</span>:=ds.Invoice.<span class="hljs-function">get</span>(<span class="hljs-string">"DGGX20030"</span>) <span class="hljs-comment">// retourne l'entité dont la valeur de clé primaire est "DGGX20030"</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-2-2"></a><a href="#exemple-2-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 2</h4>
<p>Cet exemple illustre l'utilisation de la propriété <em>context</em> :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$e1</span>; <span class="hljs-variable">$e2</span>; <span class="hljs-variable">$e3</span>; <span class="hljs-variable">$e4 </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$settings</span>; <span class="hljs-variable">$settings2 </span>: Object

 <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"detail"</span>)
 <span class="hljs-variable">$settings2</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"summary"</span>)

 <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>;<span class="hljs-variable">$settings</span>)
<span class="hljs-function"> completeAllData</span>(<span class="hljs-variable">$e1</span>) <span class="hljs-comment">// Dans la méthode completeAllData, une optimisation est lancée et associée au contexte "detail"</span>

 <span class="hljs-variable">$e2</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">2</span>;<span class="hljs-variable">$settings</span>)
<span class="hljs-function"> completeAllData</span>(<span class="hljs-variable">$e2</span>) <span class="hljs-comment">// Dans la méthode completeAllData, l'optimisation associée au contexte "detail" est appliquée</span>

 <span class="hljs-variable">$e3</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">3</span>;<span class="hljs-variable">$settings2</span>)
<span class="hljs-function"> completeSummary</span>(<span class="hljs-variable">$e3</span>) <span class="hljs-comment">//Dans la méthode completeSummary, une optimisation est lancée et associée au contexte "summary"</span>

 <span class="hljs-variable">$e4</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">4</span>;<span class="hljs-variable">$settings2</span>)
<span class="hljs-function"> completeSummary</span>(<span class="hljs-variable">$e4</span>) <span class="hljs-comment">//Dans la méthode completeSummary, l'optimisation associée au contexte "summary" est appliquée</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getdatastore"></a><a href="#getdatastore" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getDataStore()</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v17 R5</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getDataStore()</strong> : cs.DataStore</p>
<table>
<thead>
<tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Résultat</td><td>cs.DataStore</td><td style="text-align:center">&lt;-</td><td>Datastore de la dataclass</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-4"></a><a href="#description-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>La fonction <code>.getDataStore()</code> retourne le datastore de la dataclass.</p>
<p>Le datastore peut être :</p>
<ul>
<li>le datastore principal, retourné par la commande <code>ds</code>.</li>
<li>un datastore distant, ouvert à l'aide de la commande <code>Open datastore</code>.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="exemple-7"></a><a href="#exemple-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<p>La méthode projet <strong><em>SearchDuplicate</em></strong> recherche des valeurs dupliquées dans une dataclass.</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$pet </span>: cs.CatsEntity
 <span class="hljs-variable">$pet</span>:=ds.Cats.<span class="hljs-function">all</span>().<span class="hljs-function">first</span>() <span class="hljs-comment">//lire une entité</span>
<span class="hljs-function"> SearchDuplicate</span>(<span class="hljs-variable">$pet</span>;<span class="hljs-string">"Dogs"</span>)
</code></pre>
<pre><code class="hljs css language-4d">  <span class="hljs-comment">// SearchDuplicate method</span>
  <span class="hljs-comment">// SearchDuplicate(entity_to_search;dataclass_name)</span>

 #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$pet </span>: Object ; <span class="hljs-variable">$dataClassName </span>: Text)<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$dataStore</span>; <span class="hljs-variable">$duplicates </span>: Object  

 <span class="hljs-variable">$dataStore</span>:=<span class="hljs-variable">$pet</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getDataStore</span>()
 <span class="hljs-variable">$duplicates</span>:=<span class="hljs-variable">$dataStore</span>[<span class="hljs-variable">$dataClassName</span>].<span class="hljs-function">query</span>(<span class="hljs-string">"name=:1"</span>;<span class="hljs-variable">$pet</span>.name)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getinfo"></a><a href="#getinfo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getInfo()</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v19 R3</td><td>Added exposed property</td></tr>
<tr><td>v17 R5</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getInfo()</strong> : Object</p>
<table>
<thead>
<tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Résultat</td><td>Object</td><td>&lt;-</td><td>Informations sur la dataclass</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-5"></a><a href="#description-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>La fonction <code>.getInfo()</code> retourne un objet qui fournit des informations sur la dataclass. Cette fonction est utile pour l'écriture de code générique.</p>
<p><strong>Objet retourné</strong></p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>exposed</td><td>Booléen</td><td>Vrai si la dataclass est exposée en REST</td></tr>
<tr><td>name</td><td>Text</td><td>Nom de la dataclass</td></tr>
<tr><td>primaryKey</td><td>Text</td><td>Nom de la clé primaire de la dataclass</td></tr>
<tr><td>tableNumber</td><td>Integer</td><td>Numéro interne de la table 4D</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemple-1-3"></a><a href="#exemple-1-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 1</h4>
<pre><code class="hljs css language-4d"> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$entity </span>: Object)<span class="hljs-keyword">  
 var</span> <span class="hljs-variable">$status </span>: Object

<span class="hljs-function"> computeEmployeeNumber</span>(<span class="hljs-variable">$entity</span>) <span class="hljs-comment">//Exécuter des actions sur une entité</span>

 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
<span class="hljs-function"> if</span>(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Enregistrement mis à jour dans la table "</span>+<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getInfo</span>().name)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-2-3"></a><a href="#exemple-2-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 2</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$es </span>: cs.ClientsSelection

 <span class="hljs-variable">$settings</span>:=New object
 <span class="hljs-variable">$settings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"receivedIds"</span>;<span class="hljs-function">getIds</span>())
 <span class="hljs-variable">$settings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"pk"</span>;ds.Clients.<span class="hljs-function">getInfo</span>().primaryKey)
 <span class="hljs-variable">$es</span>:=ds.Clients.<span class="hljs-function">query</span>(<span class="hljs-string">":pk in :receivedIds"</span>;<span class="hljs-variable">$settings</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-3-2"></a><a href="#exemple-3-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 3</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$pk </span>: Text<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$dataClassAttribute </span>: Object

 <span class="hljs-variable">$pk</span>:=ds.Employee.<span class="hljs-function">getInfo</span>().primaryKey
 <span class="hljs-variable">$dataClassAttribute</span>:=ds.Employee[<span class="hljs-variable">$pk</span>] <span class="hljs-comment">// Le cas échéant, l'attribut correspondant à la clé primaire est accessible</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="voir-aussi-1"></a><a href="#voir-aussi-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Voir aussi</h4>
<p><a href="/docs/Rx/fr/API/DataClassAttributeClass.html#exposed">DataClassAttribute.exposed</a></p>
<h2><a class="anchor" aria-hidden="true" id="new"></a><a href="#new" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.new()</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.new()</strong> : 4D.Entity</p>
<table>
<thead>
<tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Résultat</td><td>4D.Entity</td><td>&lt;-</td><td>Nouvelle entité correspondant à la dataclass</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-6"></a><a href="#description-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>La fonction <code>.new()</code> crée en mémoire et renvoie une nouvelle entité vide pour la dataclass.</p>
<p>L'objet entité est créé en mémoire et n'est pas sauvegardé dans la base de données tant que la fonction <a href="/docs/Rx/fr/API/EntityClass.html#save"><code>.save( )</code></a> n'est pas appelée. Si l'entité est supprimée avant d'être sauvegardée, elle ne peut pas être récupérée.</p>
<p><strong>4D Server</strong>: En client-serveur, si la clé primaire de la table correspondante est auto-incrémentée, elle sera calculée au moment de la sauvegarde de l'entité sur le serveur.</p>
<p>Tous les attributs de l'entité sont initialisés avec la valeur <strong>null</strong>.</p>
<blockquote>
<p>Les attributs peuvent être initialisés à des valeurs par défaut si l'option <strong>Traduire les NULL en valeurs vides</strong> est sélectionnée au niveau de la structure de la base 4D.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="exemple-8"></a><a href="#exemple-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<p>Cet exemple crée une nouvelle entité dans la dataclass &quot;Log&quot; et enregistre les informations dans l'attribut &quot;info&quot; :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.LogEntity
 <span class="hljs-variable">$entity</span>:=ds.Log.<span class="hljs-function">new</span>() <span class="hljs-comment">//crée une référence</span>
 <span class="hljs-variable">$entity</span>.info:=<span class="hljs-string">"New entry"</span> <span class="hljs-comment">//valorise l'attribut info</span>
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//sauvegarde l'entité</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="newselection"></a><a href="#newselection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.newSelection()</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.newSelection</strong>( { <em>keepOrder</em> : Integer } ) : 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>keepOrder</td><td>Integer</td><td>-&gt;</td><td><code>dk keep ordered</code> : crée une entity selection triée,<br><code>dk non ordered</code> : crée une entity selection non triée (défaut si omis)</td></tr>
<tr><td>Résultat</td><td>4D.EntitySelection</td><td>&lt;-</td><td>Nouvelle entity selection vide liée à la dataclass</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-7"></a><a href="#description-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>La fonction <code>.newSelection()</code> crée en mémoire une entity selection vide, non partageable, liée à la dataclass.</p>
<blockquote>
<p>Pour plus d'informations sur les sélections d'entités non partageables, veuillez vous reporter à <a href="/docs/Rx/fr/ORDA/entities.html#shareable-or-non-shareable-entity-selections">cette section</a>.</p>
</blockquote>
<p>Si vous voulez créer une entity selection triée, passez le sélecteur <code>dk keep ordered</code> dans le paramètre <em>keepOrder</em>. Par défaut, si vous omettez ce paramètre ou si vous passez le sélecteur <code>dk non ordered</code> la fonction crée une entity selection non triée. Les entity selections non triées sont plus rapides, mais vous ne pouvez pas vous fier aux positions des entités. Pour plus d'informations, voir <a href="/docs/Rx/fr/ORDA/dsmapping.html#entity-selections-triees-vs-entity-selections-non-triees">Entity selections triées vs Entity selections non-triées</a>.</p>
<p>Une fois créée, l'entity selection ne contient aucune entité (<code>mySelection.length</code> retourne 0). Cette fonction vous permet de construire progressivement des entity selections en effectuant des appels à la fonction <a href="/docs/Rx/fr/API/EntitySelectionClass.html#add"><code>add()</code></a>.</p>
<h4><a class="anchor" aria-hidden="true" id="exemple-9"></a><a href="#exemple-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$USelection</span>; <span class="hljs-variable">$OSelection </span>: cs.EmployeeSelection
 <span class="hljs-variable">$USelection</span>:=ds.Employee.<span class="hljs-function">newSelection</span>() <span class="hljs-comment">//crée une entity selection non triée vide</span>
 <span class="hljs-variable">$OSelection</span>:=ds.Employee.<span class="hljs-function">newSelection</span>(dk keep ordered) <span class="hljs-comment">//crée une entity selection triée vide</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="query"></a><a href="#query" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.query()</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v17 R6</td><td>Prise en charge des paramètres Formula</td></tr>
<tr><td>v17 R5</td><td>Prise en charge des placeholders pour les valeurs</td></tr>
<tr><td>v17</td><td>Ajout</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.query</strong>( <em>queryString</em> : Text { ; <em>...value</em> : any } { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection <br><strong>.query</strong>( <em>formula</em> : Object { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>queryString</td><td>Text</td><td>-&gt;</td><td>Critères de recherche en texte</td></tr>
<tr><td>formula</td><td>Object</td><td>-&gt;</td><td>Critères de recherche en objet formule</td></tr>
<tr><td>value</td><td>any</td><td>-&gt;</td><td>Valeur(s) à utiliser comme placeholder(s)</td></tr>
<tr><td>querySettings</td><td>Object</td><td>-&gt;</td><td>Options de recherche : parameters, attributes, args, allowFormulas, context, queryPath, queryPlan</td></tr>
<tr><td>Résultat</td><td>4D.EntitySelection</td><td>&lt;-</td><td>Nouvelle entity selection constituée des entités de la dataclass correspondant au(x) critère(s) de recherche fournis dans <em>queryString</em> ou <em>formula</em></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-8"></a><a href="#description-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>La fonction <code>.query()</code> recherche les entités répondant aux critères de recherche spécifiés dans <em>queryString</em> ou <em>formula</em> et (optionnellement) dans <em>value</em>toutes les entités de la dataclass, et retourne un nouvel objet de type <code>EntitySelection</code> contenant toutes les entités trouvées. Le mode lazy loading est appliqué.</p>
<p>Si aucune entité correspondante n'est trouvée, une <code>EntitySelection</code> vide est retournée.</p>
<p><strong>Paramètre queryString</strong></p>
<p>Le paramètre <em>queryString</em> doit respecter la syntaxe suivante :</p>
<pre><code class="hljs css language-4d">attributePath|formula comparator value   
    {logicalOperator attributePath|formula comparator value}   
    {order by attributePath {desc | asc}}
</code></pre>
<p>où :</p>
<ul>
<li><strong>attributePath</strong> : Chemin de l'attribut sur lequel vous souhaitez exécuter la recherche. Ce paramètre peut contenir un nom simple (par exemple &quot;pays&quot;) ou un chemin d'attribut valide (par exemple &quot;pays.nom&quot;). Dans le cas d'un chemin d'attribut de type <code>Collection</code>, la notation [ ] est utilisée pour designer toutes les occurrences (par exemple &quot;enfants[ ].age&quot;). Vous pouvez également utiliser <strong>placeholder</strong> (voir ci-dessous).</li>
</ul>
<blockquote>
<p>Vous ne pouvez pas utiliser directement des attributs dont les noms contiennent des caractères spéciaux tels que &quot;.&quot;, &quot;[ ]&quot;, ou &quot;=&quot;, &quot;&gt;&quot;, &quot;#&quot;..., car ils ne seront pas correctement évalués dans la chaîne de recherche. Si vous souhaitez rechercher ces attributs, vous devez utiliser des placeholders, qui permettent d'utiliser un ensemble de caractères plus étendu dans les chemins d'attribut (voir * <strong>Utiliser des placeholders</strong> *ci-dessous).</p>
</blockquote>
<ul>
<li><p><strong>formula</strong> : Une formule valide passée en <code>Text</code> ou en <code>Object</code>. La formule sera évaluée pour chaque entité traitée et doit retourner une valeur booléenne. Dans la formule, l'entité est disponible via l'objet <code>This</code>.</p>
<ul>
<li><strong>Text</strong> : la chaine de formule doit être précédée de la déclaration <code>eval()</code>, afin que l'analyseur de requêtes évalue l'expression correctement. Par exemple : <em>&quot;eval(length(This.lastname) &gt;=30)&quot;</em></li>
<li><strong>Object</strong>: l'<a href="/docs/Rx/fr/API/FunctionClass.html">objet formule</a> est passé en tant que <strong>placeholder</strong> (voir ci-dessous). La formule doit avoir été créée à l'aide des commandes <a href="/docs/Rx/fr/API/FunctionClass.html#formula"><code>Formula</code></a> ou <a href="/docs/Rx/fr/API/FunctionClass.html#formula-from-string"><code>Formula from string</code></a>.</li>
</ul></li>
</ul>
<blockquote>
<ul>
<li>N'oubliez pas que les formules de 4D prennent uniquement en charge les symboles <code>&amp;</code> et <code>|</code> comme opérateurs logiques.</li>
<li>Si la formule n'est pas le seul critère de recherche, le système d'optimisation des requêtes pourra prioriser le traitement d'autres critères (ex : attributs indexés) et ainsi, la formule sera évaluée uniquement pour un sous-ensemble d'entités.</li>
</ul>
</blockquote>
<pre><code class="hljs">Les formules contenues dans les requêtes peuvent recevoir des paramètres via $1. Ce point est détaillé dans le paragraphe **Paramètre formula** ci-dessous.
</code></pre>
<blockquote>
<ul>
<li>Vous pouvez également passer directement un paramètre <code>formula</code> au lieu d'un paramètre <code>queryString</code> (recommandé lorsque les formules sont plus complexes). Voir le paragraphe <strong>Paramètre formula</strong> ci-dessous.</li>
<li>Pour des raisons de sécurité, il est possible de désactiver les appels de formules dans les fonctions <code>query()</code>. Voir la description du paramètre <code>querySettings</code>.</li>
</ul>
</blockquote>
<ul>
<li><p><strong>comparator</strong> : symbole d'opérateur utilisé pour comparer <em>attributePath</em> et <em>value</em>. Les symboles suivants sont pris en charge :</p>
<table>
<thead>
<tr><th>Comparaison</th><th>Symbole(s)</th><th>Commentaire</th></tr>
</thead>
<tbody>
<tr><td>Egal à</td><td>=, ==</td><td>Retourne les données correspondantes, prend en charge le joker de recherche (@), ne tient pas compte de la casse et est non diacritique.</td></tr>
<tr><td></td><td>===, IS</td><td>Retourne les données correspondantes, considère le @ comme un caractère standard, ne tient pas compte de la casse et est non diacritique</td></tr>
<tr><td>Différent de</td><td>#, !=</td><td>Prend en charge le joker de recherche (@)</td></tr>
<tr><td></td><td>!==, IS NOT</td><td>Considère le @ comme un caractère standard</td></tr>
<tr><td>Inférieur à</td><td>&lt;</td><td></td></tr>
<tr><td>Supérieur à</td><td>&gt;</td><td></td></tr>
<tr><td>Inférieur ou égal à</td><td>&lt;=</td><td></td></tr>
<tr><td>Supérieur ou égal à</td><td>&gt;=</td><td></td></tr>
<tr><td>Inclus parmi</td><td>IN</td><td>Retourne les données égales à au moins une des valeurs d'une collection ou d'un ensemble de valeurs, prend en charge le joker de recherche (@)</td></tr>
<tr><td>Condition Not appliquée à une assertion</td><td>NOT</td><td>Les parenthèses sont obligatoires lorsque NOT est utilisé devant une assertion contenant plusieurs opérateurs</td></tr>
<tr><td>Contient mot-clé</td><td>%</td><td>Les mots-clés peuvent être utilisés avec les attributs de type texte ou image</td></tr>
</tbody>
</table>
</li>
<li><p><strong>value</strong> : valeur à comparer à la valeur courante de l'attribut de chaque entité de la sélection ou élément de la collection. Peut être un <strong>placeholder</strong> (voir <strong>Utiliser des placeholders</strong> ci-dessous) ou toute expression correspondant à la propriété du type de donnée.<p><p> Lorsque vous utilisez une valeur constante, les règles suivantes doivent être respectées :</p>
<ul>
<li>Les valeurs constantes de type <strong>texte</strong> peuvent être passées avec ou sans guillemets (voir <strong>Utilisation des guillemets</strong> ci-dessous). Pour rechercher une chaîne dans une chaîne (recherche de type &quot;contient&quot;), utilisez le symbole joker (@) dans valeur pour isoler la chaîne à chercher, comme dans cet exemple : &quot;@Smith@&quot;. Les mots-clés suivants sont interdits pour des constantes de type texte : true, false.</li>
<li>Valeurs constantes de type<strong>booléen</strong>: <strong>true</strong> or <strong>false</strong> (sensible à la casse).</li>
<li>Valeurs constantes de type <strong>numérique</strong> : les décimales doivent être séparées par un '.' Valeurs constantes de type date: format &quot;YYYY-MM-DD&quot;</li>
<li>Constantes <strong>null</strong> : en utilisant le mot-clé &quot;null&quot;, la recherche trouvera les propriétés ayant la valeur <strong>null</strong> et <strong>undefined</strong>.</li>
<li>Dans le cas d'une recherche avec un comparateur IN, value doit être une collection, ou des valeurs du même type que les données du chemin d'attribut, fournies entre [ ] et séparées par des virgules (pour les chaînes, les caractères &quot; doivent être échappés avec des &quot;&quot;).</li>
</ul></li>
<li><p><strong>logicalOperator</strong> : utilisé pour relier des conditions multiples dans la recherche (optionnel). Vous pouvez utiliser un des opérateurs logiques suivants (le nom ou le symbole peut être passé) :</p>
<table>
<thead>
<tr><th>Conjonction</th><th>Symbole(s)</th></tr>
</thead>
<tbody>
<tr><td>AND</td><td>&amp;, &amp;&amp;, and</td></tr>
<tr><td>OR</td><td>|,||, or</td></tr>
</tbody>
</table>
</li>
<li><p><strong>order by attributePath</strong> : vous pouvez inclure une déclaration order by <em>attributePath</em> dans la requête afin que les données résultantes soient triées selon cette déclaration. Vous pouvez utiliser plusieurs tris par déclaration, en les séparant par des virgules (e.g., order by <em>attributePath1</em> desc, <em>attributePath2</em> asc). Par défaut, le tri est par ordre croissant. Passez 'desc' pour définir un tri par ordre décroissant et 'asc' pour définir un tri par ordre croissant.</p></li>
</ul>
<blockquote>
<p>*Si vous utilisez cette déclaration, l'entity selection retournée est triée (pour plus d'informations, veuillez consulter <a href="/docs/Rx/fr/ORDA/dsmapping.html#entity-selections-triees-vs-entity-selections-non-triees">Entity selections triées vs Entity selection non triées</a>).</p>
</blockquote>
<p><strong>Utilisation des guillemets</strong></p>
<p>Lorsque vous utilisez des guillemets dans les recherches, vous devez utiliser des apostrophes ' ' à l'intérieur des requêtes et des guillemets &quot; &quot; pour encadrer la recherche complète, sinon une erreur est générée. Par exemple :</p>
<pre><code class="hljs css language-4d"><span class="hljs-string">"employee.name = 'smith' AND employee.firstname = 'john'"</span>
</code></pre>
<blockquote>
<p>Les guillemets simples (') ne sont pas pris en charge dans les valeurs recherchées car ils casseraient la chaîne de recherche. Par exemple, &quot;comp.name = 'John's pizza' &quot; génèrera une erreur. Si vous devez rechercher des valeurs contenant des guillemets simples, il est nécessaire d'utiliser des placeholders (voir ci-dessous).</p>
</blockquote>
<p><strong>Utilisation des parenthèses</strong></p>
<p>Vous pouvez utiliser des parenthèses dans la recherche afin de prioriser les calculs. Par exemple, vous pouvez organiser une recherche de la manière suivante :</p>
<pre><code class="hljs css language-4d"><span class="hljs-string">"(employee.age &gt;= 30 OR employee.age &lt;= 65) AND (employee.salary &lt;= 10000 OR employee.status = 'Manager')"</span>
</code></pre>
<p><strong>Utilisation des placeholders</strong></p>
<p>4D vous permet d'utiliser des placeholders pour les arguments <em>attributePath</em>, <em>formula</em> et <em>value</em> dans le paramètre <em>queryString</em>. Un placeholder est un paramètre que vous insérez dans des chaines de recherche et qui est remplacé par une autre valeur au moment où la chaîne de recherche est évaluée. La valeur des placeholders est évaluée une seule fois, au début de la requête ; elle n'est pas évaluée pour chaque élément.</p>
<p>Il existe deux types de placeholders : les <strong>placeholders indexés</strong> et les <strong>placeholders nommés</strong> :</p>
<table>
<thead>
<tr><th>-</th><th>Placeholders indexés</th><th>Placeholders nommés</th></tr>
</thead>
<tbody>
<tr><td>Définition</td><td>Les paramètres sont insérés sous la forme :paramIndex (par exemple :1, :2...) dans queryString et leurs valeurs sont fournies par la séquence de paramètre(s) value. Vous pouvez utiliser jusqu'à 128 paramètres value</td><td>Les paramètres sont insérés sous la forme :paramName (par exemple :myparam) et leurs valeurs sont fournies dans les objets attributes et/ou parameters dans le paramètre querySettings</td></tr>
<tr><td>Exemple</td><td>$r:=class.query(&quot;:1=:2&quot;;&quot;city&quot;;&quot;Chicago&quot;)</td><td>$o.attributes:=New object(&quot;att&quot;;&quot;city&quot;)<br> $o.parameters:=New object(&quot;name&quot;;&quot;Chicago&quot;)<br> $r:=class.query(&quot;:att=:name&quot;;$o)</td></tr>
</tbody>
</table>
<p>Vous pouvez combiner tous les types d'arguments dans <em>queryString</em>. Une <em>queryString</em> peut contenir, pour les paramètres <em>attributePath</em>, <em>formula</em> et <em>value</em> :</p>
<ul>
<li>des valeurs directes (pas de placeholders)</li>
<li>des placeholders indexés et/ou nommés.</li>
</ul>
<p><strong>Utiliser des placeholders dans les recherches est recommandé</strong> pour les raisons suivantes :</p>
<ol>
<li><p>Cela empêche l'injection de code malveillant : si vous utilisez dans la chaîne de recherche des variables dont le contenu provient directement de la saisie de l'utilisateur, celui-ci pourrait modifier les conditions de recherche en saisissant des arguments de recherche supplémentaires. Par exemple, imaginez une chaîne de recherche du type :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$vquery</span>:=<span class="hljs-string">"status = 'public' &amp; name = "</span>+myname <span class="hljs-comment">//l'utilisateur saisit son nom</span>
 <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-variable">$vquery</span>)
</code></pre>
<p>Cette recherche semble sécurisée puisque les données non publiques sont filtrées. Cependant, si l'utilisateur saisit dans la zone <em>myname</em> une chaîne du type <em>&quot;smith OR status='private'</em>, la chaîne de recherche sera modifiée à l'étape de l'interprétation et pourra retourner des données privées.</p>
<p>Lorsque vous utilisez des placeholders, le contournement des options de sécurité n'est pas possible :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"status='public' &amp; name=:1"</span>;myname)
</code></pre>
<p>Dans ce cas, si l'utilisateur saisit <em>smith OR status='private'</em> dans la zone <em>myname</em>, cela ne sera pas interprété dans la chaîne de recherche, mais uniquement passé en tant que valeur. La recherche d'une personne nommée &quot;smith OR status='private&quot;' échouera simplement.</p></li>
<li><p>Cela résout les questions liées au formatage des valeurs ou des caractères, notamment lorsque vous gérez des paramètres <em>attributePath</em> et <em>value</em> qui peuvent contenir des caractères non-alphanumériques tels que &quot;.&quot;, &quot;[&quot;...</p></li>
<li><p>Cela permet l'utilisation de variables ou d'expressions dans les arguments de recherche. Voici quelques exemples :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"address.city = :1 &amp; name =:2"</span>;<span class="hljs-variable">$city</span>;<span class="hljs-variable">$myVar</span>+<span class="hljs-string">"@"</span>)
<span class="hljs-variable">$result2</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"company.name = :1"</span>;<span class="hljs-string">"John's Pizzas"</span>)
</code></pre></li>
</ol>
<p><strong>Recherche de valeurs null</strong></p>
<p>Lorsque vous recherchez les valeurs null, vous ne pouvez pas utiliser la syntaxe placeholder car le moteur de recherche considère la valeur null comme une valeur de comparaison invalide. Par exemple, si vous exécutez la recherche suivante :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$vSingles</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"spouse = :1"</span>;<span class="hljs-literal">Null</span>) <span class="hljs-comment">// ne fonctionnera PAS</span>
</code></pre>
<p>Vous n'obtiendrez pas le résultat souhaité car la valeur null sera évaluée par 4D comme une erreur résultant de l'évaluation du paramètre (pouvant être, par exemple, un attribut provenant d'une autre recherche). Pour ce type de recherches, vous devez utiliser la syntaxe de recherche directe :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$vSingles</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"spouse = null"</span>) <span class="hljs-comment">//syntaxe valide</span>
</code></pre>
<p><strong>Relier arguments de recherche et attributs de collection</strong></p>
<p>Lorsque vous effectuez une recherche dans des collections au sein d'attributs objet à l'aide de plusieurs arguments de requête reliés par l'opérateur AND, vous souhaiterez éventuellement vous assurer que seules les entités contenant des éléments correspondant à tous les arguments soient retournées, et non les entités où des arguments peuvent être trouvés dans différents éléments. Pour ce faire, vous devez relier les arguments de requête aux éléments de collection, de sorte que seuls les éléments uniques contenant des arguments reliés soient retournés.</p>
<p>Par exemple, avec les deux entités suivantes :</p>
<pre><code class="hljs">Entity <span class="hljs-number">1</span>:
ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.name</span>: <span class="hljs-string">"martin"</span>
ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.places</span>: 
    { <span class="hljs-string">"locations"</span> : [ {
                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"home"</span>,
                <span class="hljs-string">"city"</span>:<span class="hljs-string">"paris"</span> 
            } ] }

Entity <span class="hljs-number">2</span>:
ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.name</span>: <span class="hljs-string">"smith"</span>
ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.places</span>: 
    { <span class="hljs-string">"locations"</span> : [ {
                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"home"</span>,
                <span class="hljs-string">"city"</span>:<span class="hljs-string">"lyon"</span> 
            } , {
                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"office"</span>,
                <span class="hljs-string">"city"</span>:<span class="hljs-string">"paris"</span> 
            } ] }
</code></pre>
<p>Vous souhaitez trouver des personnes dont le type d'emplacement est &quot;home&quot; dans la ville de &quot;paris&quot;. Si vous écrivez :</p>
<pre><code class="hljs css language-4d">ds.People.<span class="hljs-function">query</span>(<span class="hljs-string">"places.locations[].kind= :1 and places.locations[].city= :2"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"paris"</span>)
</code></pre>
<p>... la requête retournera &quot;martin&quot; <strong>et</strong> &quot;smith&quot; car &quot;smith&quot; a un élément &quot;locations&quot; dont &quot;kind&quot; (le type) est &quot;home&quot; et un élément &quot;locations&quot; dont &quot;city&quot; (la ville) est &quot;paris&quot;, même si ce sont des éléments différents.</p>
<p>Si vous souhaitez obtenir uniquement les entités dont les arguments correspondants sont dans le même élément de collection, vous devez <strong>relier les arguments</strong>. Pour lier des arguments de requête :</p>
<ul>
<li>Ajoutez une lettre entre le caractère [] dans le premier chemin à lier et répétez la même lettre dans tous les arguments liés. Par exemple : <code>locations[a].city and locations[a].kind</code>. Vous pouvez utiliser n'importe quelle lettre de l'alphabet latin (non sensible à la casse).</li>
<li>Pour ajouter différents critères liés dans la même requête, utilisez une autre lettre. Vous pouvez créer jusqu'à 26 combinaisons de critères dans une seule requête.</li>
</ul>
<p>A l'aide des entités ci-dessus, si vous écrivez :</p>
<pre><code class="hljs css language-4d">ds.People.<span class="hljs-function">query</span>(<span class="hljs-string">"places.locations[a].kind= :1 and places.locations[a].city= :2"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"paris"</span>)
</code></pre>
<p>... la requête ne retournera uniquement &quot;martin&quot; car il possède un élément &quot;locations&quot; dont &quot;kind&quot; est &quot;home&quot; et dont &quot;city&quot; est &quot;paris&quot;. La requête ne retournera pas &quot;smith&quot; car les valeurs &quot;home&quot; et &quot;paris&quot; ne sont pas contenus dans le même élément de collection.</p>
<p><strong>Paramètre formula</strong></p>
<p>Au lieu d'insérer une formule dans le paramètre <em>queryString</em> (voir ci-dessus), vous pouvez directement passer un objet formule en tant que critère de recherche booléen. L'utilisation d'un objet formule pour les requêtes est <strong>recommandée</strong> car vous bénéficiez d'une tokenisation et le code est plus facile à rechercher/lire.</p>
<p>La formule doit avoir été créée à l'aide de la commande <code>Formula</code> ou <code>Formula from string</code>. Dans ce cas :</p>
<ul>
<li><em>formula</em> est évaluée pour chaque entité et doit renvoyer vrai ou faux. Lors de l'exécution de la requête, si le résultat de la formule n'est pas un booléen, il est considéré comme faux.</li>
<li>dans <em>formula</em>, l'entité est disponible via l'objet <code>This</code>.</li>
<li>si l'objet <code>Formula</code> est <strong>null</strong>, l'erreur 1626 (&quot;Attente d'un texte ou d'une formule&quot;) est générée, que vous pouvez intercepter à l'aide d'une méthode installée avec <code>ON ERR CALL</code>.</li>
</ul>
<blockquote>
<blockquote>
<p>Pour des raisons de sécurité, les appels de formule dans les fonctions <code>query(</code>) peuvent être interdits. Voir la description du paramètre <em>querySettings</em>.</p>
</blockquote>
</blockquote>
<p><strong>Passer des paramètres aux formules</strong></p>
<p>Tout paramètre <em>formula</em> appelé par la fonction <code>query()</code> peut recevoir des paramètres :</p>
<ul>
<li>Les paramètres doivent être passés via la propriété <strong>args</strong> du paramètre <em>querySettings</em>.</li>
<li>La formule reçoit cet objet <strong>args</strong> en tant que paramètre <strong>$1</strong>.</li>
</ul>
<p>Ce code montre comment les paramètres sont passés aux fonctions :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"args"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"exclude"</span>;<span class="hljs-string">"-"</span>)) <span class="hljs-comment">//objet args pour passer des paramètres</span>
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(checkName($1.exclude))"</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-comment">//args est reçu dans $1</span>
</code></pre>
<p>Des exemples supplémentaires sont fournis dans l'exemple 3.</p>
<p><strong>4D Server</strong> : En client/serveur, les formules sont exécutées sur le serveur. Dans ce contexte, seul l'objet <code>querySettings.args</code> est envoyé aux formules.</p>
<p><strong>Paramètre querySettings</strong></p>
<p>Dans le paramètre <em>querySettings</em> vous pouvez passer un objet contenant des options supplémentaires. Les propriétés suivantes sont prises en charge :</p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>parameters</td><td>Object</td><td><strong>Placeholders nommés pour les valeurs</strong> utilisées dans <em>queryString</em> ou <em>formula</em>. Les valeurs sont exprimées sous forme de paires propriété / valeur, où propriété est le nom du placeholder inséré pour une valeur dans <em>queryString</em> ou <em>formula</em> (&quot;:placeholder&quot;) et où valeur correspond à la valeur à comparer. Vous pouvez combiner, dans une même recherche, des placeholders indexés (valeurs passées directement dans les paramètres <em>value</em>) et les valeurs des placeholders nommés.</td></tr>
<tr><td>attributes</td><td>Object</td><td><strong>Placeholders nommés pour les chemins d'attributs</strong> utilisés dans <em>queryString</em> ou <em>formula</em>. Les attributs sont exprimés sous forme de paires propriété / valeur, où propriété est le nom du placeholder inséré pour un chemin d'attribut dans <em>queryString</em> or <em>formula</em> (&quot;:placeholder&quot;), et où valeur peut être une chaine ou une collection de chaines. Chaque valeur est un chemin qui peut désigner soit un attribut scalaire ou relatif de la dataclass soit une propriété d'un champ objet de la dataclass<p><table><tr><th>Type</th><th>Description</th></tr><tr><td>Chaine</td><td>attributePath exprimé à l'aide de la notation à point, ex : &quot;name&quot; ou &quot;user.address.zipCode&quot;</td></tr><tr><td>Collection de chaînes</td><td>Chaque chaine de la collection représente un niveau d'attributePath, ex : [&quot;name&quot;] ou [&quot;user&quot;,&quot;address&quot;,&quot;zipCode&quot;]. L'utilisation d'une collection permet de rechercher des attributs dont les noms ne sont pas conformes à la notation à point, ex : [&quot;4Dv17.1&quot;,&quot;en/fr&quot;]</td></tr></table>Vous pouvez combiner les valeurs des placeholders indexés (valeurs passées directement dans les paramètres <em>value</em>) et les valeurs des placeholders nommés dans la même recherche.</td></tr>
<tr><td>args</td><td>Object</td><td>Paramètre(s) à passer aux formules, le cas échéant. L'objet <strong>args</strong> sera reçu dans $1 à l'intérieur des formules et donc ses valeurs seront disponibles via la propriété <em>$1.property</em> (cf. exemple 3).</td></tr>
<tr><td>allowFormulas</td><td>Booléen</td><td>Vrai pour autoriser les appels de formules dans la query (défaut). Passez faux pour interdire l'exécution de formules. Si la <code>query()</code> contient une formule alors que cette propriété est à Faux, une erreur est retournée (1278 - Formule non autorisée).</td></tr>
<tr><td>context</td><td>Text</td><td>Nom du contexte d'optimisation automatique appliqué à l'entity selection. Ce contexte sera utilisé par le code qui manipule l'entity selection afin de bénéficier de l'optimisation. Cette fonctionnalité est conçue pour le traitement client/serveur ; pour plus d'informations, veuillez vous reporter à la section <strong>Optimisation client/serveur</strong>.</td></tr>
<tr><td>queryPlan</td><td>Booléen</td><td>Dans l'entity selection résultante, retourne ou ne retourne la description détaillée de la recherche juste avant d'être exécutée, i.e. La propriété retournée est un objet qui inclut chaque recherche et sous-recherche programmée (dans le cas d'une recherche complexe). Cette option est utile durant la phase de développement d'une application. Elle est utilisée conjointement à queryPath. Par défaut, si elle est omise : faux. <strong>Note</strong> : Cette propriété est prise en charge uniquement par les fonctions <code>entitySelection.query()</code> et <code>dataClass.query()</code>.</td></tr>
<tr><td>queryPath</td><td>Booléen</td><td>Dans l'entity selection résultante, retourne ou ne retourne pas la description détaillée de la recherche telle qu'elle est effectuée. La propriété retournée est un objet qui contient le chemin utilisé pour la recherche (généralement identique à celui de queryPlan, mais il peut être différent si le moteur parvient à optimiser la recherche), la durée du traitement et le nombre d'enregistrements trouvés. Cette option est utile durant la phase de développement d'une application. Par défaut, si elle est omise : faux. <strong>Note</strong> : Cette propriété est prise en charge uniquement par les fonctions <code>entitySelection.query()</code> et <code>dataClass.query()</code>.</td></tr>
</tbody>
</table>
<p><strong>A propos de queryPlan et queryPath</strong></p>
<p>Les informations enregistrées dans <code>queryPlan</code> et <code>queryPath</code> incluent le type de recherche (indexée ou séquentielle), chaque sous-recherche nécessaire, ainsi que les opérateurs de conjonction. Les chemins d'accès des requêtes contiennent également le nombre d'entités identifiées et la durée d'exécution de chaque critère de recherche. Les chemins d'accès des requêtes contiennent également le nombre d'entités identifiées et la durée d'exécution de chaque critère de recherche. Généralement, la description du plan de requête et son chemin d'accès sont identiques mais ils peuvent différer car 4D peut intégrer des optimisations dynamiques lorsqu'une requête est exécutée, afin d'améliorer les performances. Par exemple, le moteur 4D peut convertir dynamiquement une requête indexée en requête séquentielle s'il estime que ce processus est plus rapide. Ce cas particulier peut se produire lorsque le nombre d'entités recherchées est faible.</p>
<p>Par exemple, si vous exécutez la recherche suivante :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &lt; :1 and employer.name = :2 or employer.revenues &gt; :3"</span>;\  
 <span class="hljs-number">50000</span>;<span class="hljs-string">"Lima West Kilo"</span>;<span class="hljs-number">10000000</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"queryPath"</span>;<span class="hljs-literal">True</span>;<span class="hljs-string">"queryPlan"</span>;<span class="hljs-literal">True</span>))
</code></pre>
<p>queryPlan :</p>
<pre><code class="hljs css language-4d">{Or:[{And:[{item:[index : Employee.salary ] &lt; <span class="hljs-number">50000</span>},  
    {item:Join on Table : Company  :  Employee.employerID = Company.ID,  
    subquery:[{item:[index : Company.name ] = Lima West Kilo}]}]},  
    {item:Join on Table : Company  :  Employee.employerID = Company.ID,  
    subquery:[{item:[index : Company.revenues ] &gt; <span class="hljs-number">10000000</span>}]}]}
</code></pre>
<p>queryPath :</p>
<pre><code class="hljs css language-4d">{steps:[{description:OR,time:<span class="hljs-number">63</span>,recordsfounds:<span class="hljs-number">1388132</span>,  
    steps:[{description:AND,time:<span class="hljs-number">32</span>,recordsfounds:<span class="hljs-number">131</span>,  
    steps:[{description:[index : Employee.salary ] &lt; <span class="hljs-number">50000</span>,time:<span class="hljs-number">16</span>,recordsfounds:<span class="hljs-number">728260</span>},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">131</span>,  
    steps:[{steps:[{description:[index : Company.name ] = Lima West Kilo,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">1</span>}]}]}]},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:<span class="hljs-number">31</span>,recordsfounds:<span class="hljs-number">1388132</span>,  
    steps:[{steps:[{description:[index : Company.revenues ] &gt; <span class="hljs-number">10000000</span>,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">933</span>}]}]}]}]}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-1-4"></a><a href="#exemple-1-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 1</h4>
<p>Cette section fournit divers exemples de recherches.</p>
<p>Recherche dans une chaîne :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName = 'S@'"</span>)
</code></pre>
<p>Recherche avec une instruction NOT :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"not(firstName=Kim)"</span>)
</code></pre>
<p>Recherche avec des dates :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &gt; :1"</span>;<span class="hljs-string">"1970-01-01"</span>)
<span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &lt;= :1"</span>;Current date<span class="hljs-number">-10950</span>)
</code></pre>
<p>Recherche avec des placeholders indexés pour les valeurs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)"</span>;<span class="hljs-string">"D@"</span>;<span class="hljs-string">"R@"</span>;<span class="hljs-string">"S@"</span>;<span class="hljs-string">"K@"</span>)
</code></pre>
<p>Recherche avec des placeholders indexés pour les valeurs sur une dataclass liée :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1 and manager.lastName = :2"</span>;<span class="hljs-string">"M@"</span>;<span class="hljs-string">"S@"</span>)
</code></pre>
<p>Recherche avec des placeholders indexés avec tri décroissant :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Student.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality = :1 order by campus.name desc, lastname"</span>;<span class="hljs-string">"French"</span>)
</code></pre>
<p>Recherche avec des placeholders nommés pour les valeurs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">
var</span> <span class="hljs-variable">$managedCustomers </span>: cs.CustomerSelection
<span class="hljs-variable">$querySettings</span>:=New object
<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"userId"</span>;<span class="hljs-number">1234</span>;<span class="hljs-string">"extraInfo"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Smith"</span>))
<span class="hljs-variable">$managedCustomers</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"salesperson.userId = :userId and name = :extraInfo.name"</span>;<span class="hljs-variable">$querySettings</span>)
</code></pre>
<p>Recherche utilisant les placeholders nommés et indexés pour les valeurs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">
var</span> <span class="hljs-variable">$managedCustomers </span>: cs.CustomerSelection
<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"userId"</span>;<span class="hljs-number">1234</span>)
<span class="hljs-variable">$managedCustomers</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"salesperson.userId = :userId and name=:1"</span>;<span class="hljs-string">"Smith"</span>;<span class="hljs-variable">$querySettings</span>)
</code></pre>
<p>Recherche avec objets queryPlan et queryPath :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)"</span>;<span class="hljs-string">"D@"</span>;<span class="hljs-string">"R@"</span>;<span class="hljs-string">"S@"</span>;<span class="hljs-string">"K@"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"queryPlan"</span>;<span class="hljs-literal">True</span>;<span class="hljs-string">"queryPath"</span>;<span class="hljs-literal">True</span>))

  <span class="hljs-comment">//vous pouvez ensuite obtenir ces propriétés dans la sélection d'entité résultante</span><span class="hljs-keyword">
var</span> <span class="hljs-variable">$queryPlan</span>; <span class="hljs-variable">$queryPath </span>: Object
<span class="hljs-variable">$queryPlan</span>:=<span class="hljs-variable">$entitySelection</span>.queryPlan
<span class="hljs-variable">$queryPath</span>:=<span class="hljs-variable">$entitySelection</span>.queryPath
</code></pre>
<p>Recherche avec un chemin d'attribut de type Collection :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extraInfo.hobbies[].name = :1"</span>;<span class="hljs-string">"horsebackriding"</span>)
</code></pre>
<p>Recherche avec un chemin d'attribut de type Collection et des attributs reliés :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extraInfo.hobbies[a].name = :1 and extraInfo.hobbies[a].level=:2"</span>;<span class="hljs-string">"horsebackriding"</span>;<span class="hljs-number">2</span>)
</code></pre>
<p>Recherche avec un chemin d'attribut de type Collection et plusieurs attributs reliés :</p>
<pre><code class="hljs css language-4d">$entitySelection:=ds.Employee.query("extraInfo.hobbies[a].name = :1 and
    extraInfo.hobbies[a].level = :2 and extraInfo.hobbies[b].name = :3 and
    extraInfo.hobbies[b].level = :4";"horsebackriding";2;"Tennis";5)
</code></pre>
<p>Recherche avec un chemin d'attribut de type Objet :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extra.eyeColor = :1"</span>;<span class="hljs-string">"blue"</span>)
</code></pre>
<p>Recherche avec instruction IN :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName in :1"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"Kim"</span>;<span class="hljs-string">"Dixie"</span>))
</code></pre>
<p>Recherche avec instruction NOT (IN) :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"not (firstName in :1)"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"John"</span>;<span class="hljs-string">"Jane"</span>))
</code></pre>
<p>Recherche avec des placeholders indexés pour les attributs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection
<span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = 'Smith'"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>)
  <span class="hljs-comment">//salesperson est une entité reliée</span>
</code></pre>
<p>Recherche avec des placeholders indexés pour les attributs et avec des placeholders nommés pour les valeurs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-keyword">
var</span> <span class="hljs-variable">$querySettings </span>: Object
<span class="hljs-variable">$querySettings</span>:=New object
<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"customerName"</span>;<span class="hljs-string">"Smith"</span>)
<span class="hljs-variable">$es</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = :customerName"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-variable">$querySettings</span>)
  <span class="hljs-comment">//salesperson est une entité reliée</span>
</code></pre>
<p>Recherche avec des placeholders indexés pour les attributs et les valeurs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection
<span class="hljs-variable">$es</span>:=ds.Clients.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = :3"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-string">"Smith"</span>)
  <span class="hljs-comment">//salesperson est une entité reliée</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-2-4"></a><a href="#exemple-2-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 2</h4>
<p>Cette section illustre les recherches avec des placeholders nommés pour les attributs.</p>
<p>Considérons une dataclass Employee avec 2 entités :</p>
<p>Entité 1 :</p>
<pre><code class="hljs css language-4d">name: <span class="hljs-string">"Marie"</span>
number: <span class="hljs-number">46</span>
softwares:{
<span class="hljs-string">"Word 10.2"</span>: <span class="hljs-string">"Installed"</span>,
<span class="hljs-string">"Excel 11.3"</span>: <span class="hljs-string">"To be upgraded"</span>,
<span class="hljs-string">"Powerpoint 12.4"</span>: <span class="hljs-string">"Not installed"</span>
}
</code></pre>
<p>Entité 2 :</p>
<pre><code class="hljs css language-4d">name: <span class="hljs-string">"Sophie"</span>
number: <span class="hljs-number">47</span>
softwares:{
<span class="hljs-string">"Word 10.2"</span>: <span class="hljs-string">"Not installed"</span>,
<span class="hljs-string">"Excel 11.3"</span>: <span class="hljs-string">"To be upgraded"</span>,
<span class="hljs-string">"Powerpoint 12.4"</span>: <span class="hljs-string">"Not installed"</span>
}
</code></pre>
<p>Recherche avec des placeholders nommés pour les attributs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection
 <span class="hljs-variable">$querySettings</span>:=New object
 <span class="hljs-variable">$querySettings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"attName"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-string">"attWord"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"softwares"</span>;<span class="hljs-string">"Word 10.2"</span>))
 <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":attName = 'Marie' and :attWord = 'Installed'"</span>;<span class="hljs-variable">$querySettings</span>)
  <span class="hljs-comment">//$es.length=1 (Employee Marie)</span>
</code></pre>
<p>Recherche avec des placeholders nommés pour les attributs et les valeurs :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$name </span>: Text
 <span class="hljs-variable">$querySettings</span>:=New object
  <span class="hljs-comment">//Placeholders pour les valeurs</span>
  <span class="hljs-comment">//Il est demandé à l'utilisateur de saisir un nom</span>
 <span class="hljs-variable">$name</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Veuillez saisir un nom à rechercher :"</span>)<span class="hljs-keyword">
 If</span>(OK=<span class="hljs-number">1</span>)
    <span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"givenName"</span>;<span class="hljs-variable">$name</span>)
  <span class="hljs-comment">//Placeholders pour les chemins d'attributs</span>
    <span class="hljs-variable">$querySettings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"attName"</span>;<span class="hljs-string">"name"</span>)
    <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":attName= :givenName"</span>;<span class="hljs-variable">$querySettings</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemple-3-3"></a><a href="#exemple-3-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple 3</h4>
<p>Ces exemples illustrent les diverses manières d'utiliser des formules avec ou sans paramètres dans vos recherches.</p>
<p>La formule est fournie sous forme de texte avec <code>eval()</code> dans le paramètre <em>queryString</em> :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(length(This.lastname) &gt;=30) and nationality='French'"</span>)
</code></pre>
<p>La formule est fournie sout forme d'objet <code>Formula</code> via un placeholder :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$formula </span>: Object
 <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)&gt;=<span class="hljs-number">30</span>)
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality='French'"</span>;<span class="hljs-variable">$formula</span>)
</code></pre>
<p>Seul un objet <code>Formula</code> est fourni comme critère de recherche :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$formula </span>: Object
 <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)&gt;=<span class="hljs-number">30</span>)
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-variable">$formula</span>)
</code></pre>
<p>Plusieurs formules peuvent être appliquées :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula1</span>; <span class="hljs-variable">$1</span>; <span class="hljs-variable">$formula2 </span>;<span class="hljs-variable">$0 </span>: Object
 <span class="hljs-variable">$formula1</span>:=<span class="hljs-variable">$1</span>
 <span class="hljs-variable">$formula2</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.firstname)&gt;=<span class="hljs-number">30</span>)
 <span class="hljs-variable">$0</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and :2 and nationality='French'"</span>;<span class="hljs-variable">$formula1</span>;<span class="hljs-variable">$formula2</span>)
</code></pre>
<p>Une formule texte dans <em>queryString</em> reçoit un paramètre :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$settings </span>: Object
 <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>()
 <span class="hljs-variable">$settings</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"filter"</span>;<span class="hljs-string">"-"</span>)
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(checkName($1.filter)) and nationality=:1"</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)
</code></pre>
<pre><code class="hljs css language-4d">  <span class="hljs-comment">//méthode checkName </span>
 #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$exclude </span>: Text) -&gt; <span class="hljs-variable">$result </span>: Boolean
 <span class="hljs-variable">$result</span>:=(<span class="hljs-function">Position</span>(<span class="hljs-variable">$exclude</span>;<span class="hljs-literal">This</span>.lastname)=<span class="hljs-number">0</span>)
</code></pre>
<p>En utilisant la même méthode <strong><em>checkName</em></strong>, un objet <code>Formula</code> en placeholder reçoit un paramètre :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$settings</span>; <span class="hljs-variable">$formula </span>: Object
 <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">checkName</span>(<span class="hljs-variable">$1</span>.filter))
 <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>()
 <span class="hljs-variable">$settings</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"filter"</span>;<span class="hljs-string">"-"</span>)
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality=:2"</span>;<span class="hljs-variable">$formula</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)
 <span class="hljs-variable">$settings</span>.args.filter:=<span class="hljs-string">"*"</span> <span class="hljs-comment">// modifie les paramètres sans mettre à jour l'objet $formula </span>
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality=:2"</span>;<span class="hljs-variable">$formula</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)
</code></pre>
<p>Nous voulons interdire les formules, par exemple lorsque les utilisateurs saisissent leurs requêtes :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$settings </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$queryString </span>: Text
 <span class="hljs-variable">$queryString</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Enter your query:"</span>)
<span class="hljs-function"> if</span>(OK=<span class="hljs-number">1</span>)
    <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"allowFormulas"</span>;<span class="hljs-literal">False</span>)
    <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-variable">$queryString</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-comment">//Une erreur est gnérée si $queryString contient une formule</span><span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="voir-aussi-2"></a><a href="#voir-aussi-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Voir aussi</h4>
<p><a href="/docs/Rx/fr/API/EntitySelectionClass.html#query"><code>.query()</code></a> pour les entity selections</p>
<style> h2 { background: #d9ebff;}</style>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/Rx/fr/API/CryptoKeyClass.html"><span class="arrow-prev">← </span><span class="function-name-prevnext">CryptoKey</span></a><a class="docs-next button" href="/docs/Rx/fr/API/DataClassAttributeClass.html"><span class="function-name-prevnext">DataClassAttribute</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#attributename">.<em>attributeName</em></a></li><li><a href="#all">.all()</a></li><li><a href="#fromcollection">.fromCollection()</a></li><li><a href="#get">.get()</a></li><li><a href="#getdatastore">.getDataStore()</a></li><li><a href="#getinfo">.getInfo()</a></li><li><a href="#new">.new()</a></li><li><a href="#newselection">.newSelection()</a></li><li><a href="#query">.query()</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/Rx/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'OJ04C0M3CU',
                apiKey: '5f22ebbb9382abafeadc3e86ca47d4af',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:fr","version:19 R5"]}
              });
            </script></body></html>