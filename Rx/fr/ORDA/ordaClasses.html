<!DOCTYPE html><html lang="fr"><head><meta name="docsearch:version" content="19 R3"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Classes du modèle de données · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="ORDA vous permet de créer des fonctions de classe de haut niveau au-dessus du modèle de données. Cela vous permet d&#x27;écrire du code orienté métier et de le «publier» comme une API. Le datastore, les dataclasses, les sélections d&#x27;entités et les entités sont tous disponibles en tant qu&#x27;objets de classe pouvant contenir des fonctions."/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Classes du modèle de données · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/Rx/index.html"/><meta property="og:description" content="ORDA vous permet de créer des fonctions de classe de haut niveau au-dessus du modèle de données. Cela vous permet d&#x27;écrire du code orienté métier et de le «publier» comme une API. Le datastore, les dataclasses, les sélections d&#x27;entités et les entités sont tous disponibles en tant qu&#x27;objets de classe pouvant contenir des fonctions."/><meta property="og:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><link rel="shortcut icon" href="/docs/Rx/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/Rx/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/Rx/js/code-blocks-buttons.js"></script><script src="/docs/Rx/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/Rx/css/main.css"/><script src="/docs/Rx/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/Rx/fr"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://developer.4d.com/docs" target="_self">v19 R5 BETA</a></li><li class=""><a href="https://developer.4d.com/docs/Rx" target="_self">v19 R4</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/Rx/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/Rx/en/ORDA/ordaClasses.html">English</a></li><li><a href="/docs/Rx/ja/ORDA/ordaClasses.html">日本語</a></li><li><a href="/docs/Rx/de/ORDA/ordaClasses.html">Deutsch</a></li><li><a href="/docs/Rx/es/ORDA/ordaClasses.html">Español</a></li><li><a href="/docs/Rx/pt/ORDA/ordaClasses.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>ORDA</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Gestion de projet<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/architecture.html">Architecture of a project</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/documentation.html">Documenter un projet</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/compiler.html">Compilation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts du langage 4D<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/about.html">À propos du Langage 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/quick-tour.html">Tour d&#x27;horizon</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/operators.html">Operators</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/data-types.html">Types de données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/boolean.html">Booléen</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/date.html">Date</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/null-undefined.html">Null et Indefinie</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/number.html">Numérique (Réel, Entier, Entier long)</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/object.html">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/picture.html">Image</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/pointer.html">Pointeur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/string.html">Chaine</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/time.html">Heure</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/variables.html">Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/arrays.html">Tableaux</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/methods.html">Méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/parameters.html">Paramètres</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/shared.html">Objets et collections partagés</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/classes.html">Classes</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/control-flow.html">Conditions et boucles</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/branching.html">Structures conditionnelles</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/looping.html">Structures répétitives (ou &quot;boucles&quot;)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Tags/tags.html">Balises de transformation</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/error-handling.html">Gestion des erreurs</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/interpreted-compiled.html">Modes interprété et compilé</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/components.html">Composants</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/identifiers.html">Identifiants</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/overview.html">Que signifie ORDA ?</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/dsmapping.html">Objets Data Model</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/Rx/fr/ORDA/ordaClasses.html">Classes du modèle de données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/entities.html">Travailler avec des données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/datastores.html">Utiliser un datastore distant</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/glossary.html">Glossaire</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Classes API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/overview.html">Aperçu - API des classes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/BlobClass.html">Blob</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ClassClass.html">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/CollectionClass.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/CryptoKeyClass.html">CryptoKey</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/DataClassClass.html">DataClass</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/DataClassAttributeClass.html">DataClassAttribute</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/DataStoreClass.html">DataStore</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EmailObjectClass.html">Email</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EntityClass.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EntitySelectionClass.html">EntitySelection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FileClass.html">File</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FolderClass.html">Folder</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FunctionClass.html">Formula</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/IMAPTransporterClass.html">IMAPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/MailAttachmentClass.html">MailAttachment</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/POP3TransporterClass.html">POP3Transporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SessionClass.html">Session</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SignalClass.html">Signal</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SMTPTransporterClass.html">SMTPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SystemWorkerClass.html">SystemWorker</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/WebServerClass.html">WebServer</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipArchiveClass.html">ZIPArchive</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipFileClass.html">ZIPFile</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipFolderClass.html">ZIPFolder</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Éditeur de code<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/code-editor/navigation.html">Navigation dropdown</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Débogage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/basics.html">Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugger.html">Débogueur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/breakpoints.html">Points d&#x27;arrêt et points d&#x27;arrêt sur commande</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugging-remote.html">Débogage depuis des machines distantes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugLogFiles.html">Description of log files</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Settings<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/general.html">General page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/interface.html">Interface page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/compiler.html">Compiler page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/database.html">Database page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/backup.html">Backup page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/client-server.html">Client-server page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/web.html">Web page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/sql.html">SQL page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/php.html">PHP page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/security.html">Security page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/compatibility.html">Compatibility page</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Préférences<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/general.html">Page Général</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/structure.html">Page Structure</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/forms.html">Page Formulaires</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/methods.html">Page Méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/shortcuts.html">Page Raccourcis</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/Rx/docs/ORDA/ordaClasses.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Classes du modèle de données</h1></header><article><div><span><p>ORDA vous permet de créer des fonctions de classe de haut niveau au-dessus du modèle de données. Cela vous permet d'écrire du code orienté métier et de le «publier» comme une API. Le datastore, les dataclasses, les sélections d'entités et les entités sont tous disponibles en tant qu'objets de classe pouvant contenir des fonctions.</p>
<p>Par exemple, vous pouvez créer une fonction <code>getNextWithHigherSalary()</code> dans la classe <code>EmployeeEntity</code> pour retourner les employés ayant un salaire supérieur à celui qui est sélectionné. Il serait aussi simple à appeler que :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$nextHigh</span>:=ds.<span class="hljs-function">Employee</span>(<span class="hljs-number">1</span>).<span class="hljs-function">getNextWithHigherSalary</span>()
</code></pre>
<p>Les développeurs peuvent utiliser ces fonctions non seulement dans des datastores locaux, mais aussi dans des architectures client/serveur et distantes :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-comment">//$cityManager est la référence d'un datastore distant</span>
Form.comp.city:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCityName</span>(Form.comp.zipcode)
</code></pre>
<p>Grâce à cette fonctionnalité, toute la logique métier de votre application 4D peut être stockée comme une couche indépendante afin d'être facilement maintenue ou réutilisée avec un niveau de sécurité élevé :</p>
<ul>
<li><p>Elle vous permet de «masquer» la complexité globale de la structure physique sous-jacente et d'exposer uniquement des fonctions compréhensibles et prêtes à l'emploi.</p></li>
<li><p>Si la structure phySique évolue, il vous suffit d'adapter le code de la fonction et les applications clientes continueront de les appeler de manière transparente.</p></li>
<li><p>By default, all of your data model class functions (including <a href="#computed-attributes">computed attribute functions</a>) and <a href="XXX">alias attributes</a> are <strong>not exposed</strong> to remote applications and cannot be called from REST requests. You must explicitly declare each public function and alias with the <a href="#exposed-vs-non-exposed-functions"><code>exposed</code></a> keyword.</p></li>
</ul>
<p><img src="/docs/Rx/assets/en/ORDA/api.png" alt=""></p>
<p>De plus, 4D <a href="#creating-classes">crée préalablement et automatiquement</a> les classes pour chaque objet de modèle de données disponible.</p>
<h2><a class="anchor" aria-hidden="true" id="architecture"></a><a href="#architecture" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Architecture</h2>
<p>ORDA fournit des <strong>classes génériques</strong> exposées via le <a href="/docs/Rx/fr/Concepts/classes.html#class-stores">class store</a> <strong><code>4D</code></strong>, ainsi que des <strong>classes utilisateurs</strong> (étendant les classes génériques) exposées dans le <a href="/docs/Rx/fr/Concepts/classes.html#class-stores">class store</a> <strong><code>cs</code></strong> :</p>
<p><img src="/docs/Rx/assets/en/ORDA/ClassDiagramImage.png" alt=""></p>
<p>Toutes les classes de modèle de données ORDA sont exposées en tant que propriétés du class store <strong><code>cs</code></strong>. Les classes ORDA suivantes sont disponibles :</p>
<table>
<thead>
<tr><th>Class</th><th>Nom de l'exemple</th><th>Instanciée par</th></tr>
</thead>
<tbody>
<tr><td>cs.DataStore</td><td>cs.DataStore</td><td>commande <a href="/docs/Rx/fr/API/DataStoreClass.html#ds"><code>ds</code></a></td></tr>
<tr><td>cs.<em>DataClassName</em></td><td>cs.Employee</td><td><a href="/docs/Rx/fr/API/DataStoreClass.html#dataclassname"><code>dataStore.DataClassName</code></a>, <code>dataStore[&quot;DataClassName&quot;]</code></td></tr>
<tr><td>cs.<em>DataClassName</em>Entity</td><td>cs.EmployeeEntity</td><td><a href="/docs/Rx/fr/API/DataClassClass.html#get"><code>dataClass.get()</code></a>, <a href="/docs/Rx/fr/API/DataClassClass.html#new"><code>dataClass.new()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#first"><code>entitySelection.first()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#last"><code>entitySelection.last()</code></a>, <a href="/docs/Rx/fr/API/EntityClass.html#previous"><code>entity.previous()</code></a>, <a href="/docs/Rx/fr/API/EntityClass.html#next"><code>entity.next()</code></a>, <a href="/docs/Rx/fr/API/EntityClass.html#first"><code>entity.first()</code></a>, <a href="/docs/Rx/fr/API/EntityClass.html#last"><code>entity.last()</code></a>, <a href="/docs/Rx/fr/API/EntityClass.html#clone"><code>entity.clone()</code></a></td></tr>
<tr><td>cs.<em>DataClassName</em>Selection</td><td>cs.EmployeeSelection</td><td><a href="/docs/Rx/fr/API/DataClassClass.html#query"><code>dataClass.query()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#query"><code>entitySelection.query()</code></a>, <a href="/docs/Rx/fr/API/DataClassClass.html#all"><code>dataClass.all()</code></a>, <a href="/docs/Rx/fr/API/DataClassClass.html#fromcollection"><code>dataClass.fromCollection()</code></a>, <a href="/docs/Rx/fr/API/DataClassClass.html#newselection"><code>dataClass.newSelection()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#drop"><code>entitySelection.drop()</code></a>, <a href="/docs/Rx/fr/API/EntityClass.html#getselection"><code>entity.getSelection()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#and"><code>entitySelection.and()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#minus"><code>entitySelection.minus()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#or"><code>entitySelection.or()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#or"><code>entitySelection.orderBy()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#orderbyformula"><code>entitySelection.orderByFormula()</code></a>, <a href="/docs/Rx/fr/API/EntitySelectionClass.html#slice"><code>entitySelection.slice()</code></a>, <code>Create entity selection</code></td></tr>
</tbody>
</table>
<blockquote>
<p>Les classes utilisateur ORDA sont stockées sous forme de fichiers de classe standard (.4dm) dans le sous-dossier Classes du projet <a href="#class-files">(voir ci-dessous)</a>.</p>
</blockquote>
<p>De plus, les instances d'objet de classes utilisateurs du modèles de données ORDA bénéficient des propriétés et fonctions de leurs parents:</p>
<ul>
<li>un objet de classe Datastore peut appeler des fonctions de la <a href="/docs/Rx/fr/API/DataStoreClass.html">classe générique ORDA Datastore</a>.</li>
<li>un objet de classe Dataclass peut appeler des fonctions de la <a href="/docs/Rx/fr/API/DataClassClass.html">classe générique ORDA Dataclass</a>.</li>
<li>un objet de classe Entity selection peut appeler des fonctions de la <a href="/docs/Rx/fr/API/EntitySelectionClass.html">classe générique ORDA Entity selection</a>.</li>
<li>un objet de classe Entity peut appeler des fonctions de la <a href="/docs/Rx/fr/API/EntityClass.html">classe générique ORDA Entity</a>.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="description-de-la-classe"></a><a href="#description-de-la-classe" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description de la classe</h2>
<p><details><summary>Historique</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Modifications</th></tr>
</thead>
<tbody>
<tr><td>v19 R4</td><td>Alias attributes in the Entity Class</td></tr>
<tr><td>v19 R3</td><td>Computed attributes in the Entity Class</td></tr>
<tr><td>v18 R5</td><td>Data model class functions are not exposed to REST by default. New <code>exposed</code> and <code>local</code> keywords.</td></tr>
</tbody>
</table>
<p></details></p>
<h3><a class="anchor" aria-hidden="true" id="classe-datastore"></a><a href="#classe-datastore" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Classe DataStore</h3>
<p>Une base de données 4D expose sa propre classe DataStore dans le class store <code>cs</code>.</p>
<ul>
<li><strong>Extends</strong>: 4D.DataStoreImplementation</li>
<li><strong>Nom de classe</strong> : cs.DataStore</li>
</ul>
<p>Vous pouvez créer des fonctions dans la classe DataStore qui seront disponibles via l'objet <code>ds</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="exemple"></a><a href="#exemple" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.DataStore class</span><span class="hljs-keyword">

Class extends</span> DataStoreImplementation<span class="hljs-keyword">

Function</span> getDesc
  <span class="hljs-variable">$0</span>:=<span class="hljs-string">"Database exposing employees and their companies"</span>
</code></pre>
<p>Cette foncton peut alors être appelée :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$desc</span>:=ds.<span class="hljs-function">getDesc</span>() <span class="hljs-comment">//"Database exposing..."</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="classe-dataclass"></a><a href="#classe-dataclass" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Classe DataClass</h3>
<p>Chaque table exposée avec ORDA affiche une classe DataClass dans le class store <code>cs</code>.</p>
<ul>
<li><strong>Extends</strong> : 4D.DataClass</li>
<li>**Nom de classe <em><em>: cs.</em>DataClassName</em> (où <em>DataClassName</em> est le nom de la table)</li>
<li>**Exemple ** : cs.Employee</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="exemple-1"></a><a href="#exemple-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<pre><code class="hljs css language-4D"><span class="hljs-comment">// cs.Company class</span><span class="hljs-keyword">


Class extends</span> DataClass

<span class="hljs-comment">// Retourne les entreprises dont le revenu est supérieur à la moyenne</span>
<span class="hljs-comment">// Retourne une sélection d'entités relative à l'entreprise DataClass </span><span class="hljs-keyword">

Function</span><span class="hljs-function"> GetBestOnes</span>()
    <span class="hljs-variable">$sel</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"revenues &gt;= :1"</span>;<span class="hljs-literal">This</span>.<span class="hljs-function">all</span>().<span class="hljs-function">average</span>(<span class="hljs-string">"revenues"</span>));
    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$sel</span>
</code></pre>
<p>Vous pouvez ensuite obtenir une sélection d'entité des &quot;meilleures&quot; entreprises en exécutant le code suivant :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">    var</span> <span class="hljs-variable">$best </span>: cs.CompanySelection
    <span class="hljs-variable">$best</span>:=ds.Company.<span class="hljs-function">GetBestOnes</span>()
</code></pre>
<blockquote>
<p><a href="#computed-attributes">Les champs calculés</a> sont définis dans <a href="#entity-class">la classe Entity</a>.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="exemple-avec-un-datastore-distant"></a><a href="#exemple-avec-un-datastore-distant" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple avec un datastore distant</h4>
<p>Le catalogue <em>City</em> suivant est exposé dans un datastore distant (vue partielle) :</p>
<p><img src="/docs/Rx/assets/en/ORDA/Orda_example.png" alt=""></p>
<p>La classe <code>City Class</code> fournit une API :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.City class</span><span class="hljs-keyword">

Class extends</span> DataClass<span class="hljs-keyword">

Function</span><span class="hljs-function"> getCityName</span>()<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$1</span>; <span class="hljs-variable">$zipcode </span>: Integer<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$zip </span>: 4D.Entity<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$0 </span>: Text

    <span class="hljs-variable">$zipcode</span>:=<span class="hljs-variable">$1</span>
    <span class="hljs-variable">$zip</span>:=ds.ZipCode.<span class="hljs-function">get</span>(<span class="hljs-variable">$zipcode</span>)
    <span class="hljs-variable">$0</span>:=<span class="hljs-string">""</span><span class="hljs-keyword"> 

    If</span> (<span class="hljs-variable">$zip</span>#<span class="hljs-literal">Null</span>)
        <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$zip</span>.city.name<span class="hljs-keyword">
    End if</span>
</code></pre>
<p>L'application cliente ouvre une session sur le datastore distant :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$cityManager</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>;<span class="hljs-string">"127.0.0.1:8111"</span>);<span class="hljs-string">"CityManager"</span>)
</code></pre>
<p>Une application cliente peut alors utiliser l'API pour obtenir la ville correspondant au code postal (par exemple) à partir d'un formulaire :</p>
<pre><code class="hljs css language-4d">Form.comp.city:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCityName</span>(Form.comp.zipcode)

</code></pre>
<h3><a class="anchor" aria-hidden="true" id="classe-entityselection"></a><a href="#classe-entityselection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Classe EntitySelection</h3>
<p>Chaque table exposée avec ORDA affiche une classe EntitySelection dans le class store <code>cs</code>.</p>
<ul>
<li><strong>Extends</strong> : 4D.EntitySelection</li>
<li><strong>Nom de classe</strong> : <em>DataClassName</em>Selection (où <em>DataClassName</em> est le nom de la table)</li>
<li>**Exemple ** : cs.EmployeeSelection</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="exemple-2"></a><a href="#exemple-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// Classe cs.EmployeeSelection </span>


Classe extends EntitySelection

<span class="hljs-comment">//Extrait, de cette sélection d'entité, les employés ayant un salaire supérieur à la moyenne</span><span class="hljs-keyword">

Function</span> withSalaryGreaterThanAverage
<span class="hljs-function">    C_OBJECT</span>(<span class="hljs-variable">$0</span>)
    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-literal">This</span>.<span class="hljs-function">average</span>(<span class="hljs-string">"salary"</span>)).<span class="hljs-function">orderBy</span>(<span class="hljs-string">"salary"</span>)

</code></pre>
<p>Vous pouvez alors obtenir les employés dont le salaire est supérieur à la moyenne, dans une sélection d'entité, en exécutant le code suivant :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$moreThanAvg</span>:=ds.Company.<span class="hljs-function">all</span>().employees.<span class="hljs-function">withSalaryGreaterThanAverage</span>()
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="entity-class"></a><a href="#entity-class" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Entity Class</h3>
<p>Chaque table exposée avec ORDA affiche une classe Entity dans le class store <code>cs</code>.</p>
<ul>
<li><strong>Extends</strong> : 4D.Entity</li>
<li>**Nom de classe **: <em>DataClassName</em>Entity (où <em>DataClassName</em> est le nom de la table)</li>
<li>**Exemple ** : cs.CityEntity</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="champs-calculés"></a><a href="#champs-calculés" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Champs calculés</h4>
<p>Les classes Entity vous permettent de définir des <strong>champs calculés</strong> à l'aide de mots-clés spécifiques :</p>
<ul>
<li><code>Function get</code> <em>attributeName</em></li>
<li><code>Function set</code> <em>attributeName</em></li>
<li><code>Function query</code> <em>attributeName</em></li>
<li><code>Function orderBy</code> <em>attributeName</em></li>
</ul>
<p>For information, please refer to the <a href="#computed-attributes">Computed attributes</a> section.</p>
<h4><a class="anchor" aria-hidden="true" id="alias-attributes"></a><a href="#alias-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Alias attributes</h4>
<p>Entity classes allow you to define <strong>alias attributes</strong>, usually over related attributes, using the <code>Alias</code> keyword:</p>
<p><code>Alias</code> <em>attributeName</em> <em>targetPath</em></p>
<p>For information, please refer to the <a href="#alias-attributes">Alias attributes</a> section.</p>
<h4><a class="anchor" aria-hidden="true" id="exemple-3"></a><a href="#exemple-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.CityEntity class</span><span class="hljs-keyword">

Class extends</span> Entity<span class="hljs-keyword">

Function</span><span class="hljs-function"> getPopulation</span>()
    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.zips.<span class="hljs-function">sum</span>(<span class="hljs-string">"population"</span>)<span class="hljs-keyword">


Function</span><span class="hljs-function"> isBigCity</span>(): Boolean
<span class="hljs-comment">// The getPopulation() function is usable inside the class</span>
<span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">getPopulation</span>()&gt;<span class="hljs-number">50000</span>
</code></pre>
<p>Vous pouvez ensuite appeler ce code :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$cityManager</span>; <span class="hljs-variable">$city </span>: Object

<span class="hljs-variable">$cityManager</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>;<span class="hljs-string">"127.0.0.1:8111"</span>);<span class="hljs-string">"CityManager"</span>)
<span class="hljs-variable">$city</span>:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCity</span>(<span class="hljs-string">"Caguas"</span>)<span class="hljs-keyword">

If</span> (<span class="hljs-variable">$city</span>.<span class="hljs-function">isBigCity</span>())
<span class="hljs-function">    ALERT</span>(<span class="hljs-variable">$city</span>.name + <span class="hljs-string">" is a big city"</span>)<span class="hljs-keyword">
End if</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="règles-spécifiques"></a><a href="#règles-spécifiques" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Règles spécifiques</h3>
<p>Lors de la création ou de la modification de classes de modèles de données, vous devez veiller aux règles décrites ci-dessous :</p>
<ul>
<li><p>Puisqu'ils sont utilisés pour définir des noms de classe DataClass automatiques dans le <a href="/docs/Rx/fr/Concepts/classes.html#class-stores">class store</a> <strong>cs</strong>, les tables 4D doivent être nommées afin d'éviter tout conflit dans l'espace de nommage <strong>cs</strong>. En particulier :</p>
<ul>
<li>Ne donnez pas le même nom à une table 4D et à une <a href="/docs/Rx/fr/Concepts/classes.html#class-names">classe d'utilisateurs</a> (user class). Si un tel cas se produit, le constructeur de la classe utilisateur devient inutilisable (un avertissement est retourné par le compilateur).</li>
<li>N'utilisez pas de nom réservé pour une table 4D (par exemple &quot;DataClass&quot;).</li>
</ul></li>
<li><p>Lors de la définition d'une classe, assurez-vous que l'instruction <a href="/docs/Rx/fr/Concepts/classes.html#class-extends-classnameclass"><code>Class extends</code></a> correspond exactement au nom de la classe parente (sensible à la casse). Par exemple, <code>Class extends EntitySelection</code> pour une classe de sélection d'entité.</p></li>
<li><p>Vous ne pouvez pas instancier un objet de classe de modèle de données avec le mot clé <code>new()</code> (une erreur est retournée). You must use a regular method as listed in the <a href="#architecture"><code>Instantiated by</code> column of the ORDA class table</a>.</p></li>
<li><p>Vous ne pouvez pas remplacer une fonction de classe ORDA native du <a href="/docs/Rx/fr/Concepts/classes.html#class-stores">class store</a> <strong><code>4D</code></strong> par une fonction de classe utilisateur de modèle de données.</p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="exécution-préemptive"></a><a href="#exécution-préemptive" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exécution préemptive</h3>
<p>Lors de la compilation, les fonctions de classe du modèle de données sont exécutées :</p>
<ul>
<li>dans <strong>des process préemptifs ou coopératifs</strong> (en fonction du process appelant) dans des applications monoposte,</li>
<li>dans <strong>des process préemptifs</strong> dans des applications client/serveur (sauf si le mot-clé <a href="#local-functions"><code>local</code></a> est utilisé, auquel cas il dépend du process appelant comme dans le cas d'un monoposte).</li>
</ul>
<p>Si votre projet est conçu de façon à être exécuté en client/serveur, assurez-vous que le code de la fonction de classe du modèle de données est thread-safe. Si un code thread-unsafe est appelé, une erreur sera générée au moment de l'exécution (aucune erreur ne sera déclenchée au moment de la compilation puisque l'exécution coopérative est prise en charge dans les applications monoposte).</p>
<h2><a class="anchor" aria-hidden="true" id="champs-calculés-1"></a><a href="#champs-calculés-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Champs calculés</h2>
<h3><a class="anchor" aria-hidden="true" id="aperçu"></a><a href="#aperçu" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Aperçu</h3>
<p>Un champ calculé est un attribut de dataclass avec un type de données qui masque un calcul. <a href="/docs/Rx/fr/Concepts/classes.html">Les classes 4D standard</a> implémentent le concept de propriétés calculées avec des <a href="/docs/Rx/fr/Concepts/classes.html#function-get-and-function-set">fonctions d'accès</a> telles que <code>get</code> (<em>getter</em>) et <code>set</code> (<em>setter</em>). Les attributs de dataclass ORDA bénéficient de cette fonctionnalité et l'étendent avec deux fonctions supplémentaires : <code>query</code> et <code>orderBy</code>.</p>
<p>Un champ calculé nécessite au minimum une fonction <code>get</code> qui décrit comment sa valeur sera calculée. Lorsqu'une fonction <em>getter</em> est fournie à un attribut, 4D ne crée pas l'espace de stockage sous-jacent dans le datastore mais substitue le code de la fonction chaque fois que l'attribut est accédé. Si l'attribut n'est pas consulté, le code ne s'exécute jamais.</p>
<p>Un champ calculé peut également mettre en œuvre une fonction <code>set</code>, qui s'exécute chaque fois qu'une valeur est attribuée à l'attribut. La fonction <em>setter</em> décrit ce qui est à faire avec la valeur attribuée, généralement en la redirigeant vers un ou plusieurs attributs de stockage ou, dans certains cas, vers d'autres entités.</p>
<p>Tout comme les champs de stockage, les champs calculés peuvent être inclus dans les <strong>requêtes</strong>. Par défaut, lorsqu'un champ calculé est utilisé dans une requête ORDA, il est calculé une fois par entité examinée. Dans certains cas, cela est suffisant. . Cependant, pour de meilleures performances, notamment en client/serveur, les champs calculés peuvent implémenter une fonction de requête <code>query</code> qui s'appuie sur les attributs des dataclass et qui bénéficie de leurs index.</p>
<p>De même, les champs calculés peuvent être inclus dans des <strong>tris</strong>. Lorsqu'un champ calculé est utilisé dans un tri ORDA, l'attribut est calculé une fois par entité examinée. Tout comme dans les requêtes, les champs calculés peuvent mettre en œuvre une fonction <code>orderBy</code> qui substitue d'autres attributs pendant le tri, améliorant ainsi les performances.</p>
<h3><a class="anchor" aria-hidden="true" id="comment-définir-les-champs-calculés"></a><a href="#comment-définir-les-champs-calculés" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Comment définir les champs calculés</h3>
<p>Créez un champ calculé en définissant un accesseur <code>get</code> dans la <a href="#entity-class"><strong>classe entity</strong></a> de la dataclass. Le champ calculé sera automatiquement disponible dans les attributs de la dataclass et dans les attributs de l'entité.</p>
<p>D'autres fonctions de champs calculés (<code>set</code>, <code>query</code> et <code>orderBy</code>) peuvent également être définies dans la classe entity. Elles sont facultatives.</p>
<p>Dans les fonctions de champs calculés, <a href="/docs/Rx/fr/Concepts/classes.html#this"><code>This</code></a> désigne l'entité. Les champs calculés peuvent être utilisés et traités comme n'importe quel champ de dataclass, c'est-à-dire qu'ils seront traités par les fonctions de <a href="/docs/Rx/fr/API/EntityClass.html">classe entity</a> ou de <a href="/docs/Rx/fr/API/EntitySelectionClass.html">classe entity selection</a>.</p>
<blockquote>
<p>Les champs calculés d'ORDA ne sont pas exposés (<a href="#exposed-vs-non-exposed-functions"><strong>exposed</strong></a>) par défaut. Exposez un champ calculé en ajoutant le mot-clé <code>exposed</code> lors de la définition de la fonction <strong>get</strong>.</p>
</blockquote>
<blockquote>
<p><strong>Les fonctions get et set</strong> peuvent avoir la propriété <a href="#local-functions"><strong>local</strong></a> pour optimiser le traitement client/serveur.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="function-get-attributename"></a><a href="#function-get-attributename" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>Function get &lt;attributeName&gt;</code></h3>
<h4><a class="anchor" aria-hidden="true" id="syntaxe"></a><a href="#syntaxe" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntaxe</h4>
<pre><code class="hljs css language-4d">{local} {exposed}<span class="hljs-keyword"> Function</span> get &lt;attributeName&gt;({<span class="hljs-variable">$event </span>: Object}) -&gt; <span class="hljs-variable">$result </span>: type
<span class="hljs-comment">// code</span>
</code></pre>
<p>La fonction <em>getter</em> est obligatoire pour déclarer le champ calculé <em>attributeName</em>. Chaque fois que l'on accède à l'<em>attributeName</em>, 4D évalue le code de la fonction <code>getter</code> et retourne la valeur <em>$result</em>.</p>
<blockquote>
<p>Un champ calculé peut utiliser la valeur d'un ou plusieurs autres champs calculés. Les appels récursifs génèrent des erreurs.</p>
</blockquote>
<p>La fonction <em>getter</em> définit le type de données du champ calculé grâce au paramètre <em>$result</em>. Les types de résultats suivants sont autorisés :</p>
<ul>
<li>Scalar (text, boolean, date, time, number)</li>
<li>Object</li>
<li>Image</li>
<li>BLOB</li>
<li>Entity (i.e. cs.EmployeeEntity)</li>
<li>Entity selection (i.e. cs.EmployeeSelection)</li>
</ul>
<p>Les propriétés du paramètre <em>$event</em> sont les suivantes :</p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>attributeName</td><td>Text</td><td>Nom du champ calculé</td></tr>
<tr><td>dataClassName</td><td>Text</td><td>Nom de la dataclass</td></tr>
<tr><td>kind</td><td>Text</td><td>&quot;get&quot;</td></tr>
<tr><td>result</td><td>Variant</td><td>Optionnel. Complétez cette propriété avec la valeur Null si vous souhaitez qu'un champ scalaire retourne Null</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemples"></a><a href="#exemples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemples</h4>
<ul>
<li>Le champ calculé <em>fullName</em> :</li>
</ul>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$fullName </span>: Text<span class="hljs-keyword">

  Case of</span>   
    : (<span class="hljs-literal">This</span>.firstName=<span class="hljs-literal">Null</span>) &amp; (<span class="hljs-literal">This</span>.lastName=<span class="hljs-literal">Null</span>)
        <span class="hljs-variable">$event</span>.result:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//utiliser le résultat pour retourner Null</span>
    : (<span class="hljs-literal">This</span>.firstName=<span class="hljs-literal">Null</span>)
        <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.lastName
    : (<span class="hljs-literal">This</span>.lastName=<span class="hljs-literal">Null</span>)
        <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.firstName<span class="hljs-keyword">
    Else</span> 
        <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-literal">This</span>.lastName<span class="hljs-keyword">
    End case</span> 
</code></pre>
<ul>
<li>Un champ calculé peut être basé sur un attribut relatif à une entité :</li>
</ul>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get bigBoss</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result</span>: cs.EmployeeEntity
    <span class="hljs-variable">$result</span>:=<span class="hljs-literal">This</span>.manager.manager

</code></pre>
<ul>
<li>Un champ calculé peut être basé sur un attribut relatif à une entity selection :</li>
</ul>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get coWorkers</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result</span>: cs.EmployeeSelection<span class="hljs-keyword">
    If</span> (<span class="hljs-literal">This</span>.manager.manager=<span class="hljs-literal">Null</span>)
        <span class="hljs-variable">$result</span>:=ds.Employee.<span class="hljs-function">newSelection</span>()<span class="hljs-keyword">
    Else</span> 
        <span class="hljs-variable">$result</span>:=<span class="hljs-literal">This</span>.manager.directReports.<span class="hljs-function">minus</span>(this)<span class="hljs-keyword">
    End if</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="function-set-attributename"></a><a href="#function-set-attributename" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>Function set &lt;attributeName&gt;</code></h3>
<h4><a class="anchor" aria-hidden="true" id="syntaxe-1"></a><a href="#syntaxe-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntaxe</h4>
<pre><code class="hljs css language-4d">{local}<span class="hljs-keyword"> Function</span> set &lt;attributeName&gt;(<span class="hljs-variable">$value </span>: type {; <span class="hljs-variable">$event </span>: Object})
<span class="hljs-comment">// code</span>
</code></pre>
<p>La fonction <em>setter</em> s'exécute chaque fois qu'une valeur est attribuée à l'attribut. Cette fonction traite généralement la ou les valeurs d'entrée et le résultat est réparti entre un ou plusieurs autres attributs.</p>
<p>Le paramètre <em>$value</em> reçoit la valeur attribuée à l'attribut.</p>
<p>Les propriétés du paramètre <em>$event</em> sont les suivantes :</p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>attributeName</td><td>Text</td><td>Nom du champ calculé</td></tr>
<tr><td>dataClassName</td><td>Text</td><td>Nom de la dataclass</td></tr>
<tr><td>kind</td><td>Text</td><td>&quot;set&quot;</td></tr>
<tr><td>value</td><td>Variant</td><td>Valeur à gérer par le champ calculé</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemple-4"></a><a href="#exemple-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> set fullName</span>(<span class="hljs-variable">$value </span>: Text; <span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$p </span>: Integer
    <span class="hljs-variable">$p</span>:=<span class="hljs-function">Position</span>(<span class="hljs-string">" "</span>; <span class="hljs-variable">$value</span>)       
    <span class="hljs-literal">This</span>.firstname:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$value</span>; <span class="hljs-number">1</span>; <span class="hljs-variable">$p</span><span class="hljs-number">-1</span>)  <span class="hljs-comment">// "" if $p&lt;0</span>
    <span class="hljs-literal">This</span>.lastname:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$value</span>; <span class="hljs-variable">$p</span>+<span class="hljs-number">1</span>)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="function-query-attributename"></a><a href="#function-query-attributename" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>Function query &lt;attributeName&gt;</code></h3>
<h4><a class="anchor" aria-hidden="true" id="syntaxe-2"></a><a href="#syntaxe-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntaxe</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">
Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object) -&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">
Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object) -&gt; <span class="hljs-variable">$result </span>: Object
<span class="hljs-comment">// code</span>
</code></pre>
<p>Cette fonction prend en charge trois syntaxes :</p>
<ul>
<li><p>Avec la première syntaxe, vous traitez l'ensemble de la requête via la propriété de l'objet objet <code>$event.result</code>.</p></li>
<li><p>Avec les deuxième et troisième syntaxes, la fonction retourne une valeur dans <em>$result</em> :</p>
<ul>
<li>Si <em>$result</em> est Text, il doit s'agir d'une chaîne de requête valide</li>
<li>Si <em>$result</em> est Object, il doit contenir deux propriétés :</li>
</ul>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>$result.query</td><td>Text</td><td>Chaîne de requête valide avec placeholders (:1, :2, etc.)</td></tr>
<tr><td>$result.parameters</td><td>Collection</td><td>valeurs pour placeholders</td></tr>
</tbody>
</table>
</li>
</ul>
<p>La fonction <code>query</code> s'exécute à chaque fois qu'une requête utilisant le champ calculé est lancée. Il est utile de personnaliser et d'optimiser les requêtes en s'appuyant sur les attributs indexés. Lorsque la fonction <code>query</code> n'est pas implémentée pour un champ calculé, la recherche est toujours séquentielle (basée sur l'évaluation de toutes les valeurs à l'aide de la fonction <code>get &lt;AttributeName&gt;</code>).</p>
<blockquote>
<p>Les fonctionnalités suivantes ne sont pas prises en charge : - l'appel d'une fonction <code>query</code> sur des champs calculés de type Entity ou Entity selection, - l'utilisation du mot clé <code>order by</code> dans la chaîne de requête résultante.</p>
</blockquote>
<p>Les propriétés du paramètre <em>$event</em> sont les suivantes :</p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>attributeName</td><td>Text</td><td>Nom du champ calculé</td></tr>
<tr><td>dataClassName</td><td>Text</td><td>Nom de la dataclass</td></tr>
<tr><td>kind</td><td>Text</td><td>&quot;query&quot;</td></tr>
<tr><td>value</td><td>Variant</td><td>Valeur à gérer par le champ calculé</td></tr>
<tr><td>operator</td><td>Text</td><td>Opérateur de requête (voir également la fonction de classe <a href="/docs/Rx/fr/API/DataClassClass.html#query"><code>query</code></a>). Valeurs possibles :<li>== (égal à, @ est un joker)</li><li>=== (égal à, @ n'est pas un joker)</li><li>!= (non égal à, @ est un joker)</li><li>!== (non égal à, @ n'est pas un joker)</li><li>&lt; (inférieur à)</li><li>&lt;= (less than or equal to)</li><li>&gt; (supérieur à)</li><li>&gt;= (supérieur ou égal à)</li><li>IN (inclus dans)</li><li>% (contient un mot-clé)</li></td></tr>
<tr><td>result</td><td>Variant</td><td>Valeur devant être gérée par le champ calculé. Passez <code>Null</code> dans cette propriété si vous voulez laisser 4D exécuter la requête par défaut (toujours séquentielle pour les champs calculés).</td></tr>
</tbody>
</table>
<blockquote>
<p>Si la fonction retourne une valeur dans <em>$result</em> et qu'une autre valeur est attribuée à la propriété <code>$event.result</code>, la priorité est donnée à <code>$event.result</code>.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="exemples-1"></a><a href="#exemples-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemples</h4>
<ul>
<li>Requête sur le champ calculé <em>fullName</em>.</li>
</ul>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> query fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt;<span class="hljs-variable">$result </span>: Object<span class="hljs-keyword">

    var</span> <span class="hljs-variable">$fullname</span>; <span class="hljs-variable">$firstname</span>; <span class="hljs-variable">$lastname</span>; <span class="hljs-variable">$query </span>: Text<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$operator </span>: Text<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$p </span>: Integer<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$parameters </span>: Collection

    <span class="hljs-variable">$operator</span>:=<span class="hljs-variable">$event</span>.operator
    <span class="hljs-variable">$fullname</span>:=<span class="hljs-variable">$event</span>.value

    <span class="hljs-variable">$p</span>:=<span class="hljs-function">Position</span>(<span class="hljs-string">" "</span>; <span class="hljs-variable">$fullname</span>)<span class="hljs-keyword"> 
    If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)
        <span class="hljs-variable">$firstname</span>:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$fullname</span>; <span class="hljs-number">1</span>; <span class="hljs-variable">$p</span><span class="hljs-number">-1</span>)+<span class="hljs-string">"@"</span>
        <span class="hljs-variable">$lastname</span>:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$fullname</span>; <span class="hljs-variable">$p</span>+<span class="hljs-number">1</span>)+<span class="hljs-string">"@"</span>
        <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$firstname</span>; <span class="hljs-variable">$lastname</span>) <span class="hljs-comment">//collection de deux éléments</span><span class="hljs-keyword">
    Else</span> 
        <span class="hljs-variable">$fullname</span>:=<span class="hljs-variable">$fullname</span>+<span class="hljs-string">"@"</span>
        <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$fullname</span>) <span class="hljs-comment">// collection d'un seul élément</span><span class="hljs-keyword">
    End if</span><span class="hljs-keyword"> 

    Case of</span> 
    : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"=="</span>) | (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"==="</span>)<span class="hljs-keyword">
        If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)
            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"(firstName = :1 and lastName = :2) or (firstName = :2 and lastName = :1)"</span><span class="hljs-keyword">
        Else</span> 
            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName = :1 or lastName = :1"</span><span class="hljs-keyword">
        End if</span> 
    : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"!="</span>)<span class="hljs-keyword">
        If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)
            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName != :1 and lastName != :2 and firstName != :2 and lastName != :1"</span><span class="hljs-keyword">
        Else</span> 
            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName != :1 and lastName != :1"</span><span class="hljs-keyword">
        End if</span><span class="hljs-keyword"> 
    End case</span> 

    <span class="hljs-variable">$result</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"query"</span>; <span class="hljs-variable">$query</span>; <span class="hljs-string">"parameters"</span>; <span class="hljs-variable">$parameters</span>)
</code></pre>
<blockquote>
<p>A noter que l'utilisation de placeholders dans les requêtes basées sur la saisie de texte par l'utilisateur est recommandée pour des raisons de sécurité (voir la description de <a href="/docs/Rx/fr/API/DataClassClass.html#query"><code>query()</code></a>).</p>
</blockquote>
<p>Code d'appel, par exemple :</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$emps</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"fullName = :1"</span>; <span class="hljs-string">"Flora Pionsin"</span>)
</code></pre>
<ul>
<li>Cette fonction gère les requêtes sur le champ calculé <em>age</em> et retourne un objet avec des paramètres :</li>
</ul>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> query age</span>(<span class="hljs-variable">$event </span>: Object)-&gt;<span class="hljs-variable">$result </span>: Object<span class="hljs-keyword">

    var</span> <span class="hljs-variable">$operator </span>: Text<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$age </span>: Integer<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$_ages </span>: Collection

    <span class="hljs-variable">$operator</span>:=<span class="hljs-variable">$event</span>.operator

    <span class="hljs-variable">$age</span>:=<span class="hljs-function">Num</span>(<span class="hljs-variable">$event</span>.value)  <span class="hljs-comment">// entier</span>
    <span class="hljs-variable">$d1</span>:=<span class="hljs-function">Add to date</span>(Current date; -<span class="hljs-variable">$age</span><span class="hljs-number">-1</span>; <span class="hljs-number">0</span>; <span class="hljs-number">0</span>)
    <span class="hljs-variable">$d2</span>:=<span class="hljs-function">Add to date</span>(<span class="hljs-variable">$d1</span>; <span class="hljs-number">1</span>; <span class="hljs-number">0</span>; <span class="hljs-number">0</span>)
    <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$d1</span>; <span class="hljs-variable">$d2</span>)<span class="hljs-keyword">

    Case of</span> 

        : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"=="</span>)
            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday &gt; :1 and birthday &lt;= :2"</span>  <span class="hljs-comment">// après jour1 et avant ou égal à jour2</span>

        : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"==="</span>) 

            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday = :2"</span>  <span class="hljs-comment">// d2 = deuxième date calculée (= jour anniversaire)</span>

        : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"&gt;="</span>)
            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday &lt;= :2"</span>

            <span class="hljs-comment">//... autres opérateurs           </span><span class="hljs-keyword">


    End case</span><span class="hljs-keyword"> 


    If</span> (<span class="hljs-literal">Undefined</span>(<span class="hljs-variable">$event</span>.result))
        <span class="hljs-variable">$result</span>:=New object
        <span class="hljs-variable">$result</span>.query:=<span class="hljs-variable">$query</span>
        <span class="hljs-variable">$result</span>.parameters:=<span class="hljs-variable">$parameters</span><span class="hljs-keyword">
    End if</span>

</code></pre>
<p>Code d'appel, par exemple :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// personnes âgées de 20 à 21 ans (-1 jour)</span>
<span class="hljs-variable">$twenty</span>:=people.<span class="hljs-function">query</span>(<span class="hljs-string">"age = 20"</span>)  <span class="hljs-comment">// appelle le cas "=="</span>

<span class="hljs-comment">// personnes âgées de 20 ans aujourd'hui</span>
<span class="hljs-variable">$twentyToday</span>:=people.<span class="hljs-function">query</span>(<span class="hljs-string">"age === 20"</span>) <span class="hljs-comment">// équivalent à people.query("age is 20") </span>

</code></pre>
<h3><a class="anchor" aria-hidden="true" id="function-orderby-attributename"></a><a href="#function-orderby-attributename" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>Function orderBy &lt;attributeName&gt;</code></h3>
<h4><a class="anchor" aria-hidden="true" id="syntaxe-3"></a><a href="#syntaxe-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntaxe</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span> orderBy &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">
Function</span> orderBy &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text

<span class="hljs-comment">// code</span>
</code></pre>
<p>La fonction <code>orderBy</code> s'exécute chaque fois que le champ calculé doit être ordonné. Elle permet de trier le champ calculé. Par exemple, vous pouvez trier <em>fullName</em> sur les prénoms puis les noms, ou inversement. Lorsque la fonction <code>orderBy</code> n'est pas implémentée pour un champ calculé, le tri est toujours séquentiel (basé sur l'évaluation de toutes les valeurs à l'aide de la fonction <code>get &lt;AttributeName&gt;</code>).</p>
<blockquote>
<p>L'appel d'une fonction <code>orderBy</code> sur des champs calculés de type Entity class ou Entity selection class <strong>n'est pas pris en charge</strong>.</p>
</blockquote>
<p>Les propriétés du paramètre <em>$event</em> sont les suivantes :</p>
<table>
<thead>
<tr><th>Propriété</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>attributeName</td><td>Text</td><td>Nom du champ calculé</td></tr>
<tr><td>dataClassName</td><td>Text</td><td>Nom de la dataclass</td></tr>
<tr><td>kind</td><td>Text</td><td>&quot;orderBy&quot;</td></tr>
<tr><td>value</td><td>Variant</td><td>Valeur à gérer par le champ calculé</td></tr>
<tr><td>operator</td><td>Text</td><td>&quot;desc&quot; or &quot;asc&quot; (default)</td></tr>
<tr><td>descending</td><td>Booléen</td><td><code>true</code> pour l'ordre décroissant, <code>false</code> pour l'ordre croissant</td></tr>
<tr><td>result</td><td>Variant</td><td>Valeur devant être gérée par le champ calculé. Passez <code>Null</code> si vous voulez laisser 4D exécuter le tri par défaut.</td></tr>
</tbody>
</table>
<blockquote>
<p>Vous pouvez utiliser soit <code>l'opérateur</code>, soit la propriété <code>descending</code>. C'est essentiellement une question de style de programmation (voir les exemples).</p>
</blockquote>
<p>Vous pouvez retourner la chaîne <code>orderBy</code> soit dans la propriété de l'objet <code>$event.result</code>, soit dans le résultat de la fonction <em>$result</em>. Si la fonction retourne une valeur dans <em>$result</em> et qu'une autre valeur est attribuée à la propriété <code>$event.result</code>, la priorité est donnée à <code>$event.result</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="exemple-5"></a><a href="#exemple-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h4>
<p>Vous pouvez saisir du code conditionnel :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> orderBy fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">
    If</span> (<span class="hljs-variable">$event</span>.descending=<span class="hljs-literal">True</span>)
        <span class="hljs-variable">$result</span>:=<span class="hljs-string">"firstName desc, lastName desc"</span><span class="hljs-keyword"> 
    Else</span> 
        <span class="hljs-variable">$result</span>:=<span class="hljs-string">"firstName, lastName"</span><span class="hljs-keyword"> 
    End if</span>
</code></pre>
<p>Vous pouvez également saisir du code compact :</p>
<pre><code class="hljs css language-4d">Function orderBy fullName($event : Object)-&gt; $result : Text
    $result:="firstName "+$event.operator+", "lastName "+$event.operator

</code></pre>
<p>Le code conditionnel est nécessaire dans certains cas :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> orderBy age</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">
    If</span> (<span class="hljs-variable">$event</span>.descending=<span class="hljs-literal">True</span>)
        <span class="hljs-variable">$result</span>:=<span class="hljs-string">"birthday asc"</span><span class="hljs-keyword"> 
    Else</span> 
        <span class="hljs-variable">$result</span>:=<span class="hljs-string">"birthday desc"</span><span class="hljs-keyword"> 
    End if</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="alias-attributes-1"></a><a href="#alias-attributes-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Alias attributes</h2>
<h3><a class="anchor" aria-hidden="true" id="aperçu-1"></a><a href="#aperçu-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Aperçu</h3>
<p>An <strong>alias</strong> attribute is built above another attribute of the data model, named <strong>target</strong> attribute. The target attribute can belong to a related dataclass (available through any number of relation levels) or to the same dataclass. An alias attribute stores no data, but the path to its target attribute. You can define as many alias attributes as you want in a dataclass.</p>
<p>Alias attributes are particularly useful to handle N to N relations. They bring more readability and simplicity in the code and in queries by allowing to rely on business concepts instead of implementation details.</p>
<h3><a class="anchor" aria-hidden="true" id="how-to-define-alias-attributes"></a><a href="#how-to-define-alias-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to define alias attributes</h3>
<p>You create an alias attribute in a dataclass by using the <code>Alias</code> keyword in the <a href="#entity-class"><strong>entity class</strong></a> of the dataclass.</p>
<h3><a class="anchor" aria-hidden="true" id="alias-attributename-targetpath"></a><a href="#alias-attributename-targetpath" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>Alias &lt;attributeName&gt; &lt;targetPath&gt;</code></h3>
<h4><a class="anchor" aria-hidden="true" id="syntaxe-4"></a><a href="#syntaxe-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntaxe</h4>
<pre><code class="hljs"><span class="hljs-template-variable">{exposed}</span><span class="xml"> Alias <span class="hljs-tag">&lt;<span class="hljs-name">attributeName</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">targetPath</span>&gt;</span>
</span></code></pre>
<p><em>attributeName</em> must comply with <a href="Concepts/identifiers.html#object-properties">standard rules for property names</a>.</p>
<p><em>targetPath</em> is an attribute path containing one or more levels, such as &quot;employee.company.name&quot;. If the target attribute belongs to the same dataclass, <em>targetPath</em> is the attribute name.</p>
<p>An alias can be used as a part of a path of another alias.</p>
<p>A <a href="#computed-attributes">computed attribute</a> can be used in an alias path, but only as the last level of the path, otherwise, an error is returned. For example, if &quot;fullName&quot; is a computed attribute, an alias with path &quot;employee.fullName&quot; is valid.</p>
<blockquote>
<p>ORDA alias attributes are <strong>not exposed</strong> by default. You must add the <a href="#exposed-vs-non-exposed-functions"><code>exposed</code></a> keyword before the <code>Alias</code> keyword if you want the alias to be available to remote requests.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="using-alias-attributes"></a><a href="#using-alias-attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using alias attributes</h3>
<p>Alias attributes are read-only (except when based upon a scalar attribute of the same dataclass, see the last example below). They can be used instead of their target attribute path in class functions such as:</p>
<table>
<thead>
<tr><th>Function</th></tr>
</thead>
<tbody>
<tr><td><code>dataClass.query()</code>, <code>entitySelection.query()</code></td></tr>
<tr><td><code>entity.toObject()</code></td></tr>
<tr><td><code>entitySelection.toCollection()</code></td></tr>
<tr><td><code>entitySelection.extract()</code></td></tr>
<tr><td><code>entitySelection.orderBy()</code></td></tr>
<tr><td><code>entitySelection.orderByFormula()</code></td></tr>
<tr><td><code>entitySelection.average()</code></td></tr>
<tr><td><code>entitySelection.count()</code></td></tr>
<tr><td><code>entitySelection.distinct()</code></td></tr>
<tr><td><code>entitySelection.sum()</code></td></tr>
<tr><td><code>entitySelection.min()</code></td></tr>
<tr><td><code>entitySelection.max()</code></td></tr>
<tr><td><code>entity.diff()</code></td></tr>
<tr><td><code>entity.touchedAttributes()</code></td></tr>
</tbody>
</table>
<blockquote>
<p>Keep in mind that alias attributes are calculated on the server. In remote configurations, updating alias attributes in entities requires that entities are reloaded from the server.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="alias-properties"></a><a href="#alias-properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Alias properties</h3>
<p>Alias attribute <a href="/docs/Rx/fr/API/DataClassAttributeClass.html#kind"><code>kind</code></a> is &quot;alias&quot;.</p>
<p>An alias attribute inherits its data <a href="/docs/Rx/fr/API/DataClassAttributeClass.html#type"><code>type</code></a> property from the target attribute:</p>
<ul>
<li>if the target attribute <a href="/docs/Rx/fr/API/DataClassAttributeClass.html#kind"><code>kind</code></a> is &quot;storage&quot;, the alias data type is of the same type,</li>
<li>if the target attribute <a href="/docs/Rx/fr/API/DataClassAttributeClass.html#kind"><code>kind</code></a> is &quot;relatedEntity&quot; or &quot;relatedEntities&quot;, the alias data type is of the <code>4D.Entity</code> or <code>4D.EntitySelection</code> type (&quot;<em>classname</em>Entity&quot; or &quot;<em>classname</em>Selection&quot;).</li>
</ul>
<p>Alias attributes based upon relations have a specific <a href="/docs/Rx/fr/API/DataClassAttributeClass.html#path"><code>path</code></a> property, containing the path of their target attributes. Alias attributes based upon attributes of the same dataclass have the same properties as their target attributes (and no <code>path</code> property).</p>
<h3><a class="anchor" aria-hidden="true" id="exemples-2"></a><a href="#exemples-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemples</h3>
<p>Considering the following model:</p>
<p><img src="/docs/Rx/assets/en/ORDA/alias1.png" alt=""></p>
<p>In the Teacher dataclass, an alias attribute returns all students of a teacher:</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.TeacherEntity class</span><span class="hljs-keyword">

Class extends</span> Entity

Alias students courses.student <span class="hljs-comment">//relatedEntities </span>
</code></pre>
<p>In the Student dataclass, an alias attribute returns all teachers of a student:</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.StudentEntity class</span><span class="hljs-keyword">

Class extends</span> Entity

Alias teachers courses.teacher <span class="hljs-comment">//relatedEntities </span>
</code></pre>
<p>In the Course dataclass:</p>
<ul>
<li>an alias attribute returns another label for the &quot;name&quot; attribute</li>
<li>an alias attribute returns the teacher name</li>
<li>an alias attribute returns the student name</li>
</ul>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.CourseEntity class</span><span class="hljs-keyword">

Class extends</span> Entity

Exposed Alias courseName name <span class="hljs-comment">//scalar </span>
Exposed Alias teacherName teacher.name <span class="hljs-comment">//scalar value</span>
Exposed Alias studentName student.name <span class="hljs-comment">//scalar value</span>

</code></pre>
<p>You can then execute the following queries:</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// Find course named "Archaeology"</span>
ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"courseName = :1"</span>;<span class="hljs-string">"Archaeology"</span>)

<span class="hljs-comment">// Find courses given by the professor Smith</span>
ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"teacherName = :1"</span>;<span class="hljs-string">"Smith"</span>)

<span class="hljs-comment">// Find courses where Student "Martin" assists</span>
ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"studentName = :1"</span>;<span class="hljs-string">"Martin"</span>)

<span class="hljs-comment">// Find students who have M. Smith as teacher </span>
ds.Student.<span class="hljs-function">query</span>(<span class="hljs-string">"teachers.name = :1"</span>;<span class="hljs-string">"Smith"</span>)

<span class="hljs-comment">// Find teachers who have M. Martin as Student</span>
ds.Teacher.<span class="hljs-function">query</span>(<span class="hljs-string">"students.name = :1"</span>;<span class="hljs-string">"Martin"</span>)
<span class="hljs-comment">// Note that this very simple query string processes a complex </span>
<span class="hljs-comment">// query including a double join, as you can see in the queryPlan:   </span>
<span class="hljs-comment">// "Join on Table : Course  :  Teacher.ID = Course.teacherID,    </span>
<span class="hljs-comment">//  subquery:[ Join on Table : Student  :  Course.studentID = Student.ID,</span>
<span class="hljs-comment">//  subquery:[ Student.name === Martin]]"</span>
</code></pre>
<p>You can also edit the value of the <em>courseName</em> alias:</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// Rename a course using its alias attribute</span>
<span class="hljs-variable">$arch</span>:=ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"courseName = :1"</span>;<span class="hljs-string">"Archaeology"</span>)
<span class="hljs-variable">$arch</span>.courseName:=<span class="hljs-string">"Archaeology II"</span>
<span class="hljs-variable">$arch</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//courseName and name are "Archaeology II"</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fonctions-exposées-et-non-exposées"></a><a href="#fonctions-exposées-et-non-exposées" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fonctions exposées et non exposées</h2>
<p>For security reasons, all of your data model class functions and alias attributes are <strong>not exposed</strong> (i.e., private) by default to remote requests.</p>
<p>Les requêtes à distance incluent :</p>
<ul>
<li>Les requêtes envoyées par des applications 4D distantes connectées via <code>Open datastore</code></li>
<li>Les requêtes REST</li>
</ul>
<blockquote>
<p>Les requêtes client/serveur 4D standard ne sont pas impactées. Les fonctions de classe de modèle de données sont toujours disponibles dans cette architecture.</p>
</blockquote>
<p>Une fonction qui n'est pas exposée n'est pas disponible sur les applications distantes et ne peut être appelée sur aucune instance d'objet à partir d'une requête REST. Si une application distante tente d'accéder à une fonction non exposée, l'erreur «-10729 - Méthode membre inconnue» est retournée.</p>
<p>Pour permettre à une fonction de classe de modèle de données d'être appelée par une requête distante, vous devez la déclarer explicitement à l'aide du mot-clé <code>exposed</code>. La syntaxe formelle est la suivante :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// déclarer une fonction exposée</span>
exposed<span class="hljs-keyword"> Function</span> &lt;functionName&gt;   
</code></pre>
<blockquote>
<p>Le mot-clé <code>exposed</code> ne peut être utilisé qu'avec les fonctions de classe du modèle de données. S'il est utilisé avec une fonction de <a href="/docs/Rx/fr/Concepts/classes.html">classe utilisateur standard</a>, il est ignoré et une erreur est retournée par le compilateur.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="exemple-6"></a><a href="#exemple-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple</h3>
<p>Vous voulez qu'une fonction exposée utilise une fonction privée dans une classe dataclass :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> DataClass

<span class="hljs-comment">//Fonction publique</span>
<span class="hljs-function">exposed Function registerNewStudent</span>(<span class="hljs-variable">$student </span>: Object) -&gt; <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">

var</span> <span class="hljs-variable">$entity </span>: cs.StudentsEntity

<span class="hljs-variable">$entity</span>:=ds.Students.<span class="hljs-function">new</span>()
<span class="hljs-variable">$entity</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$student</span>)
<span class="hljs-variable">$entity</span>.school:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"name=:1"</span>; <span class="hljs-variable">$student</span>.schoolName).<span class="hljs-function">first</span>()
<span class="hljs-variable">$entity</span>.serialNumber:=<span class="hljs-literal">This</span>.<span class="hljs-function">computeSerialNumber</span>()
<span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()

<span class="hljs-comment">//fonction (privée) non exposée</span><span class="hljs-keyword">
Function</span><span class="hljs-function"> computeIDNumber</span>()-&gt; <span class="hljs-variable">$id </span>: Integer
<span class="hljs-comment">//calculer un nouveau numéro d'ID</span>
<span class="hljs-variable">$id</span>:=...

</code></pre>
<p>Lorsque le code est appelé :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$remoteDS</span>; <span class="hljs-variable">$student</span>; <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">
var</span> <span class="hljs-variable">$id </span>: Integer

<span class="hljs-variable">$remoteDS</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"127.0.0.1:8044"</span>); <span class="hljs-string">"students"</span>)
<span class="hljs-variable">$student</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"firstname"</span>; <span class="hljs-string">"Mary"</span>; <span class="hljs-string">"lastname"</span>; <span class="hljs-string">"Smith"</span>; <span class="hljs-string">"schoolName"</span>; <span class="hljs-string">"Math school"</span>)

<span class="hljs-variable">$status</span>:=<span class="hljs-variable">$remoteDS</span>.Schools.<span class="hljs-function">registerNewStudent</span>(<span class="hljs-variable">$student</span>) <span class="hljs-comment">// OK</span>
<span class="hljs-variable">$id</span>:=<span class="hljs-variable">$remoteDS</span>.Schools.<span class="hljs-function">computeIDNumber</span>() <span class="hljs-comment">// Erreur "Unknown member method" </span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fonctions-locales"></a><a href="#fonctions-locales" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fonctions locales</h2>
<p>Par défaut dans l'architecture client/serveur, les fonctions de modèle de données ORDA sont exécutées <strong>sur le serveur</strong>. Il garantit généralement les meilleures performances puisque seuls la requête de fonction et le résultat sont envoyés sur le réseau.</p>
<p>Cependant, il peut arriver qu'une fonction soit entièrement exécutable côté client (par exemple, lorsqu'elle traite des données qui se trouvent déjà dans le cache local). Dans ce cas, vous pouvez enregistrer les requêtes sur le serveur et ainsi améliorer les performances de l'application en saisissant le mot-clé <code>local</code>. La syntaxe formelle est la suivante :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// déclarer une fonction à exécuter localement en client/serveur </span>
local<span class="hljs-keyword"> Function</span> &lt;functionName&gt;   
</code></pre>
<p>Avec ce mot-clé, la fonction sera toujours exécutée côté client.</p>
<blockquote>
<p>Le mot-clé <code>local</code> ne peut être utilisé qu'avec les fonctions de classe du modèle de données. S'il est utilisé avec une fonction de <a href="/docs/Rx/fr/Concepts/classes.html">classe utilisateur standard</a>, il est ignoré et une erreur est retournée par le compilateur.</p>
</blockquote>
<p>A noter que la fonction fonctionnera même si elle nécessite d'accéder au serveur (par exemple si le cache ORDA est expiré). Toutefois, il est fortement recommandé de s'assurer que la fonction locale n'accède pas aux données sur le serveur, sinon l'exécution locale pourrait n'apporter aucun avantage en termes de performances. Une fonction locale qui génère de nombreuses requêtes au serveur est moins efficace qu'une fonction exécutée sur le serveur qui ne retournerait que les valeurs résultantes. Prenons l'exemple suivant, avec une fonction sur l'entité Schools :</p>
<pre><code class="hljs css language-4d"><span class="hljs-comment">// Obtenir les élèves les plus jeunes  </span>
<span class="hljs-comment">// Utilisation inappropriée du mot-clé local</span>
local<span class="hljs-keyword"> Function</span> getYoungest<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$0 </span>: Object
    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.students.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &gt;= :1"</span>; <span class="hljs-literal">!2000-01-01!</span>).<span class="hljs-function">orderBy</span>(<span class="hljs-string">"birthDate desc"</span>).<span class="hljs-function">slice</span>(<span class="hljs-number">0</span>; <span class="hljs-number">5</span>)
</code></pre>
<ul>
<li><strong>sans</strong> le mot clé <code>local</code>, le résultat est donné en une seule requête</li>
<li><strong>avec</strong> le mot-clé <code>local</code>, 4 requêtes sont nécessaires : une pour obtenir les élèves de l'entité Schools, une pour la <code>query()</code>, une pour le <code>orderBy()</code> et une pour la <code>slice()</code>. Dans cet exemple, l'utilisation du mot-clé <code>local</code> est inappropriée.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="exemples-3"></a><a href="#exemples-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemples</h3>
<h4><a class="anchor" aria-hidden="true" id="calcul-de-lâge"></a><a href="#calcul-de-lâge" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Calcul de l'âge</h4>
<p>Considérons une entité avec un attribut <em>birthDate</em>. Nous souhaitons définir une fonction <code>age()</code> qui serait appelée dans une list box. Cette fonction peut être exécutée sur le client, ce qui évite de déclencher une requête au serveur pour chaque ligne de la list box.</p>
<p>Dans la classe <em>StudentsEntity</em> :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> Entity

<span class="hljs-function">local Function age</span>() -&gt; <span class="hljs-variable">$age</span>: Variant<span class="hljs-keyword">

If</span> (<span class="hljs-literal">This</span>.birthDate#<span class="hljs-literal">!00-00-00!</span>)
    <span class="hljs-variable">$age</span>:=<span class="hljs-function">Year of</span>(Current date)-<span class="hljs-function">Year of</span>(<span class="hljs-literal">This</span>.birthDate)<span class="hljs-keyword">
Else</span> 
    <span class="hljs-variable">$age</span>:=<span class="hljs-literal">Null</span><span class="hljs-keyword">
End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="vérification-des-attributs"></a><a href="#vérification-des-attributs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vérification des attributs</h4>
<p>Nous souhaitons vérifier la cohérence des attributs d'une entité chargée sur le client et mise à jour par l'utilisateur, avant de demander au serveur de les enregistrer.</p>
<p>Sur la classe <em>StudentsEntity</em>, la fonction locale <code>checkData()</code> vérifie l'âge de l'étudiant :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> Entity

<span class="hljs-function">local Function checkData</span>() -&gt; <span class="hljs-variable">$status </span>: Object

<span class="hljs-variable">$status</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"success"</span>; <span class="hljs-literal">True</span>)<span class="hljs-keyword">
Case of</span>
    : (<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>()=<span class="hljs-literal">Null</span>)
        <span class="hljs-variable">$status</span>.success:=<span class="hljs-literal">False</span>
        <span class="hljs-variable">$status</span>.statusText:=<span class="hljs-string">"The birthdate is missing"</span> 

    :((<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>() &lt;<span class="hljs-number">15</span>) | (<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>()&gt;<span class="hljs-number">30</span>) )
        <span class="hljs-variable">$status</span>.success:=<span class="hljs-literal">False</span>
        <span class="hljs-variable">$status</span>.statusText:=<span class="hljs-string">"The student must be between 15 and 30 - This one is "</span>+<span class="hljs-function">String</span>(<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>())<span class="hljs-keyword">
End case</span>
</code></pre>
<p>Code d'appel :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$status </span>: Object

<span class="hljs-comment">//Form.student est chargé avec tous ses a attributs et mis à jour sur un Form</span>
<span class="hljs-variable">$status</span>:=Form.student.<span class="hljs-function">checkData</span>()<span class="hljs-keyword">
If</span> (<span class="hljs-variable">$status</span>.success)
    <span class="hljs-variable">$status</span>:=Form.student.<span class="hljs-function">save</span>() <span class="hljs-comment">// appelle le serveur</span><span class="hljs-keyword">
End if</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="support-in-4d-ide"></a><a href="#support-in-4d-ide" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support in 4D IDE</h2>
<h3><a class="anchor" aria-hidden="true" id="fichiers-de-classe-class-files"></a><a href="#fichiers-de-classe-class-files" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fichiers de classe (class files)</h3>
<p>Une classe utilisateur ORDA de modèle de données est définie en ajoutant, au <a href="/docs/Rx/fr/Concepts/classes.html#class-files">même emplacement que les fichiers de classe usuels</a> (c'est-à-dire dans le dossier <code>/Sources/Classes</code> du dossier projet), un fichier .4dm avec le nom de la classe. Par exemple, une classe d'entité pour la dataclass <code>Utilities</code> sera définie via un fichier <code>UtilitiesEntity.4dm</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="créer-des-classes"></a><a href="#créer-des-classes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Créer des classes</h3>
<p>4D crée préalablement et automatiquement des classes vides en mémoire pour chaque objet de modèle de données disponible.</p>
<p><img src="/docs/Rx/assets/en/ORDA/ORDA_Classes-3.png" alt=""></p>
<blockquote>
<p>Par défaut, les classes ORDA vides ne sont pas affichées dans l'Explorateur. Vous devez les afficher en sélectionnant <strong>Afficher toutes les dataclasses</strong> dans le menu d'options de l'Explorateur : <img src="/docs/Rx/assets/en/ORDA/showClass.png" alt=""></p>
</blockquote>
<p>Les classes d'utilisateurs ORDA ont une icône différente des autres classes. Les classes vides sont grisées :</p>
<p><img src="/docs/Rx/assets/en/ORDA/classORDA2.png" alt=""></p>
<p>Pour créer un fichier de classe ORDA, il vous suffit de double-cliquer sur la classe prédéfinie correspondante dans l'Explorateur. 4D crée le fichier de classe et ajoute le code <code>extends</code>. Par exemple, pour une classe Entity :</p>
<pre><code class="hljs"><span class="hljs-class"><span class="hljs-keyword">Class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Entity</span></span>
</code></pre>
<p>Une fois qu'une classe est définie, son nom n'est plus grisé dans l'Explorateur.</p>
<h3><a class="anchor" aria-hidden="true" id="modifier-des-classes"></a><a href="#modifier-des-classes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modifier des classes</h3>
<p>Pour ouvrir une classe ORDA définie dans l'éditeur de méthode 4D, sélectionnez ou double-cliquez sur un nom de classe ORDA et utilisez <strong>Editer...</strong> dans le menu contextuel/menu d'options de la fenêtre d'Explorateur :</p>
<p><img src="/docs/Rx/assets/en/ORDA/classORDA4.png" alt=""></p>
<p>Pour les classes ORDA basées sur le datastore local (<code>ds</code>), vous pouvez accéder directement au code de la classe depuis la fenêtre de 4D Structure :</p>
<p><img src="/docs/Rx/assets/en/ORDA/classORDA5.png" alt=""></p>
<h3><a class="anchor" aria-hidden="true" id="éditeur-de-méthode"></a><a href="#éditeur-de-méthode" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Éditeur de méthode</h3>
<p>Dans l'éditeur de méthode de 4D, les variables saisies comme une classe ORDA bénéficient automatiquement des fonctionnalités d'auto-complétion. Exemple avec une variable de classe Entity :</p>
<p><img src="/docs/Rx/assets/en/ORDA/AutoCompletionEntity.png" alt=""></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/Rx/fr/ORDA/dsmapping.html"><span class="arrow-prev">← </span><span>Objets Data Model</span></a><a class="docs-next button" href="/docs/Rx/fr/ORDA/entities.html"><span>Travailler avec des données</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#architecture">Architecture</a></li><li><a href="#description-de-la-classe">Description de la classe</a><ul class="toc-headings"><li><a href="#classe-datastore">Classe DataStore</a></li><li><a href="#classe-dataclass">Classe DataClass</a></li><li><a href="#classe-entityselection">Classe EntitySelection</a></li><li><a href="#entity-class">Entity Class</a></li><li><a href="#règles-spécifiques">Règles spécifiques</a></li><li><a href="#exécution-préemptive">Exécution préemptive</a></li></ul></li><li><a href="#champs-calculés-1">Champs calculés</a><ul class="toc-headings"><li><a href="#aperçu">Aperçu</a></li><li><a href="#comment-définir-les-champs-calculés">Comment définir les champs calculés</a></li><li><a href="#function-get-attributename"><code>Function get &lt;attributeName&gt;</code></a></li><li><a href="#function-set-attributename"><code>Function set &lt;attributeName&gt;</code></a></li><li><a href="#function-query-attributename"><code>Function query &lt;attributeName&gt;</code></a></li><li><a href="#function-orderby-attributename"><code>Function orderBy &lt;attributeName&gt;</code></a></li></ul></li><li><a href="#alias-attributes-1">Alias attributes</a><ul class="toc-headings"><li><a href="#aperçu-1">Aperçu</a></li><li><a href="#how-to-define-alias-attributes">How to define alias attributes</a></li><li><a href="#alias-attributename-targetpath"><code>Alias &lt;attributeName&gt; &lt;targetPath&gt;</code></a></li><li><a href="#using-alias-attributes">Using alias attributes</a></li><li><a href="#alias-properties">Alias properties</a></li><li><a href="#exemples-2">Exemples</a></li></ul></li><li><a href="#fonctions-exposées-et-non-exposées">Fonctions exposées et non exposées</a><ul class="toc-headings"><li><a href="#exemple-6">Exemple</a></li></ul></li><li><a href="#fonctions-locales">Fonctions locales</a><ul class="toc-headings"><li><a href="#exemples-3">Exemples</a></li></ul></li><li><a href="#support-in-4d-ide">Support in 4D IDE</a><ul class="toc-headings"><li><a href="#fichiers-de-classe-class-files">Fichiers de classe (class files)</a></li><li><a href="#créer-des-classes">Créer des classes</a></li><li><a href="#modifier-des-classes">Modifier des classes</a></li><li><a href="#éditeur-de-méthode">Éditeur de méthode</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/Rx/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:fr","version:19 R3"]}
              });
            </script></body></html>