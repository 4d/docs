<!DOCTYPE html><html lang="fr"><head><meta name="docsearch:version" content="19 R4"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Utiliser un datastore distant · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Un [datastore](/docs/Rx/fr/ORDA/dsmapping.html#datastore) exposé sur une application 4D Server est accessible simultanément via différents clients :"/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Utiliser un datastore distant · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/Rx/index.html"/><meta property="og:description" content="Un [datastore](/docs/Rx/fr/ORDA/dsmapping.html#datastore) exposé sur une application 4D Server est accessible simultanément via différents clients :"/><meta property="og:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><link rel="shortcut icon" href="/docs/Rx/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/Rx/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/Rx/js/code-blocks-buttons.js"></script><script src="/docs/Rx/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/Rx/css/main.css"/><script src="/docs/Rx/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/Rx/fr"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://developer.4d.com/docs" target="_self">v19 R5 BETA</a></li><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs/Rx" target="_self">v19 R4</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/Rx/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/Rx/en/ORDA/datastores.html">English</a></li><li><a href="/docs/Rx/ja/ORDA/datastores.html">日本語</a></li><li><a href="/docs/Rx/de/ORDA/datastores.html">Deutsch</a></li><li><a href="/docs/Rx/es/ORDA/datastores.html">Español</a></li><li><a href="/docs/Rx/pt/ORDA/datastores.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>ORDA</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Gestion de projet<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/architecture.html">Architecture of a project</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/documentation.html">Documenter un projet</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Project/compiler.html">Compilation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts du langage 4D<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/about.html">À propos du Langage 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/quick-tour.html">Tour d&#x27;horizon</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/operators.html">Operators</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/data-types.html">Types de données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/boolean.html">Booléen</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/date.html">Date</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/null-undefined.html">Null et Indefinie</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/number.html">Numérique (Réel, Entier, Entier long)</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/object.html">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/picture.html">Image</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/pointer.html">Pointeur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/string.html">Chaine</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/time.html">Heure</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/variables.html">Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/arrays.html">Tableaux</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/methods.html">Méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/parameters.html">Paramètres</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/shared.html">Objets et collections partagés</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/classes.html">Classes</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/control-flow.html">Conditions et boucles</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/branching.html">Structures conditionnelles</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/looping.html">Structures répétitives (ou &quot;boucles&quot;)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Tags/tags.html">Balises de transformation</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/error-handling.html">Gestion des erreurs</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/interpreted-compiled.html">Modes interprété et compilé</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/components.html">Composants</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Concepts/identifiers.html">Identifiants</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/overview.html">Que signifie ORDA ?</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/dsmapping.html">Objets Data Model</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/ordaClasses.html">Classes du modèle de données</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/entities.html">Travailler avec des données</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/Rx/fr/ORDA/datastores.html">Utiliser un datastore distant</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/ORDA/glossary.html">Glossaire</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Classes API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/overview.html">Aperçu - API des classes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/BlobClass.html">Blob</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ClassClass.html">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/CollectionClass.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/CryptoKeyClass.html">CryptoKey</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/DataClassClass.html">DataClass</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/DataClassAttributeClass.html">DataClassAttribute</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/DataStoreClass.html">DataStore</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EmailObjectClass.html">Email</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EntityClass.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/EntitySelectionClass.html">EntitySelection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FileClass.html">File</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FolderClass.html">Folder</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/FunctionClass.html">Formula</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/IMAPTransporterClass.html">IMAPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/MailAttachmentClass.html">MailAttachment</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/POP3TransporterClass.html">POP3Transporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SessionClass.html">Session</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SignalClass.html">Signal</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SMTPTransporterClass.html">SMTPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/SystemWorkerClass.html">SystemWorker</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/WebServerClass.html">WebServer</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipArchiveClass.html">ZIPArchive</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipFileClass.html">ZIPFile</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/API/ZipFolderClass.html">ZIPFolder</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Éditeur de code<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/code-editor/navigation.html">Navigation dropdown</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Débogage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/basics.html">Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugger.html">Débogueur</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/breakpoints.html">Points d&#x27;arrêt et points d&#x27;arrêt sur commande</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugging-remote.html">Débogage depuis des machines distantes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Debugging/debugLogFiles.html">Description of log files</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Settings<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/general.html">General page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/interface.html">Interface page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/compiler.html">Compiler page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/database.html">Database page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/backup.html">Backup page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/client-server.html">Client-server page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/web.html">Web page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/sql.html">SQL page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/php.html">PHP page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/security.html">Security page</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/settings/compatibility.html">Compatibility page</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Préférences<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/overview.html">Aperçu</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/general.html">Page Général</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/structure.html">Page Structure</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/forms.html">Page Formulaires</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/methods.html">Page Méthodes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/fr/Preferences/shortcuts.html">Page Raccourcis</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/Rx/docs/ORDA/remoteDatastores.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Utiliser un datastore distant</h1></header><article><div><span><p>Un <a href="/docs/Rx/fr/ORDA/dsmapping.html#datastore">datastore</a> exposé sur une application 4D Server est accessible simultanément via différents clients :</p>
<ul>
<li>Les applications 4D distantes utilisant ORDA pour accéder au datastore principal à l’aide de la commande <code>ds</code>. A noter que l'application 4D distante peut toujours accéder à la base de données en mode classique. Ces accès sont gérés par le <strong>serveur d'applications 4D</strong>.</li>
<li>D'autres applications 4D (4D Remote, 4D Server) ouvrant une session sur le datastore distant via la commande <code>Open datastore</code>. Ces accès sont transmis par le <strong>serveur HTTP REST</strong>.</li>
<li><a href="https://developer.4d.com/go-mobile/">4D for iOS or 4D for Android</a> queries for updating mobile applications. Ces accès sont remis par le <strong>serveur HTTP</strong>.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="ouverture-des-sessions"></a><a href="#ouverture-des-sessions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ouverture des sessions</h2>
<p>Lorsque vous travaillez avec un datastore distant référencé par des appels à la commande <code>Open datastore</code>, la connexion entre les process qui effectuent la requête et le datastore distant est gérée par des sessions.</p>
<p>A session in created on the remote datastore to handle the connection. Cette session est identifiée à l'aide d'un ID de session interne, associé au <code>localID</code> de l'application 4D. Cette session gère automatiquement l'accès aux données, aux sélections d'entités ou aux entités.</p>
<p>Le <code>localID</code> est local à la machine qui se connecte au datastore distant, ce qui signifie :</p>
<ul>
<li>Que si d'autres process de la même application doivent accéder au même datastore distant, ils peuvent utiliser le même <code>localID</code> et partager alors la même session.</li>
<li>Que si un autre process de la même application ouvre le même datastore distant, mais avec un autre <code>localID</code>, il créera une nouvelle session sur le datastore distant.</li>
<li>Que si un autre poste se connecte au même datastore distant avec le même <code>localID</code>, il créera une autre session avec un autre cookie.</li>
</ul>
<p>Ces principes sont illustrés dans les graphiques suivants :</p>
<p><img src="/docs/Rx/assets/en/ORDA/sessions.png" alt=""></p>
<blockquote>
<p>Pour les sessions ouvertes par des requêtes REST, veuillez consulter la page <a href="/docs/Rx/fr/REST/authUsers.html">Utilisateurs et sessions</a>.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="visionnage-des-sessions"></a><a href="#visionnage-des-sessions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Visionnage des sessions</h3>
<p>Les process qui gèrent les sessions d'accès aux datastore apparaissent dans la fenêtre d'administration de 4D Server :</p>
<ul>
<li>&lt;process name&gt;nom : &quot;Gestionnaire REST : &lt; nom du process &gt; &quot;</li>
<li>type : type Worker Server HTTP</li>
<li>session: session name is the user name passed to the <code>Open datastore</code> command.</li>
</ul>
<p>Dans l'exemple suivant, deux process sont en cours d'exécution pour la même session :</p>
<p><img src="/docs/Rx/assets/en/ORDA/sessionAdmin.png" alt=""></p>
<h3><a class="anchor" aria-hidden="true" id="verrouillage-et-transactions"></a><a href="#verrouillage-et-transactions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Verrouillage et transactions</h3>
<p>Les fonctionnalités ORDA relatives au verrouillage d'entité et aux transactions sont gérées au niveau du process dans les datastore distants, tout comme en mode client/serveur ORDA :</p>
<ul>
<li>Si un process verrouille une entité à partir d'un datastore distant, l'entité est verrouillée pour tous les autres process, même lorsque ces process partagent la même session (voir <a href="/docs/Rx/fr/ORDA/entities.html#entity-locking">Verrouillage d'entités</a>). Si plusieurs entités pointant vers le même enregistrement ont été verrouillées dans un process, elles doivent toutes être déverrouillées dans le process pour supprimer le verrou. Si un verrou a été mis sur une entité, il est supprimé lorsqu'il n'existe plus de référence à cette entité en mémoire.</li>
<li>Les transactions peuvent être lancées, validées ou annulées séparément sur chaque datastore distant à l'aide des méthodes <code>dataStore.startTransaction( )</code>, <code>dataStore.cancelTransaction( )</code>, et <code>dataStore.validateTransaction( )</code>. Elles n’ont pas d’incidences sur les autres datastore.</li>
<li>Les commandes classiques du langage 4D (<code>START TRANSACTION</code>, <code>VALIDATE TRANSACTION</code>, <code>CANCEL TRANSACTION</code>) s'appliquent uniquement au datastore principal (renvoyé par <code>ds</code>). Si une entité d'un datastore distant est verrouillée par une transaction dans un process, les autres process ne peuvent pas la mettre à jour, même si ces process partagent la même session.</li>
<li>Les verrous sur les entités sont supprimés et les transactions sont annulées :
<ul>
<li>quand le processus est tué.</li>
<li>quand la session est fermée sur le serveur</li>
<li>lorsque la session est arrêtée à partir de la fenêtre d’administration du serveur.</li>
</ul></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="fermeture-des-sessions"></a><a href="#fermeture-des-sessions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fermeture des sessions</h3>
<p>Une session est automatiquement fermée par 4D lorsqu'il n'y a pas eu d'activité durant son timeout. The default timeout is 60 mn, but this value can be modified using the <em>connectionInfo</em> parameter of the <code>Open datastore</code> command.</p>
<p>Si une demande est envoyée au datastore distant après la fermeture de la session, elle est automatiquement recréée si possible (licence disponible, serveur non arrêté, etc.). A noter cependant que le contexte de la session des verrous et des transactions est perdu (voir ci-dessus).</p>
<h2><a class="anchor" aria-hidden="true" id="optimisation-clientserveur"></a><a href="#optimisation-clientserveur" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optimisation client/serveur</h2>
<p>4D provides an automatic optimization for ORDA requests that use entity selections or load entities in client/server configurations (datastore accessed remotely through <code>ds</code> or via <code>Open datastore</code>). Cette optimisation accélère l'exécution de votre application 4D en réduisant drastiquement le volume d'informations transmises sur le réseau.</p>
<p>Les mécanismes d'optimisation suivants sont mis en œuvre :</p>
<ul>
<li><p>Lorsqu'un client demande une sélection d'entité au serveur, 4D &quot;apprend&quot; automatiquement attributs de la sélection d'entité sont réellement utilisés côté client lors de l'exécution du code, et génère un &quot;contexte d'optimisation&quot; correspondant. Ce contexte est relié à la sélection d'entité et stocke les attributs utilisés. Il sera mis à jour dynamiquement si d'autres attributs sont utilisés par la suite.</p></li>
<li><p>Les requêtes ultérieures envoyées au serveur sur la même sélection d'entité réutilisent automatiquement le contexte d'optimisation et lisent uniquement les attributs nécessaires depuis le serveur, ce qui accélère le traitement. Par exemple, dans une list box basée sur une sélection d'entités, la phase d'apprentissage a lieu durant l'affichage des premières lignes et l'affichage des lignes suivantes est fortement optimisé.</p></li>
<li><p>Un contexte d'optimisation existant peut être passé en tant que propriété à une autre sélection d'entité de la même dataclass, ce qui permet d'éviter la phase d'apprentissage et d'accélérer l'application (voir <a href="#using-the-context-property">Utilisation de la propriété context</a> ci-dessous).</p></li>
</ul>
<p>Les méthodes suivantes associent automatiquement le contexte d'optimisation de la sélection d'entité d'origine à la sélection d'entité retournée :</p>
<ul>
<li><code>entitySelection.and()</code></li>
<li><code>entitySelection.minus()</code></li>
<li><code>entitySelection.or()</code></li>
<li><code>entitySelection.orderBy()</code></li>
<li><code>entitySelection.slice()</code></li>
<li><code>entitySelection.drop()</code></li>
</ul>
<p><strong>Exemple</strong></p>
<p>Considérons le code suivant :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=<span class="hljs-variable">$ds</span>.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstname = ab@"</span>)<span class="hljs-keyword">
 For each</span>(<span class="hljs-variable">$e</span>;<span class="hljs-variable">$sel</span>)
    <span class="hljs-variable">$s</span>:=<span class="hljs-variable">$e</span>.firstname+<span class="hljs-string">" "</span>+<span class="hljs-variable">$e</span>.lastname+<span class="hljs-string">" works for "</span>+<span class="hljs-variable">$e</span>.employer.name <span class="hljs-comment">// $e.employer renvoie à la table Company </span><span class="hljs-keyword">
 End for each</span>
</code></pre>
<p>Thanks to the optimization, this request will only get data from used attributes (firstname, lastname, employer, employer.name) in <em>$sel</em> after a learning phase.</p>
<h3><a class="anchor" aria-hidden="true" id="utilisation-de-la-propriété-context"></a><a href="#utilisation-de-la-propriété-context" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilisation de la propriété context</h3>
<p>Vous pouvez tirer un meilleur parti de l'optimisation en utilisant la propriété <strong>context</strong>. Cette propriété référence un contexte d'optimisation &quot;appris&quot; pour une sélection d'entités. Elle peut être passée comme paramètre aux méthodes ORDA qui retournent de nouvelles sélections d'entités, afin que les sélections d'entités demandent directement au serveur les attributs utilisés, sans passer par la phase d'apprentissage.</p>
<p>Une même propriété de contexte d'optimisation peut être passée à un nombre illimité de sélections d'entités de la même dataclass. Toutes les méthodes ORDA qui gèrent les sélections d'entités prennent en charge la propriété <strong>context</strong> (par exemple les méthodes <code>dataClass.query( )</code> ou <code>dataClass.all( )</code>). Il est toutefois important de garder à l'esprit qu'un contexte est automatiquement mis à jour lorsque de nouveaux attributs sont utilisés dans d'autres parties du code. Si le même contexte est réutilisé dans différents codes, il risque d'être surchargé et de perdre en efficacité.</p>
<blockquote>
<p>Un mécanisme similaire est mis en place pour des entités qui sont chargées, afin que seuls les attributs utilisés soient demandés (voir la méthode <code>dataClass.get( )</code>).</p>
</blockquote>
<p><strong>Exemple avec la méthode <code>dataClass.query( )</code> :</strong></p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel1</span>; <span class="hljs-variable">$sel2</span>; <span class="hljs-variable">$sel3</span>; <span class="hljs-variable">$sel4</span>; <span class="hljs-variable">$querysettings</span>; <span class="hljs-variable">$querysettings2 </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$data </span>: Collection
 <span class="hljs-variable">$querysettings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"shortList"</span>)
 <span class="hljs-variable">$querysettings2</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"longList"</span>)

 <span class="hljs-variable">$sel1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = S@"</span>;<span class="hljs-variable">$querysettings</span>)
 <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractData</span>(<span class="hljs-variable">$sel1</span>) <span class="hljs-comment">// In extractData method an optimization is triggered and associated to context "shortList"</span>

 <span class="hljs-variable">$sel2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Sm@"</span>;<span class="hljs-variable">$querysettings</span>)
 <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractData</span>(<span class="hljs-variable">$sel2</span>) <span class="hljs-comment">// In extractData method the optimization associated to context "shortList" is applied</span>

 <span class="hljs-variable">$sel3</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Smith"</span>;<span class="hljs-variable">$querysettings2</span>)
 <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractDetailedData</span>(<span class="hljs-variable">$sel3</span>) <span class="hljs-comment">// In extractDetailedData method an optimization is triggered and associated to context "longList"</span>

 <span class="hljs-variable">$sel4</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Brown"</span>;<span class="hljs-variable">$querysettings2</span>)
 <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractDetailedData</span>(<span class="hljs-variable">$sel4</span>) <span class="hljs-comment">// In extractDetailedData method the optimization associated to context "longList" is applied</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="listbox-basée-sur-une-sélection-dentités"></a><a href="#listbox-basée-sur-une-sélection-dentités" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Listbox basée sur une sélection d'entités</h3>
<p>L'optimisation d'une sélection d'entités s'applique automatiquement aux listbox basées sur une sélection d'entités dans les configurations client/serveur, au moment d'afficher et de dérouler le contenu d'une listbox : seuls les attributs affichés dans la listbox sont demandés depuis le serveur.</p>
<p>Un contexte spécifique nommé &quot;mode page&quot; est également proposé lorsque l'entité courante de la sélection est chargée à l'aide de l'expression <strong>élément courant</strong> de la listbox (voir <a href="/docs/Rx/fr/FormObjects/listboxOverview.html#list-box-types">List box de type collection ou entity selection</a>). Cette fonctionnalité vous permet de ne pas surcharger le contexte initial de la listbox dans ce cas précis, notamment si la &quot;page&quot; requiert des attributs supplémentaires. A noter que seule l'utilisation de l'expression <strong>Élément courant</strong> permettra de créer/utiliser le contexte de la page (l'accès via <code>entitySelection[index]</code> modifiera le contexte de la sélection d'entité).</p>
<p>Cette optimisation sera également prise en charge par les requêtes ultérieures envoyées au serveur via les méthodes de navigation des entités. Les méthodes suivantes associeront automatiquement le contexte d'optimisation de l'entité source à l'entité retournée :</p>
<ul>
<li><code>entity.next( )</code></li>
<li><code>entity.first( )</code></li>
<li><code>entity.last( )</code></li>
<li><code>entity.previous( )</code></li>
</ul>
<p>Par exemple, le code suivant charge l'entité sélectionnée et permet de naviguer dans la sélection d'entités. Les entités sont chargées dans un contexte séparé et le contexte initial de la listbox demeure inchangé :</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$myEntity</span>:=Form.currentElement <span class="hljs-comment">//expression de l'élément courant </span>
  <span class="hljs-comment">//... faire quelque chose</span>
 <span class="hljs-variable">$myEntity</span>:=<span class="hljs-variable">$myEntity</span>.<span class="hljs-function">next</span>() <span class="hljs-comment">//charge la prochaine entité à l'aide du même contexte</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/Rx/fr/ORDA/entities.html"><span class="arrow-prev">← </span><span>Travailler avec des données</span></a><a class="docs-next button" href="/docs/Rx/fr/ORDA/glossary.html"><span>Glossaire</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#ouverture-des-sessions">Ouverture des sessions</a><ul class="toc-headings"><li><a href="#visionnage-des-sessions">Visionnage des sessions</a></li><li><a href="#verrouillage-et-transactions">Verrouillage et transactions</a></li><li><a href="#fermeture-des-sessions">Fermeture des sessions</a></li></ul></li><li><a href="#optimisation-clientserveur">Optimisation client/serveur</a><ul class="toc-headings"><li><a href="#utilisation-de-la-propriété-context">Utilisation de la propriété context</a></li><li><a href="#listbox-basée-sur-une-sélection-dentités">Listbox basée sur une sélection d'entités</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/Rx/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:fr","version:19 R4"]}
              });
            </script></body></html>