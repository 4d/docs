<!DOCTYPE html><html lang="es"><head><meta name="docsearch:version" content="19 R4"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>DataClass · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Una [DataClass](/docs/Rx/es/ORDA/dsmapping.html#dataclass) ofrece una interfaz de objeto a una tabla de la base de datos. Todas las clases de datos de una aplicación 4D están disponibles como una propiedad del `ds` [datastore](/docs/Rx/es/ORDA/dsmapping.html#datastore)."/><meta name="docsearch:language" content="es"/><meta property="og:title" content="DataClass · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/Rx/index.html"/><meta property="og:description" content="Una [DataClass](/docs/Rx/es/ORDA/dsmapping.html#dataclass) ofrece una interfaz de objeto a una tabla de la base de datos. Todas las clases de datos de una aplicación 4D están disponibles como una propiedad del `ds` [datastore](/docs/Rx/es/ORDA/dsmapping.html#datastore)."/><meta property="og:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/Rx/img/logohome.png"/><link rel="shortcut icon" href="/docs/Rx/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/Rx/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/Rx/js/code-blocks-buttons.js"></script><script src="/docs/Rx/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/Rx/css/main.css"/><script src="/docs/Rx/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/Rx/es"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://developer.4d.com/docs" target="_self">v19 R5 BETA</a></li><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs/Rx" target="_self">v19 R4</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/Rx/img/language.svg" alt="Languages icon"/>Español</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/Rx/en/API/DataClassClass.html">English</a></li><li><a href="/docs/Rx/ja/API/DataClassClass.html">日本語</a></li><li><a href="/docs/Rx/de/API/DataClassClass.html">Deutsch</a></li><li><a href="/docs/Rx/fr/API/DataClassClass.html">Français</a></li><li><a href="/docs/Rx/pt/API/DataClassClass.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Clases API</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Gestión de proyecto<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Project/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Project/architecture.html">Arquitectura de un proyecto</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Project/documentation.html">Documentar un proyecto</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Project/compiler.html">Compilación</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Conceptos del lenguaje 4D<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/about.html">Acerca del lenguaje 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/quick-tour.html">Un recorrido rápido</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/operators.html">Operadores</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/data-types.html">Tipos de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/boolean.html">Booleano</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/date.html">Fecha</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/null-undefined.html">Null e indefinido</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/number.html">Número (Real, Entero largo, Entero)</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/object.html">Objeto</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/picture.html">Imagen</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/pointer.html">Puntero</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/string.html">Cadena</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/time.html">Hora</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/variables.html">Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/arrays.html">Arrays</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/methods.html">Métodos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/parameters.html">Parámetros</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/shared.html">Objetos y colecciones compartidos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/classes.html">Clases</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/control-flow.html">Condiciones y bucles</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/branching.html">Estructuras condicionales</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/looping.html">Estructuras repetitivas (bucles)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Tags/tags.html">Etiquetas de transformación</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/error-handling.html">Gestión de errores</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/interpreted-compiled.html">Modos interpretado y compilado</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/components.html">Componentes</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Concepts/identifiers.html">Identificadores</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/es/ORDA/overview.html">¿Qué es ORDA?</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/ORDA/dsmapping.html">Objeto del modelo de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/ORDA/ordaClasses.html">Clases del modelo de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/ORDA/entities.html">Trabajar con los datos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/ORDA/datastores.html">Utilizar un almacén de datos remoto</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/ORDA/glossary.html">Glosario</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Clases API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/overview.html">Generalidades - API de clases</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/BlobClass.html">Blob</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/ClassClass.html">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/CollectionClass.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/CryptoKeyClass.html">CryptoKey</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/Rx/es/API/DataClassClass.html">DataClass</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/DataClassAttributeClass.html">DataClassAttribute</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/DataStoreClass.html">DataStore</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/EmailObjectClass.html">Email</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/EntityClass.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/EntitySelectionClass.html">EntitySelection</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/FileClass.html">File</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/FolderClass.html">Folder</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/FunctionClass.html">Formula</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/IMAPTransporterClass.html">IMAPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/MailAttachmentClass.html">MailAttachment</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/POP3TransporterClass.html">POP3Transporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/SessionClass.html">Sesión</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/SignalClass.html">Signal</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/SMTPTransporterClass.html">SMTPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/SystemWorkerClass.html">SystemWorker</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/WebServerClass.html">WebServer</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/ZipArchiveClass.html">ZIPArchive</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/ZipFileClass.html">ZIPFile</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/API/ZipFolderClass.html">ZIPFolder</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Editor de código<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/es/code-editor/navigation.html">Despliegue de navegación</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Depuración<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Debugging/basics.html">Básicos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Debugging/debugger.html">Depurador</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Debugging/breakpoints.html">Puntos de ruptura y captura de comandos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Debugging/debugging-remote.html">Depuración desde máquinas remotas</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Debugging/debugLogFiles.html">Descripción de los archivos de historial</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Settings<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/general.html">Página General</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/interface.html">Página interfaz</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/compiler.html">Página Compilador</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/database.html">Página Base de datos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/backup.html">Página de respaldo</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/client-server.html">Página Cliente/Servidor</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/web.html">Página Web</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/sql.html">Página SQL</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/php.html">Págin PHP</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/security.html">Página seguridad</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/settings/compatibility.html">Página de compatibilidad</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Preferencias<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Preferences/overview.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Preferences/general.html">Página general</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Preferences/structure.html">Página Estructura</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Preferences/forms.html">Página formulario</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Preferences/methods.html">Página Métodos</a></li><li class="navListItem"><a class="navItem" href="/docs/Rx/es/Preferences/shortcuts.html">Página Atajos</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/Rx/docs/API/DataClassClass.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">DataClass</h1></header><article><div><span><p>Una <a href="/docs/Rx/es/ORDA/dsmapping.html#dataclass">DataClass</a> ofrece una interfaz de objeto a una tabla de la base de datos. Todas las clases de datos de una aplicación 4D están disponibles como una propiedad del <code>ds</code> <a href="/docs/Rx/es/ORDA/dsmapping.html#datastore">datastore</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="resumen"></a><a href="#resumen" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resumen</h3>
<table>
<thead>
<tr><th></th></tr>
</thead>
<tbody>
<tr><td><a href="#attributename"><strong><em>.attributeName</em></strong> : DataClassAttribute</a><p>    </td></tr>
<tr><td><a href="#all"><strong>.all</strong> ( { <em>settings</em> : Object } ) : 4D.EntitySelection</a><p>    consulta el datastore para encontrar todas las entidades relacionadas con la dataclass y las devuelve como una selección de entidades</td></tr>
<tr><td><a href="#fromcollection"><strong>.fromCollection</strong>( <em>objectCol</em> : Collection { ; <em>settings</em> : Object } ) : 4D.EntitySelection</a><p>    actualiza o crea entidades en la clase de datos según la colección de objetos <em>objectCol</em>, y devuelve la selección de entidades correspondiente</td></tr>
<tr><td><a href="#get"><strong>.get</strong>( <em>primaryKey</em> : Integer { ; <em>settings</em> : Object } ) : 4D.Entity<br><strong>.get</strong>( <em>primaryKey</em> : Text { ; <em>settings</em> : Object } ) : 4D.Entity</a><p>    consulta la clase de datos para recuperar la entidad que coincide con el parámetro <em>primaryKey</em></td></tr>
<tr><td><a href="#getdatastore"><strong>.getDataStore()</strong>: cs.DataStore</a><p>    </td></tr>
<tr><td><a href="#getinfo"><strong>.getInfo()</strong> : Object </a><p>    devuelve un objeto que proporciona información sobre la clase de datos</td></tr>
<tr><td><a href="#new"><strong>.new()</strong> : 4D.Entity </a><p>    crea en memoria y devuelve una nueva entidad en blanco relacionada con la Dataclass</td></tr>
<tr><td><a href="#newselection"><strong>.newSelection</strong>( { <em>keepOrder</em> : Integer } ) : 4D.EntitySelection </a><p>    </td></tr>
<tr><td><a href="#query"><strong>.query</strong>( <em>queryString</em> : Text { ; <em>...value</em> : any } { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection <br><strong>.query</strong>( <em>formula</em> : Object { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection </a><p>    </td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="attributename"></a><a href="#attributename" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.<em>attributeName</em></h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong><em>.attributeName</em></strong> : DataClassAttribute</p>
<h4><a class="anchor" aria-hidden="true" id="descripción"></a><a href="#descripción" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>Los atributos de las clases de datos sonobjetos que están disponibles directamente como propiedades de estas clases.</p>
<p>Los objetos devueltos son del tipo class <a href="/docs/Rx/es/API/DataClassAttributeClass.html"><code>DataClassAttribute</code></a>. Estos objetos tienen propiedades que puede leer para obtener información sobre los atributos de su clase de datos.</p>
<blockquote>
<p>Los objetos del atributo Dataclass pueden ser modificados, pero la estructura subyacente de la base de datos no será alterada.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-1"></a><a href="#ejemplo-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$salary</span>:=ds.Employee.salary <span class="hljs-comment">//devuelve el atributo salary en la clase de datos Employee</span>
<span class="hljs-variable">$compCity</span>:=ds.Company[<span class="hljs-string">"city"</span>] <span class="hljs-comment">//devuelve el atributo city en la clase de datos Company</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2"></a><a href="#ejemplo-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<p>Considerando la siguiente estructura de la base:</p>
<p><img src="/docs/Rx/assets/en/API/dataclassAttribute.png" alt=""></p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$firstnameAtt</span>;<span class="hljs-variable">$employerAtt</span>;<span class="hljs-variable">$employeesAtt </span>: Object

 <span class="hljs-variable">$firstnameAtt</span>:=ds.Employee.firstname
  <span class="hljs-comment">//{name:firstname,kind:storage,fieldType:0,type:string,fieldNumber:2,indexed:true,</span>
  <span class="hljs-comment">//keyWordIndexed:false,autoFilled:false,mandatory:false,unique:false}</span>

 <span class="hljs-variable">$employerAtt</span>:=ds.Employee.employer
  <span class="hljs-comment">//{name:employer,kind:relatedEntity,relatedDataClass:Company,</span>
  <span class="hljs-comment">//fieldType:38,type:Company,inverseName:employees}</span>
  <span class="hljs-comment">//38=Is object</span>

 <span class="hljs-variable">$employeesAtt</span>:=ds.Company.employees
  <span class="hljs-comment">//{name:employees,kind:relatedEntities,relatedDataClass:Employee,</span>
  <span class="hljs-comment">//fieldType:42,type:EmployeeSelection,inverseName:employer}</span>
  <span class="hljs-comment">//42=Is collection</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-3"></a><a href="#ejemplo-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 3</h4>
<p>Considerando las propiedades de tabla siguientes:</p>
<p><img src="/docs/Rx/assets/en/API/dataclassAttribute2.png" alt=""></p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sequenceNumberAtt </span>: Object
 <span class="hljs-variable">$sequenceNumberAtt</span>=ds.Employee.sequenceNumber
  <span class="hljs-comment">//{name:sequenceNumber,kind:storage,fieldType:0,type:string,fieldNumber:13,</span>
  <span class="hljs-comment">//indexed:true,keyWordIndexed:false,autoFilled:true,mandatory:false,unique:true}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="all"></a><a href="#all" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.all()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17 R5</td><td>Soporte del parámetro <em>settings</em></td></tr>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.all</strong> ( { <em>settings</em> : Object } ) : 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>parámetros</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Opciones de construcción: context</td></tr>
<tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Referencias sobre todas las entidades relacionadas con la clase de datos</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-1"></a><a href="#descripción-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.all()</code> consulta el datastore para encontrar todas las entidades relacionadas con la dataclass y las devuelve como una selección de entidades.</p>
<p>Las entidades se devuelven en el orden por defecto, que es inicialmente el orden en que fueron creadas. Tenga en cuenta, sin embargo, que si se han eliminado entidades y se han añadido otras nuevas, el orden por defecto ya no refleja el orden de creación.</p>
<p>Si no se encuentra la entidad correspondiente, se devuelve una selección de entidades vacía.</p>
<p>Se aplica carga diferida.</p>
<p><strong>parámetros</strong></p>
<p>En el parámetro opcional <em>settings</em> se puede pasar un objeto que contenga opciones adicionales. Se soporta la siguiente propiedad:</p>
<table>
<thead>
<tr><th>Propiedad</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>context</td><td>Texto</td><td>Etiqueta para el contexto de optimización aplicado a la selección de entidades. Este contexto será utilizado por el código que maneja la selección de entidades para que pueda beneficiarse de la optimización. Esta funcionalidad está <a href="/docs/Rx/es/ORDA/entities.html#client-server-optimization">diseñada para el procesamiento cliente/servidor de ORDA</a>.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="ejemplo"></a><a href="#ejemplo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$allEmp </span>: cs.EmployeeSelection
 <span class="hljs-variable">$allEmp</span>:=ds.Employee.<span class="hljs-function">all</span>()
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fromcollection"></a><a href="#fromcollection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.fromCollection()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17 R5</td><td>Soporte del parámetro <em>settings</em></td></tr>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.fromCollection</strong>( <em>objectCol</em> : Collection { ; <em>settings</em> : Object } ) : 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>objectCol</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Colección de objetos a mapear con entidades</td></tr>
<tr><td>parámetros</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Opciones de construcción: context</td></tr>
<tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Selección de entidades llenadas de la colección</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-2"></a><a href="#descripción-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.fromCollection()</code> actualiza o crea entidades en la clase de datos según la colección de objetos <em>objectCol</em>, y devuelve la selección de entidades correspondiente.</p>
<p>En el parámetro <em>objectCol</em>, pasa una colección de objetos para crear nuevas entidades o actualizar las existentes de la clase de datos. Los nombres de las propiedades deben ser los mismos que los de los atributos de la clase de datos. Si un nombre de propiedad no existe en la clase de datos, se ignora. Si un valor de atributo no está definido en la colección, su valor es null.</p>
<p>El mapeo entre los objetos de la colección y las entidades se realiza sobre los <strong>nombres de atributos</strong> y <strong>tipos coincidentes</strong>. Si la propiedad de un objeto tiene el mismo nombre que el atributo de una entidad pero sus tipos no coinciden, el atributo de la entidad no se llena.</p>
<p><strong>Crear o actualizar modos</strong></p>
<p>Para cada objeto de <em>objectCol</em>:</p>
<ul>
<li>Si el objeto contiene una propiedad booleana &quot;__NEW&quot; establecida en false (o no contiene una propiedad booleana &quot;__NEW&quot;), la entidad se actualiza o se crea con los valores correspondientes de las propiedades del objeto. No se realiza ninguna comprobación con respecto a la llave primaria:
<ul>
<li>Si la llave primaria se da y existe, la entidad se actualiza. En este caso, la llave primaria puede darse tal cual o con una propiedad &quot;__KEY&quot; (llenada con el valor de la llave primaria).</li>
<li>Si se da la llave primaria (tal cual) y no existe, se crea la entidad</li>
<li>Si no se da la llave primaria, se crea la entidad y se asigna el valor de la llave primaria con respecto a las reglas estándar de la base de datos.</li>
</ul></li>
<li>Si el objeto contiene una propiedad booleana &quot;__NEW&quot; establecida como <strong>true</strong>, la entidad se crea con los valores correspondientes de los atributos del objeto. Se realiza una verificación con respecto a la llave primaria:
<ul>
<li>Si se da la llave primaria (tal cual) y existe, se envía un error</li>
<li>Si se da la llave primaria (tal cual) y no existe, se crea la entidad</li>
<li>Si no se da la primaria, se crea la entidad y se asigna el valor de la llave primaria con respecto a las reglas estándar de la base de datos.</li>
</ul></li>
</ul>
<blockquote>
<p>La propiedad &quot;__KEY&quot; que contiene un valor sólo se tiene en cuenta cuando la propiedad &quot;__NEW&quot; se establece como <strong>false</strong> (o se omite) y existe una entidad correspondiente. En todos los demás casos, el valor de la propiedad &quot;__KEY&quot; se ignora, el valor de la llave primaria debe pasarse &quot;tal cual&quot;.</p>
</blockquote>
<p><strong>Related entities</strong></p>
<p>Los objetos de <em>objectCol</em> pueden contener uno o más objetos anidados que presentan una o más entidades relacionadas, lo que puede ser útil para crear o actualizar enlaces entre entidades.</p>
<p>Los objetos anidados que presentan entidades relacionadas deben contener una propiedad &quot;__KEY&quot; (llenada con el valor de la llave primaria de la entidad relacionada) o el atributo de llave primaria de la propia entidad relacionada. El uso de una propiedad __KEY permite la independencia del nombre del atributo de la llave primaria.</p>
<blockquote>
<p>El contenido de las entidades relacionadas no puede ser creado / actualizado a través de este mecanismo.</p>
</blockquote>
<p><strong>Sello</strong></p>
<p>Si se da un atributo __STAMP, se realiza una comprobación con el sello en el almacén de datos y se puede devolver un error (&quot;El sello dado no coincide con el actual para el registro# XX de la tabla XXXX&quot;). Para más información, consulte <a href="/docs/Rx/es/ORDA/entities.html#entity-locking">Entity locking</a>.</p>
<p><strong>parámetros</strong></p>
<p>En el parámetro opcional <em>settings</em> se puede pasar un objeto que contenga opciones adicionales. Se soporta la siguiente propiedad:</p>
<table>
<thead>
<tr><th>Propiedad</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>context</td><td>Texto</td><td>Etiqueta para el contexto de optimización aplicado a la selección de entidades. Este contexto será utilizado por el código que maneja la selección de entidades para que pueda beneficiarse de la optimización. Esta funcionalidad está <a href="/docs/Rx/es/ORDA/entities.html#client-server-optimization">diseñada para el procesamiento cliente/servidor de ORDA</a>.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-1-1"></a><a href="#ejemplo-1-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 1</h4>
<p>Queremos actualizar una entidad existente. La propiedad __NEW no se da, la llave primaria del empleado se da y existe:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">668</span> <span class="hljs-comment">//Existing PK in Employee table</span>
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Arthur"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"ID"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//PK existente en la dataClass relacionada Company</span>
  <span class="hljs-comment">// Para este empleado, podemos cambiar la Empresa utilizando otro PK existente en la dataClass relacionada Company</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-1"></a><a href="#ejemplo-2-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<p>Queremos actualizar una entidad existente. La propiedad __NEW no se da, la llave primaria del empleado está con el atributo __KEY y existe:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.__KEY:=<span class="hljs-number">1720</span> <span class="hljs-comment">//PK existente en la tabla Employee</span>
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"John"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Boorman"</span>
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"ID"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">// PK existente en la dataClass relacionada Company</span>
  <span class="hljs-comment">// Para este empleado, podemos cambiar la Empresa utilizando otro PK existente en la dataClass relacionada Company</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-3-1"></a><a href="#ejemplo-3-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 3</h4>
<p>Queremos crear simplemente una nueva entidad a partir de una colección:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Victor"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Hugo"</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-4"></a><a href="#ejemplo-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 4</h4>
<p>Queremos crear una entidad. La propiedad __NEW es True, la llave primaria del empleado no se da:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Mary"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"__KEY"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//PK existente en la dataClass Company</span>
 <span class="hljs-variable">$emp</span>.__NEW:=<span class="hljs-literal">True</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)






</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-5"></a><a href="#ejemplo-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 5</h4>
<p>Queremos crear una entidad. La propiedad __NEW se omite, la llave primaria del empleado se da y no existe:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">10000</span> <span class="hljs-comment">//Llave primaria inexistente</span>
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Françoise"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Sagan"</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-6"></a><a href="#ejemplo-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 6</h4>
<p>En este ejemplo, la primera entidad se creará y guardará pero la segunda fallará ya que ambas utilizan la misma llave primaria:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp</span>; <span class="hljs-variable">$emp2 </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$empsCollection</span>:=New collection
 <span class="hljs-variable">$emp</span>:=New object
 <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">10001</span> <span class="hljs-comment">// Llave primaria inexistente</span>
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Simone"</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>
 <span class="hljs-variable">$emp</span>.__NEW:=<span class="hljs-literal">True</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>)

 <span class="hljs-variable">$emp2</span>:=New object
 <span class="hljs-variable">$emp2</span>.ID:=<span class="hljs-number">10001</span> <span class="hljs-comment">// La misma llave primaria, ya existente</span>
 <span class="hljs-variable">$emp2</span>.firstName:=<span class="hljs-string">"Marc"</span>
 <span class="hljs-variable">$emp2</span>.lastName:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$emp2</span>.__NEW:=<span class="hljs-literal">True</span>
 <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp2</span>)
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)
  <span class="hljs-comment">//se crea la primera entidad</span>
  <span class="hljs-comment">//error de llave duplicada para la segunda entidad</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ver-también"></a><a href="#ver-también" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ver también</h4>
<p><a href="/docs/Rx/es/API/EntitySelectionClass.html#tocollection"><strong>.toCollection()</strong></a></p>
<h2><a class="anchor" aria-hidden="true" id="get"></a><a href="#get" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.get()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.get</strong>( <em>primaryKey</em> : Integer { ; <em>settings</em> : Object } ) : 4D.Entity<br><strong>.get</strong>( <em>primaryKey</em> : Text { ; <em>settings</em> : Object } ) : 4D.Entity</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>primaryKey</td><td>Integer OR Text</td><td style="text-align:center">-&gt;</td><td>Valor de la llave primaria de la entidad a recuperar</td></tr>
<tr><td>parámetros</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Opciones de construcción: context</td></tr>
<tr><td>Resultado</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Entidad que coincide con la llave primaria designada</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-3"></a><a href="#descripción-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.get()</code> consulta la clase de datos para recuperar la entidad que coincide con el parámetro <em>primaryKey</em>.</p>
<p>En <em>primaryKey</em>, pase el valor de la llave primaria de la entidad a recuperar. El tipo de valor debe coincidir con el tipo de la llave primaria definida en el almacén de datos (Entero o Texto). También puede asegurarse de que el valor de la llave primaria se devuelva siempre como Texto utilizando la función <a href="/docs/Rx/es/API/EntityClass.html#getkey"><code>.getKey()</code></a> con el parámetro <code>dk key as string</code>.</p>
<p>Si no se encuentra ninguna entidad con<em>primaryKey</em>, se devuelve una entidad <strong>Null</strong>.</p>
<p>Se aplica la carga diferida, lo que significa que los datos relacionados se cargan desde el disco sólo cuando son necesarios.</p>
<p><strong>parámetros</strong></p>
<p>En el parámetro opcional <em>settings</em> se puede pasar un objeto que contenga opciones adicionales. Se soporta la siguiente propiedad:</p>
<table>
<thead>
<tr><th>Propiedad</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>context</td><td>Texto</td><td>Etiqueta para el contexto de optimización automática aplicado a la entidad. Este contexto será utilizado por el código siguiente que carga la entidad para que pueda beneficiarse de la optimización. Esta funcionalidad está <a href="/docs/Rx/es/ORDA/entities.html#client-server-optimization">diseñada para el procesamiento cliente/servidor ORDA</a>.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-1-2"></a><a href="#ejemplo-1-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmployeeEntity<span class="hljs-keyword">  
 var</span> <span class="hljs-variable">$entity2 </span>: cs.InvoiceEntity
 <span class="hljs-variable">$entity</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">167</span>) <span class="hljs-comment">// devuelve la entidad cuyo valor de llave primaria es 167</span>
 <span class="hljs-variable">$entity2</span>:=ds.Invoice.<span class="hljs-function">get</span>(<span class="hljs-string">"DGGX20030"</span>) <span class="hljs-comment">// devuelve la entidad cuyo valor de llave primaria es "DGGX20030"</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-2"></a><a href="#ejemplo-2-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<p>Este ejemplo ilustra el uso de la propiedad <em>context</em>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$e1</span>; <span class="hljs-variable">$e2</span>; <span class="hljs-variable">$e3</span>; <span class="hljs-variable">$e4 </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$settings</span>; <span class="hljs-variable">$settings2 </span>: Object

 <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"detail"</span>)
 <span class="hljs-variable">$settings2</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"summary"</span>)

 <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>;<span class="hljs-variable">$settings</span>)
<span class="hljs-function"> completeAllData</span>(<span class="hljs-variable">$e1</span>) <span class="hljs-comment">// En el método completeAllData, se lanza una optimización y se asocia al contexto "detail"</span>

 <span class="hljs-variable">$e2</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">2</span>;<span class="hljs-variable">$settings</span>)
<span class="hljs-function"> completeAllData</span>(<span class="hljs-variable">$e2</span>) <span class="hljs-comment">// En el método completeAllData, se aplica la optimización asociada al contexto "detail"</span>

 <span class="hljs-variable">$e3</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">3</span>;<span class="hljs-variable">$settings2</span>)
<span class="hljs-function"> completeSummary</span>(<span class="hljs-variable">$e3</span>) <span class="hljs-comment">//En el método completeSummary, se lanza una optimización y se asocia al contexto "summary"</span>

 <span class="hljs-variable">$e4</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">4</span>;<span class="hljs-variable">$settings2</span>)
<span class="hljs-function"> completeSummary</span>(<span class="hljs-variable">$e4</span>) <span class="hljs-comment">//En el método completeSummary se aplica la optimización asociada al contexto "summary"</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getdatastore"></a><a href="#getdatastore" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getDataStore()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17 R5</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getDataStore()</strong>: cs.DataStore</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>cs.DataStore</td><td style="text-align:center">&lt;-</td><td>Datastore de la dataclass</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-4"></a><a href="#descripción-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.getDataStore()</code>devuelve el datastore para la clase de datos especificada.</p>
<p>El almacén de datos puede ser:</p>
<ul>
<li>el almacén de datos principal, devuelto por el comando <code>ds</code>.</li>
<li>un almacén de datos remoto, abierto con el comando <code>Open datastore</code>.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-7"></a><a href="#ejemplo-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<p>El método de proyecto <strong><em>SearchDuplicate</em></strong> busca valores duplicados en cualquier clase de datos.</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$pet </span>: cs.CatsEntity
 <span class="hljs-variable">$pet</span>:=ds.Cats.<span class="hljs-function">all</span>().<span class="hljs-function">first</span>() <span class="hljs-comment">//obtener una entidad</span>
<span class="hljs-function"> SearchDuplicate</span>(<span class="hljs-variable">$pet</span>;<span class="hljs-string">"Dogs"</span>)
</code></pre>
<pre><code class="hljs css language-4d">  <span class="hljs-comment">// método SearchDuplicate </span>
  <span class="hljs-comment">// SearchDuplicate(entity_to_search;dataclass_name)</span>

 #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$pet </span>: Object ; <span class="hljs-variable">$dataClassName </span>: Text)<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$dataStore</span>; <span class="hljs-variable">$duplicates </span>: Object  

 <span class="hljs-variable">$dataStore</span>:=<span class="hljs-variable">$pet</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getDataStore</span>()
 <span class="hljs-variable">$duplicates</span>:=<span class="hljs-variable">$dataStore</span>[<span class="hljs-variable">$dataClassName</span>].<span class="hljs-function">query</span>(<span class="hljs-string">"name=:1"</span>;<span class="hljs-variable">$pet</span>.name)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getinfo"></a><a href="#getinfo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getInfo()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v19 R3</td><td>Se ha añadido la propiedad exposed</td></tr>
<tr><td>v17 R5</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getInfo()</strong> : Object</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>Objeto</td><td>&lt;-</td><td>Información sobre la clase de datos</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-5"></a><a href="#descripción-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.getInfo()</code> devuelve un objeto que proporciona información sobre la clase de datos. Esta función es útil para configurar el código genérico.</p>
<p><strong>Objeto devuelto</strong></p>
<table>
<thead>
<tr><th>Propiedad</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>exposed</td><td>Booleano</td><td>True si la dataclass está expuesta en REST</td></tr>
<tr><td>name</td><td>Texto</td><td>Nombre de la dataclass</td></tr>
<tr><td>primaryKey</td><td>Texto</td><td>Nombre de la llave primaria de la clase de datos</td></tr>
<tr><td>tableNumber</td><td>Integer</td><td>Número de la tabla 4D interna</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-1-3"></a><a href="#ejemplo-1-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 1</h4>
<pre><code class="hljs css language-4d"> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$entity </span>: Object)<span class="hljs-keyword">  
 var</span> <span class="hljs-variable">$status </span>: Object

<span class="hljs-function"> computeEmployeeNumber</span>(<span class="hljs-variable">$entity</span>) <span class="hljs-comment">//realizar algunas acciones en la entidad</span>

 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
<span class="hljs-function"> if</span>(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Record updated in table "</span>+<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getInfo</span>().name)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-3"></a><a href="#ejemplo-2-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$es </span>: cs.ClientsSelection

 <span class="hljs-variable">$settings</span>:=New object
 <span class="hljs-variable">$settings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"receivedIds"</span>;<span class="hljs-function">getIds</span>())
 <span class="hljs-variable">$settings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"pk"</span>;ds.Clients.<span class="hljs-function">getInfo</span>().primaryKey)
 <span class="hljs-variable">$es</span>:=ds.Clients.<span class="hljs-function">query</span>(<span class="hljs-string">":pk in :receivedIds"</span>;<span class="hljs-variable">$settings</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-3-2"></a><a href="#ejemplo-3-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 3</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$pk </span>: Text<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$dataClassAttribute </span>: Object

 <span class="hljs-variable">$pk</span>:=ds.Employee.<span class="hljs-function">getInfo</span>().primaryKey
 <span class="hljs-variable">$dataClassAttribute</span>:=ds.Employee[<span class="hljs-variable">$pk</span>] <span class="hljs-comment">// Si es necesario, el atributo que coincide con la llave primaria es accesible</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ver-también-1"></a><a href="#ver-también-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ver también</h4>
<p><a href="/docs/Rx/es/API/DataClassAttributeClass.html#exposed">DataClassAttribute.exposed</a></p>
<h2><a class="anchor" aria-hidden="true" id="new"></a><a href="#new" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.new()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.new()</strong> : 4D.Entity</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D.Entity</td><td>&lt;-</td><td>Nueva entidad que coincide con la clase de datos</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-6"></a><a href="#descripción-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.new()</code> crea en memoria y devuelve una nueva entidad en blanco relacionada con la Dataclass.</p>
<p>El objeto entidad se crea en memoria y no se guarda en la base de datos hasta que se llama a la función <a href="/docs/Rx/es/API/EntityClass.html#save"><code>.save( )</code></a>. Si la entidad se borra antes de ser guardada, no se puede recuperar.</p>
<p><strong>4D Server</strong>: en cliente-servidor, si la llave primaria de la tabla correspondiente se autoincrementa, se calculará cuando la entidad se guarde en el servidor.</p>
<p>Todos los atributos de la entidad se inicializan con el valor <strong>null</strong>.</p>
<blockquote>
<p>Los atributos se pueden inicializar con valores por defecto si se selecciona la opción <strong>Traducir los NULL a valores vacío</strong> al nivel de la estructura de la base 4D.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-8"></a><a href="#ejemplo-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<p>Este ejemplo crea una nueva entidad en la clase de datos &quot;Log&quot; y registra la información en el atributo &quot;info&quot;:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.LogEntity
 <span class="hljs-variable">$entity</span>:=ds.Log.<span class="hljs-function">new</span>() <span class="hljs-comment">//crea una referencia</span>
 <span class="hljs-variable">$entity</span>.info:=<span class="hljs-string">"New entry"</span> <span class="hljs-comment">//almacenar alguna información</span>
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//guardar la entidad</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="newselection"></a><a href="#newselection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.newSelection()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.newSelection</strong>( { <em>keepOrder</em> : Integer } ) : 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>keepOrder</td><td>Integer</td><td>-&gt;</td><td><code>dk keep ordered</code>: crea una selección de entidades ordenada,<br><code>dk no ordenada</code>: crea una selección de entidades no ordenada (por defecto si se omite)</td></tr>
<tr><td>Resultado</td><td>4D.EntitySelection</td><td>&lt;-</td><td>Nueva selección de entidades en blanco relacionadas con la clase de datos</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-7"></a><a href="#descripción-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.newSelection()</code>crea una nueva selección de entidades en blanco, no compartible, relacionada con la clase de datos, en memoria.</p>
<blockquote>
<p>Para más información sobre las selecciones de entidades no compartibles, consulte <a href="/docs/Rx/es/ORDA/entities.html#shareable-or-non-shareable-entity-selections">esta sección</a>.</p>
</blockquote>
<p>Si quieres crear una selección de entidades ordenada, pase el selector <code>dk keep ordered</code> en el parámetro <em>keepOrder</em>. Por defecto, si se omite este parámetro, o si se pasa el selector <code>dk non ordered</code>, el método crea una selección de entidades no ordenada. Las selecciones de entidades desordenadas son más rápidas pero no se puede confiar en las posiciones de las entidades. Para más información, consulte <a href="/docs/Rx/es/ORDA/dsmapping.html#ordered-or-unordered-entity-selection">Selecciones de entidades ordenadas y desordenadas</a>.</p>
<p>Cuando se crea, la selección de entidades no contiene ninguna entidad (<code>mySelection.length</code> devuelve 0). Este método le permite crear selecciones de entidades gradualmente haciendo llamadas posteriores a la función <a href="/docs/Rx/es/API/EntitySelectionClass.html#add"><code>add()</code></a>.</p>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-9"></a><a href="#ejemplo-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$USelection</span>; <span class="hljs-variable">$OSelection </span>: cs.EmployeeSelection
 <span class="hljs-variable">$USelection</span>:=ds.Employee.<span class="hljs-function">newSelection</span>() <span class="hljs-comment">//crea una selección de entidades vacía y desordenada</span>
 <span class="hljs-variable">$OSelection</span>:=ds.Employee.<span class="hljs-function">newSelection</span>(dk keep ordered) <span class="hljs-comment">//crea una selección de entidades vacía y ordenada</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="query"></a><a href="#query" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.query()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versión</th><th>Modificaciones</th></tr>
</thead>
<tbody>
<tr><td>v17 R6</td><td>Soporte de los parámetros Formula</td></tr>
<tr><td>v17 R5</td><td>Soporte de los marcadores para los valores</td></tr>
<tr><td>v17</td><td>Añadidos</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.query</strong>( <em>queryString</em> : Text { ; <em>...value</em> : any } { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection <br><strong>.query</strong>( <em>formula</em> : Object { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Parámetros</th><th>Tipo</th><th></th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>queryString</td><td>Texto</td><td>-&gt;</td><td>Criterios de búsqueda como cadena</td></tr>
<tr><td>formula</td><td>Objeto</td><td>-&gt;</td><td>Criterios de búsqueda como objeto fórmula</td></tr>
<tr><td>value</td><td>any</td><td>-&gt;</td><td>Valor(es) a utilizar para los marcadores de posición indexados</td></tr>
<tr><td>querySettings</td><td>Objeto</td><td>-&gt;</td><td>Opciones de búsqueda: parameters, attributes, args, allowFormulas, context, queryPath, queryPlan</td></tr>
<tr><td>Resultado</td><td>4D.EntitySelection</td><td>&lt;-</td><td>Nueva selección de entidades formada por las entidades de la clase de datos que cumplen los criterios de búsqueda especificados en <em>queryString</em> o <em>formula</em></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descripción-8"></a><a href="#descripción-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descripción</h4>
<p>La función <code>.query()</code>busca entidades que cumplan con los criterios de búsqueda especificados en <em>queryString</em> o <em>formula</em> y (opcionalmente) <em>value</em>(s), para todas las entidades de la clase de datos, y devuelve un nuevo objeto de tipo <code>EntitySelection</code> que contiene todas las entidades encontradas. Se aplica carga diferida.</p>
<p>Si no se encuentran entidades coincidentes, se devuelve una <code>EntitySelection</code> vacía.</p>
<p><strong>parámetro queryString</strong></p>
<p>El parámetro <em>queryString</em> utiliza la siguiente sintaxis:</p>
<pre><code class="hljs css language-4d">attributePath|formula comparator value   
    {logicalOperator attributePath|formula comparator value}   
    {order by attributePath {desc | asc}}
</code></pre>
<p>donde:</p>
<ul>
<li><strong>attributePath</strong>: ruta del atributo sobre el que se quiere ejecutar la búsqueda. Este parámetro puede ser un nombre simple (por ejemplo, &quot;país&quot;) o cualquier ruta de atributo válida (por ejemplo, &quot;país.nombre&quot;.) En el caso de una ruta de atributos de tipo <code>Collection</code>, se utiliza la notación [ ] para manejar todas las ocurrencias (por ejemplo &quot;niños[ ].edad&quot;). También puede utilizar un <strong>marcador</strong> (ver más abajo).</li>
</ul>
<blockquote>
<p><em>No puede utilizar directamente atributos cuyo nombre contenga caracteres especiales como &quot;.&quot;, &quot;[ ]&quot;, o &quot;=&quot;, &quot;&gt;&quot;, &quot;#&quot;..., porque se evaluarán incorrectamente en la cadena de consulta. Si necesita consultar dichos atributos, debe considerar el uso de marcadores, que permiten un rango ampliado de caracteres en las rutas de los atributos (ver</em> <strong>Uso de marcadores de posición</strong> <em>a continuación).</em></p>
</blockquote>
<ul>
<li><p><strong>formula</strong>: una fórmula válida pasada como <code>Text</code> o en <code>Object</code>. La fórmula se evaluará para cada entidad procesada y debe devolver un valor booleano. Dentro de la fórmula, la entidad está disponible a través del objeto <code>This</code>.</p>
<ul>
<li><strong>Text</strong>: la cadena de fórmulas debe ir precedida de la declaración <code>eval( )</code>, para que el analizador de consultas evalúe la expresión correctamente. Por ejemplo: <em>&quot;eval(length(This.lastname) &gt;=30)&quot;</em></li>
<li><strong>Object</strong>: el <a href="/docs/Rx/es/API/FunctionClass.html">objeto fórmula</a> se pasa como un <strong>marcador</strong> (ver abajo). La fórmula debe haber sido creada utilizando los comandos <a href="/docs/Rx/es/API/FunctionClass.html#formula"><code>Formula</code></a> o <a href="/docs/Rx/es/API/FunctionClass.html#formula-from-string"><code>Formula from string</code></a>.</li>
</ul></li>
</ul>
<blockquote>
<ul>
<li>Tenga en cuenta que las fórmulas de 4D sólo admiten los símbolos <code>&amp;</code> y <code>|</code> como operadores lógicos.</li>
<li>Si la fórmula no es el único criterio de búsqueda, el optimizador del motor de búsquedas podría procesar previamente otros criterios (por ejemplo, los atributos indexados) y, por tanto, la fórmula podría evaluarse sólo para un subconjunto de entidades.</li>
</ul>
</blockquote>
<pre><code class="hljs">Las fórmulas en las consultas pueden recibir parámetros a través de $1. Este punto se detalla en el párrafo **Parámetro fórmula** más abajo.
</code></pre>
<blockquote>
<ul>
<li>También puede pasar directamente un objeto parámetro <code>formula</code> en lugar del parámetro <code>queryString</code> (recomendado cuando las fórmulas son más complejas). Ver el párrafo <strong>Parámetro fórmula</strong> más abajo.</li>
<li>Por razones de seguridad, las llamadas a fórmulas dentro de los métodos <code>query()</code> pueden ser desestimadas. Ver la descripción del parámetro <code>querySettings</code>.</li>
</ul>
</blockquote>
<ul>
<li><p><strong>comparator</strong>: símbolo que compara <em>attributePath</em> y <em>value</em>. Se soportan los siguientes símbolos:</p>
<table>
<thead>
<tr><th>Comparación</th><th>Símbolo(s)</th><th>Comentario</th></tr>
</thead>
<tbody>
<tr><td>Igual a</td><td>=, ==</td><td>Obtiene los datos coincidentes, admite el comodín (@), no distingue entre mayúsculas de minúsculas ni diacríticas.</td></tr>
<tr><td></td><td>===, IS</td><td>Obtiene los datos coincidentes, considera @ como carácter estándar, no distingue entre mayúsculas de minúsculas ni diacríticas</td></tr>
<tr><td>Diferente de</td><td>#, !=</td><td>Soporta el comodín (@)</td></tr>
<tr><td></td><td>!==, IS NOT</td><td>Considera la @ como un carácter estándar</td></tr>
<tr><td>Menor que</td><td>&lt;</td><td></td></tr>
<tr><td>Mayor que</td><td>&gt;</td><td></td></tr>
<tr><td>Menor o igual que</td><td>&lt;=</td><td></td></tr>
<tr><td>Mayor o igual que</td><td>&gt;=</td><td></td></tr>
<tr><td>Incluído en</td><td>IN</td><td>Obtiene datos iguales a al menos uno de los valores de una colección o de un conjunto de valores, admite el comodín (@)</td></tr>
<tr><td>Condición No aplicada a una sentencia</td><td>NOT</td><td>Los paréntesis son obligatorios cuando se utiliza NOT antes de una instrucción que contiene varios operadores</td></tr>
<tr><td>Contiene palabra clave</td><td>%</td><td>Las palabras claves pueden utilizarse en atributos de tipo texto o imagen</td></tr>
</tbody>
</table>
</li>
<li><p><strong>value</strong>: el valor a comparar con el valor actual de la propiedad de cada entidad en la selección de entidades o elemento en la colección. Puede ser un <strong>marcador</strong> (ver <strong>Uso de marcadores</strong> más adelante) o cualquier expresión que coincida con la propiedad de tipo de datos.<p><p> Al utilizar un valor constante, deben respetarse las siguientes reglas:</p>
<ul>
<li>La constante de tipo <strong>texto</strong> puede pasarse con o sin comillas simples (ver <strong>Uso de comillas</strong> más abajo). Para consultar una cadena dentro de otra cadena (una consulta de tipo &quot;contiene&quot;), utilice el símbolo de comodín (@) en el valor para aislar la cadena a buscar como se muestra en este ejemplo: &quot;@Smith@&quot;. Las siguientes palabras clave están prohibidas para las constantes de texto: true, false.</li>
<li>Valores constantes de tipo <strong>boolean</strong>: <strong>true</strong> o <strong>false</strong> (Sensible a las mayúsculas y minúsculas).</li>
<li>Valores constantes de tipo <strong>numérico</strong>: los decimales se separan con un '.' constantes de tipo de fecha: formato &quot;YYYY-MM-DD&quot;</li>
<li>Constantes <strong>null</strong>: utilizando la palabra clave &quot;null&quot; encontrará las propiedades <strong>null</strong> y <strong>undefined</strong>.</li>
<li>en el caso de una búsqueda con un comparador IN, el valor debe ser una colección, o valores que coincidan con el tipo de la ruta del atributo entre [ ] separados por comas (para las cadenas, los caracteres &quot; deben escaparse con &quot;&quot;).</li>
</ul></li>
<li><p><strong>logicalOperator</strong>: utilizado para unir condiciones múltiples en la búsqueda (opcional). Puede utilizar uno de los siguientes operadores lógicos (se puede utilizar el nombre o el símbolo):</p>
<table>
<thead>
<tr><th>Conjunción</th><th>Símbolo(s)</th></tr>
</thead>
<tbody>
<tr><td>AND</td><td>&amp;, &amp;&amp;, and</td></tr>
<tr><td>O</td><td>|,||, or</td></tr>
</tbody>
</table>
</li>
<li><p><strong>order by attributePath</strong>: puede incluir una declaración order by <em>attributePath</em> en la búsqueda para que los datos resultantes se ordenen de acuerdo con esa declaración. Puede utilizar varias instrucciones de ordenación, separadas por comas (por ejemplo, ordenación por <em>attributePath1</em> desc, <em>attributePath2</em> asc). Por defecto, el orden es ascendente. Pase 'desc' para definir un orden descendente y 'asc' para definir un orden ascendente.</p></li>
</ul>
<blockquote>
<p>*Si utiliza esta declaración, la entity selection devuelta está ordenada (para más información, consulte <a href="/docs/Rx/es/ORDA/dsmapping.html#ordered-or-unordered-entity-selection">Entity selections ordenadas vs desordenadas</a>).</p>
</blockquote>
<p><strong>Utilizar comillas</strong></p>
<p>Cuando utilice comillas dentro de las consultas, debe utilizar comillas simples ' ' dentro de la consulta y comillas dobles &quot; &quot; para encerrar toda la consulta, de lo contrario se devuelve un error. Por ejemplo:</p>
<pre><code class="hljs css language-4d"><span class="hljs-string">"employee.name = 'smith' AND employee.firstname = 'john'"</span>
</code></pre>
<blockquote>
<p>Las comillas simples (') no se admiten en los valores buscados, ya que romperían la cadena de búsqueda. Por ejemplo, &quot;comp.name = 'John's pizza' &quot; generará un error. Si necesita buscar en valores con comillas simples, puede considerar el uso de marcadores de posición (ver más abajo).</p>
</blockquote>
<p><strong>Uso del paréntesis</strong></p>
<p>Puede utilizar paréntesis en la búsqueda para dar prioridad al cálculo. Por ejemplo, puede organizar una búsqueda de la siguiente manera:</p>
<pre><code class="hljs css language-4d"><span class="hljs-string">"(employee.age &gt;= 30 OR employee.age &lt;= 65) AND (employee.salary &lt;= 10000 OR employee.status = 'Manager')"</span>
</code></pre>
<p><strong>Uso de marcadores de posición</strong></p>
<p>4D le permite utilizar marcadores para los argumentos <em>attributePath</em>, <em>formula</em> y <em>value</em> dentro del parámetro <em>queryString</em>. Un marcador es un parámetro que se inserta en las cadenas de búsqueda y que se sustituye por otro valor cuando se evalúa la cadena de búsqueda consulta. El valor de los marcadores se evalúa una vez al principio de la búsqueda; no se evalúa para cada elemento.</p>
<p>Se pueden utilizar dos tipos de marcadores: <strong>indexed placeholders</strong> y los <strong>named placeholders</strong>:</p>
<table>
<thead>
<tr><th>-</th><th>Marcadores de posición indexados</th><th>Nombre del marcador de posición</th></tr>
</thead>
<tbody>
<tr><td>Definición</td><td>Los parámetros se insertan como :paramIndex (por ejemplo :1, :2...) en queryString y sus valores correspondientes son suministrados por la secuencia de parámetros value. Puede utilizar hasta 128 parámetros de valor</td><td>Los parámetros se insertan como: paramName (por ejemplo :myparam) y sus valores se proporcionan en los atributos y/o objetos de parámetros en el parámetro querySettings</td></tr>
<tr><td>Ejemplo</td><td>$r:=class.query(&quot;:1=:2&quot;;&quot;city&quot;;&quot;Chicago&quot;)</td><td>$o.attributes:=New object(&quot;att&quot;;&quot;city&quot;)<br> $o.parameters:=New object(&quot;name&quot;;&quot;Chicago&quot;)<br> $r:=class.query(&quot;:att=:name&quot;;$o)</td></tr>
</tbody>
</table>
<p>Puede mezclar todos los tipos de argumentos en <em>queryString</em>. Una <em>queryString</em> puede contener, para los parámetros <em>attributePath</em>, <em>formula</em> y <em>value</em>:</p>
<ul>
<li>valores directos (sin marcadores),</li>
<li>marcadores indexados y/o con nombre.</li>
</ul>
<p><strong>Se recomienda utilizar marcadores de posición en las consultas</strong> por las siguientes razones:</p>
<ol>
<li><p>Evita la inserción de código malicioso: si utiliza directamente variables completadas por el usuario dentro de la cadena de búsqueda, un usuario podría modificar las condiciones de búsqueda introduciendo argumentos de búsqueda adicionales. Por ejemplo, imagine una cadena de búsqueda como:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$vquery</span>:=<span class="hljs-string">"status = 'public' &amp; name = "</span>+myname <span class="hljs-comment">//el usuario introduce su nombre</span>
 <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-variable">$vquery</span>)
</code></pre>
<p>Esta búsqueda parece segura ya que se filtran los datos no públicos. Sin embargo, si el usuario introduce en el área <em>myname</em> algo como <em>&quot;smith OR status='private'</em>, la cadena de búsqueda se modificaría en la etapa de la interpretación y podría devolver datos privados.</p>
<p>Cuando se utilizan marcadores de posición, no es posible anular las condiciones de seguridad:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"status='public' &amp; name=:1"</span>;myname)
</code></pre>
<p>En este caso, si el usuario introduce <em>smith OR status='private'</em> en el área <em>myname</em>, no se interpretará en la cadena de búsqueda, sino que sólo se pasará como valor. La búsqueda de una persona llamada &quot;smith OR status='private'&quot; simplemente fallará.</p></li>
<li><p>Evita tener que preocuparse por cuestiones de formato o caracteres, especialmente cuando se manejan los parámetros <em>attributePath</em> o <em>value</em> que pueden contener caracteres no alfanuméricos como &quot;.&quot;, &quot;['...</p></li>
<li><p>Permite el uso de variables o expresiones en los argumentos de búsqueda. Ejemplos:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"address.city = :1 &amp; name =:2"</span>;<span class="hljs-variable">$city</span>;<span class="hljs-variable">$myVar</span>+<span class="hljs-string">"@"</span>)
<span class="hljs-variable">$result2</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"company.name = :1"</span>;<span class="hljs-string">"John's Pizzas"</span>)
</code></pre></li>
</ol>
<p><strong>Búsqueda de valores null</strong></p>
<p>Cuando se buscan valores null, no se puede utilizar la sintaxis de marcador de posición porque el motor de búsqueda considera null como un valor de comparación invalido. Por ejemplo, si ejecuta la siguiente búsqueda:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$vSingles</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"spouse = :1"</span>;<span class="hljs-literal">Null</span>) <span class="hljs-comment">// NO funcionará</span>
</code></pre>
<p>No obtendrá el resultado esperado porque el valor null será evaluado por 4D como un error resultante de la evaluación del parámetro (por ejemplo, un atributo procedente de otra búsqueda). Para este tipo de búsquedas, debe utilizar la sintaxis de búsqueda directa:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$vSingles</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"spouse = null"</span>) <span class="hljs-comment">// Sintaxis correcta</span>
</code></pre>
<p><strong>Vinculación de los argumentos de búsqueda y los atributos de colección</strong></p>
<p>Al buscar en colecciones dentro de los atributos de los objetos utilizando múltiples argumentos de búsqueda unidos por el operador AND, es posible que desee asegurarse de que sólo se devuelven las entidades que contienen elementos que coinciden con todos los argumentos, y no las entidades en las que los argumentos pueden encontrarse en diferentes elementos. Para ello, es necesario vincular los argumentos de la búsqueda a los elementos de colección, de modo que sólo se encuentren los elementos únicos que contengan argumentos vinculados.</p>
<p>Por ejemplo, con las dos entidades siguientes:</p>
<pre><code class="hljs">Entity <span class="hljs-number">1</span>:
<span class="hljs-keyword">ds</span>. People.name: <span class="hljs-string">"martin"</span>
<span class="hljs-keyword">ds</span>. People.place<span class="hljs-variable">s:</span> 
    { <span class="hljs-string">"locations"</span> : [ {
                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"home"</span>,
                <span class="hljs-string">"city"</span>:<span class="hljs-string">"paris"</span> 
            } ] }

Entity <span class="hljs-number">2</span>:
<span class="hljs-keyword">ds</span>. People.name: <span class="hljs-string">"smith"</span>
<span class="hljs-keyword">ds</span>. People.place<span class="hljs-variable">s:</span> 
    { <span class="hljs-string">"locations"</span> : [ {
                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"home"</span>,
                <span class="hljs-string">"city"</span>:<span class="hljs-string">"lyon"</span> 
            } , {
                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"office"</span>,
                <span class="hljs-string">"city"</span>:<span class="hljs-string">"paris"</span> 
            } ] }
</code></pre>
<p>Quiere encontrar personas con un tipo de ubicación &quot;home&quot; en la ciudad &quot;paris&quot;. Si escribe:</p>
<pre><code class="hljs css language-4d">ds.People.<span class="hljs-function">query</span>(<span class="hljs-string">"places.locations[].kind= :1 and places.locations[].city= :2"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"paris"</span>)
</code></pre>
<p>... la búsqueda devolverá &quot;martin&quot; <strong>y</strong> &quot;smith&quot; porque &quot;smith&quot; tiene un elemento &quot;locations&quot; cuyo &quot;tipo&quot; es &quot;home&quot; y un elemento &quot;locations&quot; cuya &quot;ciudad&quot; es &quot;paris&quot;, aunque sean elementos diferentes.</p>
<p>Si quiere obtener sólo las entidades en las que los argumentos correspondientes están en el mismo elemento de colección, necesita <strong>enlazar los argumentos</strong>. Para enlazar los argumentos de búsqueda:</p>
<ul>
<li>Añada una letra entre los [] en la primera ruta a enlazar y repita la misma letra en todos los argumentos enlazados. Por ejemplo: <code>locations[a].city and locations[a].kind</code>. Puede utilizar cualquier letra del alfabeto latino (no diferencia entre mayúsculas y minúsculas).</li>
<li>Para añadir diferentes criterios vinculados en la misma consulta, utilice otra letra. Puede crear hasta 26 combinaciones de criterios en una sola consulta.</li>
</ul>
<p>Con las entidades anteriores, si escribe:</p>
<pre><code class="hljs css language-4d">ds.People.<span class="hljs-function">query</span>(<span class="hljs-string">"places.locations[a].kind= :1 and places.locations[a].city= :2"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"paris"</span>)
</code></pre>
<p>... la búsqueda sólo devolverá &quot;martin&quot; porque tiene un elemento &quot;locations&quot; cuyo &quot;kind&quot; es &quot;home&quot; y cuyo &quot;city&quot; es &quot;paris&quot;. La búsqueda no devolverá &quot;smith&quot; porque los valores &quot;home&quot; y &quot;paris&quot; no están en el mismo elemento de colección.</p>
<p><strong>parámetro formula</strong></p>
<p>Como alternativa a la inserción de fórmulas dentro del parámetro <em>queryString</em> (ver arriba), puede pasar directamente un objeto fórmula como criterio de búsqueda booleano. La utilización de un objeto fórmula para las búsquedas es <strong>recomendada</strong> ya que se beneficia de la tokenización, y el código es más fácil de buscar/leer.</p>
<p>La fórmula debe haber sido creada con el comando <code>Formula</code> o <code>Formula from string</code>. En este caso:</p>
<ul>
<li><em>fórmula</em> se evalúa para cada entidad y debe devolver true o false. Durante la ejecución de la búsqueda, si el resultado de la fórmula no es un booleano, se considera como false.</li>
<li>dentro de la <em>fórmula</em>, la entidad está disponible a través del objeto <code>This</code>.</li>
<li>si el objeto <code>Formula</code> es <strong>null</strong>, se genera el error 1626 (&quot;Esperando un texto o una fórmula&quot;), que llama a interceptar utilizando un método instalado con <code>ON ERR CALL</code>.</li>
</ul>
<blockquote>
<blockquote>
<p>Por razones de seguridad, las llamadas a fórmulas dentro de los métodos <code>query(</code>) pueden ser desestimadas. Ver la descripción del parámetro <em>querySettings</em>.</p>
</blockquote>
</blockquote>
<p><strong>Pasar parámetros a las fórmulas</strong></p>
<p>Todo parámetro <em>formula</em> llamado por la función <code>query()</code> puede recibir parámetros:</p>
<ul>
<li>Los parámetros deben pasarse a través de la propiedad <strong>args</strong> (objeto) del parámetro <em>querySettings</em>.</li>
<li>La fórmula recibe este objeto <strong>args</strong> como parámetro <strong>$1</strong>.</li>
</ul>
<p>Este pequeño código muestra los principios de cómo se pasan los parámetros a los métodos:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"args"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"exclude"</span>;<span class="hljs-string">"-"</span>)) <span class="hljs-comment">//objeto args a pasar los parámetros</span>
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(checkName($1.exclude))"</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-comment">//args se recibe en $1</span>
</code></pre>
<p>En el ejemplo 3 se ofrecen más ejemplos.</p>
<p><strong>4D Server</strong>: en cliente/servidor, las fórmulas se ejecutan en el servidor. En este contexto, sólo se envía a las fórmulas el objeto <code>querySettings.args</code>.</p>
<p><strong>Parámetro querySettings</strong></p>
<p>En el parámetro <em>querySettings</em> se puede pasar un objeto que contenga opciones adicionales. Se soportan las siguientes propiedades:</p>
<table>
<thead>
<tr><th>Propiedad</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>parameters</td><td>Objeto</td><td><strong>Marcadores nombrados para los valores</strong> utilizados en <em>queryString</em> o <em>formula</em>. Los valores se expresan como pares propiedad / valor, donde propiedad es el nombre del marcador de posición insertado para un valor en <em>queryString</em> o <em>formula</em> (&quot;:placeholder&quot;) y valor es el valor a comparar. Puede combinar marcadores de posición indexados (valores pasados directamente en parámetros de valor) y valores de marcadores de posición con nombre en la misma búsqueda.</td></tr>
<tr><td>attributes</td><td>Objeto</td><td><strong>Marcadores nombrados para las rutas de atributos</strong> utilizados en <em>queryString</em> o <em>formula</em>. Los atributos se expresan como pares propiedad / valor, donde propiedad es el nombre del marcador de posición insertado para una ruta de atributo en <em>queryString</em> o <em>formula</em> (&quot;:placeholder&quot;) y valor puede ser una cadena o una colección de cadenas. Cada valor es una ruta que puede designar un escalar o un atributo relacionado de la dataclass o una propiedad en un campo de objeto de la dataclass<p><table><tr><th>Tipo</th><th>Descripción</th></tr><tr><td>Cadena</td><td>attributePath expresado con la notación de puntos, por ejemplo: &quot;name&quot; o &quot;user.address.zipCode&quot;</td></tr><tr><td>Colección de cadenas</td><td>Cada cadena de la colección representa un nivel de attributePath, por ejemplo: [&quot;name&quot;] o [&quot;user&quot;,&quot;address&quot;,&quot;zipCode&quot;]. El uso de una colección permite consultar atributos con nombres que no se ajustan a la notación de puntos, por ejemplo, [&quot;4Dv17.1&quot;, &quot;en/fr&quot;]</td></tr></table>Puede combinar marcadores de posición indexados (valores pasados directamente en los parámetros <em>value</em>) y los valores de marcadores de posición con nombre en la misma búsqueda.</td></tr>
<tr><td>args</td><td>Objeto</td><td>Parámetro(s) a pasar a las fórmulas, si las hay. El objeto <strong>args</strong> se recibirá en $1 dentro de las fórmulas y, por tanto, sus valores estarán disponibles a través de <em>$1.property</em> (ver ejemplo 3).</td></tr>
<tr><td>allowFormulas</td><td>Booleano</td><td>True para permitir las llamadas de fórmulas en la búsqueda (por defecto). Pase false para desautorizar la ejecución de fórmulas. Si se establece como false y <code>query()</code> recibe una fórmula, se envía un error (1278 - Fórmula no permitida en este método miembro).</td></tr>
<tr><td>context</td><td>Texto</td><td>Etiqueta para el contexto de optimización automática aplicado a la entity selection. Este contexto será utilizado por el código que maneja la selección de entidades para que pueda beneficiarse de la optimización. Esta función está diseñada para el procesamiento cliente/servidor; para más información, consulte la sección <strong>Optimización cliente/servidor</strong>.</td></tr>
<tr><td>queryPlan</td><td>Booleano</td><td>En la entity selection resultante, devuelve o no la descripción detallada de la búsqueda justo antes de que se ejecute, es decir, la búsqueda planificada. La propiedad devuelta es un objeto que incluye cada búsqueda y sub búsqueda prevista (en el caso de una búsqueda compleja). Esta opción es útil durante la fase de desarrollo de una aplicación. Suele utilizarse junto con queryPath. Por defecto si se omite: false. <strong>Nota</strong>: esta propiedad sólo la soportan las funciones<code>entitySelection.query( )</code> y <code>dataClass.query( )</code>.</td></tr>
<tr><td>queryPath</td><td>Booleano</td><td>En la entity selection resultante, devuelve o no la descripción detallada de la búsqueda tal cual es realizada. La propiedad devuelta es un objeto que contiene la ruta utilizada para la búsqueda (normalmente idéntica a la de queryPlan, pero puede diferir si el motor consigue optimizar la búsqueda), así como el tiempo de procesamiento y el número de registros encontrados. Esta opción es útil durante la fase de desarrollo de una aplicación. Por defecto si se omite: false. <strong>Nota</strong>: esta propiedad sólo la soportan las funciones<code>entitySelection.query( )</code> y <code>dataClass.query( )</code>.</td></tr>
</tbody>
</table>
<p><strong>Sobre queryPlan y queryPath</strong></p>
<p>La información registrada en <code>queryPlan</code>/<code>queryPath</code> incluye el tipo de búsqueda (indexada y secuencial) y cada subconsulta necesaria junto con los operadores de conjunción. Las rutas de acceso de las peticiones también contienen el número de entidades encontradas y el tiempo necesario para ejecutar cada criterio de búsqueda. Las rutas de acceso de las peticiones también contienen el número de entidades encontradas y el tiempo necesario para ejecutar cada criterio de búsqueda. Generalmente, la descripción del plan de consulta y su ruta de acceso son idénticas, pero pueden diferir porque 4D puede implementar optimizaciones dinámicas cuando se ejecuta una consulta para mejorar el rendimiento. Por ejemplo, el motor 4D puede convertir dinámicamente una consulta indexada en una secuencial si estima que es más rápida. Este caso concreto puede darse cuando el número de entidades que se buscan es bajo.</p>
<p>Por ejemplo, si ejecuta la siguiente búsqueda:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &lt; :1 and employer.name = :2 or employer.revenues &gt; :3"</span>;\  
 <span class="hljs-number">50000</span>;<span class="hljs-string">"Lima West Kilo"</span>;<span class="hljs-number">10000000</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"queryPath"</span>;<span class="hljs-literal">True</span>;<span class="hljs-string">"queryPlan"</span>;<span class="hljs-literal">True</span>))
</code></pre>
<p>queryPlan:</p>
<pre><code class="hljs css language-4d">{Or:[{And:[{item:[index : Employee.salary ] &lt; <span class="hljs-number">50000</span>},  
    {item:Join on Table : Company  :  Employee.employerID = Company. ID,  
    subquery:[{item:[index : Company.name ] = Lima West Kilo}]}]},  
    {item:Join on Table : Company  :  Employee.employerID = Company. ID,  
    subquery:[{item:[index : Company.revenues ] &gt; <span class="hljs-number">10000000</span>}]}]}
</code></pre>
<p>queryPath:</p>
<pre><code class="hljs css language-4d">{steps:[{description:OR,time:<span class="hljs-number">63</span>,recordsfounds:<span class="hljs-number">1388132</span>,  
    steps:[{description:AND,time:<span class="hljs-number">32</span>,recordsfounds:<span class="hljs-number">131</span>,  
    steps:[{description:[index : Employee.salary ] &lt; <span class="hljs-number">50000</span>,time:<span class="hljs-number">16</span>,recordsfounds:<span class="hljs-number">728260</span>},{description:Join on Table : Company  :  Employee.employerID = Company. ID,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">131</span>,  
    steps:[{steps:[{description:[index : Company.name ] = Lima West Kilo,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">1</span>}]}]}]},{description:Join on Table : Company  :  Employee.employerID = Company. ID,time:<span class="hljs-number">31</span>,recordsfounds:<span class="hljs-number">1388132</span>,  
    steps:[{steps:[{description:[index : Company.revenues ] &gt; <span class="hljs-number">10000000</span>,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">933</span>}]}]}]}]}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-1-4"></a><a href="#ejemplo-1-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 1</h4>
<p>Esta sección ofrece varios ejemplos de búsquedas.</p>
<p>Consultas en una cadena:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName = 'S@'"</span>)
</code></pre>
<p>Búsqueda con una instrucción NOT:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"not(firstName=Kim)"</span>)
</code></pre>
<p>Búsquedas con fechas:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &gt; :1"</span>;<span class="hljs-string">"1970-01-01"</span>)
<span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &lt;= :1"</span>;Current date<span class="hljs-number">-10950</span>)
</code></pre>
<p>Búsqueda con marcadores de posición indexados para los valores:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)"</span>;<span class="hljs-string">"D@"</span>;<span class="hljs-string">"R@"</span>;<span class="hljs-string">"S@"</span>;<span class="hljs-string">"K@"</span>)
</code></pre>
<p>Búsqueda con marcadores de posición indexados para valores en una dataclass relacionada:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1 and manager.lastName = :2"</span>;<span class="hljs-string">"M@"</span>;<span class="hljs-string">"S@"</span>)
</code></pre>
<p>Búsqueda con marcador de posición indexado que incluye una instrucción de orden descendente:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Student.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality = :1 order by campus.name desc, lastname"</span>;<span class="hljs-string">"French"</span>)
</code></pre>
<p>Búsqueda con marcadores de posición con nombre para los valores:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">
var</span> <span class="hljs-variable">$managedCustomers </span>: cs.CustomerSelection
<span class="hljs-variable">$querySettings</span>:=New object
<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"userId"</span>;<span class="hljs-number">1234</span>;<span class="hljs-string">"extraInfo"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Smith"</span>))
<span class="hljs-variable">$managedCustomers</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"salesperson.userId = :userId and name = :extraInfo.name"</span>;<span class="hljs-variable">$querySettings</span>)
</code></pre>
<p>Búsqueda que utiliza marcadores de posición con nombre e indexados para los valores:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">
var</span> <span class="hljs-variable">$managedCustomers </span>: cs.CustomerSelection
<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"userId"</span>;<span class="hljs-number">1234</span>)
<span class="hljs-variable">$managedCustomers</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"salesperson.userId = :userId and name=:1"</span>;<span class="hljs-string">"Smith"</span>;<span class="hljs-variable">$querySettings</span>)
</code></pre>
<p>Búsqueda con objetos queryPlan y queryPath:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)"</span>;<span class="hljs-string">"D@"</span>;<span class="hljs-string">"R@"</span>;<span class="hljs-string">"S@"</span>;<span class="hljs-string">"K@"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"queryPlan"</span>;<span class="hljs-literal">True</span>;<span class="hljs-string">"queryPath"</span>;<span class="hljs-literal">True</span>))

  <span class="hljs-comment">//puede obtener estas propiedades en la selección de entidades resultante</span><span class="hljs-keyword">
var</span> <span class="hljs-variable">$queryPlan</span>; <span class="hljs-variable">$queryPath </span>: Object
<span class="hljs-variable">$queryPlan</span>:=<span class="hljs-variable">$entitySelection</span>.queryPlan
<span class="hljs-variable">$queryPath</span>:=<span class="hljs-variable">$entitySelection</span>.queryPath
</code></pre>
<p>Búsqueda con una ruta de atributo de tipo Collection:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extraInfo.hobbies[].name = :1"</span>;<span class="hljs-string">"horsebackriding"</span>)
</code></pre>
<p>Búsqueda con una ruta de atributos de tipo Collection y atributos vinculados:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extraInfo.hobbies[a].name = :1 and extraInfo.hobbies[a].level=:2"</span>;<span class="hljs-string">"horsebackriding"</span>;<span class="hljs-number">2</span>)
</code></pre>
<p>Búsqueda con una ruta de atributos de tipo Collection y múltiples atributos vinculados:</p>
<pre><code class="hljs css language-4d">$entitySelection:=ds.Employee.query("extraInfo.hobbies[a].name = :1 and
    extraInfo.hobbies[a].level = :2 and extraInfo.hobbies[b].name = :3 and
    extraInfo.hobbies[b].level = :4";"horsebackriding";2;"Tennis";5)
</code></pre>
<p>Búsqueda con una ruta de atributo de tipo Objeto:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extra.eyeColor = :1"</span>;<span class="hljs-string">"blue"</span>)
</code></pre>
<p>Búsqueda con una instrucción IN:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName in :1"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"Kim"</span>;<span class="hljs-string">"Dixie"</span>))
</code></pre>
<p>Búsqueda con instrucción NOT (IN):</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"not (firstName in :1)"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"John"</span>;<span class="hljs-string">"Jane"</span>))
</code></pre>
<p>Búsqueda con marcadores de posición indexados para los atributos:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection
<span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = 'Smith'"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>)
  <span class="hljs-comment">//salesperson es una entidad relacionada</span>
</code></pre>
<p>Búsqueda con marcadores de posición indexados para los atributos y marcadores de posición con nombre para los valores:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-keyword">
var</span> <span class="hljs-variable">$querySettings </span>: Object
<span class="hljs-variable">$querySettings</span>:=New object
<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"customerName"</span>;<span class="hljs-string">"Smith"</span>)
<span class="hljs-variable">$es</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = :customerName"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-variable">$querySettings</span>)
  <span class="hljs-comment">//salesperson es una entidad relacionada</span>
</code></pre>
<p>Búsqueda con marcadores de posición indexados para los atributos y los valores:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection
<span class="hljs-variable">$es</span>:=ds.Clients.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = :3"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-string">"Smith"</span>)
  <span class="hljs-comment">//salesperson es una entidad relacionada</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-2-4"></a><a href="#ejemplo-2-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 2</h4>
<p>Esta sección ilustra las búsquedas con marcadores de posición con nombre para los atributos.</p>
<p>Dada una dataclass Employee con 2 entidades:</p>
<p>Entidad 1:</p>
<pre><code class="hljs css language-4d">name: <span class="hljs-string">"Marie"</span>
number: <span class="hljs-number">46</span>
softwares:{
<span class="hljs-string">"Word 10.2"</span>: <span class="hljs-string">"Installed"</span>,
<span class="hljs-string">"Excel 11.3"</span>: <span class="hljs-string">"To be upgraded"</span>,
<span class="hljs-string">"Powerpoint 12.4"</span>: <span class="hljs-string">"Not installed"</span>
}
</code></pre>
<p>Entidad 2:</p>
<pre><code class="hljs css language-4d">name: <span class="hljs-string">"Sophie"</span>
number: <span class="hljs-number">47</span>
softwares:{
<span class="hljs-string">"Word 10.2"</span>: <span class="hljs-string">"Not installed"</span>,
<span class="hljs-string">"Excel 11.3"</span>: <span class="hljs-string">"To be upgraded"</span>,
<span class="hljs-string">"Powerpoint 12.4"</span>: <span class="hljs-string">"Not installed"</span>
}
</code></pre>
<p>Búsqueda con marcadores de posición con nombre para los atributos:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection
 <span class="hljs-variable">$querySettings</span>:=New object
 <span class="hljs-variable">$querySettings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"attName"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-string">"attWord"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"softwares"</span>;<span class="hljs-string">"Word 10.2"</span>))
 <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":attName = 'Marie' and :attWord = 'Installed'"</span>;<span class="hljs-variable">$querySettings</span>)
  <span class="hljs-comment">//$es.length=1 (Employee Marie)</span>
</code></pre>
<p>Búsqueda con marcadores de posición con nombre para los atributos y los valores:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$name </span>: Text
 <span class="hljs-variable">$querySettings</span>:=New object
  <span class="hljs-comment">//Placeholders para los valores</span>
  <span class="hljs-comment">//Se pide al usuario un nombre</span>
 <span class="hljs-variable">$name</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Por favor, introduzca el nombre a buscar:"</span>)<span class="hljs-keyword">
 If</span>(OK=<span class="hljs-number">1</span>)
    <span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"givenName"</span>;<span class="hljs-variable">$name</span>)
  <span class="hljs-comment">//Placeholders para las rutas de atributos</span>
    <span class="hljs-variable">$querySettings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"attName"</span>;<span class="hljs-string">"name"</span>)
    <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":attName= :givenName"</span>;<span class="hljs-variable">$querySettings</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ejemplo-3-3"></a><a href="#ejemplo-3-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplo 3</h4>
<p>Estos ejemplos ilustran las distintas formas de utilizar fórmulas con o sin parámetros en sus búsquedas.</p>
<p>La fórmula se da como texto con <code>eval()</code> en el parámetro <em>queryString</em>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(length(This.lastname) &gt;=30) and nationality='French'"</span>)
</code></pre>
<p>La fórmula se da como un objeto <code>Formula</code> a través de un marcador de posición:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$formula </span>: Object
 <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)&gt;=<span class="hljs-number">30</span>)
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality='French'"</span>;<span class="hljs-variable">$formula</span>)
</code></pre>
<p>Sólo se da como criterio un objeto <code>Formula</code>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$formula </span>: Object
 <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)&gt;=<span class="hljs-number">30</span>)
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-variable">$formula</span>)
</code></pre>
<p>Se pueden aplicar varias fórmulas:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula1</span>; <span class="hljs-variable">$1</span>; <span class="hljs-variable">$formula2 </span>;<span class="hljs-variable">$0 </span>: Object
 <span class="hljs-variable">$formula1</span>:=<span class="hljs-variable">$1</span>
 <span class="hljs-variable">$formula2</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.firstname)&gt;=<span class="hljs-number">30</span>)
 <span class="hljs-variable">$0</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and :2 and nationality='French'"</span>;<span class="hljs-variable">$formula1</span>;<span class="hljs-variable">$formula2</span>)
</code></pre>
<p>Una fórmula texto en <em>queryString</em> recibe un parámetro:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$settings </span>: Object
 <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>()
 <span class="hljs-variable">$settings</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"filter"</span>;<span class="hljs-string">"-"</span>)
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(checkName($1.filter)) and nationality=:1"</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)
</code></pre>
<pre><code class="hljs css language-4d">  <span class="hljs-comment">//checkName method</span>
 #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$exclude </span>: Text) -&gt; <span class="hljs-variable">$result </span>: Boolean
 <span class="hljs-variable">$result</span>:=(<span class="hljs-function">Position</span>(<span class="hljs-variable">$exclude</span>;<span class="hljs-literal">This</span>.lastname)=<span class="hljs-number">0</span>)
</code></pre>
<p>Utilizando el mismo método <strong><em>checkName</em></strong>, un objeto <code>Formula</code> como marcador de posición recibe un parámetro:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$settings</span>; <span class="hljs-variable">$formula </span>: Object
 <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">checkName</span>(<span class="hljs-variable">$1</span>.filter))
 <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>()
 <span class="hljs-variable">$settings</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"filter"</span>;<span class="hljs-string">"-"</span>)
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality=:2"</span>;<span class="hljs-variable">$formula</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)
 <span class="hljs-variable">$settings</span>.args.filter:=<span class="hljs-string">"*"</span> <span class="hljs-comment">// cambiar los parámetros sin actualizar el objeto $formula</span>
 <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality=:2"</span>;<span class="hljs-variable">$formula</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)
</code></pre>
<p>Queremos desautorizar las fórmulas, por ejemplo, cuando el usuario introduce su consulta:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$settings </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$queryString </span>: Text
 <span class="hljs-variable">$queryString</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Enter your query:"</span>)
<span class="hljs-function"> if</span>(OK=<span class="hljs-number">1</span>)
    <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"allowFormulas"</span>;<span class="hljs-literal">False</span>)
    <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-variable">$queryString</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-comment">//Se produce un error si $queryString contiene una fórmula</span><span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="ver-también-2"></a><a href="#ver-también-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ver también</h4>
<p><a href="/docs/Rx/es/API/EntitySelectionClass.html#query"><code>.query()</code></a> para selecciones de entidades</p>
<style> h2 { background: #d9ebff;}</style>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/Rx/es/API/CryptoKeyClass.html"><span class="arrow-prev">← </span><span class="function-name-prevnext">CryptoKey</span></a><a class="docs-next button" href="/docs/Rx/es/API/DataClassAttributeClass.html"><span class="function-name-prevnext">DataClassAttribute</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#attributename">.<em>attributeName</em></a></li><li><a href="#all">.all()</a></li><li><a href="#fromcollection">.fromCollection()</a></li><li><a href="#get">.get()</a></li><li><a href="#getdatastore">.getDataStore()</a></li><li><a href="#getinfo">.getInfo()</a></li><li><a href="#new">.new()</a></li><li><a href="#newselection">.newSelection()</a></li><li><a href="#query">.query()</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/Rx/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:es","version:19 R4"]}
              });
            </script></body></html>