"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3553],{3905:(e,o,a)=>{a.d(o,{Zo:()=>l,kt:()=>u});var n=a(67294);function t(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function r(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?r(Object(a),!0).forEach((function(o){t(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function d(e,o){if(null==e)return{};var a,n,t=function(e,o){if(null==e)return{};var a,n,t={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],o.indexOf(a)>=0||(t[a]=e[a]);return t}(e,o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var i=n.createContext({}),m=function(e){var o=n.useContext(i),a=o;return e&&(a="function"==typeof e?e(o):s(s({},o),e)),a},l=function(e){var o=m(e.components);return n.createElement(i.Provider,{value:o},e.children)},p={inlineCode:"code",wrapper:function(e){var o=e.children;return n.createElement(n.Fragment,{},o)}},c=n.forwardRef((function(e,o){var a=e.components,t=e.mdxType,r=e.originalType,i=e.parentName,l=d(e,["components","mdxType","originalType","parentName"]),c=m(a),u=t,b=c["".concat(i,".").concat(u)]||c[u]||p[u]||r;return a?n.createElement(b,s(s({ref:o},l),{},{components:a})):n.createElement(b,s({ref:o},l))}));function u(e,o){var a=arguments,t=o&&o.mdxType;if("string"==typeof e||t){var r=a.length,s=new Array(r);s[0]=c;var d={};for(var i in o)hasOwnProperty.call(o,i)&&(d[i]=o[i]);d.originalType=e,d.mdxType="string"==typeof e?e:t,s[1]=d;for(var m=2;m<r;m++)s[m]=a[m];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},37731:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>m,contentTitle:()=>d,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>l});a(67294);var n=a(3905);function t(){return t=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},t.apply(this,arguments)}function r(e,o){if(null==e)return{};var a,n,t=function(e,o){if(null==e)return{};var a,n,t={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],o.indexOf(a)>=0||(t[a]=e[a]);return t}(e,o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}const s={id:"components",title:"Componentes"},d=void 0,i={unversionedId:"Concepts/components",id:"version-18/Concepts/components",title:"Componentes",description:"Um componente 4D \xe9 um conjunto de m\xe9todos e formul\xe1rios 4D que representam uma ou v\xe1rias funcionalidades que possam ser instaladas em diferentes bancos de dados. Por exemplo, pode desenvolver um componente 4D de correio eletr\xf4nico que gerencie todos os aspectos do envio, a recep\xe7\xe3o e o armazenamento de correios eletr\xf4nicos em bancos de dados 4D.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-18/Concepts/components.md",sourceDirName:"Concepts",slug:"/Concepts/components",permalink:"/docs/pt/18/Concepts/components",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20Concepts%2Fcomponents.md%20(18)&body=Please%20enter%20your%20comment%3A",tags:[],version:"18",frontMatter:{id:"components",title:"Componentes"},sidebar:"docs",previous:{title:"Modos interpretado e compilado",permalink:"/docs/pt/18/Concepts/interpreted-compiled"},next:{title:"Plug-ins",permalink:"/docs/pt/18/Concepts/plug-ins"}},m={},l=[{value:"Defini\xe7\xf5es",id:"defini\xe7\xf5es",level:2},{value:"Prote\xe7\xe3o dos componentes: compila\xe7\xe3o",id:"prote\xe7\xe3o-dos-componentes-compila\xe7\xe3o",level:3},{value:"Partilhar os m\xe9todos de projeto",id:"partilhar-os-m\xe9todos-de-projeto",level:2},{value:"Passar vari\xe1veis",id:"passar-vari\xe1veis",level:2},{value:"Acesso \xe0s tabelas do banco local",id:"acesso-\xe0s-tabelas-do-banco-local",level:2},{value:"Escopo dos comandos de linguagem",id:"escopo-dos-comandos-de-linguagem",level:2},{value:"Comandos n\xe3o utiliz\xe1veis",id:"comandos-n\xe3o-utiliz\xe1veis",level:3},{value:"Gest\xe3o de erros",id:"gest\xe3o-de-erros",level:2},{value:"Uso de formul\xe1rios",id:"uso-de-formul\xe1rios",level:2},{value:"Uso de tabelas e campos",id:"uso-de-tabelas-e-campos",level:2},{value:"Exemplo",id:"exemplo",level:3},{value:"Uso de recursos",id:"uso-de-recursos",level:2},{value:"Ajuda online para os componentes",id:"ajuda-online-para-os-componentes",level:2}],p={toc:l};function c(e){var{components:o}=e,s=r(e,["components"]);return(0,n.kt)("wrapper",t({},p,s,{components:o,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Um componente 4D \xe9 um conjunto de m\xe9todos e formul\xe1rios 4D que representam uma ou v\xe1rias funcionalidades que possam ser instaladas em diferentes bancos de dados. Por exemplo, pode desenvolver um componente 4D de correio eletr\xf4nico que gerencie todos os aspectos do envio, a recep\xe7\xe3o e o armazenamento de correios eletr\xf4nicos em bancos de dados 4D."),(0,n.kt)("p",null,"Criar e instalar componentes 4D \xe9 realizado diretamente a partir de 4D. Basicamente, os componentes s\xe3o geridos como ",(0,n.kt)("a",t({parentName:"p"},{href:"/docs/pt/18/Concepts/plug-ins"}),"plug-ins")," de acordo com os seguintes princ\xedpios:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Um componente consiste de um arquivo de estrutura regular (compilado ou n\xe3o) tendo a arquitetura padr\xe3o ou na forma de um pacote (ver extens\xe3o .4dbase)."),(0,n.kt)("li",{parentName:"ul"},'Para instalar um componente em um banco de dados, basta com copi\xe1-lo na pasta "Componentes" do banco de dados, situada junto ao arquivo de estrutura ou junto a aplica\xe7\xe3o 4D execut\xe1vel.'),(0,n.kt)("li",{parentName:"ul"},"Um componente pode chamar a maioria dos elementos 4D: m\xe9todos projeto, formul\xe1rios projeto, barras de menu, listas de escolha, imagens de biblioteca e assim por diante. N\xe3o pode chamar m\xe9todos de bancos de dados e triggers."),(0,n.kt)("li",{parentName:"ul"},"N\xe3o pode usar tabelas padr\xe3o ou arquivos de dados em componentes 4D. Entretanto um componente n\xe3o pode criar ou usar tabelas, campos e arquivos de dados usando mecanismos de bancos de dados externos. S\xe3o bancos 4D independentes com as que se trabalha utilizando comandos SQL.")),(0,n.kt)("h2",t({},{id:"defini\xe7\xf5es"}),"Defini\xe7\xf5es"),(0,n.kt)("p",null,"Os mecanismos de gest\xe3o de componentes em 4D requerem a aplica\xe7\xe3o dos seguintes termos e conceitos:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Banco de dados matriz"),": banco de dados 4D utilizado para desenvolver o componente. O banco de dados matriz \xe9 um banco sem atributos espec\xedficos. Um banco de dados matriz forma um \xfanico componente. O banco de dados matriz deve ser copiado, compilado ou n\xe3o, na pasta Components da aplica\xe7\xe3o 4D ou no banco de dados que usar\xe1 o componente (banco de dados local)."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Banco local"),": banco de dados na qual se instala e utiliza um componente."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Componente"),": banco matricial, compilado ou n\xe3o, copiado na pasta Components da aplica\xe7\xe3o 4D ou do banco de dados local e cujo conte\xfado se utilizam nos bancos de dados locais.")),(0,n.kt)("p",null,'Note que um banco de dados pode ser tanto uma "matriz" quando um "host", ou seja, um banco de dados matriz pode ser usar um ou mais componentes. Entretanto um componente n\xe3o pode usar por si mesmo "subcomponentes".'),(0,n.kt)("h3",t({},{id:"prote\xe7\xe3o-dos-componentes-compila\xe7\xe3o"}),"Prote\xe7\xe3o dos componentes: compila\xe7\xe3o"),(0,n.kt)("p",null,"Como padr\xe3o, todos os m\xe9todos de projeto de um banco de dados matriz instalados como um componente s\xe3o potencialmente vis\xedveis do banco de dados host. Em particular:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Os m\xe9todos de projeto compartilhados s\xe3o encontrados na p\xe1gina M\xe9todos do Explorer e podem ser chamadas nos m\xe9todos do banco de dados local. Seu conte\xfado pode ser selecionado e copiado na \xe1rea de vista pr\xe9via do Explorador. Tamb\xe9m podem ser vistos no depurador. Entretanto n\xe3o \xe9 poss\xedvel abrir os m\xe9todos no editor de M\xe9todos nem modificar os m\xe9todos."),(0,n.kt)("li",{parentName:"ul"},"Os outros m\xe9todos projeto do banco de dados matriz n\xe3o aparecem no Explorer mas tamb\xe9m podem ser vistos no depurador do banco de dados host.")),(0,n.kt)("p",null,"Para proteger efetivamente os m\xe9todos projeto de um componente, simplesmente compile o banco de dados matriz e o deixe no formato de arquivo .4dc (bancos compilados que n\xe3o cont\xe9m o c\xf3digo interpretado). Quando um banco de dados matriz for instalado como componente:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Os m\xe9todos projeto compartilhados s\xe3o mostrados na P\xe1gina M\xe9todos do Explorador e podem ser chamados nos m\xe9todos do banco de dados host. Entretanto, seu conte\xfado n\xe3o aparecer\xe1 na \xe1rea de vista pr\xe9via nem no depurador."),(0,n.kt)("li",{parentName:"ul"},"Os outros m\xe9todos de projeto do banco de dados matriz n\xe3o v\xe3o aparecer nunca.")),(0,n.kt)("h2",t({},{id:"partilhar-os-m\xe9todos-de-projeto"}),"Partilhar os m\xe9todos de projeto"),(0,n.kt)("p",null,"Todos os m\xe9todos de projeto de um banco de dados matriz s\xe3o inclu\xeddos por defini\xe7\xe3o no componente (o banco de dados \xe9 o componente) o que significa que pode ser chamado e executado pelo componente."),(0,n.kt)("p",null,"Por outro lado, como padr\xe3o esses m\xe9todos projeto n\xe3o ser\xe3o vis\xedveis, nem poder\xe3o ser chamados no banco de dados host local. No banco de dados matriz, deve atribuir explicitamente os m\xe9todos que quiser que sejam partilhados com o banco de dados local No banco de dados matriz, deve atribuir explicitamente os m\xe9todos que quiser que sejam partilhados com o banco de dados local No banco de dados matriz, deve atribuir explicitamente os m\xe9todos que quiser que sejam partilhados com o banco de dados local Esses m\xe9todos de projeto podem ser chamados no c\xf3digo do banco de dados local/host (mas n\xe3o podem ser modificados no editor M\xe9todos do banco de dados host). Estes m\xe9todos formam os ",(0,n.kt)("strong",{parentName:"p"},"pontos de entrada")," no componente."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Nota:")," por outro lado, por raz\xf5es de seguran\xe7a, o comportamento normal n\xe3o permite executar m\xe9todos de projeto pertencentes ao banco de dados  local. Em certos casos, pode precisar dar permiss\xe3o para que um componente acesse os m\xe9todos projetos de seu banco de dados host. Para fazer isso, deve atribuir explicitamente os m\xe9todos de projeto do banco host que queira que tenham acesso aos componentes."),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(34465).Z,width:"592",height:"146"})),(0,n.kt)("h2",t({},{id:"passar-vari\xe1veis"}),"Passar vari\xe1veis"),(0,n.kt)("p",null,"As vari\xe1veis local, processo e interprocesso n\xe3o s\xe3o partilhadas entre componentes e os bancos locais. A \xfanica maneira de acessar \xe0s vari\xe1veis do componente desde o banco local e vice versa \xe9 usando ponteiros."),(0,n.kt)("p",null,"Exemplo usando um array:"),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"}),"//No banco de dados host:\n     ARRAY INTEGER(MyArray;10)\n     AMethod(->MyArray)\n\n//No componente, o m\xe9todo de projeto  AMethod cont\xe9m:\n     APPEND TO ARRAY($1->;2)\n")),(0,n.kt)("p",null,"Exemplos usando vari\xe1veis:"),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"})," C_TEXT(myvariable)\n component_method1(->myvariable)\n C_POINTER($p)\n $p:=component_method2(...)\n")),(0,n.kt)("p",null,"Quando usar ponteiros para que os componentes se comuniquem com o banco de dados, \xe9 preciso considerar as particularidades abaixo:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"O comando ",(0,n.kt)("inlineCode",{parentName:"p"},"Get pointer")," n\xe3o devolver\xe1 um ponteiro a uma vari\xe1vel do banco de dados local se for chamada desde um componente e vice versa.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A arquitetura de componentes permite a coexist\xeancia, dentro do mesmo banco de dados interpretado, de componentes interpretados e compilados (por outro lado, em um banco de dados compilado s\xf3 podem ser usados  componentes compilados). Para utilizar apontadores neste caso, deve respeitar o seguinte princ\xedpio: o int\xe9rprete pode desconectar um ponteiro constru\xeddo em modo compilado; no entanto, em modo compilado, n\xe3o pode deconectar um ponteiro constru\xeddo em modo interpretado. In order to use pointers in this case, you must respect the following principle: the interpreter can unpoint a pointer built in compiled mode; however, in compiled mode, you cannot unpoint a pointer built in interpreted mode.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Se o componente C definir a vari\xe1vel ",(0,n.kt)("inlineCode",{parentName:"p"},"myCvar")," , o componente I pode acessar ao valor desta vari\xe1vel utilizando o ponteiro ",(0,n.kt)("inlineCode",{parentName:"p"},"->myCvar"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Se o componente I definir a vari\xe1vel ",(0,n.kt)("inlineCode",{parentName:"p"},"myIvar")," , o componente C n\xe3o pode acessar essa vari\xe1vel usando o ponteiro ",(0,n.kt)("inlineCode",{parentName:"p"},"->myIvar"),". Esta sintaxe causa um erro de execu\xe7\xe3o.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A compara\xe7\xe3o de ponteiros utilizando o comando ",(0,n.kt)("inlineCode",{parentName:"p"},"RESOLVE POINTER")," n\xe3o \xe9 recomendado com os  componentes, j\xe1 que o principio de parti\xe7\xe3o de vari\xe1veis permite a coexist\xeancia de vari\xe1veis com o mesmo nome mas com conte\xfados radicalmente diferentes em um componente e no banco local (ou outro componente). O tipo da vari\xe1vel pode mesmo ser diferente em ambos os contextos. Se o ",(0,n.kt)("inlineCode",{parentName:"p"},"myptr1")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"myptr2")," apontar cada ponto para uma vari\xe1vel, a compara\xe7\xe3o seguinte produzir\xe1 um resultado incorrecto:"))),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"}),"     RESOLVE POINTER(myptr1;vVarName1;vtablenum1;vfieldnum1)\n     RESOLVE POINTER(myptr2;vVarName2;vtablenum2;vfieldnum2)\n     If(vVarName1=vVarName2)\n      //Este teste retorna True mesmo se as vari\xe1veis forem diferentes\n")),(0,n.kt)("p",null,"Neste caso \xe9 preciso usar a compara\xe7\xe3o de ponteiros:"),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"}),"     If(myptr1=myptr2) //Este teste retorna False\n")),(0,n.kt)("h2",t({},{id:"acesso-\xe0s-tabelas-do-banco-local"}),"Acesso \xe0s tabelas do banco local"),(0,n.kt)("p",null,"Apesar dos componentes n\xe3o poderem usar tabelas, ponteiros podem permitir que bancos host/locais se comuniquem com componentes. Por exemplo, aqui est\xe1 um m\xe9todo que pode ser chamado a partir de um componente:"),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"}),'// chamar a um m\xe9todo componente\nmethCreateRec(->[PEOPLE];->[PEOPLE]Name;"Julie Andrews")\n')),(0,n.kt)("p",null,"Dentro do componente, o c\xf3digo do m\xe9todo ",(0,n.kt)("inlineCode",{parentName:"p"},"methCreateRec"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"}),"C_POINTER($1) //Pointer on a table in host database C_POINTER($2) //Pointer on a field in host database C_TEXT($3) // Value to insert\n\n$tablepointer:=$1\n$fieldpointer:=$2 CREATE RECORD($tablepointer->)\n\n$fieldpointer->:=$3 SAVE RECORD($tablepointer->)\n")),(0,n.kt)("h2",t({},{id:"escopo-dos-comandos-de-linguagem"}),"Escopo dos comandos de linguagem"),(0,n.kt)("p",null,"Exceto pelos ",(0,n.kt)("a",t({parentName:"p"},{href:"#unusable-commands"}),"Comandos n\xe3o utiliz\xe1veis"),", um componente n\xe3o pode usar qualquer comando da linguagem 4D."),(0,n.kt)("p",null,"Quando comandos s\xe3o chamados a partir de um componente, s\xe3o executados no contexto do componente, exceto pelo comando ",(0,n.kt)("inlineCode",{parentName:"p"},"EXECUTE METHOD"),' que utiliza o contexto do m\xe9todo especificado pelo comando. Tamb\xe9m \xe9 preciso considerar que os comandos de leitura do tema "Usu\xe1rios e grupos" podem ser usados desde um componente, mas ler\xe3o os usu\xe1rios e grupos do banco local (um componente n\xe3o tem seus pr\xf3prios usu\xe1rios e grupos).'),(0,n.kt)("p",null,"Os comandos ",(0,n.kt)("inlineCode",{parentName:"p"},"SET DATABASE PARAMETER")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"Get database parameter")," s\xe3o uma exce\xe7\xe3o: seu alcance \xe9 global ao banco de dados. Quando esses comandos forem chamados de um componente, s\xe3o aplicados ao banco de dados local."),(0,n.kt)("p",null,"Al\xe9m disso, medidas especificas foram criadas para os comandos ",(0,n.kt)("inlineCode",{parentName:"p"},"Structure file")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"Get 4D folder")," quando utilizados no marco dos componentes."),(0,n.kt)("p",null,"O comando ",(0,n.kt)("inlineCode",{parentName:"p"},"COMPONENT LIST")," pode ser utilizado para obter a lista de componentes que carrega o banco local."),(0,n.kt)("h3",t({},{id:"comandos-n\xe3o-utiliz\xe1veis"}),"Comandos n\xe3o utiliz\xe1veis"),(0,n.kt)("p",null,'Os comandos abaixo n\xe3oo s\xe3o compat\xedveis para seu uso dentro de um componente porque modificam o arquivo de estrutura - que est\xe1 aberto em apenas leitura. Sua execu\xe7\xe3o em um componente gerar\xe1 o erro -10511, "O comando NomeComando n\xe3o pode ser chamado desde um componente":'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ON EVENT CALL")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Method called on event")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SET PICTURE TO LIBRARY")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"REMOVE PICTURE FROM LIBRARY")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SAVE LIST")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ARRAY TO LIST")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"EDIT FORM")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CREATE USER FORM")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"DELETE USER FORM")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CHANGE PASSWORD")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"EDIT ACCESS")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Set group properties")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Set user properties")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"DELETE USER")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CHANGE LICENSES")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"BLOB TO USERS")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SET PLUGIN ACCESS"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Notas:")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"O comando ",(0,n.kt)("inlineCode",{parentName:"li"},"Current form table")," devolve ",(0,n.kt)("inlineCode",{parentName:"li"},"Nil")," quando chamado no contexto de um formul\xe1rio projeto. Por isso n\xe3o pode ser usado em um componente."),(0,n.kt)("li",{parentName:"ul"},"Os comandos SQL de defini\xe7\xe3o de dados (",(0,n.kt)("inlineCode",{parentName:"li"},"CREATE TABLE"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"DROP TABLE"),", etc.) n\xe3o podem ser utilizados no banco de dados do componente. Entretanto s\xe3o compat\xedveis com bancos de dados externos (ver o comando SQL",(0,n.kt)("inlineCode",{parentName:"li"},"CREATE DATABASE"),").")),(0,n.kt)("h2",t({},{id:"gest\xe3o-de-erros"}),"Gest\xe3o de erros"),(0,n.kt)("p",null,"Um ",(0,n.kt)("a",t({parentName:"p"},{href:"/docs/pt/18/Concepts/error-handling"}),"m\xe9todo de gesti\xe3o de erros")," instalado pelo comando ",(0,n.kt)("inlineCode",{parentName:"p"},"ON ERR CALL")," s\xf3 se aplica ao banco de dados em execu\xe7\xe3o. No caso de um erro gerado por um componente, n\xe3o se chama ao m\xe9todo de gest\xe3o de erros ",(0,n.kt)("inlineCode",{parentName:"p"},"ON ERR CALL")," do banco local, e viceversa."),(0,n.kt)("h2",t({},{id:"uso-de-formul\xe1rios"}),"Uso de formul\xe1rios"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'S\xf3 os "formul\xe1rios de projeto" (formul\xe1rios que n\xe3o estejam associados a nenhuma tabela espec\xedfica) podem ser utilizados em um componente. Only \u201cproject forms\u201d (forms that are not associated with any specific table) can be used in a component.'),(0,n.kt)("li",{parentName:"ul"},"Um componente pode chamar formul\xe1rios tabelas do banco de dados local. Note que nesse caso \xe9 necess\xe1rio usar ponteiros ao inv\xe9s de nomes de tabelas entre colchetes [] para especificar os formul\xe1rios no c\xf3digo do componente.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Nota:")," se um componente utilizar o comando ",(0,n.kt)("inlineCode",{parentName:"p"},"ADD RECORD"),", se mostrar\xe1 o formul\xe1rio de entrada atual do banco de dados local, no contexto do banco local. Por isso se o formul\xe1rio incluir vari\xe1veis, o componente n\xe3o ter\xe1 acesso ao formul\xe1rio."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Pode publicar formul\xe1rios componentes como subformul\xe1rios no banco de dados local Pode publicar formul\xe1rios componentes como subformul\xe1rios no banco de dados local Isso significa que pode desenvolver componentes oferecendo objetos gr\xe1ficos. Pode publicar formul\xe1rios componentes como subformul\xe1rios no banco de dados local Isso significa que pode desenvolver componentes oferecendo objetos gr\xe1ficos. Por exemplo, Widgets fornecidos por 4D s\xe3o baseados no uso de subformul\xe1rios em componentes.")),(0,n.kt)("h2",t({},{id:"uso-de-tabelas-e-campos"}),"Uso de tabelas e campos"),(0,n.kt)("p",null,"Um componente n\xe3o pode usar as tabelas e campos definidos na estrutura 4D do banco de dados matriz. Mas pode criar e usar bancos de dados externos e ent\xe3o usar suas tabelas e campos de acordo com suas necessidades. Pode criar e gerenciar bancos de dados externos usando SQL. However, you can create and use external databases, and then use their tables and fields according to your needs. Usar um banco externo significa designar temporariamente esse banco de dados como o banco atual, em outras palavras, o banco alvo para as pesquisas SQL executadas por 4D. Pode criar bancos externos usando o comando SQL ",(0,n.kt)("inlineCode",{parentName:"p"},"CREATE DATABASE"),"."),(0,n.kt)("h3",t({},{id:"exemplo"}),"Exemplo"),(0,n.kt)("p",null,"O c\xf3digo abaixo est\xe1 inclu\xeddo em um componente e realiza tr\xeas a\xe7\xf5es b\xe1sicas com um banco externo:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"cria o banco externo se n\xe3o existir ainda"),(0,n.kt)("li",{parentName:"ul"},"adiciona dados ao banco externo,"),(0,n.kt)("li",{parentName:"ul"},"l\xea dados do banco externo.")),(0,n.kt)("p",null,"Cria o banco externo:"),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"}),'<>MyDatabase:=Get 4D folder+"\\MyDB" // (Windows) armazena os dados em um diret\xf3rio autorizado\n Begin SQL\n        CREATE DATABASE IF NOT EXISTS DATAFILE :[<>MyDatabase];\n        USE DATABASE DATAFILE :[<>MyDatabase];\n        CREATE TABLE IF NOT EXISTS KEEPIT\n        (\n        ID INT32 PRIMARY KEY,\n        kind VARCHAR,\n        name VARCHAR,\n        code TEXT,\n        sort_order INT32\n        );\n\n        CREATE UNIQUE INDEX id_index ON KEEPIT (ID);\n\n        USE DATABASE SQL_INTERNAL;\n\n End SQL\n')),(0,n.kt)("p",null,"Escrita no banco de dados externa:"),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"})," $Ptr_1:=$2 // recupera dados do banco de dados local atrav\xe9s de ponteiros\n $Ptr_2:=$3\n $Ptr_3:=$4\n $Ptr_4:=$5\n $Ptr_5:=$6\n Begin SQL\n\n        USE DATABASE DATAFILE :[<>MyDatabase];\n\n        INSERT INTO KEEPIT\n        (ID, kind, name, code, sort_order)\n        VALUES\n        (:[$Ptr_1], :[$Ptr_2], :[$Ptr_3], :[$Ptr_4], :[$Ptr_5]);\n\n        USE DATABASE SQL_INTERNAL;\n\n End SQL\n")),(0,n.kt)("p",null,"Lendo de um banco externo:"),(0,n.kt)("pre",null,(0,n.kt)("code",t({parentName:"pre"},{className:"language-4d"})," $Ptr_1:=$2 // acesse aos dados do banco local atrav\xe9s de ponteiros\n $Ptr_2:=$3\n $Ptr_3:=$4\n $Ptr_4:=$5\n $Ptr_5:=$6\n\n Begin SQL\n\n    USE DATABASE DATAFILE :[<>MyDatabase];\n\n    SELECT ALL ID, kind, name, code, sort_order\n    FROM KEEPIT\n    INTO :$Ptr_1, :$Ptr_2, :$Ptr_3, :$Ptr_4, :$Ptr_5;\n\n    USE DATABASE SQL_INTERNAL;\n\n End SQL\n")),(0,n.kt)("h2",t({},{id:"uso-de-recursos"}),"Uso de recursos"),(0,n.kt)("p",null,"Componentes podem usar recursos. De acordo com o princ\xedpio de gest\xe3o de recursos, se o componente for de arquitetura  .4dbase (arquitetura recomendada), a pasta Resources deve ser colocada dentro desta pasta."),(0,n.kt)("p",null,"Mecanismos autom\xe1ticos s\xe3o operacionais: os arquivos XLIFF encontrados na pasta Resources de um componene ser\xe3o carregados por esse componente."),(0,n.kt)("p",null,'Em um banco de dados local que cont\xe9m um ou mais componentes, cada componente, assim como os bancos de dados locais, tem sua propria "cadeia de recursos." Os recursos est\xe3o divididos entre os diferentes bancos de dados: n\xe3o \xe9 poss\xedvel acessar aos recursos do componente A desde o componente B ou ao banco de dados local.'),(0,n.kt)("h2",t({},{id:"ajuda-online-para-os-componentes"}),"Ajuda online para os componentes"),(0,n.kt)("p",null,"Um mecanismo espec\xedfico foi implementado para permitir que desenvolvedores adicionem ajuda online a seus componentes. O principio \xe9 o mesmo que o previsto para os bancos de dados 4D:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"O componente ajuda deve ser fornecido como um arquivo com sufixo .htm, .html ou (em Windows apenas) .chm"),(0,n.kt)("li",{parentName:"ul"},"O arquivo de ajuda deve ser colocado do lado do arquivo de estrutura de componente e tem que ter o mesmo nome que o arquivo de estrutura,"),(0,n.kt)("li",{parentName:"ul"},'Esse arquivo \xe9 ent\xe3o carregado automaticamente no menu Help da aplica\xe7\xe3o com o t\xedtulo "Help for..." seguido pelo nome do arquivo de ajuda.')))}c.isMDXComponent=!0},34465:(e,o,a)=>{a.d(o,{Z:()=>n});const n=a.p+"assets/images/pict516563.en-686ce2897139b168aeb17276e04b4265.png"}}]);