"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[65267],{603905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>k});var n=a(667294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),i=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=i(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,m=d(e,["components","mdxType","originalType","parentName"]),u=i(a),k=r,c=u["".concat(s,".").concat(k)]||u[k]||p[k]||o;return a?n.createElement(c,l(l({ref:t},m),{},{components:a})):n.createElement(c,l({ref:t},m))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=u;var d={};for(var s in t)hasOwnProperty.call(t,s)&&(d[s]=t[s]);d.originalType=e,d.mdxType="string"==typeof e?e:r,l[1]=d;for(var i=2;i<o;i++)l[i]=a[i];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},41917:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>m});a(667294);var n=a(603905);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const l={id:"DataStoreClass",title:"DataStore"},d=void 0,s={unversionedId:"API/DataStoreClass",id:"version-20/API/DataStoreClass",title:"DataStore",description:"Um Datastore \xe9 o objeto de interface subministrado por ORDA para referenciar e acessar a uma base de dados. Objetos Datastore s\xe3o retornado pelos comandos abaixo:",source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-20/API/DataStoreClass.md",sourceDirName:"API",slug:"/API/DataStoreClass",permalink:"/docs/pt/20/API/DataStoreClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FDataStoreClass.md%20(20)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20",frontMatter:{id:"DataStoreClass",title:"DataStore"},sidebar:"docs",previous:{title:"DataClass",permalink:"/docs/pt/20/API/DataClassClass"},next:{title:"Email",permalink:"/docs/pt/20/API/EmailObjectClass"}},i={},m=[{value:"Resumo",id:"resumo",level:3},{value:"ds",id:"ds",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:4},{value:"Exemplo 1",id:"exemplo-1",level:4},{value:"Exemplo 2",id:"exemplo-2",level:4},{value:"Open datastore",id:"open-datastore",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-1",level:4},{value:"Exemplo 1",id:"exemplo-1-1",level:4},{value:"Exemplo 2",id:"exemplo-2-1",level:4},{value:"Exemplo 3",id:"exemplo-3",level:4},{value:"Gest\xe3o de erros",id:"gest\xe3o-de-erros",level:4},{value:"<em>.dataclassName</em>",id:"dataclassname",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-2",level:4},{value:"Exemplo",id:"exemplo",level:4},{value:".cancelTransaction()",id:"canceltransaction",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-3",level:4},{value:"Exemplo",id:"exemplo-4",level:4},{value:".clearAllRemoteContexts()",id:"clearallremotecontexts",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-4",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m",level:4},{value:".encryptionStatus()",id:"encryptionstatus",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-5",level:4},{value:"Exemplo",id:"exemplo-5",level:4},{value:".flushAndLock()",id:"flushandlock",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-6",level:4},{value:"Exemplo",id:"exemplo-6",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-1",level:4},{value:".getAllRemoteContexts()",id:"getallremotecontexts",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-7",level:4},{value:"Exemplo",id:"exemplo-7",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-2",level:4},{value:".getInfo()",id:"getinfo",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-8",level:4},{value:"Exemplo 1",id:"exemplo-1-2",level:4},{value:"Exemplo 2",id:"exemplo-2-2",level:4},{value:".getRemoteContextInfo()",id:"getremotecontextinfo",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-9",level:4},{value:"Objeto devolvido",id:"objeto-devolvido",level:4},{value:"Exemplo",id:"exemplo-8",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-3",level:4},{value:".getRequestLog()",id:"getrequestlog",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-10",level:4},{value:"Exemplo",id:"exemplo-9",level:4},{value:".isAdminProtected()",id:"isadminprotected",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-11",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-4",level:4},{value:".locked()",id:"locked",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-12",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-5",level:4},{value:".makeSelectionsAlterable()",id:"makeselectionsalterable",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-13",level:4},{value:".provideDataKey()",id:"providedatakey",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-14",level:4},{value:"Exemplo",id:"exemplo-10",level:4},{value:".setAdminProtection()",id:"setadminprotection",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-15",level:4},{value:"Exemplo",id:"exemplo-11",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-6",level:4},{value:".setRemoteContextInfo()",id:"setremotecontextinfo",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-16",level:4},{value:"Exemplo 1",id:"exemplo-1-3",level:4},{value:"Exemplo 2",id:"exemplo-2-3",level:4},{value:"Exemplo 3 - Listbox",id:"exemplo-3---listbox",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-7",level:4},{value:".startRequestLog()",id:"startrequestlog",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-17",level:4},{value:"Do lado do cliente",id:"do-lado-do-cliente",level:4},{value:"Do lado do servidor",id:"do-lado-do-servidor",level:4},{value:"Exemplo 1",id:"exemplo-1-4",level:4},{value:"Exemplo 2",id:"exemplo-2-4",level:4},{value:"Exemplo 3",id:"exemplo-3-1",level:4},{value:".startTransaction()",id:"starttransaction",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-18",level:4},{value:"Exemplo",id:"exemplo-12",level:4},{value:".stopRequestLog()",id:"stoprequestlog",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-19",level:4},{value:"Exemplo",id:"exemplo-13",level:4},{value:".unlock()",id:"unlock",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-20",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-8",level:4},{value:".validateTransaction()",id:"validatetransaction",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-21",level:4},{value:"Exemplo",id:"exemplo-14",level:4}],p={toc:m};function u(e){var{components:t}=e,a=o(e,["components"]);return(0,n.kt)("wrapper",r({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Um ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/dsmapping#datastore"}),"Datastore")," \xe9 o objeto de interface subministrado por ORDA para referenciar e acessar a uma base de dados. Objetos ",(0,n.kt)("inlineCode",{parentName:"p"},"Datastore")," s\xe3o retornado pelos comandos abaixo:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",r({parentName:"li"},{href:"#ds"}),"ds"),": um atalho para datastore principl"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",r({parentName:"li"},{href:"#open-datastore"}),"Open datastore"),": para abrir qualquer datastore remota")),(0,n.kt)("h3",r({},{id:"resumo"}),"Resumo"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#canceltransaction"}),(0,n.kt)("strong",{parentName:"a"},".cancelTransaction()")),"\xa0","\xa0","\xa0","\xa0","cancela a transa\xe7\xe3o")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#clearallremotecontexts"}),(0,n.kt)("strong",{parentName:"a"},".clearAllRemoteContexts()")),"\xa0","\xa0","\xa0","\xa0","permite desativar qualquer acesso de dados em ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/20/Admin/webAdmin#http-port"}),"web admin port"),", incluindo as sess\xf5es ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/20/Admin/dataExplorer"}),"Data Explorer")," in ",(0,n.kt)("inlineCode",{parentName:"td"},"WebAdmin"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#dataclassname"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".dataclassName"))," : 4D. DataClass"),"\xa0","\xa0","\xa0","\xa0","cont\xe9m uma descri\xe7\xe3o do dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#encryptionstatus"}),(0,n.kt)("strong",{parentName:"a"},".encryptionStatus()"),": Object"),"\xa0","\xa0","\xa0","\xa0","devolve um objecto que fornece o estado de encripta\xe7\xe3o para o ficheiro de dados actual")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#flushAndLock"}),(0,n.kt)("strong",{parentName:"a"},".flushAndLock()")),"\xa0","\xa0","\xa0","\xa0","descarrega o cache do datastore local e impede outros processos de realizar opera\xe7\xf5es de escrita na base de dados")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getallremotecontexts"}),(0,n.kt)("strong",{parentName:"a"},".getAllRemoteContexts()")," : Collection"),"\xa0","\xa0","\xa0","\xa0","retorna ",(0,n.kt)("inlineCode",{parentName:"td"},"True")," se ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/20/Admin/dataExplorer"}),"Data Explorer")," acesso for desativado para a sess\xe3o de trabalho")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getinfo"}),(0,n.kt)("strong",{parentName:"a"},".getInfo()"),": Object"),"\xa0","\xa0","\xa0","\xa0","devolve um objecto que fornece informa\xe7\xe3o sobre o datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getremotecontextinfo"}),(0,n.kt)("strong",{parentName:"a"},".getRemoteContextInfo"),"(",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text) : Object "),"\xa0","\xa0","\xa0","\xa0"," retorna um objeto que cont\xe9m informa\xe7\xf5es sobre a otimiza\xe7\xe3o de contexto ",(0,n.kt)("em",{parentName:"td"},"contextName")," na datastore.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getrequestlog"}),(0,n.kt)("strong",{parentName:"a"},".getRequestLog()")," : Collection"),"\xa0","\xa0","\xa0","\xa0","devolve os pedidos ORDA registados na mem\xf3ria do lado do cliente")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#locked"}),(0,n.kt)("strong",{parentName:"a"},".locked()")," : Boolean"),"\xa0","\xa0","\xa0","\xa0","retorna Verdadeiro se o datastore local estiver actualmente bloqueado")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#makeselectionsalterable"}),(0,n.kt)("strong",{parentName:"a"},".makeSelectionsAlterable()")),"\xa0","\xa0","\xa0","\xa0","estabelece todas as sele\xe7\xf5es de entidade como edit\xe1vel como padr\xe3o nas datastore de aplica\xe7\xe3o atuais.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#providedatakey"}),(0,n.kt)("strong",{parentName:"a"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"a"},"curPassPhrase")," : Text ) : Object ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"a"},"curDataKey")," : Object ) : Object "),"\xa0","\xa0","\xa0","\xa0","permite oferecer uma chave de criptografia de dados para o arquivo de dados atual da datastore e detecta se a chave corresponder com os dados criptografados.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#setadminprotection"}),(0,n.kt)("strong",{parentName:"a"},".setAdminProtection"),"( ",(0,n.kt)("em",{parentName:"a"},"status")," : Boolean )"),"\xa0","\xa0","\xa0","\xa0","permite desativar qualquer acesso de dados em ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/20/Admin/webAdmin#http-port"}),"web admin port"),", incluindo as sess\xf5es ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/20/Admin/dataExplorer"}),"Data Explorer")," in ",(0,n.kt)("inlineCode",{parentName:"td"},"WebAdmin"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#setremotecontextinfo"}),(0,n.kt)("strong",{parentName:"a"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"dataClassName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"attributes")," : Text {; ",(0,n.kt)("em",{parentName:"a"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"pageLength")," : Integer}})",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"dataClassName")," : Text; ",(0,n.kt)("em",{parentName:"a"},"attributesColl")," : Collection {; ",(0,n.kt)("em",{parentName:"a"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"pageLength")," : Integer }} )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"dataClassObject")," : 4D. DataClass ; ",(0,n.kt)("em",{parentName:"a"},"attributes")," : Text {; ",(0,n.kt)("em",{parentName:"a"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"pageLength")," : Integer }})",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"a"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"a"},"dataClassObject")," : 4D. DataClass ; ",(0,n.kt)("em",{parentName:"a"},"attributesColl")," : Collection {; ",(0,n.kt)("em",{parentName:"a"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"pageLength")," : Integer }} )"),"\xa0","\xa0","\xa0","\xa0","conecta os atributos de dataclass especificados ao contexto de otimiza\xe7\xe3o ",(0,n.kt)("em",{parentName:"td"},"contextName"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#startrequestlog"}),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"()",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"a"},"file")," : 4D.File )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"a"},"file")," : 4D.File ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"a"},"reqNum")," : Integer )"),"\xa0","\xa0","\xa0","\xa0","inicia o registo dos pedidos ORDA no lado do cliente ou no lado do servidor")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#starttransaction"}),(0,n.kt)("strong",{parentName:"a"},".startTransaction()")),"\xa0","\xa0","\xa0","\xa0","inicia uma transa\xe7\xe3o no processo atual na base de dados que corresponde \xe0 base de dados \xe0 qual se aplica")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#stoprequestlog"}),(0,n.kt)("strong",{parentName:"a"},".stopRequestLog()"),"  "),"\xa0","\xa0","\xa0","\xa0","p\xe1ra qualquer registo de pedidos ORDA na m\xe1quina a que \xe9 chamado (cliente ou servidor)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#unlock"}),(0,n.kt)("strong",{parentName:"a"},".unlock()")),"\xa0","\xa0","\xa0","\xa0","remove o bloqueio actual das opera\xe7\xf5es de escrita no datastore, se este tiver sido definido no mesmo processo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#validatetransaction"}),(0,n.kt)("strong",{parentName:"a"},".validateTransaction()"),"  "),"\xa0","\xa0","\xa0","\xa0","aceita a transa\xe7\xe3o")))),(0,n.kt)("h2",r({},{id:"ds"}),"ds"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Suporte do par\xe1metro localID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"ds")," { ( ",(0,n.kt)("em",{parentName:"p"},"localID")," : Text ) } : cs. DataStore "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"localID"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"ID local del armaz\xe9m de dados remoto a devolver")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"cs. DataStore"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Referencia ao armaz\xe9m de dados")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"O comando ",(0,n.kt)("inlineCode",{parentName:"p"},"ds")," devolve uma refer\xeancia ao datastore que corresponde \xe0 base de dados 4D actual ou \xe0 base de dados designada por ",(0,n.kt)("em",{parentName:"p"},"localID"),"."),(0,n.kt)("p",null,"Se omitir o par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"localID"),' (ou se passa uma string vazia ""), o comando devolve uma refer\xeancia ao armaz\xe9m de dados que coincide com a base de dados local de 4D (ou  a base de datos de 4D Server em caso de abrir uma base de dados remota em 4D Server). O armaz\xe9m de dados se abre automaticamente e est\xe1 dispon\xedvel diretamente atrav\xe9s de ',(0,n.kt)("inlineCode",{parentName:"p"},"ds"),"."),(0,n.kt)("p",null,"Tamb\xe9m pode obter uma referencia em um datastore remoto aberto passando seu id local no par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"localID"),". O armaz\xe9m de dados deve ter sido aberto previamente com o comando ",(0,n.kt)("a",r({parentName:"p"},{href:"#open-datastore"}),(0,n.kt)("inlineCode",{parentName:"a"},"Open datastore"))," pelo banco de dados atual (local ou componente). A identifica\xe7\xe3o local se define quando se utilizar este comando."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"O escopo do id local do banco de dados no qual o armazen de dados foi aberto.")),(0,n.kt)("p",null,"Se n\xe3o encontrar nenhum armaz\xe9m de dados ",(0,n.kt)("em",{parentName:"p"},"localID"),", o comando devolve ",(0,n.kt)("strong",{parentName:"p"},"Null"),"."),(0,n.kt)("p",null,"Os objectos dispon\xedveis no site ",(0,n.kt)("inlineCode",{parentName:"p"},"cs. Datastore")," s\xe3o mapeados a partir da base de dados alvo no que respeita \xe0s regras gerais da ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/dsmapping#general-rules"}),"ORDA"),"."),(0,n.kt)("h4",r({},{id:"exemplo-1"}),"Exemplo 1"),(0,n.kt)("p",null,"Usar a datastore principal do banco de dados 4D:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $result:=ds. Employee.query("firstName = :1";"S@")\n')),(0,n.kt)("h4",r({},{id:"exemplo-2"}),"Exemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo; $firstFrench; $firstForeign : Object\n\n var $frenchStudents; $foreignStudents : cs. DataStore\n\n $connectTo:=New object("type";"4D Server";"hostname";"192.168.18.11:8044")\n $frenchStudents:=Open datastore($connectTo;"french")\n\n $connectTo.hostname:="192.168.18.11:8050"\n $foreignStudents:=Open datastore($connectTo;"foreign")\n  //...\n  //...\n $firstFrench:=getFirst("french";"Students")\n $firstForeign:=getFirst("foreign";"Students")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"  //getFirst method\n  //getFirst(localID;dataclass) -> entity\n #DECLARE( $localId : Text; $dataClassName : Text ) -> $entity : 4D. Entity\n\n $0:=ds($localId)[$dataClassName].all().first()\n")),(0,n.kt)("h2",r({},{id:"open-datastore"}),"Open datastore"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20.3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"New ",(0,n.kt)("em",{parentName:"td"},"passwordAlgorithm")," property")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Open datastore"),"( ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," : Object ; ",(0,n.kt)("em",{parentName:"p"},"localID")," : Text ) : cs. DataStore "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"connectionInfo"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Propriedades de conex\xe3o utilizadas para alcan\xe7ar o armaz\xe9m de datos remoto")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"localID"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Id para assignar ao armaz\xe9m de dados aberto na aplica\xe7\xe3o local (obrigatorio)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"cs. DataStore"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto do armaz\xe9m de dados")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-1"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"localID")," is a local alias for the session opened on remote datastore. If ",(0,n.kt)("em",{parentName:"p"},"localID")," already exists on the application, it is used. Otherwise, a new ",(0,n.kt)("em",{parentName:"p"},"localID")," session is created when the datastore object is used."),(0,n.kt)("p",null,"O banco de dados ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," 4D deve estar dispon\xedvel como armaz\xe9m de dados remoto, ou seja:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"seu servidor web deve ser lan\xe7ado com http ou https ativado,"),(0,n.kt)("li",{parentName:"ul"},"sua op\xe7\xe3o ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/pt/20/REST/configuration#starting-the-rest-server"}),(0,n.kt)("strong",{parentName:"a"},"Expor como servidor REST"))," deve estar marcada,"),(0,n.kt)("li",{parentName:"ul"},"se disp\xf5e de ao menos uma licen\xe7a cliente.")),(0,n.kt)("p",null,"Se n\xe3o se encontrar nenhum banco de dados coincidente, ",(0,n.kt)("inlineCode",{parentName:"p"},"Open datastore")," devolve ",(0,n.kt)("strong",{parentName:"p"},"Null"),"."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"localID")," \xe9 um alias local para a sess\xe3o aberta no armaz\xe9m de dados remoto. Se ",(0,n.kt)("em",{parentName:"p"},"localID")," j\xe1 existir na aplica\xe7\xe3o, se utiliza. Em caso contr\xe1rio, se cria uma nova sess\xe3o ",(0,n.kt)("em",{parentName:"p"},"localID")," quando se utiliza o objeto datastore."),(0,n.kt)("p",null,"Os objectos dispon\xedveis no site ",(0,n.kt)("inlineCode",{parentName:"p"},"cs. Datastore")," s\xe3o mapeados a partir da base de dados alvo no que respeita \xe0s regras gerais da ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/dsmapping#general-rules"}),"ORDA"),"."),(0,n.kt)("p",null,"Quando abrir a sess\xe3o, as senten\xe7as abaixo s\xe3o equivalentes e devolvem uma refer\xeancia sobre o mesmo objeto datastore:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $myds:=Open datastore(connectionInfo;"myLocalId")\n $myds2:=ds("myLocalId")\n  //$myds e $myds2 s\xe3o equivalentes\n')),(0,n.kt)("p",null,"Passe em ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," um objeto que desceva o armaz\xe9m de dados remoto ao que quiser se conectar. Pode conter as propriedades abaixo (todas as propriedades s\xe3o opcionais menos ",(0,n.kt)("em",{parentName:"p"},"hostname"),"):"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"hostname"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Nome ou endere\xe7o IP da database remota + ":" + n\xfamero de porta (o numero de porta \xe9 obrigat\xf3rio)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de usuario")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"senha"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"User password. By default, the password is sent in clear form, therefore it is ",(0,n.kt)("strong",{parentName:"td"},"strongly recommended")," to use encrypted communications by passing ",(0,n.kt)("inlineCode",{parentName:"td"},"true")," in the ",(0,n.kt)("inlineCode",{parentName:"td"},"tls")," property.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"idleTimeout"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Longint"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Tempo de espera da sess\xe3o de inatividade (em minutos) depois do qual a sess\xe3o \xe9 fechada automaticamente por 4D. Se omitido, o valor por defeito \xe9 60 (1h). Se for omitido, o valor normal \xe9 60 minutos (1hora) O valor n\xe3o pode ser inferior a 60: se definir um valor inferior, o tempo de espera se eleva at\xe9 60). Para saber mais informa\xe7\xe3o, consulte ",(0,n.kt)("strong",{parentName:"td"},"Fechamento de sess\xf5es"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"tls"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Utilize uma conex\xe3o segura(*). Se omitido, false por defeito. Se for omitido, o normal \xe9 falso Usar uma conex\xe3o segura \xe9 recomendado sempre que poss\xedvel.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"passwordAlgorithm"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Pass "4d-rest-digest" if the server validates the password using the ',(0,n.kt)("a",r({parentName:"td"},{href:"https://doc.4d.com/4dv20/help/command/en/page638.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"Validate password"))," command with the ",(0,n.kt)("em",{parentName:"td"},"digest")," parameter set to ",(0,n.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"type"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Deve ser "4D Server"')))),(0,n.kt)("p",null,"(*) Se tls for true, se utiliza o protocolo HTTPS se:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"HTTPS for ativado no armaz\xe9m de dados remoto"),(0,n.kt)("li",{parentName:"ul"},"o n\xfamero de porto especificado coincide com o porto HTTPS configurado nos ajustes do banco de dados"),(0,n.kt)("li",{parentName:"ul"},'um certificado v\xe1lido e uma chave privada de criptografia est\xe3o instalados no banco de dados. Sen\xe3o \xe9 mostrado o erro "1610 - A remote request to host xxx has failed"')),(0,n.kt)("h4",r({},{id:"exemplo-1-1"}),"Exemplo 1"),(0,n.kt)("p",null,"Conex\xe3o a uma datastore remota com usu\xe1rio/ senha/ timetou/ tls"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $remoteDS : cs. DataStore\n $connectTo:=New object("type";"4D Server";"hostname";"192.168.18.11:8044")\n $remoteDS:=Open datastore($connectTo;"students")\n ALERT("This remote datastore contains "+String($remoteDS. Students.all().length)+" students")\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-1"}),"Exemplo 2"),(0,n.kt)("p",null,"Conex\xe3o a uma datastore remota sem usu\xe1rio ou senha:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $remoteDS : cs. DataStore\n $connectTo:=New object("type";"4D Server";"hostname";\\"192.168.18.11:4443";\\  \n  "user";"marie";"password";$pwd;"idleTimeout";70;"tls";True)\n $remoteDS:=Open datastore($connectTo;"students")\n ALERT("This remote datastore contains "+String($remoteDS. Students.all().length)+" students")\n')),(0,n.kt)("h4",r({},{id:"exemplo-3"}),"Exemplo 3"),(0,n.kt)("p",null,"Trabalhando com v\xe1rias datastores remotas:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connectTo : Object\n var $frenchStudents; $foreignStudents : cs. DataStore\n $connectTo:=New object("hostname";"192.168.18.11:8044")\n $frenchStudents:=Open datastore($connectTo;"french")\n $connectTo.hostname:="192.168.18.11:8050"\n $foreignStudents:=Open datastore($connectTo;"foreign")\n ALERT("They are "+String($frenchStudents. Students.all().length)+" French students")\n ALERT("They are "+String($foreignStudents. Students.all().length)+" foreign students")\n')),(0,n.kt)("h4",r({},{id:"gest\xe3o-de-erros"}),"Gest\xe3o de erros"),(0,n.kt)("p",null,"Em caso de erro, o comando devolve ",(0,n.kt)("strong",{parentName:"p"},"Null"),'. Se n\xe3o for poss\xedvel acessar o armazem de dados remotos (endere\xe7o incorreto, servidor web n\xe3o inciiado, http e https n\xe3o habilitados...), se produz o erro 1610 " Uma peti\xe7\xe3o remota ao host XXX falhou". Pode interceptar este erro com um m\xe9todo instalado por ',(0,n.kt)("inlineCode",{parentName:"p"},"ON ERR CALL"),"."),(0,n.kt)("h2",r({},{id:"dataclassname"}),(0,n.kt)("em",{parentName:"h2"},".dataclassName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".dataclassName"))," : 4D. DataClass"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-2"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"Um ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/dsmapping#datastore"}),"Datastore")," \xe9 o objeto de interface subministrado por ORDA para referenciar e acessar a uma base de dados. O objeto devolvido cont\xe9m uma descri\xe7\xe3o do dataclass."),(0,n.kt)("h4",r({},{id:"exemplo"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $emp : cs. Employee\n var $sel : cs. EmployeeSelection\n $emp:=ds. Employee //$emp contains the Employee dataclass\n $sel:=$emp.all() //gets an entity selection of all employees\n\n  //you could also write directly:\n $sel:=ds. Employee.all()\n")),(0,n.kt)("h2",r({},{id:"canceltransaction"}),".cancelTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".cancelTransaction()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xe3o exige nenhum par\xe2metro")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-3"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".cancelTransaction()")," cancela a transa\xe7\xe3o aberto pela fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()"))," ao n\xedvel correspondente no processo actual para o datastore especificado."),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".cancelTransaction()")," cancela qualquer mudan\xe7a realizado nos dados durante a transa\xe7\xe3o."),(0,n.kt)("p",null,"Pode aninhar v\xe1rias transa\xe7\xf5es (subtransa\xe7\xf5es). Se a transa\xe7\xe3o principal for cancelada, todas suas subtransa\xe7\xf5es tamb\xe9m s\xe3o canceladas, mesmo se validadas individualmente usando a fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"#validatetransactions"}),(0,n.kt)("inlineCode",{parentName:"a"},".validateTransaction()")),"."),(0,n.kt)("h4",r({},{id:"exemplo-4"}),"Exemplo"),(0,n.kt)("p",null,"Ver  exemplo da fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()")),"."),(0,n.kt)("h2",r({},{id:"clearallremotecontexts"}),".clearAllRemoteContexts()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clearAllRemoteContexts()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xe3o exige nenhum par\xe2metro")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-4"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".setAdminProtection()")," permite desativar qualquer acesso de dados em ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/Admin/webAdmin#http-port"}),"web admin port"),", incluindo as sess\xf5es ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/Admin/dataExplorer"}),"Data Explorer")," in ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin"),"."),(0,n.kt)("p",null,"Esta fun\xe7\xe3o \xe9 utilizada principalmente no contexto da depura\xe7\xe3o. Deve lembrar que quando abrir o depurador ele envia peti\xe7\xf5es ao servidor e pesquisa todos os atributos de dataclasse para exibi-los Isso pode sobrecarregar seus contextos com dados desnecess\xe1rios. Isso pode sobrecarregar seus contextos com dados desnecess\xe1rios."),(0,n.kt)("p",null,"Nestes casos, pode usar ",(0,n.kt)("inlineCode",{parentName:"p"},".clearAllRemoteContexts()")," para limpar os seus contextos e mant\xea-los limpos."),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#setremotecontextinfo"}),".setRemoteContextInfo()")),(0,n.kt)("h2",r({},{id:"encryptionstatus"}),".encryptionStatus()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".encryptionStatus()"),": Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informa\xe7\xe3o sobre o cifrado do armaz\xe9m de dados atual e de cada tabela")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-5"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".encryptionStatus()")," devolve um objecto que fornece o estado de encripta\xe7\xe3o para o ficheiro de dados actual (ou seja, o ficheiro de dados do datastore ",(0,n.kt)("inlineCode",{parentName:"p"},"ds"),"). Tamb\xe9m se proporciona o estado de cada tabela."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Utilizar o comando ",(0,n.kt)("inlineCode",{parentName:"p"},"Estado de encripta\xe7\xe3o de ficheiros de dados")," para determinar o estado de encripta\xe7\xe3o de qualquer outro ficheiro de dados.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Valor retornado")),(0,n.kt)("p",null,"O objeto retornado cont\xe9m as propriedades abaixo:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncrypted"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se o arquivo de dados estiver criptografado")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"keyProvided"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se proporcionar a chave de encripta\xe7\xe3o que coincide com o arquivo de dados encriptados(*).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"tabelas"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto que cont\xe9m tantas propriedades como tabelas encriptadas ou codificadas.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("em",{parentName:"td"},"tableName")),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Tabla encriptada ou cifrada")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nombre da tabela")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"num"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero de tabela")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncryptable"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Verdadero se a tabela estiver declarada como encriptada no arquivo de estrutura")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"isEncrypted"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se os registros da tabela estiverem encriptados no arquivo de dados")))),(0,n.kt)("p",null,"(*) a chave de criptografia pode ser fornecida:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"com o comando ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()"),","),(0,n.kt)("li",{parentName:"ul"},"na ra\xedz de um dispositivo conectado antes de abrir o datastore,"),(0,n.kt)("li",{parentName:"ul"},"com o comando ",(0,n.kt)("inlineCode",{parentName:"li"},"Discover data key"),".")),(0,n.kt)("h4",r({},{id:"exemplo-5"}),"Exemplo"),(0,n.kt)("p",null,"Se quiser saber o n\xfamero de tabelas criptografadas no arquivo de dados atual:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n\n $status:=ds.encryptionStatus()\n\n If($status.isEncrypted) //the database is encrypted\n    C_LONGINT($vcount)\n    C_TEXT($tabName)\n    For each($tabName;$status.tables)\n       If($status.tables[$tabName].isEncrypted)\n          $vcount:=$vcount+1\n       End if\n    End for each\n    ALERT(String($vcount)+" encrypted table(s) in this datastore.")\n Else\n    ALERT("This database is not encrypted.")\n End if\n Else\n    ALERT("This database is not encrypted.")\n End if\n Else\n    ALERT("This database is not encrypted.")\n End if\n')),(0,n.kt)("h2",r({},{id:"flushandlock"}),".flushAndLock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".flushAndLock()")),(0,n.kt)("p",null,"| Par\xe2metro | Tipo |  | Descri\xe7\xe3o                                             |\n| --------- | ---- |  | ----------------------------------------------------- |\n|           |      |  | N\xe3o exige nenhum par\xe2metro|"),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-6"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," descarrega o cache do datastore local e impede outros processos de realizar opera\xe7\xf5es de escrita na base de dados. O datastore \xe9 definido para um estado consistente e congelado. \xc9 necess\xe1rio chamar esta fun\xe7\xe3o antes de executar um instant\xe2neo da aplica\xe7\xe3o, por exemplo."),(0,n.kt)("admonition",r({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Esta fun\xe7\xe3o s\xf3 pode ser chamada:"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},"sobre a datastore local (",(0,n.kt)("a",r({parentName:"li"},{href:"#ds"}),(0,n.kt)("inlineCode",{parentName:"a"},"ds")),")."),(0,n.kt)("li",{parentName:"ul"},"no ambiente cliente/servidor, na m\xe1quina do servidor."))),(0,n.kt)("p",null,"Uma vez esta fun\xe7\xe3o executada, opera\xe7\xf5es de escrita como ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," ou outro ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," s\xe3o congeladas chamadas em todos os outros processos at\xe9 que a datastore seja desbloqueada."),(0,n.kt)("p",null,"Quando m\xfaltiplas chamadas para ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," foram feitas no mesmo processo, o mesmo n\xfamero de ",(0,n.kt)("a",r({parentName:"p"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},".unlock()"))," chamadas devem ser executadas para realmente desbloquear o datastore."),(0,n.kt)("p",null,"O datastore \xe9 desbloqueado quando:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"a fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"li"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},".unlock()"))," \xe9 chamada no mesmo processo, ou"),(0,n.kt)("li",{parentName:"ul"},"o processo que chamou a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"li"},".flushAndLock()")," \xe9 morto.")),(0,n.kt)("p",null,"Se a datastore j\xe1 estiver bloqueada de outro processo, a ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," chamada \xe9 congelada e ser\xe1 executada quando a datastore for desbloqueada."),(0,n.kt)("p",null,"Um erro \xe9 accionado se a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," n\xe3o puder ser executada (por exemplo, \xe9 executada num 4D remoto), ."),(0,n.kt)("admonition",r({},{type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},"Outras caracter\xedsticas e servi\xe7os 4D incluindo ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/Backup/backup"}),"backup"),", ",(0,n.kt)("a",r({parentName:"p"},{href:"https://doc.4d.com/4Dv19R7/4D/19-R7/Using-Volume-Shadow-Copy-Service-on-Windows.300-6078959.en.html"}),"vss"),", e ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/MSC/overview"}),"MSC")," podem tamb\xe9m bloquear a datastore. Antes de ligar para ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()"),", certifique-se de que nenhuma outra ac\xe7\xe3o de bloqueio est\xe1 a ser utilizada, a fim de evitar qualquer interac\xe7\xe3o inesperada.")),(0,n.kt)("h4",r({},{id:"exemplo-6"}),"Exemplo"),(0,n.kt)("p",null,"Se quiser criar uma c\xf3pia da pasta de dados juntamente com o seu arquivo de di\xe1rio actual:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$destination:=Folder(fk documents folder).folder("Archive") \n$destination.create()\n\nds.flushAndLock() //Bloqueia opera\xe7\xf5es write de outros processos\n\n$dataFolder:=Folder(fk data folder) \n$dataFolder.copyTo($destination) //Copia a pasta de dados\n\n$oldJournalPath:=New log file //Fecha o di\xe1rio e cria um novo\n$oldJournal:=File($oldJournalPath; fk platform path) \n$oldJournal.moveTo($destination) //Salva o di\xe1rio antigo com dados\n\nds.unlock() //Nossa c\xf3pia terminou, podemos desbloquear a datastore\n')),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-1"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#locked"}),".locked()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#unlock"}),".unlock()")),(0,n.kt)("h2",r({},{id:"getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getAllRemoteContexts()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Colec\xe7\xe3o de objectos de contexto de optimiza\xe7\xe3o")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Modo avan\xe7ado:")," Esta fun\xe7\xe3o destina-se a programadores que necessitem personalizar as caracter\xedsticas padr\xe3o ORDA para configura\xe7\xf5es espec\xedficas. Na maioria dos casos, n\xe3o necessitar\xe1 de o utilizar.")),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-7"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".isAdminProtected()")," retorna ",(0,n.kt)("inlineCode",{parentName:"p"},"True")," se ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/Admin/dataExplorer"}),"Data Explorer")," acesso for desativado para a sess\xe3o de trabalho."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para mais informa\xe7\xf5es sobre como podem ser criados contextos, ver ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/datastores#clientserver-optimization"}),"optimiza\xe7\xe3o cliente/servidor"),".")),(0,n.kt)("p",null,"Cada objeto da cole\xe7\xe3o devolvida ccont\xe9m as propriedades listadas na se\xe7\xe3o.",(0,n.kt)("a",r({parentName:"p"},{href:"#properties-of-the-returned-object"}),(0,n.kt)("inlineCode",{parentName:"a"},".getRemoteContextInfo()")),"."),(0,n.kt)("h4",r({},{id:"exemplo-7"}),"Exemplo"),(0,n.kt)("p",null,"O c\xf3digo abaixo define dois contextos e os recupera utilizando ",(0,n.kt)("inlineCode",{parentName:"p"},".getAllRemoteContexts()"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\nvar $persons : cs. PersonsSelection\nvar $addresses : cs. AddressSelection\nvar $p : cs. PersonsEntity\nvar $a : cs. AddressEntity\nvar $contextA; $contextB : Object\nvar $info : Collection\nvar $text : Text\n\n// Open remote datastore\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n// Set context A\n$contextA:=New object("context"; "contextA")\n$persons:=$ds. Persons.all($contextA)\n$text:="" For each ($p; $persons)\n    $text:=$p.firstname+" lives in "+$p.address.city+" / " End for each\n\n// Set context B\n$contextB:=New object("context"; "contextB")\n$addresses:=$ds. Address.all($contextB)\n$text:="" For each ($a; $addresses)\n    $text:=$a.zipCode End for each\n\n// Get all remote contexts (in this case, contextA and contextB)\n$info:=$ds.getAllRemoteContexts()\n//$info = [{name:"contextB"; dataclass:"Address"; main:"zipCode"},\n{name:"contextA";dataclass:"Persons";main:"firstname,address.city"}]\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Este exemplo serve como uma demonstra\xe7\xe3o, n\xe3o se destina a uma implementa\xe7\xe3o real.")),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-2"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#setremotecontextinfo"}),".setRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearallremotecontexts"}),".clearAllRemoteContexts()")),(0,n.kt)("h2",r({},{id:"getinfo"}),".getInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getInfo()"),": Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Propiedades de datastore")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-8"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getInfo( )")," devolve um objecto que fornece informa\xe7\xe3o sobre o datastore. Esta fun\xe7\xe3o \xe9 \xfatil para configurar o c\xf3digo gen\xe9rico."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Objeto devolvido")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"type"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"string"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("li",null,'"4D": armaz\xe9m de dados principal, dispon\xedvel atrav\xe9s de ds '),(0,n.kt)("li",null,'"4D Server": datastore remoto, aberto com Open datastore'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"networked"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("li",null,"True: a datastore se alcan\xe7a atrav\xe9s de uma conex\xe3o de rede."),(0,n.kt)("li",null,"False: n\xe3o se alcan\xe7a a datastore atrav\xe9s de uma conex\xe3o de rede (base de dados local)"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"localID"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"ID do armaz\xe9m de dados na m\xe1quina. Corresponde \xe0 string localId dada com o comando ",(0,n.kt)("inlineCode",{parentName:"td"},"Open datastore"),'. String vazia ("") para o datastore principal.')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"connection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto descrevendo a conex\xe3o remota da datastore (n\xe3o retornado para datastore principal) Propriedades disponiveis: Propriedades disponiveis: Propriedades disponiveis:",(0,n.kt)("table",null,(0,n.kt)("tr",null,(0,n.kt)("th",null,"Propriedade"),(0,n.kt)("th",null,"Tipo"),(0,n.kt)("th",null,"Descri\xe7\xe3o")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"hostname"),(0,n.kt)("td",null,"text"),(0,n.kt)("td",null,'Endere\xe7o IP ou nome da datastore remota + ":" + n\xfamero porta')),(0,n.kt)("tr",null,(0,n.kt)("td",null,"tls"),(0,n.kt)("td",null,"boolean"),(0,n.kt)("td",null,"True se conex\xe3o segura for usada com a datastore remota")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"idleTimeout"),(0,n.kt)("td",null,"number"),(0,n.kt)("td",null,"Tempo de inatividade da sess\xe3o (em minutos)")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"user"),(0,n.kt)("td",null,"text"),(0,n.kt)("td",null,"Usuario autentificado no datastore remoto"))))))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Se a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"li"},".getInfo()")," for executada em um 4D Server ou 4D monoposto, ",(0,n.kt)("inlineCode",{parentName:"li"},"networked")," \xe9 False."),(0,n.kt)("li",{parentName:"ul"},"Se a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"li"},".getInfo()")," for executada em um 4D remoto, ",(0,n.kt)("inlineCode",{parentName:"li"},"networked")," \xe9 True")),(0,n.kt)("h4",r({},{id:"exemplo-1-2"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $info : Object\n\n $info:=ds.getInfo() //Executado em 4D Server ou 4D\n  //{"type":"4D","networked":false,"localID":""}\n\n $info:=ds.getInfo() // Executado em 4D remoto\n  //{"type":"4D","networked":true,"localID":""}\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-2"}),"Exemplo 2"),(0,n.kt)("p",null,"Em um armaz\xe9m de dados remoto:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'  var $status : Object\n\n $status:=dataStore.encryptionStatus()\n\n If($status.isEncrypted) //the database is encrypted\n    C_LONGINT($vcount)\n    C_TEXT($tabName)\n    For each($tabName;$status.tables)\n       If($status.tables[$tabName].isEncrypted)\n          $vcount:=$vcount+1\n       End if\n    End for each\n    ALERT(String($vcount)+" encrypted table(s) in this datastore.")\n Else\n    ALERT("This database is not encrypted.")\n End if\n Else\n    ALERT("This database is not encrypted.")\n End if\n')),(0,n.kt)("h2",r({},{id:"getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRemoteContextInfo"),"(",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text) : Object "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"contextName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome do contexto")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o do contexto de optimiza\xe7\xe3o")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Modo avan\xe7ado:")," Esta fun\xe7\xe3o destina-se a programadores que necessitem personalizar as caracter\xedsticas padr\xe3o ORDA para configura\xe7\xf5es espec\xedficas. Na maioria dos casos, n\xe3o necessitar\xe1 de o utilizar.")),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-9"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getRemoteContextInfo()"),"  retorna um objeto que cont\xe9m informa\xe7\xf5es sobre a otimiza\xe7\xe3o de contexto ",(0,n.kt)("em",{parentName:"p"},"contextName")," na datastore.."),(0,n.kt)("p",null,"Para saber mais sobre como contextos de otimiza\xe7\xe3o podem ser criados veja ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/datastores#clientserver-optimization"}),"client/server optimization"),"."),(0,n.kt)("h4",r({},{id:"objeto-devolvido"}),"Objeto devolvido"),(0,n.kt)("p",null,"O objeto retornado tem as propriedades abaixo:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome do contexto")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"main"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Atributo(s) associado(s) ao contexto (os nomes dos atributos s\xe3o separados por uma v\xedrgula)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataclass"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome do dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"currentItem (opcional)"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Os atributos do ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/20/ORDA/datastores#entity-selection-based-list-box"}),"page mode")," se o contexto for linkado a uma list box. Devolvido como ",(0,n.kt)("inlineCode",{parentName:"td"},"Nulo")," ou elemento de texto vazio se o nome do contexto n\xe3o for utilizado para uma caixa de listagem, ou se n\xe3o houver contexto para o actualItem")))),(0,n.kt)("p",null,"Como os contextos se comportam como filtros de atributos, se ",(0,n.kt)("em",{parentName:"p"},"principal")," for devolvido vazio, significa que nenhum filtro \xe9 aplicado, e que o servidor devolve todos os atributos de dataclass."),(0,n.kt)("h4",r({},{id:"exemplo-8"}),"Exemplo"),(0,n.kt)("p",null,"Ver o exemplo da sec\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"#example-1-3"}),".setRemoteContextInfo()"),"."),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-3"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#setremotecontextinfo"}),".setRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearallremotecontexts"}),".clearAllRemoteContexts()")),(0,n.kt)("h2",r({},{id:"getrequestlog"}),".getRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRequestLog()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cole\xe7\xe3o de objetos onde cada objeto descreve uma peti\xe7\xe3o")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-10"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getRequestLog()")," devolve os pedidos ORDA registados na mem\xf3ria do lado do cliente. ."),(0,n.kt)("p",null,"Esta fun\xe7\xe3o deve ser chamada em um 4D remoto, do contr\xe1rio devolve uma cole\xe7\xe3o vazia. Foi criado para depura\xe7\xe3o em configura\xe7\xf5es de cliente/servidor."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Valor retornado")),(0,n.kt)("p",null,"Cole\xe7\xe3o de objetos de peti\xe7\xe3o empilhados. A peti\xe7\xe3o mais recente tem indice 0."),(0,n.kt)("p",null,"Para uma descri\xe7\xe3o do formato do registro de peti\xe7\xf5es de ORDA, consulte a se\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"https://doc.4d.com/4Dv18/4D/18/Description-of-log-files.300-4575486.en.html#4385373"}),(0,n.kt)("strong",{parentName:"a"},"Perguntas do cliente ORDA")),"."),(0,n.kt)("h4",r({},{id:"exemplo-9"}),"Exemplo"),(0,n.kt)("p",null,"Ver o exemplo 2 de ",(0,n.kt)("a",r({parentName:"p"},{href:"#startrequestlog"}),(0,n.kt)("inlineCode",{parentName:"a"},".startRequestLog()")),"."),(0,n.kt)("h2",r({},{id:"isadminprotected"}),".isAdminProtected()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".isAdminProtected()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se o acesso ao Explorador de Dados estiver desativado, False se estiver ativado (por padr\xe3o)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-11"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," inicia o registo dos pedidos ORDA no lado do cliente."),(0,n.kt)("p",null,"Como padr\xe3o, o acesso ao Explorador de Dados se concede para as sess\xf5es ",(0,n.kt)("inlineCode",{parentName:"p"},"webAdmin"),", mas pode ser desativada para evitar qualquer acesso aos dados por parte dos administradores (ver a fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"#setadminprotection"}),(0,n.kt)("inlineCode",{parentName:"a"},".setAdminProtection()")),")."),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-4"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#setadminprotection"}),(0,n.kt)("inlineCode",{parentName:"a"},".setAdminProtection()"))),(0,n.kt)("h2",r({},{id:"locked"}),".locked()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".locked()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Verdadeiro se trancado")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-12"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".locked()")," retorna Verdadeiro se o datastore local estiver actualmente bloqueado."),(0,n.kt)("p",null,"Pode bloquear o datastore usando a fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),".flushAndLock()")," antes de executar um instant\xe2neo do ficheiro de dados, por exemplo."),(0,n.kt)("admonition",r({},{type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},"A fun\xe7\xe3o tamb\xe9m retornar\xe1 ",(0,n.kt)("inlineCode",{parentName:"p"},"True")," se a datastore foi bloqueada por outra funcionalidade de administra\xe7\xe3o como backup ou vss (ver ",(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),".flushAndLock()"),").")),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-5"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),".flushAndLock()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#unlock"}),".unlock()")),(0,n.kt)("h2",r({},{id:"makeselectionsalterable"}),".makeSelectionsAlterable()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".makeSelectionsAlterable()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xe3o exige nenhum par\xe2metro")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-13"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".makeSelectionsAlterable()")," estabelece todas as sele\xe7\xf5es de entidade como edit\xe1vel como padr\xe3o nas datastore de aplica\xe7\xe3o atuais. (incluindo ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/datastores"}),"remote datastores"),"). Est\xe1 pensado para ser utilizado uma vez, por exemplo no m\xe9todo base ",(0,n.kt)("inlineCode",{parentName:"p"},"On Startup"),"."),(0,n.kt)("p",null,'quando nesta fun\xe7\xe3o n\xe3o for chamada, as novas sele\xe7\xf5es de entidades podem ser compartilh\xe1veis, dependendo da natureza de seu "pai", ou de ',(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/entities#shareable-or-non-shareable-entity-selections"}),"como foram criadas"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Esta fun\xe7\xe3o n\xe3o modifica as sele\xe7\xf5es de entidades criadas por ",(0,n.kt)("a",r({parentName:"p"},{href:"#copy"}),(0,n.kt)("inlineCode",{parentName:"a"},".copy()"))," ou ",(0,n.kt)("inlineCode",{parentName:"p"},"OB Copy")," quando se utilizar a op\xe7\xe3o expl\xedcita ",(0,n.kt)("inlineCode",{parentName:"p"},"ck shared"),".")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Compatibilidade"),": esta fun\xe7\xe3o s\xf3 deve ser utilizada em projetos convertidos desde vers\xf5es de 4D anteriores a 4D v18 R5 e que contenham chamadas ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/API/EntitySelectionClass#add"}),".add()"),". Nste contexto, o uso de ",(0,n.kt)("inlineCode",{parentName:"p"},".makeSelectionsAlterable()")," pode poupar tempo ao restaurar instantaneamente o comportamento anterior de 4D nos projetos existentes. Por outro lado, utilizar este m\xe9todo em projetos novos criados em 4D v18 R5 e superiores ",(0,n.kt)("strong",{parentName:"p"},"n\xe3o \xe9 recomend\xe1vel"),", j\xe1 que impede compartir as sele\xe7\xf5es de entidades, o que oferece maior rendimento e escalabilidade.")),(0,n.kt)("h2",r({},{id:"providedatakey"}),".provideDataKey()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"p"},"curPassPhrase")," : Text ) : Object ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".provideDataKey"),"( ",(0,n.kt)("em",{parentName:"p"},"curDataKey")," : Object ) : Object "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"curPassPhrase"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Frase de cifrado atual")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"curDataKey"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Chave de criptografia de dados atual")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultado da coincid\xeancia da chave de criptografia")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-14"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".provideDataKey()")," permite oferecer uma chave de criptografia de dados para o arquivo de dados atual da datastore e detecta se a chave corresponder com os dados criptografados.. Esta fun\xe7\xe3o pode ser utilizada ao abrir um banco de dados criptografado, ou ao executar qualquer opera\xe7\xe3o de criptografia que precise da chave de criptografia, como por exemplo voltar a criptografar o arquivo de dados."),(0,n.kt)("blockquote",null,(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()")," deve ser chamada em um banco de dados criptografada. Se for chamado em uma database n\xe3o criptografada, o erro 2003 (a chave de criptografia n\xe3o corresponde aos dados) \xe9 retornada. Utilize o comando ",(0,n.kt)("inlineCode",{parentName:"li"},"Estado de cifrado do arquivo de dados")," para determinar se o banco de dados estiver cifrada."),(0,n.kt)("li",{parentName:"ul"},"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"li"},".provideDataKey()")," n\xe3o pode ser chamada desde um 4D remoto ou uma datastore remoto encriptado."))),(0,n.kt)("p",null,"Se utilizar o par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"curPassPhrase"),", passe a string utilizada para gerar a chave de cifrado de dados. Quando usar este par\xe2metro, uma chave de criptografia \xe9 gerada."),(0,n.kt)("p",null,"Se utilizar o par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"curDataKey"),", passe um objeto (com a propriedade ",(0,n.kt)("em",{parentName:"p"},"encodedKey"),") que contenha a chave de cifrado dos dados. Esta chave pode ter sido gerada com o comando ",(0,n.kt)("inlineCode",{parentName:"p"},"New data key"),"."),(0,n.kt)("p",null,"Se aportar uma chave de cifrado de dados v\xe1lida, se adicionar a ",(0,n.kt)("em",{parentName:"p"},"keyChain")," da mem\xf3ria e se ativa o modo de cifrado:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"todas as modifica\xe7\xf5es de dados nas tabelas encriptadas s\xe3o cifradas no disco (.4DD, .journal. 4Dindx)"),(0,n.kt)("li",{parentName:"ul"},"todos os dados carregados desde tabelas criptografadas s\xe3o descifradas na mem\xf3ria")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultados")),(0,n.kt)("p",null,"O resultado da ordem se descreve no objeto devolvido:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se a chave da criptografia proporcionada coincide com os dados encriptados, False em caso contr\xe1rio")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"As seguintes propriedades s\xe3o devolvidas s\xf3 se success for ",(0,n.kt)("em",{parentName:"td"},"FALSE"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro (4 se a chave de encripta\xe7\xe3o fornecida for errada)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensagem de erro")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Pilha de erros. O primeiro erro tem o \xedndice mais alto")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].componentSignature"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome do componente interno")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero de erro")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"["," ].message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensagem de erro")))),(0,n.kt)("p",null,"Se n\xe3o for dada uma ",(0,n.kt)("em",{parentName:"p"},"curPassphrase")," ou ",(0,n.kt)("em",{parentName:"p"},"curDataKey"),", ",(0,n.kt)("inlineCode",{parentName:"p"},".provideDataKey()")," devolve ",(0,n.kt)("strong",{parentName:"p"},"null")," (n\xe3o \xe9 gerado nenhum erro)."),(0,n.kt)("h4",r({},{id:"exemplo-10"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $keyStatus : Object\n var $passphrase : Text\n\n $passphrase:=Request("Enter the passphrase")\n If(OK=1)\n    $keyStatus:=ds.provideDataKey($passphrase)\n    If($keyStatus.success)\n       ALERT("You have provided a valid encryption key")\n    Else\n       ALERT("You have provided an invalid encryption key, you will not be able to work with encrypted data")\n    End if\n End if\n')),(0,n.kt)("h2",r({},{id:"setadminprotection"}),".setAdminProtection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".setAdminProtection"),"( ",(0,n.kt)("em",{parentName:"p"},"status")," : Boolean )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True para desativar o acesso Data Explorer aos dados do porto ",(0,n.kt)("inlineCode",{parentName:"td"},"webAdmin"),", False (por padr\xe3o) para outorgar o acesso")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-15"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".setAdminProtection()")," permite desativar qualquer acesso de dados em ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/Admin/webAdmin#http-port"}),"web admin port"),", incluindo as sess\xf5es ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/Admin/dataExplorer"}),"Data Explorer")," in ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin"),"."),(0,n.kt)("p",null,"Por padr\xe3o, quando n\xe3o chamar a fun\xe7\xe3o, o acesso aos dados se concede sempre no porto de administra\xe7\xe3o web para uma sess\xe3o com privil\xe9gio ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin")," utilizando o Explorador de Dados. Em algumas configura\xe7\xf5es, por exemplo, quando o servidor de aplica\xe7\xf5es estiver alojado em uma m\xe1quina de terceiros, \xe9 possivel que n\xe3o quiser que o administrador possaa ver seus dados, mesmo que possa editar a configura\xe7\xe3o do servidor, incluindo a configura\xe7\xe3o da ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/Admin/webAdmin#access-key"}),"access key"),"."),(0,n.kt)("p",null,"Neste caso, pode chamar a esta fun\xe7\xe3o para desabilitar o acesso aos dados do Explorador de Dados no porto de administra\xe7\xe3o web da m\xe1quina, mesmo se a sess\xe3o de usu\xe1rio tiver o privil\xe9gio ",(0,n.kt)("inlineCode",{parentName:"p"},"WebAdmin"),". Quando esta fun\xe7\xe3o for executada, o arquivo de dados \xe9 protegido imediatamente e o estado \xe9 armazenado no disco: o arquivo de dados \xe9 protegido mesmo se a aplica\xe7\xe3o for restaurada."),(0,n.kt)("h4",r({},{id:"exemplo-11"}),"Exemplo"),(0,n.kt)("p",null,"Se criar um m\xe9todo projeto ",(0,n.kt)("em",{parentName:"p"},"protectDataFile")," para chamar antes dos lan\xe7amentos, por exemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," ds.setAdminProtection(True) //Desativa o acesso aos dados do Explorador de Dados\n")),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-6"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#isadminprotected"}),(0,n.kt)("inlineCode",{parentName:"a"},".isAdminProtected()"))),(0,n.kt)("h2",r({},{id:"setremotecontextinfo"}),".setRemoteContextInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"dataClassName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"attributes")," : Text {; ",(0,n.kt)("em",{parentName:"p"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"pageLength")," : Integer}})",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"dataClassName")," : Text; ",(0,n.kt)("em",{parentName:"p"},"attributesColl")," : Collection {; ",(0,n.kt)("em",{parentName:"p"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"pageLength")," : Integer }} )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"dataClassObject")," : 4D. DataClass ; ",(0,n.kt)("em",{parentName:"p"},"attributes")," : Text {; ",(0,n.kt)("em",{parentName:"p"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"pageLength")," : Integer }})",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".setRemoteContextInfo"),"( ",(0,n.kt)("em",{parentName:"p"},"contextName")," : Text ; ",(0,n.kt)("em",{parentName:"p"},"dataClassObject")," : 4D. DataClass ; ",(0,n.kt)("em",{parentName:"p"},"attributesColl")," : Collection {; ",(0,n.kt)("em",{parentName:"p"},"contextType")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"pageLength")," : Integer }} )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"contextName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome do contexto")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataClassName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataClassObject"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. DataClass"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataclass object (e.g datastore. Employee)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributes"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Lista de atributos separada por v\xedrgulas")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Atributos do tipo BLOB n\xe3o s\xe3o gerenciados na datastore."),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cole\xe7\xe3o de nomes de atributos (text)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"contextType"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Se fornecido, o valor deve ser "main" ou "currentItem"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"pageLength"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Dura\xe7\xe3o da p\xe1gina da selec\xe7\xe3o da entidade ligada ao contexto (por padr\xe3o \xe9 80)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Modo avan\xe7ado:")," Esta fun\xe7\xe3o destina-se a programadores que necessitem personalizar as caracter\xedsticas padr\xe3o ORDA para configura\xe7\xf5es espec\xedficas. Na maioria dos casos, n\xe3o necessitar\xe1 de o utilizar.")),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-16"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".setRemoteContextInfo()")," conecta os atributos de dataclass especificados ao contexto de otimiza\xe7\xe3o ",(0,n.kt)("em",{parentName:"p"},"contextName"),". Se j\xe1 existir um contexto de optimiza\xe7\xe3o para os atributos especificados, este comando substitui-o."),(0,n.kt)("p",null,"Quando se passa um contexto para as fun\xe7\xf5es da classe ORDA, a optimiza\xe7\xe3o do pedido REST \xe9 desencadeada imediatamente:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"a primeira entidade n\xe3o \xe9 carregada totalmente, como no modo autom\xe1tico"),(0,n.kt)("li",{parentName:"ul"},"p\xe1ginas de 80 entidades (ou ",(0,n.kt)("inlineCode",{parentName:"li"},"pageLength"),") s\xe3o imediatamente perguntadas ao servidor com apenas os atributos no contexto")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para saber mais sobre os contextos de otimiza\xe7\xe3o s\xe3o construidos, veja  ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/ORDA/datastores#clientserver-optimization"}),"client/server optimization paragraph"))),(0,n.kt)("p",null,"em ",(0,n.kt)("em",{parentName:"p"},"contextName"),", passe o nome do contexto de otimiza\xe7\xe3o ao link para os atributos de dataclass."),(0,n.kt)("p",null,"Para designar a dataclass que vai receber o contexto, passa  ",(0,n.kt)("em",{parentName:"p"},"dataClassName")," ou ",(0,n.kt)("em",{parentName:"p"},"dataClassObject"),"."),(0,n.kt)("p",null,"Para designar o atributo a link ao contexto, passe ou uma lista de atributos separados por uma v\xedrgula em ",(0,n.kt)("em",{parentName:"p"},"attributes")," (Texto), ou uma cole\xe7\xe3o de nomes de atributo em ",(0,n.kt)("em",{parentName:"p"},"attributesColl")," (cole\xe7\xe3o de texto)."),(0,n.kt)("p",null,"Se ",(0,n.kt)("em",{parentName:"p"},"attributes")," for um Texto vazio, ou ",(0,n.kt)("em",{parentName:"p"},"attributesColl")," for uma cole\xe7\xe3o vazia, todos os atributos escalares da dataclass s\xe3o colocadas no contexto de otimiza\xe7\xe3o. Se passar um atributo que n\xe3o existir na dataclass, a fun\xe7\xe3o a ignora e um erro \xe9 enviado."),(0,n.kt)("p",null,"Pode passar ",(0,n.kt)("em",{parentName:"p"},"contextType")," para especificar se o contexto \xe9 um contexto padr\xe3o ou o contexto do item de sele\xe7\xe3o de entidade atual exibido em uma list box:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'Se estabelecido como "main" (padr\xe3o),  ',(0,n.kt)("em",{parentName:"li"},"contextName")," designa um contexto padr\xe3o."),(0,n.kt)("li",{parentName:"ul"},'Se definido para "currentItem", os atributos passados s\xe3o colocados no contexto do item actual.  Ver  ',(0,n.kt)("a",r({parentName:"li"},{href:"/docs/pt/20/ORDA/datastores#entity-selection-based-list-box"}),"List box baseado na sele\xe7\xe3o da entidade"),".")),(0,n.kt)("p",null,"Em ",(0,n.kt)("em",{parentName:"p"},"pageLength"),", especificar o n\xfamero de entidades dataclass a solicitar ao servidor."),(0,n.kt)("p",null,"Pode passar um ",(0,n.kt)("em",{parentName:"p"},"pageLength")," para um atributo relacional que \xe9 uma selec\xe7\xe3o de entidade (uma a muitas). A sintaxe \xe9 ",(0,n.kt)("inlineCode",{parentName:"p"},"relationAttributeName:pageLength")," (e.g. employees:20)."),(0,n.kt)("h4",r({},{id:"exemplo-1-3"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\nvar $persons : cs. PersonsSelection\nvar $p : cs. PersonsEntity\nvar $contextA : Object\nvar $info : Object\nvar $text : Text\n\n// Open remote datastore\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n// Set context info\n$contextA:=New object("context"; "contextA")\n$ds.setRemoteContextInfo("contextA"; $ds. Persons; "firstname, lastname")\n\n// Send requests to the server using a loop\n$persons:=$ds. Persons.all($contextA)\n$text:="" For each ($p; $persons)\n    $text:=$p.firstname + " " + $p.lastname End for each\n\n// Check contents of the context\n$info:=$ds.getRemoteContextInfo("contextA")\n// $info = {name:"contextA";dataclass:"Persons";main:"firstname, lastname"}\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Este exemplo serve como uma demonstra\xe7\xe3o, n\xe3o se destina a uma implementa\xe7\xe3o real.")),(0,n.kt)("h4",r({},{id:"exemplo-2-3"}),"Exemplo 2"),(0,n.kt)("p",null,"O seguinte peda\xe7o de c\xf3digo solicita p\xe1ginas de 30 entidades do ",(0,n.kt)("inlineCode",{parentName:"p"},"Endere\xe7o")," dataclass do servidor. As entidades devolvidas cont\xeam apenas o atributo ",(0,n.kt)("inlineCode",{parentName:"p"},"zipCode"),"."),(0,n.kt)("p",null,"Para cada ",(0,n.kt)("inlineCode",{parentName:"p"},"endere\xe7o")," entidade, 20 pessoas entidades s\xe3o devolvidas, e s\xf3 cont\xeam os atributos ",(0,n.kt)("inlineCode",{parentName:"p"},"\xfaltimo nome")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"primeiro nome")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$ds.setRemoteContextInfo("contextA"; $ds. Address; "zipCode, persons:20,\\\npersons.lastname, persons.firstname"; "main"; 30)\n')),(0,n.kt)("h4",r({},{id:"exemplo-3---listbox"}),"Exemplo 3 - Listbox"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'// When the form loads Case of\n    : (Form event code=On Load)\n\n        Form.ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n       // Set the attributes of the page context\n        Form.ds.setRemoteContextInfo("LB"; Form.ds. Persons; "age, gender,\\\n        children"; "currentItem")\n\n        Form.settings:=New object("context"; "LB")\n        Form.persons:=Form.ds. Persons.all(Form.settings)\n        // Form.persons is displayed in a list box End case\n\n// When you get the attributes in the context of the current item: Form.currentItemLearntAttributes:=Form.selectedPerson.getRemoteContextAttributes()\n// Form.currentItemLearntAttributes = "age, gender, children"\n')),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-7"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearallremotecontexts"}),".clearAllRemoteContexts()")),(0,n.kt)("h2",r({},{id:"startrequestlog"}),".startRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Suporte do lado do servidor, novo par\xe2metro ",(0,n.kt)("inlineCode",{parentName:"td"},"options"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"()",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"p"},"file")," : 4D.File )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"p"},"file")," : 4D.File ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer )",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".startRequestLog"),"( ",(0,n.kt)("em",{parentName:"p"},"reqNum")," : Integer )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"file"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. File"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto File")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"options"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Op\xe7\xe3o de registo de resposta (apenas servidor)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"reqNum"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero de pedidos a manter na mem\xf3ria (apenas cliente)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-17"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," inicia o registo dos pedidos ORDA no lado do cliente ou no lado do servidor. Foi criado para depura\xe7\xe3o em configura\xe7\xf5es de cliente/servidor."),(0,n.kt)("admonition",r({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"Para uma descri\xe7\xe3o do formato do registo de peti\xe7\xf5es ORDA, consulte a sec\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/20/Debugging/debugLogFiles#orda-requests"}),(0,n.kt)("strong",{parentName:"a"},"peti\xe7\xf5es ORDA")),".")),(0,n.kt)("h4",r({},{id:"do-lado-do-cliente"}),"Do lado do cliente"),(0,n.kt)("p",null,"Para criar um registo de pedidos ORDA do lado do cliente, chame esta fun\xe7\xe3o numa m\xe1quina remota. O registro pode ser enviado para um arquivo ou para a mem\xf3ria, dependendo do par\xe2metro:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Se passar um objeto ",(0,n.kt)("em",{parentName:"p"},"file")," criado com o comando ",(0,n.kt)("inlineCode",{parentName:"p"},"File"),", os dados de registro se escrevem neste arquivo como uma cole\xe7\xe3o de objetos (formato JSON). Cada objeto representa uma peti\xe7\xe3o.",(0,n.kt)("br",null),"Se o arquivo n\xe3o existir, ser\xe1 criado. No caso contr\xe1rio, ou seja, se o arquivo j\xe1 existir, os novos dados de registro ser\xe3o adicionados a ele. Se ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," for chamado com um arquivo enquanto o registro em log tiver sido iniciado anteriormente na mem\xf3ria, o registro em mem\xf3ria ser\xe1 interrompido e esvaziado."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Deve adicionar manualmente um caractere \\N ao final do arquivo para realizar uma valida\xe7\xe3o JSON"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Se passar um inteiro ",(0,n.kt)("em",{parentName:"p"},"reqNum"),", se esvazia o registro em mem\xf3ria (se houver) e se inicializa um novo registro. Vai manter ",(0,n.kt)("em",{parentName:"p"},"reqNum")," peti\xe7\xf5es em mem\xf3ria at\xe9 que se alcance o n\xfamero, em cujo caso se esvaziam as entradas mais antigas (pilha FIFO).",(0,n.kt)("br",null),"Se chamar a ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," com um ",(0,n.kt)("em",{parentName:"p"},"reqNum")," enquanto tiver iniciado previamente um registro em um arquivo, se para o registro do arquivo.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Se n\xe3o tiver passado nenhum par\xe2metro, o registro se inicia na mem\xf3ria. Se chamou previamente a ",(0,n.kt)("inlineCode",{parentName:"p"},".startRequestLog()")," com um ",(0,n.kt)("em",{parentName:"p"},"reqNum")," (antes de um ",(0,n.kt)("inlineCode",{parentName:"p"},".stopRequestLog()"),"), os datos do registro s\xe3o empilhados em mem\xf3ria at\xe9 a pr\xf3xima vez que se esvazie o registro ou se chame a ",(0,n.kt)("inlineCode",{parentName:"p"},".stopRequestLog()"),"."))),(0,n.kt)("h4",r({},{id:"do-lado-do-servidor"}),"Do lado do servidor"),(0,n.kt)("p",null,"Para criar um registro de pedidos ORDA no lado do servidor, chame essa fun\xe7\xe3o no m\xe1quina servidor. Os dados de registo s\xe3o escritos num ficheiro no formato ",(0,n.kt)("inlineCode",{parentName:"p"},".jsonl"),". Cada objeto representa um pedido. Se o ficheiro ainda n\xe3o existir, \xe9 criado. No caso contr\xe1rio, ou seja, se o arquivo j\xe1 existir, os novos dados de registro ser\xe3o adicionados a ele."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Se voc\xea passou o par\xe2metro ",(0,n.kt)("em",{parentName:"li"},"file"),", os dados de registro ser\xe3o gravados nesse arquivo, no local solicitado. - Se voc\xea omitir o par\xe2metro ",(0,n.kt)("em",{parentName:"li"},"file")," ou se ele for null, os dados de registro ser\xe3o gravados em um arquivo chamado ",(0,n.kt)("em",{parentName:"li"},"ordaRequests.jsonl"),' e armazenados na pasta "/LOGS".'),(0,n.kt)("li",{parentName:"ul"},"O par\xe2metro ",(0,n.kt)("em",{parentName:"li"},"options")," pode ser usado para especificar se a resposta do servidor deve ser registrada e se deve incluir o corpo. Por padr\xe3o, quando o par\xe2metro \xe9 omisso, a resposta completa \xe9 registrada. As seguintes constantes podem ser utilizadas neste par\xe2metro:")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"srl log all"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Registar a resposta na \xedntegra (valor predefinido)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"srl log no response"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Desativar o registo da resposta")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"srl log response without body"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Registar a resposta sem o corpo")))),(0,n.kt)("h4",r({},{id:"exemplo-1-4"}),"Exemplo 1"),(0,n.kt)("p",null,"Se quiser registras as peti\xe7\xf5es dos clientes ORDA em um arquivo e usar o n\xfamero de sequencia do registro:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $file : 4D. File\n var $e : cs. PersonsEntity\n\n $file:=File("/LOGS/ORDARequests.txt") //logs folder\n\n SET DATABASE PARAMETER(Client Log Recording;1) //to trigger the global log sequence number\n ds.startRequestLog($file)\n $e:=ds. Persons.get(30001) //send a request\n ds.stopRequestLog()\n SET DATABASE PARAMETER(Client Log Recording;0)\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-4"}),"Exemplo 2"),(0,n.kt)("p",null,"Se quiser registrar as peti\xe7\xf5es dos clientes ORDA na mem\xf3ria:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs. PersonsSelection\n var $log : Collection\n\n ds.startRequestLog(3) //keep 3 requests in memory\n\n $es:=ds. Persons.query("name=:1";"Marie")\n $es:=ds. Persons.query("name IN :1";New collection("Marie"))\n $es:=ds.Persons.query("name=:1";"So@")\n\n $log:=ds.getRequestLog()\n ALERT("The longest request lasted: "+String($log.max("duration"))+" ms")\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-1"}),"Exemplo 3"),(0,n.kt)("p",null,"Voc\xea deseja registrar as peticiones do servidor ORDA em um arquivo espec\xedfico e ativar o n\xfamero de sequ\xeancia do registro e a dura\xe7\xe3o:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'SET DATABASE PARAMETER(4D Server Log Recording;1)\n\n$file:=Folder(fk logs folder).file("myOrdaLog.jsonl")\nds.startRequestLog($file)\n...\nds.stopRequestLog()\nSET DATABASE PARAMETER(4D Server Log Recording;0)\n\n\n')),(0,n.kt)("h2",r({},{id:"starttransaction"}),".startTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".startTransaction()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xe3o exige nenhum par\xe2metro")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-18"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".startTransaction()")," inicia uma transa\xe7\xe3o no processo atual na base de dados que corresponde \xe0 base de dados \xe0 qual se aplica. Quaisquer altera\xe7\xf5es feitas \xe0s entidades do datastore no processo da transac\xe7\xe3o s\xe3o armazenadas temporariamente at\xe9 que a transac\xe7\xe3o seja validada ou cancelada."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Se chamar a este m\xe9todo no armaz\xe9m de dados principal (ou seja, o armaz\xe9m de dados devolvido pelo comando ",(0,n.kt)("inlineCode",{parentName:"p"},"ds"),"), a transa\xe7\xe3o se aplica a todas as opera\xe7\xf5es realizadas no armaz\xe9m de dados principal e no banco de dados subjacente, incluindo portanto ORDA e as linguagens cl\xe1ssicas.")),(0,n.kt)("p",null,"Pode aninhar v\xe1rias transa\xe7\xf5es (subtransa\xe7\xf5es). Cada transa\xe7\xe3o ou subtransa\xe7\xe3o deve ser eventualmente cancelada ou validada. Note que se cancelar a transa\xe7\xe3o principal, tamb\xe9m se cancelam todas suas subtransa\xe7\xf5es, mesmo se tiver validado individualmente mediante a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".validateTransaction()"),"."),(0,n.kt)("h4",r({},{id:"exemplo-12"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $connect; $status : Object\n var $person : cs. PersonsEntity\n var $ds : cs. DataStore\n var $choice : Text\n var $error : Boolean\n\n Case of\n    :($choice="local")\n       $ds:=ds\n    :($choice="remote")\n       $connect:=New object("hostname";"111.222.3.4:8044")\n       $ds:=Open datastore($connect;"myRemoteDS")\n End case\n\n $ds.startTransaction()\n $person:=$ds. Persons.query("lastname=:1";"Peters").first()\n\n If($person#Null)\n    $person.lastname:="Smith"\n    $status:=$person.save()\n End if\n ...\n ...\n If($error)\n    $ds.cancelTransaction()\n Else\n    $ds.validateTransaction()\n End if\n')),(0,n.kt)("h2",r({},{id:"stoprequestlog"}),".stopRequestLog()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Suporte do lado do servidor")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".stopRequestLog()"),"  "),(0,n.kt)("p",null,"| Par\xe2metro | Tipo |  | Descri\xe7\xe3o                                             |\n| --------- | ---- |  | ----------------------------------------------------- |\n|           |      |  | N\xe3o exige nenhum par\xe2metro|"),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-19"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".stopRequestLog()")," p\xe1ra qualquer registo de pedidos ORDA na m\xe1quina a que \xe9 chamado (cliente ou servidor)."),(0,n.kt)("p",null,"Fecha efetivamente o documento aberto no disco. No lado do cliente, se o registo tiver sido iniciado na mem\xf3ria, \xe9 interrompido."),(0,n.kt)("p",null,"Esta fun\xe7\xe3o n\xe3o faz nada se o registo dos pedidos ORDA n\xe3o tiver sido iniciado na m\xe1quina."),(0,n.kt)("h4",r({},{id:"exemplo-13"}),"Exemplo"),(0,n.kt)("p",null,"Ver exemplos ",(0,n.kt)("a",r({parentName:"p"},{href:"#startrequestlog"}),(0,n.kt)("inlineCode",{parentName:"a"},".startRequestLog()")),"."),(0,n.kt)("h2",r({},{id:"unlock"}),".unlock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"20"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".unlock()")),(0,n.kt)("p",null,"| Par\xe2metro | Tipo |  | Descri\xe7\xe3o                                             |\n| --------- | ---- |  | ----------------------------------------------------- |\n|           |      |  | N\xe3o exige nenhum par\xe2metro|"),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-20"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," remove o bloqueio actual das opera\xe7\xf5es de escrita no datastore, se este tiver sido definido no mesmo processo. As opera\xe7\xf5es de escrita podem ser bloqueadas no datastore local usando a fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),(0,n.kt)("inlineCode",{parentName:"a"},".flushAndLock()"))," ."),(0,n.kt)("p",null,"Se a fechadura actual era a \xfanica fechadura no datastore, as opera\xe7\xf5es de escrita s\xe3o imediatamente activadas. Se a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()")," foi chamada v\xe1rias vezes no processo, o mesmo n\xfamero de ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," deve ser chamado para realmente desbloquear o datastore."),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," deve ser chamada a partir do processo que chamou o correspondente ",(0,n.kt)("inlineCode",{parentName:"p"},".flushAndLock()"),", caso contr\xe1rio a fun\xe7\xe3o nada faz e a fechadura n\xe3o \xe9 removida."),(0,n.kt)("p",null,"Se a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," for chamada numa datastore desbloqueada, n\xe3o faz nada."),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-8"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#flushandlock"}),".flushAndLock()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#locked"}),".locked()")),(0,n.kt)("h2",r({},{id:"validatetransaction"}),".validateTransaction()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"18"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".validateTransaction()"),"  "),(0,n.kt)("p",null,"| Par\xe2metro | Tipo |  | Descri\xe7\xe3o                                             |\n| --------- | ---- |  | ----------------------------------------------------- |\n|           |      |  | N\xe3o exige nenhum par\xe2metro|"),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-21"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".validateTransaction()")," aceita a transa\xe7\xe3o que foi iniciado com ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()"))," ao n\xedvel correspondente no datastore especificado."),(0,n.kt)("p",null,"A fun\xe7\xe3o salva as mudan\xe7as nos dados do datastore que se produziram durante a transa\xe7\xe3o."),(0,n.kt)("p",null,"Pode aninhar v\xe1rias transa\xe7\xf5es (subtransa\xe7\xf5es). Se a transa\xe7\xe3o principal for cancelada, todas suas subtransa\xe7\xf5es tamb\xe9m s\xe3o canceladas, mesmo se validadas individualmente usando esta fun\xe7\xe3o."),(0,n.kt)("h4",r({},{id:"exemplo-14"}),"Exemplo"),(0,n.kt)("p",null,"Ver exemplos ",(0,n.kt)("a",r({parentName:"p"},{href:"#starttransaction"}),(0,n.kt)("inlineCode",{parentName:"a"},".startTransaction()")),"."))}u.isMDXComponent=!0}}]);