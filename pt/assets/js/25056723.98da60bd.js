"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["25639"],{121917:function(e,o,n){n.r(o),n.d(o,{frontMatter:()=>l,toc:()=>c,default:()=>m,metadata:()=>a,assets:()=>d,contentTitle:()=>t});var a=JSON.parse('{"id":"commands/formula","title":"Formula","description":"Hist\xf3ria","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-21/commands/formula.md","sourceDirName":"commands","slug":"/commands/formula","permalink":"/docs/pt/commands/formula","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands%2Fformula.md%20(21)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"21","frontMatter":{"id":"formula","title":"Formula","slug":"/commands/formula","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"EXECUTE FORMULA","permalink":"/docs/pt/commands/execute-formula"},"next":{"title":"Formula from string","permalink":"/docs/pt/commands/formula-from-string"}}'),r=n(785893),s=n(250065);let l={id:"formula",title:"Formula",slug:"/commands/formula",displayed_sidebar:"docs"},t=void 0,d={},c=[{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:2},{value:"Exemplo 1",id:"exemplo-1",level:2},{value:"Exemplo 2",id:"exemplo-2",level:2},{value:"Exemplo 3",id:"exemplo-3",level:2},{value:"Exemplo",id:"exemplo",level:2},{value:"Exemplo 2",id:"exemplo-2-1",level:2},{value:"Exemplo 6",id:"exemplo-6",level:2},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m",level:2},{value:"Propriedades",id:"propriedades",level:2}];function i(e){let o={a:"a",br:"br",code:"code",details:"details",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.details,{children:[(0,r.jsx)(o.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:"Release"}),(0,r.jsx)(o.th,{children:"Mudan\xe7as"})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"17 R6"}),(0,r.jsx)(o.td,{children:"Renomeado (New formula -> Formula)"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"17 R3"}),(0,r.jsx)(o.td,{children:"Adicionado"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Formula"})," ( ",(0,r.jsx)(o.em,{children:"formulaExp"})," : Expression ) : 4D.Function"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:"Par\xe2metro"}),(0,r.jsx)(o.th,{children:"Tipo"}),(0,r.jsx)(o.th,{style:{textAlign:"center"}}),(0,r.jsx)(o.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"formulaExp"}),(0,r.jsx)(o.td,{children:"Expression"}),(0,r.jsx)(o.td,{style:{textAlign:"center"},children:"\u2192"}),(0,r.jsx)(o.td,{children:"F\xf3rmula a ser retornada como objeto"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Resultados"}),(0,r.jsx)(o.td,{children:"4D. Function"}),(0,r.jsx)(o.td,{style:{textAlign:"center"},children:"\u2190"}),(0,r.jsx)(o.td,{children:"Fun\xe7\xe3o nativa encapsulando a f\xf3rmula"})]})]})]}),"\n",(0,r.jsx)(o.h2,{id:"descri\xe7\xe3o",children:"Descri\xe7\xe3o"}),"\n",(0,r.jsxs)(o.p,{children:["O comando ",(0,r.jsx)(o.code,{children:"Formula"})," cria um objeto ",(0,r.jsx)(o.code,{children:"4D Function"})," com base na express\xe3o ",(0,r.jsx)(o.em,{children:"formulaExp"}),". ",(0,r.jsx)(o.em,{children:"formulaExp"})," pode ser t\xe3o simples quanto um \xfanico valor ou t\xe3o complexo quanto um m\xe9todo projeto com par\xe2metros."]}),"\n",(0,r.jsx)(o.p,{children:'Ter uma f\xf3rmula como se fosse um objeto permite que seja passada como um par\xe2metro (atributo calculado) para comandos ou m\xe9todos, ou para ser executado a partir de v\xe1rios componentes, sem precisar declar\xe1-los como "partilhados por componentes e database host". Quando chamado, o objeto f\xf3rmula \xe9 avaliado sem o contexto do banco de dados ou componente que o criou.'}),"\n",(0,r.jsx)(o.p,{children:"A f\xf3rmula retornada pode ser chamada com:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["os m\xe9todos ",(0,r.jsx)(o.a,{href:"/docs/pt/API/FunctionClass#call",children:(0,r.jsx)(o.code,{children:".call()"})})," ou ",(0,r.jsx)(o.a,{href:"/docs/pt/API/FunctionClass#apply",children:(0,r.jsx)(o.code,{children:".apply()"})}),","]}),"\n",(0,r.jsxs)(o.li,{children:["a sintaxe de nota\xe7\xe3o de objeto (consulte ",(0,r.jsx)(o.a,{href:"../commands/formula.md-object",children:"objeto formula"}),")."]}),"\n"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:' var $f : 4D. Function\n $f:=Formula(1+2)\n $o:=New object("myFormula";$f)\n\n  //tr\xeas formas diferentes de chamar a f\xf3rmula\n $f.call($o) //retorna 3\n $f.apply($o) //retorna 3\n $o.myFormula() //retorna 3\n'})}),"\n",(0,r.jsxs)(o.p,{children:["Voc\xea pode passar ",(0,r.jsx)(o.a,{href:"/docs/pt/API/FunctionClass#passing-parameters",children:"par\xe2metros"})," para ",(0,r.jsx)(o.code,{children:"Formula"}),", como visto abaixo no ",(0,r.jsx)(o.a,{href:"#exemplo-4",children:"exemplo 4"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:["Voc\xea pode especificar o objeto no qual a f\xf3rmula \xe9 executada, como visto em ",(0,r.jsx)(o.a,{href:"#exemplo-5",children:"exemplo 5"}),". As propriedades do objeto podem ser acessadas via o comando ",(0,r.jsx)(o.code,{children:"This"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:["If ",(0,r.jsx)(o.em,{children:"formulaExp"})," uses local variables, their values are copied and stored in the returned formula object when it is created. Quando executados, a f\xf3rmula usa esses valores copiados ao inv\xe9s do valor atual da vari\xe1vel local. Note que usar arrays como vari\xe1veis locais n\xe3o s\xe3o compat\xedveis."]}),"\n",(0,r.jsxs)(o.p,{children:["The object created by ",(0,r.jsx)(o.code,{children:"Formula"})," can be saved, for example, in a database field or in a blob document."]}),"\n",(0,r.jsx)(o.h2,{id:"exemplo-1",children:"Exemplo 1"}),"\n",(0,r.jsx)(o.p,{children:"Uma f\xf3rmula simples:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:' var $f : 4D. Function\n $f:=Formula(1+2)\n\n var $o : Object\n $o:=New object("f";$f)\n\n $result:=$o.f() // devolu\xe7\xf5es 3\n'})}),"\n",(0,r.jsx)(o.h2,{id:"exemplo-2",children:"Exemplo 2"}),"\n",(0,r.jsx)(o.p,{children:"Uma f\xf3rmula usando um m\xe9todo projeto com par\xe2metros:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:'\n\n $value:=10\n $o:=New object("f";Formula($value))\n $value:=20\n\n $result:=$o.f() // retorna 10\n'})}),"\n",(0,r.jsx)(o.h2,{id:"exemplo-3",children:"Exemplo 3"}),"\n",(0,r.jsx)(o.p,{children:"Uma f\xf3rmula usando vari\xe1veis locais:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:' $o:=New object("f";Formula($1+$2))\n $result:=$o.f(10;20) //retorna 30\n'})}),"\n",(0,r.jsx)(o.h2,{id:"exemplo",children:"Exemplo"}),"\n",(0,r.jsx)(o.p,{children:"Uma f\xf3rmula simples usando par\xe2metros:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:' $o:=New object("f";Formula(myMethod))\n $result:=$o.f("param1";"param2") // equivalent to $result:=myMethod("param1";"param2")\n'})}),"\n",(0,r.jsx)(o.h2,{id:"exemplo-2-1",children:"Exemplo 2"}),"\n",(0,r.jsxs)(o.p,{children:["Usando ",(0,r.jsx)(o.code,{children:"This"}),":"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:' $o:=New object("fullName";Formula(This.firstName+" "+This.lastName))\n $o.firstName:="John"\n $o.lastName:="Smith"\n $result:=$o.fullName() //retorna "John Smith"\n'})}),"\n",(0,r.jsx)(o.h2,{id:"exemplo-6",children:"Exemplo 6"}),"\n",(0,r.jsx)(o.p,{children:"Chamar uma f\xf3rmula usando nota\xe7\xe3o de objeto:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:' var $feta; $robot : Object\n var $calc : 4D. Function\n $robot:=New object("name";"Robot";"price";543;"quantity";2)\n $feta:=New object("name";"Feta";"price";12.5;"quantity";5)\n\n $calc:=Formula(This.total:=This.price*This.quantity)\n\n  //estabelece a f\xf3rmula \xe0s propriedades objeto\n $feta.calc:=$calc\n $robot.calc:=$calc\n\n  //chame a f\xf3rmula\n $feta.calc() // $feta={name:Feta,price:12.5,quantity:5,total:62.5,calc:"[object Formula]"}\n $robot.calc() // $robot={name:Robot,price:543,quantity:2,total:1086,calc:"[object Formula]"}\n'})}),"\n",(0,r.jsx)(o.h2,{id:"veja-tamb\xe9m",children:"Veja tamb\xe9m"}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.a,{href:"https://blog.4d.com/new-formula-more-power-behind-simplicity/",children:"4D Blog - Formula: More power behind simplicity"}),(0,r.jsx)(o.br,{}),"\n",(0,r.jsx)(o.a,{href:"https://blog.4d.com/new-formula-think-outside-the-box/",children:"4D Blog - Formula: Think outside the box"}),(0,r.jsx)(o.br,{}),"\n",(0,r.jsx)(o.a,{href:"https://blog.4d.com/write-your-own-methods-for-objects/",children:"4D Blog - Write your own methods for objects"}),(0,r.jsx)(o.br,{}),"\n",(0,r.jsx)(o.a,{href:"/docs/pt/commands/formula-from-string",children:"Formula from string"})]}),"\n",(0,r.jsx)(o.h2,{id:"propriedades",children:"Propriedades"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{}),(0,r.jsx)(o.th,{})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"N\xfamero de comando"}),(0,r.jsx)(o.td,{children:"1597"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Thread safe"}),(0,r.jsx)(o.td,{children:"\u2713"})]})]})]})]})}function m(e={}){let{wrapper:o}={...(0,s.a)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}},250065:function(e,o,n){n.d(o,{Z:()=>t,a:()=>l});var a=n(667294);let r={},s=a.createContext(r);function l(e){let o=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(s.Provider,{value:o},e.children)}}}]);