"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[15155],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>h});var r=t(67294);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function n(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,r,o=function(e,a){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),d=function(e){var a=r.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):n(n({},a),e)),t},p=function(e){var a=d(e.components);return r.createElement(l.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},u=r.forwardRef((function(e,a){var t=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=d(t),h=o,f=u["".concat(l,".").concat(h)]||u[h]||c[h]||i;return t?r.createElement(f,n(n({ref:a},p),{},{components:t})):r.createElement(f,n({ref:a},p))}));function h(e,a){var t=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var i=t.length,n=new Array(i);n[0]=u;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,n[1]=s;for(var d=2;d<i;d++)n[d]=t[d];return r.createElement.apply(null,n)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},42231:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>n,metadata:()=>l,toc:()=>p});t(67294);var r=t(3905);function o(){return o=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function i(e,a){if(null==e)return{};var t,r,o=function(e,a){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}const n={id:"repair",title:"P\xe1gina de repara\xe7\xe3o",sidebar_label:"P\xe1gina de repara\xe7\xe3o"},s=void 0,l={unversionedId:"MSC/repair",id:"version-18/MSC/repair",title:"P\xe1gina de repara\xe7\xe3o",description:"This page is used to repair the data file when it has been damaged. Geralmente s\xf3 se usa essas fun\xe7\xf5es sob a supervis\xe3o de times t\xe9cnicos 4D, quando anomalias forem detectadas quando abrir a aplica\xe7\xe3o ou ap\xf3s uma verifica\xe7\xe3o.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-18/MSC/repair.md",sourceDirName:"MSC",slug:"/MSC/repair",permalink:"/docs/pt/18/MSC/repair",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20MSC%2Frepair.md%20(18)&body=Please%20enter%20your%20comment%3A",tags:[],version:"18",frontMatter:{id:"repair",title:"P\xe1gina de repara\xe7\xe3o",sidebar_label:"P\xe1gina de repara\xe7\xe3o"},sidebar:"docs",previous:{title:"P\xe1gina de repara\xe7\xe3o",permalink:"/docs/pt/18/MSC/restore"},next:{title:"P\xe1gina de criptografia",permalink:"/docs/pt/18/MSC/encrypt"}},d={},p=[{value:"File overview",id:"file-overview",level:2},{value:"Data file to be repaired",id:"data-file-to-be-repaired",level:3},{value:"Original files backup folder",id:"original-files-backup-folder",level:3},{value:"Repaired files",id:"repaired-files",level:3},{value:"Standard repair",id:"standard-repair",level:2},{value:"Recover by record headers",id:"recover-by-record-headers",level:2},{value:"Manual assigning",id:"manual-assigning",level:3},{value:"Open log file",id:"open-log-file",level:2}],c={toc:p};function u(e){var{components:a}=e,n=i(e,["components"]);return(0,r.kt)("wrapper",o({},c,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This page is used to repair the data file when it has been damaged. Geralmente s\xf3 se usa essas fun\xe7\xf5es sob a supervis\xe3o de times t\xe9cnicos 4D, quando anomalias forem detectadas quando abrir a aplica\xe7\xe3o ou ap\xf3s uma ",(0,r.kt)("a",o({parentName:"p"},{href:"/docs/pt/18/MSC/verify"}),"verifica\xe7\xe3o"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Warning:")," Each repair operation involves the duplication of the original file, which increases the size of the application folder. It is important to take this into account (especially in macOS where 4D applications appear as packages) so that the size of the application does not increase excessively. Manually removing the copies of the original file inside the package can be useful to minimize the package size."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Repairing is only available in maintenance mode. Se tentar fazer essa opera\xe7\xe3o em modo padr\xe3o, um aviso informar\xe1 que o banco de dados ser\xe1 fechado e reiniciado em modo manuten\xe7\xe3o.\nWhen the database is encrypted, repairing data includes decryption and encryption steps and thus, requires the current data encryption key. If no valid encryption key has already been provided, a dialog requesting the passphrase or the encryption key is displayed (see Encrypt page).")),(0,r.kt)("h2",o({},{id:"file-overview"}),"File overview"),(0,r.kt)("h3",o({},{id:"data-file-to-be-repaired"}),"Data file to be repaired"),(0,r.kt)("p",null,"Pathname of the current data file. The ",(0,r.kt)("strong",{parentName:"p"},"[...]")," button can be used to specify another data file. When you click on this button, a standard Open document dialog is displayed so that you can designate the data file to be repaired. Pathname of the current data file. If you perform a ",(0,r.kt)("a",o({parentName:"p"},{href:"#recover-by-record-headers"}),"recover by record headers")," repair, you can select any data file. Once this dialog has been validated, the pathname of the file to be repaired is indicated in the window."),(0,r.kt)("h3",o({},{id:"original-files-backup-folder"}),"Original files backup folder"),(0,r.kt)("p",null,"By default, the original data file will be duplicated before the repair operation. By default, the original data file will be duplicated before the repair operation. The second ",(0,r.kt)("strong",{parentName:"p"},"[...]")," button can be used to specify another location for the original files to be saved before repairing begins. This option can be used more particularly when repairing voluminous files while using different disks."),(0,r.kt)("h3",o({},{id:"repaired-files"}),"Repaired files"),(0,r.kt)("p",null,"4D creates a new blank data file at the location of the original file. 4D creates a new blank data file at the location of the original file. The blank file is filled with the recovered data."),(0,r.kt)("h2",o({},{id:"standard-repair"}),"Standard repair"),(0,r.kt)("p",null,"Standard repair should be chosen when only a few records or indexes are damaged (address tables are intact). The data is compacted and repaired. This type of repair can only be performed when the data and structure file match."),(0,r.kt)("p",null,'When the repair procedure is finished, the "Repair" page of the MSC is displayed. A message indicates if the repair was successful. Se for assim, pode abrir o banco de dados imediatamente. ',(0,r.kt)("img",{src:t(63958).Z,width:"225",height:"45"})),(0,r.kt)("h2",o({},{id:"recover-by-record-headers"}),"Recover by record headers"),(0,r.kt)("p",null,"Use this low-level repair option only when the data file is severely damaged and after all other solutions (restoring from a backup, standard repair) have proven to be ineffective."),(0,r.kt)("p",null,"4D records vary in size, so it is necessary to keep the location where they are stored on disk in a specific table, named address table, in order to find them again. The program therefore accesses the address of the record via an index and the address table. If only records or indexes are damaged, the standard repair option is usually sufficient to resolve the problem. However, when the address table itself is affected, it requires a more sophisticated recovery since it will be necessary to reconstitute it. To do this, the MSC uses the marker located in the header of each record. The markers are compared to a summary of the record, including the bulk of their information, and from which it is possible to reconstruct the address table."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Se desmarcou a op\xe7\xe3o ",(0,r.kt)("strong",{parentName:"p"},"Registros eliminados definitivamente")," nas propriedades de uma tabela na estrutura do banco de dados, a repara\xe7\xe3o por marcadores de cabe\xe7alhos pode fazer que reapare\xe7am os registros eliminados anteriormente. Recovery by headers does not take integrity constraints into account. More specifically, after this operation you may get duplicated values with unique fields or NULL values with fields declared ",(0,r.kt)("strong",{parentName:"p"},"Never Null"),".")),(0,r.kt)("p",null,"When you click on ",(0,r.kt)("strong",{parentName:"p"},"Scan and repair..."),", 4D performs a complete scan of the data file. When the scan is complete, the results appear in the following window:"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(10952).Z,width:"906",height:"683"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"If all the records and all the tables have been assigned, only the main area is displayed.")),(0,r.kt)("p",null,'The "Records found in the data file" area includes two tables summarizing the information from the scan of the data file.'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The first table lists the information from the data file scan. Each row shows a group of recoverable records in the data file:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("strong",{parentName:"li"},"Order")," column indicates the recovery order for the group of records."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("strong",{parentName:"li"},"Count")," column indicates the number of the records in the table."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("strong",{parentName:"li"},"Destination table")," column indicates the names of tables that were automatically assigned to the groups of identified records. The names of tables assigned automatically appear in green. Groups that were not assigned, i.e. tables that could not be associated with any records appear in red."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("strong",{parentName:"li"},"Recover")," column lets you indicate, for each group, whether you want to recover the records. By default, this option is checked for every group with records that can be associated with a table."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The second table lists the tables of the project file."))),(0,r.kt)("h3",o({},{id:"manual-assigning"}),"Manual assigning"),(0,r.kt)("p",null,'If several groups of records could not be assigned to tables due to a damaged address table, you can assign them manually. To do this, first select an unassigned group of records in the first table. The "Content of the records" area then displays a preview of the contents of the first records of the group to make it easier to assign them:'),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(53811).Z,width:"903",height:"682"})),(0,r.kt)("p",null,'Next select the table you want to assign to the group in the "Unassigned tables" table and click on the ',(0,r.kt)("strong",{parentName:"p"},"Identify table")," button. You can also assign a table using drag and drop. The group of records is then associated with the table and it will be recovered in this table. The names of tables that are assigned manually appear in black. Use the ",(0,r.kt)("strong",{parentName:"p"},"Ignore records")," button to remove the association made manually between the table and the group of records."),(0,r.kt)("h2",o({},{id:"open-log-file"}),"Open log file"),(0,r.kt)("p",null,"Depois que a repara\xe7\xe3o terminar, 4D gera um arquivo de hist\xf3rico na pasta Logs do banco de dados. This file allows you to view all the operations carried out. \xc9 criado no formato XML e chamado: ",(0,r.kt)("em",{parentName:"p"},"DatabaseName**_Repair_Log_yyyy-mm-dd hh-mm-ss.xml"),'" onde:'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"NomBase"),' \xe9 o nome do arquivo de estrutura sem extens\xe3o, por exemplo "Faturas",'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"yyyy-mm-dd hh-mm-ss"),' is the timestamp of the file, based upon the local system time when the maintenance operation was started, for example "2019-02-11 15-20-45".')),(0,r.kt)("p",null,"When you click on the ",(0,r.kt)("strong",{parentName:"p"},"Open log file")," button, 4D displays the most recent log file in the default browser of the machine."))}u.isMDXComponent=!0},63958:(e,a,t)=>{t.d(a,{Z:()=>r});const r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAAAtCAIAAADX+5viAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAASdEVYdFNvZnR3YXJlAEdyZWVuc2hvdF5VCAUAAAPcSURBVHhe7ZdBaxNBFMf7qXISD/Ugiih48KAIEYXeRDz3HlD8JLlJta0IIhZpEBLtxZNCL4k2mkZqhXpydt7M7JuZt5vdJGYH/f8ouvvmzZv3Jj9CuzYFIG3gKEgdOApSB46C1IGjIHXgKEgdOApSB46C1IGjIHXgKEgdOApSB46C1GnY0U5rLaTV6fd1uN01STVZbLdHt21b0k/qfwplD+Us2ETFUxpn3j5rXU8S36PUcT7qX3VUX2uV2l5XcFQEjprXmpTv1rdaw9EwE44ug1rXszRHD4bH5qk+1HHoaKuV/csXKE5EHyBfVGTzR/kkqEFlFBf0qqlMJw23p6QfWgpGEPJZR/wTo1PabW+7QjwxDlLV+AIJnk+nFlQIGyhKU49VagYn+xOXsBxHH/fH554Otz99N+81odbtIN47Peph9H3QWCxqoE8lz/Pnd1cpripYgsM7xCXkmfqJluN+5BEstoh0rEYv8O3FJ0rBaLt3OoXycytVcNkZejWLuIfqNXWQPc5mCY4+6o8v73y52zu98Hw0n6bhLbipFP51eLAR+cx8t727DKof3k6U4PDq+G3M7EcewcU1KuLegqOFLaqUeGJJUJ9Ou736Qai4QtiAe9Zkqy6tQk3WlFdyJos6SoLeH5w9/PB7492v+TQNBvQmsLcQ5viI81Mw22KLBJligsO7R5dgH8r7EUeQj6No/q7hCbaUeKLcBtXUpwsJfqikgglShpUsC7pV91ChJmvKldQLs1jIUS4o/dx4Pb26O/pW81fTcCQ+QXALbq5uh98Aq+Dy8hhb5bXlBAfLZG1U68fbbLZ0i49zRS06QJG8kniiGKTtOhadFYVKKngN5NvyJ9d4hZosJV8O9onM72gs6O23J5e2Rx9Htf94ChuldxqQf3xmNCKci27Vke22IfrjwW6wUZUhJxh4F3kb7sFlGPzd4gjRcTag8LezhQzTRMGJcZC261206FWPQ0UVHGwQRX5dOpI9VKkpVRXai5AdfXM4ufly9Pmo0LYlCgpSxMmXAIKje4eT9WfD66+Or+3Kmqq/4iHoP07KjqpvUCXovd6pMu/W3o9YU3yD/hck6+jBcHJ+a3Rn/6fzL9AUgoLVE36PbvaOrrw4esAsNJqOIShoBuH3UVHT9a0hBAWNIDiqiDXd6J1AUNAIsqOKzX2t6XsjJf+BoGCVFDqqEDWFoGDFlDmqCDSFoGD1zHBUYTQdnEFQ0AizHVUoTS/ufIWgoBEqOap4MhhDUNAIVR0FoCngKEgdOApSB46C1IGjIHXgKEgdOApSB46C1IGjIHXgKEgdOArSZjr9Az4Tm0/7xRlRAAAAAElFTkSuQmCC"},10952:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/mscrepair2-70f7dc0be1529255122f9c117f88d8a0.png"},53811:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/mscrepair3-fca9ba66ac4c95138c0a5560adae3d30.png"}}]);