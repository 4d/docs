"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["43006"],{878041:function(e,o,r){r.r(o),r.d(o,{frontMatter:()=>d,default:()=>m,toc:()=>t,metadata:()=>s,assets:()=>i,contentTitle:()=>c});var s=JSON.parse('{"id":"commands-legacy/call-worker","title":"CALL WORKER","description":"CALL WORKER ( processo ; m\xe9todo {; param}{; param2 ; ... ; paramN} )","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R10/commands-legacy/call-worker.md","sourceDirName":"commands-legacy","slug":"/commands/call-worker","permalink":"/docs/pt/commands/call-worker","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fcall-worker.md%20(20-R10)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R10","frontMatter":{"id":"call-worker","title":"CALL WORKER","slug":"/commands/call-worker","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"Processo (Comunica\xe7\xf5es)","permalink":"/docs/pt/commands/theme/Process-Communications"},"next":{"title":"CLEAR SEMAPHORE","permalink":"/docs/pt/commands/clear-semaphore"}}'),a=r(785893),n=r(250065);let d={id:"call-worker",title:"CALL WORKER",slug:"/commands/call-worker",displayed_sidebar:"docs"},c=void 0,i={},t=[{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:2},{value:"Exemplo",id:"exemplo",level:2},{value:"Ver tamb\xe9m",id:"ver-tamb\xe9m",level:2},{value:"Propriedades",id:"propriedades",level:2}];function l(e){let o={a:"a",br:"br",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"CALL WORKER"})," ( ",(0,a.jsx)(o.em,{children:"processo"})," ; ",(0,a.jsx)(o.em,{children:"m\xe9todo"})," {; ",(0,a.jsx)(o.em,{children:"param"}),"}{; ",(0,a.jsx)(o.em,{children:"param2"})," ; ... ; ",(0,a.jsx)(o.em,{children:"paramN"}),"} )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(o.table,{children:[(0,a.jsx)(o.thead,{children:(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.th,{children:"Par\xe2metro"}),(0,a.jsx)(o.th,{children:"Tipo"}),(0,a.jsx)(o.th,{}),(0,a.jsx)(o.th,{children:"Descri\xe7\xe3o"})]})}),(0,a.jsxs)(o.tbody,{children:[(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"processo"}),(0,a.jsx)(o.td,{children:"Text, Integer"}),(0,a.jsx)(o.td,{children:"\u2192"}),(0,a.jsx)(o.td,{children:"Nome ou n\xfamero de processo do worker"})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"m\xe9todo"}),(0,a.jsx)(o.td,{children:"Object, Text"}),(0,a.jsx)(o.td,{children:"\u2192"}),(0,a.jsx)(o.td,{children:"Nome do m\xe9todo de projeto a chamar"})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"param"}),(0,a.jsx)(o.td,{children:"Expression"}),(0,a.jsx)(o.td,{children:"\u2192"}),(0,a.jsx)(o.td,{children:"Par\xe2metros passados ao m\xe9todo"})]})]})]}),"\n",(0,a.jsx)(o.h2,{id:"descri\xe7\xe3o",children:"Descri\xe7\xe3o"}),"\n",(0,a.jsxs)(o.p,{children:["O comando ",(0,a.jsx)(o.strong,{children:"CALL WORKER"})," cria ou chama o processo worker cujo nome ou ID se passa em ",(0,a.jsx)(o.em,{children:"processo"})," e pede a execu\xe7\xe3o do ",(0,a.jsx)(o.em,{children:"metodo"})," em seu contexto com o par\xe2metro opcional ",(0,a.jsx)(o.em,{children:"param"}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["O comando ",(0,a.jsx)(o.strong,{children:"CALL WORKER"})," encapsula os par\xe2metros ",(0,a.jsx)(o.em,{children:"param"})," em uma mensagem e o envia no quadro de mensagem de worker. Para obter mais informa\xe7\xe3o sobre os processos worker, consulte ",(0,a.jsx)(o.em,{children:"Sobre Workers"}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["No par\xe2metro ",(0,a.jsx)(o.em,{children:"processo"}),", pode especificar o worker utilizando seu nome ou seu n\xfamero de processo:"]}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:["Se passar o n\xfamero de um processo que n\xe3o existir, ou se o processo especificado n\xe3o foi criado por ",(0,a.jsx)(o.strong,{children:"CALL WORKER"})," nem por 4D (tal como o processo principal da aplica\xe7\xe3o), ",(0,a.jsx)(o.strong,{children:"CALL WORKER"})," n\xe3o faz nada."]}),"\n",(0,a.jsx)(o.li,{children:"Se passar o nome de um processo que n\xe3oo existe, um novo processo worker \xe9 criado."}),"\n"]}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Nota:"})," o ",(0,a.jsx)(o.strong,{children:"processo principal"}),", criado por 4D quando se abre um banco de dados para a interface de usu\xe1rio e o modo de aplica\xe7\xe3o, \xe9 um processo trabalhador e pode ser chamado por ",(0,a.jsx)(o.strong,{children:"CALL WORKER"}),".Entretanto, j\xe1 que seu nome pode variar em fun\xe7\xe3o da linguagem de 4D, \xe9 prefer\xedvel designar este processo utilizando seu n\xfamero (sempre 1) quando for utilizado ",(0,a.jsx)(o.strong,{children:"CALL WORKER"}),". ["]}),"\n",(0,a.jsxs)(o.p,{children:["O processo worker aparece na lista de processos de Explorador de execu\xe7\xe3o e \xe9 devolvido pelo comando ",(0,a.jsx)(o.a,{href:"/docs/pt/commands/process-info",children:"Process info"})," quando se aplicar a este processo."]}),"\n",(0,a.jsx)(o.p,{children:"Em formula, designe o c\xf3digo 4D que se executar\xe1 no contexto do processo pai de janela. Pode passar:"}),"\n",(0,a.jsx)(o.p,{children:"um objeto f\xf3rmula (ver Objetos F\xf3rmula). Os objetos f\xf3rmula podem encapsular qualquer express\xe3o execut\xe1vel, incluindo fun\xe7\xf5es e m\xe9todos projeto;"}),"\n",(0,a.jsx)(o.p,{children:"uma string que contenha o nome do m\xe9todo projeto. Pode se passar uma string vazia, neste caso, o worker executa o metodo que usou originalmente para iniciar seu processo, se houver ( ou seja, o m\xe9todo de inicio do worker)."}),"\n",(0,a.jsxs)(o.p,{children:["Em ",(0,a.jsx)(o.em,{children:"metodo"}),", se passa o nome de m\xe9todo de projeto a executar no contexto do processo worker. Pode passar uma string vazia; neste caso, o trabalhador executa o m\xe9todo que se utilizou originalmente para come\xe7ar seu processo, se houver (ou seja, o m\xe9todo de inicio do worker)."]}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Nota:"})," n\xe3o \xe9 poss\xedvel passar uma string vazia no m\xe9todo quando o comando chamar ao processo principal (processo n\xfamero 1), j\xe1 que n\xe3o foi iniciado utilizando um m\xe9todo projeto. ",(0,a.jsxs)(o.em,{children:[(0,a.jsx)(o.em,{children:"CALL WORKER"}),' (1;"")']})," n\xe3o faz nada."]}),"\n",(0,a.jsxs)(o.p,{children:["Tamb\xe9m pode passar par\xe2metros ao ",(0,a.jsx)(o.em,{children:"metodo"})," utilizando um ou mais par\xe2metros opcionaiss ",(0,a.jsx)(o.em,{children:"param"}),". Passe os par\xe2metros da mesma maneira que os passaria a uma subrotina (ver ). Ao iniciar a execu\xe7\xe3o no contexto do processo, o m\xe9todo de processo recebe os valores de par\xe2metro em ",(0,a.jsx)(o.em,{children:"$1"}),", ",(0,a.jsx)(o.em,{children:"$2"}),", e assim sucessivamente. Lembre que os arrays n\xe3o podem ser passados \u200B\u200Bcomo par\xe2metros a um m\xe9todo. Al\xe9m disso, no contexto do comando ",(0,a.jsx)(o.strong,{children:"CALL WORKER"}),", as seguintes considera\xe7\xf5es adicionais devem ser levadas em considera\xe7\xe3o:"]}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"Se permite ponteiros a tabelas ou campos."}),"\n",(0,a.jsx)(o.li,{children:"Os ponteiros as vari\xe1veis, particularmente as vari\xe1veis locais e de processo, n\xe3o s\xe3o recomendadas j\xe1 que estas vari\xe1veis podem estar indefinidas no momento de seu acesso pelo m\xe9todo de processo."}),"\n",(0,a.jsxs)(o.li,{children:["Se passar um par\xe2metro de tipo Objeto ou uma Cole\xe7\xe3o ",(0,a.jsx)(o.strong,{children:"por c\xf3pia"}),", ou seja, 4D cria uma copia do objeto ou da cole\xe7\xe3o no processo de destino se o worker for encontrado em um processo diferente do que chama ao comando ",(0,a.jsx)(o.strong,{children:"CALL WORKER"}),". Neste contexto, se passar um par\xe2metro objeto ou cole\xe7\xe3o ",(0,a.jsx)(o.strong,{children:"por refer\xeancia"}),", deve usar um objeto ou cole\xe7\xe3o partilhados (ver ",(0,a.jsx)(o.em,{children:"Objetos compartidos e Cole\xe7\xf5es compartidas"}),")."]}),"\n"]}),"\n",(0,a.jsxs)(o.p,{children:["Um processo worker se mant\xe9m vivo at\xe9 que a aplica\xe7\xe3o esteja fechada ou o comando ",(0,a.jsx)(o.a,{href:"/docs/pt/commands/kill-worker",children:"KILL WORKER"})," se chame explicitamente. Para liberar mem\xf3ria, n\xe3o esque\xe7a de chamar a este comando quando um processo worker j\xe1 n\xe3o for necess\xe1rio."]}),"\n",(0,a.jsx)(o.h2,{id:"exemplo",children:"Exemplo"}),"\n",(0,a.jsx)(o.p,{children:"Em um formul\xe1rio, um bot\xe3o inicia um c\xe1lculo, por exemplo as estat\xedsticas relativas ao ano selecionado. O bot\xe2o cria ou chama a um processo de trabalho que vai calcular os dados enquanto o usu\xe1rio pode continuar trabalhando no formul\xe1rio."}),"\n",(0,a.jsx)(o.p,{children:"O m\xe9todo do bot\xe3o \xe9:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:'\xa0\xa0//chamar ao trabalhador myWorker com o par\xe2metro\n\xa0var $vYear: Integer\n\xa0vYear:=2015\xa0// poderia ter sido selecionado pelo usu\xe1rio no formul\xe1rio\n\xa0CALL WORKER("myWorker";"workerMethod";vYear;Current form window)\n'})}),"\n",(0,a.jsxs)(o.p,{children:["O c\xf3digo de ",(0,a.jsx)(o.em,{children:"workerMethod \xe9"}),":"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:'\xa0\xa0// este \xe9 o m\xe9todo do trabalhador\n\xa0\xa0// pode ser apropriativo ou cooperativo\n\xa0#DECLARE($vYearInteger;$windowInteger)\xa0//referencia da janela e ano\n\xa0var $vStatResults : Object\xa0//para armazenar os resultados das estat\xedsticas \n\n... //calcular estat\xedsticas\n\xa0\xa0//quando tiver terminado, volta a chamar o formul\xe1rio com os valores calculados\n\xa0\xa0//vStatResults poderia mostrar os resultados no formul\xe1rio\n\xa0CALL FORM($2;"displayStats";vStatResults)\n\n\n'})}),"\n",(0,a.jsx)(o.h2,{id:"ver-tamb\xe9m",children:"Ver tamb\xe9m"}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.a,{href:"/docs/pt/commands/call-form",children:"CALL FORM"}),(0,a.jsx)(o.br,{}),"\n",(0,a.jsx)(o.a,{href:"/docs/pt/commands/current-process-name",children:"Current process name"}),(0,a.jsx)(o.br,{}),"\n",(0,a.jsx)(o.a,{href:"/docs/pt/commands/kill-worker",children:"KILL WORKER"}),(0,a.jsx)(o.br,{}),"\n",(0,a.jsx)(o.em,{children:"Sobre Workers"})]}),"\n",(0,a.jsx)(o.h2,{id:"propriedades",children:"Propriedades"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(o.table,{children:[(0,a.jsx)(o.thead,{children:(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.th,{}),(0,a.jsx)(o.th,{})]})}),(0,a.jsxs)(o.tbody,{children:[(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"N\xfamero do comando"}),(0,a.jsx)(o.td,{children:"1389"})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"Thread-seguro"}),(0,a.jsx)(o.td,{children:"\u2713"})]})]})]})]})}function m(e={}){let{wrapper:o}={...(0,n.a)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},250065:function(e,o,r){r.d(o,{Z:()=>c,a:()=>d});var s=r(667294);let a={},n=s.createContext(a);function d(e){let o=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),s.createElement(n.Provider,{value:o},e.children)}}}]);