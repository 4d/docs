"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["63126"],{307083:function(e,n,s){s.r(n),s.d(n,{default:()=>h,frontMatter:()=>t,metadata:()=>r,assets:()=>a,toc:()=>l,contentTitle:()=>d});var r=JSON.parse('{"id":"API/SignalClass","title":"Signal","description":"Sinais s\xe3o ferramentas fornecidas pela linguagem 4D para gerenciar intera\xe7\xf5es e evitar conflitos entre processos em uma aplica\xe7\xe3o multiprocesso. Sinais permitem assegurar que um ou mais processos v\xe3o esperar por uma tarefa espec\xedfica a ser completada antes de continuar a execu\xe7\xe3o. Qualquer processo pode esperar ou liberar um sinal.","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R7/API/SignalClass.md","sourceDirName":"API","slug":"/API/SignalClass","permalink":"/docs/pt/API/SignalClass","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FSignalClass.md%20(20-R7)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R7","frontMatter":{"id":"SignalClass","title":"Signal"},"sidebar":"docs","previous":{"title":"Session","permalink":"/docs/pt/API/SessionClass"},"next":{"title":"SMTPTransporter","permalink":"/docs/pt/API/SMTPTransporterClass"}}'),i=s("785893"),o=s("250065");let t={id:"SignalClass",title:"Signal"},d=void 0,a={},l=[{value:"Objeto sinal",id:"objeto-sinal",level:3},{value:"Trabalhar com sinais",id:"trabalhar-com-sinais",level:3},{value:"Exemplo",id:"exemplo",level:3},{value:"Resumo",id:"resumo",level:3},{value:".description",id:"description",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:4},{value:".signaled",id:"signaled",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-1",level:4},{value:".trigger()",id:"trigger",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-2",level:4},{value:".wait()",id:"wait",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-3",level:4}];function c(e){let n={a:"a",blockquote:"blockquote",br:"br",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Sinais s\xe3o ferramentas fornecidas pela linguagem 4D para gerenciar intera\xe7\xf5es e evitar conflitos entre processos em uma aplica\xe7\xe3o multiprocesso. Sinais permitem assegurar que um ou mais processos v\xe3o esperar por uma tarefa espec\xedfica a ser completada antes de continuar a execu\xe7\xe3o. Qualquer processo pode esperar ou liberar um sinal."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Os sem\xe1foros podem ser usados para gerenciar intera\xe7\xf5es. Semaphores allow you to make sure that two or more processes do not modify the same resource (file, record...) ao mesmo tempo. S\xf3 o processo que estabelece o sem\xe1foro pode remov\xea-lo."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"objeto-sinal",children:"Objeto sinal"}),"\n",(0,i.jsx)(n.p,{children:"Um sinal \xe9 um objeto partilhado que deve ser passado como par\xe2metro a comandos que chamam ou criam trabalhadores ou processo."}),"\n",(0,i.jsxs)(n.p,{children:["Um objeto ",(0,i.jsx)(n.code,{children:"4D.Signal"})," cont\xe9m os seguintes m\xe9todos e propriedades integrados:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#wait",children:(0,i.jsx)(n.code,{children:".wait()"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#trigger",children:(0,i.jsx)(n.code,{children:".trigger()"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#signaled",children:(0,i.jsx)(n.code,{children:".signaled"})})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#description",children:(0,i.jsx)(n.code,{children:".description"})}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Any worker/process calling the ",(0,i.jsx)(n.code,{children:".wait()"})," method will suspend its execution until the ",(0,i.jsx)(n.code,{children:".signaled"})," property is true. Enquanto espera um sinal, o processo que chamar n\xe3o usa nenhuma CPU. Isso pode ser muito interessante para o rendimento nas aplica\xe7\xf5es multiprocesso. The ",(0,i.jsx)(n.code,{children:".signaled"})," property becomes true when any worker/process calls the ",(0,i.jsx)(n.code,{children:".trigger()"})," method."]}),"\n",(0,i.jsxs)(n.p,{children:["Note that to avoid blocking situations, the ",(0,i.jsx)(n.code,{children:".wait()"})," can also return after a defined timeout has been reached."]}),"\n",(0,i.jsxs)(n.p,{children:["Os objetos Signal s\xe3o criados com o comando ",(0,i.jsx)(n.a,{href:"/docs/pt/commands/new-signal",children:(0,i.jsx)(n.code,{children:"New signal"})}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"trabalhar-com-sinais",children:"Trabalhar com sinais"}),"\n",(0,i.jsxs)(n.p,{children:["Em 4D, voc\xea cria um objeto signal chamando o comando ",(0,i.jsx)(n.a,{href:"/docs/pt/commands/new-signal",children:(0,i.jsx)(n.code,{children:"New signal"})}),". Once created, this signal must be passed as a parameter to the ",(0,i.jsx)(n.code,{children:"New process"})," or ",(0,i.jsx)(n.code,{children:"CALL WORKER"})," commands so that they can modify it when they have finished the task you want to wait for."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"signal.wait()"})," must be called from the worker/process that needs another worker/process to finish a task in order to continue."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"signal.trigger()"})," must be called from the worker/process that finished its execution in order to release all others."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(951779).Z+"",width:"813",height:"324"})}),"\n",(0,i.jsxs)(n.p,{children:["Once a signal has been released using a ",(0,i.jsx)(n.code,{children:"signal.trigger()"})," call, it cannot be reused again. If you want to set another signal, you need to call the ",(0,i.jsx)(n.code,{children:"New signal"})," command again."]}),"\n",(0,i.jsxs)(n.p,{children:["Since a signal object is a ",(0,i.jsx)(n.a,{href:"/docs/pt/Concepts/shared",children:"shared object"}),", you can use it to return results from called workers/processes, provided that you do not forget to write values within a ",(0,i.jsx)(n.code,{children:"Use...End use"})," structure (see example)."]}),"\n",(0,i.jsx)(n.h3,{id:"exemplo",children:"Exemplo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:' var $signal : 4D.Signal\n\n// Cria\xe7\xe3o de um sinal\n $signal:=New signal\n\n// chamar o processo principal e executar o m\xe9todo OpenForm\n CALL WORKER(1;"OpenForm";$signal)\n// fazer outro c\xe1lculo\n...\n// Esperando pelo fim do processo\n $signaled:=$signal.wait()\n\n// Processamento dos resultados\n $calc:=$signal.result+...\n'})}),"\n",(0,i.jsxs)(n.p,{children:["M\xe9todo ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"OpenForm"})})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:' #DECLARE ($signal : 4D.Signal)  \n var $form : Object\n $form:=New object("value";0)\n\n  // Open the form\n $win:=Open form window("Information";Movable form dialog box)\n DIALOG("Information";$form)\n CLOSE WINDOW($win)\n\n  // Add a new attribute to your $signal shared object to pass your result to the other process:\n Use($signal)\n    $signal.result:=$form.value\n End use\n\n  // Trigger the signal to the waiting process\n $signal.trigger()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"resumo",children:"Resumo"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{})})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#description",children:[(0,i.jsx)(n.strong,{children:".description"})," : Text"]}),(0,i.jsx)(n.br,{}),"contains a custom description for the ",(0,i.jsx)(n.code,{children:"Signal"})," object."]})}),(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#signaled",children:[(0,i.jsx)(n.strong,{children:".signaled"})," : Boolean"]}),(0,i.jsx)(n.br,{}),"contains the current state of the ",(0,i.jsx)(n.code,{children:"Signal"})," object"]})}),(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.a,{href:"#trigger",children:(0,i.jsx)(n.strong,{children:".trigger( )"})}),(0,i.jsx)(n.br,{}),"sets the ",(0,i.jsx)(n.code,{children:"signaled"})," property of the signal object to ",(0,i.jsx)(n.strong,{children:"true"})]})}),(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#wait",children:[(0,i.jsx)(n.strong,{children:".wait"}),"( { ",(0,i.jsx)(n.em,{children:"timeout"})," : Real } ) : Boolean "]}),(0,i.jsx)(n.br,{}),"makes the current process wait until the ",(0,i.jsx)(n.code,{children:".signaled"})," property of the signal object to become ",(0,i.jsx)(n.strong,{children:"true"})," or the optional ",(0,i.jsx)(n.em,{children:"timeout"})," to expire"]})})]})]}),"\n",(0,i.jsx)(n.h2,{id:"description",children:".description"}),"\n",(0,i.jsxs)(n.details,{children:[(0,i.jsx)(n.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Release"}),(0,i.jsx)(n.th,{children:"Mudan\xe7as"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"17 R4"}),(0,i.jsx)(n.td,{children:"Adicionado"})]})})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:".description"})," : Text"]}),"\n",(0,i.jsx)(n.h4,{id:"descri\xe7\xe3o",children:"Descri\xe7\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:".description"})," property contains a custom description for the ",(0,i.jsx)(n.code,{children:"Signal"})," object.."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:".description"})," pode ser definida ao criar o objeto signal ou a qualquer momento. Note that since the ",(0,i.jsx)(n.code,{children:"Signal"})," object is a shared object, any write-mode access to the ",(0,i.jsx)(n.code,{children:".description"})," property must be surrounded by a ",(0,i.jsx)(n.code,{children:"Use...End use"})," structure."]}),"\n",(0,i.jsxs)(n.p,{children:["Essa propriedade \xe9 ",(0,i.jsx)(n.strong,{children:"leitura-escrita"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"signaled",children:".signaled"}),"\n",(0,i.jsxs)(n.details,{children:[(0,i.jsx)(n.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Release"}),(0,i.jsx)(n.th,{children:"Mudan\xe7as"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"17 R4"}),(0,i.jsx)(n.td,{children:"Adicionado"})]})})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:".signaled"})," : Boolean"]}),"\n",(0,i.jsx)(n.h4,{id:"descri\xe7\xe3o-1",children:"Descri\xe7\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:".signaled"})," property contains the current state of the ",(0,i.jsx)(n.code,{children:"Signal"})," object. Quando o sinal \xe9 criado, ",(0,i.jsx)(n.code,{children:".signaled"})," \xe9 ",(0,i.jsx)(n.strong,{children:"False"}),". Torna-se ",(0,i.jsx)(n.strong,{children:"True"})," quando o ",(0,i.jsx)(n.code,{children:".trigger( )"})," \xe9 chamado no objeto."]}),"\n",(0,i.jsxs)(n.p,{children:["Essa propriedade \xe9 ",(0,i.jsx)(n.strong,{children:"somente leitura"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"trigger",children:".trigger()"}),"\n",(0,i.jsxs)(n.details,{children:[(0,i.jsx)(n.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Release"}),(0,i.jsx)(n.th,{children:"Mudan\xe7as"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"17 R4"}),(0,i.jsx)(n.td,{children:"Adicionado"})]})})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:".trigger( )"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe2metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{style:{textAlign:"center"}}),(0,i.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"}}),(0,i.jsx)(n.td,{children:"N\xe3o exige nenhum par\xe2metro"})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"descri\xe7\xe3o-2",children:"Descri\xe7\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:".trigger( )"})," function sets the ",(0,i.jsx)(n.code,{children:"signaled"})," property of the signal object to ",(0,i.jsx)(n.strong,{children:"true"})," and awakens all workers or processes waiting for this signal."]}),"\n",(0,i.jsxs)(n.p,{children:["Se o sinal j\xe1 estiver no estado de sinaliza\xe7\xe3o (ou seja, a propriedade ",(0,i.jsx)(n.code,{children:"signaled"})," j\xe1 for ",(0,i.jsx)(n.strong,{children:"true"}),"), a fun\xe7\xe3o n\xe3o faz nada."]}),"\n",(0,i.jsx)(n.h2,{id:"wait",children:".wait()"}),"\n",(0,i.jsxs)(n.details,{children:[(0,i.jsx)(n.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Release"}),(0,i.jsx)(n.th,{children:"Mudan\xe7as"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"17 R4"}),(0,i.jsx)(n.td,{children:"Adicionado"})]})})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:".wait"}),"( { ",(0,i.jsx)(n.em,{children:"timeout"})," : Real } ) : Boolean"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe2metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"timeout"}),(0,i.jsx)(n.td,{children:"Real"}),(0,i.jsx)(n.td,{children:"->"}),(0,i.jsx)(n.td,{children:"Tempo m\xe1ximo de espera do sinal em segundos"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Resultados"}),(0,i.jsx)(n.td,{children:"Par\xe2metros"}),(0,i.jsx)(n.td,{children:"<-"}),(0,i.jsxs)(n.td,{children:["Estado da propriedade ",(0,i.jsx)(n.code,{children:".signaled"})]})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"descri\xe7\xe3o-3",children:"Descri\xe7\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:".wait( )"})," function makes the current process wait until the ",(0,i.jsx)(n.code,{children:".signaled"})," property of the signal object to become ",(0,i.jsx)(n.strong,{children:"true"})," or the optional ",(0,i.jsx)(n.em,{children:"timeout"})," to expire."]}),"\n",(0,i.jsxs)(n.p,{children:["To prevent blocking code, you can pass a maximum waiting time in seconds in the ",(0,i.jsx)(n.em,{children:"timeout"})," parameter (decimals are accepted)."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Aviso"}),": a chamada a ",(0,i.jsx)(n.code,{children:".wait( )"})," sem um ",(0,i.jsx)(n.em,{children:"timeout"})," no processo principal de 4D n\xe3o \xe9 recomend\xe1vel porque poderia congelar toda a aplica\xe7\xe3o 4D."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Se o sinal j\xe1 estiver no estado de sinaliza\xe7\xe3o (ou seja, a propriedade ",(0,i.jsx)(n.code,{children:".signaled"})," j\xe1 \xe9 ",(0,i.jsx)(n.strong,{children:"true"}),"), a fun\xe7\xe3o devolve imediatamente, sem esperar."]}),"\n",(0,i.jsxs)(n.p,{children:["A fun\xe7\xe3o retorna o valor da propriedade ",(0,i.jsx)(n.code,{children:".signaled"}),". Evaluating this value allows knowing if the function returned because the ",(0,i.jsx)(n.code,{children:".trigger( )"})," has been called (",(0,i.jsx)(n.code,{children:".signaled"})," is ",(0,i.jsx)(n.strong,{children:"true"}),") or if the ",(0,i.jsx)(n.em,{children:"timeout"})," expired (",(0,i.jsx)(n.code,{children:".signaled"})," is ",(0,i.jsx)(n.strong,{children:"false"}),")."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["O estado de um processo que espera um signal \xe9 ",(0,i.jsx)(n.code,{children:"Waiting for internal flag"}),"."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},951779:function(e,n,s){s.d(n,{Z:function(){return r}});let r=s.p+"assets/images/signal-f8f54304f438eaf43a007e7cd1be6f66.png"},250065:function(e,n,s){s.d(n,{Z:function(){return d},a:function(){return t}});var r=s(667294);let i={},o=r.createContext(i);function t(e){let n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);