"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[80842],{603905:(e,a,o)=>{o.d(a,{Zo:()=>p,kt:()=>u});var t=o(667294);function n(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function r(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,t)}return o}function i(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?r(Object(o),!0).forEach((function(a){n(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function d(e,a){if(null==e)return{};var o,t,n=function(e,a){if(null==e)return{};var o,t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(n[o]=e[o]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=t.createContext({}),s=function(e){var a=t.useContext(l),o=a;return e&&(o="function"==typeof e?e(a):i(i({},a),e)),o},p=function(e){var a=s(e.components);return t.createElement(l.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},c=t.forwardRef((function(e,a){var o=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),c=s(o),u=n,x=c["".concat(l,".").concat(u)]||c[u]||m[u]||r;return o?t.createElement(x,i(i({ref:a},p),{},{components:o})):t.createElement(x,i({ref:a},p))}));function u(e,a){var o=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=c;var d={};for(var l in a)hasOwnProperty.call(a,l)&&(d[l]=a[l]);d.originalType=e,d.mdxType="string"==typeof e?e:n,i[1]=d;for(var s=2;s<r;s++)i[s]=o[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,o)}c.displayName="MDXCreateElement"},626611:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>s,contentTitle:()=>d,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});o(667294);var t=o(603905);function n(){return n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},n.apply(this,arguments)}function r(e,a){if(null==e)return{};var o,t,n=function(e,a){if(null==e)return{};var o,t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(n[o]=e[o]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}const i={id:"transformation-tags",title:"Etiquetas de transforma\xe7\xe3o"},d=void 0,l={unversionedId:"Tags/transformation-tags",id:"version-20-R4/Tags/transformation-tags",title:"Etiquetas de transforma\xe7\xe3o",description:'4D oferece um conjunto de etiquetas de transforma\xe7\xe3o que lhe permite inserir refer\xeancias a vari\xe1veis ou express\xf5es 4D, ou realizar diferentes tipos de processamento dentro de um texto de origem, referido como um "modelo". Essas tags s\xe3o interpretadas quando o texto de origem \xe9 executado e geram um texto de sa\xedda.',source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R4/Tags/transformation-tags.md",sourceDirName:"Tags",slug:"/Tags/transformation-tags",permalink:"/docs/pt/20-R4/Tags/transformation-tags",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20Tags%2Ftransformation-tags.md%20(20-R4)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R4",frontMatter:{id:"transformation-tags",title:"Etiquetas de transforma\xe7\xe3o"},sidebar:"docs",previous:{title:"Processos preemptivos",permalink:"/docs/pt/20-R4/Develop/preemptive-processes"},next:{title:"Prefer\xeancias",permalink:"/docs/pt/20-R4/Preferences/overview"}},s={},p=[{value:"Princ\xedpios de utiliza\xe7\xe3o das etiquetas",id:"princ\xedpios-de-utiliza\xe7\xe3o-das-etiquetas",level:2},{value:"Parsing",id:"parsing",level:3},{value:"Processamento recursivo",id:"processamento-recursivo",level:3},{value:"Identificadores com tokens",id:"identificadores-com-tokens",level:3},{value:"Utilizar o &quot;.&quot; como separador decimal",id:"utilizar-o--como-separador-decimal",level:3},{value:"4DBASE",id:"4dbase",level:2},{value:"Sintaxe: <code>&lt;!--#4DBASE folderPath--&gt;</code>",id:"sintaxe---4dbase-folderpath--",level:4},{value:"4DCODE",id:"4dcode",level:2},{value:"Sintaxe: <code>&lt;!--#4DCODE codeLines--&gt;</code>",id:"sintaxe---4dcode-codelines--",level:4},{value:"4DEACH e 4DENDEACH",id:"4deach-e-4dendeach",level:2},{value:"Sintaxe: <code>&lt;!--#4DEACH variable in expression--&gt;</code> <code>&lt;!--#4DENDEACH--&gt;</code>",id:"sintaxe---4deach-variable-in-expression-----4dendeach--",level:4},{value:"<code>&lt;!--#4DEACH item in collection--&gt;</code>",id:"--4deach-item-in-collection--",level:3},{value:"Exemplo com uma cole\xe7\xe3o de valores escalares",id:"exemplo-com-uma-cole\xe7\xe3o-de-valores-escalares",level:4},{value:"Exemplo com uma cole\xe7\xe3o de objetos",id:"exemplo-com-uma-cole\xe7\xe3o-de-objetos",level:4},{value:"<code>&lt;!--#4DEACH entity in entitySelection--&gt;</code>",id:"--4deach-entity-in-entityselection--",level:3},{value:"Exemplo com uma tabela html",id:"exemplo-com-uma-tabela-html",level:4},{value:"Exemplo com <code>PROCESS 4D TAGS</code>",id:"exemplo-com-process-4d-tags",level:4},{value:"<code>&lt;!--#4DEACH property in object--&gt;</code>",id:"--4deach-property-in-object--",level:3},{value:"Exemplo com as propriedades de um objeto",id:"exemplo-com-as-propriedades-de-um-objeto",level:4},{value:"4DEVAL",id:"4deval",level:2},{value:"Sintaxe: <code>&lt;!--#4DEVAL expression--&gt;</code>",id:"sintaxe---4deval-expression--",level:4},{value:"Sintaxe alternativa: <code>$4DEVAL(express\xe3o)</code>",id:"sintaxe-alternativa-4devalexpress\xe3o",level:4},{value:"4DHTML",id:"4dhtml",level:2},{value:"Sintaxe: <code>&lt;!--#4DHTML expression--&gt;</code>",id:"sintaxe---4dhtml-expression--",level:4},{value:"Sintaxe alternativa: <code>$4DHTML(expression)</code>",id:"sintaxe-alternativa-4dhtmlexpression",level:4},{value:"4DIF, 4DELSE, 4DELSEIF e 4DENDIF",id:"4dif-4delse-4delseif-e-4dendif",level:2},{value:"Sintaxe: <code>&lt;!--#4DIF expression--&gt;</code> {<code>&lt;!--#4DELSEIF expression2--&gt;...&lt;!--#4DELSEIF expressionN--&gt;</code>} {<code>&lt;!--#4DELSE--&gt;</code>} <code>&lt;!--#4DENDIF--&gt;</code>",id:"sintaxe---4dif-expression-----4delseif-expression2----4delseif-expressionn-----4delse-----4dendif--",level:4},{value:"4DINCLUDE",id:"4dinclude",level:2},{value:"Sintaxe: <code>&lt;!--#4DINCLUDE path--&gt;</code>",id:"sintaxe---4dinclude-path--",level:4},{value:"4DLOOP e 4DENDLOOP",id:"4dloop-e-4dendloop",level:2},{value:"Sintaxe: <code>&lt;!--#4DLOOP condition--&gt;</code> <code>&lt;!--#4DENDLOOP--&gt;</code>",id:"sintaxe---4dloop-condition-----4dendloop--",level:4},{value:"<code>&lt;!--#4DLOOP [table]--&gt;</code>",id:"--4dloop-table--",level:3},{value:"<code>&lt;!--#4DLOOP array--&gt;</code>",id:"--4dloop-array--",level:3},{value:"<code>&lt;!--#4DLOOP method--&gt;</code>",id:"--4dloop-method--",level:3},{value:"<code>&lt;!--#4DLOOP expression--&gt;</code>",id:"--4dloop-expression--",level:3},{value:"<code>&lt;!--#4DLOOP pointerArray--&gt;</code>",id:"--4dloop-pointerarray--",level:3},{value:"4DSCRIPT/",id:"4dscript",level:2},{value:"Sintaxe: <code>&lt;!--#4DSCRIPT/MethodName/MyParam--&gt;</code>",id:"sintaxe---4dscriptmethodnamemyparam--",level:4},{value:"4DTEXT",id:"4dtext",level:2},{value:"Sintaxe: <code>&lt;!--#4DTEXT expression--&gt;</code>",id:"sintaxe---4dtext-expression--",level:4},{value:"Sintaxe alternativa: <code>$4DTEXT(expression)</code>",id:"sintaxe-alternativa-4dtextexpression",level:4},{value:"Sintaxe alternativa para 4DTEXT, 4DHTML, 4DEVAL",id:"sintaxe-alternativa-para-4dtext-4dhtml-4deval",level:2},{value:"$4dtag (expression)",id:"4dtag-expression",level:4},{value:"<code>&lt;!--#4dtag expression--&gt;</code>",id:"--4dtag-expression--",level:4}],m={toc:p};function c(e){var{components:a}=e,o=r(e,["components"]);return(0,t.kt)("wrapper",n({},m,o,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("p",null,'4D oferece um conjunto de etiquetas de transforma\xe7\xe3o que lhe permite inserir refer\xeancias a vari\xe1veis ou express\xf5es 4D, ou realizar diferentes tipos de processamento dentro de um texto de origem, referido como um "modelo". Essas tags s\xe3o interpretadas quando o texto de origem \xe9 executado e geram um texto de sa\xedda.'),(0,t.kt)("p",null,"Esse princ\xedpio \xe9 usado em particular pelo servidor da Web 4D para criar ","[p\xe1ginas de modelo da Web]"," (WebServer/templates.md)."),(0,t.kt)("p",null,"Em geral, essas tags devem ser inseridas como coment\xe1rios do tipo HTML (",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#Tag Contents--\x3e"),"), mas uma sintaxe alternativa compat\xedvel com xml (#alternative-syntax-for-4dtext-4dhtml-4deval) est\xe1 dispon\xedvel para algumas delas."),(0,t.kt)("p",null,"\xc9 poss\xedvel misturar v\xe1rios tipos de etiquetas. Por exemplo, a seguinte estrutura HTML \xe9 inteiramente vi\xe1vel:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"<HTML>\n<BODY>\n\x3c!--#4DSCRIPT/PRE_PROCESS--\x3e   (Method call)\n\x3c!--#4DIF (myvar=1)--\x3e   (If condition)\n   \x3c!--#4DINCLUDE banner1.html--\x3e   (Subpage insertion)\n\x3c!--#4DENDIF--\x3e   (End if)\n\x3c!--#4DIF (mtvar=2)--\x3e\n   \x3c!--#4DINCLUDE banner2.html--\x3e\n\x3c!--#4DENDIF--\x3e\n\n\x3c!--#4DLOOP [TABLE]--\x3e   (Loop on the current selection)\n\x3c!--#4DIF ([TABLE]ValNum>10)--\x3e   (If [TABLE]ValNum>10)\n   \x3c!--#4DINCLUDE subpage.html--\x3e   (Subpage insertion)\n\x3c!--#4DELSE--\x3e   (Else)\n   <B>Value: \x3c!--#4DTEXT [TABLE]ValNum--\x3e</B><br/>   (Field display)\n\x3c!--#4DENDIF--\x3e\n\x3c!--#4DENDLOOP--\x3e   ](End for)\n</BODY>\n</HTML>\n")),(0,t.kt)("h2",n({},{id:"princ\xedpios-de-utiliza\xe7\xe3o-das-etiquetas"}),"Princ\xedpios de utiliza\xe7\xe3o das etiquetas"),(0,t.kt)("h3",n({},{id:"parsing"}),"Parsing"),(0,t.kt)("p",null,"A an\xe1lise do conte\xfado de uma fonte ",(0,t.kt)("em",{parentName:"p"},"template")," \xe9 feita em dois contextos:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Usando o comando ",(0,t.kt)("inlineCode",{parentName:"p"},"PROCESS 4D TAGS"),"; esse comando aceita um ",(0,t.kt)("em",{parentName:"p"},"template")," como entrada, bem como par\xe2metros opcionais, e retorna um texto resultante do processamento.")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},"Usando o servidor HTTP integrado do 4D: ","[p\xe1ginas de modelo]"," (WebServer/templates.md) enviadas por meio dos comandos ",(0,t.kt)("inlineCode",{parentName:"p"},"WEB SEND FILE")," (.htm, .html, .shtm, .shtml), ",(0,t.kt)("inlineCode",{parentName:"p"},"WEB SEND BLOB")," (texto/html tipo BLOB), ",(0,t.kt)("inlineCode",{parentName:"p"},"WEB SEND TEXT"),' ou chamadas usando URLs. Nesse \xfaltimo caso, por motivos de otimiza\xe7\xe3o, as p\xe1ginas sufixadas com ".htm" e ".html" N\xc3O s\xe3o analisadas. Para analisar p\xe1ginas HTML nesse caso, voc\xea deve adicionar o sufixo ".shtm" ou ".shtml" (por exemplo, ',(0,t.kt)("a",n({parentName:"p"},{href:"http://www.server.com/dir/page.shtm"}),"http://www.server.com/dir/page.shtm"),")."))),(0,t.kt)("h3",n({},{id:"processamento-recursivo"}),"Processamento recursivo"),(0,t.kt)("p",null,"As etiquetas 4D s\xe3o interpretadas de forma recursiva: 4D sempre tenta reinterpretar o resultado de uma transforma\xe7\xe3o e, se uma nova transforma\xe7\xe3o tiver ocorrido, uma interpreta\xe7\xe3o adicional \xe9 realizada, e assim por diante, at\xe9 que o produto obtido n\xe3o precise mais de nenhuma transforma\xe7\xe3o adicional. Por exemplo, dada a seguinte instru\xe7\xe3o:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DHTML [Mail]Letter_type--\x3e\n")),(0,t.kt)("p",null,"Se o pr\xf3prio campo de texto ",(0,t.kt)("inlineCode",{parentName:"p"},"[Mail]Letter_type")," contiver uma tag, por exemplo, ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DSCRIPT/m_Gender--\x3e"),", essa tag ser\xe1 avaliada recursivamente ap\xf3s a interpreta\xe7\xe3o da tag 4DHTML."),(0,t.kt)("p",null,"Esse princ\xedpio poderoso atende \xe0 maioria das necessidades relacionadas \xe0 transforma\xe7\xe3o de texto. Observe, entretanto, que em alguns casos isso tamb\xe9m pode permitir a inser\xe7\xe3o de c\xf3digo malicioso no contexto da Web, ","[o que pode ser evitado]"," (WebServer/templates.md#prevention-of-malicious-code-insertion)."),(0,t.kt)("h3",n({},{id:"identificadores-com-tokens"}),"Identificadores com tokens"),(0,t.kt)("p",null,"Para garantir a avalia\xe7\xe3o correta das express\xf5es processadas por meio de tags, independentemente do idioma ou da vers\xe3o 4D, \xe9 recomend\xe1vel usar a sintaxe tokenizada para elementos cujo nome possa variar de acordo com as vers\xf5es (comandos, tabelas, campos, constantes). Por exemplo, para inserir o comando ",(0,t.kt)("inlineCode",{parentName:"p"},"Current time")," (tempo atual), digite ",(0,t.kt)("inlineCode",{parentName:"p"},"Current time:C178"),"."),(0,t.kt)("h3",n({},{id:"utilizar-o--como-separador-decimal"}),'Utilizar o "." como separador decimal'),(0,t.kt)("p",null,"4D sempre usa o caractere de ponto final (.) como um separador decimal ao avaliar uma express\xe3o num\xe9rica usando uma tag 4D ",(0,t.kt)("inlineCode",{parentName:"p"},"4DTEXT"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"4DHTML")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"4DEVAL"),". Os par\xe2metros regionais s\xe3o ignorados. Esse recurso facilita a manuten\xe7\xe3o do c\xf3digo e a compatibilidade entre idiomas e vers\xf5es 4D."),(0,t.kt)("h2",n({},{id:"4dbase"}),"4DBASE"),(0,t.kt)("h4",n({},{id:"sintaxe---4dbase-folderpath--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DBASE folderPath--\x3e")),(0,t.kt)("p",null,"A tag ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DBASE --\x3e")," designa o diret\xf3rio de trabalho a ser usado pela tag ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DINCLUDE--\x3e"),"."),(0,t.kt)("p",null,"Quando \xe9 chamada em uma p\xe1gina da Web, a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DBASE --\x3e")," modifica todas as chamadas ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DINCLUDE--\x3e")," subsequentes nessa p\xe1gina, at\xe9 a pr\xf3xima ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--........--\x3e"),", se houver. Se a pasta",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DBASE --\x3e")," for modificada em um arquivo inclu\xeddo, ela recuperar\xe1 seu valor original do arquivo pai."),(0,t.kt)("p",null,"O par\xe2metro ",(0,t.kt)("em",{parentName:"p"},"folderPath")," deve conter um nome de caminho relativo \xe0 p\xe1gina atual e deve terminar com uma barra (",(0,t.kt)("inlineCode",{parentName:"p"},"/"),"). A pasta designada deve estar localizada dentro da pasta Web."),(0,t.kt)("p",null,'Passe a palavra-chave "WEBFOLDER" para restaurar o caminho padr\xe3o (relativo \xe0 p\xe1gina).'),(0,t.kt)("p",null,"O c\xf3digo seguinte, que deve especificar um caminho relativo para cada chamada:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DINCLUDE subpage.html--\x3e\n\x3c!--#4DINCLUDE folder/subpage1.html--\x3e\n\x3c!--#4DINCLUDE folder/subpage2.html--\x3e\n\x3c!--#4DINCLUDE folder/subpage3.html--\x3e\n\x3c!--#4DINCLUDE ../folder/subpage.html--\x3e\n")),(0,t.kt)("p",null,"... \xe9 equivalente a:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DINCLUDE subpage.html--\x3e\n\x3c!--#4DBASE folder/--\x3e\n\x3c!--#4DINCLUDE subpage1.html--\x3e\n\x3c!--#4DINCLUDE subpage2.html--\x3e\n\x3c!--#4DINCLUDE subpage3.html--\x3e\n\x3c!--#4DBASE ../folder/--\x3e\n\x3c!--#4DINCLUDE subpage.html--\x3e\n\x3c!--#4DBASE WEBFOLDER--\x3e\n")),(0,t.kt)("p",null,"Por exemplo, para definir um direct\xf3rio para a p\xe1gina inicial:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"/* Index.html */\n\x3c!--#4DIF LangFR=True--\x3e\n    \x3c!--#4DBASE FR/--\x3e\n\x3c!--#4DELSE--\x3e\n    \x3c!--#4DBASE US/--\x3e\n\x3c!--#4DENDIF--\x3e\n\x3c!--#4DINCLUDE head.html--\x3e\n\x3c!--#4DINCLUDE body.html--\x3e\n\x3c!--#4DINCLUDE footer.html--\x3e\n")),(0,t.kt)("p",null,'No arquivo "head.html", a pasta atual \xe9 modificada por meio de ',(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DBASE --\x3e"),', sem que isso altere seu valor em "Index.html":'),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"/* Head.htm */\n/* O diret\xf3rio de trabalho aqui \xe9 relativo ao arquivo inclu\xeddo (FR/ ou US/) */\n\x3c!--#4DBASE Styles/--\x3e\n\x3c!--#4DINCLUDE main. ss--\x3e\n\x3c!--#4DINCLUDE product.css--\x3e\n\x3c!--#4DBASE Scripts/--\x3e\n\x3c!--#4DINCLUDE main.js--\x3e\n\x3c!--#4DINCLUDE product.js--\x3e\n")),(0,t.kt)("h2",n({},{id:"4dcode"}),"4DCODE"),(0,t.kt)("h4",n({},{id:"sintaxe---4dcode-codelines--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DCODE codeLines--\x3e")),(0,t.kt)("p",null,"A tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DCODE")," permite que voc\xea insira um bloco de c\xf3digo 4D de v\xe1rias linhas em um modelo."),(0,t.kt)("p",null,"Quando um ",(0,t.kt)("inlineCode",{parentName:"p"},"<! -#4DCODE")," sequencia detectada que \xe9 seguida de um espa\xe7o, um CR ou um caractere LF, 4D interpreta todas as linhas de c\xf3digo at\xe9 a pr\xf3xima sequ\xeancia ",(0,t.kt)("inlineCode",{parentName:"p"},"--\x3e"),". O bloco de c\xf3digo em si pode conter retornos, feeds de linha ou ambos; ele ser\xe1 interpretado sequencialmente por 4D."),(0,t.kt)("p",null,"Por exemplo, pode escrever num modelo:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),'\x3c!--#4DCODE\n//PARAMETERS initialization\nC_OBJECT:C1216($graphParameters)\nOB SET:C1220($graphParameters;"graphType";1)\n$graphType:=1\n//...your code here\nIf(OB Is defined:C1231($graphParameters;"graphType"))\n    $graphType:=OB GET:C1224($graphParameters;"graphType")\n    If($graphType=7)\n        $nbSeries:=1\n        If($nbValues>8)\n            DELETE FROM ARRAY:C228 ($yValuesArrPtr{1}->;9;100000)\n            $nbValues:=8\n        End if\n    End if\nEnd if\n--\x3e\n')),(0,t.kt)("p",null,"Eis as caracter\xedsticas da etiqueta 4DCODE:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"O comando ",(0,t.kt)("inlineCode",{parentName:"li"},"TRACE")," \xe9 suportado e ativa o depurador 4D, permitindo que voc\xea depure seu c\xf3digo de modelo."),(0,t.kt)("li",{parentName:"ul"},"Qualquer erro exibir\xe1 a caixa de di\xe1logo de erro padr\xe3o que permite que o usu\xe1rio interrompa a execu\xe7\xe3o do c\xf3digo ou entre no modo de depura\xe7\xe3o."),(0,t.kt)("li",{parentName:"ul"},"O texto entre ",(0,t.kt)("inlineCode",{parentName:"li"},"\x3c!--#4DCODE")," and ",(0,t.kt)("inlineCode",{parentName:"li"},"--\x3e")," \xe9 dividido em linhas que aceitam qualquer conven\xe7\xe3o de fim de linha (cr, lf ou crlf)."),(0,t.kt)("li",{parentName:"ul"},"O texto \xe9 tokenizado no contexto do banco de dados chamado ",(0,t.kt)("inlineCode",{parentName:"li"},"PROCESS 4D TAGS"),". Isto \xe9 importante para o reconhecimento dos m\xe9todos dos projectos, por exemplo. A propriedade de m\xe9todo ",(0,t.kt)("a",n({parentName:"li"},{href:"/docs/pt/20-R4/WebServer/allowProject"}),"Dispon\xedvel atrav\xe9s de tags e URLs 4D (4DACTION ...)")," n\xe3o \xe9 tida em conta."),(0,t.kt)("li",{parentName:"ul"},"Mesmo que o texto sempre use o ingl\xeas americano, \xe9 recomend\xe1vel usar a sintaxe de token (:Cxxx) para nomes de comandos e constantes para se proteger contra poss\xedveis problemas devido ao fato de comandos ou constantes serem renomeados de uma vers\xe3o do 4D para outra.")),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"O fato de que as tags 4DCODE podem chamar qualquer um dos comandos do idioma 4D ou m\xe9todos do projeto pode ser visto como um problema de seguran\xe7a. especialmente quando o banco de dados est\xe1 dispon\xedvel por HTTP. No entanto, como ele executa o c\xf3digo do servidor chamado a partir dos seus pr\xf3prios arquivos de template, a tag em si n\xe3o representa um problema de seguran\xe7a. Neste contexto, como em qualquer servidor Web, a seguran\xe7a \xe9 manipulada principalmente ao n\xedvel de acessos remotos para arquivos de servidor.")),(0,t.kt)("h2",n({},{id:"4deach-e-4dendeach"}),"4DEACH e 4DENDEACH"),(0,t.kt)("h4",n({},{id:"sintaxe---4deach-variable-in-expression-----4dendeach--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DEACH variable in expression--\x3e")," ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DENDEACH--\x3e")),(0,t.kt)("p",null,"O coment\xe1rio ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DEACH--\x3e")," permite iterar um item especificado sobre todos os valores da ",(0,t.kt)("em",{parentName:"p"},"express\xe3o"),". O item \xe9 definido como uma ",(0,t.kt)("em",{parentName:"p"},"vari\xe1vel")," cujo tipo depende do tipo da ",(0,t.kt)("em",{parentName:"p"},"express\xe3o"),"."),(0,t.kt)("p",null,"O coment\xe1rio ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DEACH--\x3e")," pode iterar por tr\xeas tipos de express\xe3o:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",n({parentName:"li"},{href:"#--4deach-item-in-collection--"}),"collections"),": percorre cada elemento da cole\xe7\xe3o,"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",n({parentName:"li"},{href:"#--4deach-entity-in-entityselection--"}),"sele\xe7\xf5es de entidades"),": loop atrav\xe9s de cada entidade,"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",n({parentName:"li"},{href:"#--4deach-property-in-object--"}),"objects"),": loop atrav\xe9s de cada propriedade de objeto.")),(0,t.kt)("p",null,"O n\xfamero de itera\xe7\xf5es \xe9 avaliado na inicializa\xe7\xe3o e n\xe3o ser\xe1 alterado durante o processamento. Adicionar ou remover itens durante o loop n\xe3o \xe9 recomendado porque resulta em itera\xe7\xf5es faltantes ou redundantes."),(0,t.kt)("h3",n({},{id:"--4deach-item-in-collection--"}),(0,t.kt)("inlineCode",{parentName:"h3"},"\x3c!--#4DEACH item in collection--\x3e")),(0,t.kt)("p",null,"Essa sintaxe itera em cada ",(0,t.kt)("em",{parentName:"p"},"item")," da ",(0,t.kt)("em",{parentName:"p"},"cole\xe7\xe3o"),". A parte do c\xf3digo localizada entre ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DEACH --\x3e")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDEACH--\x3e")," \xe9 repetida para cada elemento da cole\xe7\xe3o."),(0,t.kt)("p",null,"O par\xe2metro ",(0,t.kt)("em",{parentName:"p"},"item")," \xe9 uma vari\xe1vel do mesmo tipo que os elementos da cole\xe7\xe3o."),(0,t.kt)("p",null,"A cole\xe7\xe3o deve conter apenas ",(0,t.kt)("strong",{parentName:"p"},"elementos do mesmo tipo"),", caso contr\xe1rio, um erro ser\xe1 retornado assim que a vari\xe1vel ",(0,t.kt)("em",{parentName:"p"},"item")," receber o primeiro tipo de valor incompat\xedvel."),(0,t.kt)("p",null,"O n\xfamero de loops \xe9 baseado no n\xfamero de elementos da cole\xe7\xe3o. A cada itera\xe7\xe3o, a vari\xe1vel ",(0,t.kt)("em",{parentName:"p"},"item")," \xe9 automaticamente preenchida com o elemento correspondente da cole\xe7\xe3o. Os pontos abaixo devem ser considerados:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Se a vari\xe1vel ",(0,t.kt)("em",{parentName:"li"},"item")," for do tipo objeto ou do tipo cole\xe7\xe3o (ou seja, se ",(0,t.kt)("em",{parentName:"li"},"express\xe3o")," for uma cole\xe7\xe3o de objetos ou de cole\xe7\xf5es), a modifica\xe7\xe3o dessa vari\xe1vel modificar\xe1 automaticamente o elemento correspondente da cole\xe7\xe3o (porque objetos e cole\xe7\xf5es compartilham as mesmas refer\xeancias). Se a vari\xe1vel for de tipo escalar, s\xf3 se modificar\xe1 a vari\xe1vel."),(0,t.kt)("li",{parentName:"ul"},"A vari\xe1vel ",(0,t.kt)("em",{parentName:"li"},"item")," recebe o mesmo tipo que o primeiro elemento da cole\xe7\xe3o. Se algum elemento da cole\xe7\xe3o n\xe3o for do mesmo tipo que a vari\xe1vel, ser\xe1 gerado um erro e o loop ser\xe1 interrompido."),(0,t.kt)("li",{parentName:"ul"},"Se a cole\xe7\xe3o contiver elementos com um valor Null, ser\xe1 gerado um erro se o tipo de vari\xe1vel ",(0,t.kt)("em",{parentName:"li"},"item")," n\xe3o for compat\xedvel com valores Null (como vari\xe1veis longint).")),(0,t.kt)("h4",n({},{id:"exemplo-com-uma-cole\xe7\xe3o-de-valores-escalares"}),"Exemplo com uma cole\xe7\xe3o de valores escalares"),(0,t.kt)("p",null,(0,t.kt)("em",{parentName:"p"},"getNames"),' retorna uma cole\xe7\xe3o de strings. O m\xe9todo foi declarado como "',(0,t.kt)("a",n({parentName:"p"},{href:"/docs/pt/20-R4/WebServer/allowProject"}),"dispon\xedvel atrav\xe9s de tags 4D e URLs"),'".'),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),' <table class="table">    \n\n        <tr><th>Name</th></tr>\n\n          \x3c!--#4DEACH $name in getNames--\x3e\n        <tr>\n            <td>\x3c!--#4DTEXT $name--\x3e</td>\n        </tr>\n          \x3c!--#4DENDEACH--\x3e\n    </table>\n')),(0,t.kt)("h4",n({},{id:"exemplo-com-uma-cole\xe7\xe3o-de-objetos"}),"Exemplo com uma cole\xe7\xe3o de objetos"),(0,t.kt)("p",null,"O ",(0,t.kt)("em",{parentName:"p"},"getSalesPersons")," retorna uma cole\xe7\xe3o de objetos."),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),'    <table class="table">    \n         \x3c!--#4DCODE\n            $salePersons:=getSalesPersons\n          --\x3e          \n       <tr><th>ID</th><th>Firstname</th><th>Lastname</th></tr>\n\n          \x3c!--#4DEACH $salesPerson in $salePersons--\x3e\n        <tr>\n            <td>\x3c!--#4DTEXT $salesPerson.ID--\x3e</td>\n            <td>\x3c!--#4DTEXT $salesPerson.firstname--\x3e</td>\n            <td>\x3c!--#4DTEXT $salesPerson.lastname--\x3e</td>\n        </tr>\n          \x3c!--#4DENDEACH--\x3e\n    </table>\n')),(0,t.kt)("h3",n({},{id:"--4deach-entity-in-entityselection--"}),(0,t.kt)("inlineCode",{parentName:"h3"},"\x3c!--#4DEACH entity in entitySelection--\x3e")),(0,t.kt)("p",null,"Essa sintaxe itera em cada ",(0,t.kt)("em",{parentName:"p"},"entity")," da ",(0,t.kt)("em",{parentName:"p"},"entitySelection"),". A parte do c\xf3digo localizada entre ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DEACH --\x3e")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDEACH--\x3e")," \xe9 repetida para cada entidade da sele\xe7\xe3o de entidades."),(0,t.kt)("p",null,"O par\xe2metro ",(0,t.kt)("em",{parentName:"p"},"entidade")," \xe9 uma vari\xe1vel de objeto da classe de sele\xe7\xe3o da entidade."),(0,t.kt)("p",null,"O n\xfamero de loops \xe9 baseado no n\xfamero de entidades da sele\xe7\xe3o de entidades. Em cada itera\xe7\xe3o, a vari\xe1vel de objeto ",(0,t.kt)("em",{parentName:"p"},"entidade")," \xe9 automaticamente preenchida com a entidade correspondente \xe0 sele\xe7\xe3o da entidade."),(0,t.kt)("h4",n({},{id:"exemplo-com-uma-tabela-html"}),"Exemplo com uma tabela html"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),'    <table class="table">     \n\n        <tr><th>ID</th><th>Name</th><th>Total purchase</th></tr>\n\n          \x3c!--#4DEACH $customer in ds.Customers.all()--\x3e\n        <tr>\n            <td>\x3c!--#4DTEXT $customer.ID--\x3e</td>\n            <td>\x3c!--#4DTEXT $customer.name--\x3e</td>\n            <td><center>\x3c!--#4DTEXT String($customer.totalPurchase;"$###,##0")--\x3e</center></td>\n        </tr>\n          \x3c!--#4DENDEACH--\x3e\n    </table>\n')),(0,t.kt)("h4",n({},{id:"exemplo-com-process-4d-tags"}),"Exemplo com ",(0,t.kt)("inlineCode",{parentName:"h4"},"PROCESS 4D TAGS")),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"}),'var customers : cs.CustomersSelection\nvar $input; $output : Text\n\ncustomers:=ds.Customers.all()\n$input:="\x3c!--#4DEACH $cust in customers--\x3e"\n$input:=$input+"\x3c!--#4DTEXT $cust.name --\x3e"+Char(Carriage return)\n$input:=$input+"\x3c!--#4DENDEACH--\x3e"\nPROCESS 4D TAGS($input; $output)\nTEXT TO DOCUMENT("customers.txt"; $output)\n')),(0,t.kt)("h3",n({},{id:"--4deach-property-in-object--"}),(0,t.kt)("inlineCode",{parentName:"h3"},"\x3c!--#4DEACH property in object--\x3e")),(0,t.kt)("p",null,"Essa sintaxe itera em cada ",(0,t.kt)("em",{parentName:"p"},"propriedade")," do ",(0,t.kt)("em",{parentName:"p"},"objeto"),". A parte do c\xf3digo localizada entre ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DEACH --\x3e")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDEACH--\x3e")," \xe9 repetida para cada propriedade do objeto."),(0,t.kt)("p",null,"O par\xe2metro ",(0,t.kt)("em",{parentName:"p"},"propriedade")," \xe9 uma vari\xe1vel de texto automaticamente preenchida com o nome da propriedade processada atualmente."),(0,t.kt)("p",null,"As propriedades do objeto s\xe3o processadas de acordo com sua ordem de cria\xe7\xe3o. Durante o loop, propriedades podem ser adicionadas ou eliminadas no objeto, sem modificar o n\xfamero de loops que permanecer\xe3o no n\xfamero original de propriedades do objeto."),(0,t.kt)("h4",n({},{id:"exemplo-com-as-propriedades-de-um-objeto"}),"Exemplo com as propriedades de um objeto"),(0,t.kt)("p",null,(0,t.kt)("em",{parentName:"p"},"getGamers"),' \xe9 um m\xe9todo de projeto que retorna um objeto como ("Mary"; 10; "Ann"; 20; "John"; 40) para calcular as pontua\xe7\xf5es dos jogadores.'),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),'    <table class="table">    \n          \x3c!--#4DCODE\n           $gamers:=getGamers\n          --\x3e          \n\n        <tr><th>Gamers</th><th>Scores</th></tr>\n\n          \x3c!--#4DEACH $key in $gamers--\x3e\n        <tr>\n            <td >\x3c!--#4DTEXT $key--\x3e</td>\n            <td >\x3c!--#4DTEXT $gamers[$key]--\x3e</td>\n        </tr>\n          \x3c!--#4DENDEACH--\x3e\n    </table>\n')),(0,t.kt)("h2",n({},{id:"4deval"}),"4DEVAL"),(0,t.kt)("h4",n({},{id:"sintaxe---4deval-expression--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DEVAL expression--\x3e")),(0,t.kt)("h4",n({},{id:"sintaxe-alternativa-4devalexpress\xe3o"}),"Sintaxe alternativa: ",(0,t.kt)("inlineCode",{parentName:"h4"},"$4DEVAL(express\xe3o)")),(0,t.kt)("p",null,"A tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DEVAL")," permite que voc\xea avalie uma vari\xe1vel ou express\xe3o 4D. Como a tag ",(0,t.kt)("a",n({parentName:"p"},{href:"#4dhtml"}),(0,t.kt)("inlineCode",{parentName:"a"},"4DHTML")),", ",(0,t.kt)("inlineCode",{parentName:"p"},"4DEVAL")," n\xe3o escapa dos caracteres HTML ao retornar o texto. No entanto, ao contr\xe1rio do ",(0,t.kt)("inlineCode",{parentName:"p"},"4DHTML")," ou ","[",(0,t.kt)("inlineCode",{parentName:"p"},"4DTEXT"),"]"," (#4dtext), o ",(0,t.kt)("inlineCode",{parentName:"p"},"4DEVAL")," permite que voc\xea execute qualquer instru\xe7\xe3o 4D v\xe1lida, incluindo atribui\xe7\xf5es e express\xf5es que n\xe3o retornam nenhum valor."),(0,t.kt)("p",null,"Por exemplo, \xe9 poss\xedvel executar:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{}),' $input:="\x3c!--#4DEVAL a:=42--\x3e" //atribui\xe7\xe3o\n $input:=$input+"\x3c!--#4DEVAL a+1--\x3e" //c\xe1lculo\n PROCESS 4D TAGS($input;$output)\n  //$output = "43"\n')),(0,t.kt)("p",null,"No caso de um erro durante a interpreta\xe7\xe3o, o texto inserido ter\xe1 o formato: ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DEVAL expr--\x3e: ## error # error code"),"."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Por raz\xf5es de seguran\xe7a, \xe9 recomend\xe1vel usar a tag ",(0,t.kt)("a",n({parentName:"p"},{href:"#4dtext"}),(0,t.kt)("inlineCode",{parentName:"a"},"4DTEXT"))," ao processar dados introduzidos de fora do aplicativo, a fim de evitar a ",(0,t.kt)("a",n({parentName:"p"},{href:"#prevention-of-malicious-code-insertion"}),"inser\xe7\xe3o de c\xf3digo malicioso"),".")),(0,t.kt)("h2",n({},{id:"4dhtml"}),"4DHTML"),(0,t.kt)("h4",n({},{id:"sintaxe---4dhtml-expression--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DHTML expression--\x3e")),(0,t.kt)("h4",n({},{id:"sintaxe-alternativa-4dhtmlexpression"}),"Sintaxe alternativa: ",(0,t.kt)("inlineCode",{parentName:"h4"},"$4DHTML(expression)")),(0,t.kt)("p",null,"Assim como a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DTEXT"),", esta tag permite avaliar uma vari\xe1vel 4D ou express\xe3o que retorne um valor, e insira como uma express\xe3o HTML. Ao contr\xe1rio da tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DTEXT"),', essa tag n\xe3o escapa dos caracteres especiais do HTML (por exemplo, ">").'),(0,t.kt)("p",null,"Por exemplo, aqui est\xe3o os resultados do processamento da vari\xe1vel de texto 4D myvar com as tags dispon\xedveis:"),(0,t.kt)("table",null,(0,t.kt)("thead",{parentName:"table"},(0,t.kt)("tr",{parentName:"thead"},(0,t.kt)("th",n({parentName:"tr"},{align:null}),"Valor myvar"),(0,t.kt)("th",n({parentName:"tr"},{align:null}),"Etiquetas"),(0,t.kt)("th",n({parentName:"tr"},{align:null}),"Resultados"))),(0,t.kt)("tbody",{parentName:"table"},(0,t.kt)("tr",{parentName:"tbody"},(0,t.kt)("td",n({parentName:"tr"},{align:null}),(0,t.kt)("inlineCode",{parentName:"td"},'myvar:="<B>"')),(0,t.kt)("td",n({parentName:"tr"},{align:null}),(0,t.kt)("inlineCode",{parentName:"td"},"\x3c!--#4DTEXT myvar--\x3e")),(0,t.kt)("td",n({parentName:"tr"},{align:null}),(0,t.kt)("inlineCode",{parentName:"td"},"&amp;lt;B&amp;gt;"))),(0,t.kt)("tr",{parentName:"tbody"},(0,t.kt)("td",n({parentName:"tr"},{align:null}),(0,t.kt)("inlineCode",{parentName:"td"},'myvar:="<B>"')),(0,t.kt)("td",n({parentName:"tr"},{align:null}),(0,t.kt)("inlineCode",{parentName:"td"},"\x3c!--#4DHTML myvar--\x3e")),(0,t.kt)("td",n({parentName:"tr"},{align:null}),(0,t.kt)("inlineCode",{parentName:"td"},"<B>"))))),(0,t.kt)("p",null,"No caso de um erro de interpreta\xe7\xe3o, o texto inserido ser\xe1 ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DHTML myvar--\x3e: ## error # error code"),"."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Por motivos de seguran\xe7a, recomenda-se usar a tag ","[",(0,t.kt)("inlineCode",{parentName:"p"},"4DTEXT"),"]"," (#4dtext) ao processar dados introduzidos de fora do aplicativo, para evitar a ","[inser\xe7\xe3o de c\xf3digo malicioso]"," (#prevention-of-malicious-code-insertion).")),(0,t.kt)("h2",n({},{id:"4dif-4delse-4delseif-e-4dendif"}),"4DIF, 4DELSE, 4DELSEIF e 4DENDIF"),(0,t.kt)("h4",n({},{id:"sintaxe---4dif-expression-----4delseif-expression2----4delseif-expressionn-----4delse-----4dendif--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DIF expression--\x3e")," {",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DELSEIF expression2--\x3e...\x3c!--#4DELSEIF expressionN--\x3e"),"} {",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DELSE--\x3e"),"} ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DENDIF--\x3e")),(0,t.kt)("p",null,"Usado com os coment\xe1rios ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DELSEIF--\x3e")," (opcional), ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DELSE--\x3e")," (opcional) e ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDIF--\x3e"),", o coment\xe1rio ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DIF express\xe3o--\x3e")," oferece a possibilidade de executar partes do c\xf3digo condicionalmente."),(0,t.kt)("p",null,"O par\xe2metro ",(0,t.kt)("em",{parentName:"p"},"express\xe3o")," pode conter qualquer express\xe3o 4D v\xe1lida que retorne um valor booleano. Deve ser indicado entre par\xeanteses e estar em conformidade com as regras da sintaxe 4D."),(0,t.kt)("p",null,"A express\xe3o ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DIF --\x3e")," ... ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDIF--\x3e")," blocos podem ser aninhados em v\xe1rios n\xedveis. Como em 4D, cada express\xe3o ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DIF --\x3e")," deve corresponder a um ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDIF--\x3e"),"."),(0,t.kt)("p",null,'Em caso de erro de interpreta\xe7\xe3o, o texto "',(0,t.kt)("inlineCode",{parentName:"p"},"<! -#4DIF express\xe3o--\x3e"),": Uma express\xe3o booleana foi esperada ao inv\xe9s do conte\xfado localizado entre ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DIF --\x3e")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDIF--\x3e"),". Da mesma forma, se n\xe3o houver tantos ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDIF--\x3e")," como ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DIF --\x3e"),', o texto "',(0,t.kt)("inlineCode",{parentName:"p"},"<! -#4DIF express\xe3o--\x3e"),': 4DENDIF esperado" foi inserido em vez do conte\xfado localizado entre ',(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DIF --\x3e")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDIF--\x3e"),"."),(0,t.kt)("p",null,"Usando a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DELSEIF--\x3e"),", voc\xea pode testar um n\xfamero ilimitado de condi\xe7\xf5es. Somente o c\xf3digo que segue a primeira condi\xe7\xe3o avaliada como ",(0,t.kt)("inlineCode",{parentName:"p"},"True")," \xe9 executado. Se n\xe3o houver condi\xe7\xf5es verdadeiras, nenhuma declara\xe7\xe3o \xe9 executada (se n\xe3o houver nenhuma declara\xe7\xe3o final ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DELSE--\x3e"),").\nVoc\xea pode usar uma tag ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DELSE--\x3e")," ap\xf3s a \xfaltima ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DELSEIF--\x3e"),". Se todas as condi\xe7\xf5es forem falsas, as instru\xe7\xf5es seguintes ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DELSE--\x3e")," ser\xe3o executadas."),(0,t.kt)("p",null,"Os dois c\xf3digos seguintes s\xe3o equivalentes."),(0,t.kt)("p",null,"C\xf3digo usando somente ",(0,t.kt)("inlineCode",{parentName:"p"},"4DELSE"),":"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DIF Condition1--\x3e\n  /* Condition1 \xe9 true*/\n\x3c!--#4DELSE--\x3e\n    <! -#4DIF Condition2--\x3e\n        /* Condition2 \xe9 true*/\n    <! -#4DELSE--\x3e\n        <! -#4DIF Condition3--\x3e\n            /* Condi\xe7\xe3o 3 \xe9 verdadeira */\n        <! -#4DELSE--\x3e\n            /*Nenhuma das condi\xe7\xf5es s\xe3o verdadeiras*/\n        <! -#4DENDIF--\x3e\n    \x3c!--#4DENDIF--\x3e\n\x3c!--#4DENDIF--\x3e\n")),(0,t.kt)("p",null,"C\xf3digo semelhante usando a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DELSEIF"),":"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{}),"\x3c!--#4DIF Condition1--\x3e\n     /* Condi\xe7\xe3o1 \xe9 verdadeira*/\n\x3c!--#4DELSEIF Condition2--\x3e\n     /* Condi\xe7\xe3o2 \xe9 verdadeira*/\n\x3c!--#4DELSEIF Condition3--\x3e\n    /* Condi\xe7\xe3o3 \xe9 verdadeira */\n\x3c!--#4DELSE--\x3e\n    /* Nenhuma das condi\xe7\xf5es \xe9 verdadeira*/\n\x3c!--#4DENDIF--\x3e\n")),(0,t.kt)("p",null,"Este exemplo de c\xf3digo inserido em uma p\xe1gina HTML est\xe1tica exibe um r\xf3tulo diferente de acordo com o resultado de express\xe3o ",(0,t.kt)("inlineCode",{parentName:"p"},'vname#""'),":"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),'<BODY>\n...\n\x3c!--#4DIF (vname#"")--\x3e\nNames starting with \x3c!--#4DTEXT vname--\x3e.\n\x3c!--#4DELSE--\x3e\nNo name has been found.\n\x3c!--#4DENDIF--\x3e\n...\n</BODY>\n')),(0,t.kt)("p",null,"Este exemplo insere p\xe1ginas diferentes dependendo de qual usu\xe1rio est\xe1 conectado:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),'\x3c!--#4DIF LoggedIn=False--\x3e\n    \x3c!--#4DINCLUDE Login.htm --\x3e\n\x3c!--#4DELSEIF User="Admin" --\x3e\n    \x3c!--#4DINCLUDE AdminPanel.htm --\x3e\n\x3c!--#4DELSEIF User="Manager" --\x3e\n    \x3c!--#4DINCLUDE SalesDashboard.htm --\x3e\n\x3c!--#4DELSE--\x3e\n    \x3c!--#4DINCLUDE ItemList.htm --\x3e\n\x3c!--#4DENDIF--\x3e\n')),(0,t.kt)("h2",n({},{id:"4dinclude"}),"4DINCLUDE"),(0,t.kt)("h4",n({},{id:"sintaxe---4dinclude-path--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DINCLUDE path--\x3e")),(0,t.kt)("p",null,"Essa tag foi projetada principalmente para incluir uma p\xe1gina HTML (indicada pelo par\xe2metro ",(0,t.kt)("em",{parentName:"p"},"path"),") em outra p\xe1gina HTML. Por padr\xe3o, somente o corpo da p\xe1gina HTML especificada, ou seja, o conte\xfado encontrado dentro das tags ",(0,t.kt)("inlineCode",{parentName:"p"},"<body>")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"</body>"),", \xe9 inclu\xeddo (as pr\xf3prias tags n\xe3o s\xe3o inclu\xeddas). Isso permite evitar conflitos relacionados a meta etiquetas presentes nos cabe\xe7alhos."),(0,t.kt)("p",null,"No entanto, se a p\xe1gina HTML especificada n\xe3o contiver tags ",(0,t.kt)("inlineCode",{parentName:"p"},"<body>``</body>"),", a p\xe1gina inteira ser\xe1 inclu\xedda. Cabe-lhe a voc\xea verificar a coer\xeancia das meta etiquetas."),(0,t.kt)("p",null,"O coment\xe1rio ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DINCLUDE --\x3e")," \xe9 muito \xfatil para testes (",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DIF--\x3e"),") ou la\xe7os (",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DLOOP--\x3e"),"). \xc9 muito conveniente incluir banners de acordo com crit\xe9rios ou de forma aleat\xf3ria.\nAo incluir, independentemente da extens\xe3o de nome do arquivo, O 4D analisa a p\xe1gina chamada e, em seguida, insere o conte\xfado (modificado ou n\xe3o) na p\xe1gina originando a chamada ",(0,t.kt)("inlineCode",{parentName:"p"},"4DINCLUDE"),"."),(0,t.kt)("p",null,"Uma p\xe1gina inclu\xedda com o ",(0,t.kt)("inlineCode",{parentName:"p"},"<! -#4DINCLUDE --\x3e")," o coment\xe1rio \xe9 carregado no cache do servidor Web da mesma forma que as p\xe1ginas chamadas atrav\xe9s de uma URL ou enviadas com o comando ",(0,t.kt)("inlineCode",{parentName:"p"},"WEB SEND FILE"),"."),(0,t.kt)("p",null,"Em ",(0,t.kt)("em",{parentName:"p"},"path"),", coloque o caminho que leva ao documento a ser inclu\xeddo. Aviso: No caso de uma chamada ",(0,t.kt)("inlineCode",{parentName:"p"},"4DINCLUDE"),', o caminho \xe9 relativo ao documento a ser analisado, ou seja, o documento "pai". Use o caractere com a barra (/) como um separador de pastas e os dois pontos (..) para subir um n\xedvel (sintaxe HTML). Quando voc\xea usa a tag ',(0,t.kt)("inlineCode",{parentName:"p"},"4DINCLUDE")," com o comando ",(0,t.kt)("inlineCode",{parentName:"p"},"PROCESS 4D TAGS"),", a pasta padr\xe3o \xe9 a pasta do projeto."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Voc\xea pode modificar a pasta padr\xe3o usada pela tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DINCLUDE")," na p\xe1gina atual, usando a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DBASE --\x3e")," (veja abaixo).")),(0,t.kt)("p",null,"O n\xfamero de ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DINCLUDE caminho--\x3e")," dentro de uma p\xe1gina \xe9 ilimitado. No entanto, as chamadas ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DINCLUDE caminho--\x3e")," s\xf3 podem ser feitas em um n\xedvel. Isso significa que, por exemplo, voc\xea n\xe3o pode inserir ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DINCLUDE mydoc3.html--\x3e")," no corpo da p\xe1gina ",(0,t.kt)("em",{parentName:"p"},"mydoc2.html"),", que \xe9 chamado por ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DINCLUDE mydoc2--\x3e")," inserido em ",(0,t.kt)("em",{parentName:"p"},"mydoc1.html"),". Al\xe9m disso, 4D verifica que as inclus\xf5es n\xe3o s\xe3o recursivas."),(0,t.kt)("p",null,'Em caso de erro, o texto inserido \xe9 "',(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DINCLUDE path--\x3e"),' :O documento n\xe3o pode ser aberto".'),(0,t.kt)("p",null,"Exemplos:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DINCLUDE subpage.html--\x3e\n\x3c!--#4DINCLUDE folder/subpage.html--\x3e\n\x3c!--#4DINCLUDE ../folder/subpage.html--\x3e\n")),(0,t.kt)("h2",n({},{id:"4dloop-e-4dendloop"}),"4DLOOP e 4DENDLOOP"),(0,t.kt)("h4",n({},{id:"sintaxe---4dloop-condition-----4dendloop--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DLOOP condition--\x3e")," ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DENDLOOP--\x3e")),(0,t.kt)("p",null,"Este coment\xe1rio permite a repeti\xe7\xe3o de uma por\xe7\xe3o de c\xf3digo, desde que a condi\xe7\xe3o seja satisfeita. A por\xe7\xe3o \xe9 delimitada por ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DLOOP--\x3e")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDLOOP--\x3e"),"."),(0,t.kt)("p",null,"A condi\xe7\xe3o ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DLOOP --\x3e")," ... ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDLOOP--\x3e")," blocos podem ser aninhados. Como em 4D, cada ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DLOOP condition--\x3e")," deve corresponder a um ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDLOOP--\x3e"),"."),(0,t.kt)("p",null,"Existem cinco tipos de condi\xe7\xf5es:"),(0,t.kt)("h3",n({},{id:"--4dloop-table--"}),(0,t.kt)("inlineCode",{parentName:"h3"},"\x3c!--#4DLOOP [table]--\x3e")),(0,t.kt)("p",null,"Esta sintaxe faz um loop para cada registro da tabela selecionada atualmente no processo atual. A por\xe7\xe3o de c\xf3digo localizada entre os dois coment\xe1rios \xe9 repetida para cada registro de sele\xe7\xe3o atual."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Quando a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DLOOP"),' \xe9 usada com uma tabela, os registros s\xe3o carregados no modo "Somente leitura".')),(0,t.kt)("p",null,"O seguinte c\xf3digo:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DLOOP [People]--\x3e\n\x3c!--#4DTEXT [People]Name--\x3e \x3c!--#4DTEXT [People]Surname--\x3e<br/>\n\x3c!--#4DENDLOOP--\x3e\n")),(0,t.kt)("p",null,"... poderia ser expresso em linguagem 4D da seguinte forma:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"})," FIRST RECORD([People])\n While(Not(End selection([People])))\n    ...\n    NEXT RECORD([People])\n End while\n")),(0,t.kt)("h3",n({},{id:"--4dloop-array--"}),(0,t.kt)("inlineCode",{parentName:"h3"},"\x3c!--#4DLOOP array--\x3e")),(0,t.kt)("p",null,"Esta sintaxe cria um ciclo para cada item do array. O item atual do array \xe9 aumentado quando cada parte do c\xf3digo \xe9 repetida."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Esta sintaxe n\xe3o pode ser utilizada com arrays de duas dimens\xf5es. Neste caso, \xe9 prefer\xedvel combinar um m\xe9todo com loops aninhados.")),(0,t.kt)("p",null,"O seguinte exemplo de c\xf3digo:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DLOOP arr_names--\x3e\n\x3c!--#4DTEXT arr_names{arr_names}--\x3e<br/>\n\x3c!--#4DENDLOOP--\x3e\n")),(0,t.kt)("p",null,"... poderia ser expresso em linguagem 4D da seguinte forma:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"})," For($Elem;1;Size of array(arr_names))\n    arr_names:=$Elem\n    ...\n End for\n")),(0,t.kt)("h3",n({},{id:"--4dloop-method--"}),(0,t.kt)("inlineCode",{parentName:"h3"},"\x3c!--#4DLOOP method--\x3e")),(0,t.kt)("p",null,"Essa sintaxe cria um loop desde que o m\xe9todo retorne ",(0,t.kt)("inlineCode",{parentName:"p"},"True"),". O m\xe9todo utiliza um tipo de par\xe2metro Long Integer. Primeiro, ele \xe9 chamado com o valor 0 para permitir um est\xe1gio de inicializa\xe7\xe3o (se necess\xe1rio); em seguida, \xe9 chamado com os valores 1, 2, 3 e assim por diante, desde que retorne ",(0,t.kt)("inlineCode",{parentName:"p"},"True"),"."),(0,t.kt)("p",null,"Por motivos de seguran\xe7a, em um processo da Web, o m\xe9todo de banco de dados ",(0,t.kt)("inlineCode",{parentName:"p"},"On Web Authentication")," pode ser chamado uma vez, logo antes do est\xe1gio de inicializa\xe7\xe3o (execu\xe7\xe3o do m\xe9todo com 0 como par\xe2metro). Se a autentica\xe7\xe3o for correta, a fase de inicializa\xe7\xe3o prossegue."),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"C_BOOLEAN($0)")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"C_LONGINT($1)")," DEVE ser declarado dentro do m\xe9todo para fins de compila\xe7\xe3o."),(0,t.kt)("p",null,"O seguinte exemplo de c\xf3digo:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DLOOP my_method--\x3e\n\x3c!--#4DTEXT var--\x3e <br/>\n\x3c!--#4DENDLOOP--\x3e\n")),(0,t.kt)("p",null,"... poderia ser expresso em linguagem 4D da seguinte forma:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"})," If(AuthenticationWebOK)\n    If(my_method(0))\n       $counter:=1\n       While(my_method($counter))\n          ...\n          $counter:=$counter+1\n       End while\n    End if\n End if\n")),(0,t.kt)("p",null,"O m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"my_method")," pode ser o seguinte:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"})," C_LONGINT($1)\n C_BOOLEAN($0)\n If($1=0) `Inicializa\xe7\xe3o\n    $0:=True\n Else\n    If($1<50)\n       ...\n       var:=...\n       $0:=True\n    Else\n       $0:=False `Para o loop\n    End if\n End if\n")),(0,t.kt)("h3",n({},{id:"--4dloop-expression--"}),(0,t.kt)("inlineCode",{parentName:"h3"},"\x3c!--#4DLOOP expression--\x3e")),(0,t.kt)("p",null,"Com esta sintaxe, a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DLOOP")," faz um la\xe7o contanto que a ",(0,t.kt)("em",{parentName:"p"},"express\xe3o")," retorne ",(0,t.kt)("inlineCode",{parentName:"p"},"True"),". A express\xe3o pode ser qualquer express\xe3o booleana v\xe1lida e deve conter uma parte da vari\xe1vel para ser avaliada em cada la\xe7o para evitar la\xe7os infinitos."),(0,t.kt)("p",null,"Por exemplo, o seguinte c\xf3digo:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DEVAL $i:=0--\x3e\n\x3c!--#4DLOOP ($i<4)--\x3e\n\x3c!--#4DEVAL $i--\x3e\n\x3c!--#4DEVAL $i:=$i+1--\x3e\n\x3c!--#4DENDLOOP--\x3e\n")),(0,t.kt)("p",null,"...produz o seguinte resultado:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{}),"\n0\n\n1\n2\n3\n")),(0,t.kt)("h3",n({},{id:"--4dloop-pointerarray--"}),(0,t.kt)("inlineCode",{parentName:"h3"},"\x3c!--#4DLOOP pointerArray--\x3e")),(0,t.kt)("p",null,"Nesse caso, a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DLOOP")," funciona como em uma matriz: ela faz um loop para cada elemento da matriz referenciada pelo ponteiro. O elemento atual da matriz \xe9 aumentado cada vez que a parte do c\xf3digo \xe9 repetida."),(0,t.kt)("p",null,"Essa sintaxe \xe9 \xfatil quando voc\xea passa um ponteiro de matriz como par\xe2metro para o comando ",(0,t.kt)("inlineCode",{parentName:"p"},"PROCESS 4D TAGS"),"."),(0,t.kt)("p",null,"Exemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"}),' ARRAY TEXT($array;2)\n $array{1}:="hello"\n $array{2}:="world"\n $input:="\x3c!--#4DEVAL $1--\x3e"\n $input:=$input+"\x3c!--#4DLOOP $2--\x3e"\n $input:=$input+"\x3c!--#4DEVAL $2->{$2->}--\x3e "\n $input:=$input+"\x3c!--#4DENDLOOP--\x3e"\n PROCESS 4D TAGS($input;$output;"elements = ";->$array)\n  // $output = "elements = hello world "\n')),(0,t.kt)("p",null,'Em caso de erro de interpreta\xe7\xe3o, o texto "',(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DLOOP express\xe3o--\x3e"),': description" \xe9 inserido em vez do conte\xfado localizado entre ',(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DLOOP --\x3e")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DENDLOOP--\x3e"),"."),(0,t.kt)("p",null,"Podem ser mostradas as seguintes mensagens:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Tipo de express\xe3o inesperado (erro padr\xe3o);"),(0,t.kt)("li",{parentName:"ul"},"Nome incorreto da tabela (erro no nome da tabela);"),(0,t.kt)("li",{parentName:"ul"},"Esperava-se uma matriz (a vari\xe1vel n\xe3o \xe9 uma matriz ou \xe9 uma matriz de duas dimens\xf5es);"),(0,t.kt)("li",{parentName:"ul"},"O m\xe9todo n\xe3o existe;"),(0,t.kt)("li",{parentName:"ul"},"Erro de sintaxe (quando o m\xe9todo est\xe1 em execu\xe7\xe3o);"),(0,t.kt)("li",{parentName:"ul"},"Erro de acesso (voc\xea n\xe3o tem os privil\xe9gios de acesso adequados para acessar a tabela ou o m\xe9todo)."),(0,t.kt)("li",{parentName:"ul"},"4DENDLOOP esperado (o n\xfamero ",(0,t.kt)("inlineCode",{parentName:"li"},"\x3c!--#4DENDLOOP--\x3e")," n\xe3o corresponde ao n\xfamero ",(0,t.kt)("inlineCode",{parentName:"li"},"\x3c!--#4DLOOP --\x3e"),").")),(0,t.kt)("h2",n({},{id:"4dscript"}),"4DSCRIPT/"),(0,t.kt)("h4",n({},{id:"sintaxe---4dscriptmethodnamemyparam--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DSCRIPT/MethodName/MyParam--\x3e")),(0,t.kt)("p",null,"A tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DSCRIPT")," permite que voc\xea execute m\xe9todos 4D ao processar o modelo. A presen\xe7a da tag ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DSCRIPT/MyMethod/MyParam--\x3e")," como um coment\xe1rio HTML inicia a execu\xe7\xe3o do m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"MyMethod")," com o par\xe2metro ",(0,t.kt)("inlineCode",{parentName:"p"},"Param")," como uma string em ",(0,t.kt)("inlineCode",{parentName:"p"},"$1"),"."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Se a tag for chamada no contexto de um processo da Web, quando a p\xe1gina for carregada, 4D chamar\xe1 o m\xe9todo de banco de dados ",(0,t.kt)("inlineCode",{parentName:"p"},"On Web Authentication")," (se existir). Se retornar True, 4D executa o m\xe9todo.")),(0,t.kt)("p",null,"O m\xe9todo deve retornar o texto em ",(0,t.kt)("inlineCode",{parentName:"p"},"$0"),". Se a string come\xe7a com o caractere de c\xf3digo 1, ele \xe9 considerado HTML (o mesmo princ\xedpio \xe9 verdadeiro para a tag ",(0,t.kt)("inlineCode",{parentName:"p"},"4DHTML"),")."),(0,t.kt)("p",null,"Por exemplo, vamos dizer que voc\xea insere o seguinte coment\xe1rio ",(0,t.kt)("inlineCode",{parentName:"p"},"\u201cHoje \xe9 \x3c!--#4DSCRIPT/MYMETH/MYPARAM--\x3e\u201d")," em uma p\xe1gina de modelo da web. Quando carrega a p\xe1gina, 4D chama o m\xe9todo do banco de dados ",(0,t.kt)("inlineCode",{parentName:"p"},"Na Web Authentication"),", ent\xe3o chama o m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"MYMETH")," e passa a string \u201c/MYPARAM\u201d como o par\xe2metro ",(0,t.kt)("inlineCode",{parentName:"p"},"$1"),'. O m\xe9todo retorna o texto em $0 (por exemplo "12/31/21"); a express\xe3o "',(0,t.kt)("inlineCode",{parentName:"p"},"Hoje \xe9 \x3c!--#4DSCRIPT/MYMETH/MYPARAM\u2013>"),'" torna-se, portanto, "Hoje \xe9 12/31/21".'),(0,t.kt)("p",null,"O m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"MYMETH")," \xe9 o seguinte:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"}),"  //MYMETH\n C_TEXT($0;$1) //Estes par\xe2metros devem ser sempre declarados\n $0:=String(Current date)\n")),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Um m\xe9todo chamado por ",(0,t.kt)("inlineCode",{parentName:"p"},"4DSCRIPT")," n\xe3o deve chamar elementos de interface (",(0,t.kt)("inlineCode",{parentName:"p"},"DIALOG"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"ALERT"),", etc.).")),(0,t.kt)("p",null,"Como 4D executa m\xe9todos em sua ordem de apari\xe7\xe3o, \xe9 absolutamente poss\xedvel chamar um m\xe9todo que define o valor de muitas vari\xe1veis que s\xe3o referenciadas mais adiante no documento, seja qual for o modo que estiver usando. Voc\xea pode inserir quantos coment\xe1rios ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DSCRIPT...--\x3e")," voc\xea quiser em um modelo."),(0,t.kt)("h2",n({},{id:"4dtext"}),"4DTEXT"),(0,t.kt)("h4",n({},{id:"sintaxe---4dtext-expression--"}),"Sintaxe: ",(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4DTEXT expression--\x3e")),(0,t.kt)("h4",n({},{id:"sintaxe-alternativa-4dtextexpression"}),"Sintaxe alternativa: ",(0,t.kt)("inlineCode",{parentName:"h4"},"$4DTEXT(expression)")),(0,t.kt)("p",null,"A tag ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DTEXT expression--\x3e")," permite que voc\xea insira uma refer\xeancia a uma vari\xe1vel ou express\xe3o 4D que retorna um valor. Por exemplo, se escrever (numa p\xe1gina HTML):"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"<P>Bem-vindo a \x3c!--#4DTEXT vtSiteName--\x3e!</P>\n")),(0,t.kt)("p",null,"O valor da vari\xe1vel 4D ",(0,t.kt)("inlineCode",{parentName:"p"},"vtSiteName"),' ser\xe1 inserido na p\xe1gina HTML quando ela for enviada. Esse valor \xe9 inserido como texto simples, e os caracteres HTML especiais, como ">", s\xe3o automaticamente escapados.'),(0,t.kt)("p",null,"Tamb\xe9m \xe9 poss\xedvel inserir express\xf5es 4D. Voc\xea pode, por exemplo, inserir diretamente o conte\xfado de um campo (",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DTEXT [tableName]fieldName--\x3e"),"), um elemento de array (",(0,t.kt)("inlineCode",{parentName:"p"},"<! -#4DTEXT tabarr{1}--\x3e"),") ou um m\xe9todo retornando um valor (",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DTEXT mymethod--\x3e"),"). A convers\xe3o de express\xf5es segue as mesmas regras das vari\xe1veis. Al\xe9m disso, a express\xe3o deve respeitar as regras de sintaxe 4D."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Por motivos de seguran\xe7a, recomenda-se usar essa tag ao processar dados introduzidos de fora do aplicativo, a fim de evitar a ","[inser\xe7\xe3o de c\xf3digo malicioso]"," (#prevention-of-malicious-code-insertion).")),(0,t.kt)("p",null,"No caso de um erro de avalia\xe7\xe3o, o texto inserido aparecer\xe1 como ",(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DTEXT myvar--\x3e: ## error # error code"),"."),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"\xc9 necess\xe1rio utilizar vari\xe1veis processo."),(0,t.kt)("li",{parentName:"ul"},"\xc9 poss\xedvel mostrar o conte\xfado de um campo imagem. No entanto, n\xe3o \xe9 poss\xedvel exibir o conte\xfado de um item matriz de imagens."),(0,t.kt)("li",{parentName:"ul"},"\xc9 poss\xedvel exibir o conte\xfado de um campo de objeto por meio de uma f\xf3rmula 4D. Por exemplo, voc\xea pode escrever ",(0,t.kt)("inlineCode",{parentName:"li"},'\x3c!--#4DTEXT OB Get:C1224([Rect]Desc;\\"color\\")--\x3e'),"."),(0,t.kt)("li",{parentName:"ul"},"Normalmente, trabalha-se com vari\xe1veis de tipo texto. No entanto, tamb\xe9m \xe9 poss\xedvel utilizar vari\xe1veis BLOB. Voc\xea s\xf3 precisa gerar BLOBs no modo ",(0,t.kt)("inlineCode",{parentName:"li"},"Texto sem comprimento"),".")),(0,t.kt)("h2",n({},{id:"sintaxe-alternativa-para-4dtext-4dhtml-4deval"}),"Sintaxe alternativa para 4DTEXT, 4DHTML, 4DEVAL"),(0,t.kt)("p",null,"V\xe1rias tags de transforma\xe7\xe3o 4D existentes podem ser expressas usando uma sintaxe baseada em $:"),(0,t.kt)("h4",n({},{id:"4dtag-expression"}),"$4dtag (expression)"),(0,t.kt)("p",null,"pode ser utilizado em vez de"),(0,t.kt)("h4",n({},{id:"--4dtag-expression--"}),(0,t.kt)("inlineCode",{parentName:"h4"},"\x3c!--#4dtag expression--\x3e")),(0,t.kt)("p",null,"Esta sintaxe alternativa est\xe1 dispon\xedvel apenas para as tags usadas para retornar valores processados:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",n({parentName:"li"},{href:"#4dtext"}),"4DTEXT")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",n({parentName:"li"},{href:"#4dhtml"}),"4DHTML")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",n({parentName:"li"},{href:"#4deval"}),"4DEVAL"))),(0,t.kt)("p",null,"(Outras tags, como 4DIF ou 4DSCRIPT, devem ser escritas com a sintaxe normal)."),(0,t.kt)("p",null,"Por exemplo, pode escrever:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"$4DEVAL(UserName)\n")),(0,t.kt)("p",null,"em vez de:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-html"}),"\x3c!--#4DEVAL(UserName)--\x3e\n")),(0,t.kt)("p",null,'A principal vantagem dessa sintaxe \xe9 que ela permite que voc\xea escreva modelos em conformidade com XML. Alguns desenvolvedores de 4D precisam criar e validar modelos baseados em XML usando ferramentas padr\xe3o de an\xe1lise de XML. Como o caractere "<" \xe9 inv\xe1lido em um valor de atributo XML, n\xe3o era poss\xedvel usar a sintaxe "',(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!-- --\x3e"),'" das tags 4D sem quebrar a sintaxe do documento. Por outro lado, o escape do caractere "<" impedir\xe1 que 4D interprete as tags corretamente.'),(0,t.kt)("p",null,'Por exemplo, o c\xf3digo a seguir causaria um erro de an\xe1lise de XML devido ao primeiro caractere "<" no valor do atributo:'),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-xml"}),'<line x1="\x3c!--#4DEVAL $x--\x3e" y1="\x3c!--#4DEVAL $graphY1--\x3e"/>\n')),(0,t.kt)("p",null,"Utilizando a sintaxe $, o seguinte c\xf3digo \xe9 validado pelo analisador:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-xml"}),'<line x1="$4DEVAL($x)" y1="$4DEVAL($graphY1)"/>\n')),(0,t.kt)("p",null,"Observe que ",(0,t.kt)("inlineCode",{parentName:"p"},"$4dtag")," e ",(0,t.kt)("inlineCode",{parentName:"p"},"<--#4dtag --\x3e")," n\xe3o s\xe3o estritamente equivalentes: ao contr\xe1rio de ",(0,t.kt)("inlineCode",{parentName:"p"},"<--#4dtag --\x3e"),", o processamento de ",(0,t.kt)("inlineCode",{parentName:"p"},"$4dtag")," n\xe3o interpreta tags 4D ","[recursivamente]"," (#recursive-processing). As tags ",(0,t.kt)("inlineCode",{parentName:"p"},"$")," s\xe3o sempre avaliadas uma vez e o resultado \xe9 considerado como texto simples."),(0,t.kt)("p",null,"A raz\xe3o para esta diferen\xe7a \xe9 evitar a inje\xe7\xe3o de c\xf3digo malicioso. Conforme ","[explicado abaixo]"," (#prevention-of-malicious-code-insertion), \xe9 altamente recomend\xe1vel usar as tags ",(0,t.kt)("inlineCode",{parentName:"p"},"4DTEXT")," em vez das tags ",(0,t.kt)("inlineCode",{parentName:"p"},"4DHTML")," ao manipular o texto do usu\xe1rio para se proteger contra reinterpreta\xe7\xf5es indesejadas das tags: com ",(0,t.kt)("inlineCode",{parentName:"p"},"4DTEXT"),', caracteres especiais como "<" s\xe3o escapados, portanto, quaisquer tags 4D que usem a sintaxe ',(0,t.kt)("inlineCode",{parentName:"p"},"\x3c!--#4dtag expression --\x3e")," perder\xe3o seu significado espec\xedfico. No entanto, como o ",(0,t.kt)("inlineCode",{parentName:"p"},"4DTEXT")," n\xe3o escapa do s\xedmbolo ",(0,t.kt)("inlineCode",{parentName:"p"},"$"),", decidimos interromper o suporte \xe0 recurs\xe3o para evitar a inje\xe7\xe3o maliciosa usando a sintaxe ",(0,t.kt)("inlineCode",{parentName:"p"},"$4dtag (expression)"),"."),(0,t.kt)("p",null,"Os exemplos a seguir mostram o resultado do processamento, dependendo da sintaxe e da tag usadas:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"}),'  // exemplo 1\n myName:="\x3c!--#4DHTML QUIT 4D--\x3e" //inje\xe7\xe3o maliciosa\n input:="My name is: \x3c!--#4DHTML myName--\x3e"\n PROCESS 4D TAGS(input;output)\n  //4D will quit!\n')),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"}),'  // exemplo 1\n myName:="\x3c!--#4DHTML QUIT 4D--\x3e" //inje\xe7\xe3o maliciosa\n input:="My name is: \x3c!--#4DHTML myName--\x3e"\n PROCESS 4D TAGS(input;output)\n  //4D will quit--\x3e"\n')),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"}),'  // exemplo 1\n myName:="\x3c!--#4DHTML QUIT 4D--\x3e" //inje\xe7\xe3o maliciosa\n input:="My name is: \x3c!--#4DHTML myName--\x3e"\n PROCESS 4D TAGS(input;output)\n  //4D will quit)"\n')),(0,t.kt)("p",null,"Observe que a sintaxe ",(0,t.kt)("inlineCode",{parentName:"p"},"$4dtag")," suporta a correspond\xeancia de pares de aspas ou par\xeanteses. Por exemplo, suponha que voc\xea precise avaliar a seguinte cadeia de caracteres complexa (irrealista):"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{}),'String(1) + "\\"(hello)\\""\n')),(0,t.kt)("p",null,"Voc\xea pode escrever:"),(0,t.kt)("pre",null,(0,t.kt)("code",n({parentName:"pre"},{className:"language-4d"}),' input:="$4DEVAL( String(1)+\\"\\\\\\"(hello)\\\\\\"\\")"\n PROCESS 4D TAGS(input;output)\n --\x3eoutput is 1"(hello)"\n')))}c.isMDXComponent=!0}}]);