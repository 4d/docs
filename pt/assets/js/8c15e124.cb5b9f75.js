"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["70319"],{430779:function(e,s,n){n.r(s),n.d(s,{default:()=>u,frontMatter:()=>d,metadata:()=>i,assets:()=>t,toc:()=>l,contentTitle:()=>a});var i=JSON.parse('{"id":"ORDA/privileges","title":"Privil\xe9gios","description":"Proteger dados enquanto permitir acesso r\xe1pido e f\xe1cil para usu\xe1rios autorizados \xe9 um desafio importante para aplica\xe7\xf5es web. A arquitetura de seguran\xe7a ORDA \xe9 implementada no cerne do seu datastore e permite que voc\xea defina privil\xe9gios espec\xedficos para todas as sess\xf5es de usu\xe1rio para os v\xe1rios recursos no seu projeto (datastore, dataclasses, fun\xe7\xf5es, etc.).","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-20/ORDA/privileges.md","sourceDirName":"ORDA","slug":"/ORDA/privileges","permalink":"/docs/pt/20/ORDA/privileges","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20ORDA%2Fprivileges.md%20(20)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20","frontMatter":{"id":"privileges","title":"Privil\xe9gios"},"sidebar":"docs","previous":{"title":"Utilizar um datastore remoto","permalink":"/docs/pt/20/ORDA/datastores"},"next":{"title":"Glossary","permalink":"/docs/pt/20/ORDA/glossary"}}'),r=n("785893"),o=n("250065");let d={id:"privileges",title:"Privil\xe9gios"},a=void 0,t={},l=[{value:"Vis\xe3o Geral",id:"vis\xe3o-geral",level:2},{value:"Resources",id:"resources",level:2},{value:"Ac\xe7\xf5es de autoriza\xe7\xe3o",id:"ac\xe7\xf5es-de-autoriza\xe7\xe3o",level:2},{value:"Privil\xe9gios e roles",id:"privil\xe9gios-e-roles",level:2},{value:"Exemplo",id:"exemplo",level:3},{value:"ficheiro <code>roles.json</code>",id:"ficheiro-rolesjson",level:2},{value:"ficheiro <code>Roles_Errors.json</code>",id:"ficheiro-roles_errorsjson",level:3},{value:"Inicializa\xe7\xe3o de privil\xe9gios para implanta\xe7\xe3o",id:"inicializa\xe7\xe3o-de-privil\xe9gios-para-implanta\xe7\xe3o",level:2}];function c(e){let s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Proteger dados enquanto permitir acesso r\xe1pido e f\xe1cil para usu\xe1rios autorizados \xe9 um desafio importante para aplica\xe7\xf5es web. A arquitetura de seguran\xe7a ORDA \xe9 implementada no cerne do seu datastore e permite que voc\xea defina privil\xe9gios espec\xedficos para todas as sess\xf5es de usu\xe1rio para os v\xe1rios recursos no seu projeto (datastore, dataclasses, fun\xe7\xf5es, etc.)."}),"\n",(0,r.jsx)(s.h2,{id:"vis\xe3o-geral",children:"Vis\xe3o Geral"}),"\n",(0,r.jsx)(s.p,{children:"A arquitetura de seguran\xe7a da ORDA \xe9 baseada nos conceitos de privil\xe9gios, a\xe7\xf5es de permiss\xe3o (ler, criar, etc.) e recursos."}),"\n",(0,r.jsxs)(s.p,{children:["Quando os usu\xe1rios s\xe3o registrados, sua sess\xe3o \xe9 automaticamente carregada com os privil\xe9gios associados. Os privil\xe9gios s\xe3o atribu\xeddos \xe0 sess\xe3o usando a fun\xe7\xe3o ",(0,r.jsx)(s.a,{href:"/docs/pt/20/API/SessionClass#setprivileges",children:(0,r.jsx)(s.code,{children:"session.setPrivileges()"})}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Cada solicita\xe7\xe3o de usu\xe1rio enviada na sess\xe3o \xe9 avaliada em rela\xe7\xe3o aos privil\xe9gios definidos no arquivo ",(0,r.jsx)(s.code,{children:"roles.json"})," do projeto."]}),"\n",(0,r.jsx)(s.p,{children:"Se um usu\xe1rio tentar executar uma a\xe7\xe3o e n\xe3o tiver os direitos de acesso adequados, um erro de privil\xe9gio \xe9 gerado ou, no caso de falta de permiss\xe3o de leitura nos atributos, eles n\xe3o s\xe3o enviados."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"esquema",src:n(524815).Z+"",width:"960",height:"540"})}),"\n",(0,r.jsx)(s.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsx)(s.p,{children:"Voc\xea pode atribuir a\xe7\xf5es de permiss\xe3o espec\xedficas aos seguintes recursos em seu projeto:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"o datastore"}),"\n",(0,r.jsx)(s.li,{children:"uma classe de dados"}),"\n",(0,r.jsx)(s.li,{children:"um atributo (inclusive calculado e aliases)"}),"\n",(0,r.jsx)(s.li,{children:"uma fun\xe7\xe3o de classe de modelo de dados"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Cada vez que um recurso \xe9 acessado em uma sess\xe3o (independentemente da forma como \xe9 acessado), 4D verifica se a sess\xe3o tem as permiss\xf5es apropriadas e rejeita o acesso se n\xe3o for autorizado."}),"\n",(0,r.jsx)(s.p,{children:"Uma a\xe7\xe3o de permiss\xe3o definida em um determinado n\xedvel \xe9 herdada por padr\xe3o em n\xedveis inferiores, mas v\xe1rias permiss\xf5es podem ser configuradas:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Uma a\xe7\xe3o de permiss\xe3o definida no n\xedvel do datastore \xe9 automaticamente atribu\xedda a todas as dataclasses."}),"\n",(0,r.jsx)(s.li,{children:"Uma a\xe7\xe3o de permiss\xe3o definida ao n\xedvel da classe de dados substitui a defini\xe7\xe3o do armazenamento de dados (se existir). Por padr\xe3o, todos os atributos do dataclass herdam das permiss\xf5es de banco de dados."}),"\n",(0,r.jsx)(s.li,{children:'Ao contr\xe1rio das permiss\xf5es da classe de dados, uma a\xe7\xe3o de permiss\xe3o definida no n\xedvel do atributo n\xe3o substitui a(s) permiss\xe3o(\xf5es) pai da classe de dados, mas \xe9 adicionada a ela. Por exemplo, se voc\xea atribuiu o privil\xe9gio "geral" a uma classe de dados e o privil\xe9gio "detalhe" a um atributo da classe de dados, ambos os privil\xe9gios "geral" e "detalhe" devem ser definidos na sess\xe3o para acessar o atributo.'}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"ac\xe7\xf5es-de-autoriza\xe7\xe3o",children:"Ac\xe7\xf5es de autoriza\xe7\xe3o"}),"\n",(0,r.jsx)(s.p,{children:"As a\xe7\xf5es dispon\xedveis est\xe3o relacionadas com o recurso alvo."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Ac\xe7\xf5es"}),(0,r.jsx)(s.th,{children:"armaz\xe9m de dados"}),(0,r.jsx)(s.th,{children:"dataclass"}),(0,r.jsx)(s.th,{children:"atributo"}),(0,r.jsx)(s.th,{children:"fun\xe7\xe3o de modelo de dados"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"create"})}),(0,r.jsx)(s.td,{children:"Criar entidade em qualquer classe de dados"}),(0,r.jsx)(s.td,{children:"Criar entidade nesta classe de dados"}),(0,r.jsx)(s.td,{children:"Criar uma entidade com um valor diferente do valor padr\xe3o permitido para este atributo (ignorado para atributos alias)."}),(0,r.jsx)(s.td,{children:"n/a"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"read"})}),(0,r.jsx)(s.td,{children:"Ler atributos em qualquer dataclass"}),(0,r.jsx)(s.td,{children:"Ler atributos nesta classe de dados"}),(0,r.jsx)(s.td,{children:"Leia o conte\xfado desse atributo"}),(0,r.jsx)(s.td,{children:"n/a"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"update"})}),(0,r.jsx)(s.td,{children:"Atualizar atributos em qualquer classe de dados."}),(0,r.jsx)(s.td,{children:"Atualiza os atributos nesta classe de dados."}),(0,r.jsx)(s.td,{children:"Atualiza o conte\xfado deste atributo (ignorado para atributos alias)."}),(0,r.jsx)(s.td,{children:"n/a"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"drop"})}),(0,r.jsx)(s.td,{children:"Eliminar dados em qualquer classe de dados."}),(0,r.jsx)(s.td,{children:"Eliminar dados nesta classe de dados."}),(0,r.jsx)(s.td,{children:"Excluir um valor n\xe3o nulo para este atributo (exceto para alias e atributo calculado)."}),(0,r.jsx)(s.td,{children:"n/a"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"execute"})}),(0,r.jsx)(s.td,{children:"Executar qualquer fun\xe7\xe3o no projeto (datastore, dataclass, sele\xe7\xe3o de entidade, entidade)"}),(0,r.jsx)(s.td,{children:"Executa qualquer fun\xe7\xe3o na classe de dados. Fun\xe7\xf5es de Dataclass e fun\xe7\xf5es de sele\xe7\xe3o de entidades, e fun\xe7\xf5es de sele\xe7\xe3o de entidades s\xe3o tratadas como fun\xe7\xf5es de dataclass"}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"Executar esta fun\xe7\xe3o"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"describe"})}),(0,r.jsx)(s.td,{children:"Todas as classes de dados est\xe3o dispon\xedveis na /rest/$catalog API"}),(0,r.jsx)(s.td,{children:"Esta dataclass est\xe1 dispon\xedvel na API /rest/$catalog"}),(0,r.jsx)(s.td,{children:"Esse atributo est\xe1 dispon\xedvel na API /rest/$catalog."}),(0,r.jsx)(s.td,{children:"Esta fun\xe7\xe3o de classe de dados est\xe1 dispon\xedvel na API /rest/$catalog"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"promote"})}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"Associa um determinado privil\xe9gio durante a execu\xe7\xe3o da fun\xe7\xe3o. O privil\xe9gio \xe9 temporariamente adicionado \xe0 sess\xe3o e removido no final da execu\xe7\xe3o da fun\xe7\xe3o. Por seguran\xe7a, s\xf3 o processo de execu\xe7\xe3o da fun\xe7\xe3o \xe9 acrescentado o privil\xe9gio, n\xe3o toda a sess\xe3o."})]})]})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Notas:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Um alias pode ser lido assim que os privil\xe9gios de sess\xe3o permitir o acesso ao alias em si, Mesmo que os privil\xe9gios de sess\xe3o n\xe3o permitam o acesso aos atributos que resolvem o alias."}),"\n",(0,r.jsx)(s.li,{children:"Um atributo calculado pode ser acessado mesmo que n\xe3o haja permiss\xf5es sobre os atributos sobre os quais ele \xe9 constru\xeddo."}),"\n",(0,r.jsxs)(s.li,{children:["Valores padr\xe3o: na implementa\xe7\xe3o atual, apenas ",(0,r.jsx)(s.em,{children:"Null"})," est\xe1 dispon\xedvel como valor padr\xe3o."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"A defini\xe7\xe3o das permiss\xf5es deve ser coerente, nomeadamente:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["As permiss\xf5es ",(0,r.jsx)(s.strong,{children:"update"})," e ",(0,r.jsx)(s.strong,{children:"drop"})," tamb\xe9m precisam de permiss\xe3o ",(0,r.jsx)(s.strong,{children:"read"})," (mas ",(0,r.jsx)(s.strong,{children:"create"})," n\xe3o precisa)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"promote"})," permission also need ",(0,r.jsx)(s.strong,{children:"describe"})," permission."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"privil\xe9gios-e-roles",children:"Privil\xe9gios e roles"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"privilege"})," is the technical ability to run ",(0,r.jsx)(s.strong,{children:"actions"})," on ",(0,r.jsx)(s.strong,{children:"resources"}),", while a ",(0,r.jsx)(s.strong,{children:"role"}),' is a privilege pusblished to be used by an administrator. Basically, a role gathers several privileges to define a business user profile. For example, "manageInvoices" could be a privilege while "secretary" could be a role (which includes "manageInvoices" and other privileges).']}),"\n",(0,r.jsx)(s.p,{children:'Um privil\xe9gio ou um papel pode ser associado a v\xe1rias combina\xe7\xf5es de "a\xe7\xe3o + recurso". Podem ser associados v\xe1rios privil\xe9gios a uma a\xe7\xe3o. Um privil\xe9gio pode incluir outros privil\xe9gios.'}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["You ",(0,r.jsx)(s.strong,{children:"create"})," privileges and/or roles in the ",(0,r.jsx)(s.code,{children:"roles.json"})," file (see below). Voc\xea ",(0,r.jsx)(s.strong,{children:"configurou"})," o escopo dele, atribuindo-lhes a a\xe7\xe3o de permiss\xe3o aplicada aos recursos."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["You ",(0,r.jsx)(s.strong,{children:"allow"})," privileges and/or roles to every user session using the ",(0,r.jsx)(s.a,{href:"/docs/pt/20/API/SessionClass#setprivileges",children:(0,r.jsx)(s.code,{children:".setPrivileges()"})})," function of the ",(0,r.jsx)(s.code,{children:"Session"})," class."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"exemplo",children:"Exemplo"}),"\n",(0,r.jsx)(s.p,{children:"Para permitir uma fun\xe7\xe3o em uma sess\xe3o:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",children:'\nexposed Function authenticate($identifier : Text; $password : Text)->$result : Text\n\n    var $user : cs. UsersEntity\n\n    Session.clearPrivileges()\n\n    $result:="Your are authenticated as Guest"\n\n    $user:=ds. Users.query("identifier = :1"; $identifier).first()\n\n    If ($user#Null)\n        If (Verify password hash($password; $user.password))\n            Session.setPrivileges(New object("roles"; $user.role))\n            $result:="Your are authenticated as "+$user.role\n        End if\n    End if\n\n\n'})}),"\n",(0,r.jsxs)(s.h2,{id:"ficheiro-rolesjson",children:["ficheiro ",(0,r.jsx)(s.code,{children:"roles.json"})]}),"\n",(0,r.jsxs)(s.p,{children:["O arquivo ",(0,r.jsx)(s.code,{children:"roles.json"})," descreve todas as configura\xe7\xf5es de seguran\xe7a do projeto."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Em um contexto diferente de ",(0,r.jsx)(s.em,{children:"Qodly"})," (cloud), \xe9 necess\xe1rio criar esse arquivo no seguinte local: ",(0,r.jsx)(s.code,{children:"<project folder>/Project/Sources/"}),". Ver a se\xe7\xe3o ",(0,r.jsx)(s.a,{href:"/docs/pt/20/Project/architecture#sources",children:"Arquitetura"}),"."]})}),"\n",(0,r.jsxs)(s.p,{children:["A sintaxe do ficheiro ",(0,r.jsx)(s.code,{children:"roles.json"})," \xe9 a seguinte:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Nome da propriedade"}),(0,r.jsx)(s.th,{}),(0,r.jsx)(s.th,{}),(0,r.jsx)(s.th,{children:"Tipo"}),(0,r.jsx)(s.th,{children:"Obrigat\xf3rio"}),(0,r.jsx)(s.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"privileges"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsxs)(s.td,{children:["Cole\xe7\xe3o de objectos ",(0,r.jsx)(s.code,{children:"privilege"})]}),(0,r.jsx)(s.td,{children:"X"}),(0,r.jsx)(s.td,{children:"Lista de privil\xe9gios definidos"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].privilege"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Nome do privil\xe9gio"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].includes"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de nomes de privil\xe9gios inclu\xeddos"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"roles"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsxs)(s.td,{children:["Cole\xe7\xe3o de objetos ",(0,r.jsx)(s.code,{children:"role"})]}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de roles definidos"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].role"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Nome da role"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].privileges"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de nomes de privil\xe9gios inclu\xeddos"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"permissions"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Object"}),(0,r.jsx)(s.td,{children:"X"}),(0,r.jsx)(s.td,{children:"Lista de ac\xe7\xf5es permitidas"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"allowed"}),(0,r.jsx)(s.td,{}),(0,r.jsxs)(s.td,{children:["Cole\xe7\xe3o de objectos ",(0,r.jsx)(s.code,{children:"permission"})]}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de permiss\xf5es permitidas"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].applyTo"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:"X"}),(0,r.jsxs)(s.td,{children:["Nome do ",(0,r.jsx)(s.a,{href:"#resources",children:"recurso"})," alvo"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].type"}),(0,r.jsx)(s.td,{children:"Text"}),(0,r.jsx)(s.td,{children:"X"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.a,{href:"#resources",children:"Resource"}),' type: "datastore", "dataclass", "attribute", "method"']})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].read"}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de privil\xe9gios"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].create"}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de privil\xe9gios"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].update"}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de privil\xe9gios"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].drop"}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de privil\xe9gios"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].describe"}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de privil\xe9gios"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].execute"}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de privil\xe9gios"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"[].promote"}),(0,r.jsx)(s.td,{children:"Cole\xe7\xe3o de strings"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"Lista de privil\xe9gios"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{title:"Lembrete",type:"caution",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:'O nome do privil\xe9gio "WebAdmin" est\xe1 reservado \xe0 aplica\xe7\xe3o. N\xe3o se recomenda a utiliza\xe7\xe3o deste nome para privil\xe9gios personalizados.'}),"\n",(0,r.jsxs)(s.li,{children:["Os nomes ",(0,r.jsx)(s.code,{children:"privileges"})," e ",(0,r.jsx)(s.code,{children:"roles"})," n\xe3o diferenciam mai\xfasculas de min\xfasculas."]}),"\n"]})}),"\n",(0,r.jsxs)(s.h3,{id:"ficheiro-roles_errorsjson",children:["ficheiro ",(0,r.jsx)(s.code,{children:"Roles_Errors.json"})]}),"\n",(0,r.jsxs)(s.p,{children:["O arquivo ",(0,r.jsx)(s.code,{children:"roles.json"})," \xe9 analisado por 4D na inicializa\xe7\xe3o. Voc\xea precisa reiniciar o aplicativo se quiser que as modifica\xe7\xf5es neste arquivo sejam consideradas."]}),"\n",(0,r.jsxs)(s.p,{children:["Em caso de erro(s) ao analisar o arquivo ",(0,r.jsx)(s.code,{children:"roles.json"}),", 4D carrega o projeto, mas desabilita a prote\xe7\xe3o de acesso global - isso permite ao desenvolvedor acessar os arquivos e corrigir o erro. Um arquivo de erro chamado ",(0,r.jsx)(s.code,{children:"Roles_Errors.json"})," \xe9 gerado na pasta ",(0,r.jsxs)(s.a,{href:"/docs/pt/20/Project/architecture#logs",children:[(0,r.jsx)(s.code,{children:"Logs"})," do projeto"]})," e descreve a(s) linha(s) de erro. Este arquivo \xe9 automaticamente exclu\xeddo quando o arquivo ",(0,r.jsx)(s.code,{children:"roles.json"})," n\xe3o cont\xe9m mais erro(s)."]}),"\n",(0,r.jsxs)(s.p,{children:["Recomenda-se verificar na inicializa\xe7\xe3o se existe um arquivo ",(0,r.jsx)(s.code,{children:"Roles_Errors.json"})," na ",(0,r.jsx)(s.a,{href:"/docs/pt/20/Project/architecture#logs",children:"pasta Logs"}),", o que significa que houve um erro de an\xe1lise e que os acessos n\xe3o ser\xe3o limitados. Pode escrever, por exemplo:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-4d",metastring:'title="/Sources/DatabaseMethods/onStartup.4dm"',children:'If (Not(File("/LOGS/"+"Roles_Errors.json").exists))\n\u2026\nElse // you can prevent the project to open\n ALERT("The roles.json file is malformed or contains inconsistencies, the application will quit.")\n QUIT 4D\n End if \n'})}),"\n",(0,r.jsx)(s.h2,{id:"inicializa\xe7\xe3o-de-privil\xe9gios-para-implanta\xe7\xe3o",children:"Inicializa\xe7\xe3o de privil\xe9gios para implanta\xe7\xe3o"}),"\n",(0,r.jsxs)(s.p,{children:["Por padr\xe3o, se nenhum par\xe2metro espec\xedfico for definido no arquivo ",(0,r.jsx)(s.code,{children:"roles.json"}),", os acessos n\xe3o ser\xe3o limitados. Essa configura\xe7\xe3o permite que voc\xea desenvolva a aplica\xe7\xe3o sem ter que se preocupar com os acessos."]}),"\n",(0,r.jsxs)(s.p,{children:["No entanto, quando a aplica\xe7\xe3o estiver prestes a ser implantado, uma boa pr\xe1tica \xe9 bloquear todos os privil\xe9gios e, em seguida, configurar o arquivo para abrir apenas as partes controladas para sess\xf5es autorizadas. Para bloquear todos os privil\xe9gios em todos os recursos, coloque o seguinte arquivo ",(0,r.jsx)(s.code,{children:"roles.json"})," na pasta do seu projeto (ele inclui exemplos de m\xe9todos):"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:'title="/Project/Sources/roles.json"',children:'{\n    "privileges": [\n        {\n            "privilege": "none",\n            "includes": []\n        }\n    ],\n\n    "roles": [],\n\n    "permissions": {\n        "allowed": [{\n            "applyTo": "ds",\n            "type": "datastore",\n            "read": [\n                "none"\n            ],\n            "create": [\n                "none"\n            ],\n            "update": [\n                "none"\n            ],\n            "drop": [\n                "none"\n            ],\n            "execute": [\n                "none"\n            ],\n            "describe": [\n                "none"\n            ],\n            "promote": [\n                "none"\n            ]\n        },\n        {\n            "applyTo": "ds.loginAs",\n            "type": "method",\n            "execute": [\n                    "guest"\n                ]\n        },\n        {\n            "applyTo": "ds.hasPrivilege",\n            "type": "method",\n            "execute": [\n                    "guest"\n                ]\n        },\n        {\n            "applyTo": "ds.clearPrivileges",\n            "type": "method",\n            "execute": [\n                    "guest"\n                ]\n        },\n        {\n            "applyTo": "ds.isGuest",\n            "type": "method",\n            "execute": [\n                    "guest"\n                ]\n        },\n        {\n            "applyTo": "ds.getPrivileges",\n            "type": "method",\n            "execute": [\n                    "guest"\n                ]\n        },\n        {\n            "applyTo": "ds.setAllPrivileges",\n            "type": "method",\n            "execute": [\n                "guest"\n            ]\n    }\n\n        ]\n    }\n}\n'})})]})}function u(e={}){let{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},524815:function(e,s,n){n.d(s,{Z:function(){return i}});let i=n.p+"assets/images/privileges-schema-d5a0ecd16f6a60f344dbb09d12f2e271.png"},250065:function(e,s,n){n.d(s,{Z:function(){return a},a:function(){return d}});var i=n(667294);let r={},o=i.createContext(r);function d(e){let s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);