"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["84587"],{528295:function(e,s,o){o.r(s),o.d(s,{metadata:()=>a,contentTitle:()=>i,default:()=>m,assets:()=>d,toc:()=>c,frontMatter:()=>r});var a=JSON.parse('{"id":"ORDA/datastores","title":"Datastores remotos","description":"Um datastore remoto \xe9 uma refer\xeancia, em uma aplica\xe7\xe3o 4D local (4D ou 4D Server), a um [datastore] (dsMapping.md#datastore) armazenado em outra aplica\xe7\xe3o 4D.","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R7/ORDA/remoteDatastores.md","sourceDirName":"ORDA","slug":"/ORDA/datastores","permalink":"/docs/pt/ORDA/datastores","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20ORDA%2FremoteDatastores.md%20(20-R7)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R7","frontMatter":{"id":"datastores","title":"Datastores remotos"},"sidebar":"docs","previous":{"title":"Usando o selo global","permalink":"/docs/pt/ORDA/global-stamp"},"next":{"title":"Privil\xe9gios","permalink":"/docs/pt/ORDA/privileges"}}'),n=o("785893"),t=o("250065");let r={id:"datastores",title:"Datastores remotos"},i=void 0,d={},c=[{value:"Usando sess\xf5es web",id:"usando-sess\xf5es-web",level:2},{value:"Visionamento de sess\xf5es",id:"visionamento-de-sess\xf5es",level:3},{value:"Fechamento das sess\xf5es",id:"fechamento-das-sess\xf5es",level:2},{value:"Bloqueio e transac\xe7\xf5es",id:"bloqueio-e-transac\xe7\xf5es",level:2}];function l(e){let s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["Um ",(0,n.jsx)(s.strong,{children:"datastore remoto"})," \xe9 uma refer\xeancia, em uma aplica\xe7\xe3o 4D local (4D ou 4D Server), a um [datastore] (dsMapping.md#datastore) armazenado em outra aplica\xe7\xe3o 4D."]}),"\n",(0,n.jsxs)(s.p,{children:["The local 4D application connects to and references the remote datastore through a call to the ",(0,n.jsx)(s.a,{href:"/docs/pt/commands/open-datastore",children:(0,n.jsx)(s.code,{children:"Open datastore"})})," command."]}),"\n",(0,n.jsxs)(s.p,{children:["On the remote machine, 4D opens a ",(0,n.jsx)(s.a,{href:"/docs/pt/WebServer/sessions",children:"session"})," to handle requests from the application that call ",(0,n.jsx)(s.code,{children:"Open datastore"}),". Requests internally use the ",(0,n.jsx)(s.a,{href:"/docs/pt/REST/gettingStarted",children:"REST API"}),", which means that they might require ",(0,n.jsx)(s.a,{href:"/docs/pt/REST/authUsers",children:"available licenses"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"usando-sess\xf5es-web",children:"Usando sess\xf5es web"}),"\n",(0,n.jsxs)(s.p,{children:["When you work with a remote datastore referenced through calls to the ",(0,n.jsx)(s.a,{href:"/docs/pt/commands/open-datastore",children:(0,n.jsx)(s.code,{children:"Open datastore"})})," command, the connection with the requesting processes is handled via ",(0,n.jsx)(s.a,{href:"/docs/pt/WebServer/sessions",children:"web sessions"})," on the remote machine."]}),"\n",(0,n.jsxs)(s.p,{children:["The web session created on the remote datastore is identified using a internal session ID which is associated to the ",(0,n.jsx)(s.code,{children:"localID"})," on the 4D application side. Essa sess\xe3o gerencia automaticamente o acesso a dados, sele\xe7\xf5es de entidades ou entidades."]}),"\n",(0,n.jsxs)(s.p,{children:["El ",(0,n.jsx)(s.code,{children:"localID"})," es local a la m\xe1quina que se conecta al datastore remoto, lo que significa:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Si otros procesos de la misma aplicaci\xf3n necesitan acceder al mismo datastore remoto, pueden utilizar el mismo ",(0,n.jsx)(s.code,{children:"localID"})," y, de este modo, compartir la misma sesi\xf3n."]}),"\n",(0,n.jsxs)(s.li,{children:["Si otro proceso de la misma aplicaci\xf3n abre el mismo datastore remoto pero con otro ",(0,n.jsx)(s.code,{children:"localID"}),", crear\xe1 una nueva sesi\xf3n en el datastore remoto."]}),"\n",(0,n.jsxs)(s.li,{children:["Si otra m\xe1quina se conecta al mismo datastore remoto con el mismo ",(0,n.jsx)(s.code,{children:"localID"}),", crear\xe1 otra sesi\xf3n con otra cookie."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Estes princ\xedpios s\xe3o ilustrados nos gr\xe1ficos seguintes:"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{src:o(657805).Z+"",width:"962",height:"719"})}),"\n",(0,n.jsx)(s.h3,{id:"visionamento-de-sess\xf5es",children:"Visionamento de sess\xf5es"}),"\n",(0,n.jsx)(s.p,{children:"Os processos que gerenciam sess\xf5es para acesso ao armazenamento de dados s\xe3o mostrados na janela de administra\xe7\xe3o do 4D Server:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:'nombre: "REST Handler: <process name>"'}),"\n",(0,n.jsx)(s.li,{children:"type: type Worker Server HTTP"}),"\n",(0,n.jsxs)(s.li,{children:["sesi\xf3n: el nombre de la sesi\xf3n es el nombre de usuario que se pasa al comando ",(0,n.jsx)(s.code,{children:"Open datastore"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"No exemplo a seguir, dois processos est\xe3o sendo executados na mesma sess\xe3o:"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{src:o(99810).Z+"",width:"1402",height:"708"})}),"\n",(0,n.jsx)(s.h2,{id:"fechamento-das-sess\xf5es",children:"Fechamento das sess\xf5es"}),"\n",(0,n.jsxs)(s.p,{children:["Conforme descrito no ",(0,n.jsx)(s.a,{href:"/docs/pt/WebServer/sessions#session-lifetime",children:"tempo de vida da sess\xe3o"}),", uma sess\xe3o web \xe9 fechada automaticamente por 4D quando n\xe3o h\xe1 atividade durante seu per\xedodo limite. El tiempo de espera por defecto es de 60 mn, pero este valor puede modificarse utilizando el par\xe1metro ",(0,n.jsx)(s.em,{children:"connectionInfo"})," del comando ",(0,n.jsx)(s.code,{children:"Open datastore"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"Se uma solicita\xe7\xe3o for enviada ao reposit\xf3rio de dados remoto depois que a sess\xe3o tiver sido fechada, ela ser\xe1 recriada automaticamente, se poss\xedvel (licen\xe7a dispon\xedvel, servidor n\xe3o parado...). However, keep in mind that the context of the session regarding locks and transactions is lost (see below)."}),"\n",(0,n.jsx)(s.h2,{id:"bloqueio-e-transac\xe7\xf5es",children:"Bloqueio e transac\xe7\xf5es"}),"\n",(0,n.jsx)(s.p,{children:"Os recursos do ORDA relacionados ao bloqueio de entidades e \xe0 transa\xe7\xe3o s\xe3o gerenciados no n\xedvel do processo em reposit\xf3rios de dados remotos, assim como no modo cliente/servidor do ORDA:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Si un proceso bloquea una entidad de un datastores remoto, la entidad se bloquea para todos los otros procesos, incluso cuando estos procesos comparten la misma sesi\xf3n (ver ",(0,n.jsx)(s.a,{href:"/docs/pt/ORDA/entities#entity-locking",children:"Bloqueo de entidades"}),"). Se v\xe1rias entidades que apontam para um mesmo registro tiverem sido bloqueadas em um processo, todas elas dever\xe3o ser desbloqueadas no processo para remover o bloqueio. Se um bloqueio tiver sido colocado em uma entidade, o bloqueio ser\xe1 removido quando n\xe3o houver mais refer\xeancia a essa entidade na mem\xf3ria."]}),"\n",(0,n.jsxs)(s.li,{children:["Las transacciones pueden iniciarse, validarse o cancelarse por separado en cada almac\xe9n de datos remoto mediante las funciones ",(0,n.jsx)(s.code,{children:"dataStore.startTransaction()"}),", ",(0,n.jsx)(s.code,{children:"dataStore.cancelTransaction()"})," y ",(0,n.jsx)(s.code,{children:"dataStore.validateTransaction()"}),". N\xe3o t\xeam impacto noutros datastores."]}),"\n",(0,n.jsxs)(s.li,{children:["Classic 4D language commands (",(0,n.jsx)(s.a,{href:"/docs/pt/commands/start-transaction",children:(0,n.jsx)(s.code,{children:"START TRANSACTION"})}),", ",(0,n.jsx)(s.a,{href:"/docs/pt/commands/validate-transaction",children:(0,n.jsx)(s.code,{children:"VALIDATE TRANSACTION"})}),", ",(0,n.jsx)(s.a,{href:"/docs/pt/commands/cancel-transaction",children:(0,n.jsx)(s.code,{children:"CANCEL TRANSACTION"})}),") only apply to the main datastore (returned by ",(0,n.jsx)(s.code,{children:"ds"}),").\nSe uma entidade de um datastore remoto \xe9 segurada por uma transa\xe7\xe3o em um processo, outros processos n\xe3o podem atualiz\xe1-lo, mesmo que esses processos compartilhem a mesma sess\xe3o."]}),"\n",(0,n.jsxs)(s.li,{children:["Os bloqueios nas entidades s\xe3o removidos e as transa\xe7\xf5es s\xe3o anuladas:\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"quando o processo \xe9 eliminado."}),"\n",(0,n.jsx)(s.li,{children:"quando a sess\xe3o \xe9 encerrada no servidor"}),"\n",(0,n.jsx)(s.li,{children:"quando a sess\xe3o \xe9 encerrada na janela de administra\xe7\xe3o do servidor."}),"\n"]}),"\n"]}),"\n"]})]})}function m(e={}){let{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},99810:function(e,s,o){o.d(s,{Z:function(){return a}});let a=o.p+"assets/images/sessionAdmin-fb7129cb6aaab939e9e8b20cb43bce8f.png"},657805:function(e,s,o){o.d(s,{Z:function(){return a}});let a=o.p+"assets/images/sessions-69775ca2d11bfdbc289284efe41c0b59.png"},250065:function(e,s,o){o.d(s,{Z:function(){return i},a:function(){return r}});var a=o(667294);let n={},t=a.createContext(n);function r(e){let s=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),a.createElement(t.Provider,{value:s},e.children)}}}]);