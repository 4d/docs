"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["16331"],{864736:function(e,o,s){s.r(o),s.d(o,{default:()=>m,frontMatter:()=>d,metadata:()=>n,assets:()=>a,toc:()=>c,contentTitle:()=>i});var n=JSON.parse('{"id":"commands-legacy/on-event-call","title":"ON EVENT CALL","description":"ON EVENT CALL ( metodoEvento {; nomeProcesso} )","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R9/commands-legacy/on-event-call.md","sourceDirName":"commands-legacy","slug":"/commands/on-event-call","permalink":"/docs/pt/commands/on-event-call","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fon-event-call.md%20(20-R9)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R9","frontMatter":{"id":"on-event-call","title":"ON EVENT CALL","slug":"/commands/on-event-call","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"ON ERR CALL","permalink":"/docs/pt/commands/on-err-call"},"next":{"title":"SET ASSERT ENABLED","permalink":"/docs/pt/commands/set-assert-enabled"}}'),r=s("785893"),t=s("250065");let d={id:"on-event-call",title:"ON EVENT CALL",slug:"/commands/on-event-call",displayed_sidebar:"docs"},i=void 0,a={},c=[{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:2},{value:"Exemplo",id:"exemplo",level:2},{value:"Ver tamb\xe9m",id:"ver-tamb\xe9m",level:2},{value:"Propriedades",id:"propriedades",level:2}];function l(e){let o={a:"a",br:"br",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"ON EVENT CALL"})," ( ",(0,r.jsx)(o.em,{children:"metodoEvento"})," {; ",(0,r.jsx)(o.em,{children:"nomeProcesso"}),"} )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:"Par\xe2metro"}),(0,r.jsx)(o.th,{children:"Tipo"}),(0,r.jsx)(o.th,{}),(0,r.jsx)(o.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"metodoEvento"}),(0,r.jsx)(o.td,{children:"Text"}),(0,r.jsx)(o.td,{children:"\u2192"}),(0,r.jsx)(o.td,{children:"M\xe9todo evento a ser invocado, ou cadeia vazia para parar eventos interceptados"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"nomeProcesso"}),(0,r.jsx)(o.td,{children:"Text"}),(0,r.jsx)(o.td,{children:"\u2192"}),(0,r.jsx)(o.td,{children:"Nome do processo"})]})]})]}),"\n",(0,r.jsx)(o.h2,{id:"descri\xe7\xe3o",children:"Descri\xe7\xe3o"}),"\n",(0,r.jsxs)(o.p,{children:["O comando ",(0,r.jsx)(o.strong,{children:"ON EVENT CALL"})," instala o m\xe9todo, cujo nome se passa em ",(0,r.jsx)(o.em,{children:"metodoEvento"}),", como m\xe9todo de gest\xe3o de eventos."]}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Dica:"})," este comando necessita um n\xedvel de conhecimento avan\xe7ado em programa\xe7\xe3o. Geralmente, n\xe3o necessita utilizar",(0,r.jsx)(o.strong,{children:"ON EVENT CALL"})," para trabalhar com eventos. Quando utiliza formul\xe1rios, 4D administra os eventos e os envia aos objetos e formul\xe1rios apropriados."]}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Dica:"})," comandos tais como ",(0,r.jsx)(o.a,{href:"/docs/pt/commands/mouse-position",children:"MOUSE POSITION"}),", ",(0,r.jsx)(o.a,{href:"/docs/pt/commands/shift-down",children:"Shift down"}),", etc., para obter informa\xe7\xe3o sobre eventos. Estes comandos podem chamar-se desde os m\xe9todos de objeto para obter a informa\xe7\xe3o que necessita sobre um evento envolvido com um objeto. Utiliz\xe1-los lhe economiza a escritura de um algoritmo baseado em uma estrutura de tipo ",(0,r.jsx)(o.strong,{children:"ON EVENT CALL"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:["O alcance deste comando \xe9 a sess\xe3o de trabalho atual. Automaticamente, o m\xe9todo se executa em um processo local separado. S\xf3 pode ter um m\xe9todo de gest\xe3o de eventos a la vez. Para deter um m\xe9todo de gest\xe3o de eventos, chame novamente ",(0,r.jsx)(o.strong,{children:"ON EVENT CALL"})," e passe uma cadeia vazia em ",(0,r.jsx)(o.em,{children:"metodoEvento"}),"."]}),"\n",(0,r.jsx)(o.p,{children:"Como o m\xe9todo de gest\xe3o de eventos \xe9 executado em um processo separado, est\xe1 ativo constantemente, inclusive se nenhum m\xe9todo de 4D est\xe1 sendo executado. Depois da instala\xe7\xe3o, 4D chama ao m\xe9todo de gest\xe3o de eventos cada vez que ocorre um evento. Um evento pode ser um clique com o mouse ou pressionar uma tecla."}),"\n",(0,r.jsxs)(o.p,{children:["O par\xe2metro opcional ",(0,r.jsx)(o.em,{children:"nomeProcesso"})," nomeia ao processo criado pelo comando ",(0,r.jsx)(o.strong,{children:"ON EVENT CALL"}),". Se ",(0,r.jsx)(o.em,{children:"nomeProcesso"})," come\xe7a pelo s\xedmbolo dinheiro (",(0,r.jsx)(o.em,{children:"$"}),"), come\xe7a um processo local, o qual geralmente \xe9 o que voc\xea quer. Se omitir o par\xe2metro ",(0,r.jsx)(o.em,{children:"nomeProcesso"}),", 4D cria automaticamente um processo local chamado ",(0,r.jsx)(o.em,{children:"$Event Manager"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Advert\xeancia:"})," seja muito cuidadoso com o que escreve em um m\xe9todo de gest\xe3o de eventos. NAO chame comandos que gerem eventos, do contr\xe1rio ser\xe1 extremamente dif\xedcil sair da execu\xe7\xe3o do m\xe9todo de gest\xe3o de eventos. A combina\xe7\xe3o de teclas Ctrl+Shift+Retrocesso (em Windows) ou comando-Shift-Op\xe7\xe3o-Control-Retrocesso (em Macintosh) converte o processo de evento em um processo normal. Isto significa que o m\xe9todo n\xe3o ser\xe1 passado automaticamente a todos os eventos que ocorram. Poderia utilizar esta t\xe9cnica para recuperar um m\xe9todo de gest\xe3o de eventos incontrol\xe1vel (por exemplo, um que tenha eventos que disparem bugs)."]}),"\n",(0,r.jsxs)(o.p,{children:["No m\xe9todo de gest\xe3o de eventos, pode ler as seguintes vari\xe1veis sistema ",(0,r.jsx)(o.em,{children:"MouseDown"}),", ",(0,r.jsx)(o.em,{children:"KeyCode"}),", ",(0,r.jsx)(o.em,{children:"Modifiers"}),", ",(0,r.jsx)(o.em,{children:"MouseX"}),", ",(0,r.jsx)(o.em,{children:"MouseY"})," e ",(0,r.jsx)(o.em,{children:"MouseProc"}),". Note que estas vari\xe1veis s\xe3o vari\xe1veis processo. Seu alcance \xe9 portanto o processo de gest\xe3o de eventos. Copie-as nas vari\xe1veis interprocesso se deseja que seus valores estejam dispon\xedveis em outro processo."]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["A vari\xe1vel sistema ",(0,r.jsx)(o.em,{children:"MouseDown"})," toma o valor 1 se o evento \xe9 um clique do mouse e 0 se n\xe3o."]}),"\n",(0,r.jsxs)(o.li,{children:["A vari\xe1vel sistema ",(0,r.jsx)(o.em,{children:"KeyCode"})," cont\xe9m o c\xf3digo do caractere digitado no teclado ou o c\xf3digo de uma tecla de fun\xe7\xe3o. Consulte a se\xe7\xe3o ",(0,r.jsx)(o.em,{children:"C\xf3digos Unicode"})," (e suas subse\xe7\xf5es) e ",(0,r.jsx)(o.a,{href:"/docs/pt/commands/export-text",children:"EXPORT TEXT"})," como tamb\xe9m na se\xe7\xe3o ",(0,r.jsx)(o.em,{children:"C\xf3digos de Fun\xe7\xe3o de teclado"}),".4D oferece constantes predefinidas para os principais ",(0,r.jsx)(o.em,{children:"C\xf3digos Unicode"})," e teclas de fun\xe7\xf5es. Na janela do explorador, procure os temas destas constantes."]}),"\n",(0,r.jsxs)(o.li,{children:["A vari\xe1vel sistema ",(0,r.jsx)(o.em,{children:"Modifiers"})," cont\xe9m o valor modificador, indica se alguma das seguintes teclas foram pressionadas quando o evento ocorreu:"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:(0,r.jsx)(o.strong,{children:"Plataforma"})}),(0,r.jsx)(o.th,{children:(0,r.jsx)(o.strong,{children:"Modificadores"})})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Windows"}),(0,r.jsx)(o.td,{children:"Mai\xfas, Bloqueio de mai\xfasculas, Alt, Ctrl, Bot\xe3o direito do mouse"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Macintosh"}),(0,r.jsx)(o.td,{children:"Mai\xfas, Bloqueio de mai\xfasculas, Op\xe7\xe3o, Comando, Control"})]})]})]}),"\n",(0,r.jsxs)(o.p,{children:["As teclas modificadoras n\xe3o geram um evento; tamb\xe9m deve pressionar outra tecla ou o bot\xe3o do mouse. A vari\xe1vel ",(0,r.jsx)(o.em,{children:"Modifiers"})," \xe9 uma vari\xe1vel de tipo Inteiro longo de 4 bytes, que deve ser considerada como um array de 32 bits. 4D oferece constantes predefinidas que expressam posi\xe7\xf5es de bit ou m\xe1scaras de bit para provar o bit correspondente a cada tecla modificadora. Por exemplo, para detectar se a tecla Shift foi pressionada para o evento, pode escrever:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:(0,r.jsx)(o.strong,{children:"Modificador"})}),(0,r.jsx)(o.th,{children:(0,r.jsx)(o.strong,{children:"Constante"})})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Mai\xfascula"}),(0,r.jsx)(o.td,{children:"Shift key bit / Shift key mask"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Bloqueio de mai\xfasculas"}),(0,r.jsx)(o.td,{children:"Caps lock key bit / Caps lock key mask"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Alt (tamb\xe9m chamado Op\xe7\xe3o em macOS)"}),(0,r.jsx)(o.td,{children:"Option key bit / Option key mask"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Ctrl em Windows"}),(0,r.jsx)(o.td,{children:"Command key bit / Command key mask"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Ctrl em macOS"}),(0,r.jsx)(o.td,{children:"Control key bit / Control key mask"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Comando em macOS"}),(0,r.jsx)(o.td,{children:"Command key bit / Command key mask"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Clic direito"}),(0,r.jsx)(o.td,{children:"Control key bit / Control key mask"})]})]})]}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["as vari\xe1veis sistema ",(0,r.jsx)(o.em,{children:"MouseX"})," e ",(0,r.jsx)(o.em,{children:"MouseY"})," cont\xeam as posi\xe7\xf5es horizontal e vertical do clique do mouse, expressas no sistema de coordenadas locais da janela onde o clique foi produzido. A esquina superior esquerda da janela \xe9 a posi\xe7\xe3o 0,0. Estas vari\xe1veis s\xe3o significativas s\xf3 quando h\xe1 um clique do mouse."]}),"\n",(0,r.jsxs)(o.li,{children:["a vari\xe1vel sistema ",(0,r.jsx)(o.em,{children:"MouseProc"})," cont\xe9m o n\xfamero de refer\xeancia do processo no qual ocorreu o evento (clique do mouse)."]}),"\n"]}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Importante:"})," as vari\xe1veis sistema ",(0,r.jsx)(o.em,{children:"MouseDown"}),", ",(0,r.jsx)(o.em,{children:"KeyCode"}),", ",(0,r.jsx)(o.em,{children:"Modifiers"}),", ",(0,r.jsx)(o.em,{children:"MouseX"}),", ",(0,r.jsx)(o.em,{children:"MouseY"}),", e ",(0,r.jsx)(o.em,{children:"MouseProc"})," s\xf3 contem valores significativos em um m\xe9todo de gest\xe3o de eventos instalado com ",(0,r.jsx)(o.strong,{children:"ON EVENT CALL"}),"."]}),"\n",(0,r.jsx)(o.h2,{id:"exemplo",children:"Exemplo"}),"\n",(0,r.jsxs)(o.p,{children:["Este exemplo cancela a impress\xe3o se o usu\xe1rio pressiona as teclas Ctrl+ponto. Primeiro, o m\xe9todo de gest\xe3o de eventos \xe9 instalada. Depois aparece uma mensagem, anunciando que o usu\xe1rio pode cancelar a impress\xe3o. Se a vari\xe1vel interprocesso ",(0,r.jsx)(o.em,{children:"vbWeStop"})," \xe9 igual a True no m\xe9todo de gest\xe3o de eventos, uma caixa de di\xe1logo de alerta aparece para mostrar ao usu\xe1rio o n\xfamero de registros que foram impressos. Depois o m\xe9todo de gest\xe3o de eventos \xe9 desinstalado:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:'\xa0PAGE SETUP\n\xa0If(OK=1)\n\xa0\xa0\xa0\xa0\u25CAvbWeStop:=False\n\xa0\xa0\xa0\xa0ON EVENT CALL("GESTAO DE EVENTOS")\xa0// Instala o m\xe9todo de gest\xe3o de eventos\n\xa0\xa0\xa0\xa0ALL RECORDS([Pessoas])\n\xa0\xa0\xa0\xa0MESSAGE("Para interromper a impress\xe3o pressione Ctrl+Ponto.")\n\xa0\xa0\xa0\xa0$vlNbRegistros:=Records in selection([People])\n\xa0\xa0\xa0\xa0For($vlRegistro;1;$vlNbRegistros)\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0If(\u25CAvbWeStop)\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0ALERT("Printing cancelled at record "+String($vlRegistro)+" of "+String($vlNbRegistros))\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0$vlRegistro:=$vlNbRegistros+1\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0Else\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Print form([Pessoas];"Relat\xf3rio especial")\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0End if\n\xa0\xa0\xa0\xa0End for\n\xa0\xa0\xa0\xa0PAGE BREAK\n\xa0\xa0\xa0\xa0ON EVENT CALL("")\xa0// Desinstala o m\xe9todo de gest\xe3o de eventos\n\xa0End if\n'})}),"\n",(0,r.jsxs)(o.p,{children:["Se for pressionado a combina\xe7\xe3o Ctrl+ponto, o m\xe9todo de gest\xe3o de eventos da a ",(0,r.jsx)(o.em,{children:"vbWeStop"})," o valor True:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-4d",children:'\xa0\xa0// M\xe9todo de projeto GESTAO DE EVENTOS\n\xa0If((Modifiers?? Command key bit)\xa0&\xa0(KeyCode=Period))\n\xa0\xa0\xa0\xa0CONFIRM("Tem certeza?")\n\xa0\xa0\xa0\xa0If(OK=1)\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\u25CAvbWeStop:=True\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0FILTER EVENT\xa0// NAO esque\xe7a este chamado; do contr\xe1rio 4D tamb\xe9m obter\xe1 este evento\n\xa0\xa0\xa0\xa0End if\n\xa0End if\n'})}),"\n",(0,r.jsxs)(o.p,{children:["Note que este exemplo utiliza ON EVENT CALL porque realiza um relat\xf3rio especial de impress\xe3o utilizando os comandos ",(0,r.jsx)(o.em,{children:"PAGE SETUP"}),", ",(0,r.jsx)(o.a,{href:"/docs/pt/commands/print-form",title:"Print form",children:"Print form"})," e ",(0,r.jsx)(o.a,{href:"/docs/pt/commands/page-break",title:"PAGE BREAK",children:"PAGE BREAK"})," em uma estrutura de tipo loop .",(0,r.jsx)(o.br,{}),"\nSe um relat\xf3rio for impresso utilizando ",(0,r.jsx)(o.a,{href:"/docs/pt/commands/print-selection",title:"PRINT SELECTION",children:"PRINT SELECTION"}),", NAO necessita administrar os eventos que permitem ao usu\xe1rio interromper a impress\xe3o; ",(0,r.jsx)(o.a,{href:"/docs/pt/commands/print-selection",title:"PRINT SELECTION",children:"PRINT SELECTION"})," faz isso por voc\xea."]}),"\n",(0,r.jsx)(o.h2,{id:"ver-tamb\xe9m",children:"Ver tamb\xe9m"}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.a,{href:"/docs/pt/commands/filter-event",children:"FILTER EVENT"}),(0,r.jsx)(o.br,{}),"\n",(0,r.jsx)(o.a,{href:"/docs/pt/commands/mouse-position",children:"MOUSE POSITION"}),(0,r.jsx)(o.br,{}),"\n",(0,r.jsx)(o.a,{href:"/docs/pt/commands/method-called-on-event",children:"Method called on event"}),(0,r.jsx)(o.br,{}),"\n",(0,r.jsx)(o.a,{href:"/docs/pt/commands/shift-down",children:"Shift down"})]}),"\n",(0,r.jsx)(o.h2,{id:"propriedades",children:"Propriedades"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{}),(0,r.jsx)(o.th,{})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"N\xfamero do comando"}),(0,r.jsx)(o.td,{children:"190"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Thread-seguro"}),(0,r.jsx)(o.td,{children:"\u2717"})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Proibido no servidor"}),(0,r.jsx)(o.td,{})]})]})]})]})}function m(e={}){let{wrapper:o}={...(0,t.a)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},250065:function(e,o,s){s.d(o,{Z:function(){return i},a:function(){return d}});var n=s(667294);let r={},t=n.createContext(r);function d(e){let o=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),n.createElement(t.Provider,{value:o},e.children)}}}]);