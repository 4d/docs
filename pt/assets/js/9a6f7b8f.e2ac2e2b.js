"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[19499],{603905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>u});var o=t(667294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,o,n=function(e,a){if(null==e)return{};var t,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var d=o.createContext({}),l=function(e){var a=o.useContext(d),t=a;return e&&(t="function"==typeof e?e(a):s(s({},a),e)),t},p=function(e){var a=l(e.components);return o.createElement(d.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},c=o.forwardRef((function(e,a){var t=e.components,n=e.mdxType,r=e.originalType,d=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=l(t),u=n,g=c["".concat(d,".").concat(u)]||c[u]||m[u]||r;return t?o.createElement(g,s(s({ref:a},p),{},{components:t})):o.createElement(g,s({ref:a},p))}));function u(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=t.length,s=new Array(r);s[0]=c;var i={};for(var d in a)hasOwnProperty.call(a,d)&&(i[d]=a[d]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var l=2;l<r;l++)s[l]=t[l];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}c.displayName="MDXCreateElement"},649611:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>s,metadata:()=>d,toc:()=>p});t(667294);var o=t(603905);function n(){return n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},n.apply(this,arguments)}function r(e,a){if(null==e)return{};var t,o,n=function(e,a){if(null==e)return{};var t,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}const s={id:"templates",title:"Template pages"},i=void 0,d={unversionedId:"WebServer/templates",id:"version-20-R4/WebServer/templates",title:"Template pages",description:"O servidor Web 4D permite que voc\xea use p\xe1ginas de modelo HTML contendo tags, ou seja, uma mistura de c\xf3digo HTML est\xe1tico e refer\xeancias 4D adicionadas por meio de tags de transforma\xe7\xe3o como 4DTEXT, 4DIF, ou 4DINCLUDE. Essas tags geralmente s\xe3o inseridas como coment\xe1rios do tipo HTML (``) no c\xf3digo-fonte HTML.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R4/WebServer/templates.md",sourceDirName:"WebServer",slug:"/WebServer/templates",permalink:"/docs/pt/WebServer/templates",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20WebServer%2Ftemplates.md%20(20-R4)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R4",frontMatter:{id:"templates",title:"Template pages"},sidebar:"docs",previous:{title:"Web Development",permalink:"/docs/pt/WebServer/gettingStarted"},next:{title:"Processing HTTP requests",permalink:"/docs/pt/WebServer/httpRequests"}},l={},p=[{value:"Etiquetas para modelos",id:"etiquetas-para-modelos",level:2},{value:"An\xe1lise de etiquetas",id:"an\xe1lise-de-etiquetas",level:2},{value:"Aceder aos m\xe9todos 4D atrav\xe9s da Web",id:"aceder-aos-m\xe9todos-4d-atrav\xe9s-da-web",level:2},{value:"Preven\xe7\xe3o da inser\xe7\xe3o de c\xf3digo malicioso",id:"preven\xe7\xe3o-da-inser\xe7\xe3o-de-c\xf3digo-malicioso",level:2}],m={toc:p};function c(e){var{components:a}=e,t=r(e,["components"]);return(0,o.kt)("wrapper",n({},m,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"O servidor Web 4D permite que voc\xea use p\xe1ginas de modelo HTML contendo tags, ou seja, uma mistura de c\xf3digo HTML est\xe1tico e refer\xeancias 4D adicionadas por meio de ",(0,o.kt)("a",n({parentName:"p"},{href:"/docs/pt/Tags/"}),"tags de transforma\xe7\xe3o")," como 4DTEXT, 4DIF, ou 4DINCLUDE. Essas tags geralmente s\xe3o inseridas como coment\xe1rios do tipo HTML (",(0,o.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DTagName TagValue--\x3e"),") no c\xf3digo-fonte HTML."),(0,o.kt)("p",null,"Quando estas p\xe1ginas s\xe3o enviadas pelo servidor HTTP, elas s\xe3o analisadas e as tags que cont\xeam s\xe3o executadas e substitu\xeddas pelos dados resultantes. As p\xe1ginas recebidas pelos navegadores s\xe3o, portanto, uma combina\xe7\xe3o de elementos est\xe1ticos e valores provenientes do processamento 4D."),(0,o.kt)("p",null,"Por exemplo, se escrever numa p\xe1gina HTML:"),(0,o.kt)("pre",null,(0,o.kt)("code",n({parentName:"pre"},{className:"language-html"}),"<P>Welcome to \x3c!--#4DTEXT vtSiteName--\x3e!</P>\n")),(0,o.kt)("p",null,"O valor da vari\xe1vel 4D ",(0,o.kt)("em",{parentName:"p"},"vtSiteName")," ser\xe1 inserido na p\xe1gina HTML."),(0,o.kt)("h2",n({},{id:"etiquetas-para-modelos"}),"Etiquetas para modelos"),(0,o.kt)("p",null,"Est\xe3o dispon\xedveis as seguintes etiquetas 4D:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"4DTEXT, para inserir vari\xe1veis e express\xf5es 4D como texto,"),(0,o.kt)("li",{parentName:"ul"},"4DHTML, para inserir c\xf3digo HTML,"),(0,o.kt)("li",{parentName:"ul"},"4DEVAL, para avaliar qualquer express\xe3o 4D,"),(0,o.kt)("li",{parentName:"ul"},"4DSCRIPT, para executar um m\xe9todo 4D,"),(0,o.kt)("li",{parentName:"ul"},"4DINCLUDE, para incluir uma p\xe1gina dentro de outra,"),(0,o.kt)("li",{parentName:"ul"},"4DBASE, para modificar a pasta predefinida utilizada pela etiqueta 4DINCLUDE,"),(0,o.kt)("li",{parentName:"ul"},"4DCODE, para inserir o c\xf3digo 4D,"),(0,o.kt)("li",{parentName:"ul"},"4DIF, 4DELSE, 4DELSEIF e 4DENDIF, para inserir condi\xe7\xf5es no c\xf3digo HTML,"),(0,o.kt)("li",{parentName:"ul"},"4DLOOP e 4DENDLOOP, para criar loops no c\xf3digo HTML,"),(0,o.kt)("li",{parentName:"ul"},"4DEACH e 4DENDEACH, para fazer loop em cole\xe7\xf5es, sele\xe7\xf5es de entidades ou propriedades de objetos.")),(0,o.kt)("p",null,"Essas tags s\xe3o descritas na p\xe1gina ",(0,o.kt)("a",n({parentName:"p"},{href:"/docs/pt/Tags/"}),"Transformation Tags")," ."),(0,o.kt)("p",null,"\xc9 poss\xedvel combinar etiquetas. Por exemplo, \xe9 permitido o seguinte c\xf3digo HTML:"),(0,o.kt)("pre",null,(0,o.kt)("code",n({parentName:"pre"},{className:"language-html"}),"<HTML>\n...\n<BODY>\n\x3c!--#4DSCRIPT/PRE_PROCESS--\x3e   (Chamada de m\xe9todo)\n\x3c!--#4DIF (myvar=1)--\x3e   (Condi\xe7\xe3o if)\n   \x3c!--#4DINCLUDE banner1.html--\x3e   (Inser\xe7\xe3o de subp\xe1gina)\n\x3c!--#4DENDIF--\x3e   (End if)\n\x3c!--#4DIF (myvar=2)--\x3e\n\n   \x3c!--#4DINCLUDE banner2.html--\x3e\n\x3c!--#4DENDIF--\x3e\n\n\x3c!--#4DLOOP [TABLE]--\x3e   (loop na sele\xe7\xe3o atual)\n\x3c!--#4DIF ([TABLE]ValNum>10)--\x3e   (If [TABLE]ValNum>10)\n   \x3c!--#4DINCLUDE subpage.html--\x3e   (inser\xe7\xe3o de subp\xe1gina)\n\x3c!--#4DELSE--\x3e   (Else)\n   <B>Valor: \x3c!--#4DTEXT [TABLE]ValNum--\x3e</B><br/>\n      (Exibi\xe7\xe3o do campo)\n\x3c!--#4DENDIF--\x3e\n\x3c!--#4DENDLOOP--\x3e   (Fim para)\n</BODY>\n</HTML>\n")),(0,o.kt)("h2",n({},{id:"an\xe1lise-de-etiquetas"}),"An\xe1lise de etiquetas"),(0,o.kt)("p",null,'Por motivos de otimiza\xe7\xe3o, a an\xe1lise do c\xf3digo-fonte HTML n\xe3o \xe9 realizada pelo servidor da Web 4D quando as p\xe1ginas HTML s\xe3o chamadas usando URLs simples que s\xe3o sufixadas com ".HTML" ou ".HTM".'),(0,o.kt)("p",null,"Analisar o conte\xfado das p\xe1ginas de modelo enviadas pelo servidor da web 4D ocorre quando o ",(0,o.kt)("inlineCode",{parentName:"p"},"ARQUIVO ENVIAR")," (. tm, .html, .shtm, . html), ",(0,o.kt)("inlineCode",{parentName:"p"},"WEB SEND BLOB")," (text/html tipo BLOB) ou ",(0,o.kt)("inlineCode",{parentName:"p"},"WEB SEND TEXT"),' s\xe3o chamados, bem como ao enviar p\xe1ginas chamadas usando URLs. Nesse \xfaltimo caso, por motivos de otimiza\xe7\xe3o, as p\xe1ginas sufixadas com ".htm" e ".html" N\xc3O s\xe3o analisadas. Para "for\xe7ar" a an\xe1lise de p\xe1ginas HTML nesse caso, voc\xea deve adicionar o sufixo ".shtm" ou ".shtml" (por exemplo, ',(0,o.kt)("inlineCode",{parentName:"p"},"http://www.server.com/dir/page.shtm"),"). Um exemplo do uso desse tipo de p\xe1gina \xe9 dado na descri\xe7\xe3o do comando ",(0,o.kt)("inlineCode",{parentName:"p"},"WEB GET STATISTICS")," . As p\xe1ginas XML (.xml, .xsl) tamb\xe9m s\xe3o suportadas e sempre analisadas por 4D."),(0,o.kt)("p",null,"Voc\xea tamb\xe9m pode realizar a an\xe1lise fora do contexto da Web ao usar o comando ",(0,o.kt)("inlineCode",{parentName:"p"},"PROCESS 4D TAGS")," ."),(0,o.kt)("p",null,"Internamente, o analisador funciona com strings UTF-16, mas os dados a serem analisados podem ter sido codificados de maneira diferente. Quando as tags contiverem texto (por exemplo, ",(0,o.kt)("inlineCode",{parentName:"p"},"4DHTML"),"), a 4D converte os dados quando necess\xe1rio, dependendo da origem e das informa\xe7\xf5es dispon\xedveis (charset). Abaixo est\xe3o os casos em que 4D analisa as tags contidas nas p\xe1ginas HTML, bem como quaisquer convers\xf5es realizadas:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",n({parentName:"tr"},{align:null}),"A\xe7\xe3o / Comando"),(0,o.kt)("th",n({parentName:"tr"},{align:null}),"An\xe1lise de conte\xfado das p\xe1ginas enviadas"),(0,o.kt)("th",n({parentName:"tr"},{align:null}),"Suporte da sintaxe $(*)"),(0,o.kt)("th",n({parentName:"tr"},{align:null}),"Conjunto de caracteres utilizado para a an\xe1lise de etiquetas"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",n({parentName:"tr"},{align:null}),"P\xe1ginas chamadas atrav\xe9s de URLs"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),'X, exceto para p\xe1ginas com extens\xf5es ".htm" ou ".html'),(0,o.kt)("td",n({parentName:"tr"},{align:null}),'X, exceto para p\xe1ginas com extens\xf5es ".htm" ou ".html'),(0,o.kt)("td",n({parentName:"tr"},{align:null}),'Uso de charset passado como par\xe2metro do cabe\xe7alho "Content-Type" da p\xe1gina. Se n\xe3o houver nenhuma, procure uma etiqueta META-HTTP EQUIV com um conjunto de caracteres. Caso contr\xe1rio, utiliza\xe7\xe3o do conjunto de caracteres predefinido para o servidor HTTP')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",n({parentName:"tr"},{align:null}),(0,o.kt)("inlineCode",{parentName:"td"},"WEB SEND FILE")),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"X"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"-"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),'Uso de charset passado como par\xe2metro do cabe\xe7alho "Content-Type" da p\xe1gina. Se n\xe3o houver nenhuma, procure uma etiqueta META-HTTP EQUIV com um conjunto de caracteres. Caso contr\xe1rio, utiliza\xe7\xe3o do conjunto de caracteres predefinido para o servidor HTTP')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",n({parentName:"tr"},{align:null}),(0,o.kt)("inlineCode",{parentName:"td"},"WEB SEND TEXT")),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"X"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"-"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"N\xe3o \xe9 necess\xe1ria qualquer convers\xe3o")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",n({parentName:"tr"},{align:null}),(0,o.kt)("inlineCode",{parentName:"td"},"WEB SEND BLOB")),(0,o.kt)("td",n({parentName:"tr"},{align:null}),'X, se o BLOB for do tipo "text/html'),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"-"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),'Utiliza\xe7\xe3o do conjunto de caracteres definido no cabe\xe7alho "Content-Type" da resposta. Caso contr\xe1rio, utiliza\xe7\xe3o do conjunto de caracteres predefinido para o servidor HTTP')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",n({parentName:"tr"},{align:null}),"Inclus\xe3o pela etiqueta ",(0,o.kt)("inlineCode",{parentName:"td"},"\x3c!--#4DINCLUDE--\x3e")),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"X"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"X"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),'Uso de charset passado como par\xe2metro do cabe\xe7alho "Content-Type" da p\xe1gina. Se n\xe3o houver nenhuma, procure uma etiqueta META-HTTP EQUIV com um conjunto de caracteres. Caso contr\xe1rio, utiliza\xe7\xe3o do conjunto de caracteres predefinido para o servidor HTTP')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",n({parentName:"tr"},{align:null}),(0,o.kt)("inlineCode",{parentName:"td"},"PROCESS 4D TAGS")),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"X"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"X"),(0,o.kt)("td",n({parentName:"tr"},{align:null}),"Dados de texto: sem convers\xe3o. Dados BLOB: convers\xe3o autom\xe1tica do conjunto de caracteres Mac-Roman para compatibilidade")))),(0,o.kt)("p",null,"(*) A sintaxe alternativa baseada em $ est\xe1 dispon\xedvel para as tags 4DHTML, 4DTEXT e 4DEVAL."),(0,o.kt)("h2",n({},{id:"aceder-aos-m\xe9todos-4d-atrav\xe9s-da-web"}),"Aceder aos m\xe9todos 4D atrav\xe9s da Web"),(0,o.kt)("p",null,"Executando um m\xe9todo 4D com ",(0,o.kt)("inlineCode",{parentName:"p"},"4DEACH"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"4DELSEIF"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"4DEVAL"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"4DHTML"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"4DIF"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"4DLOOP"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"4DSCRIPT"),", ou ",(0,o.kt)("inlineCode",{parentName:"p"},"4DTEXT")," de uma solicita\xe7\xe3o da web est\xe1 sujeito ao ",(0,o.kt)("a",n({parentName:"p"},{href:"/docs/pt/WebServer/allowProject"}),"Dispon\xedvel atrav\xe9s de tags 4D e URLs (4DACTION. .)")," valor do atributo definido nas propriedades do m\xe9todo. Se o atributo n\xe3o estiver checado para o m\xe9todo, ele n\xe3o pode ser chamado de uma requisi\xe7\xe3o web."),(0,o.kt)("h2",n({},{id:"preven\xe7\xe3o-da-inser\xe7\xe3o-de-c\xf3digo-malicioso"}),"Preven\xe7\xe3o da inser\xe7\xe3o de c\xf3digo malicioso"),(0,o.kt)("p",null,"As tags 4D aceitam diferentes tipos de dados como par\xe2metros: texto, vari\xe1veis, m\xe9todos, nomes de comandos, etc. Quando esses dados forem fornecidos pelo seu pr\xf3prio c\xf3digo, n\xe3o h\xe1 risco de inser\xe7\xe3o de c\xf3digo malicioso pois voc\xea controla a entrada. No entanto, o c\xf3digo do seu banco de dados geralmente trabalha com dados que foram, em algum momento, introduzidos por meio de uma fonte externa (entrada do usu\xe1rio, importa\xe7\xe3o etc.)."),(0,o.kt)("p",null,"Neste caso, aconselh\xe1vel n\xe3o usar ",(0,o.kt)("strong",{parentName:"p"},"tags")," como ",(0,o.kt)("inlineCode",{parentName:"p"},"4DEVAL")," ou ",(0,o.kt)("inlineCode",{parentName:"p"},"4DSCRIPT"),", que avaliam os par\xe2metros, directamente com este tipo de dados."),(0,o.kt)("p",null,"Al\xe9m disso, de acordo com o princ\xedpio ",(0,o.kt)("a",n({parentName:"p"},{href:"/docs/pt/Tags/#recursive-processing"}),"de recurs\xe3o"),", o c\xf3digo malicioso pode incluir tags de transforma\xe7\xe3o. Nesse caso, \xe9 imperativo usar a tag ",(0,o.kt)("inlineCode",{parentName:"p"},"4DTEXT"),' . Imagine, por exemplo, um campo de formul\xe1rio da Web chamado "Nome", no qual os usu\xe1rios devem digitar seu nome. Esse nome \xe9 ent\xe3o exibido usando uma tag ',(0,o.kt)("inlineCode",{parentName:"p"},"\x3c!--#4DHTML vName--\x3e"),' na p\xe1gina. Se o texto do tipo "\\','" for inserido em vez do nome, a interpreta\xe7\xe3o dessa tag far\xe1 com que o aplicativo seja encerrado. Para evitar esse risco, voc\xea pode simplesmente usar a tag ',(0,o.kt)("inlineCode",{parentName:"p"},"4DTEXT"),' sistematicamente nesse caso. J\xe1 que essa tag escapa dos caracteres HTML especiais, qualquer c\xf3digo recursivo malicioso que possa ter sido inserido n\xe3o ser\xe1 reinterpretado. Para fazer refer\xeancia ao exemplo anterior, o campo "Name" conter\xe1, nesse caso, "',(0,o.kt)("inlineCode",{parentName:"p"},"&lt;!--#4DEVAL QUIT 4D--&gt;"),'", que n\xe3o ser\xe1 transformado.'))}c.isMDXComponent=!0}}]);