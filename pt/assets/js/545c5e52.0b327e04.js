"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[94089],{603905:(e,a,o)=>{o.d(a,{Zo:()=>m,kt:()=>u});var t=o(667294);function s(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function r(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,t)}return o}function n(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?r(Object(o),!0).forEach((function(a){s(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function i(e,a){if(null==e)return{};var o,t,s=function(e,a){if(null==e)return{};var o,t,s={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(s[o]=e[o]);return s}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(s[o]=e[o])}return s}var l=t.createContext({}),d=function(e){var a=t.useContext(l),o=a;return e&&(o="function"==typeof e?e(a):n(n({},a),e)),o},m=function(e){var a=d(e.components);return t.createElement(l.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},p=t.forwardRef((function(e,a){var o=e.components,s=e.mdxType,r=e.originalType,l=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),p=d(o),u=s,f=p["".concat(l,".").concat(u)]||p[u]||c[u]||r;return o?t.createElement(f,n(n({ref:a},m),{},{components:o})):t.createElement(f,n({ref:a},m))}));function u(e,a){var o=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var r=o.length,n=new Array(r);n[0]=p;var i={};for(var l in a)hasOwnProperty.call(a,l)&&(i[l]=a[l]);i.originalType=e,i.mdxType="string"==typeof e?e:s,n[1]=i;for(var d=2;d<r;d++)n[d]=o[d];return t.createElement.apply(null,n)}return t.createElement.apply(null,o)}p.displayName="MDXCreateElement"},6960:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>l,toc:()=>m});o(667294);var t=o(603905);function s(){return s=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},s.apply(this,arguments)}function r(e,a){if(null==e)return{};var o,t,s=function(e,a){if(null==e)return{};var o,t,s={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(s[o]=e[o]);return s}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(s[o]=e[o])}return s}const n={id:"datastores",title:"Utilizar um datastore remoto"},i=void 0,l={unversionedId:"ORDA/datastores",id:"version-19/ORDA/datastores",title:"Utilizar um datastore remoto",description:"Um datastore exposto em uma aplica\xe7\xe3o 4D pode ser acessado simultaneamente atrav\xe9s de diferentes clientes:",source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-19/ORDA/remoteDatastores.md",sourceDirName:"ORDA",slug:"/ORDA/datastores",permalink:"/docs/pt/19/ORDA/datastores",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20ORDA%2FremoteDatastores.md%20(19)&body=Please%20enter%20your%20comment%3A",tags:[],version:"19",frontMatter:{id:"datastores",title:"Utilizar um datastore remoto"},sidebar:"docs",previous:{title:"Trabalhar com dados",permalink:"/docs/pt/19/ORDA/entities"},next:{title:"Glossary",permalink:"/docs/pt/19/ORDA/glossary"}},d={},m=[{value:"Abertura de sess\xf5es",id:"abertura-de-sess\xf5es",level:2},{value:"Visionamento de sess\xf5es",id:"visionamento-de-sess\xf5es",level:2},{value:"Bloqueio e transac\xe7\xf5es",id:"bloqueio-e-transac\xe7\xf5es",level:2},{value:"Fechamento das sess\xf5es",id:"fechamento-das-sess\xf5es",level:2}],c={toc:m};function p(e){var{components:a}=e,n=r(e,["components"]);return(0,t.kt)("wrapper",s({},c,n,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"Um ",(0,t.kt)("a",s({parentName:"p"},{href:"/docs/pt/19/ORDA/dsmapping#datastore"}),"datastore")," exposto em uma aplica\xe7\xe3o 4D pode ser acessado simultaneamente atrav\xe9s de diferentes clientes:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"As aplica\xe7\xf5es 4D remotas usando ORDA para acessar o datastore principal com o comando ",(0,t.kt)("inlineCode",{parentName:"li"},"ds"),". Note que a aplica\xe7\xe3o 4D remota ainda pode acessar o banco de dados no modo cl\xe1ssico. Esses acessos s\xe3o tratados pelo ",(0,t.kt)("strong",{parentName:"li"},"servidor de aplica\xe7\xf5es 4D"),"."),(0,t.kt)("li",{parentName:"ul"},"Other 4D applications (4D remote, 4D Server) opening a session on the remote datastore through the ",(0,t.kt)("inlineCode",{parentName:"li"},"Open datastore")," command. Esses acessos s\xe3o transmitidos pelo servidor ",(0,t.kt)("strong",{parentName:"li"},"HTTP REST"),"."),(0,t.kt)("li",{parentName:"ul"},"As peti\xe7\xf5es 4D for iOS para atualizar aplica\xe7\xf5es iOS. Esses acessos s\xe3o transmitidos pelo ",(0,t.kt)("strong",{parentName:"li"},"servidor HTTP"),".")),(0,t.kt)("p",null,"Quando voc\xea trabalha com um datastore remoto referenciado por chamadas para o comando ",(0,t.kt)("inlineCode",{parentName:"p"},"Open datastore"),", a conex\xe3o entre os processos solicitantes e o datastore remoto \xe9 tratada por sess\xf5es."),(0,t.kt)("h2",s({},{id:"abertura-de-sess\xf5es"}),"Abertura de sess\xf5es"),(0,t.kt)("p",null,"When a 4D application (",(0,t.kt)("em",{parentName:"p"},"i.e.")," a process) opens an external datastore using the ",(0,t.kt)("inlineCode",{parentName:"p"},"Open datastore")," command, a session in created on the remote datastore to handle the connection. This session is identified using a internal session ID which is associated to the ",(0,t.kt)("inlineCode",{parentName:"p"},"localID")," on the 4D application. Essa sess\xe3o gerencia automaticamente o acesso a dados, sele\xe7\xf5es de entidades ou entidades."),(0,t.kt)("p",null,"O ",(0,t.kt)("inlineCode",{parentName:"p"},"localID")," \xe9 local para a m\xe1quina que conecta ao datastore remoto, o que significa:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Se outros processos da mesma aplica\xe7\xe3o precisam acessar o mesmo datastore remoto, eles podem usar o mesmo ",(0,t.kt)("inlineCode",{parentName:"li"},"localID")," e, assim, compartilhar a mesma sess\xe3o."),(0,t.kt)("li",{parentName:"ul"},"Se outro processo da mesma aplica\xe7\xe3o abrir o mesmo datastore remoto, mas com outro ",(0,t.kt)("inlineCode",{parentName:"li"},"localID"),", ele criar\xe1 uma sess\xe3o no datastore remoto."),(0,t.kt)("li",{parentName:"ul"},"Se outra m\xe1quina se conectar ao mesmo datastore remoto com o mesmo ",(0,t.kt)("inlineCode",{parentName:"li"},"localID"),", ela criar\xe1 outra sess\xe3o com outro cookie.")),(0,t.kt)("p",null,"Estes princ\xedpios s\xe3o ilustrados nos gr\xe1ficos seguintes:"),(0,t.kt)("p",null,(0,t.kt)("img",{src:o(112155).Z,width:"962",height:"719"})),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Para sess\xf5es abertas por solicita\xe7\xf5es REST, consulte ",(0,t.kt)("a",s({parentName:"p"},{href:"/docs/pt/19/REST/authUsers"}),"Usu\xe1rios e sess\xf5es"),".")),(0,t.kt)("h2",s({},{id:"visionamento-de-sess\xf5es"}),"Visionamento de sess\xf5es"),(0,t.kt)("p",null,"Os processos que gerenciam sess\xf5es para acesso ao armazenamento de dados s\xe3o mostrados na janela de administra\xe7\xe3o do 4D Server:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},'nome: "REST Handler: \\<process name',">",'"'),(0,t.kt)("li",{parentName:"ul"},"type: type Worker Server HTTP"),(0,t.kt)("li",{parentName:"ul"},"session: o nome da sess\xe3o \xe9 o nome de usu\xe1rio passado para o comando Open datastore.")),(0,t.kt)("p",null,"No exemplo a seguir, dois processos est\xe3o sendo executados na mesma sess\xe3o:"),(0,t.kt)("p",null,(0,t.kt)("img",{src:o(686356).Z,width:"1402",height:"708"})),(0,t.kt)("h2",s({},{id:"bloqueio-e-transac\xe7\xf5es"}),"Bloqueio e transac\xe7\xf5es"),(0,t.kt)("p",null,"Os recursos do ORDA relacionados ao bloqueio de entidades e \xe0 transa\xe7\xe3o s\xe3o gerenciados no n\xedvel do processo em reposit\xf3rios de dados remotos, assim como no modo cliente/servidor do ORDA:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Se um processo bloqueia uma entidade de um reposit\xf3rio de dados remoto, a entidade \xe9 bloqueada para todos os outros processos, mesmo quando esses processos compartilham a mesma sess\xe3o (consulte ",(0,t.kt)("a",s({parentName:"li"},{href:"/docs/pt/19/ORDA/entities#entity-locking"}),"Bloqueio de entidades"),"). Se v\xe1rias entidades que apontam para um mesmo registro tiverem sido bloqueadas em um processo, todas elas dever\xe3o ser desbloqueadas no processo para remover o bloqueio. Se um bloqueio tiver sido colocado em uma entidade, o bloqueio ser\xe1 removido quando n\xe3o houver mais refer\xeancia a essa entidade na mem\xf3ria."),(0,t.kt)("li",{parentName:"ul"},"As transa\xe7\xf5es podem ser iniciadas, validadas ou canceladas separadamente em cada datastore remoto usando as fun\xe7\xf5es ",(0,t.kt)("inlineCode",{parentName:"li"},"dataStore.startTransaction()"),", ",(0,t.kt)("inlineCode",{parentName:"li"},"dataStore.cancelTransaction()"),"e ",(0,t.kt)("inlineCode",{parentName:"li"},"dataStore.validateTransaction()")," . N\xe3o t\xeam impacto noutros datastores."),(0,t.kt)("li",{parentName:"ul"},"Os comandos cl\xe1ssicos da linguagem 4D (",(0,t.kt)("inlineCode",{parentName:"li"},"START TRANSACTION"),", ",(0,t.kt)("inlineCode",{parentName:"li"},"VALIDATE TRANSACTION"),", ",(0,t.kt)("inlineCode",{parentName:"li"},"CANCEL TRANSACTION"),") s\xf3 se aplicam ao datastore principal (retornado por ",(0,t.kt)("inlineCode",{parentName:"li"},"ds"),"). Se uma entidade de um datastore remoto \xe9 segurada por uma transa\xe7\xe3o em um processo, outros processos n\xe3o podem atualiz\xe1-lo, mesmo que esses processos compartilhem a mesma sess\xe3o."),(0,t.kt)("li",{parentName:"ul"},"Os bloqueios nas entidades s\xe3o removidos e as transa\xe7\xf5es s\xe3o anuladas:",(0,t.kt)("ul",{parentName:"li"},(0,t.kt)("li",{parentName:"ul"},"quando o processo \xe9 eliminado."),(0,t.kt)("li",{parentName:"ul"},"quando a sess\xe3o \xe9 encerrada no servidor"),(0,t.kt)("li",{parentName:"ul"},"quando a sess\xe3o \xe9 encerrada na janela de administra\xe7\xe3o do servidor.")))),(0,t.kt)("h2",s({},{id:"fechamento-das-sess\xf5es"}),"Fechamento das sess\xf5es"),(0,t.kt)("p",null,"Uma sess\xe3o \xe9 automaticamente encerrada por 4D quando n\xe3o h\xe1 atividade durante seu per\xedodo de tempo limite. The default timeout is 60 mn, but this value can be modified using the ",(0,t.kt)("inlineCode",{parentName:"p"},"connectionInfo")," parameter of the ",(0,t.kt)("inlineCode",{parentName:"p"},"Open datastore")," command."),(0,t.kt)("p",null,"Se uma solicita\xe7\xe3o for enviada ao reposit\xf3rio de dados remoto depois que a sess\xe3o tiver sido fechada, ela ser\xe1 recriada automaticamente, se poss\xedvel (licen\xe7a dispon\xedvel, servidor n\xe3o parado...). No entanto, lembre-se de que o contexto da sess\xe3o em rela\xe7\xe3o a bloqueios e transa\xe7\xf5es \xe9 perdido (veja acima)."))}p.isMDXComponent=!0},686356:(e,a,o)=>{o.d(a,{Z:()=>t});const t=o.p+"assets/images/sessionAdmin-fb7129cb6aaab939e9e8b20cb43bce8f.png"},112155:(e,a,o)=>{o.d(a,{Z:()=>t});const t=o.p+"assets/images/sessions-69775ca2d11bfdbc289284efe41c0b59.png"}}]);