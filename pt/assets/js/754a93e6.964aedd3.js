"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[85928],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),m=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(i.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),u=m(a),k=r,N=u["".concat(i,".").concat(k)]||u[k]||s[k]||l;return a?n.createElement(N,o(o({ref:t},p),{},{components:a})):n.createElement(N,o({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=u;var d={};for(var i in t)hasOwnProperty.call(t,i)&&(d[i]=t[i]);d.originalType=e,d.mdxType="string"==typeof e?e:r,o[1]=d;for(var m=2;m<l;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},42844:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});a(67294);var n=a(3905);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const o={id:"EntityClass",title:"Entity"},d=void 0,i={unversionedId:"API/EntityClass",id:"version-19-R8/API/EntityClass",title:"Entity",description:"Uma entidade  \xe9 uma inst\xe2ncia de um Dataclass, como um registro da tabela que corresponde ao dataclass em seu datasture associado. Cont\xe9m os mesmos atributos que o dataclass assim como os valores de dados e propriedades e fun\xe7\xf5es espec\xedficas.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-19-R8/API/EntityClass.md",sourceDirName:"API",slug:"/API/EntityClass",permalink:"/docs/pt/API/EntityClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FEntityClass.md%20(19-R8)&body=Please%20enter%20your%20comment%3A",tags:[],version:"19-R8",frontMatter:{id:"EntityClass",title:"Entity"},sidebar:"docs",previous:{title:"Email",permalink:"/docs/pt/API/EmailObjectClass"},next:{title:"EntitySelection",permalink:"/docs/pt/API/EntitySelectionClass"}},m={},p=[{value:"Resumo",id:"resumo",level:3},{value:".<em>attributeName</em>",id:"attributename",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:4},{value:"Exemplo",id:"exemplo",level:4},{value:".clone()",id:"clone",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-1",level:4},{value:"Exemplo",id:"exemplo-1",level:4},{value:".diff()",id:"diff",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-2",level:4},{value:"Exemplo 1",id:"exemplo-1-1",level:4},{value:"Exemplo 2",id:"exemplo-2",level:4},{value:".drop()",id:"drop",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-3",level:4},{value:"Exemplo 1",id:"exemplo-1-2",level:4},{value:"Exemplo 2",id:"exemplo-2-1",level:4},{value:".first()",id:"first",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-4",level:4},{value:"Exemplo",id:"exemplo-3",level:4},{value:".fromObject()",id:"fromobject",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-5",level:4},{value:"Exemplo",id:"exemplo-4",level:4},{value:".getDataClass()",id:"getdataclass",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-6",level:4},{value:"Exemplo",id:"exemplo-5",level:4},{value:".getKey()",id:"getkey",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-7",level:4},{value:"Exemplo",id:"exemplo-6",level:4},{value:".getRemoteContextAttributes()",id:"getremotecontextattributes",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-8",level:4},{value:"Exemplo",id:"exemplo-7",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m",level:4},{value:".getSelection()",id:"getselection",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-9",level:4},{value:"Exemplo",id:"exemplo-8",level:4},{value:".getStamp()",id:"getstamp",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-10",level:4},{value:"Exemplo",id:"exemplo-9",level:4},{value:".indexOf()",id:"indexof",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-11",level:4},{value:"Exemplo",id:"exemplo-10",level:4},{value:".isNew()",id:"isnew",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-12",level:4},{value:"Exemplo",id:"exemplo-11",level:4},{value:".last()",id:"last",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-13",level:4},{value:"Exemplo",id:"exemplo-12",level:4},{value:".lock()",id:"lock",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-14",level:4},{value:"Exemplo 1",id:"exemplo-1-3",level:4},{value:"Exemplo 2",id:"exemplo-2-2",level:4},{value:".next()",id:"next",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-15",level:4},{value:"Exemplo",id:"exemplo-13",level:4},{value:".previous()",id:"previous",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-16",level:4},{value:"Exemplo",id:"exemplo-14",level:4},{value:".reload( )",id:"reload-",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-17",level:4},{value:"Exemplo",id:"exemplo-15",level:4},{value:".save()",id:"save",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-18",level:4},{value:"status e statusText",id:"status-e-statustext",level:5},{value:"Exemplo 1",id:"exemplo-1-4",level:4},{value:"Exemplo 2",id:"exemplo-2-3",level:4},{value:"Exemplo 3",id:"exemplo-3-1",level:4},{value:".toObject()",id:"toobject",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-19",level:4},{value:"Exemplo 1",id:"exemplo-1-5",level:4},{value:"Exemplo 2",id:"exemplo-2-4",level:4},{value:"Exemplo 3",id:"exemplo-3-2",level:4},{value:"Exemplo 4",id:"exemplo-4-1",level:4},{value:"Exemplo 5",id:"exemplo-5-1",level:4},{value:"Exemplo 6",id:"exemplo-6-1",level:4},{value:"Exemplo 7",id:"exemplo-7-1",level:4},{value:".touched( )",id:"touched-",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-20",level:4},{value:"Exemplo",id:"exemplo-16",level:4},{value:".touchedAttributes( )",id:"touchedattributes-",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-21",level:4},{value:"Exemplo 1",id:"exemplo-1-6",level:4},{value:"Exemplo 2",id:"exemplo-2-5",level:4},{value:".unlock()",id:"unlock",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-22",level:4},{value:"Exemplo",id:"exemplo-17",level:4}],s={toc:p};function u(e){var{components:t}=e,o=l(e,["components"]);return(0,n.kt)("wrapper",r({},s,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Uma entidade ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/dsmapping#entity"}))," \xe9 uma inst\xe2ncia de um ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/dsmapping#dataclass"}),"Dataclass"),", como um registro da tabela que corresponde ao dataclass em seu datasture associado. Cont\xe9m os mesmos atributos que o dataclass assim como os valores de dados e propriedades e fun\xe7\xf5es espec\xedficas."),(0,n.kt)("h3",r({},{id:"resumo"}),"Resumo"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#attributename"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : DataClassAttribute"),"\xa0","\xa0","\xa0","\xa0","armazena o valor de atributo para a entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#clone"}),(0,n.kt)("strong",{parentName:"a"},".clone()")," : 4D. Entity"),"\xa0","\xa0","\xa0","\xa0","cria em mem\xf3ria uma nova entidade referenciando o mesmo registro como a entidade original")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#diff"}),(0,n.kt)("strong",{parentName:"a"},".diff"),"( ",(0,n.kt)("em",{parentName:"a"},"entityToCompare")," : 4D. Entity { ; ",(0,n.kt)("em",{parentName:"a"},"attributesToCompare")," : Collection } ) : Collection"),"\xa0","\xa0","\xa0","\xa0","compara os conte\xfados das duas entidades e retorna suas diferen\xe7as")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#drop"}),(0,n.kt)("strong",{parentName:"a"},".drop"),"( {",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer} ) : Object"),"\xa0","\xa0","\xa0","\xa0","apaga os dados contidos na entidade da datastore")))),(0,n.kt)("p",null,"| ",(0,n.kt)("a",r({parentName:"p"},{href:"#first"}),(0,n.kt)("strong",{parentName:"a"},".first()"),": 4D. Entity"),"\xa0","\xa0","\xa0","\xa0","retorna uma refer\xeancia \xe0 entidade na primeira posi\xe7\xe3o da sele\xe7\xe3o de entidade a qual a entidade pertence.\n|\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#fromobject"}),(0,n.kt)("strong",{parentName:"a"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filler")," : Object )"),"\xa0","\xa0","\xa0","\xa0","preenche uma entidade com o conte\xfado ",(0,n.kt)("em",{parentName:"p"},"filler"),"                                                 |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#getdataclass"}),(0,n.kt)("strong",{parentName:"a"},".getDataClass()")," : 4D. DataClass"),"\xa0","\xa0","\xa0","\xa0","retorna a classe de dados da entidade                                           |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#getkey"}),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Integer"),"\xa0","\xa0","\xa0","\xa0","retorna a chave prim\xe1ria da entidade                                                             |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#getremotecontextattributes"}),(0,n.kt)("strong",{parentName:"a"},".getRemoteContextAttributes()")," : Text"),"\xa0","\xa0","\xa0","\xa0","retorna informa\xe7\xe3o sobre o contexto de otimiza\xe7\xe3o usado pela entidade  |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),(0,n.kt)("strong",{parentName:"a"},".getSelection()"),": 4D. EntitySelection"),"\xa0","\xa0","\xa0","\xa0","retorna a sele\xe7\xe3o entidade \xe0 qual pertence a entidade                                           |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#getstamp"}),(0,n.kt)("strong",{parentName:"a"},".getStamp()")," : Integer"),"\xa0","\xa0","\xa0","\xa0"," retorna o valor atual da estampa da entidade                                                       |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#indexof"}),(0,n.kt)("strong",{parentName:"a"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"a"},"entitySelection")," : 4D. EntitySelection } ) : Integer"),"\xa0","\xa0","\xa0","\xa0","retorna a posi\xe7\xe3o da entidade em uma sele\xe7\xe3o de entidade                                                          |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#isnew"}),(0,n.kt)("strong",{parentName:"a"},".isNew()")," : Boolean"),"\xa0","\xa0","\xa0","\xa0"," retorna True se a entidade a qual for aplicada foi rec\xe9m criada e n\xe3o foi ainda salva na datastore.                                                                |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#last"}),(0,n.kt)("strong",{parentName:"a"},".last()")," : 4D. Entity"),"\xa0","\xa0","\xa0","\xa0","retorna uma refer\xeancia \xe0 entidade na primeira posi\xe7\xe3o da sele\xe7\xe3o de entidade a qual a entidade pertence.\n|\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#lock"}),(0,n.kt)("strong",{parentName:"a"},".lock"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","p\xf5e uma fechadura pessimista no registro referenciado pela entidade                                                                   |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#next"}),"|"),"\xa0","\xa0","\xa0","\xa0","retorna uma refer\xeancia \xe0 entidade na primeira posi\xe7\xe3o da sele\xe7\xe3o de entidade a qual a entidade pertence.\n|\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#previous"}),(0,n.kt)("strong",{parentName:"a"},".previous()"),"  : 4D. Entity"),"\xa0","\xa0","\xa0","\xa0"," retorna uma refer\xeancia \xe0 entidade na primeira posi\xe7\xe3o da sele\xe7\xe3o de entidade a qual a entidade pertence.\n|\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#reload"}),(0,n.kt)("strong",{parentName:"a"},".reload()")," : Object"),"\xa0","\xa0","\xa0","\xa0","recarrega o conte\xfado da entidade em mem\xf3ria                                                             |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#save"}),(0,n.kt)("strong",{parentName:"a"},".save"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","salva as mudan\xe7as feitas na entidade                                                                   |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#toobject"}),(0,n.kt)("strong",{parentName:"a"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","retorna um objeto que foi feito a partir da entidade                                                       |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#touched"}),(0,n.kt)("strong",{parentName:"a"},".touched()")," : Boolean"),"\xa0","\xa0","\xa0","\xa0","comprova se um atributo da entidade tiver sido modificado ou n\xe3o desde que se carregou a entidade na mem\xf3ria ou se salvou                                                          |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#touchedattributes"}),(0,n.kt)("strong",{parentName:"a"},".touchedAttributes()")," : Collection"),"\xa0","\xa0","\xa0","\xa0","retorna os nomes dos atributos que foram modificados desde que a entidade foi carregada na mem\xf3ria                            |\n| ",(0,n.kt)("a",r({parentName:"p"},{href:"#unlock"}),(0,n.kt)("strong",{parentName:"a"},".unlock()")," : Object"),"\xa0","\xa0","\xa0","\xa0","remove a tranca pessimista no registro correspondente \xe0 entidade                                                             |"),(0,n.kt)("h2",r({},{id:"attributename"}),".",(0,n.kt)("em",{parentName:"h2"},"attributeName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : DataClassAttribute"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"Qualquer atributo de dataclass est\xe1 dispon\xedvel como uma propriedade de entidade, que armazena o valor de atributo para a entidade."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Atributos de Dataclass tamb\xe9m podem ser alcan\xe7ados usando a sintaxe alternativa com ","["," ].")),(0,n.kt)("p",null,"O tipo de valor do atributo depende do tipo do atributo ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassAttributeClass#kind"}),"atributo")," (rela\xe7\xe3o ou armazenamento):"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"storage"),": ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a value of the same type as ",(0,n.kt)("em",{parentName:"li"},"attributeName"),"."),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"relatedEntity"),": ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName"),' returns the related entity. Valores da entidade relacionada est\xe3o diretamente dispon\xedveis atrav\xe9s de propriedades em cascata, por exemplo "myEntity.employer.employees',"[",'0].lastname".'),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"relatedEntities"),": ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a new entity selection of related entities. Se eliminam os duplicados (se devolve uma sele\xe7\xe3o de entidades desordenada).")),(0,n.kt)("h4",r({},{id:"exemplo"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $myEntity : cs. EmployeeEntity\n $myEntity:=ds. Employee.new() //Create a new entity\n $myEntity.name:=\"Dupont\" // assign 'Dupont' to the 'name' attribute\n $myEntity.firstname:=\"John\" //assign 'John' to the 'firstname' attribute\n $myEntity.save() //save the entity\n")),(0,n.kt)("h2",r({},{id:"clone"}),".clone()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clone()")," : 4D. Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nova entidade referenciando o registro")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-1"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".clone()")," cria em mem\xf3ria uma nova entidade referenciando o mesmo registro como a entidade original. Esta fun\xe7\xe3o permite que voc\xea atualize as entidades separadamente."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Tenha em mente que quaisquer modifica\xe7\xf5es feitas a entidades ser\xe3o salvas no registro referenciado somente quando o ",(0,n.kt)("a",r({parentName:"p"},{href:"#save"}),(0,n.kt)("inlineCode",{parentName:"a"},". ave( )"))," fun\xe7\xe3o for executada.")),(0,n.kt)("p",null,"Esta fun\xe7\xe3o s\xf3 pode ser usada com entidades j\xe1 salvas no banco de dados. Ele n\xe3o pode ser chamado em uma entidade rec\xe9m-criada (para a qual ",(0,n.kt)("a",r({parentName:"p"},{href:"#isnew"}),(0,n.kt)("inlineCode",{parentName:"a"},".isNew()"))," retorna ",(0,n.kt)("strong",{parentName:"p"},"Verdadeiro"),")."),(0,n.kt)("h4",r({},{id:"exemplo-1"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $emp; $empCloned : cs. EmployeeEntity\n $emp:=ds. Employee.get(672)\n $empCloned:=$emp.clone()\n\n $emp.lastName:="Smith" //Updates done on $emp are not done on $empCloned\n\n')),(0,n.kt)("h2",r({},{id:"diff"}),".diff()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".diff"),"( ",(0,n.kt)("em",{parentName:"p"},"entityToCompare")," : 4D. Entity { ; ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare")," : Collection } ) : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"entityToCompare"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Entidade a ser comparada com a entidade original")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributesToCompare"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome dos atributos a serem comparados")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Diferen\xe7as entre as entidades")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-2"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," compara os conte\xfados das duas entidades e retorna suas diferen\xe7as."),(0,n.kt)("p",null,"No ",(0,n.kt)("em",{parentName:"p"},"entityToCompare"),", passe a entidade a ser comparada \xe0 entidade original."),(0,n.kt)("p",null,"Em ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare"),", pode designar atributos espec\xedficos para comparar. Se fornecida, a compara\xe7\xe3o \xe9 feita apenas nos atributos especificados. Se n\xe3o for fornecida, todas as diferen\xe7as entre as entidades s\xe3o devolvidas."),(0,n.kt)("p",null,"As diferen\xe7as s\xe3o retornadas como uma cole\xe7\xe3o de objetos cujas propriedades s\xe3o:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Nome da propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributeName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome do atributo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"value"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"any - Depende do tipo de atributo"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valor do atributo na entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"otherValue"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"any - Depende do tipo de atributo"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valor do atributo em ",(0,n.kt)("em",{parentName:"td"},"entityToCompare"))))),(0,n.kt)("p",null,"Apenas atributos com valores diferentes est\xe3o inclu\xeddos na cole\xe7\xe3o. Se nenhuma diferen\xe7a for encontrada, ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," retorna uma cole\xe7\xe3o vazia."),(0,n.kt)("p",null,"A fun\xe7\xe3o se aplica para propriedades cujo ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassAttributeClass#kind"}),"tipo")," \xe9 ",(0,n.kt)("strong",{parentName:"p"},"de armazenamento")," ou ",(0,n.kt)("strong",{parentName:"p"},"relacionada a Entidade"),". No caso de uma entidade relacionada ter sido atualizada (ou seja, a chave estrangeira), o nome da entidade relacionada e seu nome de chave prim\xe1ria s\xe3o retornados como propriedades ",(0,n.kt)("em",{parentName:"p"},"attributeName")," ( value*",(0,n.kt)("em",{parentName:"p"}," e "),"outroValue* est\xe3o vazios para o nome da entidade relacionada)."),(0,n.kt)("p",null,"Se uma das entidades comparadas for ",(0,n.kt)("strong",{parentName:"p"},"Null"),", um erro \xe9 gerado."),(0,n.kt)("h4",r({},{id:"exemplo-1-1"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $diff1; $diff2 : Collection\n employee:=ds. Employee.query("ID=1001").first()\n $clone:=employee.clone()\n employee.firstName:="MARIE"\n employee.lastName:="SOPHIE"\n employee.salary:=500\n $diff1:=$clone.diff(employee) // All differences are returned\n $diff2:=$clone.diff(employee;New collection"firstName";"lastName"))\n  // Only differences on firstName and lastName are returned\n')),(0,n.kt)("p",null,"$diff1:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    },\n    {\n        "attributeName": "salary",\n        "value": 66600,\n        "otherValue": 500\n    }\n]\n$diff2:\n\n[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    }\n]\n')),(0,n.kt)("h4",r({},{id:"exemplo-2"}),"Exemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var vCompareResult1; vCompareResult2; vCompareResult3; $attributesToInspect : Collection\n vCompareResult1:=New collection\n vCompareResult2:=New collection\n vCompareResult3:=New collection\n $attributesToInspect:=New collection\n\n $e1:=ds. Employee.get(636)\n $e2:=ds. Employee.get(636)\n\n $e1.firstName:=$e1.firstName+" update"\n $e1.lastName:=$e1.lastName+" update"\n\n $c:=ds. Company.get(117)\n $e1.employer:=$c\n $e2.salary:=100\n\n $attributesToInspect.push("firstName")\n $attributesToInspect.push("lastName")\n\n vCompareResult1:=$e1.diff($e2)\n vCompareResult2:=$e1.diff($e2;$attributesToInspect)\n vCompareResult3:=$e1.diff($e2;$e1.touchedAttributes())\n')),(0,n.kt)("p",null,"vCompareResultado1 (todas as diferen\xe7as s\xe3o devolvidas):"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "salary",\n        "value": 33500,\n        "otherValue": 100\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n  {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 from Company\n        "otherValue": "[object Entity]"// Entity 118 from Company\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult2 (apenas diferen\xe7as em $attributesToInspect foram retornadas)"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "valor": "Karla update",\n        "outroValor": "Karla": "Karla".\n    },\n    {\n        "attributeName": "\xfaltimoNome",\n        "valor": "Marrero update",\n        "outroValor": "Marrero":\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult3 (apenas as diferen\xe7as em $e1 atributos tocados s\xe3o retornadas)"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n     {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 from Company\n        "otherValue": "[object Entity]"// Entity 118 from Company\n\n    }\n]\n')),(0,n.kt)("h2",r({},{id:"drop"}),".drop()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".drop"),"( {",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer} ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed"),": For\xe7a a queda mesmo se a estampa tiver mudado")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultado da opera\xe7\xe3o drop")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-3"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," apaga os dados contidos na entidade da datastoreda tabela relacionada a dataclass. Note-se que a entidade permanece na mem\xf3ria."),(0,n.kt)("p",null,"Numa aplica\xe7\xe3o multiusu\xe1rio ou multiprocesso, a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," \xe9 executada sob um mecanismo ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),'"optimistic lock"')," , no qual um selo de bloqueio interno \xe9 automaticamente incrementado cada vez que o registo for guardado."),(0,n.kt)("p",null,"Por padr\xe3o, se o par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"modo")," for omitido, a fun\xe7\xe3o retornar\xe1 um erro (veja abaixo) se a mesma entidade tiver sido modificada (ou seja, O selo mudou) por outro processo ou usu\xe1rio nesse meio tempo."),(0,n.kt)("p",null,"Caso contr\xe1rio, pode passar a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," no par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"mode")," : nesse caso, a entidade \xe9 abandonada mesmo que a estampa tenha sido alterada (e a chave prim\xe1ria continua a ser a mesma)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultados")),(0,n.kt)("p",null,"O objecto devolvido por ",(0,n.kt)("inlineCode",{parentName:"p"},".drop( )")," cont\xe9m as seguintes propriedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"verdadeiro se a a\xe7\xe3o de queda for bem-sucedida, falso caso contr\xe1rio.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status(*)"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText(*)"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o do erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro de bloqueio pessimista:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"LockKindText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'"Bloqueado pelo registro"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informa\xe7\xf5es sobre a origem do bloqueio")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Process ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de usu\xe1rio de sess\xe3o na m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Pseud\xf4nimo do usu\xe1rio se definido por ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", caso contr\xe1rio, nome de usu\xe1rio no diret\xf3rio 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de processo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro grave (erro grave pode ser tentar duplicar uma chave prim\xe1ria, disco cheio...):")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"uma cole\xe7\xe3o de objetos"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensagem de erro")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"assinatura de componentes"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'assinatura interna do componente (ex.: "dmbg" significa componente da base de dados)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Error code")))),(0,n.kt)("p",null,"(","*",") Os seguintes valores podem ser devolvidos nas propriedades ",(0,n.kt)("em",{parentName:"p"},"status")," e ",(0,n.kt)("em",{parentName:"p"},"statusText")," do objecto ",(0,n.kt)("em",{parentName:"p"},"Result")," em caso de erro:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Value"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade n\xe3o existe mais nos dados. Este erro pode ocorrer nos seguintes casos:",(0,n.kt)("br",null),(0,n.kt)("li",null,"a entidade foi descartada (o selo mudou e o espa\xe7o de mem\xf3ria \xe9 agora livre)"),(0,n.kt)("li",null,"a entidade foi descartada e substitu\xedda por outra chave prim\xe1ria (o selo mudou e uma nova entidade agora usa o espa\xe7o de mem\xf3ria). Ao utilizar entity.drop( ), este erro pode ser devolvido quando usar a op\xe7\xe3o dk force drop if stamp changed. Ao usar entity.lock( ), este erro pode ser retornado quando usar a op\xe7\xe3o dk if stamp changed")," ",(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "A entidade j\xe1 n\xe3o existe"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade est\xe1 bloqueada por um bloqueio pessimista.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "J\xe1 bloqueado"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Um erro grave \xe9 um erro de banco de dados de baixo n\xedvel (por exemplo, chave duplicada), um erro de hardware, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associado statusText"),': "Outro erro"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"O valor de selo interno da entidade n\xe3o corresponde a uma da entidade armazenada nos dados (bloqueio otimista).",(0,n.kt)("br",null),(0,n.kt)("li",null,"com ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": erro apenas se a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge' n\xe3o for utilizada</li><li>com "),".drop( )",(0,n.kt)("inlineCode",{parentName:"td"},": erro apenas se a op\xe7\xe3o "),"dk force drop if stamp changed' n\xe3o for utilizada"),(0,n.kt)("li",null,"com ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": erro apenas se a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," n\xe3o for usada"),(0,n.kt)("li",null,(0,n.kt)("strong",{parentName:"td"},"Associated statusText*"),': "O carimbo mudou"'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Os privil\xe9gios actuais n\xe3o permitem a queda da entidade. ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Permission Error"')))),(0,n.kt)("h4",r({},{id:"exemplo-1-2"}),"Exemplo 1"),(0,n.kt)("p",null,"Exemplo sem a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee : cs. EmployeeEntity\n var $status : Object\n $employees:=ds. Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop()\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //The dropped entity remains in memory\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-1"}),"Exemplo 2"),(0,n.kt)("p",null,"Exemplo com a op\xe7\xe3o",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee : cs. EmployeeEntity\n var $status : Object\n $employees:=ds. Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop(dk force drop if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //The dropped entity remains in memory\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",r({},{id:"first"}),".first()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".first()"),": 4D. Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Referencia \xe0 primeira entidade da entity selection (Null se a sele\xe7\xe3o estiver vazia)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-4"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".first()")," retorna uma refer\xeancia \xe0 entidade na primeira posi\xe7\xe3o da sele\xe7\xe3o de entidade a qual a entidade pertence.\n."),(0,n.kt)("p",null,"Se a entidade n\xe3o pertence a nenhuma sele\xe7\xe3o de entidade existente (ex: ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),".getSelection( )")," retorna Null), a fun\xe7\xe3o retorna um valor nulo."),(0,n.kt)("h4",r({},{id:"exemplo-3"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee; $firstEmployee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[2]\n $firstEmployee:=$employee.first() //$firstEmployee is the first entity of the $employees entity selection\n')),(0,n.kt)("h2",r({},{id:"fromobject"}),".fromObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filler")," : Object )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"filler"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto para o qual vai preencher a entidade")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-5"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()")," preenche uma entidade com o conte\xfado ",(0,n.kt)("em",{parentName:"p"},"filler"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Essa fun\xe7\xe3o modifica a entidade original.")),(0,n.kt)("p",null,"O mapeamento entre o objecto e a entidade \xe9 feito sobre os nomes dos atributos:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Se uma propriedade do objeto n\xe3o existe nos dados (dataclass), ela \xe9 ignorada."),(0,n.kt)("li",{parentName:"ul"},"Os tipos de dados devem ser equivalentes. Se houver uma incompatibilidade de tipo entre o objeto e o dataclass, 4D tenta converter os dados sempre que poss\xedvel (consulte ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/pt/Concepts/data-types#converting-data-types"}),(0,n.kt)("inlineCode",{parentName:"a"},"Convers\xe3o de tipos de dados")),"), caso contr\xe1rio, o atributo fica intacto."),(0,n.kt)("li",{parentName:"ul"},'A chave prim\xe1ria pode ser dada como \xe9 ou com uma propriedade "__KEY" (preenchida com o valor da chave prim\xe1ria). Se ainda n\xe3o existir no dataclass, a entidade \xe9 criada com o valor dado quando ',(0,n.kt)("a",r({parentName:"li"},{href:"#save"}),".save()")," \xe9 chamado. Se a chave prim\xe1ria n\xe3o for dada, a entidade \xe9 criada e o valor da chave prim\xe1ria \xe9 atribu\xeddo de acordo com as regras da base de dados. O auto-incremento s\xf3 \xe9 calculado se a chave prim\xe1ria for nula.")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"filler")," pode tratar de uma entidade relacionada sob as seguintes condi\xe7\xf5es:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler")," cont\xe9m a chave estrangeira em si, ou"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler"),' cont\xe9m um objeto de propriedade com o mesmo nome da entidade relacionada, contendo uma propriedade \xfanica chamada "',"_","_",'KEY".'),(0,n.kt)("li",{parentName:"ul"},"se a entidade relacionada n\xe3o existir, ela \xe9 ignorada.")),(0,n.kt)("h4",r({},{id:"exemplo-4"}),"Exemplo"),(0,n.kt)("p",null,"Com o seguinte objeto $o:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Mary",\n    "lastName": "Smith",\n    "salary": 36500,\n    "birthDate": "1958-10-27T00:00:00.000Z",\n    "woman": true,\n    "managerID": 411,// relatedEntity dada com PK\n    "employerID": 20 // relatedEntity dada com PK\n}\n')),(0,n.kt)("p",null,"O c\xf3digo a seguir criar\xe1 uma entidade com gerente e entidades relacionadas ao empregador."),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $o : Object\n var $entity : cs. EmpEntity\n $entity:=ds. Emp.new()\n $entity.fromObject($o)\n $entity.save()\n")),(0,n.kt)("p",null,"Voc\xea tamb\xe9m poderia usar uma entidade relacionada dada como um objeto:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'\n{\n    "firstName": "Marie",\n    "lastName": "Lechat",\n    "salary": 68400,\n    "birthDate": "1971-09-03T00:00:00.000Z",\n    "woman": false,\n    "employer": {// relatedEntity dada como um objeto\n        "__KEY": "21"\n    },\n    "manager": {// relatedEntity dada como um objeto\n        "__KEY": "411"\n    }\n}\n')),(0,n.kt)("h2",r({},{id:"getdataclass"}),".getDataClass()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getDataClass()")," : 4D. DataClass"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. DataClass"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto DataClass ao qual a entidade pertence")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-6"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getDataClass()")," retorna a classe de dados da entidade. Esta fun\xe7\xe3o \xe9 \xfatil para configurar o c\xf3digo gen\xe9rico."),(0,n.kt)("h4",r({},{id:"exemplo-5"}),"Exemplo"),(0,n.kt)("p",null,"O seguinte c\xf3digo gen\xe9rico duplica qualquer entidade:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"  //duplicate_entity method\n  //duplicate_entity($entity)\n\n #DECLARE($entity : 4D. Entity)  \n var $entityNew : 4D. Entity\n var $status : Object\n\n $entityNew:=$entity.getDataClass().new() //create a new entity in the parent dataclass\n $entityNew.fromObject($entity.toObject()) //get all attributes\n $entityNew[$entity.getDataClass().getInfo().primaryKey]:=Null //reset the primary key\n $status:=$entityNew.save() //save the duplicated entity\n")),(0,n.kt)("h2",r({},{id:"getkey"}),".getKey()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk key as string"),": a chave prim\xe1ria se devolve como uma string, sem importar o tipo de chave prim\xe1ria")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valor do texto chave prim\xe1ria da entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valor da chave prim\xe1ria num\xe9rica da entidade")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-7"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getKey()")," retorna a chave prim\xe1ria da entidade."),(0,n.kt)("p",null,'As chaves prim\xe1rias podem ser n\xfameros (Inteiro) ou strings. Voc\xea pode "for\xe7ar" o valor da chave prim\xe1ria retornado para ser uma string, independentemente do tipo de chave prim\xe1ria real, passando a ',(0,n.kt)("inlineCode",{parentName:"p"},"dk key como string")," op\xe7\xe3o no par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"modo"),"."),(0,n.kt)("h4",r({},{id:"exemplo-6"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName=:1";"Smith")\n $employee:=$employees[0]\n ALERT("The primary key is "+$employee.getKey(dk key as string))\n')),(0,n.kt)("h2",r({},{id:"getremotecontextattributes"}),".getRemoteContextAttributes()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRemoteContextAttributes()")," : Text"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"atributos de contexto linkados \xe0 entidade, separados por uma v\xedrgula")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Modo avan\xe7ado:")," Esta fun\xe7\xe3o destina-se a programadores que necessitem personalizar as caracter\xedsticas padr\xe3o ORDA para configura\xe7\xf5es espec\xedficas. Na maioria dos casos, n\xe3o necessitar\xe1 de o utilizar.")),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-8"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getRemoteContextAttributes()")," retorna informa\xe7\xe3o sobre o contexto de otimiza\xe7\xe3o usado pela entidade ."),(0,n.kt)("p",null,"Se n\xe3o houver ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/datastores#clientserver-optimization"}),"optimization context")," para a entidade a fun\xe7\xe3o retorna um Texto vazio."),(0,n.kt)("h4",r({},{id:"exemplo-7"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\nvar $address : cs. AddressEntity\nvar $p : cs. PersonsEntity\nvar $contextA : Object\nvar $info : Text\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$contextA:=New object("context"; "contextA")\n\n$address:=$ds. Address.get(1; $contextA)\n$text:="" For each ($p; $address.persons)\n    $text:=$p.firstname+" "+$p.lastname End for each\n\n$info:=$address.getRemoteContextAttributes()\n\n//$info = "persons,persons.lastname,persons.firstname"\n')),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/EntitySelectionClass#getRemoteContextAttributes"}),"EntitySelection.getRemoteContextAttributes()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataStoreClass#clearallremotecontexts"}),".clearAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataStoreClass#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataStoreClass#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataStoreClass#setremotecontextinfo"}),".setRemoteContextInfo()")),(0,n.kt)("h2",r({},{id:"getselection"}),".getSelection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getSelection()"),": 4D. EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Sele\xe7\xe3o de entidade a que pertence a entidade (null se n\xe3o for encontrado)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-9"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getSelection()")," retorna a sele\xe7\xe3o entidade \xe0 qual pertence a entidade."),(0,n.kt)("p",null,"Se a entidade n\xe3o pertence \xe0 sele\xe7\xe3o de uma entidade, a fun\xe7\xe3o retorna Null."),(0,n.kt)("h4",r({},{id:"exemplo-8"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $emp : cs. EmployeeEntity\n var $employees; $employees2 : cs. EmployeeSelection\n $emp:=ds. Employee.get(672) // This entity does not belong to any entity selection\n $employees:=$emp.getSelection() // $employees is Null\n\n $employees2:=ds. Employee.query("lastName=:1";"Smith") //This entity selection contains 6 entities\n $emp:=$employees2[0]  // This entity belongs to an entity selection\n\n ALERT("The entity selection contains "+String($emp.getSelection().length)+" entities")\n')),(0,n.kt)("h2",r({},{id:"getstamp"}),".getStamp()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getStamp()")," : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Estampa da entidade (0 se a entidade foi criada)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-10"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getStamp()"),"  retorna o valor atual da estampa da entidade."),(0,n.kt)("p",null,"O selo interno \xe9 automaticamente incrementado por 4D cada vez que a entidade \xe9 gravada. Gere o acesso de usu\xe1rios simult\xe2neos e modifica\xe7\xf5es \xe0s mesmas entidades (ver ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),(0,n.kt)("strong",{parentName:"a"},"bloqueio de entidades")),")."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para uma nova entidade (nunca salva), a fun\xe7\xe3o retorna 0. Para saber se uma entidade acabou de ser criada, recomenda-se a utiliza\xe7\xe3o de ",(0,n.kt)("a",r({parentName:"p"},{href:"#isnew"}),".isNew()"),".")),(0,n.kt)("h4",r({},{id:"exemplo-9"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $entity : cs. EmployeeEntity\n var $stamp : Integer\n\n $entity:=ds. Employee.new()\n $entity.lastname:="Smith"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=1\n\n $entity.lastname:="Wesson"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=2\n')),(0,n.kt)("h2",r({},{id:"indexof"}),".indexOf()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," : 4D. EntitySelection } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"entitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A posi\xe7\xe3o da entidade \xe9 dada de acordo com a selec\xe7\xe3o desta entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Posi\xe7\xe3o da entidade numa selec\xe7\xe3o de entidade")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-11"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".indexOf()")," retorna a posi\xe7\xe3o da entidade em uma sele\xe7\xe3o de entidade."),(0,n.kt)("p",null,"Por padr\xe3o, se o par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," for omitido, a fun\xe7\xe3o retorna a posi\xe7\xe3o da entidade dentro de sua pr\xf3pria sele\xe7\xe3o de entidade. Caso contr\xe1rio, ele retorna a posi\xe7\xe3o da entidade dentro da ",(0,n.kt)("em",{parentName:"p"},"entitySelection"),"."),(0,n.kt)("p",null,"O valor resultante \xe9 inclu\xeddo entre 0 e o comprimento da selec\xe7\xe3o da entidade -1."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Se a entidade n\xe3o tiver uma selec\xe7\xe3o de entidade ou n\xe3o pertencer a ",(0,n.kt)("em",{parentName:"li"},"entitySelection"),", a fun\xe7\xe3o retorna -1."),(0,n.kt)("li",{parentName:"ul"},"Se ",(0,n.kt)("em",{parentName:"li"},"entitySelection")," for Null ou n\xe3o pertencer ao mesmo dataclass que a entidade, \xe9 apresentado um erro.")),(0,n.kt)("h4",r({},{id:"exemplo-10"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[1] //This entity belongs to an entity selection\n ALERT("The index of the entity in its own entity selection is "+String($employee.indexOf())) //1\n\n $employee:=ds. Employee.get(725) //This entity does not belong to an entity selection\n ALERT("The index of the entity is "+String($employee.indexOf())) // -1\n')),(0,n.kt)("h2",r({},{id:"isnew"}),".isNew()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".isNew()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Booleano"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"\xc9 verdade se a entidade acabou de ser criada e ainda n\xe3o foi salva. Caso contr\xe1rio, Falso.")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-12"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".isNew()"),"  retorna True se a entidade a qual for aplicada foi rec\xe9m criada e n\xe3o foi ainda salva na datastore.. ."),(0,n.kt)("h4",r({},{id:"exemplo-11"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $emp : cs. EmployeeEntity\n\n $emp:=ds. Employee.new()\n\n If($emp.isNew())\n    ALERT("This is a new entity")\n End if\n')),(0,n.kt)("h2",r({},{id:"last"}),".last()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".last()")," : 4D. Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Refer\xeancia para a \xfaltima entidade de uma sele\xe7\xe3o de entidade (Null se n\xe3o for encontrado)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-13"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".last()")," retorna uma refer\xeancia \xe0 entidade na primeira posi\xe7\xe3o da sele\xe7\xe3o de entidade a qual a entidade pertence.\n."),(0,n.kt)("p",null,"Se a entidade n\xe3o pertence a nenhuma sele\xe7\xe3o de entidade existente (ex: ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),".getSelection( )")," retorna Null), a fun\xe7\xe3o retorna um valor nulo."),(0,n.kt)("h4",r({},{id:"exemplo-12"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee; $lastEmployee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[0]\n $lastEmployee:=$employee.last() //$lastEmployee is the last entity of the $employees entity selection\n')),(0,n.kt)("h2",r({},{id:"lock"}),".lock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".lock"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed"),": Recarregar antes de bloquear se o carimbo for alterado")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultado da opera\xe7\xe3o de bloqueio")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-14"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".lock()")," p\xf5e uma fechadura pessimista no registro referenciado pela entidade. O bloqueio de ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),"\xe9 definido")," para um registro e todas as refer\xeancias da entidade no processo atual."),(0,n.kt)("p",null,"Outros processos ver\xe3o este registro como bloqueado (o resultado. ",(0,n.kt)("inlineCode",{parentName:"p"},"a propriedade"),' uccess conter\xe1 Falso se eles tentarem bloquear a mesma entidade usando esta fun\xe7\xe3o). S\xf3 as fun\xe7\xf5es executadas na sess\xe3o de "bloqueio" s\xe3o permitidas para editar e guardar os atributos da entidade. A entidade pode ser carregada como apenas leitura por outras sess\xf5es, mas n\xe3o ser\xe3o capazes de introduzir e guardar valores.'),(0,n.kt)("p",null,"Um registro trancado por ",(0,n.kt)("inlineCode",{parentName:"p"},".lock()")," ser\xe1 destravado:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"quando a fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"li"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},"desbloqueia()"))," \xe9 chamada a uma entidade correspondente no mesmo processo"),(0,n.kt)("li",{parentName:"ul"},"automaticamente, quando j\xe1 n\xe3o \xe9 referenciado por nenhuma entidade em mem\xf3ria. Por exemplo, se a fechadura for colocada apenas numa refer\xeancia local de uma entidade, a entidade \xe9 desbloqueada quando a fun\xe7\xe3o termina. Enquanto houver refer\xeancias \xe0 entidade em mem\xf3ria, o registo permanece bloqueado.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Uma entidade pode ser ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/REST/lock"}),"locked by a REST session"),", em cujo caso s\xf3 pode ser destravado pela sess\xe3o.")),(0,n.kt)("p",null,"Por padr\xe3o, se o par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"modo")," for omitido, a fun\xe7\xe3o retornar\xe1 um erro (veja abaixo) se a mesma entidade tiver sido modificada (ou seja, O selo mudou) por outro processo ou usu\xe1rio nesse meio tempo."),(0,n.kt)("p",null,"Caso contr\xe1rio, voc\xea pode passar o par\xe2metro",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed")," no par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"mode")," : neste caso, nenhum erro \xe9 retornado e a entidade \xe9 recarregada quando o selo mudou (se a entidade ainda existir e a chave prim\xe1ria ainda for a mesma)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultados")),(0,n.kt)("p",null,"O objeto retornado por ",(0,n.kt)("inlineCode",{parentName:"p"},".lock( )")," cont\xe9m as seguintes propriedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"true se a a\xe7\xe3o de bloqueio for bem sucedida (ou se a entidade j\xe1 estiver bloqueada no processo atual), falso caso contr\xe1rio.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas se a op\xe7\xe3o",(0,n.kt)("inlineCode",{parentName:"em"},"dk reload if stamp changed")," for usada:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"wasReloaded")),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"verdadeiro se a entidade foi recarregada com sucesso, falso caso contr\xe1rio.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o do erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro de bloqueio pessimista:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'"Locked by record" se trancado por um processo 4D, "Locked by session" se trancado por uma sess\xe3o REST')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informa\xe7\xf5es sobre a origem do bloqueio. Retorna propriedades dependendo da origem da trava (processo 4D ou sess\xe3o REST)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel s\xf3 para um processo trava 4D:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"ID do processo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de usu\xe1rio de sess\xe3o na m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome ou apelido do usu\xe1rio 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user4d_id"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Id do usu\xe1rio no diret\xf3rio do banco de dados 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de processo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vers\xe3o do cliente")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel s\xf3 para um processo trava REST:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"host"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'URL que trava a entidade (por exemplo "',(0,n.kt)("a",r({parentName:"td"},{href:"http://www.myserver.com%22"}),'www.myserver.com"'),")")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"IPAddr"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Endere\xe7o IP da trava (por exemplo. "127.0.0.1")')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"userAgent"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'userAgent of the locker (e.g. Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36")')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro grave"))," (a chave prim\xe1ria j\xe1 existir, o disco estar cheio...):")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"uma cole\xe7\xe3o de objetos"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensagem de erro")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"assinatura de componentes"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'assinatura interna do componente (ex.: "dmbg" significa componente da base de dados)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Error code")))),(0,n.kt)("p",null,"(","*",") Os seguintes valores podem ser devolvidos nas propriedades ",(0,n.kt)("em",{parentName:"p"},"status")," e ",(0,n.kt)("em",{parentName:"p"},"statusText")," do objecto ",(0,n.kt)("em",{parentName:"p"},"Result")," em caso de erro:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Value"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade n\xe3o existe mais nos dados. Este erro pode ocorrer nos seguintes casos:",(0,n.kt)("li",null,"a entidade foi descartada (o selo mudou e o espa\xe7o de mem\xf3ria \xe9 agora livre)"),(0,n.kt)("li",null,"a entidade foi descartada e substitu\xedda por outra chave prim\xe1ria (o selo mudou e uma nova entidade agora usa o espa\xe7o de mem\xf3ria). Ao usar ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),', este erro pode ser retornado quando a op\xe7\xe3o "dk force drop if stamp changed" for usada. Ao usar ',(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),', este erro pode ser retornado quando a op\xe7\xe3o `dk reload if stamp changed" for usado'),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "A entidade j\xe1 n\xe3o existe"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade est\xe1 bloqueada por um bloqueio pessimista. ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "J\xe1 bloqueado"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Um erro grave \xe9 um erro de banco de dados de baixo n\xedvel (por exemplo, chave duplicada), um erro de hardware, etc.****Texto status associado: "Outro erro"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"O valor de selo interno da entidade n\xe3o corresponde a uma da entidade armazenada nos dados (bloqueio otimista).",(0,n.kt)("li",null,"com ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": erro apenas se a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge' n\xe3o for utilizada</li><li>com "),".drop( )",(0,n.kt)("inlineCode",{parentName:"td"},": erro apenas se a op\xe7\xe3o "),"dk force drop if stamp changed' n\xe3o for utilizada"),(0,n.kt)("li",null,"com ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": erro apenas se a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," n\xe3o for usada"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Stamp has changed"')))),(0,n.kt)("h4",r({},{id:"exemplo-1-3"}),"Exemplo 1"),(0,n.kt)("p",null,"Exemplo com erro:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employee : cs. EmployeeEntity\n var $status : Object\n $employee:=ds. Employee.get(716)\n $status:=$employee.lock()\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-2"}),"Exemplo 2"),(0,n.kt)("p",null,"Exemplo com ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload se o selo mudou a op\xe7\xe3o"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employee : cs. EmployeeEntity\n var $status : Object\n $employee:=ds. Employee.get(717)\n $status:=$employee.lock(dk reload if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",r({},{id:"next"}),".next()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,"|"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Refer\xeancia para a pr\xf3xima entidade de uma sele\xe7\xe3o de entidade (Null se n\xe3o for encontrado)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-15"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".next()")," retorna uma refer\xeancia \xe0 entidade na primeira posi\xe7\xe3o da sele\xe7\xe3o de entidade a qual a entidade pertence.\n."),(0,n.kt)("p",null,"Se a entidade n\xe3o pertencer a nenhuma sele\xe7\xe3o de entidade existente (ex: ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),".getSelection()")," retorna Null), a fun\xe7\xe3o retorna um valor nulo."),(0,n.kt)("p",null,"Se n\xe3o houver entidade seguinte v\xe1lida na selec\xe7\xe3o da entidade (ou seja, se estiver na \xfaltima entidade da selec\xe7\xe3o), a fun\xe7\xe3o devolve Null. Se a entidade seguinte tiver sido abandonada, a fun\xe7\xe3o devolve a entidade v\xe1lida seguinte (e eventualmente Nula)."),(0,n.kt)("h4",r({},{id:"exemplo-13"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee; $nextEmployee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[0]\n $nextEmployee:=$employee.next() //$nextEmployee is the second entity of the $employees entity selection\n\n')),(0,n.kt)("h2",r({},{id:"previous"}),".previous()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".previous()"),"  : 4D. Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Refer\xeancia a entidade anterior na sele\xe7\xe3o da entidade (Null se n\xe3o for encontrado)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-16"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".previous()"),"  retorna uma refer\xeancia \xe0 entidade na primeira posi\xe7\xe3o da sele\xe7\xe3o de entidade a qual a entidade pertence.\n."),(0,n.kt)("p",null,"Se a entidade n\xe3o pertencer a nenhuma sele\xe7\xe3o de entidade existente (ex: ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),".getSelection()")," retorna Null), a fun\xe7\xe3o retorna um valor nulo."),(0,n.kt)("p",null,"Se n\xe3o houver nenhuma entidade anterior v\xe1lida na sele\xe7\xe3o da entidade (ou seja, voc\xea est\xe1 na primeira entidade da sele\xe7\xe3o), a fun\xe7\xe3o retorna Null. Se a entidade anterior foi abandonada, a fun\xe7\xe3o retorna a entidade v\xe1lida anterior (e eventualmente Null)."),(0,n.kt)("h4",r({},{id:"exemplo-14"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee; $previousEmployee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[1]\n $previousEmployee:=$employee.previous() //$previousEmployee is the first entity of the $employees entity selection\n')),(0,n.kt)("h2",r({},{id:"reload-"}),".reload( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".reload()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto de estado")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-17"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".reload()")," recarrega o conte\xfado da entidade em mem\xf3riade acordo com a informa\xe7\xe3o armazenada na tabela relacionada a dataclass da datastore. A recarga s\xf3 \xe9 feita se a entidade ainda existir com a mesma chave prim\xe1ria."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultados")),(0,n.kt)("p",null,"O objeto retornado por ",(0,n.kt)("inlineCode",{parentName:"p"},".reload( )")," cont\xe9m as seguintes propriedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se a a\xe7\xe3o de recarregar tiver sucesso, sen\xe3o False.",(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel s\xf3 no caso de erro")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o do erro, ver abaixo")))),(0,n.kt)("p",null,"(","*",") Os seguintes valores podem ser devolvidos nas propriedades ",(0,n.kt)("em",{parentName:"p"},"status")," e ",(0,n.kt)("em",{parentName:"p"},"statusText")," do objecto ",(0,n.kt)("em",{parentName:"p"},"Result")," em caso de erro:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Value"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade n\xe3o existe mais nos dados. Este erro pode ocorrer nos seguintes casos:",(0,n.kt)("br",null),(0,n.kt)("li",null,"a entidade foi descartada (o selo mudou e o espa\xe7o de mem\xf3ria \xe9 agora livre)"),(0,n.kt)("li",null,"a entidade foi descartada e substitu\xedda por outra chave prim\xe1ria (o selo mudou e uma nova entidade agora usa o espa\xe7o de mem\xf3ria). the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Ao usar ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),', este erro pode ser retornado quando a op\xe7\xe3o `dk reload if stamp changed" for usado'),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"statusText associado")),': "a entidade j\xe1 n\xe3o existe"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Um erro grave \xe9 um erro de banco de dados de baixo n\xedvel (por exemplo, chave duplicada), um erro de hardware, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Texto status associado")),': "Outro erro"')))),(0,n.kt)("h4",r({},{id:"exemplo-15"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employee : cs. EmployeeEntity\n var $employees : cs. EmployeeSelection\n var $result : Object\n\n $employees:=ds. Employee.query("lastName=:1";"Hollis")\n $employee:=$employees[0]\n $employee.firstName:="Mary"\n $result:=$employee.reload()\n Case of\n    :($result.success)\n       ALERT("Reload has been done")\n    :($result.status=dk status entity does not exist anymore)\n       ALERT("The entity has been dropped")\n End case\n')),(0,n.kt)("h2",r({},{id:"save"}),".save()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".save"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge"),": Permite o modo de fus\xe3o autom\xe1tica")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultado da opera\xe7\xe3o de salvamento")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-18"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," salva as mudan\xe7as feitas na entidade na tabela relacionada para a dataClass Deve salvar este m\xe9todo depois de criar ou modificar uma entidade se quiser salvar as mudan\xe7as feitas nela."),(0,n.kt)("p",null,'A opera\xe7\xe3o de salvar \xe9 realizada s\xf3 se ao menos um atributo de entidade foi "tocado" (ver ',(0,n.kt)("a",r({parentName:"p"},{href:"#touched"}),(0,n.kt)("inlineCode",{parentName:"a"},".touched()"))," e fun\xe7\xf5es ",(0,n.kt)("a",r({parentName:"p"},{href:"#touchedattributes"}),(0,n.kt)("inlineCode",{parentName:"a"},".touchedAttributes()"))," ). Sen\xe3o a fun\xe7\xe3o n\xe3o faz nada (o trigger n\xe3o \xe9 ativado)"),(0,n.kt)("p",null,"Em uma aplica\xe7\xe3o multiusu\xe1rio ou multiprocesso, a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," \xe9 executada com um mecanismo  ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),'"optimistic lock"')," onde uma estampa interna de tranca \xe9 automaticamente incrementada cada vez que o registro \xe9 salvado"),(0,n.kt)("p",null,"Como padr\xe3o, se o par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"mode")," for omitido, o m\xe9todo retorna um erro (ver abaixo) sempre que a mesma entidade for modificada por outro processo ou u su\xe1rio , sem importar os atributos modificados."),(0,n.kt)("p",null,"Sen\xe3o, pode passar a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," no par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"mode"),': quando o modo automatico fusionado estiver ativado, uma modifica\xe7\xe3o feita ao mesmo tempo que outro processo ou usu\xe1rio na mesma entidade, mas em um diferente atributo, n\xe3o vai resultar em um erro. Os dados resultantes salvos na entidade ser\xe3o a combina\xe7\xe3o ("merge"/fus\xe3o) de todas as modifica\xe7\xf5es n\xe3o simult\xe2neas (se modifica\xe7\xf5es forem aplicadas ao mesmo atributo, a opera\xe7\xe3o de salvar falha e um erro \xe9 retornado, mesmo com o modo auto fus\xe3o)'),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"O modo autom\xe1tico merge n\xe3o est\xe1 dispon\xedvel para atributos de tipo Imagem, Objeto e Texto quando armazenado fora do registro. Mudan\xe7as simult\xe2neas nesses atributos v\xe3o resultar em um erro ",(0,n.kt)("inlineCode",{parentName:"p"},"dk status stamp has changed")," .")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultados")),(0,n.kt)("p",null,"O objeto retornado por ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," cont\xe9m as propriedades a seguir:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se a a\xe7\xe3o salvar tiver sucesso, sen\xe3o False")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel s\xf3 se utilizar a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"em"},"dk auto merge"))),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"autoMerged"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se fizer uma auto merge, sen\xe3o False")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro, ",(0,n.kt)("a",r({parentName:"td"},{href:"#status-and-statustext"}),"ver abaixo"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o do erro, ",(0,n.kt)("a",r({parentName:"td"},{href:"#status-and-statustext"}),"ver abaixo"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel s\xf3 no caso de erro de tranca pessimista")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'"Bloqueado pelo registro"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informa\xe7\xf5es sobre a origem do bloqueio")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Process ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de usu\xe1rio de sess\xe3o na m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Pseud\xf4nimo do usu\xe1rio se definido por ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", caso contr\xe1rio, nome de usu\xe1rio no diret\xf3rio 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de processo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel s\xf3 em caso de erro grave"))," (erro s\xe9rio - por exemplo tentar duplicar uma chave prim\xe1ria, disco cheio...):")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"uma cole\xe7\xe3o de objetos"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensagem de erro")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"componentSignature"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Assinatura interna do componente (ex.: "dmbg" significa componente da base de dados)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Error code")))),(0,n.kt)("h5",r({},{id:"status-e-statustext"}),"status e statusText"),(0,n.kt)("p",null,"Os valores abaixo podem ser retornado nas propriedades ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"statusText")," do objeto Result no caso de um erro:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Value"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status automerge failed")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"(S\xf3 se utiliza a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge"),") A op\xe7\xe3o de fus\xe3o autom\xe1tica falhou ao salvar a entidade.",(0,n.kt)("strong",{parentName:"td"},"StatusText associado"),': "Fus\xe3o autom\xe1tica falhou"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade n\xe3o existe mais nos dados. Este erro pode ocorrer nos seguintes casos:",(0,n.kt)("br",null),(0,n.kt)("li",null,"a entidade foi descartada (o selo mudou e o espa\xe7o de mem\xf3ria \xe9 agora livre)"),(0,n.kt)("li",null,"a entidade foi descartada e substitu\xedda por outra chave prim\xe1ria (o selo mudou e uma nova entidade agora usa o espa\xe7o de mem\xf3ria). the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Ao usar ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),', este erro pode ser retornado quando a op\xe7\xe3o `dk reload if stamp changed" for usado'),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "A entidade j\xe1 n\xe3o existe"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade est\xe1 bloqueada por um bloqueio pessimista. ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "J\xe1 bloqueado"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Um erro grave \xe9 um erro de banco de dados de baixo n\xedvel (por exemplo, chave duplicada), um erro de hardware, etc.****Texto status associado: "Outro erro"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"O valor de selo interno da entidade n\xe3o corresponde a uma da entidade armazenada nos dados (bloqueio otimista).",(0,n.kt)("br",null),(0,n.kt)("li",null,"com ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": erro apenas se a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge' n\xe3o for utilizada</li><li>com "),".drop( )",(0,n.kt)("inlineCode",{parentName:"td"},": erro apenas se a op\xe7\xe3o "),"dk force drop if stamp changed' n\xe3o for utilizada"),(0,n.kt)("li",null,"com ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": erro apenas se a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," n\xe3o for usada"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Stamp has changed"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Os privil\xe9gios actuais n\xe3o permitem a salvaguarda da entidade. ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Permission Error"')))),(0,n.kt)("h4",r({},{id:"exemplo-1-4"}),"Exemplo 1"),(0,n.kt)("p",null,"Criar uma nova entidade:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs. EmployeeEntity\n $employee:=ds. Employee.new()\n $employee.firstName:="Mary"\n $employee.lastName:="Smith"\n $status:=$employee.save()\n If($status.success)\n    ALERT("Employee created")\n End if\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-3"}),"Exemplo 2"),(0,n.kt)("p",null,"Atualizar uma entidade sem a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs. EmployeeEntity\n var $employees : cs. EmployeeSelection\n $employees:=ds. Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save()\n Case of\n    :($status.success)\n       ALERT("Employee updated")\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-1"}),"Exemplo 3"),(0,n.kt)("p",null,"Atualizar uma entidade com a op\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n\n var $employee : cs. EmployeeEntity\n var $employees : cs. EmployeeSelection\n\n $employees:=ds. Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save(dk auto merge)\n Case of\n    :($status.success)\n       ALERT("Employee updated")\n    :($status.status=dk status automerge failed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",r({},{id:"toobject"}),".toObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"filterString"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Atributos a extrair (string separada por v\xedrgulas)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"filterCol"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cole\xe7\xe3o de atributos a extrair")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"options"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk with primary key"),": adiciona a propriedade ","_","_","KEY;",(0,n.kt)("br",null),(0,n.kt)("inlineCode",{parentName:"td"},"dk with stamp"),": adiciona a propriedade ","_","STAMP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto criado a partir da entidade")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-19"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," retorna um objeto que foi feito a partir da entidade. Summary --\x3ereturns the names of the attributes that have been modified since the entity was loaded into memory."),(0,n.kt)("p",null,"Se nenhum filtro for especificado ou se o par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"filterString"),' conter uma string vazia ou  "*", o objeto retornado vai conter:'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"todos os atributos de entidade de armazenagem"),(0,n.kt)("li",{parentName:"ul"},"atributos ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")," ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/pt/API/DataClassAttributeClass#kind"}),"kind"),": obt\xe9m uma propriedade com o mesmo nome que a entidade relacionada (nome do link muitos para um). Atributo \xe9 extraido com um formul\xe1rio simples."),(0,n.kt)("li",{parentName:"ul"},"atributos ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntities")," ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/pt/API/DataClassAttributeClass#kind"}),"kind"),": atributo n\xe3o \xe9 retornado.")),(0,n.kt)("p",null,"No primeiro par|\xe2metro, passa os atributos entidade a extrair. Pode passar:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterString"),': uma string com rotas de propriedades separadas por v\xedrgulas: "propertyPath1, propertyPath2, ...", ou'),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterCol"),": uma cole\xe7\xe3o de strings: ","[",'"propertyPath1","propertyPath2";...]')),(0,n.kt)("p",null,"Se um filtro for especificado para atributos de relatedEntity ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassAttributeClass#kind"}),"kind"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity" -> se extrai de forma simples: um objeto com a propriedade ',"_","_","KEY (chave prim\xe1ria)."),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.*" -> todas as propriedades foram extra\xeddas'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.propertyName1; relatedEntity.propertyName2; ..." -> s\xf3 se extraem essas propriedades')),(0,n.kt)("p",null,"Se um filtro for especificado para atributos de relatedEntities ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassAttributeClass#kind"}),"kind"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.*" -> se extraem todas as propriedades'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.propertyName1; relatedEntities.propertyName2; ..." -> s\xf3 se extraem essas propriedades')),(0,n.kt)("p",null,"No par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"options")," pode passar o selector ",(0,n.kt)("inlineCode",{parentName:"p"},"ddk with primary key")," ou",(0,n.kt)("inlineCode",{parentName:"p"},"dk with stamp")," para adicionar as chaves prim\xe1rias da entidade ou os selos nos objetos extra\xeddos."),(0,n.kt)("admonition",r({},{title:"Alerta",type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},'Se utilizar outro atributo que n\xe3o a chave prim\xe1ria como o atributo Um numa rela\xe7\xe3o, o valor deste atributo ser\xe1 escrito na propriedade "__KEY". Tenha em mente que \xe9 recomendado usar a chave prim\xe1ria como um atributo nas suas rela\xe7\xf5es, especialmente quando usa fun\xe7\xf5es ',(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," e ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()"),".")),(0,n.kt)("h4",r({},{id:"exemplo-1-5"}),"Exemplo 1"),(0,n.kt)("p",null,"A estrutura abaixo ser\xe1 usada nos exemplos desta se\xe7\xe3o:"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(10275).Z,width:"1000",height:"610"})),(0,n.kt)("p",null,"Sem par\xe2metros de filtro:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"employeeObject:=employeeSelected.toObject()\n")),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": { // relatedEntity extra\xedda com forma simples\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-4"}),"Exemplo 2"),(0,n.kt)("p",null,"Extrair a chave prim\xe1ria e a estampa:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("";dk with primary key+dk with stamp)\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "__KEY": 413,\n   "__STAMP": 1,\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": {\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-2"}),"Exemplo 3"),(0,n.kt)("p",null,"Expande todas as propriedades de ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("directReports.*")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "directReports": [\n        {\n            "ID": 418,\n            "firstName": "Lorena",\n            "lastName": "Boothe",\n            "salary": 44800,\n            "birthDate": "1970-10-02T00:00:00.000Z",\n            "woman": true,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 419,\n            "firstName": "Drew",\n            "lastName": "Caudill",\n            "salary": 41000,\n            "birthDate": "2030-01-12T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 420,\n            "firstName": "Nathan",\n            "lastName": "Gomes",\n            "salary": 46300,\n            "birthDate": "2010-05-29T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        }\n    ]\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-4-1"}),"Exemplo 4"),(0,n.kt)("p",null,"Extra\xe7\xe3o de algumas propriedades de ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("firstName, directReports.lastName")\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "directReports": [\n        {\n            "lastName": "Boothe"\n        },\n        {\n            "lastName": "Caudill"\n        },\n        {\n            "lastName": "Gomes"\n        }\n    ]\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-5-1"}),"Exemplo 5"),(0,n.kt)("p",null,"Extrair ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," com formul\xe1rio simples:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $coll:=New collection("firstName";"employer")\n employeeObject:=employeeSelected.toObject($coll)\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "employer": {\n        "__KEY": 20\n    }\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-6-1"}),"Exemplo 6"),(0,n.kt)("p",null,"Expande todas as propriedades de ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("employer.*")\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "ID": 20,\n        "name": "India Astral Secretary",\n        "creationDate": "1984-08-25T00:00:00.000Z",\n        "revenues": 12000000,\n        "extra": null\n    }\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-7-1"}),"Exemplo 7"),(0,n.kt)("p",null,"Extra\xe7\xe3o de algumas propriedades de ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $col:=New collection\n $col.push("employer.name")\n $col.push("employer.revenues")\n employeeObject:=employeeSelected.toObject($col)\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "name": "India Astral Secretary",\n        "revenues": 12000000\n    }\n}\n')),(0,n.kt)("h2",r({},{id:"touched-"}),".touched( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touched()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Booleano"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se tiver modificado ao menos um atributo da entidade e ainda n\xe3o for salvo, se n\xe3o, False")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-20"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," comprova se um atributo da entidade tiver sido modificado ou n\xe3o desde que se carregou a entidade na mem\xf3ria ou se salvou."),(0,n.kt)("p",null,"Se um atributo for modificado ou calculado, a fun\xe7\xe3o retorna True, sen\xe3o retorna False. Pode usar essa fun\xe7\xe3o para determinar se precisar salvar a entidade."),(0,n.kt)("p",null,"Esta fun\xe7\xe3o retorna False para uma nova entidade que foi criada (com ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassClass#new"}),(0,n.kt)("inlineCode",{parentName:"a"},".new( )")),"). Note entretanto que se usar uma fun\xe7\xe3o que calcule um atributo da entidade, a fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," vai retornar True. Por exemplo se chamar ",(0,n.kt)("a",r({parentName:"p"},{href:"#getkey"}),(0,n.kt)("inlineCode",{parentName:"a"},".getKey()"))," para calcular a chave prim\xe1ria, ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," retorna True."),(0,n.kt)("h4",r({},{id:"exemplo-16"}),"Exemplo"),(0,n.kt)("p",null,"Neste exemplo, vemos se \xe9 necess\xe1rio salvar a entidade:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $emp : cs. EmployeeEntity\n $emp:=ds. Employee.get(672)\n $emp.firstName:=$emp.firstName //Even if updated with the same value, the attribute is marked as touched\n\n If($emp.touched()) //if at least one of the attributes has been changed\n    $emp.save()\n End if // otherwise, no need to save the entity\n")),(0,n.kt)("h2",r({},{id:"touchedattributes-"}),".touchedAttributes( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touchedAttributes()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nomes de atributos touched ou cole\xe7\xe3o vazia")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-21"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".touchedAttributes()")," retorna os nomes dos atributos que foram modificados desde que a entidade foi carregada na mem\xf3ria."),(0,n.kt)("p",null,"Isso aplica para atributos do ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassAttributeClass#kind"}),"tipo")," ",(0,n.kt)("inlineCode",{parentName:"p"},"storage")," ou ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),"."),(0,n.kt)("p",null,"No caso de uma entidade relacionada que foi tocada (touched) *ou seja, a chave prim\xe1ria) o nome da entidade relacionada e sua chave prim\xe1ria s\xe3o retornados."),(0,n.kt)("p",null,"Se nenhum atributo de entidade for tocado, o m\xe9todo retorna uma cole\xe7\xe3o vazia."),(0,n.kt)("h4",r({},{id:"exemplo-1-6"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs. EmployeeEntity\n\n $touchedAttributes:=New collection\n $emp:=ds. Employee.get(725)\n $emp.firstName:=$emp.firstName //Even if updated with the same value, the attribute is marked as touched\n $emp.lastName:="Martin"\n $touchedAttributes:=$emp.touchedAttributes()\n  //$touchedAttributes: ["firstName","lastName"]\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-5"}),"Exemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs. EmployeeEntity\n var $company : cs. CompanyEntity\n\n $touchedAttributes:=New collection\n\n $emp:=ds. Employee.get(672)\n $emp.firstName:=$emp.firstName\n $emp.lastName:="Martin"\n\n $company:=ds. Company.get(121)\n $emp.employer:=$company\n\n $touchedAttributes:=$emp.touchedAttributes()\n\n  //collection $touchedAttributes: ["firstName","lastName","employer","employerID"]\n')),(0,n.kt)("p",null,"Nesse modo:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"firstName and lastName tem um tipo ",(0,n.kt)("inlineCode",{parentName:"li"},"storage")),(0,n.kt)("li",{parentName:"ul"},"employer tem um tipo ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")),(0,n.kt)("li",{parentName:"ul"},"employerID \xe9 a chave estrangeira da entidade relacionada employer")),(0,n.kt)("h2",r({},{id:"unlock"}),".unlock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".unlock()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto de estado")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-22"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," remove a tranca pessimista no registro correspondente \xe0 entidade na datastore e tabela relacionada a dataclasse."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para saber mais veja ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),"Entity locking"),".")),(0,n.kt)("p",null,"Um registro \xe9 destrancado automaticamente quando n\xe3o for mais referenciado por nenhuma entidade no processo de trancamento (por exemplo, se uma tranca for posta apenas na refer\xeancia local da entidade, a entidade e o registro \xe9 destrancado quando o processo terminar)."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Quando um registro for trancado, deve ser destrancado do processo de trancamento e na refer\xeancia de entidade que colocou a tranca. Por exemplo:")),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," $e1:=ds. Emp.all()[0]\n $e2:=ds. Emp.all()[0]\n $res:=$e1.lock() //$res.success=true\n $res:=$e2.unlock() //$res.success=false\n $res:=$e1.unlock() //$res.success=true\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultados")),(0,n.kt)("p",null,"O objeto retornado por ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," cont\xe9m a propriedade abaixo:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Booleano"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Verdadeiro se a a\xe7\xe3o de destrancar for bem-sucedida, Falso caso contr\xe1rio. Se o desbloqueio for feito em uma entidade abandonada, em um registro n\xe3o bloqueado ou em um registro bloqueado por outro processo ou entidade, o sucesso \xe9 False.")))),(0,n.kt)("h4",r({},{id:"exemplo-17"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employee : cs. EmployeeEntity\n var $status : Object\n\n $employee:=ds. Employee.get(725)\n $status:=$employee.lock()\n ... //processing\n $status:=$employee.unlock()\n If($status.success)\n    ALERT("The entity is now unlocked")\n End if\n')))}u.isMDXComponent=!0},10275:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute4-96c4a541a87b02eee83316636b0ae059.png"}}]);