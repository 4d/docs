"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["14635"],{108683:function(e,n,d){d.r(n),d.d(n,{default:()=>h,frontMatter:()=>i,metadata:()=>o,assets:()=>c,toc:()=>l,contentTitle:()=>t});var o=JSON.parse('{"id":"commands-legacy/locked-records-info","title":"Locked records info","description":"Locked records info ( aTabela ) : Object","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R8/commands-legacy/locked-records-info.md","sourceDirName":"commands-legacy","slug":"/commands/locked-records-info","permalink":"/docs/pt/commands/locked-records-info","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Flocked-records-info.md%20(20-R8)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R8","frontMatter":{"id":"locked-records-info","title":"Locked records info","slug":"/commands/locked-records-info","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"LOCKED BY","permalink":"/docs/pt/commands/locked-by"},"next":{"title":"READ ONLY","permalink":"/docs/pt/commands/read-only"}}'),r=d("785893"),s=d("250065");let i={id:"locked-records-info",title:"Locked records info",slug:"/commands/locked-records-info",displayed_sidebar:"docs"},t=void 0,c={},l=[{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:2},{value:"Exemplo",id:"exemplo",level:2},{value:"Ver tamb\xe9m",id:"ver-tamb\xe9m",level:2},{value:"Propriedades",id:"propriedades",level:2}];function a(e){let n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Locked records info"})," ( ",(0,r.jsx)(n.em,{children:"aTabela"})," ) : Object"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Par\xe2metro"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"aTable"}),(0,r.jsx)(n.td,{children:"Table"}),(0,r.jsx)(n.td,{children:"\u2192"}),(0,r.jsx)(n.td,{children:"Tabela da qual obter os registros bloqueados"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Resultado"}),(0,r.jsx)(n.td,{children:"Object"}),(0,r.jsx)(n.td,{children:"\u2190"}),(0,r.jsx)(n.td,{children:"Descri\xe7\xe3o dos registros bloqueados (se houver)"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"descri\xe7\xe3o",children:"Descri\xe7\xe3o"}),"\n",(0,r.jsxs)(n.p,{children:["O comando ",(0,r.jsx)(n.strong,{children:"Locked records info"})," devolve um objeto que cont\xe9m diferente informa\xe7\xe3o sobre os registros bloqueados atualmente em ",(0,r.jsx)(n.em,{children:"aTabela"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Nota"}),': o comando funciona s\xf3 com 4D e 4D Server. Devolve um objeto n\xe3o v\xe1lido quando for chamado desde um 4D remoto. Entretanto, pode ser chamado neste contexto se a op\xe7\xe3o "Executar em servidor" estiver ativada para o m\xe9todo de chamada. Nesse caso, o objeto devolvido conter\xe1 informa\xe7\xe3o sobre o servidor. Quando chamar desde um componente, sempre se aplica ao banco de dados local.']}),"\n",(0,r.jsx)(n.p,{children:'O objeto devolvido cont\xe9m uma propriedade "registros", que \xe9 um array de objetos:'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\xa0\xa0\xa0 "records": [\xa0\xa0\xa0 \xa0\xa0\xa0 objeto descri\xe7\xe3o,\xa0\xa0\xa0 \xa0\xa0\xa0 (\u2026)\xa0\xa0\xa0 ]}\n'})}),"\n",(0,r.jsx)(n.p,{children:'Cada elemento da cole\xe7\xe3o "description object" identifica um registro bloqueado na tabela especificada. Cont\xe9m diferentes propiedades dependendo da origem do bloqueio (processo 4D ou REST API).'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Se o registro foi bloqueado por um processo 4D:"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Propriedade"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Tipo"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Descri\xe7\xe3o"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"contextID"}),(0,r.jsx)(n.td,{children:"UUID (Cadeia)"}),(0,r.jsx)(n.td,{children:"UUID do contexto da base respons\xe1vel do bloqueio"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"contextAttributes"}),(0,r.jsx)(n.td,{children:"Objeto"}),(0,r.jsxs)(n.td,{children:["Objeto que cont\xe9m a mesma informa\xe7\xe3o que o comando ",(0,r.jsx)(n.a,{href:"/docs/pt/commands/locked-by",children:"LOCKED BY"})," aplicado ao registro, a diferen\xe7a \xe9 que ",(0,r.jsx)(n.strong,{children:"Locked records info"})," devolve o nome do usu\xe1rio definido no sistema e n\xe3o o do usu\xe1rio 4D, assim como informa\xe7\xe3o adicional (ver mais a frente)."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"recordNumber"}),(0,r.jsx)(n.td,{children:"Inteiro longo"}),(0,r.jsx)(n.td,{children:"N\xfamero de registro do registro bloqueado"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["O objeto ",(0,r.jsx)(n.em,{children:"contextAttributes"})," tem as propriedades abaixo:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Propriedade"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Tipo"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Descri\xe7\xe3o"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"task_id"}),(0,r.jsx)(n.td,{children:"N\xfamero"}),(0,r.jsx)(n.td,{children:"N\xfamero de refer\xeancia do processo"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"user_name"}),(0,r.jsx)(n.td,{children:"Cadeia"}),(0,r.jsx)(n.td,{children:"Nome do usu\xe1rio definido no sistema operativo"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"user4d_alias"}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsxs)(n.td,{children:["Apelido/alias definido com ",(0,r.jsx)(n.a,{href:"/docs/pt/commands/set-user-alias",children:"SET USER ALIAS"}),", sen\xe3o o nome do usu\xe1rio no diret\xf3rio de banco de dados 4D"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"user4d_id"}),(0,r.jsx)(n.td,{children:"N\xfamero"}),(0,r.jsx)(n.td,{children:"N\xfamero do usu\xe1rio 4D(*)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"host_name"}),(0,r.jsx)(n.td,{children:"Cadeia"}),(0,r.jsx)(n.td,{children:"Nome da m\xe1quina local"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"task_name"}),(0,r.jsx)(n.td,{children:"Cadeia"}),(0,r.jsx)(n.td,{children:"Nome do processo"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"client_version"}),(0,r.jsx)(n.td,{children:"N\xfamero"}),(0,r.jsx)(n.td,{children:"Vers\xe3o da aplica\xe7\xe3o cliente"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Unicamente quando o comando se executa em 4D Server e se o bloqueio do registro prov\xe9m de um 4D remoto:"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"is_remote_context"}),(0,r.jsx)(n.td,{children:"Boolean"}),(0,r.jsxs)(n.td,{children:["Indica se uma origem do bloqueio \xe9 um 4D remoto (sempre ",(0,r.jsx)(n.em,{children:"true"})," j\xe1 que caso contr\xe1rio n\xe3o est\xe1 presente)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"client_uid"}),(0,r.jsx)(n.td,{children:"UUID (Cadeia)"}),(0,r.jsx)(n.td,{children:"UUID do 4D remoto na origem do bloqueio"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"(*) S\xf3 retornado em bancos de dados bin\xe1rios. Pode obter o nome de usu\xe1rio 4D a partir do valor de user4d_id usando o c\xf3digo abaixo"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:"\xa0GET USER LIST($arrNames;$arrIDs)\n\xa0$User4DName:=Find in array($arrIDs;user4d_id)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Se o registro foi bloqueado pela peti\xe7\xe3o $lock REST (a nivel de sess\xe3o):"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Propriedade"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"host"}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsx)(n.td,{children:'URL com a qual a entidade foi bloqueada, por exemplo. "127.0.0.1:8044"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"IPAddr"}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsx)(n.td,{children:'Endere\xe7o IP utilizado na URL com a qual a entidade foi boqueada, por exemplo. "127.0.0.1"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"recordNumber"}),(0,r.jsx)(n.td,{children:"Inteiro"}),(0,r.jsx)(n.td,{children:"N\xfamero de registro do registro bloqueado"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"userAgent"}),(0,r.jsx)(n.td,{children:"Text"}),(0,r.jsx)(n.td,{children:'Agente de usu\xe1rio do locker, por exemplo "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36"'})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"exemplo",children:"Exemplo"}),"\n",(0,r.jsx)(n.p,{children:"Execute o seguinte c\xf3digo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-4d",children:"\xa0$vOlocked :=Locked records info([Table])\n"})}),"\n",(0,r.jsx)(n.p,{children:"Se dois registros est\xe3o bloqueados na tabela [Table], o seguinte objeto se devolve em $vOlocked:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\xa0\xa0\xa0 "records": [\xa0\xa0\xa0 \xa0\xa0\xa0 {\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextID": "A9BB84C0E57349E089FA44E04C0F2F25",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextAttributes": {\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_id": 8, (*)\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user_name": "roland", (*)\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user4d_id": 1,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "host_name": "iMac de roland",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_name": "P_RandomLock",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "client_version": -1342106592\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "recordNumber": 1\xa0\xa0\xa0 \xa0\xa0\xa0 },\xa0\xa0\xa0 \xa0\xa0\xa0 {\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextID": "8916338D1B8A4D86B857D92F593CCAC3",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextAttributes": {\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_id": 9,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user_name": "roland",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "user4d_id": 1,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "host_name": "iMac de roland",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "task_name": "P_RandomLock",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "client_version": -1342106592\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 },\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0 "recordNumber": 2\xa0\xa0\xa0 \xa0\xa0\xa0 }\xa0\xa0\xa0 ]}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Se o c\xf3digo \xe9 executado em um 4D Server e o bloqueio \xe9 causado por uma m\xe1quina cliente remota, o seguinte objeto \xe9 devolvido em $vOlocked:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\xa0\xa0\xa0 "records": [\xa0\xa0\xa0\xa0\xa0\xa0\xa0 {\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "contextID": "B0EC087DC2FA704496C0EA15DC011D1C",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "contextAttributes": {\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "task_id": 2,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "user_name": "achim",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "user4d_id": 1,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "host_name": "achim-pcwin",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "task_name": "P_RandomLock",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "is_remote_context": true,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "client_uid": "0696E66F6CD731468E6XXX581A87554A",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "client_version": -268364752\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 },\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "recordNumber": 1\xa0\xa0\xa0\xa0\xa0\xa0\xa0 }\xa0\xa0\xa0 ]}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"ver-tamb\xe9m",children:"Ver tamb\xe9m"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/docs/pt/commands/locked",children:"Locked"})}),"\n",(0,r.jsx)(n.h2,{id:"propriedades",children:"Propriedades"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"N\xfamero do comando"}),(0,r.jsx)(n.td,{children:"1316"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Thread-seguro"}),(0,r.jsx)(n.td,{children:"\u2713"})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},250065:function(e,n,d){d.d(n,{Z:function(){return t},a:function(){return i}});var o=d(667294);let r={},s=o.createContext(r);function i(e){let n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);