"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["293"],{186705:function(e,o,s){s.r(o),s.d(o,{metadata:()=>n,contentTitle:()=>c,default:()=>l,assets:()=>i,toc:()=>t,frontMatter:()=>r});var n=JSON.parse('{"id":"Concepts/components","title":"Componentes","description":"Um componente 4D \xe9 um conjunto de m\xe9todos e formul\xe1rios 4D que representam uma ou mais funcionalidades que podem ser instaladas em diferentes bancos de dados. Por exemplo, voc\xea pode desenvolver um componente de e-mail 4D que gerencia todos os aspectos de envio, recebimento e armazenamento de e-mails em bancos de dados 4D.","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-18/Concepts/components.md","sourceDirName":"Concepts","slug":"/Concepts/components","permalink":"/docs/pt/18/Concepts/components","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20Concepts%2Fcomponents.md%20(18)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"18","frontMatter":{"id":"components","title":"Componentes"},"sidebar":"docs","previous":{"title":"Modos interpretado e compilado","permalink":"/docs/pt/18/Concepts/interpreted-compiled"},"next":{"title":"Plug-ins","permalink":"/docs/pt/18/Concepts/plug-ins"}}'),a=s("785893"),d=s("250065");let r={id:"components",title:"Componentes"},c=void 0,i={},t=[{value:"Defini\xe7\xf5es",id:"defini\xe7\xf5es",level:2},{value:"Prote\xe7\xe3o dos componentes: compila\xe7\xe3o",id:"prote\xe7\xe3o-dos-componentes-compila\xe7\xe3o",level:3},{value:"Partilhar os m\xe9todos de projeto",id:"partilhar-os-m\xe9todos-de-projeto",level:2},{value:"Passar vari\xe1veis",id:"passar-vari\xe1veis",level:2},{value:"Acesso a tabelas do banco de dados local",id:"acesso-a-tabelas-do-banco-de-dados-local",level:2},{value:"Escopo dos comandos de linguagem",id:"escopo-dos-comandos-de-linguagem",level:2},{value:"Comandos n\xe3o utiliz\xe1veis",id:"comandos-n\xe3o-utiliz\xe1veis",level:3},{value:"Gest\xe3o de erros",id:"gest\xe3o-de-erros",level:2},{value:"Uso de formul\xe1rios",id:"uso-de-formul\xe1rios",level:2},{value:"Uso de tabelas e campos",id:"uso-de-tabelas-e-campos",level:2},{value:"Exemplo",id:"exemplo",level:3},{value:"Uso de recursos",id:"uso-de-recursos",level:2},{value:"Ajuda on-line para componentes",id:"ajuda-on-line-para-componentes",level:2}];function m(e){let o={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.p,{children:"Um componente 4D \xe9 um conjunto de m\xe9todos e formul\xe1rios 4D que representam uma ou mais funcionalidades que podem ser instaladas em diferentes bancos de dados. Por exemplo, voc\xea pode desenvolver um componente de e-mail 4D que gerencia todos os aspectos de envio, recebimento e armazenamento de e-mails em bancos de dados 4D."}),"\n",(0,a.jsxs)(o.p,{children:["Criar e instalar componentes 4D \xe9 realizado diretamente a partir de 4D. Basicamente, os componentes s\xe3o gerenciados como ",(0,a.jsx)(o.a,{href:"/docs/pt/18/Concepts/plug-ins",children:"plug-ins"})," conforme os seguintes princ\xedpios:"]}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"Um componente consiste em um arquivo de estrutura regular (compilado ou n\xe3o) que tem a arquitetura padr\xe3o ou na forma de um pacote (ver extens\xe3o .4dbase)."}),"\n",(0,a.jsx)(o.li,{children:'Para instalar um componente em um banco de dados, basta copi\xe1-lo para a pasta "Components" do banco de dados, colocada ao lado do arquivo de estrutura ou ao lado da aplica\xe7\xe3o execut\xe1vel 4D.'}),"\n",(0,a.jsx)(o.li,{children:"Um componente pode chamar a maioria dos elementos 4D: m\xe9todos projeto, formul\xe1rios projeto, barras de menu, listas de op\xe7\xf5es, imagens da biblioteca e assim por diante. N\xe3o pode chamar m\xe9todos de bancos de dados e triggers."}),"\n",(0,a.jsx)(o.li,{children:"N\xe3o \xe9 poss\xedvel utilizar tabelas standard ou ficheiros de dados em componentes 4D. Entretanto um componente n\xe3o pode criar ou usar tabelas, campos e arquivos de dados usando mecanismos de bancos de dados externos. S\xe3o bancos 4D independentes com as que se trabalha utilizando comandos SQL."}),"\n"]}),"\n",(0,a.jsx)(o.h2,{id:"defini\xe7\xf5es",children:"Defini\xe7\xf5es"}),"\n",(0,a.jsx)(o.p,{children:"Os mecanismos de gerenciamento de componentes em 4D exigem a implementa\xe7\xe3o dos seguintes termos e conceitos:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Banco de dados matriz"}),": banco de dados 4D usado para desenvolver o componente. O banco de dados matriz \xe9 um banco de dados padr\xe3o sem atributos espec\xedficos. Uma base matriz forma um \xfanico componente. A base de dados matrix destina-se a ser copiada, compilada ou n\xe3o, na pasta Components da aplica\xe7\xe3o 4D ou do banco de dados que usar\xe1 o componente (banco de dados de host)."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Banco de dados do host"}),": banco de dados onde um componente \xe9 instalado e usado."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Componente"}),": banco de dados matriz, compilado ou n\xe3o, copiado na pasta Components da aplica\xe7\xe3o 4D ou no banco de dados host e cujo conte\xfado \xe9 usado nos bancos de dados host."]}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:'Deve-se observar que um banco de dados pode ser tanto uma "matriz" quanto um "host", em outras palavras, um banco de dados matriz pode usar um ou mais componentes. No entanto, um componente n\xe3o pode utilizar ele pr\xf3prio "subcomponentes".'}),"\n",(0,a.jsx)(o.h3,{id:"prote\xe7\xe3o-dos-componentes-compila\xe7\xe3o",children:"Prote\xe7\xe3o dos componentes: compila\xe7\xe3o"}),"\n",(0,a.jsx)(o.p,{children:"Por padr\xe3o, todos os m\xe9todos projeto de um banco de dados matriz instalado como um componente s\xe3o potencialmente vis\xedveis no banco de dados host. Em particular:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"Os m\xe9todos projeto compartilhados s\xe3o encontrados na p\xe1gina de m\xe9todos do Explorer e podem ser chamados nos m\xe9todos do banco de dados host. Seu conte\xfado pode ser selecionado e copiado na \xe1rea de vista pr\xe9via do Explorador. Tamb\xe9m podem ser vistos no depurador. No entanto, n\xe3o \xe9 poss\xedvel abri-los no editor de m\xe9todos nem modific\xe1-los."}),"\n",(0,a.jsx)(o.li,{children:"Os outros m\xe9todos de projeto do banco de dados matriz n\xe3o aparecem no Explorer, mas tamb\xe9m podem ser visualizados no depurador do banco de dados host."}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:"Para proteger os m\xe9todos projeto de um componente de forma eficaz, basta compilar a base de dados matrix e fornec\xea-la na forma de um arquivo .4dc (banco de dados compilado que n\xe3o cont\xe9m o c\xf3digo interpretado). Quando um banco de dados matriz compilado \xe9 instalado como um componente:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"Os m\xe9todos projeto compartilhados s\xe3o mostrados na p\xe1gina de m\xe9todos do Explorer e podem ser chamados nos m\xe9todos do banco de dados host. No entanto, seu conte\xfado n\xe3o aparecer\xe1 na \xe1rea de visualiza\xe7\xe3o nem no depurador."}),"\n",(0,a.jsx)(o.li,{children:"Os outros m\xe9todos projeto do banco de dados de matriz nunca aparecer\xe3o."}),"\n"]}),"\n",(0,a.jsx)(o.h2,{id:"partilhar-os-m\xe9todos-de-projeto",children:"Partilhar os m\xe9todos de projeto"}),"\n",(0,a.jsx)(o.p,{children:"Todos os m\xe9todos projeto de um banco de dados matrix s\xe3o, por defini\xe7\xe3o, inclu\xeddos no componente (o banco de dados \xe9 o componente), que significa que eles podem ser chamados e executados pelo componente."}),"\n",(0,a.jsxs)(o.p,{children:["Por outro lado, por padr\xe3o, esses m\xe9todos projeto n\xe3o ser\xe3o vis\xedveis nem poder\xe3o ser chamados no banco de dados host. No banco de dados matriz, voc\xea deve designar explicitamente os m\xe9todos que deseja compartilhar com o banco de dados host. Esses m\xe9todos projeto podem ser chamados no c\xf3digo do banco de dados host (mas eles n\xe3o podem ser modificados no editor de m\xe9todos da base de dados host). Esses m\xe9todos formam ",(0,a.jsx)(o.strong,{children:"pontos de entrada"})," no componente."]}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Nota:"})," por raz\xf5es de seguran\xe7a, por padr\xe3o um componente n\xe3o pode executar m\xe9todos projeto pertencentes ao banco de dados host. Em alguns casos, talvez seja necess\xe1rio permitir que um componente acesse os m\xe9todos de projeto do seu banco de dados host. Para fazer isso, voc\xea deve designar explicitamente os m\xe9todos de projeto do banco de dados host que deseja tornar acess\xedveis aos componentes."]}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.img,{src:s(860131).Z+"",width:"592",height:"146"})}),"\n",(0,a.jsx)(o.h2,{id:"passar-vari\xe1veis",children:"Passar vari\xe1veis"}),"\n",(0,a.jsx)(o.p,{children:"As vari\xe1veis locais, de processo e interprocessos n\xe3o s\xe3o compartilhadas entre componentes e bancos de dados host. A \xfanica maneira de acessar vari\xe1veis de componentes do banco de dados host e vice-versa \xe9 usando ponteiros."}),"\n",(0,a.jsx)(o.p,{children:"Exemplo usando um array:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:"//Na base de dados do anfitri\xe3o:\n     ARRAY INTEGER(MyArray;10)\n     AMethod(->MyArray)\n\n//No componente, o m\xe9todo do projecto AMethod cont\xe9m:\n     APPEND TO ARRAY($1->;2)\n"})}),"\n",(0,a.jsx)(o.p,{children:"Exemplos usando vari\xe1veis:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:" C_TEXT(myvariable)\n component_method1(->myvariable)\n C_POINTER($p)\n $p:=component_method2(...)\n"})}),"\n",(0,a.jsx)(o.p,{children:"Quando voc\xea usa ponteiros para permitir que os componentes e o banco de dados host se comuniquem, \xe9 necess\xe1rio considerar as seguintes especificidades:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:["O comando ",(0,a.jsx)(o.code,{children:"Get pointer"})," n\xe3o retornar\xe1 um ponteiro para uma vari\xe1vel do banco de dados host se for chamado de um componente e vice-versa."]}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsx)(o.p,{children:"A arquitetura de componentes permite a coexist\xeancia, no mesmo banco de dados interpretado, de componentes interpretados e compilados (por outro lado, somente componentes compilados podem ser usados em um banco de dados compilado). Para utilizar apontadores neste caso, deve respeitar o seguinte princ\xedpio: o int\xe9rprete pode desconectar um ponteiro constru\xeddo em modo compilado; no entanto, em modo compilado, n\xe3o pode deconectar um ponteiro constru\xeddo em modo interpretado. Vamos ilustrar esse princ\xedpio com o seguinte exemplo: dados dois componentes, C (compilados) e eu (interpretados), instalados no mesmo banco de dados host."}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:["Se o componente C definir a vari\xe1vel ",(0,a.jsx)(o.code,{children:"myCvar"})," , o componente I pode acessar ao valor desta vari\xe1vel utilizando o ponteiro ",(0,a.jsx)(o.code,{children:"->myCvar"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:["Se o componente I definir a vari\xe1vel ",(0,a.jsx)(o.code,{children:"myIvar"})," , o componente C n\xe3o pode acessar essa vari\xe1vel usando o ponteiro ",(0,a.jsx)(o.code,{children:"->myIvar"}),". Esta sintaxe causa um erro de execu\xe7\xe3o."]}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:["A compara\xe7\xe3o de ponteiros usando o comando ",(0,a.jsx)(o.code,{children:"RESOLVE POINTER"})," n\xe3o \xe9 recomendada com componentes, uma vez que o princ\xedpio da parti\xe7\xe3o de vari\xe1veis permite a coexist\xeancia de vari\xe1veis com o mesmo nome, mas com conte\xfados radicalmente diferentes em um componente e o banco de dados host (ou outro componente). O tipo da vari\xe1vel pode mesmo ser diferente em ambos os contextos. Se o ",(0,a.jsx)(o.code,{children:"myptr1"})," e ",(0,a.jsx)(o.code,{children:"myptr2"})," apontar cada ponto para uma vari\xe1vel, a compara\xe7\xe3o seguinte produzir\xe1 um resultado incorrecto:"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:"     RESOLVE POINTER(myptr1;vVarName1;vtablenum1;vfieldnum1)\n     RESOLVE POINTER(myptr2;vVarName2;vtablenum2;vfieldnum2)\n     If(vVarName1=vVarName2)\n      //Este teste retorna True mesmo se as vari\xe1veis forem diferentes\n"})}),"\n",(0,a.jsx)(o.p,{children:"Neste caso \xe9 preciso usar a compara\xe7\xe3o de ponteiros:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:"     If(myptr1=myptr2) //Este teste retorna False\n"})}),"\n",(0,a.jsx)(o.h2,{id:"acesso-a-tabelas-do-banco-de-dados-local",children:"Acesso a tabelas do banco de dados local"}),"\n",(0,a.jsx)(o.p,{children:"Embora os componentes n\xe3o possam usar tabelas, os ponteiros podem permitir que os bancos de dados host e os componentes se comuniquem entre si. Por exemplo, aqui est\xe1 um m\xe9todo que pode ser chamado a partir de um componente:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:'// chamar a um m\xe9todo componente\nmethCreateRec(->[PEOPLE];->[PEOPLE]Name;"Julie Andrews")\n'})}),"\n",(0,a.jsxs)(o.p,{children:["Dentro do componente, o c\xf3digo do m\xe9todo ",(0,a.jsx)(o.code,{children:"methCreateRec"}),":"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:"C_POINTER($1) //Pointer em uma tabela no banco de dados host\nC_POINTER($2) //Pointer em um campo no banco de dados host\nC_TEXT($3) // Valor a ser inserido\n\n$tablepointer:=$1\n$fieldpointer:=$2\nCREATE RECORD($tablepointer->)\n\n$fieldpointer->:=$3\nSAVE RECORD($tablepointer->)\n"})}),"\n",(0,a.jsx)(o.h2,{id:"escopo-dos-comandos-de-linguagem",children:"Escopo dos comandos de linguagem"}),"\n",(0,a.jsxs)(o.p,{children:["Exceto pelos ",(0,a.jsx)(o.a,{href:"#unusable-commands",children:"Comandos n\xe3o utiliz\xe1veis"}),", um componente n\xe3o pode usar qualquer comando da linguagem 4D."]}),"\n",(0,a.jsxs)(o.p,{children:["Quando os comandos s\xe3o chamados de um componente, eles s\xe3o executados no contexto do componente, exceto pelo comando ",(0,a.jsx)(o.code,{children:"EXECUTE METHOD"}),', que usa o contexto do m\xe9todo especificado pelo comando. Observe tamb\xe9m que os comandos de leitura do tema "Usu\xe1rios e grupos" podem ser usados a partir de um componente, mas ler\xe3o os usu\xe1rios e grupos do banco de dados host (um componente n\xe3o tem seus pr\xf3prios usu\xe1rios e grupos).']}),"\n",(0,a.jsxs)(o.p,{children:["Os comandos ",(0,a.jsx)(o.code,{children:"SET DATABASE PARAMETER"})," e ",(0,a.jsx)(o.code,{children:"Get database parameter"})," s\xe3o uma exce\xe7\xe3o: seu alcance \xe9 global para o banco de dados. Quando esses comandos s\xe3o chamados de um componente, eles s\xe3o aplicados ao banco de dados host."]}),"\n",(0,a.jsxs)(o.p,{children:["Al\xe9m disso, medidas especificas foram criadas para os comandos ",(0,a.jsx)(o.code,{children:"Structure file"})," e ",(0,a.jsx)(o.code,{children:"Get 4D folder"})," quando utilizados no marco dos componentes."]}),"\n",(0,a.jsxs)(o.p,{children:["O comando ",(0,a.jsx)(o.code,{children:"COMPONENT LIST"})," pode ser utilizado para obter a lista de componentes carregados pelo banco de dados host."]}),"\n",(0,a.jsx)(o.h3,{id:"comandos-n\xe3o-utiliz\xe1veis",children:"Comandos n\xe3o utiliz\xe1veis"}),"\n",(0,a.jsx)(o.p,{children:'Os comandos abaixo n\xe3o s\xe3o compat\xedveis para seu uso dentro de um componente porque modificam o arquivo de estrutura - que est\xe1 aberto em apenas leitura. Sua execu\xe7\xe3o em um componente ir\xe1 gerar erro -10511, "O comando CommandName n\xe3o pode ser chamado a partir de um componente\u201D:'}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"ON EVENT CALL"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"Method called on event"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"SET PICTURE TO LIBRARY"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"REMOVE PICTURE FROM LIBRARY"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"SAVE LIST"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"ARRAY TO LIST"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"EDIT FORM"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"CREATE USER FORM"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"DELETE USER FORM"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"CHANGE PASSWORD"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"EDIT ACCESS"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"Set group properties"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"Set user properties"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"DELETE USER"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"CHANGE LICENSES"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"BLOB TO USERS"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.code,{children:"SET PLUGIN ACCESS"})}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.strong,{children:"Notas:"})}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:["O comando ",(0,a.jsx)(o.code,{children:"Current form table"})," devolve ",(0,a.jsx)(o.code,{children:"Nil"})," quando chamado no contexto de um formul\xe1rio projeto. Por isso n\xe3o pode ser usado em um componente."]}),"\n",(0,a.jsxs)(o.li,{children:["Os comandos da linguagem de defini\xe7\xe3o de dados SQL(",(0,a.jsx)(o.code,{children:"CREATE TABLE"}),", ",(0,a.jsx)(o.code,{children:"DROP TABLE"}),", etc.) n\xe3o podem ser usados no banco de dados nos componentes. Entretanto s\xe3o compat\xedveis com bancos de dados externos (ver o comando SQL",(0,a.jsx)(o.code,{children:"CREATE DATABASE"}),")."]}),"\n"]}),"\n",(0,a.jsx)(o.h2,{id:"gest\xe3o-de-erros",children:"Gest\xe3o de erros"}),"\n",(0,a.jsxs)(o.p,{children:["Um ",(0,a.jsx)(o.a,{href:"/docs/pt/18/Concepts/error-handling",children:"m\xe9todo de tratamento de erros"})," instalado pelo comando ",(0,a.jsx)(o.code,{children:"ON ERR CALL"})," s\xf3 se aplica ao banco de dados em execu\xe7\xe3o. No caso de um erro gerado por um componente, o m\xe9todo de tratamento de erros ",(0,a.jsx)(o.code,{children:"ON ERR CALL"})," do banco de dados host n\xe3o \xe9 chamado, e vice-versa."]}),"\n",(0,a.jsx)(o.h2,{id:"uso-de-formul\xe1rios",children:"Uso de formul\xe1rios"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:'S\xf3 os "formul\xe1rios projeto" (formul\xe1rios que n\xe3o estejam associados a nenhuma tabela espec\xedfica) podem ser utilizados em um componente. Qualquer formul\xe1rio projeto presente no banco de dados matrix pode ser usado pelo componente.'}),"\n",(0,a.jsx)(o.li,{children:"Um componente pode chamar formul\xe1rios tabela do banco de dados local. Note que nesse caso \xe9 necess\xe1rio usar ponteiros ao inv\xe9s de nomes de tabelas entre colchetes [] para especificar os formul\xe1rios no c\xf3digo do componente."}),"\n"]}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Nota:"})," se um componente usa o comando ",(0,a.jsx)(o.code,{children:"ADD RECORD"}),", a forma atual de entrada do banco de dados host ser\xe1 exibida, no contexto do banco de dados host. Por isso se o formul\xe1rio incluir vari\xe1veis, o componente n\xe3o ter\xe1 acesso \xe0s mesmas."]}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"Pode publicar formul\xe1rios componentes como subformul\xe1rios nos bancos de dados locais. Pode publicar formul\xe1rios componentes como subformul\xe1rios no banco de dados local Isso significa que pode desenvolver componentes oferecendo objetos gr\xe1ficos. Por exemplo, Widgets fornecidos por 4D s\xe3o baseados no uso de subformul\xe1rios em componentes."}),"\n"]}),"\n",(0,a.jsx)(o.h2,{id:"uso-de-tabelas-e-campos",children:"Uso de tabelas e campos"}),"\n",(0,a.jsxs)(o.p,{children:["Um componente n\xe3o pode usar as tabelas e os campos definidos na estrutura 4D do banco de dados matriz. Mas pode criar e usar bancos de dados externos e ent\xe3o usar suas tabelas e campos de acordo com suas necessidades. Pode criar e gerenciar bancos de dados externos usando SQL. Uma base de dados externa \xe9 uma base de dados 4D independente da base de dados principal da 4D, mas com isso voc\xea pode trabalhar a partir da base de dados principal 4D. Usar um banco externo significa designar temporariamente esse banco de dados como o banco atual, em outras palavras, o banco alvo para as pesquisas SQL executadas por 4D. Pode criar bancos externos usando o comando SQL ",(0,a.jsx)(o.code,{children:"CREATE DATABASE"}),"."]}),"\n",(0,a.jsx)(o.h3,{id:"exemplo",children:"Exemplo"}),"\n",(0,a.jsx)(o.p,{children:"O c\xf3digo abaixo est\xe1 inclu\xeddo em um componente e realiza tr\xeas a\xe7\xf5es b\xe1sicas com um banco externo:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"cria o banco externo se n\xe3o existir ainda"}),"\n",(0,a.jsx)(o.li,{children:"adiciona dados ao banco externo,"}),"\n",(0,a.jsx)(o.li,{children:"l\xea dados do banco externo."}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:"Cria o banco externo:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:'<>MyDatabase:=Get 4D folder+"\\MyDB" // (Windows) armazena os dados em um diret\xf3rio autorizado\n Begin SQL\n        CREATE DATABASE IF NOT EXISTS DATAFILE :[<>MyDatabase];\n        USE DATABASE DATAFILE :[<>MyDatabase];\n        CREATE TABLE IF NOT EXISTS KEEPIT\n        (\n        ID INT32 PRIMARY KEY,\n        kind VARCHAR,\n        name VARCHAR,\n        code TEXT,\n        sort_order INT32\n        );\n\n        CREATE UNIQUE INDEX id_index ON KEEPIT (ID);\n\n        USE DATABASE SQL_INTERNAL;\n\n End SQL\n'})}),"\n",(0,a.jsx)(o.p,{children:"Escrita no banco de dados externa:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:" $Ptr_1:=$2 // recupera dados do banco de dados host por meio de ponteiros\n $Ptr_2:=$3\n $Ptr_3:=$4\n $Ptr_4:=$5\n $Ptr_5:=$6\n Begin SQL\n\n        USE DATABASE DATAFILE :[<>MyDatabase];\n\n        INSERT INTO KEEPIT\n        (ID, kind, name, code, sort_order)\n        VALUES\n        (:[$Ptr_1], :[$Ptr_2], :[$Ptr_3], :[$Ptr_4], :[$Ptr_5]);\n\n        USE DATABASE SQL_INTERNAL;\n\n\n End SQL\n"})}),"\n",(0,a.jsx)(o.p,{children:"Lendo de um banco externo:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-4d",children:" $Ptr_1:=$2 // acessa dados do banco de dados host por meio de ponteiros\n $Ptr_2:=$3\n $Ptr_3:=$4\n $Ptr_4:=$5\n $Ptr_5:=$6\n\n Begin SQL\n\n    USE DATABASE DATAFILE :[<>MyDatabase];\n\n    SELECT ALL ID, kind, name, code, sort_order\n    FROM KEEPIT\n    INTO :$Ptr_1, :$Ptr_2, :$Ptr_3, :$Ptr_4, :$Ptr_5;\n\n    USE DATABASE SQL_INTERNAL;\n\n End SQL\n"})}),"\n",(0,a.jsx)(o.h2,{id:"uso-de-recursos",children:"Uso de recursos"}),"\n",(0,a.jsx)(o.p,{children:"Os componentes podem utilizar recursos. Em conformidade com o princ\xedpio da gest\xe3o dos recursos, se a componente for de arquitetura .4dbase (arquitetura recomendada), a pasta Recursos deve ser colocada dentro desta pasta."}),"\n",(0,a.jsx)(o.p,{children:"Os mecanismos autom\xe1ticos est\xe3o operacionais: os arquivos XLIFF encontrados na pasta Recursos de um componente ser\xe3o carregados por este componente."}),"\n",(0,a.jsx)(o.p,{children:'Em um banco de dados host contendo um ou mais componentes, cada componente, bem como os bancos de dados de host tem sua pr\xf3pria "string de recursos." Os recursos s\xe3o particionados entre os diferentes bancos de dados: n\xe3o \xe9 poss\xedvel acessar os recursos do componente A do componente B ou do banco de dados host.'}),"\n",(0,a.jsx)(o.h2,{id:"ajuda-on-line-para-componentes",children:"Ajuda on-line para componentes"}),"\n",(0,a.jsx)(o.p,{children:"Um mecanismo espec\xedfico foi implementado para permitir que desenvolvedores adicionem ajuda on-line a seus componentes. O princ\xedpio \xe9 o mesmo que o previsto para os bancos de dados 4D:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"A ajuda do componente deve ser fornecida como um arquivo com sufixo .htm, .html ou (apenas Windows) .chm,"}),"\n",(0,a.jsx)(o.li,{children:"O arquivo de ajuda deve ser colocado ao lado do arquivo de estrutura do componente e ter o mesmo nome que o arquivo de estrutura"}),"\n",(0,a.jsx)(o.li,{children:'Este arquivo \xe9 ent\xe3o carregado automaticamente no menu Ajuda da aplica\xe7\xe3o com o t\xedtulo "Ajuda..\u201D seguido pelo nome do arquivo de ajuda.'}),"\n"]})]})}function l(e={}){let{wrapper:o}={...(0,d.a)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},860131:function(e,o,s){s.d(o,{Z:function(){return n}});let n=s.p+"assets/images/pict516563.en-686ce2897139b168aeb17276e04b4265.png"},250065:function(e,o,s){s.d(o,{Z:function(){return c},a:function(){return r}});var n=s(667294);let a={},d=n.createContext(a);function r(e){let o=n.useContext(d);return n.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(d.Provider,{value:o},e.children)}}}]);