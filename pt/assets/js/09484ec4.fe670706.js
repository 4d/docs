"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[93879],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),m=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=m(a),c=r,k=u["".concat(s,".").concat(c)]||u[c]||d[c]||l;return a?n.createElement(k,o(o({ref:t},p),{},{components:a})):n.createElement(k,o({ref:t},p))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var m=2;m<l;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},53622:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});a(67294);var n=a(3905);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const o={id:"DataClassClass",title:"DataClass"},i=void 0,s={unversionedId:"API/DataClassClass",id:"version-20-R2/API/DataClassClass",title:"DataClass",description:"Uma DataClass oferece uma interface de objeto a uma tabela do banco de dados. Todas as classes de dados de uma aplica\xe7\xe3o 4D est\xe3o dispon\xedveis como uma propriedade de ds datastore.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R2/API/DataClassClass.md",sourceDirName:"API",slug:"/API/DataClassClass",permalink:"/docs/pt/API/DataClassClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FDataClassClass.md%20(20-R2)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R2",frontMatter:{id:"DataClassClass",title:"DataClass"},sidebar:"docs",previous:{title:"CryptoKey",permalink:"/docs/pt/API/CryptoKeyClass"},next:{title:"DataClassAttribute",permalink:"/docs/pt/API/DataClassAttributeClass"}},m={},p=[{value:"Resumo",id:"resumo",level:3},{value:".<em>attributeName</em>",id:"attributename",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:4},{value:"Exemplo 1",id:"exemplo-1",level:4},{value:"Exemplo 2",id:"exemplo-2",level:4},{value:"Exemplo 3",id:"exemplo-3",level:4},{value:".all()",id:"all",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-1",level:4},{value:"Exemplo",id:"exemplo",level:4},{value:".clearRemoteCache()",id:"clearremotecache",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-2",level:4},{value:"Exemplo",id:"exemplo-4",level:4},{value:".fromCollection()",id:"fromcollection",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-3",level:4},{value:"Exemplo 1",id:"exemplo-1-1",level:4},{value:"Exemplo 2",id:"exemplo-2-1",level:4},{value:"Exemplo 3",id:"exemplo-3-1",level:4},{value:"Exemplo",id:"exemplo-5",level:4},{value:"Exemplo 2",id:"exemplo-2-2",level:4},{value:"Exemplo 6",id:"exemplo-6",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m",level:4},{value:".get()",id:"get",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-4",level:4},{value:"Exemplo 1",id:"exemplo-1-2",level:4},{value:"Exemplo 2",id:"exemplo-2-3",level:4},{value:".getCount()",id:"getcount",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-5",level:4},{value:"Exemplo",id:"exemplo-7",level:4},{value:".getDataStore()",id:"getdatastore",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-6",level:4},{value:"Exemplo",id:"exemplo-8",level:4},{value:".getInfo()",id:"getinfo",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-7",level:4},{value:"Exemplo 1",id:"exemplo-1-3",level:4},{value:"Exemplo 2",id:"exemplo-2-4",level:4},{value:"Exemplo 3",id:"exemplo-3-2",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-1",level:4},{value:".getRemoteCache()",id:"getremotecache",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-8",level:4},{value:"Exemplo",id:"exemplo-9",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-2",level:4},{value:".new()",id:"new",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-9",level:4},{value:"Exemplo",id:"exemplo-10",level:4},{value:".newSelection()",id:"newselection",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-10",level:4},{value:"Exemplo",id:"exemplo-11",level:4},{value:".query()",id:"query",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-11",level:4},{value:"queryString parameter",id:"querystring-parameter",level:4},{value:"Using quotes",id:"using-quotes",level:4},{value:"Using parenthesis",id:"using-parenthesis",level:4},{value:"Using placeholders",id:"using-placeholders",level:4},{value:"Looking for null values",id:"looking-for-null-values",level:4},{value:"Not equal to in collections",id:"not-equal-to-in-collections",level:4},{value:"Linking collection attribute query arguments",id:"linking-collection-attribute-query-arguments",level:4},{value:"Queries in many-to-many relations",id:"queries-in-many-to-many-relations",level:4},{value:"formula parameter",id:"formula-parameter",level:4},{value:"Passing parameters to formulas",id:"passing-parameters-to-formulas",level:4},{value:"querySettings parameter",id:"querysettings-parameter",level:4},{value:"About queryPlan and queryPath",id:"about-queryplan-and-querypath",level:4},{value:"Exemplo 1",id:"exemplo-1-4",level:4},{value:"Exemplo 2",id:"exemplo-2-5",level:4},{value:"Exemplo 3",id:"exemplo-3-3",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-3",level:4},{value:".setRemoteCacheSettings()",id:"setremotecachesettings",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-12",level:4},{value:"Exemplo",id:"exemplo-12",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m-4",level:4}],d={toc:p};function u(e){var{components:t}=e,o=l(e,["components"]);return(0,n.kt)("wrapper",r({},d,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Uma ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/dsmapping#dataclass"}),"DataClass")," oferece uma interface de objeto a uma tabela do banco de dados. Todas as classes de dados de uma aplica\xe7\xe3o 4D est\xe3o dispon\xedveis como uma propriedade de ",(0,n.kt)("inlineCode",{parentName:"p"},"ds")," ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/dsmapping#datastore"}),"datastore"),"."),(0,n.kt)("h3",r({},{id:"resumo"}),"Resumo"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#attributename"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : DataClassAttribute"),"\xa0","\xa0","\xa0","\xa0","objectos que est\xe3o dispon\xedveis directamente como propriedades")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#all"}),(0,n.kt)("strong",{parentName:"a"},".all")," ( { ",(0,n.kt)("em",{parentName:"a"},"settings")," : Object } ) : 4D. EntitySelection"),"\xa0","\xa0","\xa0","\xa0","consulta a datastore para encontrar todas as entidades relacionadas com a dataclass e devolve-as como uma selec\xe7\xe3o de entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#clearremotecache"}),(0,n.kt)("strong",{parentName:"a"},".clearRemoteCache()")),"\xa0","\xa0","\xa0","\xa0","devolve o datastore para a dataclass especificada")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#fromcollection"}),(0,n.kt)("strong",{parentName:"a"},".fromCollection"),"( ",(0,n.kt)("em",{parentName:"a"},"objectCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"a"},"settings")," : Object } ) : 4D. EntitySelection"),"\xa0","\xa0","\xa0","\xa0","actualiza ou cria entidades no dataclass de acordo com a colec\xe7\xe3o de objectos ",(0,n.kt)("em",{parentName:"td"},"objectCol"),", e devolve a selec\xe7\xe3o da entidade correspondente")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#get"}),(0,n.kt)("strong",{parentName:"a"},".get"),"( ",(0,n.kt)("em",{parentName:"a"},"primaryKey")," : Integer { ; ",(0,n.kt)("em",{parentName:"a"},"settings")," : Object } ) : 4D. Entity",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".get"),"( ",(0,n.kt)("em",{parentName:"a"},"primaryKey")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"settings")," : Object } ) : 4D."),"\xa0","\xa0","\xa0","\xa0","consulta a folha de dados para recuperar a entidade que corresponde ao par\xe2metro ",(0,n.kt)("em",{parentName:"td"},"primaryKey"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getcount"}),(0,n.kt)("strong",{parentName:"a"},".getCount()")," : Integer "),"\xa0","\xa0","\xa0","\xa0"," cria em mem\xf3ria e devolve uma nova entidade em branco relacionada com a Dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getdatastore"}),(0,n.kt)("strong",{parentName:"a"},".getInfo()")," : Objeto"),"\xa0","\xa0","\xa0","\xa0","cria uma nova selec\xe7\xe3o de entidade, em branco e n\xe3o partilh\xe1vel, relacionada com o dataclass, em mem\xf3ria")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getinfo"}),(0,n.kt)("strong",{parentName:"a"},".getInfo()")," : Objeto "),"\xa0","\xa0","\xa0","\xa0","devolve um objecto que fornece informa\xe7\xe3o sobre o dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getremotecache"}),(0,n.kt)("strong",{parentName:"a"},".getRemoteCache"),"() : Object "),"\xa0","\xa0","\xa0","\xa0","devolve um objecto que cont\xe9m o conte\xfado da cache ORDA para uma dataclass.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#new"}),(0,n.kt)("strong",{parentName:"a"},".new()")," : 4D. Entity "),"\xa0","\xa0","\xa0","\xa0","cria em mem\xf3ria e devolve uma nova entidade em branco relacionada com a Dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#newselection"}),(0,n.kt)("strong",{parentName:"a"},".newSelection"),"( { ",(0,n.kt)("em",{parentName:"a"},"keepOrder")," : Integer } ) : 4D. EntitySelection "),"\xa0","\xa0","\xa0","\xa0","cria uma nova selec\xe7\xe3o de entidade, em branco e n\xe3o partilh\xe1vel, relacionada com o dataclass, em mem\xf3ria")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#query"}),(0,n.kt)("strong",{parentName:"a"},".query"),"( ",(0,n.kt)("em",{parentName:"a"},"queryString")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"...value")," : any } { ; ",(0,n.kt)("em",{parentName:"a"},"querySettings")," : Object } ) : 4D. EntitySelection ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".query"),"( ",(0,n.kt)("em",{parentName:"a"},"formula")," : Object { ; ",(0,n.kt)("em",{parentName:"a"},"querySettings")," : Object } ) : 4D. EntitySelection "),"\xa0","\xa0","\xa0","\xa0","pesquisa por  entidades que satisfa\xe7am os crit\xe9rios de pesquisa especificados em ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"f\xf3rmula")," e (opcionalmente) ",(0,n.kt)("em",{parentName:"td"},"valor"),"(s)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#setremotecachesettings"}),(0,n.kt)("strong",{parentName:"a"},".setRemoteCacheSettings"),"(",(0,n.kt)("em",{parentName:"a"},"settings")," : Object) "),"\xa0","\xa0","\xa0","\xa0","sets the timeout and maximum size of the ORDA cache for a dataclass.")))),(0,n.kt)("h2",r({},{id:"attributename"}),".",(0,n.kt)("em",{parentName:"h2"},"attributeName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : DataClassAttribute"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"Os atributos dos dataclasses s\xe3o objectos que est\xe3o dispon\xedveis directamente como propriedades destas classes."),(0,n.kt)("p",null,"Os objetos retornados s\xe3o do tipo class ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassAttributeClass"}),(0,n.kt)("inlineCode",{parentName:"a"},"DataClassAttribute")),". Esses objetos t\xeam propriedades que podem ser lidas para obter informa\xe7\xe3o sobre seus atributos dataclass."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Os objetos do atributo Dataclass podem ser modificados, mas a estrutura subjacente do banco de dados n\xe3o ser\xe1 alterada.")),(0,n.kt)("h4",r({},{id:"exemplo-1"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$salary:=ds. Employee.salary //returns the salary attribute in the Employee dataclass\n$compCity:=ds. Company["city"] //returns the city attribute in the Company dataclass\n')),(0,n.kt)("h4",r({},{id:"exemplo-2"}),"Exemplo 2"),(0,n.kt)("p",null,"Considerando a seguinte estrutura do banco de dados:"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(36445).Z,width:"454",height:"634"})),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"var $firstnameAtt;$employerAtt;$employeesAtt : Object\n\n $firstnameAtt:=ds. Employee.firstname\n  //{name:firstname,kind:storage,fieldType:0,type:string,fieldNumber:2,indexed:true,\n  //keyWordIndexed:false,autoFilled:false,mandatory:false,unique:false}\n\n $employerAtt:=ds. Employee.employer\n  //{name:employer,kind:relatedEntity,relatedDataClass:Company,\n  //fieldType:38,type:Company,inverseName:employees}\n  //38=Is object\n\n $employeesAtt:=ds. Company.employees\n  //{name:employees,kind:relatedEntities,relatedDataClass:Employee,\n  //fieldType:42,type:EmployeeSelection,inverseName:employer}\n  //42=Is collection\n")),(0,n.kt)("h4",r({},{id:"exemplo-3"}),"Exemplo 3"),(0,n.kt)("p",null,"Considerando as propriedades de tabela abaixo:"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(29399).Z,width:"405",height:"383"})),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $sequenceNumberAtt : Object\n $sequenceNumberAtt=ds. Employee.sequenceNumber\n  //{name:sequenceNumber,kind:storage,fieldType:0,type:string,fieldNumber:13,\n  //indexed:true,keyWordIndexed:false,autoFilled:true,mandatory:false,unique:true}\n")),(0,n.kt)("h2",r({},{id:"all"}),".all()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Compatibilidade do par\xe2metro ",(0,n.kt)("em",{parentName:"td"},"settings"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".all")," ( { ",(0,n.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D. EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"settings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Op\xe7\xe3o de constru\xe7\xe3o: context")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Referencias sobre todas as entidades relacionadas com a classe de dados")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-1"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".all( )")," consulta a datastore para encontrar todas as entidades relacionadas com a dataclass e devolve-as como uma selec\xe7\xe3o de entidade."),(0,n.kt)("p",null,"As entidades s\xe3o devolvidas na ordem padr\xe3o, que \xe9 inicialmente a ordem na qual foram criadas. Note no entanto que, se as entidades foram apagas e outras adicionadas, a ordem padr\xe3o n\xe3o reflete mais sua ordem de cria\xe7\xe3o."),(0,n.kt)("p",null,"Se nenhuma entidade correspondente for encontrada, uma sele\xe7\xe3o de entidade vazia \xe9 retornada."),(0,n.kt)("p",null,"Se aplica carregamento diferido/lazy loading."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"settings")),(0,n.kt)("p",null,"No  par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"querySettings")," \xe9 poss\xedvel passar um objeto que conteha op\xe7\xf5es adicionais. As propriedades abaixo s\xe3o compat\xedveis:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"context"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Etiqueta para o contexto de otimiza\xe7\xe3o aplicado a sele\xe7\xe3o de entidades. Este contexto ser\xe1 utilizado pelo c\xf3digo que maneja a sele\xe7\xe3o de entidades para que possa se beneficiar da otimiza\xe7\xe3o. Essa funcionalidade foi criada para processamento cliente/servidor de ORDA ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/ORDA/entities#client-server-optimization"})),".")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para conhecer o n\xfamero total de entidades num dataclass, recomenda-se a utiliza\xe7\xe3o da fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"#getcount"}),(0,n.kt)("inlineCode",{parentName:"a"},"getCount()"))," que \xe9 mais optimizada do que a express\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"ds.myClass.all().length"),".")),(0,n.kt)("h4",r({},{id:"exemplo"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $allEmp : cs. EmployeeSelection\n $allEmp:=ds. Employee.all()\n")),(0,n.kt)("h2",r({},{id:"clearremotecache"}),".clearRemoteCache()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clearRemoteCache()")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:"center"})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xe3o exige nenhum par\xe2metro")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-2"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getDataStore( )")," function devolve o datastore para a dataclass especificada."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Esta fun\xe7\xe3o n\xe3o reinicia os valores ",(0,n.kt)("inlineCode",{parentName:"p"},"timeout")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"maxEntries"),".")),(0,n.kt)("h4",r({},{id:"exemplo-4"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\nvar $persons : cs. PersonsSelection\nvar $p : cs. PersonsEntity\nvar $cache : Object\nvar $info : Collection\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$persons:=$ds. Persons.all()\n$text:="" For each ($p; $persons)\n    $text:=$p.firstname+" lives in "+$p.address.city+" / " End for each\n\n$cache:=$ds. Persons.getRemoteCache()\n\n$ds. Persons.clearRemoteCache()\n// Cache of the Persons dataclass = {timeout:30;maxEntries:30000;stamp:255;entries:[]}\n')),(0,n.kt)("h2",r({},{id:"fromcollection"}),".fromCollection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Compatibilidade do par\xe2metro ",(0,n.kt)("em",{parentName:"td"},"settings"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".fromCollection"),"( ",(0,n.kt)("em",{parentName:"p"},"objectCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D. EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"objectCol"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cole\xe7\xe3o de objetos a mapear com entidades")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"settings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Op\xe7\xe3o de constru\xe7\xe3o: context")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Sele\xe7\xe3o de entidades preenchidas da cole\xe7\xe3o")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-3"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".fromCollection()")," actualiza ou cria entidades no dataclass de acordo com a colec\xe7\xe3o de objectos ",(0,n.kt)("em",{parentName:"p"},"objectCol"),", e devolve a selec\xe7\xe3o da entidade correspondente."),(0,n.kt)("p",null,"No par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"objectCol"),", passa uma cole\xe7\xe3o de objetos para criar novas entidades ou atualizar as existentes da classe de dados. Os nomes das propriedades devem ser os mesmos que os dos atributos da classe de dados. Se um nome de propriedade n\xe3o existir na dataclass, \xe9 ignorado. Se um valor de atributo n\xe3o for definido na cole\xe7\xe3o, seu valor ser\xe1 null."),(0,n.kt)("p",null,"O mapeamento entre os objetos da cole\xe7\xe3o e as entidades se realiza sobre os ",(0,n.kt)("strong",{parentName:"p"},"nomes de atributos")," e ",(0,n.kt)("strong",{parentName:"p"},"tipos coincidentes"),". Se uma propriedade de um objeto tiver o mesmo nome que um atributo de entidade mas seus tipos n\xe3o corresponderem, o atributo da entidade n\xe3o \xe9 preenchido."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Criar ou atualizar modos")),(0,n.kt)("p",null,"Para cada objeto de ",(0,n.kt)("em",{parentName:"p"},"objectCol"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'Se o objeto conter uma propriedade booleana "',"_",'_NEW" estabelecida em false (ou n\xe3o conter uma propriedade booleana "',"_",'_NEW"), a entidade se atualiza ou se cria com os valores correspondentes das propriedades do objeto. Nenhuma comprova\xe7\xe3o \xe9 realizada com respeito \xe0 chave prim\xe1ria:',(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},'Se a chave prim\xe1ria for dada e existir, a entidade \xe9 atualizada. Nesse caso, a chave prim\xe1ria pode ser dada como et\xe1 ou com uma propriedade "',"_","_",'KEY"  (preenchida com o valor da chave prim\xe1ria).'),(0,n.kt)("li",{parentName:"ul"},"Se a chave prim\xe1ria for dada (como \xe9) e n\xe3o existir, a entidade \xe9 criada"),(0,n.kt)("li",{parentName:"ul"},"Se a chave prim\xe1ria n\xe3o for dada, a entidade \xe9 criada e o valor da chave prim\xe1ria \xe9 assignado com respeito \xe0s regras padr\xe3o de database."))),(0,n.kt)("li",{parentName:"ul"},'Se o objeto conter uma propriedade boolean "',"_","_",'NEW" estabelecida como ',(0,n.kt)("strong",{parentName:"li"},"true"),", a entidade \xe9 criada com os valores correspondente dos atributos de objeto. Uma comprova\xe7\xe3o \xe9 realizada com rela\xe7\xe3o \xe0 chave prim\xe1ria:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Se a chave prim\xe1ria for dada (como est\xe1) e existir, um erro \xe9 enviado."),(0,n.kt)("li",{parentName:"ul"},"Se a chave prim\xe1ria for dada (como \xe9) e n\xe3o existir, a entidade \xe9 criada"),(0,n.kt)("li",{parentName:"ul"},"Se a chave prim\xe1ria n\xe3o for dada, a entidade \xe9 criada e o valor da chave prim\xe1ria \xe9 assignado com respeito \xe0s regras padr\xe3o de database.",(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},'A propriedade "',"_","_",'KEY" que cont\xe9m um valor s\xf3 \xe9 tida em conta quando a propriedade "',"_","_",'NEW" est\xe1 definida como ',(0,n.kt)("strong",{parentName:"p"},"false"),' (ou \xe9 omitida) e existe uma entidade correspondente. Em todos os outros casos, o valor da propriedade "',"_","_",'KEY" \xe9 ignorado, o valor da chave prim\xe1ria deve ser passado "tal como est\xe1".')))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Entidades relacionadas")),(0,n.kt)("p",null,"Os objetos de ",(0,n.kt)("em",{parentName:"p"},"objectCol")," podem conter um ou mais objetos aninhados que apresentam uma ou mais entidades relacionadas, o que pode ser \xfatil para criar ou atualizar links entre entidades."),(0,n.kt)("p",null,'Os objetos aninhados que apresentam entidades relacionadas devem conter uma propriedade "',"_","_",'KEY" (preenchido com o valor da chave prim\xe1ria da entidade relacionada) ou o atributo de chave prim\xe1ria da pr\xf3pria entidade relacionada. O uso de uma propriedade ',"_","_","KEY permite a independ\xeancia do nome do atributo da chave prim\xe0ria."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"O conte\xfado das entidades relacionadas n\xe3o pode ser criado / atualizado atrav\xe9s deste mecanismo.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Stamp")),(0,n.kt)("p",null,"Se um atributo ","_","_",'STAMP for dado, se realiza uma comprova\xe7\xe3o com o selo no armaz\xe9n de dados e se pode devolver um erro ("O selo dado n\xe3o coincide com o atual para o registro# XX da tabela XXXX"). Para saber mais, consulte ',(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),"Entity locking"),"."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"settings")),(0,n.kt)("p",null,"No  par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"querySettings")," \xe9 poss\xedvel passar um objeto que conteha op\xe7\xf5es adicionais. As propriedades abaixo s\xe3o compat\xedveis:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"context"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Etiqueta para o contexto de otimiza\xe7\xe3o aplicado a sele\xe7\xe3o de entidades. Este contexto ser\xe1 utilizado pelo c\xf3digo que maneja a sele\xe7\xe3o de entidades para que possa se beneficiar da otimiza\xe7\xe3o. Essa funcionalidade foi criada para processamento cliente/servidor de ORDA ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/ORDA/entities#client-server-optimization"})),".")))),(0,n.kt)("h4",r({},{id:"exemplo-1-1"}),"Exemplo 1"),(0,n.kt)("p",null,"Queremos atualizar uma entidade existente. A propriedade ","_","_","NEW n\xe3o for dada, a chave prim\xe1ria do empregado \xe9 dada e existe:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs. EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.ID:=668 //Existing PK in Employee table\n $emp.firstName:="Arthur"\n $emp.lastName:="Martin"\n $emp.employer:=New object("ID";121) //Existing PK in the related dataClass Company\n  // For this employee, we can change the Company by using another existing PK in the related dataClass Company\n $empsCollection.push($emp)\n $employees:=ds. Employee.fromCollection($empsCollection)\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-1"}),"Exemplo 2"),(0,n.kt)("p",null,"Queremos atualizar uma entidade existente. A propriedade ","_","_","NEW n\xe3o \xe9 dada, a chave prim\xe1ria do empregado com o atributo ","_","_","KEY e existir:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs. EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.__KEY:=1720 //Existing PK in Employee table\n $emp.firstName:="John"\n $emp.lastName:="Boorman"\n $emp.employer:=New object("ID";121) //Existing PK in the related dataClass Company\n  // For this employee, we can change the Company by using another existing PK in the related dataClass Company\n $empsCollection.push($emp)\n $employees:=ds. Employee.fromCollection($empsCollection)\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-1"}),"Exemplo 3"),(0,n.kt)("p",null,"Se quiser simplesmente criar uma nova entidade da cole\xe7\xe3o::"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs. EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.firstName:="Victor"\n $emp.lastName:="Hugo"\n $empsCollection.push($emp)\n $employees:=ds. Employee.fromCollection($empsCollection)\n')),(0,n.kt)("h4",r({},{id:"exemplo-5"}),"Exemplo"),(0,n.kt)("p",null,"Queremos criar uma entidade. A propriedade ","_","_","NEW \xe9 True, a chave prim\xe1ria de empregado n\xe3o \xe9 dada:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs. EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.firstName:="Mary"\n $emp.lastName:="Smith"\n $emp.employer:=New object("__KEY";121) //Existing PK in the related dataClass Company\n $emp.__NEW:=True\n $empsCollection.push($emp)\n $employees:=ds. Employee.fromCollection($empsCollection)\n\n\n\n\n\n\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-2"}),"Exemplo 2"),(0,n.kt)("p",null,"Queremos criar uma entidade. Se a propriedade ","_","_","NEW \xe9 omitida, a chave prim\xe1ria do empregado \xe9 dada e n\xe3o existir:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp : Object\n var $employees : cs. EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.ID:=10000 //Unexisting primary key\n $emp.firstName:="Fran\xe7oise"\n $emp.lastName:="Sagan"\n $empsCollection.push($emp)\n $employees:=ds. Employee.fromCollection($empsCollection)\n')),(0,n.kt)("h4",r({},{id:"exemplo-6"}),"Exemplo 6"),(0,n.kt)("p",null,"Neste exemplo, a primeira entidade se criar\xe1 e salvar\xe1 mas a segunda falhar\xe1 j\xe1 que ambas utilizam a mesma chave primaria:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $empsCollection : Collection\n var $emp; $emp2 : Object\n var $employees : cs. EmployeeSelection\n\n $empsCollection:=New collection\n $emp:=New object\n $emp.ID:=10001 // Unexisting primary key\n $emp.firstName:="Simone"\n $emp.lastName:="Martin"\n $emp.__NEW:=True\n $empsCollection.push($emp)\n\n $emp2:=New object\n $emp2.ID:=10001 // Same primary key, already existing\n $emp2.firstName:="Marc"\n $emp2.lastName:="Smith"\n $emp2.__NEW:=True\n $empsCollection.push($emp2)\n $employees:=ds. Employee.fromCollection($empsCollection)\n  //first entity is created\n  //duplicated key error for the second entity\n')),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/EntitySelectionClass#tocollection"}),(0,n.kt)("strong",{parentName:"a"},".toCollection()"))),(0,n.kt)("h2",r({},{id:"get"}),".get()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".get"),"( ",(0,n.kt)("em",{parentName:"p"},"primaryKey")," : Integer { ; ",(0,n.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D. Entity",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".get"),"( ",(0,n.kt)("em",{parentName:"p"},"primaryKey")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"settings")," : Object } ) : 4D."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"primaryKey"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer OR Text"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valor da chave prim\xe1ria da entidade a recuperar")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"settings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Op\xe7\xe3o de constru\xe7\xe3o: context")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Entidade que coincide com a chave prim\xe1ria designada")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-4"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".get()")," consulta a folha de dados para recuperar a entidade que corresponde ao par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"primaryKey"),"."),(0,n.kt)("p",null,"Em ",(0,n.kt)("em",{parentName:"p"},"primaryKey"),", passe o valor da chave prim\xe1ria da entidade a recuperar. Em ",(0,n.kt)("em",{parentName:"p"},"primaryKey"),", passe o valor da chave prim\xe1ria da entidade a recuperar Em ",(0,n.kt)("em",{parentName:"p"},"primaryKey"),", passe o valor da chave prim\xe1ria da entidade a recuperar O tipo valor deve coresponder com o tipo de chave prim\xe1ria estabelecido na datastore (Inteiro ou texto). Tamb\xe9m pode se assegurar que o valor de chave prim\xe1ria seja sempre retornado como Texto ao usar a fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/EntityClass#getkey"}),(0,n.kt)("inlineCode",{parentName:"a"},".getKey()"))," com o par\xe2metro",(0,n.kt)("inlineCode",{parentName:"p"},"dk key as string"),"."),(0,n.kt)("p",null,"Se nenhuma entidade for encontrada com  ",(0,n.kt)("em",{parentName:"p"},"primaryKey"),", uma entidade",(0,n.kt)("strong",{parentName:"p"},"Null")," \xe9 retornada."),(0,n.kt)("p",null,"\xc9 aplicado o lazy loading/carregamento diferido, ou seja os dados relacionados s\xe3o carregados do disco s\xf3 quando pedidos."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"settings")),(0,n.kt)("p",null,"No  par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"querySettings")," \xe9 poss\xedvel passar um objeto que conteha op\xe7\xf5es adicionais. As propriedades abaixo s\xe3o compat\xedveis:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"context"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Etiqueta para o contexto de otimiza\xe7\xe3o autom\xe1tico aplicados \xe0 entidade. Esse contexto ser\xe1 usado pelo c\xf3digo subsequente que carrega a entidade para que se possa beneficiar da otimiza\xe7\xe3o. Essa funcionalidade foi criada para processamento cliente/servidor de ORDA ",(0,n.kt)("a",r({parentName:"td"},{href:"/docs/pt/ORDA/entities#client-server-optimization"})),".")))),(0,n.kt)("h4",r({},{id:"exemplo-1-2"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $entity : cs. EmployeeEntity  \n var $entity2 : cs. InvoiceEntity\n $entity:=ds. Employee.get(167) // return the entity whose primary key value is 167\n $entity2:=ds. Invoice.get("DGGX20030") // return the entity whose primary key value is "DGGX20030"\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-3"}),"Exemplo 2"),(0,n.kt)("p",null,"Este exemplo ilustra o uso da propriedade ",(0,n.kt)("em",{parentName:"p"},"context")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $e1; $e2; $e3; $e4 : cs. EmployeeEntity\n var $settings; $settings2 : Object\n\n $settings:=New object("context";"detail")\n $settings2:=New object("context";"summary")\n\n $e1:=ds. Employee.get(1;$settings)\n completeAllData($e1) // In completeAllData method, an optimization is triggered and associated to context "detail"\n\n $e2:=ds. Employee.get(2;$settings)\n completeAllData($e2) // In completeAllData method, the optimization associated to context "detail" is applied\n\n $e3:=ds. Employee.get(3;$settings2)\n completeSummary($e3) //In completeSummary method, an optimization is triggered and associated to context "summary"\n\n $e4:=ds. Employee.get(4;$settings2)\n completeSummary($e4) //In completeSummary method, the optimization associated to context "summary" is applied\n')),(0,n.kt)("h2",r({},{id:"getcount"}),".getCount()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getCount()")," : Integer "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero de entidades na dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-5"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".new( )"),"  cria em mem\xf3ria e devolve uma nova entidade em branco relacionada com a Dataclass."),(0,n.kt)("p",null,"Se esta fun\xe7\xe3o for utilizada dentro de uma transac\xe7\xe3o, as entidades criadas durante a transac\xe7\xe3o ser\xe3o tidas em conta."),(0,n.kt)("h4",r({},{id:"exemplo-7"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\nvar $number : Integer\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$number:=$ds. Persons.getCount()\n')),(0,n.kt)("h2",r({},{id:"getdatastore"}),".getDataStore()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getInfo()")," : Objeto"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"cs. DataStore"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informa\xe7\xe3o da dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-6"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".newSelection( )")," function cria uma nova selec\xe7\xe3o de entidade, em branco e n\xe3o partilh\xe1vel, relacionada com o dataclass, em mem\xf3ria."),(0,n.kt)("p",null,"A datastore pode ser:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"a datastore principal, retornada pelo comando ",(0,n.kt)("inlineCode",{parentName:"li"},"ds"),"."),(0,n.kt)("li",{parentName:"ul"},"uma datastore remota, aberta com o comando ",(0,n.kt)("inlineCode",{parentName:"li"},"Open datastore"),".")),(0,n.kt)("h4",r({},{id:"exemplo-8"}),"Exemplo"),(0,n.kt)("p",null,"O m\xe9todo de projeto ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"SearchDuplicate"))," procura por valores duplicados em qualquer dataclass."),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," Pode usar par\xeantesis na pesquisa para dar prioridade ao c\xe1lculo Por exemplo, pode organizar uma pesquisa da seguinte maneira: Por exemplo, pode organizar uma pesquisa da seguinte maneira:\n")),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'  // Pesquisa SearchDuplicate\n  // SearchDuplicate(entity_to_search;dataclass_name)\n\n #DECLARE ($pet : Object ; $dataClassName : Text)\n var $dataStore; $duplicates : Object  \n\n $dataStore:=$pet.getDataClass().getDataStore()\n $duplicates:=$dataStore[$dataClassName].query("name=:1";$pet.name)\n')),(0,n.kt)("h2",r({},{id:"getinfo"}),".getInfo()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A propriedade exposed foi adicionada")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getInfo()")," : Objeto "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Datastore da dataclass")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-7"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getInfo( )")," devolve um objecto que fornece informa\xe7\xe3o sobre o dataclass. Esta fun\xe7\xe3o \xe9 \xfatil para configurar o c\xf3digo gen\xe9rico."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Objeto devolvido")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"exposed"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se a dataclass for exposta em REST")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da dataclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"primaryKey"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da chave prim\xe1ria da classe de dados")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"tableNumber"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero daa tabela 4D interna")))),(0,n.kt)("h4",r({},{id:"exemplo-1-3"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' #DECLARE ($entity : Object)  \n var $status : Object\n\n computeEmployeeNumber($entity) //faz uma a\xe7\xe3o na entidade\n\n $status:=$entity.save()\n if($status.success)\n    ALERT("Record updated in table "+$entity.getDataClass().getInfo().name)\n End if\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-4"}),"Exemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $settings : Object\n var $es : cs. ClientsSelection\n\n $settings:=New object\n $settings.parameters:=New object("receivedIds";getIds())\n $settings.attributes:=New object("pk";ds. Clients.getInfo().primaryKey)\n $es:=ds. Clients.query(":pk in :receivedIds";$settings)\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-2"}),"Exemplo 3"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $pk : Text\n var $dataClassAttribute : Object\n\n $pk:=ds. Employee.getInfo().primaryKey\n $dataClassAttribute:=ds. Employee[$pk] // If needed the attribute matching the primary key is accessible\n")),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-1"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassAttributeClass#exposed"}),"DataClassAttribute.exposed")),(0,n.kt)("h2",r({},{id:"getremotecache"}),".getRemoteCache()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRemoteCache"),"() : Object "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objecto que descreve o conte\xfado da cache ORDA para o dataclass.")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Modo avan\xe7ado:")," Esta fun\xe7\xe3o destina-se a programadores que necessitem personalizar as caracter\xedsticas padr\xe3o ORDA para configura\xe7\xf5es espec\xedficas. Na maioria dos casos, n\xe3o necessitar\xe1 de o utilizar.")),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-8"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".getRemoteCache()")," devolve um objecto que cont\xe9m o conte\xfado da cache ORDA para uma dataclass.."),(0,n.kt)("p",null,"Chamar esta fun\xe7\xe3o a partir de uma aplica\xe7\xe3o 4D monousu\xe1rio retorna ",(0,n.kt)("inlineCode",{parentName:"p"},"Null"),"."),(0,n.kt)("p",null,"O objeto retornado tem as propriedades abaixo:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"maxEntries"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero m\xe1ximo de entradas recolhidas.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"stamp"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Carimbo da cache.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"timeout"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Tempo restante antes que as novas entradas na cache sejam marcadas como expiradas.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection")))),(0,n.kt)("p",null,"Cada objecto de entrada na colec\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"entradas")," tem as seguintes propriedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"data"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto que cont\xe9m os dados da entrada")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"expired"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se a entrada tiver expirado")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text")))),(0,n.kt)("p",null,"O objecto ",(0,n.kt)("inlineCode",{parentName:"p"},"data")," em cada entrada cont\xe9m as seguintes propriedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"__KEY"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Chave prim\xe1ria da entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"__STAMP"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Longint"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Stamp da entidade na base de dados")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"__TIMESTAMP"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Stamp da entidade na base de dados (formato \xe9 YYYY-MM-DDTHH:MM:SS:ms:Z)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"dataClassAttributeName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Diferente de"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Se houver dados na cache para um atributo dataclass, estes s\xe3o devolvidos numa propriedade com o mesmo tipo que na base de dados.")))),(0,n.kt)("p",null,"Os dados relativos a entidades relacionadas s\xe3o armazenados na cache do objecto de dados."),(0,n.kt)("h4",r({},{id:"exemplo-9"}),"Exemplo"),(0,n.kt)("p",null,"No exemplo seguinte, ",(0,n.kt)("inlineCode",{parentName:"p"},"$ds. Persons.all()")," carrega a primeira entidade com todos os seus atributos. Depois, a optimiza\xe7\xe3o do pedido \xe9 desencadeada, pelo que apenas ",(0,n.kt)("inlineCode",{parentName:"p"},"firstname")," e ",(0,n.kt)("inlineCode",{parentName:"p"},"address.city")," s\xe3o carregados."),(0,n.kt)("p",null,"Note-se que ",(0,n.kt)("inlineCode",{parentName:"p"},"address.city")," \xe9 carregado na cache do ",(0,n.kt)("inlineCode",{parentName:"p"},"Pessoas")," dataclass."),(0,n.kt)("p",null,"Apenas a primeira entidade do ",(0,n.kt)("inlineCode",{parentName:"p"},"endere\xe7o")," dataclass \xe9 armazenada na cache. \xc9 carregado durante a primeira itera\xe7\xe3o do loop."),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\nvar $persons : cs. PersonsSelection\nvar $p : cs. PersonsEntity\nvar $cachePersons; $cacheAddress : Object\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$persons:=$ds. Persons.all()\n\n$text:="" For each ($p; $persons)\n    $text:=$p.firstname+" lives in "+$p.address.city+" / " End for each\n\n$cachePersons:=$ds. Persons.getRemoteCache()\n$cacheAddress:=$ds. Adress.getRemoteCache()\n')),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-2"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#setremotecachesettings"}),".setRemoteCacheSettings()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearremotecache"}),".clearRemoteCache()")),(0,n.kt)("h2",r({},{id:"new"}),".new()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".new()")," : 4D. Entity "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nova entidade que coincide com a classe de dados")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-9"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".new()")," cria em mem\xf3ria e devolve uma nova entidade em branco relacionada com a Dataclass."),(0,n.kt)("p",null,"O objeto entidade se cria em mem\xf3ria e n\xe3o se guarda no banco de dados at\xe9 que se chama a fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/EntityClass#save"}),(0,n.kt)("inlineCode",{parentName:"a"},".save( )")),". Se a entidade for apagada antes de ser salva, n\xe3o se pode recuperar."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"4D Server"),": e\xe1m cliente-servidor, se a chave primaria da tabela correspondente se autoincrementa, se calcular\xe1 quando a entidade se guarde no servidor."),(0,n.kt)("p",null,"Todos os atributos da entidade s\xe3o inicializados com o valor ",(0,n.kt)("strong",{parentName:"p"},"null")," ."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Os atributos podem ser inicializados com valores por padr\xe3o se a op\xe7\xe3o ",(0,n.kt)("strong",{parentName:"p"},"Map NULL values to blank values")," for seleccionada ao n\xedvel da estrutura da base de dados 4D.")),(0,n.kt)("h4",r({},{id:"exemplo-10"}),"Exemplo"),(0,n.kt)("p",null,'Este exemplo cria uma nova entidade na classe de dados "Log" e registra a informa\xe7\xe3o no atributo "info":'),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $entity : cs. LogEntity\n $entity:=ds. Log.new() //create a reference\n $entity.info:="New entry" //store some information\n $entity.save() //save the entity\n')),(0,n.kt)("h2",r({},{id:"newselection"}),".newSelection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".newSelection"),"( { ",(0,n.kt)("em",{parentName:"p"},"keepOrder")," : Integer } ) : 4D. EntitySelection "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"keepOrder"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk keep ordered"),": cria uma sele\xe7\xe3o de entidades ordenada,",(0,n.kt)("br",null),(0,n.kt)("inlineCode",{parentName:"td"},"dk non ordered"),": cria uma sele\xe7\xe3o de entidade n\xe3o ordenada (padr\xe3o se omitido)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nova sele\xe7\xe3o de entidades em branco relacionadas com a classe de dados")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-10"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".newSelection()")," cria uma nova selec\xe7\xe3o de entidade, em branco e n\xe3o partilh\xe1vel, relacionada com o dataclass, em mem\xf3ria."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para mais informa\xe7\xe3o sobre as sele\xe7\xf5ees de entidades n\xe3o compartilh\xe1veis, consulte ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#shareable-or-non-shareable-entity-selections"}),"esta se\xe7\xe3o"),".")),(0,n.kt)("p",null,"Se quiser uma sele\xe7\xe3o de entidades ordenada, passe o seletor ",(0,n.kt)("inlineCode",{parentName:"p"},"dk keep ordered")," no par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"keepOrder"),". Como padr\xe3o se omitir este par\xe2metro ou se passar o seletor ",(0,n.kt)("inlineCode",{parentName:"p"},"dk non ordered"),", o m\xe9todo cria uma sele\xe7\xe3o de entidades n\xe3o ordenada. As sele\xe7\xf5es de entidades desordenadas s\xe3o mais r\xe1pidas mas n\xe3o se pode confiar nas posi\xe7\xf5es das entidades. Para mas informa\xe7\xe3o, consulte ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/dsmapping#ordered-or-unordered-entity-selection"}),"Sele\xe7\xf5es de entidades ordenadas e desordenadas"),"."),(0,n.kt)("p",null,"Quando for criada, a sele\xe7\xe3o de entidades n\xe3o cont\xe9m nenhuma entidade (",(0,n.kt)("inlineCode",{parentName:"p"},"mySelection.length")," devolve 0). Este m\xe9todo lhe permite criar sele\xe7\xf5es de entidades gradualmente fazendo chamadas posteriores \xe0 fun\xe7\xe3o ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/EntitySelectionClass#add"}),(0,n.kt)("inlineCode",{parentName:"a"},"add()")),"."),(0,n.kt)("h4",r({},{id:"exemplo-11"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $USelection; $OSelection : cs. EmployeeSelection\n $USelection:=ds. Employee.newSelection() //create an unordered empty entity selection\n $OSelection:=ds. Employee.newSelection(dk keep ordered) //create an ordered empty entity selection\n")),(0,n.kt)("h2",r({},{id:"query"}),".query()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Soporte dos Par\xe2metros Formula")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Suporte dos marcadores para os valores")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".query"),"( ",(0,n.kt)("em",{parentName:"p"},"queryString")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"...value")," : any } { ; ",(0,n.kt)("em",{parentName:"p"},"querySettings")," : Object } ) : 4D. EntitySelection ",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".query"),"( ",(0,n.kt)("em",{parentName:"p"},"formula")," : Object { ; ",(0,n.kt)("em",{parentName:"p"},"querySettings")," : Object } ) : 4D. EntitySelection "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"queryString"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Criterios de pesquisa como string")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"formula"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Criterios de pesquisa como objeto f\xf3rmula")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"value"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"any"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valores a usar para placeholders indexados")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"querySettings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Op\xe7\xf5es de pesquisa: par\xe2metros, atributos, args, allowFormulas, contexto, queryPath,queryPlan")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nova sele\xe7\xe3o de entidade feita de entidades de dataclass realizano o crit\xe9rio de pesquia especificado em ",(0,n.kt)("em",{parentName:"td"},"queryString")," or ",(0,n.kt)("em",{parentName:"td"},"formula"))))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-11"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"A fun\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},".query()")," pesquisa por  entidades que satisfa\xe7am os crit\xe9rios de pesquisa especificados em ",(0,n.kt)("em",{parentName:"p"},"queryString")," ou ",(0,n.kt)("em",{parentName:"p"},"f\xf3rmula")," e (opcionalmente) ",(0,n.kt)("em",{parentName:"p"},"valor"),"(s), para todas as entidades no dataclass, e devolve um novo objecto do tipo ",(0,n.kt)("inlineCode",{parentName:"p"},"EntitySelection")," contendo todas as entidades que s\xe3o encontradas. Se aplica carregamento diferido/lazy loading."),(0,n.kt)("p",null,"Se n\xe3o houver entidades correspondentes encontradas, uma ",(0,n.kt)("inlineCode",{parentName:"p"},"EntitySelection")," vazia \xe9 retornada."),(0,n.kt)("h4",r({},{id:"querystring-parameter"}),"queryString parameter"),(0,n.kt)("p",null,"O par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"queryString")," usa a sintaxe abaixo:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"attributePath|formula comparator value   \n {logicalOperator attributePath|formula comparator value}   \n {order by attributePath {desc | asc}}\n")),(0,n.kt)("p",null,"where:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"attributePath"),": caminho de atributo no qual se pretende executar a consulta. Os atributos se expressam como pares propriedade/ valor, onde propriedade \xe9 o nome do marcador de posi\xe7\xe3o inserido para uma rota de atributo em ",(0,n.kt)("em",{parentName:"p"},"queryString")," ou ",(0,n.kt)("em",{parentName:"p"},"formula"),' (":placeholder") e valor pode ser uma string ou uma cole\xe7\xe3o de strings. In case of an attribute path whose type is ',(0,n.kt)("inlineCode",{parentName:"p"},"Collection"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"[]")," notation is used to handle all the occurences (for example ",(0,n.kt)("inlineCode",{parentName:"p"},"children[].age"),")."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("em",{parentName:"p"},'N\xe3o pode usar diretamente atributos cujo nome contenha caracteres especiais como ".", "',"[",' ]", or "=", ">", "#"..., porque ser\xe3o avaliados incorretamente na string da query. Se precisar de uma query com esses atributos, deve considerar o uso de placeholders que permitem uma gama estendida de caracteres em rotas de atributo (ver')," ",(0,n.kt)("strong",{parentName:"p"},"Using placeholders")," ",(0,n.kt)("em",{parentName:"p"},"below).")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"formula"),": uma f\xf3rmula v\xe1lida passada como ",(0,n.kt)("inlineCode",{parentName:"p"},"Text")," ou ",(0,n.kt)("inlineCode",{parentName:"p"},"Object"),". A f\xf3rmula ser\xe1 avaliada para cada entidade processada e deve retornar um valor booleano. Dentro da f\xf3rmula, a entidade est\xe1 dispon\xedvel atrav\xe9s do objeto ",(0,n.kt)("inlineCode",{parentName:"p"},"This"),"."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Text"),": A string de f\xf3rmula deve ser precidida da declara\xe7\xe3o ",(0,n.kt)("inlineCode",{parentName:"p"},"eval( )"),",para que o parser da pesquisa avalie a express\xe3o corretamente. Por exemplo: ",(0,n.kt)("em",{parentName:"p"},'"eval(length(This.lastname) >=30)"'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Object"),": o objeto ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/FunctionClass"}),"formula")," \xe9 passado como um ",(0,n.kt)("strong",{parentName:"p"},"placeholder")," (ver abaixo). A f\xf3rmula deve ter sido criada usando  ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/FunctionClass#formula"}),(0,n.kt)("inlineCode",{parentName:"a"},"Formula"))," ou o comando",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/FunctionClass#formula-from-string"}),(0,n.kt)("inlineCode",{parentName:"a"},"Formula from string"))," command."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"Keep in mind that 4D formulas only support ",(0,n.kt)("inlineCode",{parentName:"li"},"&")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"|")," symbols as logical operators."))))))),(0,n.kt)("li",{parentName:"ul"},"Se a f\xf3rmula n\xe3o for o \xfanico crit\xe9rio de pesquisa, o otimizador de motor debusca poderia processar outros crit\xe9rios previamente (por exemplo atributos indexados) e assim, a f\xf3rmula poderia ser avaliada apenas para um subconjunto de entidades."))),(0,n.kt)("p",{parentName:"li"}," F\xf3rmulas nas consultas podem receber par\xe2metros atrav\xe9s de $1. Este ponto \xe9 detalhado no par\xe1grafo ",(0,n.kt)("strong",{parentName:"p"},"Par\xe2metro f\xf3rmula")," mais abaixo."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"Tamb\xe9m pode passar diretamente um objeto par\xe2metro ",(0,n.kt)("inlineCode",{parentName:"li"},"formula")," ao inv\xe9s do par\xe2metro ",(0,n.kt)("inlineCode",{parentName:"li"},"queryString")," (recomendado quando as f\xf3rmulas sejam mais complexas). Ver o par\xe1grafo ",(0,n.kt)("strong",{parentName:"li"},"Par\xe2metro f\xf3rmula")," mais abaixo."),(0,n.kt)("li",{parentName:"ul"},"Por raz\xf5es de seguran\xe7a, as chamadas a f\xf3rmulas dentro dos m\xe9todos ",(0,n.kt)("inlineCode",{parentName:"li"},"query()")," podem ser desativadas. Veja a descri\xe7\xe3o do par\xe2metro ",(0,n.kt)("inlineCode",{parentName:"li"},"querySettings"),".")))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"comparator"),": symbol que compara ",(0,n.kt)("em",{parentName:"p"},"attributePath")," e ",(0,n.kt)("em",{parentName:"p"},"valor"),". Os simbolos abaixo s\xe3o compat\xedveis:"),(0,n.kt)("table",{parentName:"li"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Compara\xe7\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"S\xedmbolos"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Igual a"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"=, =="),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Retorna os dados coincidentes, admite o coringa (@), n\xe3o diferencia entre mai\xfasculas e min\xfasculas nem diacr\xedticas.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"===, IS"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Retorna os dados coincidentes, considera @ como caractere padr\xe3o, n\xe3o diferencia entre mai\xfasculas e min\xfasculas nem diacr\xedticas")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Diferente de"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"#, !="),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Supports the wildcard (@). Equivalent to "Not condition applied on a statement" (',(0,n.kt)("a",r({parentName:"td"},{href:"#not-equal-to-in-collections"}),"see below"),").")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"!==, IS NOT"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Considera  @ como um caractere normal")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xe3o se aplica \xe0 condi\xe7\xe3o de uma senten\xe7a"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"NOT"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Parenthesis are mandatory when NOT is used before a statement containing several operators. Equivalent to "Not equal to" (',(0,n.kt)("a",r({parentName:"td"},{href:"#not-equal-to-in-collections"}),"see below"),").")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Menor que"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Maior que"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),">"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Menor que ou igual a"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<="),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Maior ou igual a"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),">="),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Inclu\xeddo em"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"IN"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Retorna dados iguais a ao menos um dos valores de uma cole\xe7\xe3o ou de um conjunto de valores, admite o coringa (@)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cont\xe9m palavra chave"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"%"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"As palavras chaves podem ser usadas em atributos de string ou imagem"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"value"),": o valor a comparar ao valor atual da propriedade de cada entidade na sele\xe7\xe3o de entidade ou elemento na cole\xe7\xe3o. Pode ser um ",(0,n.kt)("strong",{parentName:"p"},"marcador")," (ver ",(0,n.kt)("strong",{parentName:"p"},"Uso de marcadores")," mais adiante) ou qualquer express\xe3o que coincida com a propriedad de tipo de dados. Quando usar um valor constante, as regras abaixo devem ser respeitadas:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"A constante de tipo ",(0,n.kt)("strong",{parentName:"li"},"texto")," pode ser passada com ou sem aspas simples (ver ",(0,n.kt)("strong",{parentName:"li"},"Uso de aspas"),' mais abaixo). Para pesquisar uma stirng dentro de uma string (uma pesquisa "cont\xe9m") use o s\xedmbolo coringa (@) em valor para isolar a string a ser pesquisada como mostrado neste exemplo: "@Smith@". As palavras chaves abaixo s\xe3o proibidas para constantes de texto: true, false.'),(0,n.kt)("li",{parentName:"ul"},"Valores constantes de tipo ",(0,n.kt)("strong",{parentName:"li"},"booleano")," : ",(0,n.kt)("strong",{parentName:"li"},"true")," ou ",(0,n.kt)("strong",{parentName:"li"},"false")," (diferencia maiuscula de min\xfascula)."),(0,n.kt)("li",{parentName:"ul"},"Valores constantes de tipo ",(0,n.kt)("strong",{parentName:"li"},"num\xe9rico"),": os decimais se separam com um '.' (ponto)."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"data"),' tipo constants: formato "YYYYY-MM-DD".'),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"null"),' constante: usando a palavra chave "null" encontra as propriedades ',(0,n.kt)("strong",{parentName:"li"},"null")," e ",(0,n.kt)("strong",{parentName:"li"},"undefined"),"."),(0,n.kt)("li",{parentName:"ul"},"no caso de uma pesquisa com um comparador IN, o valor deve uma cole\xe7\xe3o, ou valores que coincidam com o tipo da rota do atributo entre ","[",' ] separados por v\xedrgulas (para as strings, os caracteres " devem escapar-se com "\\").'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"logicalOperator"),": utilizado para unir condi\xe7\xf5es m\xfaltiplas na pesquisa (opcional). Pode usaar um dos operadores l\xf3gicos abaixo (ou o nome ou o s\xedmbolo podem ser usados):"),(0,n.kt)("table",{parentName:"li"},(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Conjun\xe7\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"S\xedmbolos"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"AND"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"&, &&, and")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"OU"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"|",",","|","|",", or"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"order by attributePath"),": pode incluir uma declara\xe7\xe3o order by ",(0,n.kt)("em",{parentName:"p"},"attributePath")," na pesquisa para que os dados resultantes sejam ordenados de acordo com esta declara\xe7\xe3o. Pode utilizar v\xe1rias instru\xe7\xf5es de ordena\xe7\xe3o, separadas por v\xedrgulas (por exemplo, ordena\xe7\xe3o por ",(0,n.kt)("em",{parentName:"p"},"attributePath1")," desc, ",(0,n.kt)("em",{parentName:"p"},"attributePath2")," asc). Como padr\xe3o, a ordem \xe9 ascendente. Passe 'desc'' para definir uma ordem descendente e 'asc' para definir uma ordem ascendente. > > *If you use this statement, the returned entity selection is ordered (for more information, please refer to ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/dsmapping#ordered-or-unordered-entity-selection"}),"Ordered vs Unordered entity selections"),")."))),(0,n.kt)("h4",r({},{id:"using-quotes"}),"Using quotes"),(0,n.kt)("p",null,"When you use quotes within queries, you must use single quotes ' ' inside the query and double quotes \" \" to enclose the whole query, otherwise an error is returned. Por exemplo:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"\"employee.name = 'smith' AND employee.firstname = 'john'\"\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Aspas siples (') n\xe3o s\xe3o permitidas nos valores pesquisados, j\xe1 que quebrariam a string de pesquisa. Por exemplo, \"comp.name = 'John's pizza' \" gerar\xe1 um erro. Se precisar pesquisar valores com aspas simples, pode considerar o uso de placeholders (ver abaixo).")),(0,n.kt)("h4",r({},{id:"using-parenthesis"}),"Using parenthesis"),(0,n.kt)("p",null,"You can use parentheses in the query to give priority to the calculation. For example, you can organize a query as follows:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"\"(employee.age >= 30 OR employee.age <= 65) AND (employee.salary <= 10000 OR employee.status = 'Manager')\"\n")),(0,n.kt)("h4",r({},{id:"using-placeholders"}),"Using placeholders"),(0,n.kt)("p",null,"4D allows you to use placeholders for ",(0,n.kt)("em",{parentName:"p"},"attributePath"),", ",(0,n.kt)("em",{parentName:"p"},"formula")," and ",(0,n.kt)("em",{parentName:"p"},"value")," arguments within the ",(0,n.kt)("em",{parentName:"p"},"queryString")," parameter. A placeholder is a parameter that you insert in query strings and that is replaced by another value when the query string is evaluated. The value of placeholders is evaluated once at the beginning of the query; it is not evaluated for each element."),(0,n.kt)("p",null,"Two types of placeholders can be used: ",(0,n.kt)("strong",{parentName:"p"},"indexed placeholders")," and ",(0,n.kt)("strong",{parentName:"p"},"named placeholders"),":"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Marcadores de posi\xe7\xe3o indexados"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Placeholders nomeados"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Defini\xe7\xe3o"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Os par\xe2metros s\xe3o inseridos como :paramIndex (por exemplo :1, :2...) em queryString e seus valores correspondentes s\xe3o fornecidos pela sequ\xeancia de par\xe2metros value. Pode usara at\xe9 128 par\xe2metros de valor"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Os par\xe2metros s\xe3o inseridos como: paramName (por exemplo :myparam) e seus valores se proporcionam nos atributos ou objetos de par\xe2metros no par\xe1metro querySettings")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Exemplo"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},'$r:=class.query(":1=:2";"city";"Chicago")')),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'$o.attributes:=New object("att";"city")',(0,n.kt)("br",null),' $o.parameters:=New object("name";"Chicago")',(0,n.kt)("br",null),' $r:=class.query(":att=:name";$o)')))),(0,n.kt)("p",null,"You can mix all argument kinds in ",(0,n.kt)("em",{parentName:"p"},"queryString"),". A ",(0,n.kt)("em",{parentName:"p"},"queryString")," can contain, for ",(0,n.kt)("em",{parentName:"p"},"attributePath"),", ",(0,n.kt)("em",{parentName:"p"},"formula")," and ",(0,n.kt)("em",{parentName:"p"},"value")," parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"valores diretos (sem marcadores),"),(0,n.kt)("li",{parentName:"ul"},"marcadores indexados ou com nome.")),(0,n.kt)("p",null,"Using placeholders in queries ",(0,n.kt)("strong",{parentName:"p"},"is recommended")," for the following reasons:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Evita a inser\xe7\xe3o de c\xf3digo malicioso: se user diretamente vari\xe1veis preenchidas com uma string de pesquisa, um usu\xe1rio poderia modificar as condi\xe7\xf5es de pesquisa entrando argumentos adicionais. Por exemplo, imagine uma string de pesquisa como:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," $vquery:=\"status = 'public' & name = \"+myname //o usu\xe1rio introduz seu nome\n $result:=$col.query($vquery)\n")),(0,n.kt)("p",{parentName:"li"},"This query seems secured since non-public data are filtered. However, if the user enters in the ",(0,n.kt)("em",{parentName:"p"},"myname")," area something like ",(0,n.kt)("em",{parentName:"p"},"\"smith OR status='private'"),", the query string would be modified at the interpretation step and could return private data."),(0,n.kt)("p",{parentName:"li"},"When using placeholders, overriding security conditions is not possible:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," $result:=$col.query(\"status='public' & name=:1\";myname)\n")),(0,n.kt)("p",{parentName:"li"},"In this case if the user enters ",(0,n.kt)("em",{parentName:"p"},"smith OR status='private'")," in the ",(0,n.kt)("em",{parentName:"p"},"myname")," area, it will not be interpreted in the query string, but only passed as a value. Looking for a person named \"smith OR status='private'\" will just fail.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Evita ter que se preocupar por quest\xf5es de formato ou caracteres, especialmente quando se manejam os par\xe2metros ",(0,n.kt)("em",{parentName:"p"},"attributePath")," o ",(0,n.kt)("em",{parentName:"p"},"value"),' que podem conter n\xe3o alfanum\xe9ricos como ".", "[\'...')),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Permite o uso de vari\xe1veis ou express\xf5es nos argumentos de pesquisa. Exemplos:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$result:=$col.query("address.city = :1 & name =:2";$city;$myVar+"@")\n$result2:=$col.query("company.name = :1";"John\'s Pizzas")\n')))),(0,n.kt)("h4",r({},{id:"looking-for-null-values"}),"Looking for null values"),(0,n.kt)("p",null,"When you look for null values, you cannot use the placeholder syntax because the query engine considers null as an unexpected comparison value. For example, if you execute the following query:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$vSingles:=ds. Person.query("spouse = :1";Null) // will NOT work\n')),(0,n.kt)("p",null,"You will not get the expected result because the null value will be evaluated by 4D as an error resulting from the parameter evaluation (for example, an attribute coming from another query). For these kinds of queries, you must use the direct query syntax:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $vSingles:=ds. Person.query("spouse = null") //correct syntax\n')),(0,n.kt)("h4",r({},{id:"not-equal-to-in-collections"}),"Not equal to in collections"),(0,n.kt)("p",null,'When searching within dataclass object attributes containing collections, the "not equal to ',(0,n.kt)("em",{parentName:"p"},"value"),'" comparator (',(0,n.kt)("inlineCode",{parentName:"p"},"#")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"!="),") will find elements where ALL properties are different from ",(0,n.kt)("em",{parentName:"p"},"value")," (and not those where AT LEAST one property is different from ",(0,n.kt)("em",{parentName:"p"},"value"),', which is how work other comparators). Basically, it is equivalent to search for "Not(find collection elements where property equals ',(0,n.kt)("em",{parentName:"p"},"value"),'"). For example, with the following entities:'),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{}),'Entity 1:\nds.Class.name: "A"\nds.Class.info:\n    { "coll" : [ {\n                "val":1,\n                "val":1\n            } ] }\n\nEntity 2:\nds.Class.name: "B"\nds.Class.info:\n    { "coll" : [ {\n                "val":1,\n                "val":0\n            } ] }\n\nEntity 3:\nds.Class.name: "C"\nds.Class.info:\n    { "coll" : [ {\n                "val":0,\n                "val":0\n            } ] }\n')),(0,n.kt)("p",null,"Consider the following results:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'ds.Class.query("info.coll[].val = :1";0) \n// returns B and C\n// finds "entities with 0 in at least one val property"\n\nds.Class.query("info.coll[].val != :1";0)\n// returns A only\n// finds "entities where all val properties are different from 0"\n// which is the equivalent to \nds.Class.query(not("info.coll[].val = :1";0)) \n')),(0,n.kt)("p",null,'If you want to implement a query that finds entities where "at least one property is different from ',(0,n.kt)("em",{parentName:"p"},"value"),'", you need to use a special notation using a letter in the ',(0,n.kt)("inlineCode",{parentName:"p"},"[]"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'ds.Class.query("info.coll[a].val != :1";0)  \n// returns A and B\n// finds "entities where at least one val property is different from 0"\n')),(0,n.kt)("p",null,"You can use any letter from the alphabet as the ",(0,n.kt)("inlineCode",{parentName:"p"},"[a]")," notation."),(0,n.kt)("h4",r({},{id:"linking-collection-attribute-query-arguments"}),"Linking collection attribute query arguments"),(0,n.kt)("admonition",r({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"This feature is only available in queries on dataclasses and ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/EntitySelectionClass#query"}),"entity selections"),". It cannot be used in queries on ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/CollectionClass#query"}),"collections"),".")),(0,n.kt)("p",null,"When searching within dataclass object attributes containing collections using multiple query arguments joined by the AND operator, you may want to make sure that only entities containing elements that match all arguments are returned, and not entities where arguments can be found in different elements. To do this, you need to link query arguments to collection elements, so that only single elements containing linked arguments are found."),(0,n.kt)("p",null,"For example, with the following two entities:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{}),'Entity 1:\nds. People.name: "martin"\nds. People.places:\n    { "locations" : [ {\n                "kind":"home",\n                "city":"paris"\n            } ] } Entity 2:\nds. People.name: "smith"\nds. People.places:\n    { "locations" : [ {\n                "kind":"home",\n                "city":"lyon"\n            } , {\n                "kind":"office",\n                "city":"paris"\n            } ] }\n')),(0,n.kt)("p",null,'You want to find people with a "home" location kind in the city "paris". If you write:'),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'ds. People.query("places.locations[].kind= :1 and places.locations[].city= :2";"home";"paris")\n')),(0,n.kt)("p",null,'... the query will return "martin" ',(0,n.kt)("strong",{parentName:"p"},"and"),' "smith" because "smith" has a "locations" element whose "kind" is "home" and a "locations" element whose "city" is "paris", even though they are different elements.'),(0,n.kt)("p",null,"If you want to only get entities where matching arguments are in the same collection element, you need to ",(0,n.kt)("strong",{parentName:"p"},"link arguments"),". To link query arguments:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Adicionar uma letra entre os ","[","] na primeira rota a linkar e repita a mesma letra em todos os argumentos linkados. Por exemplo: ",(0,n.kt)("inlineCode",{parentName:"li"},"locations[a].city and locations[a].kind"),". Pode usar qualquer letra do alfabeto latino (n\xe3o diferencia mai\xfasculas e min\xfasculas)."),(0,n.kt)("li",{parentName:"ul"},"Para adicionar crit\xe9rios linkados na mesma pesquisa, use outra letra. Pode criar at\xe9 26 combina\xe7\xf5es de crit\xe9rios em uma \xfanica pesquisa.")),(0,n.kt)("p",null,"With the above entities, if you write:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'ds. People.query("places.locations[a].kind= :1 and places.locations[a].city= :2";"home";"paris")\n')),(0,n.kt)("p",null,'... the query will only return "martin" because it has a "locations" element whose "kind" is "home" and whose "city" is "paris". The query will not return "smith" because the values "home" and "paris" are not in the same collection element.'),(0,n.kt)("h4",r({},{id:"queries-in-many-to-many-relations"}),"Queries in many-to-many relations"),(0,n.kt)("p",null,"ORDA offers a special syntax to facilitate queries in many-to-many relations. In this context, you may need to search for different values with an ",(0,n.kt)("inlineCode",{parentName:"p"},"AND")," operator BUT in the same attribute. For example, take a look at the following structure:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"alt-text",src:a(75376).Z,width:"537",height:"268"})),(0,n.kt)("p",null,"Imagine that you want to search all movies in which ",(0,n.kt)("em",{parentName:"p"},"both")," actor A and actor B have a role. If you write a simple query using an ",(0,n.kt)("inlineCode",{parentName:"p"},"AND")," operator, it will not work:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'// invalid code\n$es:=ds. Movie.query("roles.actor.lastName = :1 AND roles.actor.lastName = :2";"Hanks";"Ryan")  \n// $es is empty\n')),(0,n.kt)("p",null,'Basically, the issue is related to the internal logic of the query: you cannot search for an attribute whose value would be both "A" and "B".'),(0,n.kt)("p",null,"To make it possible to perform such queries, ORDA allows a special syntax: you just need to add a ",(0,n.kt)("em",{parentName:"p"},"class index")," between ",(0,n.kt)("strong",{parentName:"p"},"{}")," in all additional relation attributes used in the string:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'"relationAttribute.attribute = :1 AND relationAttribute{x}.attribute = :2 [AND relationAttribute{y}.attribute...]"\n')),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"{x}")," tells ORDA to create another reference for the relation attribute. It will then perform all the necessary bitmap operations internally. Note that ",(0,n.kt)("strong",{parentName:"p"},"x")," can be any number ",(0,n.kt)("strong",{parentName:"p"},"except 0"),": {1}, or {2}, or {1540}... ORDA only needs a unique reference in the query for each class index."),(0,n.kt)("p",null,"In our example, it would be:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'// valid code\n$es:=ds. Movie.query("roles.actor.lastName = :1 AND roles.actor{2}.lastName = :2";"Hanks";"Ryan")  \n// $es contains movies (You\'ve Got Mail, Sleepless in Seattle, Joe Versus the Volcano)\n')),(0,n.kt)("h4",r({},{id:"formula-parameter"}),"formula parameter"),(0,n.kt)("p",null,"As an alternative to formula insertion within the ",(0,n.kt)("em",{parentName:"p"},"queryString")," parameter (see above), you can pass directly a formula object as a boolean search criteria. Using a formula object for queries is ",(0,n.kt)("strong",{parentName:"p"},"recommended")," since you benefit from tokenization, and code is easier to search/read."),(0,n.kt)("p",null,"A f\xf3rmula deve ter sido criada usando  ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/FunctionClass#formula"}),(0,n.kt)("inlineCode",{parentName:"a"},"Formula"))," ou o comando",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/FunctionClass#formula-from-string"}),(0,n.kt)("inlineCode",{parentName:"a"},"Formula from string"))," command. In this case:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"f\xf3rmula")," se avalia para cada entidade e deve devolver true ou false. Durante a execu\xe7\xe3o da pesquisa, se o resultado da f\xf3rmula n\xe3o for booleano, \xe9 considerado como False."),(0,n.kt)("li",{parentName:"ul"},"dentro da ",(0,n.kt)("em",{parentName:"li"},"f\xf3rmula"),", a entidade est\xe1 dispon\xedvel atrav\xe9s do objeto ",(0,n.kt)("inlineCode",{parentName:"li"},"This"),"."),(0,n.kt)("li",{parentName:"ul"},"Se o objeto ",(0,n.kt)("inlineCode",{parentName:"li"},"Formula")," for ",(0,n.kt)("strong",{parentName:"li"},"null"),', o errro 1626 ("Expecting a text or formula") \xe9 gerado, ent\xe3o pode interceptar a chamada com o m\xe9todo instalado ',(0,n.kt)("inlineCode",{parentName:"li"},"ON ERR CALL"),".",(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Por raz\xf5es de seguran\xe7a, as chamadas a f\xf3rmulas dentro dos m\xe9todos ",(0,n.kt)("inlineCode",{parentName:"p"},"query()")," podem ser desativadas. Veja a descri\xe7\xe3o do par\xe2metro ",(0,n.kt)("em",{parentName:"p"},"querySettings"),".")))),(0,n.kt)("h4",r({},{id:"passing-parameters-to-formulas"}),"Passing parameters to formulas"),(0,n.kt)("p",null,"Any ",(0,n.kt)("em",{parentName:"p"},"formula")," called by the ",(0,n.kt)("inlineCode",{parentName:"p"},"query()")," class function can receive parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Par\xe2meters devem ser passados atrav\xe9s da propriedade  ",(0,n.kt)("strong",{parentName:"li"},"args"),"  (objeto) do par\xe2metro ",(0,n.kt)("em",{parentName:"li"},"querySettings"),"."),(0,n.kt)("li",{parentName:"ul"},"A f\xf3rmula recebe este objeto ",(0,n.kt)("strong",{parentName:"li"},"args")," como um par\xe2metro ",(0,n.kt)("strong",{parentName:"li"},"$1"),".")),(0,n.kt)("p",null,"This small code shows the principles of how parameter are passed to methods:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $settings:=New object("args";New object("exclude";"-")) //args object to pass parameters\n $es:=ds. Students.query("eval(checkName($1.exclude))";$settings) //args is received in $1\n')),(0,n.kt)("p",null,"Additional examples are provided in example 3."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"4D Server"),": In client/server, formulas are executed on the server. In this context, only the ",(0,n.kt)("inlineCode",{parentName:"p"},"querySettings.args")," object is sent to the formulas."),(0,n.kt)("h4",r({},{id:"querysettings-parameter"}),"querySettings parameter"),(0,n.kt)("p",null,"In the ",(0,n.kt)("em",{parentName:"p"},"querySettings")," parameter, you can pass an object containing additional options. The following properties are supported:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"parameters"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"Marcadores nomeados para os valores")," utilizados em ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"f\xf3rmula"),". Os valores se expressam como pares propriedade / valor, onde propriedade \xe9 o nome do marcador de posi\xe7\xe3o inserido para um valor em ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"formula"),' (":placeholder") e valor \xe9 o valor a comparar. Pode combinar marcadores de posi\xe7\xe3o indexados (valores passados diretamente em par\xe2metros de valor) e valores de marcadores de posi\xe7\xe3o com nome na mesma pesquisa.')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributes"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"attributePath"),": path of attribute on which you want to execute the query. Os atributos se expressam como pares propriedade/ valor, onde propriedade \xe9 o nome do marcador de posi\xe7\xe3o inserido para uma rota de atributo em ",(0,n.kt)("em",{parentName:"td"},"queryString")," ou ",(0,n.kt)("em",{parentName:"td"},"formula"),' (":placeholder") e valor pode ser uma string ou uma cole\xe7\xe3o de strings. Cada valor e uma rota que pode designar um escalar ou um atributo relacionado da dataclass ou uma propriedade num campo de objeto da dataclass',(0,n.kt)("table",null,(0,n.kt)("tr",null,(0,n.kt)("th",null,"Tipo"),(0,n.kt)("th",null,"Descri\xe7\xe3o")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"String"),(0,n.kt)("td",null,'attributePath expressado com a nota\xe7\xe3o de pontos, por exemplo: "name" ou "user.address.zipCode"')),(0,n.kt)("tr",null,(0,n.kt)("td",null,"Cole\xe7\xe3o de strings"),(0,n.kt)("td",null,"Cada string da cole\xe7\xe3o representa um n\xedvel de attributePath, por exemplo: ","[",'"name"] ou ',"[",'"user","address","zipCode"]. Usar uma cole\xe7\xe3o permite pesquisar atributos com nomes que n\xe3o se ajustem \xe0 nota\xe7\xe3o de pontos, por exemplo ',"[",'"4Dv17.1","en/fr"]'))),"Pode combinar marcadores de posi\xe7\xe3o indexados (valores passados diretamente nos par\xe2metros ",(0,n.kt)("em",{parentName:"td"},"value"),") e os valores de marcadores de posi\xe7\xe3o com nome na mesma pesquisa.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"args"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe1metro(s) a passar para as f\xf3rmulas, se houver. O objeto ",(0,n.kt)("strong",{parentName:"td"},"args")," ser\xe1 recebido em $1 dentro das f\xf3rmulas e, portanto, seus valores estar\xe3o dispon\xedveis atrav\xe9s de ",(0,n.kt)("em",{parentName:"td"},"$1.property")," (ver exemplo 3).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"allowFormulas"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True para permitir as chamadas de f\xf3rmulas na pesquisa (padr\xe3o). Passe falso para desautorizar a execu\xe7\xe3o de f\xf3rmulas. Se for estabelecido como false y ",(0,n.kt)("inlineCode",{parentName:"td"},"query()")," receber uma f\xf3rmula, se envia um erro (1278 - F\xf3rmula n\xe3o permitida neste m\xe9todo membro).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"context"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Etiqueta para o contexto de otimiza\xe7\xe3o autom\xe1tico aplicados \xe0 sele\xe7\xe3o de entidade. Este contexto ser\xe1 utilizado pelo c\xf3digo que maneja a sele\xe7\xe3o de entidades para que possa se beneficiar da otimiza\xe7\xe3o. Esta fun\xe7\xe3o est\xe1 projetada para o processamento cliente/servidor; para saber mais, consulte ",(0,n.kt)("strong",{parentName:"td"},"Otimiza\xe7\xe3o cliente/servidor"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"queryPlan"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Na entity selection resultante, devolve ou n\xe3o a descri\xe7\xe3o detalhada da pesquisa logo antes de ser executada, ou seja, a pesquisa planificada. A propriedade devolvida \xe9 um objeto que inclui cada pesquisa e subpesquisa prevista (no caso de uma pesquisa complexa). Esta op\xe7\xe3o \xe9 \xfatil durante a fase de desenvolvimento de uma aplica\xe7\xe3o. Geralmente \xe9 usada em conjunto com queryPath. Como padr\xe3o \xe9 omitido: false. ",(0,n.kt)("strong",{parentName:"td"},"Nota"),": esta propriedade s\xf3 s\xe3o compat\xedveis com as fun\xe7\xf5es",(0,n.kt)("inlineCode",{parentName:"td"},"entitySelection.query( )")," e ",(0,n.kt)("inlineCode",{parentName:"td"},"dataClass.query( )"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"queryPath"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Na entity selection resultante, devolve ou n\xe3o a descri\xe7\xe3o detalhada da pesquisa tal qual for realizada. A propriedade retornada \xe9 um objeto que cont\xe9m a rota atual usada para a pesquisa (geralmente id\xeantica \xe0quela do queryPlan, mas deve diferenciar se o motor consegue otimizar a pesquisa), assim como o tempo de processamento e o n\xfamero de registros encontrado. Esta op\xe7\xe3o \xe9 \xfatil durante a fase de desenvolvimento de uma aplica\xe7\xe3o. Como padr\xe3o \xe9 omitido: false. ",(0,n.kt)("strong",{parentName:"td"},"Nota"),": esta propriedade s\xf3 s\xe3o compat\xedveis com as fun\xe7\xf5es",(0,n.kt)("inlineCode",{parentName:"td"},"entitySelection.query( )")," e ",(0,n.kt)("inlineCode",{parentName:"td"},"dataClass.query( )"),".")))),(0,n.kt)("h4",r({},{id:"about-queryplan-and-querypath"}),"About queryPlan and queryPath"),(0,n.kt)("p",null,"The information recorded in ",(0,n.kt)("inlineCode",{parentName:"p"},"queryPlan"),"/",(0,n.kt)("inlineCode",{parentName:"p"},"queryPath")," include the query type (indexed and sequential) and each necessary subquery along with conjunction operators. Query paths also contain the number of entities found and the time required to execute each search criterion. You may find it useful to analyze this information while developing your application(s). Generally, the description of the query plan and its path are identical but they can differ because 4D can implement dynamic optimizations when a query is executed in order to improve performance. For example, the 4D engine can dynamically convert an indexed query into a sequential one if it estimates that it is faster. This particular case can occur when the number of entities being searched for is low."),(0,n.kt)("p",null,"For example, if you execute the following query:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $sel:=ds. Employee.query("salary < :1 and employer.name = :2 or employer.revenues > :3";\\  \n 50000;"Lima West Kilo";10000000;New object("queryPath";True;"queryPlan";True))\n')),(0,n.kt)("p",null,"queryPlan:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"{Or:[{And:[{item:[index : Employee.salary ] < 50000},  \n {item:Join on Table : Company  :  Employee.employerID = Company.ID,  \n subquery:[{item:[index : Company.name ] = Lima West Kilo}]}]},  \n {item:Join on Table : Company  :  Employee.employerID = Company.ID,  \n subquery:[{item:[index : Company.revenues ] > 10000000}]}]}\n")),(0,n.kt)("p",null,"queryPath:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"{steps:[{description:OR,time:63,recordsfounds:1388132,  \n steps:[{description:AND,time:32,recordsfounds:131,  \n steps:[{description:[index : Employee.salary ] < 50000,time:16,recordsfounds:728260},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:0,recordsfounds:131,  \n steps:[{steps:[{description:[index : Company.name ] = Lima West Kilo,time:0,recordsfounds:1}]}]}]},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:31,recordsfounds:1388132,  \n steps:[{steps:[{description:[index : Company.revenues ] > 10000000,time:0,recordsfounds:933}]}]}]}]}\n")),(0,n.kt)("h4",r({},{id:"exemplo-1-4"}),"Exemplo 1"),(0,n.kt)("p",null,"This section provides various examples of queries."),(0,n.kt)("p",null,"Query on a string:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"$entitySelection:=ds. Customer.query(\"firstName = 'S@'\")\n")),(0,n.kt)("p",null,"Query with a NOT statement:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("not(firstName=Kim)")\n')),(0,n.kt)("p",null,"Queries with dates:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("birthDate > :1";"1970-01-01")\n$entitySelection:=ds. Employee.query("birthDate <= :1";Current date-10950)\n')),(0,n.kt)("p",null,"Query with indexed placeholders for values:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Customer.query("(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)";"D@";"R@";"S@";"K@")\n')),(0,n.kt)("p",null,"Query with indexed placeholders for values on a related dataclass:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("lastName = :1 and manager.lastName = :2";"M@";"S@")\n')),(0,n.kt)("p",null,"Query with indexed placeholder including a descending order by statement:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Student.query("nationality = :1 order by campus.name desc, lastname";"French")\n')),(0,n.kt)("p",null,"Query with named placeholders for values:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $querySettings : Object\nvar $managedCustomers : cs. CustomerSelection\n$querySettings:=New object\n$querySettings.parameters:=New object("userId";1234;"extraInfo";New object("name";"Smith"))\n$managedCustomers:=ds. Customer.query("salesperson.userId = :userId and name = :extraInfo.name";$querySettings)\n')),(0,n.kt)("p",null,"Query that uses both named and indexed placeholders for values:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $querySettings : Object\nvar $managedCustomers : cs. CustomerSelection\n$querySettings.parameters:=New object("userId";1234)\n$managedCustomers:=ds. Customer.query("salesperson.userId = :userId and name=:1";"Smith";$querySettings)\n')),(0,n.kt)("p",null,"Query with queryPlan and queryPath objects:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)";"D@";"R@";"S@";"K@";New object("queryPlan";True;"queryPath";True))\n\n  //you can then get these properties in the resulting entity selection\nvar $queryPlan; $queryPath : Object\n$queryPlan:=$entitySelection.queryPlan\n$queryPath:=$entitySelection.queryPath\n')),(0,n.kt)("p",null,"Query with an attribute path of Collection type:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("extraInfo.hobbies[].name = :1";"horsebackriding")\n')),(0,n.kt)("p",null,"Query with an attribute path of Collection type and linked attributes:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("extraInfo.hobbies[a].name = :1 and extraInfo.hobbies[a].level=:2";"horsebackriding";2)\n')),(0,n.kt)("p",null,"Query with an attribute path of Collection type and multiple linked attributes:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("extraInfo.hobbies[a].name = :1 and\n extraInfo.hobbies[a].level = :2 and extraInfo.hobbies[b].name = :3 and\n extraInfo.hobbies[b].level = :4";"horsebackriding";2;"Tennis";5)\n')),(0,n.kt)("p",null,"Query with an attribute path of Object type:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("extra.eyeColor = :1";"blue")\n')),(0,n.kt)("p",null,"Query with an IN statement:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("firstName in :1";New collection("Kim";"Dixie"))\n')),(0,n.kt)("p",null,"Query with a NOT (IN) statement:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'$entitySelection:=ds. Employee.query("not (firstName in :1)";New collection("John";"Jane"))\n')),(0,n.kt)("p",null,"Query with indexed placeholders for attributes:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $es : cs. EmployeeSelection\n$es:=ds. Employee.query(":1 = 1234 and :2 = \'Smith\'";"salesperson.userId";"name")\n  //salesperson is a related entity\n')),(0,n.kt)("p",null,"Query with indexed placeholders for attributes and named placeholders for values:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $es : cs. EmployeeSelection\nvar $querySettings : Object\n$querySettings:=New object\n$querySettings.parameters:=New object("customerName";"Smith")\n$es:=ds. Customer.query(":1 = 1234 and :2 = :customerName";"salesperson.userId";"name";$querySettings)\n  //salesperson is a related entity\n')),(0,n.kt)("p",null,"Query with indexed placeholders for attributes and values:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $es : cs. EmployeeSelection\n$es:=ds. Clients.query(":1 = 1234 and :2 = :3";"salesperson.userId";"name";"Smith")\n  //salesperson is a related entity\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-5"}),"Exemplo 2"),(0,n.kt)("p",null,"This section illustrates queries with named placeholders for attributes."),(0,n.kt)("p",null,"Given an Employee dataclass with 2 entities:"),(0,n.kt)("p",null,"Entity 1:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'name: "Marie"\nnumber: 46\nsoftwares:{\n"Word 10.2": "Installed",\n"Excel 11.3": "To be upgraded",\n"Powerpoint 12.4": "Not installed"\n}\n')),(0,n.kt)("p",null,"Entity 2:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'name: "Sophie"\nnumber: 47\nsoftwares:{\n"Word 10.2": "Not installed",\n"Excel 11.3": "To be upgraded",\n"Powerpoint 12.4": "Not installed"\n}\n')),(0,n.kt)("p",null,"Query with named placeholders for attributes:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $querySettings : Object\n var $es : cs. EmployeeSelection\n $querySettings:=New object\n $querySettings.attributes:=New object("attName";"name";"attWord";New collection("softwares";"Word 10.2"))\n $es:=ds. Employee.query(":attName = \'Marie\' and :attWord = \'Installed\'";$querySettings)\n  //$es.length=1 (Employee Marie)\n')),(0,n.kt)("p",null,"Query with named placeholders for attributes and values:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $querySettings : Object\n var $es : cs. EmployeeSelection\n var $name : Text\n $querySettings:=New object\n  //Named placeholders for values\n  //The user is asked for a name\n $name:=Request("Please enter the name to search:")\n If(OK=1)\n    $querySettings.parameters:=New object("givenName";$name)\n  //Named placeholders for attribute paths\n    $querySettings.attributes:=New object("attName";"name")\n    $es:=ds. Employee.query(":attName= :givenName";$querySettings)\n End if\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-3"}),"Exemplo 3"),(0,n.kt)("p",null,"These examples illustrate the various ways to use formulas with or without parameters in your queries."),(0,n.kt)("p",null,"The formula is given as text with ",(0,n.kt)("inlineCode",{parentName:"p"},"eval()")," in the ",(0,n.kt)("em",{parentName:"p"},"queryString")," parameter:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $es : cs. StudentsSelection\n $es:=ds. Students.query(\"eval(length(This.lastname) >=30) and nationality='French'\")\n")),(0,n.kt)("p",null,"The formula is given as a ",(0,n.kt)("inlineCode",{parentName:"p"},"Formula")," object through a placeholder:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $es : cs. StudentsSelection\n var $formula : Object\n $formula:=Formula(Length(This.lastname)>=30)\n $es:=ds. Students.query(\":1 and nationality='French'\";$formula)\n")),(0,n.kt)("p",null,"Only a ",(0,n.kt)("inlineCode",{parentName:"p"},"Formula")," object is given as criteria:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $es : cs. StudentsSelection\n var $formula : Object\n $formula:=Formula(Length(This.lastname)>=30)\n $es:=ds. Students.query($formula)\n")),(0,n.kt)("p",null,"Several formulas can be applied:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $formula1; $1; $formula2 ;$0 : Object\n $formula1:=$1\n $formula2:=Formula(Length(This.firstname)>=30)\n $0:=ds. Students.query(\":1 and :2 and nationality='French'\";$formula1;$formula2)\n")),(0,n.kt)("p",null,"A text formula in ",(0,n.kt)("em",{parentName:"p"},"queryString")," receives a parameter:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs. StudentsSelection\n var $settings : Object\n $settings:=New object()\n $settings.args:=New object("filter";"-")\n $es:=ds. Students.query("eval(checkName($1.filter)) and nationality=:1";"French";$settings)\n')),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"  //checkName method\n #DECLARE($exclude : Text) -> $result : Boolean\n $result:=(Position($exclude;This.lastname)=0)\n")),(0,n.kt)("p",null,"Using the same ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"checkName"))," method, a ",(0,n.kt)("inlineCode",{parentName:"p"},"Formula")," object as placeholder receives a parameter:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs. StudentsSelection\n var $settings; $formula : Object\n $formula:=Formula(checkName($1.filter))\n $settings:=New object()\n $settings.args:=New object("filter";"-")\n $es:=ds. Students.query(":1 and nationality=:2";$formula;"French";$settings)\n $settings.args.filter:="*" // change the parameters without updating the $formula object\n $es:=ds. Students.query(":1 and nationality=:2";$formula;"French";$settings)\n')),(0,n.kt)("p",null,"We want to disallow formulas, for example when the user enters their query:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $es : cs. StudentsSelection\n var $settings : Object\n var $queryString : Text\n $queryString:=Request("Enter your query:")\n if(OK=1)\n    $settings:=New object("allowFormulas";False)\n    $es:=ds. Students.query($queryString;$settings) //An error is raised if $queryString contains a formula\n End if\n')),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-3"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/EntitySelectionClass#query"}),(0,n.kt)("inlineCode",{parentName:"a"},".query()"))," for entity selections"),(0,n.kt)("h2",r({},{id:"setremotecachesettings"}),".setRemoteCacheSettings()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Vers\xe3o"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"v19 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".setRemoteCacheSettings"),"(",(0,n.kt)("em",{parentName:"p"},"settings")," : Object) "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"settings"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object that sets the timeout and maximum size of the ORDA cache for the dataclass.")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Modo avan\xe7ado:")," Esta fun\xe7\xe3o destina-se a programadores que necessitem personalizar as caracter\xedsticas padr\xe3o ORDA para configura\xe7\xf5es espec\xedficas. Na maioria dos casos, n\xe3o necessitar\xe1 de o utilizar.")),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-12"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".setRemoteCacheSettings()")," function sets the timeout and maximum size of the ORDA cache for a dataclass.."),(0,n.kt)("p",null,"In the ",(0,n.kt)("em",{parentName:"p"},"settings")," parameter, pass an object with the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"timeout"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Tempo de espera em segundos.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"maxEntries"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"N\xfamero m\xe1ximo de entidades.")))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"timeout")," sets the timeout of the ORDA cache for the dataclass (default is 30 seconds). Once the timeout has passed, the entities of the dataclass in the cache are considered as expired. This means that:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"os dados ainda est\xe3o l\xe1"),(0,n.kt)("li",{parentName:"ul"},"na pr\xf3xima vez que os dados forem necess\xe1rios, ser\xe3o solicitados ao servidor"),(0,n.kt)("li",{parentName:"ul"},"4D remove automaticamente os dados expirados quando o n\xfamero m\xe1ximo de entidades \xe9 atingido")),(0,n.kt)("p",null,"Setting a ",(0,n.kt)("inlineCode",{parentName:"p"},"timeout")," property sets a new timeout for the entities already present in the cache. It is useful when working with data that does not change very frequently, and thus when new requests to the server are not necessary."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"maxEntries")," sets the max number of entities in the ORDA cache. Default is 30 000."),(0,n.kt)("p",null,"The minimum number of entries is 300, so the value of ",(0,n.kt)("inlineCode",{parentName:"p"},"maxEntries")," must be equal to or higher than 300. Otherwise it is ignored and the maximum number of entries is set to 300."),(0,n.kt)("p",null,"If no valid properties are passed as ",(0,n.kt)("inlineCode",{parentName:"p"},"timeout")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"maxEntries"),", the cache remains unchanged, with its default or previously set values."),(0,n.kt)("p",null,"When an entity is saved, it is updated in the cache and expires once the timeout is reached."),(0,n.kt)("h4",r({},{id:"exemplo-12"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$ds. Buildings.setRemoteCacheSettings(New object("timeout"; 60; "maxEntries"; 350))\n')),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m-4"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"#clearremotecache"}),".clearRemoteCache()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"#clearremotecache"}),".getRemoteCache()")))}u.isMDXComponent=!0},36445:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute-a6b39462dc310d6f9b5816409d863cee.png"},29399:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute2-815959fd721b6dd175aaa338e04c2f38.png"},75376:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/manytomany-1ad2ed56ebdb101476120ab419c1994d.png"}}]);