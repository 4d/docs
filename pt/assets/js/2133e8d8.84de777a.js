"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[74248],{603905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>k});var n=a(667294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),m=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=m(e.components);return n.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=m(a),k=r,N=u["".concat(p,".").concat(k)]||u[k]||s[k]||l;return a?n.createElement(N,o(o({ref:t},d),{},{components:a})):n.createElement(N,o({ref:t},d))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=u;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var m=2;m<l;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},243316:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>p,toc:()=>d});a(667294);var n=a(603905);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const o={id:"EntityClass",title:"Entity"},i=void 0,p={unversionedId:"API/EntityClass",id:"version-20-R5/API/EntityClass",title:"Entity",description:"An entity is an instance of a Dataclass, like a record of the table matching the dataclass in its associated datastore. Cont\xe9m os mesmos atributos que o dataclass assim como os valores de dados e propriedades e fun\xe7\xf5es espec\xedficas.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R5/API/EntityClass.md",sourceDirName:"API",slug:"/API/EntityClass",permalink:"/docs/pt/API/EntityClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FEntityClass.md%20(20-R5)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R5",frontMatter:{id:"EntityClass",title:"Entity"},sidebar:"docs",previous:{title:"Email",permalink:"/docs/pt/API/EmailObjectClass"},next:{title:"EntitySelection",permalink:"/docs/pt/API/EntitySelectionClass"}},m={},d=[{value:"Resumo",id:"resumo",level:3},{value:".<em>attributeName</em>",id:"attributename",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:4},{value:"Exemplo",id:"exemplo",level:4},{value:".clone()",id:"clone",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-1",level:4},{value:"Exemplo",id:"exemplo-1",level:4},{value:".diff()",id:"diff",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-2",level:4},{value:"Exemplo 1",id:"exemplo-1-1",level:4},{value:"Exemplo 2",id:"exemplo-2",level:4},{value:".drop()",id:"drop",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-3",level:4},{value:"Exemplo 1",id:"exemplo-1-2",level:4},{value:"Exemplo 2",id:"exemplo-2-1",level:4},{value:".first()",id:"first",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-4",level:4},{value:"Exemplo",id:"exemplo-3",level:4},{value:".fromObject()",id:"fromobject",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-5",level:4},{value:"Exemplo",id:"exemplo-4",level:4},{value:".getDataClass()",id:"getdataclass",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-6",level:4},{value:"Exemplo",id:"exemplo-5",level:4},{value:".getKey()",id:"getkey",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-7",level:4},{value:"Exemplo",id:"exemplo-6",level:4},{value:".getRemoteContextAttributes()",id:"getremotecontextattributes",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-8",level:4},{value:"Exemplo",id:"exemplo-7",level:4},{value:"Veja tamb\xe9m",id:"veja-tamb\xe9m",level:4},{value:".getSelection()",id:"getselection",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-9",level:4},{value:"Exemplo",id:"exemplo-8",level:4},{value:".getStamp()",id:"getstamp",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-10",level:4},{value:"Exemplo",id:"exemplo-9",level:4},{value:".indexOf()",id:"indexof",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-11",level:4},{value:"Exemplo",id:"exemplo-10",level:4},{value:".isNew()",id:"isnew",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-12",level:4},{value:"Exemplo",id:"exemplo-11",level:4},{value:".last()",id:"last",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-13",level:4},{value:"Exemplo",id:"exemplo-12",level:4},{value:".lock()",id:"lock",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-14",level:4},{value:"Exemplo 1",id:"exemplo-1-3",level:4},{value:"Exemplo 2",id:"exemplo-2-2",level:4},{value:".next()",id:"next",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-15",level:4},{value:"Exemplo",id:"exemplo-13",level:4},{value:".previous()",id:"previous",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-16",level:4},{value:"Exemplo",id:"exemplo-14",level:4},{value:".reload()",id:"reload",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-17",level:4},{value:"Exemplo",id:"exemplo-15",level:4},{value:".save()",id:"save",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-18",level:4},{value:"status e statusText",id:"status-e-statustext",level:5},{value:"Exemplo 1",id:"exemplo-1-4",level:4},{value:"Exemplo 2",id:"exemplo-2-3",level:4},{value:"Exemplo 3",id:"exemplo-3-1",level:4},{value:".toObject()",id:"toobject",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-19",level:4},{value:"Exemplo 1",id:"exemplo-1-5",level:4},{value:"Exemplo 2",id:"exemplo-2-4",level:4},{value:"Exemplo 3",id:"exemplo-3-2",level:4},{value:"Exemplo",id:"exemplo-16",level:4},{value:"Exemplo 2",id:"exemplo-2-5",level:4},{value:"Exemplo 6",id:"exemplo-6-1",level:4},{value:"Exemplo 3",id:"exemplo-3-3",level:4},{value:".touched( )",id:"touched-",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-20",level:4},{value:"Exemplo",id:"exemplo-17",level:4},{value:".touchedAttributes( )",id:"touchedattributes-",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-21",level:4},{value:"Exemplo 1",id:"exemplo-1-6",level:4},{value:"Exemplo 2",id:"exemplo-2-6",level:4},{value:".unlock()",id:"unlock",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-22",level:4},{value:"Exemplo",id:"exemplo-18",level:4}],s={toc:d};function u(e){var{components:t}=e,o=l(e,["components"]);return(0,n.kt)("wrapper",r({},s,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"An ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/dsmapping#entity"}),"entity")," is an instance of a ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/dsmapping#dataclass"}),"Dataclass"),", like a record of the table matching the dataclass in its associated datastore. Cont\xe9m os mesmos atributos que o dataclass assim como os valores de dados e propriedades e fun\xe7\xf5es espec\xedficas."),(0,n.kt)("h3",r({},{id:"resumo"}),"Resumo"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#attributename"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : any"),(0,n.kt)("br",null),"stores the attribute value for the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#clone"}),(0,n.kt)("strong",{parentName:"a"},".clone()")," : 4D.Entity"),(0,n.kt)("br",null),"creates in memory a new entity referencing the same record as the original entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#diff"}),(0,n.kt)("strong",{parentName:"a"},".diff"),"( ",(0,n.kt)("em",{parentName:"a"},"entityToCompare")," : 4D.Entity { ; ",(0,n.kt)("em",{parentName:"a"},"attributesToCompare")," : Collection } ) : Collection"),(0,n.kt)("br",null),"compares the contents of two entities and returns their differences")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#drop"}),(0,n.kt)("strong",{parentName:"a"},".drop"),"( {",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer} ) : Object"),(0,n.kt)("br",null),"deletes the data contained in the entity from the datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#first"}),(0,n.kt)("strong",{parentName:"a"},".first()"),": 4D.Entity"),(0,n.kt)("br",null),"returns a reference to the entity in first position of the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#fromobject"}),(0,n.kt)("strong",{parentName:"a"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filler")," : Object )"),(0,n.kt)("br",null),"fills an entity with the ",(0,n.kt)("em",{parentName:"td"},"filler")," content")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getdataclass"}),(0,n.kt)("strong",{parentName:"a"},".getDataClass()")," : 4D.DataClass"),(0,n.kt)("br",null),"returns the dataclass of the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getkey"}),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Integer"),(0,n.kt)("br",null),"returns the primary key value of the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getremotecontextattributes"}),(0,n.kt)("strong",{parentName:"a"},".getRemoteContextAttributes()")," : Text"),(0,n.kt)("br",null),"returns information about the optimization context used by the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getselection"}),(0,n.kt)("strong",{parentName:"a"},".getSelection()"),": 4D.EntitySelection"),(0,n.kt)("br",null),"returns the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#getstamp"}),(0,n.kt)("strong",{parentName:"a"},".getStamp()")," : Integer"),(0,n.kt)("br",null)," returns the current value of the stamp of the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#indexof"}),(0,n.kt)("strong",{parentName:"a"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"a"},"entitySelection")," : 4D.EntitySelection } ) : Integer"),(0,n.kt)("br",null),"returns the position of the entity in an entity selection")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#isnew"}),(0,n.kt)("strong",{parentName:"a"},".isNew()")," : Boolean"),(0,n.kt)("br",null)," returns True if the entity to which it is applied has just been created and has not yet been saved in the datastore")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#last"}),(0,n.kt)("strong",{parentName:"a"},".last()")," : 4D.Entity"),(0,n.kt)("br",null),"returns a reference to the entity in last position of the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#lock"}),(0,n.kt)("strong",{parentName:"a"},".lock"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),(0,n.kt)("br",null),"puts a pessimistic lock on the record referenced by the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#next"}),(0,n.kt)("strong",{parentName:"a"},".next()")," : 4D.Entity"),(0,n.kt)("br",null),"returns a reference to the next entity in the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#previous"}),(0,n.kt)("strong",{parentName:"a"},".previous()"),"  : 4D.Entity"),(0,n.kt)("br",null)," returns a reference to the previous entity in the entity selection which the entity belongs to")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#reload"}),(0,n.kt)("strong",{parentName:"a"},".reload()")," : Object"),(0,n.kt)("br",null),"reloads the content of the entity in memory")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#save"}),(0,n.kt)("strong",{parentName:"a"},".save"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),(0,n.kt)("br",null),"saves the changes made to the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#toobject"}),(0,n.kt)("strong",{parentName:"a"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer } ) : Object"),(0,n.kt)("br",null),"returns an object which has been built from the entity")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#touched"}),(0,n.kt)("strong",{parentName:"a"},".touched()")," : Boolean"),(0,n.kt)("br",null),"tests whether or not an entity attribute has been modified since the entity was loaded into memory or saved")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#touchedattributes"}),(0,n.kt)("strong",{parentName:"a"},".touchedAttributes()")," : Collection"),(0,n.kt)("br",null),"returns the names of the attributes that have been modified since the entity was loaded into memory")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("a",r({parentName:"td"},{href:"#unlock"}),(0,n.kt)("strong",{parentName:"a"},".unlock()")," : Object"),(0,n.kt)("br",null),"removes the pessimistic lock on the record matching the entity")))),(0,n.kt)("h2",r({},{id:"attributename"}),".",(0,n.kt)("em",{parentName:"h2"},"attributeName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : any"),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"Any dataclass attribute is available as a property of an entity, which stores the attribute value for the entity."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Atributos de Dataclass tamb\xe9m podem ser alcan\xe7ados usando a sintaxe alternativa com ","["," ].")),(0,n.kt)("p",null,"The attribute value type depends on the attribute ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassClass#attributename"}),"kind")," (relation or storage):"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"storage"),":\n",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a value of the same type as ",(0,n.kt)("em",{parentName:"li"},"attributeName"),"."),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"relatedEntity"),":\n",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName"),' returns the related entity. Valores da entidade relacionada est\xe3o diretamente dispon\xedveis atrav\xe9s de propriedades em cascata, por exemplo "myEntity.employer.employees',"[",'0].lastname".'),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"relatedEntities"),":\n",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a new entity selection of related entities. Se eliminam os duplicados (se devolve uma sele\xe7\xe3o de entidades desordenada).")),(0,n.kt)("h4",r({},{id:"exemplo"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $myEntity : cs. EmployeeEntity\n $myEntity:=ds. Employee.new() //Create a new entity\n $myEntity.name:=\"Dupont\" // assign 'Dupont' to the 'name' attribute\n $myEntity.firstname:=\"John\" //assign 'John' to the 'firstname' attribute\n $myEntity.save() //save the entity\n")),(0,n.kt)("h2",r({},{id:"clone"}),".clone()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clone()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nova entidade referenciando o registro")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-1"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".clone()")," function creates in memory a new entity referencing the same record as the original entity. ."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Keep in mind that any modifications done to entities will be saved in the referenced record only when the ",(0,n.kt)("a",r({parentName:"p"},{href:"#save"}),(0,n.kt)("inlineCode",{parentName:"a"},".save( )"))," function is executed.")),(0,n.kt)("p",null,"Esta fun\xe7\xe3o s\xf3 pode ser usada com entidades j\xe1 salvas no banco de dados. It cannot be called on a newly created entity (for which ",(0,n.kt)("a",r({parentName:"p"},{href:"#isnew"}),(0,n.kt)("inlineCode",{parentName:"a"},".isNew()"))," returns ",(0,n.kt)("strong",{parentName:"p"},"True"),")."),(0,n.kt)("h4",r({},{id:"exemplo-1"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $emp; $empCloned : cs.EmployeeEntity\n $emp:=ds.Employee.get(672)\n $empCloned:=$emp.clone()\n\n $emp.lastName:="Smith" //Updates done on $emp are not done on $empCloned\n\n')),(0,n.kt)("h2",r({},{id:"diff"}),".diff()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".diff"),"( ",(0,n.kt)("em",{parentName:"p"},"entityToCompare")," : 4D.Entity { ; ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare")," : Collection } ) : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"entityToCompare"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Entidade a ser comparada com a entidade original")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributesToCompare"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome dos atributos a serem comparados")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Diferen\xe7as entre as entidades")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-2"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," function compares the contents of two entities and returns their differences."),(0,n.kt)("p",null,"In ",(0,n.kt)("em",{parentName:"p"},"entityToCompare"),", pass the entity to be compared to the original entity."),(0,n.kt)("p",null,"In ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare"),", you can designate specific attributes to compare. Se fornecida, a compara\xe7\xe3o \xe9 feita apenas nos atributos especificados. Se n\xe3o for fornecida, todas as diferen\xe7as entre as entidades s\xe3o devolvidas."),(0,n.kt)("p",null,"As diferen\xe7as s\xe3o retornadas como uma cole\xe7\xe3o de objetos cujas propriedades s\xe3o:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Nome da propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"attributeName"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome do atributo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"value"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"any - Depende do tipo de atributo"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valor do atributo na entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"otherValue"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"any - Depende do tipo de atributo"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Value of the attribute in ",(0,n.kt)("em",{parentName:"td"},"entityToCompare"))))),(0,n.kt)("p",null,"Apenas atributos com valores diferentes est\xe3o inclu\xeddos na cole\xe7\xe3o. If no differences are found, ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," returns an empty collection."),(0,n.kt)("p",null,"The function applies for properties whose ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassClass#attributename"}),"kind")," is ",(0,n.kt)("strong",{parentName:"p"},"storage")," or ",(0,n.kt)("strong",{parentName:"p"},"relatedEntity"),". In case a related entity has been updated (meaning the foreign key), the name of the related entity and its primary key name are returned as ",(0,n.kt)("em",{parentName:"p"},"attributeName")," properties (",(0,n.kt)("em",{parentName:"p"},"value")," and ",(0,n.kt)("em",{parentName:"p"},"otherValue")," are empty for the related entity name)."),(0,n.kt)("p",null,"If one of the compared entities is ",(0,n.kt)("strong",{parentName:"p"},"Null"),", an error is raised."),(0,n.kt)("h4",r({},{id:"exemplo-1-1"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $diff1; $diff2 : Collection\n employee:=ds. Employee.query("ID=1001").first()\n $clone:=employee.clone()\n employee.firstName:="MARIE"\n employee.lastName:="SOPHIE"\n employee.salary:=500\n $diff1:=$clone.diff(employee) // All differences are returned\n $diff2:=$clone.diff(employee;New collection"firstName";"lastName"))\n  // Only differences on firstName and lastName are returned\n')),(0,n.kt)("p",null,"$diff1:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    },\n    {\n        "attributeName": "salary",\n        "value": 66600,\n        "otherValue": 500\n    }\n]\n$diff2:\n\n[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    }\n]\n')),(0,n.kt)("h4",r({},{id:"exemplo-2"}),"Exemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var vCompareResult1; vCompareResult2; vCompareResult3; $attributesToInspect : Collection\n vCompareResult1:=New collection\n vCompareResult2:=New collection\n vCompareResult3:=New collection\n $attributesToInspect:=New collection\n\n $e1:=ds.Employee.get(636)\n $e2:=ds.Employee.get(636)\n\n $e1.firstName:=$e1.firstName+" update"\n $e1.lastName:=$e1.lastName+" update"\n\n $c:=ds.Company.get(117)\n $e1.employer:=$c\n $e2.salary:=100\n\n $attributesToInspect.push("firstName")\n $attributesToInspect.push("lastName")\n\n vCompareResult1:=$e1.diff($e2)\n vCompareResult2:=$e1.diff($e2;$attributesToInspect)\n vCompareResult3:=$e1.diff($e2;$e1.touchedAttributes())\n')),(0,n.kt)("p",null,"vCompareResultado1 (todas as diferen\xe7as s\xe3o devolvidas):"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "salary",\n        "value": 33500,\n        "otherValue": 100\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n  {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 from Company\n        "otherValue": "[object Entity]"// Entity 118 from Company\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult2 (apenas diferen\xe7as em $attributesToInspect foram retornadas)"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult3 (apenas as diferen\xe7as em $e1 atributos tocados s\xe3o retornadas)"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n     {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 from Company\n        "otherValue": "[object Entity]"// Entity 118 from Company\n\n    }\n]\n')),(0,n.kt)("h2",r({},{id:"drop"}),".drop()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".drop"),"( {",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer} ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed"),": Forces the drop even if the stamp has changed")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultado da opera\xe7\xe3o de exclus\xe3o")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-3"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," function deletes the data contained in the entity from the datastore, from the table related to its Dataclass. Note-se que a entidade permanece na mem\xf3ria."),(0,n.kt)("p",null,"In a multi-user or multi-process application, the ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," function is executed under an ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),'"optimistic lock"')," mechanism, wherein an internal locking stamp is automatically incremented each time the record is saved."),(0,n.kt)("p",null,"By default, if the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter is omitted, the function will return an error (see below) if the same entity was modified (i.e. the stamp has changed) by another process or user in the meantime."),(0,n.kt)("p",null,"Otherwise, you can pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," option in the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter: in this case, the entity is dropped even if the stamp has changed (and the primary key is still the same)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultado")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".drop( )")," contains the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"verdadeiro se a a\xe7\xe3o de queda for bem-sucedida, falso caso contr\xe1rio.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only in case of error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o do erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only in case of pessimistic lock error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"LockKindText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'"Bloqueado pelo registro"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informa\xe7\xf5es sobre a origem do bloqueio")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de usu\xe1rio de sess\xe3o na m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"User alias if defined by ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", otherwise user name in the 4D directory")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de processo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only in case of serious error (serious error can be trying to duplicate a primary key, disk full...):")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"uma cole\xe7\xe3o de objetos"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensagem de erro")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"assinatura de componentes"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'assinatura interna do componente (ex.: "dmbg" significa componente da base de dados)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro")))),(0,n.kt)("p",null,"(","*",") The following values can be returned in the ",(0,n.kt)("em",{parentName:"p"},"status")," and ",(0,n.kt)("em",{parentName:"p"},"statusText")," properties of ",(0,n.kt)("em",{parentName:"p"},"Result")," object in case of error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Valor"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade n\xe3o existe mais nos dados. This error can occur in the following cases:",(0,n.kt)("br",null),(0,n.kt)("li",null,"the entity has been dropped (the stamp has changed and the memory space is now free)"),(0,n.kt)("li",null,"the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Ao utilizar entity.drop( ), este erro pode ser devolvido quando usar a op\xe7\xe3o dk force drop if stamp changed. When using entity.lock( ), this error can be returned when dk reload if stamp changed option is used")," ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"The entity is locked by a pessimistic lock.",(0,n.kt)("br",null)," ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).",(0,n.kt)("br",null),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is not used"),(0,n.kt)("li",null,(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Stamp has changed"'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Os privil\xe9gios actuais n\xe3o permitem a queda da entidade. ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Permission Error"')))),(0,n.kt)("h4",r({},{id:"exemplo-1-2"}),"Exemplo 1"),(0,n.kt)("p",null,"Example without ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $status : Object\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop()\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //The dropped entity remains in memory\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-1"}),"Exemplo 2"),(0,n.kt)("p",null,"Example with ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $status : Object\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop(dk force drop if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //The dropped entity remains in memory\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",r({},{id:"first"}),".first()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".first()"),": 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Referencia \xe0 primeira entidade da entity selection (Null se a sele\xe7\xe3o estiver vazia)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-4"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".first()")," function returns a reference to the entity in first position of the entity selection which the entity belongs to."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),".getSelection( )")," returns Null), the function returns a Null value."),(0,n.kt)("h4",r({},{id:"exemplo-3"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $firstEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[2]\n $firstEmployee:=$employee.first() //$firstEmployee is the first entity of the $employees entity selection\n')),(0,n.kt)("h2",r({},{id:"fromobject"}),".fromObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filler")," : Object )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"filler"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object from which to fill the entity")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-5"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()")," function fills an entity with the ",(0,n.kt)("em",{parentName:"p"},"filler")," content."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Essa fun\xe7\xe3o modifica a entidade original.")),(0,n.kt)("p",null,"O mapeamento entre o objecto e a entidade \xe9 feito sobre os nomes dos atributos:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Se uma propriedade do objeto n\xe3o existe nos dados (dataclass), ela \xe9 ignorada."),(0,n.kt)("li",{parentName:"ul"},"Os tipos de dados devem ser equivalentes. If there is a type mismatch between the object and dataclass, 4D tries to convert the data whenever possible (see ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/pt/Concepts/data-types#converting-data-types"}),(0,n.kt)("inlineCode",{parentName:"a"},"Converting data types")),"), otherwise the attribute is left untouched."),(0,n.kt)("li",{parentName:"ul"},'A chave prim\xe1ria pode ser dada como \xe9 ou com uma propriedade "__KEY" (preenchida com o valor da chave prim\xe1ria). If it does not already exist in the dataclass, the entity is created with the given value when ',(0,n.kt)("a",r({parentName:"li"},{href:"#save"}),".save()")," is called. Se a chave prim\xe1ria n\xe3o for dada, a entidade \xe9 criada e o valor da chave prim\xe1ria \xe9 atribu\xeddo de acordo com as regras da base de dados. O auto-incremento s\xf3 \xe9 calculado se a chave prim\xe1ria for nula.")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"filler")," can handle a related entity under the following conditions:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler")," contains the foreign key itself, or"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler"),' contains a property object with the same name as the related entity, containing a single property named "',"_","_",'KEY".'),(0,n.kt)("li",{parentName:"ul"},"se a entidade relacionada n\xe3o existir, ela \xe9 ignorada.")),(0,n.kt)("h4",r({},{id:"exemplo-4"}),"Exemplo"),(0,n.kt)("p",null,"Com o seguinte objeto $o:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Mary",\n    "lastName": "Smith",\n    "salary": 36500,\n    "birthDate": "1958-10-27T00:00:00.000Z",\n    "woman": true,\n    "managerID": 411,// relatedEntity dada com PK\n    "employerID": 20 // relatedEntity dada com PK\n}\n')),(0,n.kt)("p",null,"O c\xf3digo a seguir criar\xe1 uma entidade com gerente e entidades relacionadas ao empregador."),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $o : Object\n var $entity : cs.EmpEntity\n $entity:=ds.Emp.new()\n $entity.fromObject($o)\n $entity.save()\n")),(0,n.kt)("p",null,"Voc\xea tamb\xe9m poderia usar uma entidade relacionada dada como um objeto:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'\n{\n    "firstName": "Marie",\n    "lastName": "Lechat",\n    "salary": 68400,\n    "birthDate": "1971-09-03T00:00:00.000Z",\n    "woman": false,\n    "employer": {// relatedEntity given as an object\n        "__KEY": "21"\n    },\n    "manager": {// relatedEntity given as an object\n        "__KEY": "411"\n    }\n}\n')),(0,n.kt)("h2",r({},{id:"getdataclass"}),".getDataClass()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17 R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getDataClass()")," : 4D.DataClass"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. DataClass"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto DataClass ao qual a entidade pertence")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-6"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getDataClass()")," function returns the dataclass of the entity. Esta fun\xe7\xe3o \xe9 \xfatil para configurar o c\xf3digo gen\xe9rico."),(0,n.kt)("h4",r({},{id:"exemplo-5"}),"Exemplo"),(0,n.kt)("p",null,"O seguinte c\xf3digo gen\xe9rico duplica qualquer entidade:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"  //duplicate_entity method\n  //duplicate_entity($entity)\n\n #DECLARE($entity : 4D.Entity)  \n var $entityNew : 4D.Entity\n var $status : Object\n\n $entityNew:=$entity.getDataClass().new() //create a new entity in the parent dataclass\n $entityNew.fromObject($entity.toObject()) //get all attributes\n $entityNew[$entity.getDataClass().getInfo().primaryKey]:=Null //reset the primary key\n $status:=$entityNew.save() //save the duplicated entity\n")),(0,n.kt)("h2",r({},{id:"getkey"}),".getKey()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk key as string"),": primary key is returned as a string, no matter the primary key type")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valor do texto chave prim\xe1ria da entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Valor da chave prim\xe1ria num\xe9rica da entidade")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-7"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getKey()")," function returns the primary key value of the entity."),(0,n.kt)("p",null,'As chaves prim\xe1rias podem ser n\xfameros (Inteiro) ou strings. You can "force" the returned primary key value to be a string, no matter the actual primary key type, by passing the ',(0,n.kt)("inlineCode",{parentName:"p"},"dk key as string")," option in the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter."),(0,n.kt)("h4",r({},{id:"exemplo-6"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees[0]\n ALERT("The primary key is "+$employee.getKey(dk key as string))\n')),(0,n.kt)("h2",r({},{id:"getremotecontextattributes"}),".getRemoteContextAttributes()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"19R5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getRemoteContextAttributes()")," : Text"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Atributos de contexto linkados \xe0 entidade, separados por uma v\xedrgula")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Advanced mode:")," This function is intended for developers who need to customize ORDA default features for specific configurations. Na maioria dos casos, n\xe3o necessitar\xe1 de o utilizar.")),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-8"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getRemoteContextAttributes()")," function returns information about the optimization context used by the entity ."),(0,n.kt)("p",null,"If there is no ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/datastores#clientserver-optimization"}),"optimization context")," for the entity, the function returns an empty Text."),(0,n.kt)("h4",r({},{id:"exemplo-7"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D. DataStoreImplementation\nvar $address : cs. AddressEntity\nvar $p : cs. PersonsEntity\nvar $contextA : Object\nvar $info : Text\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$contextA:=New object("context"; "contextA")\n\n$address:=$ds. Address.get(1; $contextA)\n$text:="" For each ($p; $address.persons)\n    $text:=$p.firstname+" "+$p.lastname End for each\n\n$info:=$address.getRemoteContextAttributes()\n\n//$info = "persons,persons.lastname,persons.firstname"\n')),(0,n.kt)("h4",r({},{id:"veja-tamb\xe9m"}),"Veja tamb\xe9m"),(0,n.kt)("p",null,(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/EntitySelectionClass#getRemoteContextAttributes"}),"EntitySelection.getRemoteContextAttributes()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataStoreClass#clearallremotecontexts"}),".clearAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataStoreClass#getremotecontextinfo"}),".getRemoteContextInfo()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataStoreClass#getallremotecontexts"}),".getAllRemoteContexts()"),(0,n.kt)("br",null),(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataStoreClass#setremotecontextinfo"}),".setRemoteContextInfo()")),(0,n.kt)("h2",r({},{id:"getselection"}),".getSelection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getSelection()"),": 4D.EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Sele\xe7\xe3o de entidade a que pertence a entidade (null se n\xe3o for encontrado)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-9"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getSelection()")," function returns the entity selection which the entity belongs to."),(0,n.kt)("p",null,"Se a entidade n\xe3o pertence \xe0 sele\xe7\xe3o de uma entidade, a fun\xe7\xe3o retorna Null."),(0,n.kt)("h4",r({},{id:"exemplo-8"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $emp : cs.EmployeeEntity\n var $employees; $employees2 : cs.EmployeeSelection\n $emp:=ds.Employee.get(672) // This entity does not belong to any entity selection\n $employees:=$emp.getSelection() // $employees is Null\n\n $employees2:=ds.Employee.query("lastName=:1";"Smith") //This entity selection contains 6 entities\n $emp:=$employees2[0]  // This entity belongs to an entity selection\n\n ALERT("The entity selection contains "+String($emp.getSelection().length)+" entities")\n')),(0,n.kt)("h2",r({},{id:"getstamp"}),".getStamp()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getStamp()")," : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Estampa da entidade (0 se a entidade foi criada)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-10"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".getStamp()")," function  returns the current value of the stamp of the entity."),(0,n.kt)("p",null,"O selo interno \xe9 automaticamente incrementado por 4D cada vez que a entidade \xe9 gravada. It manages concurrent user access and modifications to the same entities (see ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),(0,n.kt)("strong",{parentName:"a"},"Entity locking")),")."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para uma nova entidade (nunca salva), a fun\xe7\xe3o retorna 0. To know if an entity has just been created, it is recommended to use ",(0,n.kt)("a",r({parentName:"p"},{href:"#isnew"}),".isNew()"),".")),(0,n.kt)("h4",r({},{id:"exemplo-9"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $entity : cs.EmployeeEntity\n var $stamp : Integer\n\n $entity:=ds.Employee.new()\n $entity.lastname:="Smith"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=1\n\n $entity.lastname:="Wesson"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=2\n')),(0,n.kt)("h2",r({},{id:"indexof"}),".indexOf()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," : 4D.EntitySelection } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"entitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. EntitySelection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A posi\xe7\xe3o da entidade \xe9 dada de acordo com a selec\xe7\xe3o desta entidade")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Posi\xe7\xe3o da entidade numa selec\xe7\xe3o de entidade")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-11"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".indexOf()")," function returns the position of the entity in an entity selection."),(0,n.kt)("p",null,"By default if the ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," parameter is omitted, the function returns the entity's position within its own entity selection. Otherwise, it returns the position of the entity within the specified ",(0,n.kt)("em",{parentName:"p"},"entitySelection"),"."),(0,n.kt)("p",null,"O valor resultante \xe9 inclu\xeddo entre 0 e o comprimento da selec\xe7\xe3o da entidade -1."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If the entity does not have an entity selection or does not belong to ",(0,n.kt)("em",{parentName:"li"},"entitySelection"),", the function returns -1."),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"entitySelection")," is Null or does not belong to the same dataclass as the entity, an error is raised.")),(0,n.kt)("h4",r({},{id:"exemplo-10"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[1] //This entity belongs to an entity selection\n ALERT("The index of the entity in its own entity selection is "+String($employee.indexOf())) //1\n\n $employee:=ds. Employee.get(725) //This entity does not belong to an entity selection\n ALERT("The index of the entity is "+String($employee.indexOf())) // -1\n')),(0,n.kt)("h2",r({},{id:"isnew"}),".isNew()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".isNew()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"\xc9 verdade se a entidade acabou de ser criada e ainda n\xe3o foi salva. Caso contr\xe1rio, Falso.")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-12"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".isNew()")," function  returns True if the entity to which it is applied has just been created and has not yet been saved in the datastore. Caso contr\xe1rio, devolve False."),(0,n.kt)("h4",r({},{id:"exemplo-11"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $emp : cs. EmployeeEntity\n\n $emp:=ds. Employee.new()\n\n If($emp.isNew())\n    ALERT("This is a new entity")\n End if\n')),(0,n.kt)("h2",r({},{id:"last"}),".last()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".last()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Refer\xeancia para a \xfaltima entidade de uma sele\xe7\xe3o de entidade (Null se n\xe3o for encontrado)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-13"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".last()")," function returns a reference to the entity in last position of the entity selection which the entity belongs to."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),".getSelection( )")," returns Null), the function returns a Null value."),(0,n.kt)("h4",r({},{id:"exemplo-12"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee; $lastEmployee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[0]\n $lastEmployee:=$employee.last() //$lastEmployee is the last entity of the $employees entity selection\n')),(0,n.kt)("h2",r({},{id:"lock"}),".lock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".lock"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed"),": Reload before locking if stamp changed")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultado da opera\xe7\xe3o de bloqueio")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-14"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".lock()")," function puts a pessimistic lock on the record referenced by the entity. The ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),"lock is set")," for a record and all the references of the entity in the current process."),(0,n.kt)("p",null,"Other processes will see this record as locked (the ",(0,n.kt)("inlineCode",{parentName:"p"},"result.success"),' property will contain False if they try to lock the same entity using this function). S\xf3 as fun\xe7\xf5es executadas na sess\xe3o de "bloqueio" s\xe3o permitidas para editar e guardar os atributos da entidade. A entidade pode ser carregada como apenas leitura por outras sess\xf5es, mas n\xe3o ser\xe3o capazes de introduzir e guardar valores.'),(0,n.kt)("p",null,"A record locked by ",(0,n.kt)("inlineCode",{parentName:"p"},".lock()")," is unlocked:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"when the ",(0,n.kt)("a",r({parentName:"li"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},"unlock()"))," function is called on a matching entity in the same process"),(0,n.kt)("li",{parentName:"ul"},"automaticamente, quando j\xe1 n\xe3o \xe9 referenciado por nenhuma entidade em mem\xf3ria. Por exemplo, se a fechadura for colocada apenas numa refer\xeancia local de uma entidade, a entidade \xe9 desbloqueada quando a fun\xe7\xe3o termina. Enquanto houver refer\xeancias \xe0 entidade em mem\xf3ria, o registo permanece bloqueado.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"An entity can also be ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/REST/lock"}),"locked by a REST session"),", in which case it can only be unlocked by the session.")),(0,n.kt)("p",null,"By default, if the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter is omitted, the function will return an error (see below) if the same entity was modified (i.e. the stamp has changed) by another process or user in the meantime."),(0,n.kt)("p",null,"Otherwise, you can pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed")," option in the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter: in this case, no error is returned and the entity is reloaded when the stamp has changed (if the entity still exists and the primary key is still the same)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultado")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".lock( )")," contains the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"true se a a\xe7\xe3o de bloqueio for bem sucedida (ou se a entidade j\xe1 estiver bloqueada no processo atual), falso caso contr\xe1rio.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only if ",(0,n.kt)("inlineCode",{parentName:"em"},"dk reload if stamp changed")," option is used:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"wasReloaded")),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"verdadeiro se a entidade foi recarregada com sucesso, falso caso contr\xe1rio.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only in case of error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o do erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only in case of pessimistic lock error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'"Locked by record" se trancado por um processo 4D, "Locked by session" se trancado por uma sess\xe3o REST')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informa\xe7\xf5es sobre a origem do bloqueio. Retorna propriedades dependendo da origem da trava (processo 4D ou sess\xe3o REST)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel s\xf3 para um processo trava 4D:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Process ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de usu\xe1rio de sess\xe3o na m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome ou apelido do usu\xe1rio 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user4d_id"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Id do usu\xe1rio no diret\xf3rio do banco de dados 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de processo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Vers\xe3o do cliente")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel s\xf3 para um processo trava REST:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"host"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"|",'URL que trava a entidade (por exemplo "',(0,n.kt)("a",r({parentName:"td"},{href:"http://www.myserver.com%22)%5C%7C"}),'www.myserver.com")\\|'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"IPAddr"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Endere\xe7o IP da trava (por exemplo. "127.0.0.1")')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"userAgent"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'userAgent of the locker (e.g. Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36")')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only in case of serious error"))," (primary key already exists, disk full...):")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"uma cole\xe7\xe3o de objetos"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensagem de erro")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"assinatura de componentes"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'assinatura interna do componente (ex.: "dmbg" significa componente da base de dados)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro")))),(0,n.kt)("p",null,"(","*",") The following values can be returned in the ",(0,n.kt)("em",{parentName:"p"},"status")," and ",(0,n.kt)("em",{parentName:"p"},"statusText")," properties of the ",(0,n.kt)("em",{parentName:"p"},"Result")," object in case of error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Valor"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade n\xe3o existe mais nos dados. This error can occur in the following cases:",(0,n.kt)("li",null,"the entity has been dropped (the stamp has changed and the memory space is now free)"),(0,n.kt)("li",null,"the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Ao usar ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),', este erro pode ser retornado quando a op\xe7\xe3o "dk force drop if stamp changed" for usada. When using ',(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", this error can be returned when ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"The entity is locked by a pessimistic lock.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).",(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is not used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Stamp has changed"')))),(0,n.kt)("h4",r({},{id:"exemplo-1-3"}),"Exemplo 1"),(0,n.kt)("p",null,"Exemplo com erro:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employee : cs. EmployeeEntity\n var $status : Object\n $employee:=ds. Employee.get(716)\n $status:=$employee.lock()\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-2"}),"Exemplo 2"),(0,n.kt)("p",null,"Example with ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employee : cs. EmployeeEntity\n var $status : Object\n $employee:=ds. Employee.get(717)\n $status:=$employee.lock(dk reload if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",r({},{id:"next"}),".next()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".next()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Refer\xeancia a entidade anterior na sele\xe7\xe3o da entidade (Null se n\xe3o for encontrado)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-15"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".next()")," function returns a reference to the next entity in the entity selection which the entity belongs to."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),".getSelection()")," returns Null), the function returns a Null value."),(0,n.kt)("p",null,"Se n\xe3o houver entidade seguinte v\xe1lida na selec\xe7\xe3o da entidade (ou seja, se estiver na \xfaltima entidade da selec\xe7\xe3o), a fun\xe7\xe3o devolve Null. Se a entidade seguinte tiver sido abandonada, a fun\xe7\xe3o devolve a entidade v\xe1lida seguinte (e eventualmente Nula)."),(0,n.kt)("h4",r({},{id:"exemplo-13"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $nextEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[0]\n $nextEmployee:=$employee.next() //$nextEmployee is the second entity of the $employees entity selection\n\n')),(0,n.kt)("h2",r({},{id:"previous"}),".previous()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".previous()"),"  : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4D. Entity"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Refer\xeancia para a pr\xf3xima entidade de uma sele\xe7\xe3o de entidade (Null se n\xe3o for encontrado)")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-16"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".previous()")," function  returns a reference to the previous entity in the entity selection which the entity belongs to."),(0,n.kt)("p",null,"If the entity does not belong to any existing entity selection (i.e. ",(0,n.kt)("a",r({parentName:"p"},{href:"#getselection"}),".getSelection()")," returns Null), the function returns a Null value."),(0,n.kt)("p",null,"Se n\xe3o houver nenhuma entidade anterior v\xe1lida na sele\xe7\xe3o da entidade (ou seja, voc\xea est\xe1 na primeira entidade da sele\xe7\xe3o), a fun\xe7\xe3o retorna Null. Se a entidade anterior foi abandonada, a fun\xe7\xe3o retorna a entidade v\xe1lida anterior (e eventualmente Null)."),(0,n.kt)("h4",r({},{id:"exemplo-14"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employees : cs. EmployeeSelection\n var $employee; $previousEmployee : cs. EmployeeEntity\n $employees:=ds. Employee.query("lastName = :1";"H@") //This entity selection contains 3 entities\n $employee:=$employees[1]\n $previousEmployee:=$employee.previous() //$previousEmployee is the first entity of the $employees entity selection\n')),(0,n.kt)("h2",r({},{id:"reload"}),".reload()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".reload()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto de estado")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-17"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".reload()")," function reloads the content of the entity in memory, according to information stored in the table related to the dataclass in the datastore. A recarga s\xf3 \xe9 feita se a entidade ainda existir com a mesma chave prim\xe1ria."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultado")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".reload( )")," contains the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True if the reload action is successful, False otherwise.",(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only in case of error")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro, ver abaixo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o do erro, ver abaixo")))),(0,n.kt)("p",null,"(","*",") The following values can be returned in the ",(0,n.kt)("em",{parentName:"p"},"status")," and ",(0,n.kt)("em",{parentName:"p"},"statusText")," properties of ",(0,n.kt)("em",{parentName:"p"},"Result")," object in case of error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Valor"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade n\xe3o existe mais nos dados. This error can occur in the following cases:",(0,n.kt)("br",null),(0,n.kt)("li",null,"the entity has been dropped (the stamp has changed and the memory space is now free)"),(0,n.kt)("li",null,"the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). a entidade foi descartada e substitu\xedda por outra chave prim\xe1ria (o selo mudou e uma nova entidade agora usa o espa\xe7o de mem\xf3ria). When using ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", this error can be returned when ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Associated statusText")),': "Entity does not exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Associated statusText")),': "Other error"')))),(0,n.kt)("h4",r({},{id:"exemplo-15"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employee : cs. EmployeeEntity\n var $employees : cs. EmployeeSelection\n var $result : Object\n\n $employees:=ds. Employee.query("lastName=:1";"Hollis")\n $employee:=$employees[0]\n $employee.firstName:="Mary"\n $result:=$employee.reload()\n Case of\n    :($result.success)\n       ALERT("Reload has been done")\n    :($result.status=dk status entity does not exist anymore)\n       ALERT("The entity has been dropped")\n End case\n')),(0,n.kt)("h2",r({},{id:"save"}),".save()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".save"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge"),": Enables the automatic merge mode")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultado da opera\xe7\xe3o de salvamento")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-18"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," function saves the changes made to the entity in the table related to its dataClass. na tabela relacionada para a dataClass Deve salvar este m\xe9todo depois de criar ou modificar uma entidade se quiser salvar as mudan\xe7as feitas nela."),(0,n.kt)("p",null,'The save operation is executed only if at least one entity attribute has been "touched" (see the ',(0,n.kt)("a",r({parentName:"p"},{href:"#touched"}),(0,n.kt)("inlineCode",{parentName:"a"},".touched()"))," and ",(0,n.kt)("a",r({parentName:"p"},{href:"#touchedattributes"}),(0,n.kt)("inlineCode",{parentName:"a"},".touchedAttributes()"))," functions). Sen\xe3o a fun\xe7\xe3o n\xe3o faz nada (o trigger n\xe3o \xe9 ativado)"),(0,n.kt)("p",null,"In a multi-user or multi-process application, the ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," function is executed under an ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),'"optimistic lock"')," mechanism, wherein an internal locking stamp is automatically incremented each time the record is saved."),(0,n.kt)("p",null,"By default, if the ",(0,n.kt)("em",{parentName:"p"},"mode")," parameter is omitted, the method will return an error (see below) whenever the same entity has been modified by another process or user in the meantime, no matter the modified attribute(s)."),(0,n.kt)("p",null,"Otherwise, you can pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," option in the ",(0,n.kt)("em",{parentName:"p"},"mode"),' parameter: when the automatic merge mode is enabled, a modification done concurrently by another process/user on the same entity but on a different attribute will not result in an error. Os dados resultantes salvos na entidade ser\xe3o a combina\xe7\xe3o ("merge"/fus\xe3o) de todas as modifica\xe7\xf5es n\xe3o simult\xe2neas (se modifica\xe7\xf5es forem aplicadas ao mesmo atributo, a opera\xe7\xe3o de salvar falha e um erro \xe9 retornado, mesmo com o modo auto fus\xe3o)'),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"O modo autom\xe1tico merge n\xe3o est\xe1 dispon\xedvel para atributos de tipo Imagem, Objeto e Texto quando armazenado fora do registro. Concurrent changes in these attributes will result in a ",(0,n.kt)("inlineCode",{parentName:"p"},"dk status stamp has changed")," error.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultado")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," contains the following properties:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se a a\xe7\xe3o salvar tiver sucesso, sen\xe3o False")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only if ",(0,n.kt)("inlineCode",{parentName:"em"},"dk auto merge")," option is used")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"autoMerged"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se fizer uma auto merge, sen\xe3o False")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Error code, ",(0,n.kt)("a",r({parentName:"td"},{href:"#status-and-statustext"}),"see below"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"statusText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Description of the error, ",(0,n.kt)("a",r({parentName:"td"},{href:"#status-and-statustext"}),"see below"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Dispon\xedvel apenas em caso de erro de bloqueio pessimista")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'"Bloqueado pelo registro"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Informa\xe7\xf5es sobre a origem do bloqueio")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de usu\xe1rio de sess\xe3o na m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"User alias if defined by ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", otherwise user name in the 4D directory")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome da m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nome de processo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Available only in case of serious error"))," (serious error - can be trying to duplicate a primary key, disk full...):")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"uma cole\xe7\xe3o de objetos"),(0,n.kt)("td",r({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Mensagem de erro")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"componentSignature"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),'Assinatura interna do componente (ex.: "dmbg" significa componente da base de dados)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null})),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"C\xf3digo de erro")))),(0,n.kt)("h5",r({},{id:"status-e-statustext"}),"status e statusText"),(0,n.kt)("p",null,"The following values can be returned in the ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"statusText")," properties of Result object in case of error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Valor"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Coment\xe1rio"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status automerge failed")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"6"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"(Only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," option is used) The automatic merge option failed when saving the entity.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Auto merge failed"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A entidade n\xe3o existe mais nos dados. This error can occur in the following cases:",(0,n.kt)("br",null),(0,n.kt)("li",null,"the entity has been dropped (the stamp has changed and the memory space is now free)"),(0,n.kt)("li",null,"the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). a entidade foi descartada e substitu\xedda por outra chave prim\xe1ria (o selo mudou e uma nova entidade agora usa o espa\xe7o de mem\xf3ria). When using ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", this error can be returned when ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Entity doesnot exist anymore"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"The entity is locked by a pessimistic lock.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Already locked"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Other error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).",(0,n.kt)("br",null),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")," option is not used"),(0,n.kt)("li",null,"with ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error only if the ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")," option is not used"),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Stamp has changed"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Os privil\xe9gios actuais n\xe3o permitem a salvaguarda da entidade. ",(0,n.kt)("strong",{parentName:"td"},"Associated statusText"),': "Permission Error"')))),(0,n.kt)("h4",r({},{id:"exemplo-1-4"}),"Exemplo 1"),(0,n.kt)("p",null,"Criar uma nova entidade:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs. EmployeeEntity\n $employee:=ds. Employee.new()\n $employee.firstName:="Mary"\n $employee.lastName:="Smith"\n $status:=$employee.save()\n If($status.success)\n    ALERT("Employee created")\n End if\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-3"}),"Exemplo 2"),(0,n.kt)("p",null,"Updating an entity without ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs. EmployeeEntity\n var $employees : cs. EmployeeSelection\n $employees:=ds. Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save()\n Case of\n    :($status.success)\n       ALERT("Employee updated")\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-1"}),"Exemplo 3"),(0,n.kt)("p",null,"Updating an entity with ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n\n var $employee : cs. EmployeeEntity\n var $employees : cs. EmployeeSelection\n\n $employees:=ds. Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save(dk auto merge)\n Case of\n    :($status.success)\n       ALERT("Employee updated")\n    :($status.status=dk status automerge failed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",r({},{id:"toobject"}),".toObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"filterString"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Atributos a extrair (string separada por v\xedrgulas)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"filterCol"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Cole\xe7\xe3o de atributos a extrair")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"options"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk with primary key"),": adds the ","_","_","KEY property;",(0,n.kt)("br",null),(0,n.kt)("inlineCode",{parentName:"td"},"dk with stamp"),": adds the ","_","STAMP property")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto criado a partir da entidade")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-19"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," function returns an object which has been built from the entity. Os nomes das propriedades no objecto correspondem aos nomes dos atributos da entidade."),(0,n.kt)("p",null,"If no filter is specified, or if the ",(0,n.kt)("em",{parentName:"p"},"filterString"),' parameter contains an empty string or "',"*",'", the returned object will contain:'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"todos os atributos de entidade de armazenagem"),(0,n.kt)("li",{parentName:"ul"},"attributes of the ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")," ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/pt/API/DataClassClass#attributename"}),"kind"),": you get a property with the same name as the related entity (name of the many-to-one link). Atributo \xe9 extraido com um formul\xe1rio simples."),(0,n.kt)("li",{parentName:"ul"},"attributes of the ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntities")," ",(0,n.kt)("a",r({parentName:"li"},{href:"/docs/pt/API/DataClassClass#attributename"}),"kind"),": attribute is not returned.")),(0,n.kt)("p",null,"No primeiro par|\xe2metro, passa os atributos entidade a extrair. Pode passar:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterString"),': a string with property paths separated with commas: "propertyPath1, propertyPath2, ...", or'),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterCol"),": a collection of strings: ","[",'"propertyPath1","propertyPath2";...]')),(0,n.kt)("p",null,"If a filter is specified for attributes of the relatedEntity ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassClass#attributename"}),"kind"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity" -> it is extracted with simple form: an object with property ',"_","_","KEY (primary key)."),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.',"*",'" -> all the properties are extracted'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.propertyName1; relatedEntity.propertyName2; ..." -> s\xf3 se extraem essas propriedades')),(0,n.kt)("p",null,"If a filter is specified for attributes of the relatedEntities ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassClass#attributename"}),"kind"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.',"*",'" -> all the properties are extracted'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.propertyName1; relatedEntities.propertyName2; ..." -> s\xf3 se extraem essas propriedades')),(0,n.kt)("p",null,"In the ",(0,n.kt)("em",{parentName:"p"},"options")," parameter, you can pass the ",(0,n.kt)("inlineCode",{parentName:"p"},"dk with primary key")," and/or",(0,n.kt)("inlineCode",{parentName:"p"},"dk with stamp")," selector(s) to add the entity's primary keys and/or stamps in extracted objects."),(0,n.kt)("admonition",r({},{title:"Aviso",type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},'Se utilizar outro atributo que n\xe3o a chave prim\xe1ria como o atributo Um numa rela\xe7\xe3o, o valor deste atributo ser\xe1 escrito na propriedade "__KEY". Keep in mind that it is recommended to use the primary key as One attribute in your relations, especially when you use ',(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," and ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()")," functions.")),(0,n.kt)("h4",r({},{id:"exemplo-1-5"}),"Exemplo 1"),(0,n.kt)("p",null,"A estrutura abaixo ser\xe1 usada nos exemplos desta se\xe7\xe3o:"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(527759).Z,width:"1000",height:"610"})),(0,n.kt)("p",null,"Sem par\xe2metros de filtro:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),"employeeObject:=employeeSelected.toObject()\n")),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": { // relatedEntity extra\xedda com forma simples\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-4"}),"Exemplo 2"),(0,n.kt)("p",null,"Extrair a chave prim\xe1ria e a estampa:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("";dk with primary key+dk with stamp)\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "__KEY": 413,\n   "__STAMP": 1,\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": {\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-2"}),"Exemplo 3"),(0,n.kt)("p",null,"Expanding all the properties of ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("directReports.*")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "directReports": [\n        {\n            "ID": 418,\n            "firstName": "Lorena",\n            "lastName": "Boothe",\n            "salary": 44800,\n            "birthDate": "1970-10-02T00:00:00.000Z",\n            "woman": true,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 419,\n            "firstName": "Drew",\n            "lastName": "Caudill",\n            "salary": 41000,\n            "birthDate": "2030-01-12T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 420,\n            "firstName": "Nathan",\n            "lastName": "Gomes",\n            "salary": 46300,\n            "birthDate": "2010-05-29T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        }\n    ]\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-16"}),"Exemplo"),(0,n.kt)("p",null,"Extracting some properties of ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("firstName, directReports.lastName")\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "directReports": [\n        {\n            "lastName": "Boothe"\n        },\n        {\n            "lastName": "Caudill"\n        },\n        {\n            "lastName": "Gomes"\n        }\n    ]\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-5"}),"Exemplo 2"),(0,n.kt)("p",null,"Extracting a ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," with simple form:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $coll:=New collection("firstName";"employer")\n employeeObject:=employeeSelected.toObject($coll)\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "employer": {\n        "__KEY": 20\n    }\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-6-1"}),"Exemplo 6"),(0,n.kt)("p",null,"Extracting all the properties of a ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("employer.*")\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "ID": 20,\n        "name": "India Astral Secretary",\n        "creationDate": "1984-08-25T00:00:00.000Z",\n        "revenues": 12000000,\n        "extra": null\n    }\n}\n')),(0,n.kt)("h4",r({},{id:"exemplo-3-3"}),"Exemplo 3"),(0,n.kt)("p",null,"Extracting some properties of a ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' $col:=New collection\n $col.push("employer.name")\n $col.push("employer.revenues")\n employeeObject:=employeeSelected.toObject($col)\n')),(0,n.kt)("p",null,"Retorna:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "name": "India Astral Secretary",\n        "revenues": 12000000\n    }\n}\n')),(0,n.kt)("h2",r({},{id:"touched-"}),".touched( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touched()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"True se tiver modificado ao menos um atributo da entidade e ainda n\xe3o for salvo, se n\xe3o, False")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-20"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," function tests whether or not an entity attribute has been modified since the entity was loaded into memory or saved."),(0,n.kt)("p",null,"Se um atributo for modificado ou calculado, a fun\xe7\xe3o retorna True, sen\xe3o retorna False. Pode usar essa fun\xe7\xe3o para determinar se precisar salvar a entidade."),(0,n.kt)("p",null,"This function returns False for a new entity that has just been created (with ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassClass#new"}),(0,n.kt)("inlineCode",{parentName:"a"},".new( )")),"). Note however that if you use a function which calculates an attribute of the entity, the ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," function will then return True. For example, if you call ",(0,n.kt)("a",r({parentName:"p"},{href:"#getkey"}),(0,n.kt)("inlineCode",{parentName:"a"},".getKey()"))," to calculate the primary key, ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," returns True."),(0,n.kt)("h4",r({},{id:"exemplo-17"}),"Exemplo"),(0,n.kt)("p",null,"Neste exemplo, vemos se \xe9 necess\xe1rio salvar a entidade:"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," var $emp : cs. EmployeeEntity\n $emp:=ds. Employee.get(672)\n $emp.firstName:=$emp.firstName //Even if updated with the same value, the attribute is marked as touched\n\n If($emp.touched()) //if at least one of the attributes has been changed\n    $emp.save()\n End if // otherwise, no need to save the entity\n")),(0,n.kt)("h2",r({},{id:"touchedattributes-"}),".touchedAttributes( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touchedAttributes()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Nomes de atributos touched ou cole\xe7\xe3o vazia")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-21"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".touchedAttributes()")," function returns the names of the attributes that have been modified since the entity was loaded into memory."),(0,n.kt)("p",null,"This applies for attributes of the ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/API/DataClassClass#attributename"}),"kind")," ",(0,n.kt)("inlineCode",{parentName:"p"},"storage")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),"."),(0,n.kt)("p",null,"No caso de uma entidade relacionada que foi tocada (touched) ","*","ou seja, a chave prim\xe1ria) o nome da entidade relacionada e sua chave prim\xe1ria s\xe3o retornados."),(0,n.kt)("p",null,"Se nenhum atributo de entidade for tocado, o m\xe9todo retorna uma cole\xe7\xe3o vazia."),(0,n.kt)("h4",r({},{id:"exemplo-1-6"}),"Exemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs. EmployeeEntity\n\n $touchedAttributes:=New collection\n $emp:=ds. Employee.get(725)\n $emp.firstName:=$emp.firstName //Even if updated with the same value, the attribute is marked as touched\n $emp.lastName:="Martin"\n $touchedAttributes:=$emp.touchedAttributes()\n  //$touchedAttributes: ["firstName","lastName"]\n')),(0,n.kt)("h4",r({},{id:"exemplo-2-6"}),"Exemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs. EmployeeEntity\n var $company : cs. CompanyEntity\n\n $touchedAttributes:=New collection\n\n $emp:=ds. Employee.get(672)\n $emp.firstName:=$emp.firstName\n $emp.lastName:="Martin"\n\n $company:=ds. Company.get(121)\n $emp.employer:=$company\n\n $touchedAttributes:=$emp.touchedAttributes()\n\n  //collection $touchedAttributes: ["firstName","lastName","employer","employerID"]\n')),(0,n.kt)("p",null,"Nesse modo:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"firstName and lastName have a ",(0,n.kt)("inlineCode",{parentName:"li"},"storage")," kind"),(0,n.kt)("li",{parentName:"ul"},"employer has a ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")," kind"),(0,n.kt)("li",{parentName:"ul"},"employerID \xe9 a chave estrangeira da entidade relacionada employer")),(0,n.kt)("h2",r({},{id:"unlock"}),".unlock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3ria"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Release"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Mudan\xe7as"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"17"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Adicionado"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".unlock()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Par\xe2metro"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:"center"})),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Resultados"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",r({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Objeto de estado")))),(0,n.kt)("h4",r({},{id:"descri\xe7\xe3o-22"}),"Descri\xe7\xe3o"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," function removes the pessimistic lock on the record matching the entity in the datastore and table related to its dataclass."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"For more information, please refer to ",(0,n.kt)("a",r({parentName:"p"},{href:"/docs/pt/ORDA/entities#entity-locking"}),"Entity locking")," section.")),(0,n.kt)("p",null,"Um registro \xe9 destrancado automaticamente quando n\xe3o for mais referenciado por nenhuma entidade no processo de trancamento (por exemplo, se uma tranca for posta apenas na refer\xeancia local da entidade, a entidade e o registro \xe9 destrancado quando o processo terminar)."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Quando um registro for trancado, deve ser destrancado do processo de trancamento e na refer\xeancia de entidade que colocou a tranca. Por exemplo:")),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"})," $e1:=ds. Emp.all()[0]\n $e2:=ds. Emp.all()[0]\n $res:=$e1.lock() //$res.success=true\n $res:=$e2.unlock() //$res.success=false\n $res:=$e1.unlock() //$res.success=true\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Resultado")),(0,n.kt)("p",null,"The object returned by ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," contains the following property:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Propriedade"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",r({parentName:"tr"},{align:null}),"Descri\xe7\xe3o"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",r({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Par\xe2metros"),(0,n.kt)("td",r({parentName:"tr"},{align:null}),"Verdadeiro se a a\xe7\xe3o de destrancar for bem-sucedida, Falso caso contr\xe1rio. Se o desbloqueio for feito em uma entidade abandonada, em um registro n\xe3o bloqueado ou em um registro bloqueado por outro processo ou entidade, o sucesso \xe9 False.")))),(0,n.kt)("h4",r({},{id:"exemplo-18"}),"Exemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",r({parentName:"pre"},{className:"language-4d"}),' var $employee : cs. EmployeeEntity\n var $status : Object\n\n $employee:=ds. Employee.get(725)\n $status:=$employee.lock()\n ... //processing\n $status:=$employee.unlock()\n If($status.success)\n    ALERT("The entity is now unlocked")\n End if\n')))}u.isMDXComponent=!0},527759:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute4-96c4a541a87b02eee83316636b0ae059.png"}}]);