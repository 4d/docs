"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["36371"],{714009:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>a,toc:()=>c,default:()=>h,metadata:()=>r,assets:()=>l,contentTitle:()=>d});var r=JSON.parse('{"id":"API/SignalClass","title":"Signal","description":"Sinais s\xe3o ferramentas fornecidas pela linguagem 4D para gerenciar intera\xe7\xf5es e evitar conflitos entre processos em uma aplica\xe7\xe3o multiprocesso. Sinais permitem assegurar que um ou mais processos v\xe3o esperar por uma tarefa espec\xedfica a ser completada antes de continuar a execu\xe7\xe3o. Qualquer processo pode esperar ou liberar um sinal.","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-20-R9/API/SignalClass.md","sourceDirName":"API","slug":"/API/SignalClass","permalink":"/docs/pt/20-R9/API/SignalClass","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FSignalClass.md%20(20-R9)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R9","frontMatter":{"id":"SignalClass","title":"Signal"},"sidebar":"docs","previous":{"title":"Session","permalink":"/docs/pt/20-R9/API/SessionClass"},"next":{"title":"SMTPTransporter","permalink":"/docs/pt/20-R9/API/SMTPTransporterClass"}}'),o=n(785893),i=n(250065);let a={id:"SignalClass",title:"Signal"},d=void 0,l={},c=[{value:"Objeto sinal",id:"objeto-sinal",level:3},{value:"Trabalhar com sinais",id:"trabalhar-com-sinais",level:3},{value:"Exemplo",id:"exemplo",level:3},{value:"Resumo",id:"resumo",level:3},{value:".description",id:"description",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",level:4},{value:".signaled",id:"signaled",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-1",level:4},{value:".trigger()",id:"trigger",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-2",level:4},{value:".wait()",id:"wait",level:2},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o-3",level:4}];function t(e){let s={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.p,{children:"Sinais s\xe3o ferramentas fornecidas pela linguagem 4D para gerenciar intera\xe7\xf5es e evitar conflitos entre processos em uma aplica\xe7\xe3o multiprocesso. Sinais permitem assegurar que um ou mais processos v\xe3o esperar por uma tarefa espec\xedfica a ser completada antes de continuar a execu\xe7\xe3o. Qualquer processo pode esperar ou liberar um sinal."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"Os sem\xe1foros podem ser usados para gerenciar intera\xe7\xf5es. Os sem\xe1foros permitem garantir que dois ou mais processos n\xe3o modifiquem o mesmo recurso (arquivo, registro...) ao mesmo tempo. S\xf3 o processo que estabelece o sem\xe1foro pode remov\xea-lo."}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"objeto-sinal",children:"Objeto sinal"}),"\n",(0,o.jsx)(s.p,{children:"Um sinal \xe9 um objeto partilhado que deve ser passado como par\xe2metro a comandos que chamam ou criam trabalhadores ou processo."}),"\n",(0,o.jsxs)(s.p,{children:["Um objeto ",(0,o.jsx)(s.code,{children:"4D.Signal"})," cont\xe9m os seguintes m\xe9todos e propriedades integrados:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"#wait",children:(0,o.jsx)(s.code,{children:".wait()"})})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"#trigger",children:(0,o.jsx)(s.code,{children:".trigger()"})})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"#signaled",children:(0,o.jsx)(s.code,{children:".signaled"})})}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"#description",children:(0,o.jsx)(s.code,{children:".description"})}),"."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Qualquer worker/processo que chamar o m\xe9todo ",(0,o.jsx)(s.code,{children:".wait()"})," suspender\xe1 sua execu\xe7\xe3o at\xe9 que a propriedade ",(0,o.jsx)(s.code,{children:".signaled"})," seja true. Enquanto espera um sinal, o processo que chamar n\xe3o usa nenhuma CPU. Isso pode ser muito interessante para o rendimento nas aplica\xe7\xf5es multiprocesso. A propriedade ",(0,o.jsx)(s.code,{children:".signaled"})," torna-se true quando qualquer worker/processo chama o m\xe9todo ",(0,o.jsx)(s.code,{children:".trigger()"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Observe que, para evitar situa\xe7\xf5es de bloqueio, o ",(0,o.jsx)(s.code,{children:".wait()"})," tamb\xe9m pode retornar depois que um tempo limite definido for atingido."]}),"\n",(0,o.jsxs)(s.p,{children:["Os objetos Signal s\xe3o criados com o comando ",(0,o.jsx)(s.a,{href:"/docs/pt/20-R9/commands/new-signal",children:(0,o.jsx)(s.code,{children:"New signal"})}),"."]}),"\n",(0,o.jsx)(s.h3,{id:"trabalhar-com-sinais",children:"Trabalhar com sinais"}),"\n",(0,o.jsxs)(s.p,{children:["Em 4D, voc\xea cria um objeto signal chamando o comando ",(0,o.jsx)(s.a,{href:"/docs/pt/20-R9/commands/new-signal",children:(0,o.jsx)(s.code,{children:"New signal"})}),". Ap\xf3s criado, esse sinal deve ser passado como par\xe2metro para os comandos ",(0,o.jsx)(s.code,{children:"New process"})," ou ",(0,o.jsx)(s.code,{children:"CALL WORKER"})," para eles poderem modific\xe1-lo quando tiverem conclu\xeddo a tarefa pela qual voc\xea deseja esperar."]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O ",(0,o.jsx)(s.code,{children:"signal.wait()"})," deve ser chamado pelo worker/processo que precisa que outro worker/processo termine uma tarefa para poder continuar."]}),"\n",(0,o.jsxs)(s.li,{children:["O ",(0,o.jsx)(s.code,{children:"signal.trigger()"})," deve ser chamado pelo worker/processo que terminou sua execu\xe7\xe3o para liberar todos os outros."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{src:n(583811).Z+"",width:"813",height:"324"})}),"\n",(0,o.jsxs)(s.p,{children:["Uma vez que um sinal tenha sido liberado por uma chamada ",(0,o.jsx)(s.code,{children:"signal.trigger()"}),", ele n\xe3o poder\xe1 ser reutilizado novamente. Se voc\xea quiser definir outro sinal, precisar\xe1 chamar o comando ",(0,o.jsx)(s.code,{children:"New signal"})," novamente."]}),"\n",(0,o.jsxs)(s.p,{children:["Como um objeto de sinal \xe9 um ",(0,o.jsx)(s.a,{href:"/docs/pt/20-R9/Concepts/shared",children:"objeto compartilhado"}),", voc\xea pode us\xe1-lo para retornar resultados de worker/processos chamados, desde que n\xe3o se esque\xe7a de escrever valores em uma estrutura ",(0,o.jsx)(s.code,{children:"Use...End use"})," (veja o exemplo)."]}),"\n",(0,o.jsx)(s.h3,{id:"exemplo",children:"Exemplo"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-4d",children:' var $signal : 4D.Signal\n\n// Cria\xe7\xe3o de um sinal\n $signal:=New signal\n\n// chamar o processo principal e executar o m\xe9todo OpenForm\n CALL WORKER(1;"OpenForm";$signal)\n// fazer outro c\xe1lculo\n...\n// Esperando pelo fim do processo\n $signaled:=$signal.wait()\n\n// Processamento dos resultados\n $calc:=$signal.result+...\n'})}),"\n",(0,o.jsxs)(s.p,{children:["M\xe9todo ",(0,o.jsx)(s.em,{children:(0,o.jsx)(s.strong,{children:"OpenForm"})})," :"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-4d",children:' #DECLARE ($signal : 4D.Signal)  \n var $form : Object\n $form:=New object("value";0)\n\n  // Abrir o formul\xe1rio\n $win:=Open form window("Information";Movable form dialog box)\n DIALOG("Information";$form)\n CLOSE WINDOW($win)\n\n  // Adicione um novo atributo ao seu objeto compartilhado $signal para passar seu resultado ao outro processo:\n Use($signal)\n    $signal.result:=$form.value\n End use\n\n  // Disparar o sinal para o processo de espera\n $signal.trigger()\n'})}),"\n",(0,o.jsx)(s.h3,{id:"resumo",children:"Resumo"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsx)(s.tr,{children:(0,o.jsx)(s.th,{})})}),(0,o.jsxs)(s.tbody,{children:[(0,o.jsx)(s.tr,{children:(0,o.jsxs)(s.td,{children:[(0,o.jsxs)(s.a,{href:"#description",children:[(0,o.jsx)(s.strong,{children:".description"})," : Text"]}),(0,o.jsx)(s.br,{}),"cont\xe9m uma descri\xe7\xe3o personalizada para o objeto ",(0,o.jsx)(s.code,{children:"Signal"})]})}),(0,o.jsx)(s.tr,{children:(0,o.jsxs)(s.td,{children:[(0,o.jsxs)(s.a,{href:"#signaled",children:[(0,o.jsx)(s.strong,{children:".signaled"})," : Boolean"]}),(0,o.jsx)(s.br,{}),"cont\xe9m o estado atual do objeto ",(0,o.jsx)(s.code,{children:"Signal"})]})}),(0,o.jsx)(s.tr,{children:(0,o.jsxs)(s.td,{children:[(0,o.jsx)(s.a,{href:"#trigger",children:(0,o.jsx)(s.strong,{children:".trigger( )"})}),(0,o.jsx)(s.br,{}),"define a propriedade ",(0,o.jsx)(s.code,{children:"signaled"})," do objeto de sinal como ",(0,o.jsx)(s.strong,{children:"true"})]})}),(0,o.jsx)(s.tr,{children:(0,o.jsxs)(s.td,{children:[(0,o.jsxs)(s.a,{href:"#wait",children:[(0,o.jsx)(s.strong,{children:".wait"}),"( { ",(0,o.jsx)(s.em,{children:"timeout"})," : Real } ) : Boolean "]}),(0,o.jsx)(s.br,{}),"faz com que o processo atual aguarde at\xe9 que a propriedade ",(0,o.jsx)(s.code,{children:".signaled"})," do objeto signal se torne ",(0,o.jsx)(s.strong,{children:"true"})," ou o ",(0,o.jsx)(s.em,{children:"timeout"})," opcional expire"]})})]})]}),"\n",(0,o.jsx)(s.h2,{id:"description",children:".description"}),"\n",(0,o.jsxs)(s.details,{children:[(0,o.jsx)(s.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Release"}),(0,o.jsx)(s.th,{children:"Mudan\xe7as"})]})}),(0,o.jsx)(s.tbody,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"17 R4"}),(0,o.jsx)(s.td,{children:"Adicionado"})]})})]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:".description"})," : Text"]}),"\n",(0,o.jsx)(s.h4,{id:"descri\xe7\xe3o",children:"Descri\xe7\xe3o"}),"\n",(0,o.jsxs)(s.p,{children:["A propriedade cont\xe9m uma descri\xe7\xe3o personalizada para o objeto ",(0,o.jsx)(s.code,{children:"Signal"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:".description"})," pode ser definida ao criar o objeto signal ou a qualquer momento. Note que uma vez que o objeto ",(0,o.jsx)(s.code,{children:"Signal"})," \xe9 um objeto compartilhado, qualquer acesso ao modo de escrita \xe0 propriedade ",(0,o.jsx)(s.code,{children:".description"})," deve estar cercado por uma estrutura ",(0,o.jsx)(s.code,{children:"Use...End use"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Essa propriedade \xe9 ",(0,o.jsx)(s.strong,{children:"leitura-escrita"}),"."]}),"\n",(0,o.jsx)(s.h2,{id:"signaled",children:".signaled"}),"\n",(0,o.jsxs)(s.details,{children:[(0,o.jsx)(s.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Release"}),(0,o.jsx)(s.th,{children:"Mudan\xe7as"})]})}),(0,o.jsx)(s.tbody,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"17 R4"}),(0,o.jsx)(s.td,{children:"Adicionado"})]})})]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:".signaled"})," : Boolean"]}),"\n",(0,o.jsx)(s.h4,{id:"descri\xe7\xe3o-1",children:"Descri\xe7\xe3o"}),"\n",(0,o.jsxs)(s.p,{children:["A propriedade ",(0,o.jsx)(s.code,{children:".signaled"})," cont\xe9m o estado atual do objeto ",(0,o.jsx)(s.code,{children:"Signal"}),". Quando o sinal \xe9 criado, ",(0,o.jsx)(s.code,{children:".signaled"})," \xe9 ",(0,o.jsx)(s.strong,{children:"False"}),". Torna-se ",(0,o.jsx)(s.strong,{children:"True"})," quando o ",(0,o.jsx)(s.code,{children:".trigger( )"})," \xe9 chamado no objeto."]}),"\n",(0,o.jsxs)(s.p,{children:["Essa propriedade \xe9 ",(0,o.jsx)(s.strong,{children:"somente leitura"}),"."]}),"\n",(0,o.jsx)(s.h2,{id:"trigger",children:".trigger()"}),"\n",(0,o.jsxs)(s.details,{children:[(0,o.jsx)(s.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Release"}),(0,o.jsx)(s.th,{children:"Mudan\xe7as"})]})}),(0,o.jsx)(s.tbody,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"17 R4"}),(0,o.jsx)(s.td,{children:"Adicionado"})]})})]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:".trigger( )"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Par\xe2metro"}),(0,o.jsx)(s.th,{children:"Tipo"}),(0,o.jsx)(s.th,{style:{textAlign:"center"}}),(0,o.jsx)(s.th,{children:"Descri\xe7\xe3o"})]})}),(0,o.jsx)(s.tbody,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{}),(0,o.jsx)(s.td,{}),(0,o.jsx)(s.td,{style:{textAlign:"center"}}),(0,o.jsx)(s.td,{children:"N\xe3o exige nenhum par\xe2metro"})]})})]}),"\n",(0,o.jsx)(s.h4,{id:"descri\xe7\xe3o-2",children:"Descri\xe7\xe3o"}),"\n",(0,o.jsxs)(s.p,{children:["A fun\xe7\xe3o ",(0,o.jsx)(s.code,{children:".trigger( )"})," define a propriedade ",(0,o.jsx)(s.code,{children:"signaled"})," do objeto de sinal como ",(0,o.jsx)(s.strong,{children:"true"})," e desperta todos os workers ou processos esperando por este sinal."]}),"\n",(0,o.jsxs)(s.p,{children:["Se o sinal j\xe1 estiver no estado de sinaliza\xe7\xe3o (ou seja, a propriedade ",(0,o.jsx)(s.code,{children:"signaled"})," j\xe1 for ",(0,o.jsx)(s.strong,{children:"true"}),"), a fun\xe7\xe3o n\xe3o faz nada."]}),"\n",(0,o.jsx)(s.h2,{id:"wait",children:".wait()"}),"\n",(0,o.jsxs)(s.details,{children:[(0,o.jsx)(s.summary,{children:"Hist\xf3ria"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Release"}),(0,o.jsx)(s.th,{children:"Mudan\xe7as"})]})}),(0,o.jsx)(s.tbody,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"17 R4"}),(0,o.jsx)(s.td,{children:"Adicionado"})]})})]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:".wait"}),"( { ",(0,o.jsx)(s.em,{children:"timeout"})," : Real } ) : Boolean"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Par\xe2metro"}),(0,o.jsx)(s.th,{children:"Tipo"}),(0,o.jsx)(s.th,{}),(0,o.jsx)(s.th,{children:"Descri\xe7\xe3o"})]})}),(0,o.jsxs)(s.tbody,{children:[(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"timeout"}),(0,o.jsx)(s.td,{children:"Real"}),(0,o.jsx)(s.td,{children:"->"}),(0,o.jsx)(s.td,{children:"Tempo m\xe1ximo de espera em segundos"})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"Resultados"}),(0,o.jsx)(s.td,{children:"Par\xe2metros"}),(0,o.jsx)(s.td,{children:"<-"}),(0,o.jsxs)(s.td,{children:["Estado da propriedade ",(0,o.jsx)(s.code,{children:".signaled"})]})]})]})]}),"\n",(0,o.jsx)(s.h4,{id:"descri\xe7\xe3o-3",children:"Descri\xe7\xe3o"}),"\n",(0,o.jsxs)(s.p,{children:["A fun\xe7\xe3o ",(0,o.jsx)(s.code,{children:".wait( )"})," faz com que o processo atual aguarde at\xe9 que a propriedade ",(0,o.jsx)(s.code,{children:".signaled"})," do objeto signal se torne ",(0,o.jsx)(s.strong,{children:"true"})," ou o ",(0,o.jsx)(s.em,{children:"timeout"})," opcional expire."]}),"\n",(0,o.jsxs)(s.p,{children:["Para evitar o bloqueio de c\xf3digo, voc\xea pode passar um tempo m\xe1ximo de espera em segundos no par\xe2metro ",(0,o.jsx)(s.em,{children:"timeout"}),". Aceitam-se n\xfameros decimais."]}),"\n",(0,o.jsxs)(s.p,{children:["Se o sinal j\xe1 estiver no estado de sinaliza\xe7\xe3o (ou seja, a propriedade ",(0,o.jsx)(s.code,{children:".signaled"})," j\xe1 \xe9 ",(0,o.jsx)(s.strong,{children:"true"}),"), a fun\xe7\xe3o devolve imediatamente, sem esperar."]}),"\n",(0,o.jsx)(s.p,{children:"A fun\xe7\xe3o devolve o valor da propriedade .signaled:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"true"})," se o sinal foi acionado (",(0,o.jsx)(s.code,{children:".trigger()"})," foi chamado)."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"false"})," se o tempo limite expirou antes de o sinal ser acionado."]}),"\n"]}),"\n",(0,o.jsx)(s.admonition,{title:"Aviso",type:"note",children:(0,o.jsxs)(s.p,{children:["N\xe3o \xe9 recomend\xe1vel chamar ",(0,o.jsx)(s.code,{children:".wait()"})," sem um ",(0,o.jsx)(s.em,{children:"timeout"})," no processo principal, pois isso pode congelar toda a aplica\xe7\xe3o 4D."]})}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:["O estado de um processo que espera um signal \xe9 ",(0,o.jsx)(s.code,{children:"Waiting for internal flag"}),"."]}),"\n"]})]})}function h(e={}){let{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},583811:function(e,s,n){n.d(s,{Z:()=>r});let r=n.p+"assets/images/signal-f8f54304f438eaf43a007e7cd1be6f66.png"},250065:function(e,s,n){n.d(s,{Z:()=>d,a:()=>a});var r=n(667294);let o={},i=r.createContext(o);function a(e){let s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);