"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["94494"],{487595:function(e,s,o){o.r(s),o.d(s,{default:()=>m,frontMatter:()=>i,metadata:()=>a,assets:()=>r,toc:()=>c,contentTitle:()=>d});var a=JSON.parse('{"id":"ORDA/datastores","title":"Utilizar um datastore remoto","description":"Um datastore exposto em uma aplica\xe7\xe3o 4D pode ser acessado simultaneamente atrav\xe9s de diferentes clientes:","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-20/ORDA/remoteDatastores.md","sourceDirName":"ORDA","slug":"/ORDA/datastores","permalink":"/docs/pt/20/ORDA/datastores","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20ORDA%2FremoteDatastores.md%20(20)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20","frontMatter":{"id":"datastores","title":"Utilizar um datastore remoto"},"sidebar":"docs","previous":{"title":"Trabalhar com dados","permalink":"/docs/pt/20/ORDA/entities"},"next":{"title":"Privil\xe9gios","permalink":"/docs/pt/20/ORDA/privileges"}}'),t=o("785893"),n=o("250065");let i={id:"datastores",title:"Utilizar um datastore remoto"},d=void 0,r={},c=[{value:"Abertura de sess\xf5es",id:"abertura-de-sess\xf5es",level:2},{value:"Visionamento de sess\xf5es",id:"visionamento-de-sess\xf5es",level:3},{value:"Bloqueio e transac\xe7\xf5es",id:"bloqueio-e-transac\xe7\xf5es",level:3},{value:"Fechamento das sess\xf5es",id:"fechamento-das-sess\xf5es",level:3},{value:"Otimiza\xe7\xe3o cliente/servidor",id:"otimiza\xe7\xe3o-clienteservidor",level:2},{value:"Contexto",id:"contexto",level:3},{value:"Exemplo",id:"exemplo",level:4},{value:"Reutilizar a propriedade context",id:"reutilizar-a-propriedade-context",level:4},{value:"List box baseado em uma sele\xe7\xe3o de entidades",id:"list-box-baseado-em-uma-sele\xe7\xe3o-de-entidades",level:4},{value:"Pr\xe9-configura\xe7\xe3o de contextos",id:"pr\xe9-configura\xe7\xe3o-de-contextos",level:4},{value:"Cache ORDA",id:"cache-orda",level:3}];function l(e){let s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.p,{children:["Um ",(0,t.jsx)(s.a,{href:"/docs/pt/20/ORDA/dsmapping#datastore",children:"datastore"})," exposto em uma aplica\xe7\xe3o 4D pode ser acessado simultaneamente atrav\xe9s de diferentes clientes:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["As aplica\xe7\xf5es 4D remotas usando ORDA para acessar o datastore principal com o comando ",(0,t.jsx)(s.code,{children:"ds"}),". Note que a aplica\xe7\xe3o 4D remota ainda pode acessar o banco de dados no modo cl\xe1ssico. Esses acessos s\xe3o tratados pelo ",(0,t.jsx)(s.strong,{children:"servidor de aplica\xe7\xf5es 4D"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Outras aplica\xe7\xf5es 4D (4D remote, 4D Server) abrindo uma sess\xe3o no banco de dados remoto atrav\xe9s do comando ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataStoreClass#open-datastore",children:(0,t.jsx)(s.code,{children:"Open datastore"})}),". Esses acessos s\xe3o transmitidos pelo servidor ",(0,t.jsx)(s.strong,{children:"HTTP REST"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["4D for iOS queries for updating iOS applications. Esses acessos s\xe3o transmitidos pelo ",(0,t.jsx)(s.strong,{children:"servidor HTTP"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"abertura-de-sess\xf5es",children:"Abertura de sess\xf5es"}),"\n",(0,t.jsxs)(s.p,{children:["Quando voc\xea trabalha com um datastore remoto referenciado por chamadas para o comando ",(0,t.jsx)(s.code,{children:"Open datastore"}),", a conex\xe3o entre os processos solicitantes e o datastore remoto \xe9 tratada por sess\xf5es."]}),"\n",(0,t.jsxs)(s.p,{children:["Uma sess\xe3o criada no datastore remoto para lidar com a conex\xe3o. Esta sess\xe3o \xe9 identificada usando um ID de sess\xe3o interno associado ao ",(0,t.jsx)(s.code,{children:"localID"})," no lado da aplica\xe7\xe3o 4D. Essa sess\xe3o gerencia automaticamente o acesso a dados, sele\xe7\xf5es de entidades ou entidades."]}),"\n",(0,t.jsxs)(s.p,{children:["O ",(0,t.jsx)(s.code,{children:"localID"})," \xe9 local para a m\xe1quina que conecta ao datastore remoto, o que significa:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Se outros processos da mesma aplica\xe7\xe3o precisam acessar o mesmo datastore remoto, eles podem usar o mesmo ",(0,t.jsx)(s.code,{children:"localID"})," e, assim, compartilhar a mesma sess\xe3o."]}),"\n",(0,t.jsxs)(s.li,{children:["Se outro processo da mesma aplica\xe7\xe3o abrir o mesmo datastore remoto, mas com outro ",(0,t.jsx)(s.code,{children:"localID"}),", ele criar\xe1 uma sess\xe3o no datastore remoto."]}),"\n",(0,t.jsxs)(s.li,{children:["Se outra m\xe1quina se conectar ao mesmo datastore remoto com o mesmo ",(0,t.jsx)(s.code,{children:"localID"}),", ela criar\xe1 outra sess\xe3o com outro cookie."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Estes princ\xedpios s\xe3o ilustrados nos gr\xe1ficos seguintes:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:o(651744).Z+"",width:"962",height:"719"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["Para sess\xf5es abertas por solicita\xe7\xf5es REST, consulte ",(0,t.jsx)(s.a,{href:"/docs/pt/20/REST/authUsers",children:"Usu\xe1rios e sess\xf5es"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"visionamento-de-sess\xf5es",children:"Visionamento de sess\xf5es"}),"\n",(0,t.jsx)(s.p,{children:"Os processos que gerenciam sess\xf5es para acesso ao armazenamento de dados s\xe3o mostrados na janela de administra\xe7\xe3o do 4D Server:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:'nome: "REST Handler: <process name>"'}),"\n",(0,t.jsx)(s.li,{children:"type: type Worker Server HTTP"}),"\n",(0,t.jsx)(s.li,{children:"session: session name is the user name passed to the Open datastore command."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"No exemplo a seguir, dois processos est\xe3o sendo executados na mesma sess\xe3o:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:o(772156).Z+"",width:"1402",height:"708"})}),"\n",(0,t.jsx)(s.h3,{id:"bloqueio-e-transac\xe7\xf5es",children:"Bloqueio e transac\xe7\xf5es"}),"\n",(0,t.jsx)(s.p,{children:"Os recursos do ORDA relacionados ao bloqueio de entidades e \xe0 transa\xe7\xe3o s\xe3o gerenciados no n\xedvel do processo em reposit\xf3rios de dados remotos, assim como no modo cliente/servidor do ORDA:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Se um processo bloqueia uma entidade de um reposit\xf3rio de dados remoto, a entidade \xe9 bloqueada para todos os outros processos, mesmo quando esses processos compartilham a mesma sess\xe3o (consulte ",(0,t.jsx)(s.a,{href:"/docs/pt/20/ORDA/entities#entity-locking",children:"Bloqueio de entidades"}),"). Se v\xe1rias entidades que apontam para um mesmo registro tiverem sido bloqueadas em um processo, todas elas dever\xe3o ser desbloqueadas no processo para remover o bloqueio. Se um bloqueio tiver sido colocado em uma entidade, o bloqueio ser\xe1 removido quando n\xe3o houver mais refer\xeancia a essa entidade na mem\xf3ria."]}),"\n",(0,t.jsxs)(s.li,{children:["As transa\xe7\xf5es podem ser iniciadas, validadas ou canceladas separadamente em cada datastore remoto usando as fun\xe7\xf5es ",(0,t.jsx)(s.code,{children:"dataStore.startTransaction()"}),", ",(0,t.jsx)(s.code,{children:"dataStore.cancelTransaction()"}),"e ",(0,t.jsx)(s.code,{children:"dataStore.validateTransaction()"})," . N\xe3o t\xeam impacto noutros datastores."]}),"\n",(0,t.jsxs)(s.li,{children:["Os comandos cl\xe1ssicos da linguagem 4D (",(0,t.jsx)(s.code,{children:"START TRANSACTION"}),", ",(0,t.jsx)(s.code,{children:"VALIDATE TRANSACTION"}),", ",(0,t.jsx)(s.code,{children:"CANCEL TRANSACTION"}),") s\xf3 se aplicam ao datastore principal (retornado por ",(0,t.jsx)(s.code,{children:"ds"}),"). Se uma entidade de um datastore remoto \xe9 segurada por uma transa\xe7\xe3o em um processo, outros processos n\xe3o podem atualiz\xe1-lo, mesmo que esses processos compartilhem a mesma sess\xe3o."]}),"\n",(0,t.jsxs)(s.li,{children:["Os bloqueios nas entidades s\xe3o removidos e as transa\xe7\xf5es s\xe3o anuladas:\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"quando o processo \xe9 eliminado."}),"\n",(0,t.jsx)(s.li,{children:"quando a sess\xe3o \xe9 encerrada no servidor"}),"\n",(0,t.jsx)(s.li,{children:"quando a sess\xe3o \xe9 encerrada na janela de administra\xe7\xe3o do servidor."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"fechamento-das-sess\xf5es",children:"Fechamento das sess\xf5es"}),"\n",(0,t.jsxs)(s.p,{children:["Uma sess\xe3o \xe9 automaticamente encerrada por 4D quando n\xe3o h\xe1 atividade durante seu per\xedodo de tempo limite. O tempo limite padr\xe3o \xe9 de 60 minutos, mas esse valor pode ser modificado usando o par\xe2metro ",(0,t.jsx)(s.em,{children:"connectionInfo"})," do comando ",(0,t.jsx)(s.code,{children:"Open datastore"})," ."]}),"\n",(0,t.jsx)(s.p,{children:"Se uma solicita\xe7\xe3o for enviada ao reposit\xf3rio de dados remoto depois que a sess\xe3o tiver sido fechada, ela ser\xe1 recriada automaticamente, se poss\xedvel (licen\xe7a dispon\xedvel, servidor n\xe3o parado...). No entanto, lembre-se de que o contexto da sess\xe3o em rela\xe7\xe3o a bloqueios e transa\xe7\xf5es \xe9 perdido (veja acima)."}),"\n",(0,t.jsx)(s.h2,{id:"otimiza\xe7\xe3o-clienteservidor",children:"Otimiza\xe7\xe3o cliente/servidor"}),"\n",(0,t.jsxs)(s.p,{children:["4D oferece otimiza\xe7\xf5es para solicita\xe7\xf5es ORDA que usam sele\xe7\xf5es de entidades ou carregam entidades em configura\xe7\xf5es de cliente/servidor (datastore acessado remotamente por meio de ",(0,t.jsx)(s.code,{children:"ds"})," ou via ",(0,t.jsx)(s.code,{children:"Open datastore"}),"). Essas otimiza\xe7\xf5es aceleram a execu\xe7\xe3o de seu aplicativo 4D ao reduzir drasticamente o volume de informa\xe7\xf5es transmitidas pela rede. Estes incluem:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["o ",(0,t.jsx)(s.strong,{children:"contexto de otimiza\xe7\xe3o"})]}),"\n",(0,t.jsxs)(s.li,{children:["a ",(0,t.jsx)(s.strong,{children:"cache ORDA"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"contexto",children:"Contexto"}),"\n",(0,t.jsx)(s.p,{children:"O contexto de otimiza\xe7\xe3o \xe9 baseado nas seguintes implementa\xe7\xf5es:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:'Quando um cliente solicita uma sele\xe7\xe3o de entidade do servidor, 4D "aprende" automaticamente quais atributos da sele\xe7\xe3o de entidade s\xe3o realmente usados no lado do cliente durante a execu\xe7\xe3o do c\xf3digo e constr\xf3i um "contexto de otimiza\xe7\xe3o" correspondente. Esse contexto \xe9 anexado \xe0 sele\xe7\xe3o da entidade e armazena os atributos usados. Ser\xe1 atualizado dinamicamente se outros atributos forem usados depois. Os seguintes m\xe9todos e fun\xe7\xf5es accionam a fase de aprendizagem:'}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#create-entity-selection",children:(0,t.jsx)(s.code,{children:"Criar uma sele\xe7\xe3o de entidades (entity selection)"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#fromcollection",children:(0,t.jsx)(s.code,{children:"dataClass.fromCollection()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#all",children:(0,t.jsx)(s.code,{children:"dataClass.all()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#get",children:(0,t.jsx)(s.code,{children:"dataClass.get()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#query",children:(0,t.jsx)(s.code,{children:"dataClass.query()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#query",children:(0,t.jsx)(s.code,{children:"entitySelection.query()"})})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["As solicita\xe7\xf5es subsequentes enviadas ao servidor sobre a mesma sele\xe7\xe3o de entidade reutilizam automaticamente o contexto de otimiza\xe7\xe3o e obt\xeam apenas os atributos necess\xe1rios do servidor, o que acelera o processamento. Por exemplo, em uma caixa de listagem baseada em sele\xe7\xe3o de entidade ",(0,t.jsx)(s.a,{href:"#entity-selection-based-list-box"}),", a fase de aprendizado ocorre durante a exibi\xe7\xe3o da primeira linha. a visualiza\xe7\xe3o das linhas seguintes \xe9 optimizada. As fun\xe7\xf5es a seguir associam automaticamente o contexto de otimiza\xe7\xe3o da sele\xe7\xe3o da entidade de origem \xe0 sele\xe7\xe3o da entidade retornada:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#and",children:(0,t.jsx)(s.code,{children:"entitySelection.and()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#minus",children:(0,t.jsx)(s.code,{children:"entitySelection.minus()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#or",children:(0,t.jsx)(s.code,{children:"entitySelection.or()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#orderBy",children:(0,t.jsx)(s.code,{children:"entitySelection.orderBy()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#slice",children:(0,t.jsx)(s.code,{children:"entitySelection.slice()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#drop",children:(0,t.jsx)(s.code,{children:"entitySelection.drop()"})})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Um contexto de otimiza\xe7\xe3o existente pode ser passado como uma propriedade para outra sele\xe7\xe3o de entidade da mesma classe de dados, ignorando assim a fase de aprendizado e acelerando o aplicativo (consulte ",(0,t.jsx)(s.a,{href:"#reusing-the-context-property",children:"Usando a propriedade de contexto"})," abaixo)."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Voc\xea pode criar contextos de otimiza\xe7\xe3o manualmente usando a fun\xe7\xe3o ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataStoreClass#setremotecontextinfo",children:(0,t.jsx)(s.code,{children:"dataStore.setRemoteContextInfo()"})})," (consulte ",(0,t.jsx)(s.a,{href:"#preconfiguring-contexts",children:"Preconfiguring contexts"}),")."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:o(915852).Z+"",width:"3439",height:"2018"})}),"\n",(0,t.jsx)(s.admonition,{title:"Nota de compatibilidade",type:"warning",children:(0,t.jsxs)(s.p,{children:["Os contextos tratados em conex\xf5es estabelecidas por meio do ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataStoreClass#open-datastore",children:(0,t.jsx)(s.code,{children:"Open datastore"})})," s\xf3 podem ser usados entre vers\xf5es principais semelhantes de 4D. Por exemplo, um aplicativo remoto 4D v20.x s\xf3 pode usar contextos de um datastore 4D Server v20.x."]})}),"\n",(0,t.jsx)(s.h4,{id:"exemplo",children:"Exemplo"}),"\n",(0,t.jsx)(s.p,{children:"Dado o seguinte c\xf3digo:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:' $sel:=$ds. Employee.query("firstname = ab@")\n For each($e;$sel)\n    $s:=$e.firstname+" "+$e.lastname+" works for "+$e.employer.name // $e.employer refers to Company table\n End for each\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Gra\xe7as \xe0 otimiza\xe7\xe3o, essa solicita\xe7\xe3o s\xf3 obter\xe1 dados dos atributos usados (firstname, lastname, employer, employer.name) em ",(0,t.jsx)(s.em,{children:"$sel"})," a partir da segunda itera\xe7\xe3o do loop."]}),"\n",(0,t.jsx)(s.h4,{id:"reutilizar-a-propriedade-context",children:"Reutilizar a propriedade context"}),"\n",(0,t.jsxs)(s.p,{children:["Voc\xea pode aumentar os benef\xedcios da otimiza\xe7\xe3o usando a propriedade ",(0,t.jsx)(s.strong,{children:"context"}),' . Essa propriedade faz refer\xeancia a um contexto de otimiza\xe7\xe3o "aprendido" para uma sele\xe7\xe3o de entidade. Ele pode ser passado como par\xe2metro para fun\xe7\xf5es ORDA que retornam novas sele\xe7\xf5es de entidades, de modo que as sele\xe7\xf5es de entidades solicitem diretamente os atributos usados ao servidor e ignorem a fase de aprendizado.']}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["Voc\xea tamb\xe9m pode criar contextos usando a fun\xe7\xe3o ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataStoreClass#setremotecontextinfo",children:(0,t.jsx)(s.code,{children:".setRemoteContextInfo()"})}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["A mesma propriedade de contexto de otimiza\xe7\xe3o pode ser passada para um n\xfamero ilimitado de sele\xe7\xf5es de entidades na mesma classe de dados. Todas as fun\xe7\xf5es ORDA que lidam com sele\xe7\xf5es de entidades suportam a propriedade ",(0,t.jsx)(s.strong,{children:"context"})," (por exemplo, ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#query",children:(0,t.jsx)(s.code,{children:"dataClass.query()"})})," ou ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#all",children:(0,t.jsx)(s.code,{children:"dataClass.all()"})}),"). No entanto, lembre-se de que um contexto \xe9 atualizado automaticamente quando novos atributos s\xe3o usados em outras partes do c\xf3digo. A reutiliza\xe7\xe3o do mesmo contexto em c\xf3digos diferentes pode resultar em sobrecarga do contexto e, portanto, reduzir sua efici\xeancia."]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["Um mecanismo semelhante \xe9 implementado para entidades que s\xe3o carregadas, de modo que somente os atributos usados s\xe3o solicitados (consulte a fun\xe7\xe3o ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#get",children:(0,t.jsx)(s.code,{children:"dataClass.get()"})}),")."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Exemplo com ",(0,t.jsx)(s.code,{children:"dataClass.query()"}),":"]})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:' var $sel1; $sel2; $sel3; $sel4; $querysettings; $querysettings2 : Object\n var $data : Collection\n $querysettings:=New object("context";"shortList")\n $querysettings2:=New object("context";"longList")\n\n $sel1:=ds. Employee.query("lastname = S@";$querysettings)\n $data:=extractData($sel1) // In extractData method an optimization is triggered   \n // and associated to context "shortList"\n\n $sel2:=ds. Employee.query("lastname = Sm@";$querysettings)\n $data:=extractData($sel2) // In extractData method the optimization associated   \n // to context "shortList" is applied\n\n $sel3:=ds. Employee.query("lastname = Smith";$querysettings2)\n $data:=extractDetailedData($sel3) // In extractDetailedData method an optimization  \n // is triggered and associated to context "longList"\n\n $sel4:=ds. Employee.query("lastname = Brown";$querysettings2)\n $data:=extractDetailedData($sel4) // In extractDetailedData method the optimization  \n // associated to context "longList" is applied\n'})}),"\n",(0,t.jsx)(s.h4,{id:"list-box-baseado-em-uma-sele\xe7\xe3o-de-entidades",children:"List box baseado em uma sele\xe7\xe3o de entidades"}),"\n",(0,t.jsx)(s.p,{children:"A otimiza\xe7\xe3o da sele\xe7\xe3o de entidades \xe9 aplicada automaticamente a caixas de listagem baseadas em sele\xe7\xe3o de entidades em configura\xe7\xf5es de cliente/servidor, ao exibir e rolar o conte\xfado de uma caixa de listagem: somente os atributos exibidos na caixa de listagem s\xe3o solicitados ao servidor."}),"\n",(0,t.jsxs)(s.p,{children:['Um contexto "modo de p\xe1gina" espec\xedfico tamb\xe9m \xe9 fornecido ao carregar a entidade atual atrav\xe9s do item ',(0,t.jsx)(s.strong,{children:"Atual"})," express\xe3o de propriedade da caixa de lista (consulte ",(0,t.jsx)(s.a,{href:"/docs/pt/20/FormObjects/listboxOverview#list-box-types",children:"cole\xe7\xe3o ou caixas de lista de tipos de sele\xe7\xe3o de entidade"}),'). Esse recurso permite que voc\xea n\xe3o sobrecarregue o contexto inicial da caixa de lista neste caso, especialmente se a "p\xe1gina" solicitar atributos adicionais. Observe que somente o uso da express\xe3o ',(0,t.jsx)(s.strong,{children:"Current item"})," criar\xe1/usar\xe1 o contexto da p\xe1gina (o acesso por meio de ",(0,t.jsx)(s.code,{children:"entitySelection\\[index]"})," alterar\xe1 o contexto de sele\xe7\xe3o da entidade)."]}),"\n",(0,t.jsx)(s.p,{children:"As solicita\xe7\xf5es subsequentes ao servidor enviadas pelas fun\xe7\xf5es de navega\xe7\xe3o da entidade tamb\xe9m dar\xe3o suporte a essa otimiza\xe7\xe3o. As fun\xe7\xf5es a seguir associam automaticamente o contexto de otimiza\xe7\xe3o da entidade de origem \xe0 entidade retornada:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntityClass#next",children:(0,t.jsx)(s.code,{children:"entity.next()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntityClass#first",children:(0,t.jsx)(s.code,{children:"entity.first()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntityClass#last",children:(0,t.jsx)(s.code,{children:"entity.last()"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntityClass#previous",children:(0,t.jsx)(s.code,{children:"entity.previous()"})})}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Por exemplo, o c\xf3digo a seguir carrega a entidade selecionada e permite a navega\xe7\xe3o na sele\xe7\xe3o da entidade. As entidades s\xe3o carregadas em um contexto separado e o contexto inicial da caixa de listagem n\xe3o \xe9 alterado:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-4d",children:" $myEntity:=Form.currentElement //express\xe3o do item atual\n  //... fazer algo\n $myEntity:=$myEntity.next() //carrega a pr\xf3xima entidade usando o mesmo contexto\n"})}),"\n",(0,t.jsx)(s.h4,{id:"pr\xe9-configura\xe7\xe3o-de-contextos",children:"Pr\xe9-configura\xe7\xe3o de contextos"}),"\n",(0,t.jsx)(s.p,{children:"Um contexto de otimiza\xe7\xe3o deve ser definido para cada recurso ou algoritmo do seu aplicativo, a fim de obter os melhores desempenhos. Por exemplo, um contexto pode ser usado para consultas sobre clientes, outro contexto para consultas sobre produtos, etc."}),"\n",(0,t.jsx)(s.p,{children:"Se quiser fornecer aplicativos finais com o mais alto n\xedvel de otimiza\xe7\xe3o, voc\xea pode pr\xe9-configurar seus contextos e, assim, economizar fases de aprendizado, seguindo estas etapas:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Projete seus algoritmos."}),"\n",(0,t.jsx)(s.li,{children:"Execute seu aplicativo e deixe que o mecanismo de aprendizado autom\xe1tico preencha os contextos de otimiza\xe7\xe3o."}),"\n",(0,t.jsxs)(s.li,{children:["Chame a fun\xe7\xe3o ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataStoreClass#getremotecontextinfo",children:(0,t.jsx)(s.code,{children:"dataStore.getRemoteContextInfo()"})})," ou ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataStoreClass#getallremotecontexts",children:(0,t.jsx)(s.code,{children:"dataStore.getAllRemoteContexts()"})})," para coletar contextos. Voc\xea pode usar as fun\xe7\xf5es ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntitySelectionClass#getremotecontextattributes",children:(0,t.jsx)(s.code,{children:"entitySelection.getRemoteContextAttributes()"})})," e ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/EntityClass#getremotecontextattributes",children:(0,t.jsx)(s.code,{children:"entity.getRemoteContextAttributes()"})})," para analisar como seus algoritmos usam atributos."]}),"\n",(0,t.jsxs)(s.li,{children:["Na etapa final, chame ",(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataStoreClass#setremotecontextinfo",children:(0,t.jsx)(s.code,{children:"dataStore. etRemoteContextInfo()"})})," fun\xe7\xe3o para criar contextos na inicializa\xe7\xe3o do aplicativo e ",(0,t.jsx)(s.a,{href:"#reusing-the-context-property",children:"us\xe1-los"})," em seus algoritmos."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"cache-orda",children:"Cache ORDA"}),"\n",(0,t.jsx)(s.p,{children:"Por motivos de otimiza\xe7\xe3o, os dados solicitados do servidor por meio do ORDA s\xe3o carregados no cache remoto do ORDA (que \xe9 diferente do cache 4D). O cache do ORDA \xe9 organizado por classe de dados e expira ap\xf3s 30 segundos."}),"\n",(0,t.jsx)(s.p,{children:"Os dados contidos no cache s\xe3o considerados expirados quando o tempo limite \xe9 atingido. Qualquer acesso a dados expirados enviar\xe1 um pedido ao servidor. Os dados expirados permanecem na cache at\xe9 que seja necess\xe1rio espa\xe7o."}),"\n",(0,t.jsx)(s.p,{children:"Por padr\xe3o, o cache ORDA \xe9 tratado de forma transparente pelo 4D. No entanto, voc\xea pode controlar seu conte\xfado usando as seguintes fun\xe7\xf5es da classe ORDA:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#setremotecachesettings",children:"dataClass.setRemoteCacheSettings()"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#getremotecache",children:"dataClass.getRemoteCache()"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"/docs/pt/20/API/DataClassClass#clearremotecache",children:"dataClass.clearRemoteCache()"})}),"\n"]})]})}function m(e={}){let{wrapper:s}={...(0,n.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},915852:function(e,s,o){o.d(s,{Z:function(){return a}});let a=o.p+"assets/images/cs-optimization-process-0810df7e186eabd072bc04a037744fb1.png"},772156:function(e,s,o){o.d(s,{Z:function(){return a}});let a=o.p+"assets/images/sessionAdmin-fb7129cb6aaab939e9e8b20cb43bce8f.png"},651744:function(e,s,o){o.d(s,{Z:function(){return a}});let a=o.p+"assets/images/sessions-69775ca2d11bfdbc289284efe41c0b59.png"},250065:function(e,s,o){o.d(s,{Z:function(){return d},a:function(){return i}});var a=o(667294);let t={},n=a.createContext(t);function i(e){let s=a.useContext(n);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(n.Provider,{value:s},e.children)}}}]);