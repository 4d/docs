"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["33152"],{793483:function(e,o,r){r.r(o),r.d(o,{metadata:()=>d,contentTitle:()=>t,default:()=>m,assets:()=>i,toc:()=>c,frontMatter:()=>a});var d=JSON.parse('{"id":"Concepts/error-handling","title":"Gest\xe3o de erros","description":"O manejo de erros \xe9 o processo de antecipar e responder aos erros que possam ocorrer em sua aplica\xe7\xe3o. 4D oferece assist\xeancia completa \xe0 detec\xe7\xe3o e notifica\xe7\xe3o de erros no tempo de execu\xe7\xe3o, assim como a an\xe1lise de suas condi\xe7\xf5es.","source":"@site/i18n/pt/docusaurus-plugin-content-docs/version-18/Concepts/error-handling.md","sourceDirName":"Concepts","slug":"/Concepts/error-handling","permalink":"/docs/pt/18/Concepts/error-handling","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20Concepts%2Ferror-handling.md%20(18)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"18","frontMatter":{"id":"error-handling","title":"Gest\xe3o de erros"},"sidebar":"docs","previous":{"title":"Estruturas de loop","permalink":"/docs/pt/18/Concepts/looping"},"next":{"title":"Modos interpretado e compilado","permalink":"/docs/pt/18/Concepts/interpreted-compiled"}}'),n=r("785893"),s=r("250065");let a={id:"error-handling",title:"Gest\xe3o de erros"},t=void 0,i={},c=[{value:"Instala\xe7\xe3o de um m\xe9todo de gest\xe3o de erros",id:"instala\xe7\xe3o-de-um-m\xe9todo-de-gest\xe3o-de-erros",level:2},{value:"Alcance e componentes",id:"alcance-e-componentes",level:3},{value:"Manejo de erros dentro do m\xe9todo",id:"manejo-de-erros-dentro-do-m\xe9todo",level:3},{value:"Exemplo",id:"exemplo",level:4},{value:"Utilizar um m\xe9todo de gest\xe3o de erro vazio",id:"utilizar-um-m\xe9todo-de-gest\xe3o-de-erro-vazio",level:3}];function l(e){let o={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.p,{children:"O manejo de erros \xe9 o processo de antecipar e responder aos erros que possam ocorrer em sua aplica\xe7\xe3o. 4D oferece assist\xeancia completa \xe0 detec\xe7\xe3o e notifica\xe7\xe3o de erros no tempo de execu\xe7\xe3o, assim como a an\xe1lise de suas condi\xe7\xf5es."}),"\n",(0,n.jsx)(o.p,{children:"Manejo de erros responde \xe0 duas necessidades principais:"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"descobrir e consertar erros potenciais e bugs no c\xf3digo durante a fase de desenvolvimento,"}),"\n",(0,n.jsx)(o.li,{children:"detectar e recuperar de erros inesperados nas aplica\xe7\xf5es implementadas; em particular pode substituir di\xe1logos de erros de sistemas (disco cheio, arquivo faltando, etc) com sua pr\xf3pria interface."}),"\n"]}),"\n",(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsx)(o.p,{children:"\xc9 recomendado instalar um m\xe9todo de gerenciamento de erros em 4D Server, para todos os c\xf3digos rodando no servidor. Esse m\xe9todo evitaria a exibi\xe7\xe3o de caixas de di\xe1logo inesperadas no computador do servidor e poderia registrar os erros em um arquivo dedicado para an\xe1lises posteriores."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"instala\xe7\xe3o-de-um-m\xe9todo-de-gest\xe3o-de-erros",children:"Instala\xe7\xe3o de um m\xe9todo de gest\xe3o de erros"}),"\n",(0,n.jsxs)(o.p,{children:["Em 4D, todos os erros podem ser capturados e tratados em um m\xe9todo de projeto espec\xedfico, o m\xe9todo ",(0,n.jsx)(o.strong,{children:"de tratamento de erros"})," (ou ",(0,n.jsx)(o.strong,{children:"captura de erros"}),")."]}),"\n",(0,n.jsxs)(o.p,{children:["Esse m\xe9todo de projeto \xe9 instalado para o processo atual e ser\xe1 chamado automaticamente para qualquer erro que ocorra no processo, no modo interpretado ou compilado. Para ",(0,n.jsx)(o.em,{children:"instalar"})," esse m\xe9todo projeto, voc\xea s\xf3 precisa chamar o comando ",(0,n.jsx)(o.code,{children:"ON ERR CALL"})," com o nome do m\xe9todo projeto como par\xe2metro. Por exemplo:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-4d",children:'ON ERR CALL("IO_ERRORS") //Instala o m\xe9todo de tratamento de erros\n'})}),"\n",(0,n.jsxs)(o.p,{children:["Para parar de capturar erros e devolver a m\xe3o ao 4D, chame ",(0,n.jsx)(o.code,{children:"ON ERR CALL"})," com uma string vazia:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-4d",children:'ON ERR CALL("") //devolve o controlo a 4D\n'})}),"\n",(0,n.jsx)(o.h3,{id:"alcance-e-componentes",children:"Alcance e componentes"}),"\n",(0,n.jsx)(o.p,{children:"Pode definir um \xfanico m\xe9todo de captura de erros para toda a aplica\xe7\xe3o ou diferentes m\xe9todos por m\xf3dulo de aplica\xe7\xe3o. No entanto, somente um m\xe9todo pode ser instalado por processo."}),"\n",(0,n.jsxs)(o.p,{children:["Um m\xe9todo de tratamento de erros instalado pelo comando ",(0,n.jsx)(o.code,{children:"ON ERR CALL"})," s\xf3 se aplica ao banco de dados em execu\xe7\xe3o. No caso de um erro gerado por um ",(0,n.jsx)(o.strong,{children:"componente"}),", o m\xe9todo de tratamento de erros ",(0,n.jsx)(o.code,{children:"ON ERR CALL"})," do banco de dados host n\xe3o \xe9 chamado, e vice-versa."]}),"\n",(0,n.jsxs)(o.p,{children:["O comando ",(0,n.jsx)(o.code,{children:"Method called on error"})," permite saber o nome do m\xe9todo instalado por ",(0,n.jsx)(o.code,{children:"ON ERR CALL"})," para o processo atual. \xc9 particularmente \xfatil no contexto de componentes, pois permite que voc\xea altere temporariamente e depois restaure o m\xe9todo de captura de erros do banco de dados host:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-4d",children:' $methCurrent:=Method called on error\n ON ERR CALL("NewMethod")\n  //Se o documento n\xe3o pouder ser aberto, um erro \xe9 gerado\n $ref:=Open document("MyDocument")\n  //Reinstala\xe7\xe3o do m\xe9todo anterior\n ON ERR CALL($methCurrent)\n\n'})}),"\n",(0,n.jsx)(o.h3,{id:"manejo-de-erros-dentro-do-m\xe9todo",children:"Manejo de erros dentro do m\xe9todo"}),"\n",(0,n.jsx)(o.p,{children:"No m\xe9todo de erro personalizado, voc\xea tem acesso a v\xe1rias informa\xe7\xf5es que ajudar\xe3o voc\xea a identificar o erro:"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsxs)(o.p,{children:["4D mant\xe9m automaticamente uma s\xe9rie de vari\xe1veis chamadas ",(0,n.jsx)(o.strong,{children:"vari\xe1veis sistema"}),", respondendo a diferentes necessidades (veja o manual ",(0,n.jsx)(o.em,{children:"Linguagem 4D"}),"):"]}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"Error"})," (inteiro longo): c\xf3digo de erro"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"Error method"}),"(texto): nome do m\xe9todo que provocou o erro"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"Error line"})," (entero largo): n\xfamero de l\xednea do m\xe9todo que provocou o erro"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"Error formula"})," (text): f\xf3rmula do c\xf3digo 4D (texto bruto) que est\xe1 na origem do erro."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsxs)(o.p,{children:["o comando ",(0,n.jsx)(o.code,{children:"GET LAST ERROR STACK"})," que retorna informa\xe7\xf5es sobre a pilha de erros atual da aplica\xe7\xe3o 4D."]}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsxs)(o.p,{children:["o comando ",(0,n.jsx)(o.code,{children:"Get call chain"})," que devolve uma cole\xe7\xe3o de objetos que descrevem cada passo da string de chamadas a m\xe9todos dentro do processo atual."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(o.h4,{id:"exemplo",children:"Exemplo"}),"\n",(0,n.jsx)(o.p,{children:"Aqui est\xe1 um sistema de gest\xe3o de erros simples:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-4d",children:'//instalar o m\xe9todo de gest\xe3o de erros\n ON ERR CALL("errorMethod")\n //... executar o c\xf3digo\n ON ERR CALL("") //retorna o controle para 4D\n'})}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-4d",children:'// m\xe9todo projeto errorMethod\n If(Error#1006) //essa n\xe3o \xe9 uma interrup\xe7\xe3o do usu\xe1rio\n    ALERT("Um erro foi produzido "+String(Error)+". O c\xf3digo em quest\xe3o \xe9: \\""+Error formula+"\\"")\n End if\n'})}),"\n",(0,n.jsx)(o.h3,{id:"utilizar-um-m\xe9todo-de-gest\xe3o-de-erro-vazio",children:"Utilizar um m\xe9todo de gest\xe3o de erro vazio"}),"\n",(0,n.jsxs)(o.p,{children:["Se quiser que a caixa de di\xe1logo fique escondida, pode instalar um m\xe9todo de gest\xe3o de erros vazio. A vari\xe1vel sistema ",(0,n.jsx)(o.code,{children:"Error"})," pode ser provada em qualquer m\xe9todo, ou seja, fora do m\xe9todo de gest\xe3o de erros:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-4d",children:'ON ERR CALL("emptyMethod") //emptyMethod exists but is empty\n$doc:=Open document( "myFile.txt")\nIf (Error=-43)\n    ALERT("File not found.")\nEnd if\nON ERR CALL("")\n'})})]})}function m(e={}){let{wrapper:o}={...(0,s.a)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},250065:function(e,o,r){r.d(o,{Z:function(){return t},a:function(){return a}});var d=r(667294);let n={},s=d.createContext(n);function a(e){let o=d.useContext(s);return d.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),d.createElement(s.Provider,{value:o},e.children)}}}]);