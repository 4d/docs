<!DOCTYPE html><html lang="pt"><head><meta name="docsearch:version" content="19 BETA"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Entity · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="An [entity](/docs/pt/ORDA/dsmapping.html#entity) is an instance of a [Dataclass](/docs/pt/ORDA/dsmapping.html#dataclass), like a record of the table matching the dataclass in its associated datastore. It contains the same attributes as the dataclass as well as the data values and specific properties and functions."/><meta name="docsearch:language" content="pt"/><meta property="og:title" content="Entity · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/index.html"/><meta property="og:description" content="An [entity](/docs/pt/ORDA/dsmapping.html#entity) is an instance of a [Dataclass](/docs/pt/ORDA/dsmapping.html#dataclass), like a record of the table matching the dataclass in its associated datastore. It contains the same attributes as the dataclass as well as the data values and specific properties and functions."/><meta property="og:image" content="https://4d.github.io/docs/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/img/logohome.png"/><link rel="shortcut icon" href="/docs/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-blocks-buttons.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/pt"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs" target="_self">v19 BETA</a></li><li class=""><a href="https://developer.4d.com/docs/Rx" target="_self">v18 R6</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/img/language.svg" alt="Languages icon"/>Português</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/API/EntityClass.html">English</a></li><li><a href="/docs/ja/API/EntityClass.html">日本語</a></li><li><a href="/docs/de/API/EntityClass.html">Deutsch</a></li><li><a href="/docs/es/API/EntityClass.html">Español</a></li><li><a href="/docs/fr/API/EntityClass.html">Français</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Class API Reference</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/GettingStarted/installation.html">Installation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Project Management<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Project/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Project/creating.html">Working with a project</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Project/architecture.html">Architecture of a project</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Project/documentation.html">Documenting a project</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Project/compiler.html">Compilation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">4D Language Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/about.html">About the 4D Language</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/quick-tour.html">A Quick Tour</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/data-types.html">Data types overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/boolean.html">Boolean</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/collection.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/date.html">Date</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/null-undefined.html">Null and Undefined</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/number.html">Number (Real, Longint, Integer)</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/object.html">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/picture.html">Picture</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/pointer.html">Pointer</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/string.html">String</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/time.html">Time</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/variables.html">Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/arrays.html">Arrays</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/methods.html">Methods</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/parameters.html">Parameters</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/shared.html">Shared objects and collections</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/classes.html">Classes</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/control-flow.html">Control flow overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/branching.html">Branching structures</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/looping.html">Looping structures</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/pt/Tags/tags.html">Transformation tags</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/error-handling.html">Error handling</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/interpreted-compiled.html">Interpreted and Compiled modes</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/components.html">Components</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/identifiers.html">Identifiers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/overview.html">What is ORDA?</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/dsmapping.html">Data Model Objects</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/ordaClasses.html">Data Model Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/entities.html">Working with data</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/datastores.html">Using a remote datastore</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/glossary.html">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Class API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/API/overview.html">Class API Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/ClassClass.html">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/CollectionClass.html">Collection</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/CryptoKeyClass.html">CryptoKey</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/DataClassClass.html">DataClass</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/DataClassAttributeClass.html">DataClassAttribute</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/DataStoreClass.html">DataStore</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/EmailObjectClass.html">Email</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/pt/API/EntityClass.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/EntitySelectionClass.html">EntitySelection</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/FileClass.html">File</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/FolderClass.html">Folder</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/FunctionClass.html">Formula</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/IMAPTransporterClass.html">IMAPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/MailAttachmentClass.html">MailAttachment</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/POP3TransporterClass.html">POP3Transporter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/SessionClass.html">Session</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/SignalClass.html">Signal</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/SMTPTransporterClass.html">SMTPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/WebServerClass.html">WebServer</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/ZipArchiveClass.html">ZIPArchive</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/ZipFileClass.html">ZIPFile</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/ZipFolderClass.html">ZIPFolder</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Access Rights<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Users/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Users/editing.html">Managing 4D users and groups</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Preferences<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/general.html">General Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/structure.html">Structure Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/forms.html">Forms Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/methods.html">Methods Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/shortcuts.html">Shortcuts Page</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Administration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Admin/webAdmin.html">Web Administration</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Admin/dataExplorer.html">Web Data Explorer</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Admin/licenses.html">Managing 4D Licenses</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Admin/tls.html">TLS Protocol (HTTPS)</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Admin/debugLogFiles.html">Description of log files</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Admin/cli.html">Command Line Interface</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">MSC<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/information.html">Information Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/analysis.html">Activity analysis Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/verify.html">Verify Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/backup.html">Backup Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/compact.html">Compact Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/rollback.html">Rollback Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/restore.html">Restore Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/repair.html">Repair Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/MSC/encrypt.html">Encrypt Page</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Backup and Restore<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Backup/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Backup/backup.html">Backup</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Backup/settings.html">Backup Settings</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Backup/log.html">Log file (.journal)</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Backup/restore.html">Restore</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Web Server<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/webServer.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/webServerConfig.html">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/webServerAdmin.html">Administration</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/webServerObject.html">Web Server object</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Web Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/gettingStarted.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/templates.html">Template pages</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/httpRequests.html">Processing HTTP requests</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/allowProject.html">Allowing project methods</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/errorPages.html">Custom HTTP Error Pages</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/authentication.html">Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/sessions.html">User sessions</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/WebServer/preemptiveWeb.html">Using preemptive web processes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">REST Server<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/pt/REST/gettingStarted.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/configuration.html">Server Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/authUsers.html">Users and sessions</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/genInfo.html">Getting Server Information</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/manData.html">Manipulating Data</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/classFunctions.html">Calling ORDA class functions</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/REST_requests.html">About REST Requests</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (general)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/pt/REST/catalog.html">$catalog</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/directory.html">$directory</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/info.html">$info</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/upload.html">$upload</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (dataClass)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/pt/REST/{dataClass}.html">{dataClass}</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/asArray.html">$asArray</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/atomic_$atonce.html">$atomic/$atonce</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/attributes.html">$attributes</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/binary.html">$binary</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/compute.html">$compute</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/distinct.html">$distinct</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/entityset.html">$entityset</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/expand.html">$expand</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/filter.html">$filter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/imageformat.html">$imageformat</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/method.html">$method</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/orderby.html">$orderby</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/querypath.html">$querypath</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/queryplan.html">$queryplan</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/savedfilter.html">$savedfilter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/savedorderby.html">$savedorderby</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/skip.html">$skip</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/timeout.html">$timeout</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/top_$limit.html">$top/$limit</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/REST/version.html">$version</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Client/Server<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Desktop/clientServer.html">Client/Server Management</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Forms<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/forms.html">About 4D Forms</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/formEditor.html">Form Editor</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/macros.html">Form Editor Macros</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/objectLibrary.html">Object libraries</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/stylesheets.html">Style sheets</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/pictures.html">Pictures</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Form Properties<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/jsonReference.html">JSON property list</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/action.html">Action</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/propertiesForm.html">Form Properties</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/formSize.html">Form Size</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/markers.html">Markers</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/menu.html">Menu</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/print.html">Print</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormEditor/windowSize.html">Window Size</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Form Objects<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/formObjectsOverview.html">About 4D Form Objects</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/buttonOverview.html">Button</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/buttonGridOverview.html">Button Grid</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/checkboxOverview.html">Check Box</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/comboBoxOverview.html">Combo Box</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/dropdownListOverview.html">Drop-down List</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/groupBox.html">Group Box</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/inputOverview.html">Input</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/listOverview.html">Hierarchical List</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/listboxOverview.html">List Box</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/pictureButtonOverview.html">Picture Button</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/picturePopupMenuOverview.html">Picture Pop-up Menu</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/pluginAreaOverview.html">Plug-in Area</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/progressIndicator.html">Progress Indicator</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/radiobuttonOverview.html">Radio Button</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/ruler.html">Ruler</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/shapesOverview.html">Shapes</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/spinner.html">Spinner</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/splitters.html">Splitter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/staticPicture.html">Static picture</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/stepper.html">Stepper</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/subformOverview.html">Subform</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/tabControl.html">Tab Controls</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/text.html">Text</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/webAreaOverview.html">Web Area</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/viewProAreaOverview.html">4D View Pro area</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/writeProAreaOverview.html">4D Write Pro area</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Form Object Properties<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesReference.html">JSON property list</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesAction.html">Action</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesAnimation.html">Animation</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesAppearance.html">Appearance</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesBackgroundAndBorder.html">Background and Border</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesCoordinatesAndSizing.html">Coordinates &amp; Sizing</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesCrop.html">Crop</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesDataSource.html">Data Source</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesDisplay.html">Display</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesEntry.html">Entry</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesFooters.html">Footers</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesGridlines.html">Gridlines</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesHeaders.html">Headers</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesHelp.html">Help</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesHierarchy.html">Hierarchy</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesListBox.html">List Box</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesObject.html">Objects</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesPicture.html">Picture</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesPlugIns.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesPrint.html">Print</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesRangeOfValues.html">Range of Values</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesResizingOptions.html">Resizing Options</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesScale.html">Scale</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesSubform.html">Subform</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesText.html">Text</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesTextAndPicture.html">Text and Picture</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/FormObjects/propertiesWebArea.html">Web Area</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Form Events<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Events/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onActivate.html">On Activate</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onAfterEdit.html">On After Edit</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onAfterKeystroke.html">On After Keystroke</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onAfterSort.html">On After Sort</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onAlternativeClick.html">On Alternative Click</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onBeforeDataEntry.html">On Before Data Entry</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onBeforeKeystroke.html">On Before Keystroke</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onBeginDragOver.html">On Begin Drag Over</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onBeginUrlLoading.html">On Begin URL Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onBoundVariableChange.html">On Bound Variable Change</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onClicked.html">On Clicked</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onCloseBox.html">On Close Box</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onCloseDetail.html">On Close Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onCollapse.html">On Collapse</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onColumnMoved.html">On Column Moved</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onColumnResize.html">On Column Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onDataChange.html">On Data Change</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onDeactivate.html">On Deactivate</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onDeleteAction.html">On Delete Action</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onDisplayDetail.html">On Display Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onDoubleClicked.html">On Double Clicked</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onDragOver.html">On Drag Over</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onDrop.html">On Drop</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onEndUrlLoading.html">On End URL Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onExpand.html">On Expand</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onFooterClick.html">On Footer Click</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onGettingFocus.html">On Getting focus</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onHeader.html">On Header</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onHeaderClick.html">On Header Click</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onLoad.html">On Load</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onLoadRecord.html">On Load Record</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onLongClick.html">On Long Click</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onLosingFocus.html">On Losing focus</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onMenuSelected.html">On Menu Selected</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onMouseEnter.html">On Mouse Enter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onMouseLeave.html">On Mouse Leave</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onMouseMove.html">On Mouse Move</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onMouseUp.html">On Mouse Up</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onOpenDetail.html">On Open Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onOpenExternalLink.html">On Open External Link</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onOutsideCall.html">On Outside Call</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onPageChange.html">On Page Change</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onPlugInArea.html">On Plug in Area</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onPrintingBreak.html">On Printing Break</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onPrintingDetail.html">On Printing Detail</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onPrintingFooter.html">On Printing Footer</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onResize.html">On Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onRowMoved.html">On Row Moved</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onRowResize.html">On Row Resize</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onScroll.html">On Scroll</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onSelectionChange.html">On Selection Change</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onTimer.html">On Timer</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onUnload.html">On Unload</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onUrlFiltering.html">On URL Filtering</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onUrlLoadingError.html">On URL Loading Error</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onUrlResourceLoading.html">On URL Resource Loading</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onValidate.html">On Validate</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onVpRangeChanged.html">On VP Range Changed</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onVpReady.html">On VP Ready</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Events/onWindowOpeningDenied.html">On Window Opening Denied</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Menus<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Menus/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Menus/creating.html">Creating menus and menu bars</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Menus/properties.html">Menu item properties</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Menus/bars.html">Menu bar features</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Menus/sdi.html">SDI mode on Windows</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Build application<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Desktop/building.html">Building a project package</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/master/docs/API/EntityClass.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Entity</h1></header><article><div><span><p>An <a href="/docs/pt/ORDA/dsmapping.html#entity">entity</a> is an instance of a <a href="/docs/pt/ORDA/dsmapping.html#dataclass">Dataclass</a>, like a record of the table matching the dataclass in its associated datastore. It contains the same attributes as the dataclass as well as the data values and specific properties and functions.</p>
<h3><a class="anchor" aria-hidden="true" id="summary"></a><a href="#summary" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summary</h3>
<table>
<thead>
<tr><th></th></tr>
</thead>
<tbody>
<tr><td><a href="#attributename"><strong><em>.attributeName</em></strong> : any</a><p>    stores the attribute value for the entity</td></tr>
<tr><td><a href="#clone"><strong>.clone()</strong> : 4D.Entity</a><p>    creates in memory a new entity referencing the same record as the original entity</td></tr>
<tr><td><a href="#diff"><strong>.diff</strong>( <em>entityToCompare</em> : 4D.Entity { ; <em>attributesToCompare</em> : Collection } ) : Collection</a><p>    compares the contents of two entities and returns their differences</td></tr>
<tr><td><a href="#drop"><strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</a><p>    deletes the data contained in the entity from the datastore</td></tr>
<tr><td><a href="#first"><strong>.first()</strong>: 4D.Entity</a><p>    returns a reference to the entity in first position of the entity selection which the entity belongs to</td></tr>
<tr><td><a href="#fromobject"><strong>.fromObject</strong>( <em>filler</em> : Object )</a><p>    fills an entity with the <em>filler</em> content</td></tr>
<tr><td><a href="#getdataclass"><strong>.getDataClass()</strong> : 4D.DataClass</a><p>    returns the dataclass of the entity</td></tr>
<tr><td><a href="#getkey"><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Text<br><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Integer</a><p>    returns the primary key value of the entity</td></tr>
<tr><td><a href="#getselection"><strong>.getSelection()</strong>: 4D.EntitySelection</a><p>    returns the entity selection which the entity belongs to</td></tr>
<tr><td><a href="#getstamp"><strong>.getStamp()</strong> : Integer</a><p>     returns the current value of the stamp of the entity</td></tr>
<tr><td><a href="#indexof"><strong>.indexOf</strong>( { <em>entitySelection</em> : 4D.EntitySelection } ) : Integer</a><p>    returns the position of the entity in an entity selection</td></tr>
<tr><td><a href="#isnew"><strong>.isNew()</strong> : Boolean</a><p>     returns True if the entity to which it is applied has just been created and has not yet been saved in the datastore</td></tr>
<tr><td><a href="#last"><strong>.last()</strong> : 4D.Entity</a><p>    returns a reference to the entity in last position of the entity selection which the entity belongs to</td></tr>
<tr><td><a href="#lock"><strong>.lock</strong>( { <em>mode</em> : Integer } ) : Object</a><p>    puts a pessimistic lock on the record referenced by the entity</td></tr>
<tr><td><a href="#next"><strong>.next()</strong> : 4D.Entity</a><p>    returns a reference to the next entity in the entity selection which the entity belongs to</td></tr>
<tr><td><a href="#previous"><strong>.previous()</strong>  : 4D.Entity</a><p>     returns a reference to the previous entity in the entity selection which the entity belongs to</td></tr>
<tr><td><a href="#reload"><strong>.reload()</strong> : Object</a><p>    reloads the content of the entity in memory</td></tr>
<tr><td><a href="#save"><strong>.save</strong>( { <em>mode</em> : Integer } ) : Object</a><p>    saves the changes made to the entity</td></tr>
<tr><td><a href="#toobject"><strong>.toObject</strong>() : Object<br><strong>.toObject</strong>( <em>filterString</em> : Text { ; <em>options</em> : Integer}  ) : Object<br><strong>.toObject</strong>( <em>filterCol</em> : Collection { ; <em>options</em> : Integer } ) : Object</a><p>    returns an object which has been built from the entity</td></tr>
<tr><td><a href="#touched"><strong>.touched()</strong> : Boolean</a><p>    tests whether or not an entity attribute has been modified since the entity was loaded into memory or saved</td></tr>
<tr><td><a href="#touchedattributes"><strong>.touchedAttributes()</strong> : Collection</a><p>    returns the names of the attributes that have been modified since the entity was loaded into memory</td></tr>
<tr><td><a href="#unlock"><strong>.unlock()</strong> : Object</a><p>    removes the pessimistic lock on the record matching the entity</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="attributename"></a><a href="#attributename" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.<em>attributeName</em></h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong><em>.attributeName</em></strong> : any</p>
<h4><a class="anchor" aria-hidden="true" id="description"></a><a href="#description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>Any dataclass attribute is available as a property of an entity, which stores the attribute value for the entity.</p>
<blockquote>
<p>Dataclass attributes can also be reached using the alternate syntax with [ ].</p>
</blockquote>
<p>The attribute value type depends on the attribute <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a> (relation or storage):</p>
<ul>
<li>If <em>attributeName</em> kind is <strong>storage</strong>: <code>.attributeName</code> returns a value of the same type as <em>attributeName</em>.</li>
<li>If <em>attributeName</em> kind is <strong>relatedEntity</strong>: <code>.attributeName</code> returns the related entity. Values of the related entity are directly available through cascading properties, for example &quot;myEntity.employer.employees[0].lastname&quot;.</li>
<li>If <em>attributeName</em> kind is <strong>relatedEntities</strong>: <code>.attributeName</code> returns a new entity selection of related entities. Duplications are removed (an unordered entity selection is returned).</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$myEntity </span>: cs.EmployeeEntity
 <span class="hljs-variable">$myEntity</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-comment">//Create a new entity</span>
 <span class="hljs-variable">$myEntity</span>.name:=<span class="hljs-string">"Dupont"</span> <span class="hljs-comment">// assign 'Dupont' to the 'name' attribute</span>
 <span class="hljs-variable">$myEntity</span>.firstname:=<span class="hljs-string">"John"</span> <span class="hljs-comment">//assign 'John' to the 'firstname' attribute</span>
 <span class="hljs-variable">$myEntity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//save the entity</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="clone"></a><a href="#clone" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.clone()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.clone()</strong> : 4D.Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>New entity referencing the record</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-1"></a><a href="#description-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.clone()</code> function creates in memory a new entity referencing the same record as the original entity. This function allows you to update entities separately.</p>
<blockquote>
<p>Keep in mind that any modifications done to entities will be saved in the referenced record only when the <a href="#save"><code>.save( )</code></a> function is executed.</p>
</blockquote>
<p>This function can only be used with entities already saved in the database. It cannot be called on a newly created entity (for which <a href="#isnew"><code>.isNew()</code></a> returns <strong>True</strong>).</p>
<h4><a class="anchor" aria-hidden="true" id="example-1"></a><a href="#example-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp</span>; <span class="hljs-variable">$empCloned </span>: cs.EmployeeEntity
 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$empCloned</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">clone</span>()

 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">//Updates done on $emp are not done on $empCloned</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="diff"></a><a href="#diff" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.diff()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.diff</strong>( <em>entityToCompare</em> : 4D.Entity { ; <em>attributesToCompare</em> : Collection } ) : Collection</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>entityToCompare</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entity to be compared with the original entity</td></tr>
<tr><td>attributesToCompare</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Name of attributes to be compared</td></tr>
<tr><td>Result</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Differences between the entities</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-2"></a><a href="#description-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.diff()</code> function compares the contents of two entities and returns their differences.</p>
<p>In <em>entityToCompare</em>, pass the entity to be compared to the original entity.</p>
<p>In <em>attributesToCompare</em>, you can designate specific attributes to compare. If provided, the comparison is done only on the specified attributes. If not provided, all differences between the entities are returned.</p>
<p>The differences are returned as a collection of objects whose properties are:</p>
<table>
<thead>
<tr><th>Property name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>attributeName</td><td>String</td><td>Name of the attribute</td></tr>
<tr><td>value</td><td>any - Depends on attribute type</td><td>Value of the attribute in the entity</td></tr>
<tr><td>otherValue</td><td>any - Depends on attribute type</td><td>Value of the attribute in <em>entityToCompare</em></td></tr>
</tbody>
</table>
<p>Only attributes with different values are included in the collection. If no differences are found, <code>.diff()</code> returns an empty collection.</p>
<p>The function applies for properties whose <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a> is <strong>storage</strong> or <strong>relatedEntity</strong>. In case a related entity has been updated (meaning the foreign key), the name of the related entity and its primary key name are returned as <em>attributeName</em> properties (<em>value</em> and <em>otherValue</em> are empty for the related entity name).</p>
<p>If one of the compared entities is <strong>Null</strong>, an error is raised.</p>
<h4><a class="anchor" aria-hidden="true" id="example-1-1"></a><a href="#example-1-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$diff1</span>; <span class="hljs-variable">$diff2 </span>: Collection
 employee:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"ID=1001"</span>).<span class="hljs-function">first</span>()
 <span class="hljs-variable">$clone</span>:=employee.<span class="hljs-function">clone</span>()
 employee.firstName:=<span class="hljs-string">"MARIE"</span>
 employee.lastName:=<span class="hljs-string">"SOPHIE"</span>
 employee.salary:=<span class="hljs-number">500</span>
 <span class="hljs-variable">$diff1</span>:=<span class="hljs-variable">$clone</span>.<span class="hljs-function">diff</span>(employee) <span class="hljs-comment">// All differences are returned</span>
 <span class="hljs-variable">$diff2</span>:=<span class="hljs-variable">$clone</span>.<span class="hljs-function">diff</span>(employee;New collection<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"lastName"</span>))
  <span class="hljs-comment">// Only differences on firstName and lastName are returned</span>
</code></pre>
<p>$diff1:</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Natasha"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"MARIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Locke"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"SOPHIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"salary"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">66600</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">500</span>
    }
]
<span class="hljs-variable">$diff2</span>:

[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Natasha"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"MARIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Locke"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"SOPHIE"</span>
    }
]
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-2"></a><a href="#example-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> vCompareResult1; vCompareResult2; vCompareResult3; <span class="hljs-variable">$attributesToInspect </span>: Collection
 vCompareResult1:=New collection
 vCompareResult2:=New collection
 vCompareResult3:=New collection
 <span class="hljs-variable">$attributesToInspect</span>:=New collection

 <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">636</span>)
 <span class="hljs-variable">$e2</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">636</span>)

 <span class="hljs-variable">$e1</span>.firstName:=<span class="hljs-variable">$e1</span>.firstName+<span class="hljs-string">" update"</span>
 <span class="hljs-variable">$e1</span>.lastName:=<span class="hljs-variable">$e1</span>.lastName+<span class="hljs-string">" update"</span>

 <span class="hljs-variable">$c</span>:=ds.Company.<span class="hljs-function">get</span>(<span class="hljs-number">117</span>)
 <span class="hljs-variable">$e1</span>.employer:=<span class="hljs-variable">$c</span>
 <span class="hljs-variable">$e2</span>.salary:=<span class="hljs-number">100</span>

 <span class="hljs-variable">$attributesToInspect</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"firstName"</span>)
 <span class="hljs-variable">$attributesToInspect</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"lastName"</span>)

 vCompareResult1:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>)
 vCompareResult2:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>;<span class="hljs-variable">$attributesToInspect</span>)
 vCompareResult3:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>;<span class="hljs-variable">$e1</span>.<span class="hljs-function">touchedAttributes</span>())
</code></pre>
<p>vCompareResult1 (all differences are returned):</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"salary"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">33500</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">100</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employerID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">117</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">118</span>
    },
  {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employer"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"[object Entity]"</span>,<span class="hljs-comment">// Entity 117 from Company</span>
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"[object Entity]"</span><span class="hljs-comment">// Entity 118 from Company</span>
    }
]
</code></pre>
<p>vCompareResult2 (only differences on $attributesToInspect are returned)</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    }
]
</code></pre>
<p>vCompareResult3 (only differences on $e1 touched attributes are returned)</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employerID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">117</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">118</span>
    },
     {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employer"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"[object Entity]"</span>,<span class="hljs-comment">// Entity 117 from Company</span>
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"[object Entity]"</span><span class="hljs-comment">// Entity 118 from Company</span>

    }
]
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="drop"></a><a href="#drop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.drop()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk force drop if stamp changed</code>: Forces the drop even if the stamp has changed</td></tr>
<tr><td>Result</td><td>Object</td><td style="text-align:center">&lt;-</td><td>Result of drop operation</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-3"></a><a href="#description-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.drop()</code> function deletes the data contained in the entity from the datastore, from the table related to its Dataclass. Note that the entity remains in memory.</p>
<p>In a multi-user or multi-process application, the <code>.drop()</code> function is executed under an <a href="/docs/pt/ORDA/entities.html#entity-locking">&quot;optimistic lock&quot;</a> mechanism, wherein an internal locking stamp is automatically incremented each time the record is saved.</p>
<p>By default, if the <em>mode</em> parameter is omitted, the function will return an error (see below) if the same entity was modified (i.e. the stamp has changed) by another process or user in the meantime.</p>
<p>Otherwise, you can pass the <code>dk force drop if stamp changed</code> option in the <em>mode</em> parameter: in this case, the entity is dropped even if the stamp has changed (and the primary key is still the same).</p>
<p><strong>Result</strong></p>
<p>The object returned by <code>.drop( )</code> contains the following properties:</p>
<table>
<thead>
<tr><th>Property</th><th></th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>success</td><td></td><td>boolean</td><td>true if the drop action is successful, false otherwise.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of error:</em></strong></td></tr>
<tr><td>status(*)</td><td></td><td>number</td><td>Error code, see below</td></tr>
<tr><td>statusText(*)</td><td></td><td>text</td><td>Description of the error, see below</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of pessimistic lock error:</em></strong></td></tr>
<tr><td>LockKindText</td><td></td><td>text</td><td>&quot;Locked by record&quot;</td></tr>
<tr><td>lockInfo</td><td></td><td>object</td><td>Information about the lock origin</td></tr>
<tr><td></td><td>task_id</td><td>number</td><td>Process id</td></tr>
<tr><td></td><td>user_name</td><td>text</td><td>Session user name on the machine</td></tr>
<tr><td></td><td>user4d_id</td><td>text</td><td>User name in the 4D database directory</td></tr>
<tr><td></td><td>host_name</td><td>text</td><td>Machine name</td></tr>
<tr><td></td><td>task_name</td><td>text</td><td>Process name</td></tr>
<tr><td></td><td>client_version</td><td>text</td><td></td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of serious error (serious error can be trying to duplicate a primary key, disk full...):</em></strong></td></tr>
<tr><td>errors</td><td></td><td>collection of objects</td><td></td></tr>
<tr><td></td><td>message</td><td>text</td><td>Error message</td></tr>
<tr><td></td><td>component signature</td><td>text</td><td>internal component signature (e.g. &quot;dmbg&quot; stands for the database component)</td></tr>
<tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr>
</tbody>
</table>
<p>(*) The following values can be returned in the <em>status</em> and <em>statusText</em> properties of <em>Result</em> object in case of error:</p>
<table>
<thead>
<tr><th>Constant</th><th>Value</th><th>Comment</th></tr>
</thead>
<tbody>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>The entity no longer exists in the data. This error can occur in the following cases:<br><li>the entity has been dropped (the stamp has changed and the memory space is now free)</li><li>the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). When using entity.drop( ), this error can be returned when dk force drop if stamp changed option is used. When using entity.lock( ), this error can be returned when dk reload if stamp changed option is used</li><p><strong>Associated statusText</strong>: &quot;Entity does not exist anymore&quot;</td></tr>
<tr><td><code>dk status locked</code></td><td>3</td><td>The entity is locked by a pessimistic lock.<br><strong>Associated statusText</strong>: &quot;Already locked&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.<br><strong>Associated statusText</strong>: &quot;Other error&quot;</td></tr>
<tr><td><code>dk status stamp has changed</code></td><td>2</td><td>The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).<br><li>with <code>.save( )</code>: error only if the <code>dk auto merge</code> option is not used</li><li>with <code>.drop( )</code>: error only if the <code>dk force drop if stamp changed</code> option is not used</li><li>with <code>.lock( )</code>: error only if the <code>dk reload if stamp changed</code> option is not used</li><li><strong>Associated statusText</strong>: &quot;Stamp has changed&quot;</li></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="example-1-2"></a><a href="#example-1-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1</h4>
<p>Example without <code>dk force drop if stamp changed</code> option:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">drop</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName) <span class="hljs-comment">//The dropped entity remains in memory</span>
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-2-1"></a><a href="#example-2-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2</h4>
<p>Example with <code>dk force drop if stamp changed</code> option:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">drop</span>(dk force drop if stamp changed)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName) <span class="hljs-comment">//The dropped entity remains in memory</span>
    :(<span class="hljs-variable">$status</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="first"></a><a href="#first" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.first()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.first()</strong>: 4D.Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Reference to first entity of an entity selection (Null if not found)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-4"></a><a href="#description-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.first()</code> function returns a reference to the entity in first position of the entity selection which the entity belongs to.</p>
<p>If the entity does not belong to any existing entity selection (i.e. <a href="#getselection">.getSelection( )</a> returns Null), the function returns a Null value.</p>
<h4><a class="anchor" aria-hidden="true" id="example-3"></a><a href="#example-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$firstEmployee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">2</span>]
 <span class="hljs-variable">$firstEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">first</span>() <span class="hljs-comment">//$firstEmployee is the first entity of the $employees entity selection</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fromobject"></a><a href="#fromobject" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.fromObject()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.fromObject</strong>( <em>filler</em> : Object )</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>filler</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Object from which to fill the entity</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-5"></a><a href="#description-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.fromObject()</code> function fills an entity with the <em>filler</em> content.</p>
<blockquote>
<p>This function modifies the original entity.</p>
</blockquote>
<p>The mapping between the object and the entity is done on the attribute names:</p>
<ul>
<li>If a property of the object does not exist in the dataclass, it is ignored.</li>
<li>Data types must be equivalent. If there is a type mismatch between the object and dataclass, 4D tries to convert the data whenever possible (see <a href="/docs/pt/Concepts/data-types.html#converting-data-types"><code>Converting data types</code></a>), otherwise the attribute is left untouched.</li>
</ul>
<p><em>filler</em> can handle a related entity under the following conditions:</p>
<ul>
<li><em>filler</em> contains the foreign key itself, or</li>
<li><em>filler</em> contains a property object with the same name as the related entity, containing a single property named &quot;__KEY&quot;.</li>
<li>if the related entity does not exist, it is ignored.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="example-4"></a><a href="#example-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>With the following $o object:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mary"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Smith"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">36500</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1958-10-27T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: true,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">411</span>,<span class="hljs-comment">// relatedEntity given with PK</span>
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span> <span class="hljs-comment">// relatedEntity given with PK</span>
}
</code></pre>
<p>The following code will create an entity with manager and employer related entities.</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$o </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity
 <span class="hljs-variable">$entity</span>:=ds.Emp.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$o</span>)
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
</code></pre>
<p>You could also use a related entity given as an object:</p>
<pre><code class="hljs css language-4d">
{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Marie"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Lechat"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">68400</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1971-09-03T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"employer"</span>: {<span class="hljs-comment">// relatedEntity given as an object</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"21"</span>
    },
    <span class="hljs-string">"manager"</span>: {<span class="hljs-comment">// relatedEntity given as an object</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"411"</span>
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getdataclass"></a><a href="#getdataclass" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getDataClass()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17 R5</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getDataClass()</strong> : 4D.DataClass</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>4D.DataClass</td><td style="text-align:center">&lt;-</td><td>DataClass object to which the entity belongs</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-6"></a><a href="#description-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.getDataClass()</code> function returns the dataclass of the entity. This function is useful when writing generic code.</p>
<h4><a class="anchor" aria-hidden="true" id="example-5"></a><a href="#example-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>The following generic code duplicates any entity:</p>
<pre><code class="hljs css language-4d">  <span class="hljs-comment">//duplicate_entity method </span>
  <span class="hljs-comment">//duplicate_entity($entity) </span>

 #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$entity </span>: 4D.Entity)<span class="hljs-keyword">  
 var</span> <span class="hljs-variable">$entityNew </span>: 4D.Entity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object

 <span class="hljs-variable">$entityNew</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">new</span>() <span class="hljs-comment">//create a new entity in the parent dataclass</span>
 <span class="hljs-variable">$entityNew</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$entity</span>.<span class="hljs-function">toObject</span>()) <span class="hljs-comment">//get all attributes</span>
 <span class="hljs-variable">$entityNew</span>[<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getInfo</span>().primaryKey]:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//reset the primary key</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entityNew</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//save the duplicated entity</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getkey"></a><a href="#getkey" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getKey()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Text<br><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Integer</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk key as string</code>: primary key is returned as a string, no matter the primary key type</td></tr>
<tr><td>Result</td><td>Text</td><td style="text-align:center">&lt;-</td><td>Value of the text primary key of the entity</td></tr>
<tr><td>Result</td><td>Integer</td><td style="text-align:center">&lt;-</td><td>Value of the numeric primary key of the entity</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-7"></a><a href="#description-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.getKey()</code> function returns the primary key value of the entity.</p>
<p>Primary keys can be numbers (Integer) or strings. You can &quot;force&quot; the returned primary key value to be a string, no matter the actual primary key type, by passing the <code>dk key as string</code> option in the <em>mode</em> parameter.</p>
<h4><a class="anchor" aria-hidden="true" id="example-6"></a><a href="#example-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The primary key is "</span>+<span class="hljs-variable">$employee</span>.<span class="hljs-function">getKey</span>(dk key as string))
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getselection"></a><a href="#getselection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getSelection()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getSelection()</strong>: 4D.EntitySelection</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection to which the entity belongs (Null if not found)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-8"></a><a href="#description-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.getSelection()</code> function returns the entity selection which the entity belongs to.</p>
<p>If the entity does not belong to an entity selection, the function returns Null.</p>
<h4><a class="anchor" aria-hidden="true" id="example-7"></a><a href="#example-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$employees2 </span>: cs.EmployeeSelection
 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>) <span class="hljs-comment">// This entity does not belong to any entity selection</span>
 <span class="hljs-variable">$employees</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">getSelection</span>() <span class="hljs-comment">// $employees is Null</span>

 <span class="hljs-variable">$employees2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>) <span class="hljs-comment">//This entity selection contains 6 entities</span>
 <span class="hljs-variable">$emp</span>:=<span class="hljs-variable">$employees2</span>[<span class="hljs-number">0</span>]  <span class="hljs-comment">// This entity belongs to an entity selection</span>

<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The entity selection contains "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">getSelection</span>().length)+<span class="hljs-string">" entities"</span>)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getstamp"></a><a href="#getstamp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getStamp()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getStamp()</strong> : Integer</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>Integer</td><td style="text-align:center">&lt;-</td><td>Stamp of the entity (0 if entity has just been created)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-9"></a><a href="#description-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.getStamp()</code> function  returns the current value of the stamp of the entity.</p>
<p>The internal stamp is automatically incremented by 4D each time the entity is saved. It manages concurrent user access and modifications to the same entities (see <a href="/docs/pt/ORDA/entities.html#entity-locking"><strong>Entity locking</strong></a>).</p>
<blockquote>
<p>For a new entity (never saved), the function returns 0. To know if an entity has just been created, it is recommended to use <a href="#isnew">.isNew()</a>.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="example-8"></a><a href="#example-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$stamp </span>: Integer

 <span class="hljs-variable">$entity</span>:=ds.Employee.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
 <span class="hljs-variable">$stamp</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getStamp</span>() <span class="hljs-comment">//$stamp=1</span>

 <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Wesson"</span>
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
 <span class="hljs-variable">$stamp</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getStamp</span>() <span class="hljs-comment">//$stamp=2</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="indexof"></a><a href="#indexof" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.indexOf()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.indexOf</strong>( { <em>entitySelection</em> : 4D.EntitySelection } ) : Integer</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>entitySelection</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Position of the entity is given according to this entity selection</td></tr>
<tr><td>Result</td><td>Integer</td><td style="text-align:center">&lt;-</td><td>Position of the entity in an entity selection</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-10"></a><a href="#description-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.indexOf()</code> function returns the position of the entity in an entity selection.</p>
<p>By default if the <em>entitySelection</em> parameter is omitted, the function returns the entity's position within its own entity selection. Otherwise, it returns the position of the entity within the specified <em>entitySelection</em>.</p>
<p>The resulting value is included between 0 and the length of the entity selection -1.</p>
<ul>
<li>If the entity does not have an entity selection or does not belong to <em>entitySelection</em>, the function returns -1.</li>
<li>If <em>entitySelection</em> is Null or does not belong to the same dataclass as the entity, an error is raised.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="example-9"></a><a href="#example-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">1</span>] <span class="hljs-comment">//This entity belongs to an entity selection</span>
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The index of the entity in its own entity selection is "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employee</span>.<span class="hljs-function">indexOf</span>())) <span class="hljs-comment">//1</span>

 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>) <span class="hljs-comment">//This entity does not belong to an entity selection</span>
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The index of the entity is "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employee</span>.<span class="hljs-function">indexOf</span>())) <span class="hljs-comment">// -1</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="isnew"></a><a href="#isnew" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.isNew()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.isNew()</strong> : Boolean</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>Boolean</td><td style="text-align:center">&lt;-</td><td>True if entity has just been created and not yet saved. Otherwise, False.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-11"></a><a href="#description-11" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.isNew()</code> function  returns True if the entity to which it is applied has just been created and has not yet been saved in the datastore. Otherwise, it returns False.</p>
<h4><a class="anchor" aria-hidden="true" id="example-10"></a><a href="#example-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity

 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">new</span>()<span class="hljs-keyword">

 If</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">isNew</span>())
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"This is a new entity"</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="last"></a><a href="#last" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.last()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.last()</strong> : 4D.Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Reference to last entity of an entity selection (Null if not found)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-12"></a><a href="#description-12" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.last()</code> function returns a reference to the entity in last position of the entity selection which the entity belongs to.</p>
<p>If the entity does not belong to any existing entity selection (i.e. <a href="#getselection">.getSelection( )</a> returns Null), the function returns a Null value.</p>
<h4><a class="anchor" aria-hidden="true" id="example-11"></a><a href="#example-11" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$lastEmployee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$lastEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">last</span>() <span class="hljs-comment">//$lastEmployee is the last entity of the $employees entity selection</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="lock"></a><a href="#lock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.lock()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.lock</strong>( { <em>mode</em> : Integer } ) : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk reload if stamp changed</code>: Reload before locking if stamp changed</td></tr>
<tr><td>Result</td><td>Object</td><td style="text-align:center">&lt;-</td><td>Result of lock operation</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-13"></a><a href="#description-13" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.lock()</code> function puts a pessimistic lock on the record referenced by the entity. The <a href="/docs/pt/ORDA/entities.html#entity-locking">lock is set</a> for a record and all the references of the entity in the current process.</p>
<p>Other processes will see this record as locked (the <code>result.success</code> property will contain False if they try to lock the same entity using this function). Only functions executed in the &quot;locking&quot; session are allowed to edit and save the attributes of the entity. The entity can be loaded as read-only by other sessions, but they will not be able to enter and save values.</p>
<p>A locked record is unlocked:</p>
<ul>
<li>when the <a href="#unlock"><code>unlock()</code></a> function is called on a matching entity in the same process</li>
<li>automatically, when it is no longer referenced by any entities in memory. For example, if the lock is put only on one local reference of an entity, the entity is unlocked when the function ends. As long as there are references to the entity in memory, the record remains locked.</li>
</ul>
<p>By default, if the <em>mode</em> parameter is omitted, the function will return an error (see below) if the same entity was modified (i.e. the stamp has changed) by another process or user in the meantime.</p>
<p>Otherwise, you can pass the <code>dk reload if stamp changed</code> option in the <em>mode</em> parameter: in this case, no error is returned and the entity is reloaded when the stamp has changed (if the entity still exists and the primary key is still the same).</p>
<p><strong>Result</strong></p>
<p>The object returned by <code>.lock( )</code> contains the following properties:</p>
<table>
<thead>
<tr><th>Property</th><th></th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>success</td><td></td><td>boolean</td><td>true if the lock action is successful (or if the entity is already locked in the current process), false otherwise.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only if <code>dk reload if stamp changed</code> option is used:</em></strong></td></tr>
<tr><td><strong>wasReloaded</strong></td><td></td><td>boolean</td><td>true if the entity was reloaded with success, false otherwise.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of error:</em></strong></td></tr>
<tr><td>status(*)</td><td></td><td>number</td><td>Error code, see below</td></tr>
<tr><td>statusText(*)</td><td></td><td>text</td><td>Description of the error, see below</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of pessimistic lock error:</em></strong></td></tr>
<tr><td>lockKindText</td><td></td><td>text</td><td>&quot;Locked by record&quot;</td></tr>
<tr><td>lockInfo</td><td></td><td>object</td><td>Information about the lock origin</td></tr>
<tr><td></td><td>task_id</td><td>number</td><td>Process ID</td></tr>
<tr><td></td><td>user_name</td><td>text</td><td>Session user name on the machine</td></tr>
<tr><td></td><td>user4d_alias</td><td>text</td><td>Name or alias of the 4D user</td></tr>
<tr><td></td><td>user4d_id</td><td>number</td><td>User id in the 4D database directory</td></tr>
<tr><td></td><td>host_name</td><td>text</td><td>Machine name</td></tr>
<tr><td></td><td>task_name</td><td>text</td><td>Process name</td></tr>
<tr><td></td><td>client_version</td><td>text</td><td></td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of serious error</em></strong> (primary key already exists, disk full...):</td></tr>
<tr><td>errors</td><td></td><td>collection of objects</td><td></td></tr>
<tr><td></td><td>message</td><td>text</td><td>Error message</td></tr>
<tr><td></td><td>component signature</td><td>text</td><td>internal component signature (e.g. &quot;dmbg&quot; stands for the database component)</td></tr>
<tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr>
</tbody>
</table>
<p>(*) The following values can be returned in the <em>status</em> and <em>statusText</em> properties of the <em>Result</em> object in case of error:</p>
<table>
<thead>
<tr><th>Constant</th><th>Value</th><th>Comment</th></tr>
</thead>
<tbody>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>The entity no longer exists in the data. This error can occur in the following cases:<li>the entity has been dropped (the stamp has changed and the memory space is now free)</li><li>the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). When using <code>.drop( )</code>, this error can be returned when dk force drop if stamp changed option is used. When using <code>.lock( )</code>, this error can be returned when <code>dk reload if stamp changed</code> option is used</li><br><strong>Associated statusText</strong>: &quot;Entity does not exist anymore&quot;</td></tr>
<tr><td><code>dk status locked</code></td><td>3</td><td>The entity is locked by a pessimistic lock.<p><p><strong>Associated statusText</strong>: &quot;Already locked&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.<p><p><strong>Associated statusText</strong>: &quot;Other error&quot;</td></tr>
<tr><td><code>dk status stamp has changed</code></td><td>2</td><td>The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).<li>with <code>.save( )</code>: error only if the <code>dk auto merge</code> option is not used</li><li>with <code>.drop( )</code>: error only if the <code>dk force drop if stamp changed</code> option is not used</li><li>with <code>.lock( )</code>: error only if the <code>dk reload if stamp changed</code> option is not used</li><br><strong>Associated statusText</strong>: &quot;Stamp has changed&quot;</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="example-1-3"></a><a href="#example-1-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1</h4>
<p>Example with error:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">716</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have locked "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName)
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-2-2"></a><a href="#example-2-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2</h4>
<p>Example with <code>dk reload if stamp changed</code> option:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">717</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>(dk reload if stamp changed)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have locked "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName)
    :(<span class="hljs-variable">$status</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="next"></a><a href="#next" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.next()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.next()</strong> : 4D.Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Reference to next entity in the entity selection (Null if not found)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-14"></a><a href="#description-14" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.next()</code> function returns a reference to the next entity in the entity selection which the entity belongs to.</p>
<p>If the entity does not belong to any existing entity selection (i.e. <a href="#getselection">.getSelection()</a> returns Null), the function returns a Null value.</p>
<p>If there is no valid next entity in the entity selection (i.e. you are on the last entity of the selection), the function returns Null. If the next entity has been dropped, the function returns the next valid entity (and eventually Null).</p>
<h4><a class="anchor" aria-hidden="true" id="example-12"></a><a href="#example-12" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$nextEmployee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$nextEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">next</span>() <span class="hljs-comment">//$nextEmployee is the second entity of the $employees entity selection</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="previous"></a><a href="#previous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.previous()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.previous()</strong>  : 4D.Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Reference to previous entity in the entity selection (Null if not found)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-15"></a><a href="#description-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.previous()</code> function  returns a reference to the previous entity in the entity selection which the entity belongs to.</p>
<p>If the entity does not belong to any existing entity selection (i.e. <a href="#getselection">.getSelection()</a> returns Null), the function returns a Null value.</p>
<p>If there is no valid previous entity in the entity selection (i.e. you are on the first entity of the selection), the function returns Null. If the previous entity has been dropped, the function returns the previous valid entity (and eventually Null).</p>
<h4><a class="anchor" aria-hidden="true" id="example-13"></a><a href="#example-13" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$previousEmployee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">1</span>]
 <span class="hljs-variable">$previousEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">previous</span>() <span class="hljs-comment">//$previousEmployee is the first entity of the $employees entity selection</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="reload-"></a><a href="#reload-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.reload( )</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.reload()</strong> : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>Object</td><td style="text-align:center">&lt;-</td><td>Status object</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-16"></a><a href="#description-16" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.reload()</code> function reloads the content of the entity in memory, according to information stored in the table related to the dataclass in the datastore. The reload is done only if the entity still exists with the same primary key.</p>
<p><strong>Result</strong></p>
<p>The object returned by <code>.reload( )</code> contains the following properties:</p>
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>success</td><td>boolean</td><td>True if the reload action is successful, False otherwise.<p><p><strong><em>Available only in case of error</em></strong>:</td></tr>
<tr><td>status(*)</td><td>number</td><td>Error code, see below</td></tr>
<tr><td>statusText(*)</td><td>text</td><td>Description of the error, see below</td></tr>
</tbody>
</table>
<p>(*) The following values can be returned in the <em>status</em> and <em>statusText</em> properties of <em>Result</em> object in case of error:</p>
<table>
<thead>
<tr><th>Constant</th><th>Value</th><th>Comment</th></tr>
</thead>
<tbody>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>The entity no longer exists in the data. This error can occur in the following cases:<br><li>the entity has been dropped (the stamp has changed and the memory space is now free)</li><li>the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). When using <code>.drop( )</code>, this error can be returned when <code>dk force drop if stamp changed</code> option is used. When using <code>.lock( )</code>, this error can be returned when <code>dk reload if stamp changed</code> option is used</li><br><strong><em>Associated statusText</em></strong>: &quot;Entity does not exist anymore&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.<br><strong><em>Associated statusText</em></strong>: &quot;Other error&quot;</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="example-14"></a><a href="#example-14" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$result </span>: Object

 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Hollis"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$employee</span>.firstName:=<span class="hljs-string">"Mary"</span>
 <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">reload</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$result</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Reload has been done"</span>)
    :(<span class="hljs-variable">$result</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"The entity has been dropped"</span>)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="save"></a><a href="#save" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.save()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.save</strong>( { <em>mode</em> : Integer } ) : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk auto merge</code>: Enables the automatic merge mode</td></tr>
<tr><td>Result</td><td>Object</td><td style="text-align:center">&lt;-</td><td>Result of save operation</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-17"></a><a href="#description-17" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.save()</code> function saves the changes made to the entity in the table related to its dataClass. You must call this method after creating or modifying an entity if you want to save the changes made to it.</p>
<p>The save operation is executed only if at least one entity attribute has been &quot;touched&quot; (see the <a href="#touched"><code>.touched()</code></a> and <a href="#touchedattributes"><code>.touchedAttributes()</code></a> functions). Otherwise, the function does nothing (the trigger is not called).</p>
<p>In a multi-user or multi-process application, the <code>.save()</code> function is executed under an <a href="/docs/pt/ORDA/entities.html#entity-locking">&quot;optimistic lock&quot;</a> mechanism, wherein an internal locking stamp is automatically incremented each time the record is saved.</p>
<p>By default, if the <em>mode</em> parameter is omitted, the method will return an error (see below) whenever the same entity has been modified by another process or user in the meantime, no matter the modified attribute(s).</p>
<p>Otherwise, you can pass the <code>dk auto merge</code> option in the <em>mode</em> parameter: when the automatic merge mode is enabled, a modification done concurrently by another process/user on the same entity but on a different attribute will not result in an error. The resulting data saved in the entity will be the combination (the &quot;merge&quot;) of all non-concurrent modifications (if modifications were applied to the same attribute, the save fails and an error is returned, even with the auto merge mode).</p>
<blockquote>
<p>The automatic merge mode is not available for attributes of Picture, Object, and Text type when stored outside of the record. Concurrent changes in these attributes will result in a <code>dk status stamp has changed</code> error.</p>
</blockquote>
<p><strong>Result</strong></p>
<p>The object returned by <code>.save()</code> contains the following properties:</p>
<table>
<thead>
<tr><th>Property</th><th></th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>success</td><td></td><td>boolean</td><td>True if the save action is successful, False otherwise.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only if <code>dk auto merge</code> option is used</em></strong>:</td></tr>
<tr><td>autoMerged</td><td></td><td>boolean</td><td>True if an auto merge was done, False otherwise.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of error</em></strong>:</td></tr>
<tr><td>status</td><td></td><td>number</td><td>Error code, <a href="#status-and-statustext">see below</a></td></tr>
<tr><td>statusText</td><td></td><td>text</td><td>Description of the error, <a href="#status-and-statustext">see below</a></td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of pessimistic lock error</em></strong>:</td></tr>
<tr><td>lockKindText</td><td></td><td>text</td><td>&quot;Locked by record&quot;</td></tr>
<tr><td>lockInfo</td><td></td><td>object</td><td>Information about the lock origin</td></tr>
<tr><td></td><td>task_id</td><td>number</td><td>Process id</td></tr>
<tr><td></td><td>user_name</td><td>text</td><td>Session user name on the machine</td></tr>
<tr><td></td><td>user4d_id</td><td>text</td><td>User name in the 4D database directory</td></tr>
<tr><td></td><td>host_name</td><td>text</td><td>Machine name</td></tr>
<tr><td></td><td>task_name</td><td>text</td><td>Process name</td></tr>
<tr><td></td><td>client_version</td><td>text</td><td></td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of serious error</em></strong> (serious error - can be trying to duplicate a primary key, disk full...):</td></tr>
<tr><td>errors</td><td></td><td>collection of objects</td><td></td></tr>
<tr><td></td><td>message</td><td>text</td><td>Error message</td></tr>
<tr><td></td><td>componentSignature</td><td>text</td><td>Internal component signature (e.g. &quot;dmbg&quot; stands for the database component)</td></tr>
<tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="status-and-statustext"></a><a href="#status-and-statustext" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>status and statusText</h5>
<p>The following values can be returned in the <code>status</code> and <code>statusText</code> properties of Result object in case of error:</p>
<table>
<thead>
<tr><th>Constant</th><th>Value</th><th>Comment</th></tr>
</thead>
<tbody>
<tr><td><code>dk status automerge failed</code></td><td>6</td><td>(Only if the <code>dk auto merge</code> option is used) The automatic merge option failed when saving the entity.<p><p><strong>Associated statusText</strong>: &quot;Auto merge failed&quot;</td></tr>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>The entity no longer exists in the data. This error can occur in the following cases:<br><li>the entity has been dropped (the stamp has changed and the memory space is now free)</li><li>the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). When using <code>.drop( )</code>, this error can be returned when <code>dk force drop if stamp changed</code> option is used. When using <code>.lock( )</code>, this error can be returned when <code>dk reload if stamp changed</code> option is used</li><br><strong>Associated statusText</strong>: &quot;Entity doesnot exist anymore&quot;</td></tr>
<tr><td><code>dk status locked</code></td><td>3</td><td>The entity is locked by a pessimistic lock.<p><p><strong>Associated statusText</strong>: &quot;Already locked&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>A serious error is a low-level database error (e.g. duplicated key), a hardware error, etc.<p><p><strong>Associated statusText</strong>: &quot;Other error&quot;</td></tr>
<tr><td><code>dk status stamp has changed</code></td><td>2</td><td>The internal stamp value of the entity does not match the one of the entity stored in the data (optimistic lock).<br><li>with <code>.save( )</code>: error only if the <code>dk auto merge</code> option is not used</li><li>with <code>.drop( )</code>: error only if the <code>dk force drop if stamp changed</code> option is not used</li><li>with <code>.lock( )</code>: error only if the <code>dk reload if stamp changed</code> option is not used</li><br><strong>Associated statusText</strong>: &quot;Stamp has changed&quot;</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="example-1-4"></a><a href="#example-1-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1</h4>
<p>Creating a new entity:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$employee</span>.firstName:=<span class="hljs-string">"Mary"</span>
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 If</span>(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Employee created"</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-2-3"></a><a href="#example-2-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2</h4>
<p>Updating an entity without <code>dk auto merge</code> option:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Mac Arthur"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Employee updated"</span>)
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-3-1"></a><a href="#example-3-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 3</h4>
<p>Updating an entity with <code>dk auto merge</code> option:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">

 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection

 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Mac Arthur"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>(dk auto merge)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Employee updated"</span>)
    :(<span class="hljs-variable">$status</span>.status=dk status automerge failed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="toobject"></a><a href="#toobject" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.toObject()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.toObject</strong>() : Object<br><strong>.toObject</strong>( <em>filterString</em> : Text { ; <em>options</em> : Integer}  ) : Object<br><strong>.toObject</strong>( <em>filterCol</em> : Collection { ; <em>options</em> : Integer } ) : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>filterString</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Attribute(s) to extract (comma-separated string)</td></tr>
<tr><td>filterCol</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Collection of attribute(s) to extract</td></tr>
<tr><td>options</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk with primary key</code>: adds the _KEY property;<br><code>dk with stamp</code>: adds the _STAMP property</td></tr>
<tr><td>Result</td><td>Object</td><td style="text-align:center">&lt;-</td><td>Object built from the entity</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-18"></a><a href="#description-18" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.toObject()</code> function returns an object which has been built from the entity. Property names in the object match attribute names of the entity.</p>
<p>If no filter is specified, or if the <em>filterString</em> parameter contains an empty string or &quot;*&quot;, the returned object will contain:</p>
<ul>
<li>all storage entity attributes</li>
<li>attributes of the <code>relatedEntity</code> <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a>: you get a property with the same name as the related entity (name of the many-to-one link). Attribute is extracted with the simple form.</li>
<li>attributes of the <code>relatedEntities</code> <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a>: attribute is not returned.</li>
</ul>
<p>In the first parameter, you pass the entity attribute(s) to extract. You can pass:</p>
<ul>
<li><em>filterString</em>: a string with property paths separated with commas: &quot;propertyPath1, propertyPath2, ...&quot;, or</li>
<li><em>filterCol</em>: a collection of strings: [&quot;propertyPath1&quot;,&quot;propertyPath2&quot;;...]</li>
</ul>
<p>If a filter is specified for attributes of the relatedEntity <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a>:</p>
<ul>
<li>propertyPath = &quot;relatedEntity&quot; -&gt; it is extracted with simple form: an object with property __KEY (primary key).</li>
<li>propertyPath = &quot;relatedEntity.*&quot; -&gt; all the properties are extracted</li>
<li>propertyPath = &quot;relatedEntity.propertyName1; relatedEntity.propertyName2; ...&quot; -&gt; only those properties are extracted</li>
</ul>
<p>If a filter is specified for attributes of the relatedEntities <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a>:</p>
<ul>
<li>propertyPath = &quot;relatedEntities.*&quot; -&gt; all the properties are extracted</li>
<li>propertyPath = &quot;relatedEntities.propertyName1; relatedEntities.propertyName2; ...&quot; -&gt; only those properties are extracted</li>
</ul>
<p>In the <em>options</em> parameter, you can pass the <code>dk with primary key</code> and/or<code>dk with stamp</code> selector(s) to add the entity's primary keys and/or stamps in extracted objects.</p>
<h4><a class="anchor" aria-hidden="true" id="example-1-5"></a><a href="#example-1-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1</h4>
<p>The following structure will be used throughout all examples of this section:</p>
<p><img src="/docs/assets/en/API/dataclassAttribute4.png" alt=""></p>
<p>Without filter parameter:</p>
<pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>()
</code></pre>
<p>Returns:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"ID"</span>: <span class="hljs-number">413</span>,
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
    <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
    <span class="hljs-string">"extra"</span>: null,
    <span class="hljs-string">"employer"</span>: { <span class="hljs-comment">// relatedEntity extracted with simple form</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    },
    <span class="hljs-string">"manager"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-2-4"></a><a href="#example-2-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2</h4>
<p>Extracting the primary key and the stamp:</p>
<pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">""</span>;dk with primary key+dk with stamp)
</code></pre>
<p>Returns:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>,
   <span class="hljs-string">"__STAMP"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"ID"</span>: <span class="hljs-number">413</span>,
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
    <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
    <span class="hljs-string">"extra"</span>: null,
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    },
    <span class="hljs-string">"manager"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-3-2"></a><a href="#example-3-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 3</h4>
<p>Expanding all the properties of <code>relatedEntities</code>:</p>
<pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"directReports.*"</span>)
</code></pre>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"directReports"</span>: [
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">418</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">44800</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1970-10-02T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: true,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        },
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">419</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Drew"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Caudill"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">41000</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2030-01-12T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: false,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        },
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">420</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Nathan"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gomes"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">46300</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2010-05-29T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: false,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        }
    ]
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-4-1"></a><a href="#example-4-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 4</h4>
<p>Extracting some properties of <code>relatedEntities</code>:</p>
<pre><code class="hljs css language-4d"> employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"firstName, directReports.lastName"</span>)
</code></pre>
<p>Returns:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"directReports"</span>: [
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>
        },
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Caudill"</span>
        },
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gomes"</span>
        }
    ]
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-5-1"></a><a href="#example-5-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 5</h4>
<p>Extracting a <code>relatedEntity</code> with simple form:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$coll</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"employer"</span>)
 employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-variable">$coll</span>)
</code></pre>
<p>Returns:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-6-1"></a><a href="#example-6-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 6</h4>
<p>Extracting all the properties of a <code>relatedEntity</code>:</p>
<pre><code class="hljs css language-4d"> employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"employer.*"</span>)
</code></pre>
<p>Returns:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,
        <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,
        <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,
        <span class="hljs-string">"extra"</span>: null
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-7-1"></a><a href="#example-7-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 7</h4>
<p>Extracting some properties of a <code>relatedEntity</code>:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$col</span>:=New collection
 <span class="hljs-variable">$col</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.name"</span>)
 <span class="hljs-variable">$col</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.revenues"</span>)
 employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-variable">$col</span>)
</code></pre>
<p>Returns:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,
        <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="touched-"></a><a href="#touched-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.touched( )</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.touched()</strong> : Boolean</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>Boolean</td><td style="text-align:center">&lt;-</td><td>True if at least one entity attribute has been modified and not yet saved, else False</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-19"></a><a href="#description-19" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.touched()</code> function tests whether or not an entity attribute has been modified since the entity was loaded into memory or saved.</p>
<p>If an attribute has been modified or calculated, the function returns True, else it returns False. You can use this function to determine if you need to save the entity.</p>
<p>This function returns False for a new entity that has just been created (with <a href="/docs/pt/API/DataClassClass.html#new"><code>.new( )</code></a>). Note however that if you use a function which calculates an attribute of the entity, the <code>.touched()</code> function will then return True. For example, if you call <a href="#getkey"><code>.getKey()</code></a> to calculate the primary key, <code>.touched()</code> returns True.</p>
<h4><a class="anchor" aria-hidden="true" id="example-15"></a><a href="#example-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>In this example, we check to see if it is necessary to save the entity:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity
 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-comment">//Even if updated with the same value, the attribute is marked as touched</span><span class="hljs-keyword">

 If</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">touched</span>()) <span class="hljs-comment">//if at least one of the attributes has been changed</span>
    <span class="hljs-variable">$emp</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 End if</span> <span class="hljs-comment">// otherwise, no need to save the entity</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="touchedattributes-"></a><a href="#touchedattributes-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.touchedAttributes( )</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.touchedAttributes()</strong> : Collection</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Names of touched attributes, or empty collection</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-20"></a><a href="#description-20" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.touchedAttributes()</code> function returns the names of the attributes that have been modified since the entity was loaded into memory.</p>
<p>This applies for attributes of the <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a> <code>storage</code> or <code>relatedEntity</code>.</p>
<p>In the case of a related entity having been touched (i.e., the foreign key), the name of the related entity and its primary key's name are returned.</p>
<p>If no entity attribute has been touched, the method returns an empty collection.</p>
<h4><a class="anchor" aria-hidden="true" id="example-1-6"></a><a href="#example-1-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$touchedAttributes </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity

 <span class="hljs-variable">$touchedAttributes</span>:=New collection
 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-comment">//Even if updated with the same value, the attribute is marked as touched</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>
 <span class="hljs-variable">$touchedAttributes</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">touchedAttributes</span>()
  <span class="hljs-comment">//$touchedAttributes: ["firstName","lastName"]</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="example-2-5"></a><a href="#example-2-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example 2</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$touchedAttributes </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$company </span>: cs.CompanyEntity

 <span class="hljs-variable">$touchedAttributes</span>:=New collection

 <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>

 <span class="hljs-variable">$company</span>:=ds.Company.<span class="hljs-function">get</span>(<span class="hljs-number">121</span>)
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-variable">$company</span>

 <span class="hljs-variable">$touchedAttributes</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">touchedAttributes</span>()

  <span class="hljs-comment">//collection $touchedAttributes: ["firstName","lastName","employer","employerID"]</span>
</code></pre>
<p>In this case:</p>
<ul>
<li>firstName and lastName have a <code>storage</code> kind</li>
<li>employer has a <code>relatedEntity</code> kind</li>
<li>employerID is the foreign key of the employer related entity</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="unlock"></a><a href="#unlock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.unlock()</h2>
<p><details><summary>History</summary></p>
<table>
<thead>
<tr><th>Version</th><th>Changes</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Added</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.unlock()</strong> : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Result</td><td>Object</td><td style="text-align:center">&lt;-</td><td>Status object</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="description-21"></a><a href="#description-21" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h4>
<p>The <code>.unlock()</code> function removes the pessimistic lock on the record matching the entity in the datastore and table related to its dataclass.</p>
<blockquote>
<p>For more information, please refer to <a href="/docs/pt/ORDA/entities.html#entity-locking">Entity locking</a> section.</p>
</blockquote>
<p>A record is automatically unlocked when it is no longer referenced by any entities in the locking process (for example: if the lock is put only on one local reference of an entity, the entity and thus the record is unlocked when the process ends).</p>
<blockquote>
<p>When a record is locked, it must be unlocked from the locking process and on the entity reference which put the lock. For example:</p>
</blockquote>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$e1</span>:=ds.Emp.<span class="hljs-function">all</span>()[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$e2</span>:=ds.Emp.<span class="hljs-function">all</span>()[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">lock</span>() <span class="hljs-comment">//$res.success=true</span>
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e2</span>.<span class="hljs-function">unlock</span>() <span class="hljs-comment">//$res.success=false</span>
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">unlock</span>() <span class="hljs-comment">//$res.success=true</span>
</code></pre>
<p><strong>Result</strong></p>
<p>The object returned by <code>.unlock()</code> contains the following property:</p>
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>success</td><td>Boolean</td><td>True if the unlock action is successful, False otherwise. If the unlock is done on a dropped entity, on a non locked record, or on a record locked by another process or entity, success is False.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="example-16"></a><a href="#example-16" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object

 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>()
 ... <span class="hljs-comment">//processing</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">unlock</span>()<span class="hljs-keyword">
 If</span>(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"The entity is now unlocked"</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<style> h2 { background: #d9ebff;}</style>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/pt/API/EmailObjectClass.html"><span class="arrow-prev">← </span><span>Email</span></a><a class="docs-next button" href="/docs/pt/API/EntitySelectionClass.html"><span class="function-name-prevnext">EntitySelection</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#attributename">.<em>attributeName</em></a></li><li><a href="#clone">.clone()</a></li><li><a href="#diff">.diff()</a></li><li><a href="#drop">.drop()</a></li><li><a href="#first">.first()</a></li><li><a href="#fromobject">.fromObject()</a></li><li><a href="#getdataclass">.getDataClass()</a></li><li><a href="#getkey">.getKey()</a></li><li><a href="#getselection">.getSelection()</a></li><li><a href="#getstamp">.getStamp()</a></li><li><a href="#indexof">.indexOf()</a></li><li><a href="#isnew">.isNew()</a></li><li><a href="#last">.last()</a></li><li><a href="#lock">.lock()</a></li><li><a href="#next">.next()</a></li><li><a href="#previous">.previous()</a></li><li><a href="#reload-">.reload( )</a></li><li><a href="#save">.save()</a></li><li><a href="#toobject">.toObject()</a></li><li><a href="#touched-">.touched( )</a></li><li><a href="#touchedattributes-">.touchedAttributes( )</a></li><li><a href="#unlock">.unlock()</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2021 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:pt","version:19 BETA"]}
              });
            </script></body></html>
