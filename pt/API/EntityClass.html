<!DOCTYPE html><html lang="pt"><head><meta name="docsearch:version" content="19 R6 BETA"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Entity · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="An [entity](/docs/pt/ORDA/dsmapping.html#entity) is an instance of a [Dataclass](/docs/pt/ORDA/dsmapping.html#dataclass), like a record of the table matching the dataclass in its associated datastore. It contains the same attributes as the dataclass as well as the data values and specific properties and functions."/><meta name="docsearch:language" content="pt"/><meta property="og:title" content="Entity · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/index.html"/><meta property="og:description" content="An [entity](/docs/pt/ORDA/dsmapping.html#entity) is an instance of a [Dataclass](/docs/pt/ORDA/dsmapping.html#dataclass), like a record of the table matching the dataclass in its associated datastore. It contains the same attributes as the dataclass as well as the data values and specific properties and functions."/><meta property="og:image" content="https://4d.github.io/docs/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/img/logohome.png"/><link rel="shortcut icon" href="/docs/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/alpha/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-blocks-buttons.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/pt"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs" target="_self">v19 R6 BETA</a></li><li class=""><a href="https://developer.4d.com/docs/Rx" target="_self">v19 R5</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/img/language.svg" alt="Languages icon"/>Português</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/API/EntityClass.html">English</a></li><li><a href="/docs/ja/API/EntityClass.html">日本語</a></li><li><a href="/docs/de/API/EntityClass.html">Deutsch</a></li><li><a href="/docs/es/API/EntityClass.html">Español</a></li><li><a href="/docs/fr/API/EntityClass.html">Français</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Class API Reference</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Project Management<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Project/overview.html">Visão Geral</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Project/architecture.html">Architecture of a project</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Project/documentation.html">Documenting a project</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Project/compiler.html">Compilation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">4D Language Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/about.html">Sobre a linguagem 4D</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/quick-tour.html">A Quick Tour</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/operators.html">Operadores</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Data Types</h4><ul><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/data-types.html">Tipos de dados</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/blob.html">BLOB</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/boolean.html">Booleano</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/collection.html">Coleção</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/date.html">Date</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/null-undefined.html">Null e indefinido</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/number.html">Number (Real, Longint, Integer)</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/object.html">Objeto</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/picture.html">Imagem</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/pointer.html">Ponteiro</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/string.html">String</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/time.html">Hora</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/variant.html">Variant</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/variables.html">Variáveis</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/arrays.html">Arrays</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/methods.html">Métodos</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/parameters.html">Parâmetros</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/shared.html">Shared objects and collections</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/classes.html">Classes</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Flow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/control-flow.html">Control flow overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/branching.html">Estruturas condicionais</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/looping.html">Estruturas de loop</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/error-handling.html">Gestão de erros</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/interpreted-compiled.html">Interpreted and Compiled modes</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/components.html">Componentes</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/plug-ins.html">Plug-ins</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Concepts/identifiers.html">Identifiers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORDA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/overview.html">What is ORDA?</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/dsmapping.html">Data Model Objects</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/ordaClasses.html">Data Model Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/entities.html">Working with data</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/datastores.html">Using a remote datastore</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/ORDA/glossary.html">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Class API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/API/overview.html">Class API Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/BlobClass.html">Blob</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/ClassClass.html">Classe</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/CollectionClass.html">Coleção</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/CryptoKeyClass.html">CryptoKey</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/DataClassClass.html">DataClass</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/DataClassAttributeClass.html">DataClassAttribute</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/DataStoreClass.html">DataStore</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/EmailObjectClass.html">Email</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/pt/API/EntityClass.html">Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/EntitySelectionClass.html">EntitySelection</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/FileClass.html">File</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/FolderClass.html">Folder</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/FunctionClass.html">Formula</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/HTTPRequestClass.html">HTTPRequest</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/IMAPTransporterClass.html">IMAPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/MailAttachmentClass.html">MailAttachment</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/POP3TransporterClass.html">POP3Transporter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/SessionClass.html">Session</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/SignalClass.html">Signal</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/SMTPTransporterClass.html">SMTPTransporter</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/SystemWorkerClass.html">SystemWorker</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/WebServerClass.html">WebServer</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/ZipArchiveClass.html">ZIPArchive</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/ZipFileClass.html">ZIPFile</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/API/ZipFolderClass.html">ZIPFolder</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Handling Code<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/code-editor/overview.html">About 4D Code</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/code-editor/write-class-method.html">Code Editor</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/code-editor/find-replace.html">Find and replace</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/code-editor/creating-using-macros.html">Creating and using macros</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Tags/tags.html">Transformation tags</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Debugging<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Debugging/basics.html">Básicos</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Debugging/debugger.html">Depurador</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Debugging/breakpoints.html">Breakpoints and Command Catching</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Debugging/debugging-remote.html">Debugging from remote machines</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Debugging/debugLogFiles.html">Description of log files</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Settings<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/settings/overview.html">Visão Geral</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/general.html">General page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/interface.html">Interface page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/compiler.html">Compiler page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/database.html">Database page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/backup.html">Backup page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/client-server.html">Client-server page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/web.html">Página da Web</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/sql.html">Página SQL</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/php.html">PHP page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/security.html">Security page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/settings/compatibility.html">Compatibility page</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Preferences<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/overview.html">Visão Geral</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/general.html">General Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/structure.html">Structure Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/forms.html">Forms Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/methods.html">Methods Page</a></li><li class="navListItem"><a class="navItem" href="/docs/pt/Preferences/shortcuts.html">Shortcuts Page</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/master/docs/API/EntityClass.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Entity</h1></header><article><div><span><p>An <a href="/docs/pt/ORDA/dsmapping.html#entity">entity</a> is an instance of a <a href="/docs/pt/ORDA/dsmapping.html#dataclass">Dataclass</a>, like a record of the table matching the dataclass in its associated datastore. It contains the same attributes as the dataclass as well as the data values and specific properties and functions.</p>
<h3><a class="anchor" aria-hidden="true" id="resumo"></a><a href="#resumo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resumo</h3>
<table>
<thead>
<tr><th></th></tr>
</thead>
<tbody>
<tr><td><a href="#attributename"> <strong><em>.attributeName</em></strong> : any</a><p>     armazena o valor do atributo para a entidade</td></tr>
<tr><td><a href="#clone"> <strong>.clone()</strong> : 4D.Entity</a><p>    </td></tr>
<tr><td><a href="#diff"> <strong>.diff</strong>( <em>entityToCompare</em> : 4D. Entity { ; <em>attributesToCompare</em> : Collection } ) : Collection</a><p>    compara o conteúdo de duas entidades e retorna suas diferenças</td></tr>
<tr><td><a href="#drop"> <strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</a><p>     elimina os dados contidos na entidade da datastore</td></tr>
<tr><td><a href="#first"> <strong>.first()</strong>: 4D. Entity</a><p>    </td></tr>
<tr><td><a href="#fromobject"> <strong>.fromObject</strong>( <em>filler</em> : Object )</a><p>    preenche uma entidade com o conteúdo de <em>filler</em></td></tr>
<tr><td><a href="#getdataclass"> <strong>.getDataClass()</strong> : 4D. DataClass</a><p>    retorna o dataclass da entidade</td></tr>
<tr><td><a href="#getkey"> <strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Text<br><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Integer</a><p>    devolve o valor chave primário da entidade</td></tr>
<tr><td><a href="#getremotecontextattributes"> <strong>.getRemoteContextAttributes()</strong> : Text</a><p>    </td></tr>
<tr><td><a href="#getselection"> <strong>.getSelection()</strong>: 4D. EntitySelection</a><p>    retorna a seleção da entidade a que a entidade pertence</td></tr>
<tr><td><a href="#getstamp"> <strong>.getStamp()</strong> : Integer</a><p>     retorna o valor atual do selo da entidade</td></tr>
<tr><td><a href="#indexOf"> <strong>.indexOf</strong>( { <em>entitySelection</em> : 4D. EntitySelection } ) : Integer</a><p>    retorna a posição da entidade em uma seleção de entidade</td></tr>
<tr><td><a href="#isnew"> <strong>.isNew()</strong> : Boolean</a><p>    </td></tr>
<tr><td><a href="#last"> <strong>.last()</strong> : 4D. Entity</a><p>    </td></tr>
<tr><td><a href="#lock"> <strong>.lock</strong>( { <em>mode</em> : Integer } ) : Object</a><p>    coloca um bloqueio pessimista no registro referenciado pela entidade</td></tr>
<tr><td><a href="#next"> <strong>.next()</strong> : 4D. Entity</a><p>    </td></tr>
<tr><td><a href="#previous"> <strong>.previous()</strong>  : 4D. Entity</a><p>    </td></tr>
<tr><td><a href="#reload"> <strong>.reload()</strong> : Object</a><p>    </td></tr>
<tr><td><a href="#save"> <strong>.save</strong>( { <em>mode</em> : Integer } ) : Object</a><p>    </td></tr>
<tr><td><a href="#toobject"> <strong>.toObject</strong>() : Object<br><strong>.toObject</strong>( <em>filterString</em> : Text { ; <em>options</em> : Integer}  ) : Object<br><strong>.toObject</strong>( <em>filterCol</em> : Collection { ; <em>options</em> : Integer } ) : Object</a><p>    </td></tr>
<tr><td><a href="#touched"> <strong>.touched()</strong> : Boolean</a><p>    </td></tr>
<tr><td><a href="#touchedattributes"> <strong>.touchedAttributes()</strong> : Collection</a><p>    returns the names of the attributes that have been modified since the entity was loaded into memory</td></tr>
<tr><td><a href="#unlock"> <strong>.unlock()</strong> : Object</a><p>    </td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="attributename"></a><a href="#attributename" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.<em>attributeName</em></h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong><em>.attributeName</em></strong> : any</p>
<h4><a class="anchor" aria-hidden="true" id="descrição"></a><a href="#descrição" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>Qualquer atributo dataclass está disponível como propriedade de uma entidade, que  armazena o valor do atributo para a entidade.</p>
<blockquote>
<p>Dataclass attributes can also be reached using the alternate syntax with [ ].</p>
</blockquote>
<p>The attribute value type depends on the attribute <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a> (relation or storage):</p>
<ul>
<li>If <em>attributeName</em> kind is <strong>storage</strong>: <code>.attributeName</code> returns a value of the same type as <em>attributeName</em>.</li>
<li>If <em>attributeName</em> kind is <strong>relatedEntity</strong>: <code>.attributeName</code> returns the related entity. Values of the related entity are directly available through cascading properties, for example &quot;myEntity.employer.employees[0].lastname&quot;.</li>
<li>If <em>attributeName</em> kind is <strong>relatedEntities</strong>: <code>.attributeName</code> returns a new entity selection of related entities. Duplications are removed (an unordered entity selection is returned).</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="exemplo"></a><a href="#exemplo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$myEntity </span>: cs. EmployeeEntity
 <span class="hljs-variable">$myEntity</span>:=ds. Employee.<span class="hljs-function">new</span>() <span class="hljs-comment">//Create a new entity</span>
 <span class="hljs-variable">$myEntity</span>.name:=<span class="hljs-string">"Dupont"</span> <span class="hljs-comment">// assign 'Dupont' to the 'name' attribute</span>
 <span class="hljs-variable">$myEntity</span>.firstname:=<span class="hljs-string">"John"</span> <span class="hljs-comment">//assign 'John' to the 'firstname' attribute</span>
 <span class="hljs-variable">$myEntity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//save the entity</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="clone"></a><a href="#clone" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.clone()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.clone()</strong> : 4D.Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D. Entity</td><td style="text-align:center">&lt;-</td><td>Nova entidade referenciando o registro</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-1"></a><a href="#descrição-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.clone()</code> cria em memória uma nova entidade referenciando o mesmo registro que a entidade original. Esta função permite que você atualize as entidades separadamente.</p>
<blockquote>
<p>Keep in mind that any modifications done to entities will be saved in the referenced record only when the <a href="#save"><code>.save( )</code></a> function is executed.</p>
</blockquote>
<p>Esta função só pode ser usada com entidades já salvas no banco de dados. Ele não pode ser chamado em uma entidade recém-criada (para a qual <a href="#isnew"><code>.isNew()</code></a> retorna <strong>Verdadeiro</strong>).</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-1"></a><a href="#exemplo-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp</span>; <span class="hljs-variable">$empCloned </span>: cs. EmployeeEntity
 <span class="hljs-variable">$emp</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$empCloned</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">clone</span>()

 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">//Updates done on $emp are not done on $empCloned</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="diff"></a><a href="#diff" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.diff()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.diff</strong>( <em>entityToCompare</em> : 4D. Entity { ; <em>attributesToCompare</em> : Collection } ) : Collection</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>entityToCompare</td><td>4D. Entity</td><td style="text-align:center">-&gt;</td><td>Entidade a ser comparada com a entidade original</td></tr>
<tr><td>attributesToCompare</td><td>Coleção</td><td style="text-align:center">-&gt;</td><td>Nome dos atributos a serem comparados</td></tr>
<tr><td>Resultado</td><td>Coleção</td><td style="text-align:center">&lt;-</td><td>Diferenças entre as entidades</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-2"></a><a href="#descrição-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.diff()</code> compara o conteúdo de duas entidades e retorna suas diferenças.</p>
<p>No <em>entityToCompare</em>, passe a entidade a ser comparada à entidade original.</p>
<p>Em <em>attributesToCompare</em>, pode designar atributos específicos para comparar. Se fornecida, a comparação é feita apenas nos atributos especificados. Se não for fornecida, todas as diferenças entre as entidades são devolvidas.</p>
<p>As diferenças são retornadas como uma coleção de objetos cujas propriedades são:</p>
<table>
<thead>
<tr><th>Property name</th><th>Type</th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>attributeName</td><td>String</td><td>Nome do atributo</td></tr>
<tr><td>value</td><td>any - Depende do tipo de atributo</td><td>Valor do atributo na entidade</td></tr>
<tr><td>otherValue</td><td>any - Depende do tipo de atributo</td><td>Valor do atributo em <em>entityToCompare</em></td></tr>
</tbody>
</table>
<p>Apenas atributos com valores diferentes estão incluídos na coleção. Se nenhuma diferença for encontrada, <code>.diff()</code> retorna uma coleção vazia.</p>
<p>A função se aplica para propriedades cujo <a href="/docs/pt/API/DataClassAttributeClass.html#kind">tipo</a> é <strong>de armazenamento</strong> ou <strong>relacionada a Entidade</strong>. No caso de uma entidade relacionada ter sido atualizada (ou seja, a chave estrangeira), o nome da entidade relacionada e seu nome de chave primária são retornados como propriedades <em>attributeName</em> ( value** e <em>outroValue</em> estão vazios para o nome da entidade relacionada).</p>
<p>Se uma das entidades comparadas for <strong>Null</strong>, um erro é gerado.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-1-1"></a><a href="#exemplo-1-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$diff1</span>; <span class="hljs-variable">$diff2 </span>: Collection
 employee:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"ID=1001"</span>).<span class="hljs-function">first</span>()
 <span class="hljs-variable">$clone</span>:=employee.<span class="hljs-function">clone</span>()
 employee.firstName:=<span class="hljs-string">"MARIE"</span>
 employee.lastName:=<span class="hljs-string">"SOPHIE"</span>
 employee.salary:=<span class="hljs-number">500</span>
 <span class="hljs-variable">$diff1</span>:=<span class="hljs-variable">$clone</span>.<span class="hljs-function">diff</span>(employee) <span class="hljs-comment">// All differences are returned</span>
 <span class="hljs-variable">$diff2</span>:=<span class="hljs-variable">$clone</span>.<span class="hljs-function">diff</span>(employee;New collection<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"lastName"</span>))
  <span class="hljs-comment">// Only differences on firstName and lastName are returned</span>
</code></pre>
<p>$diff1:</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Natasha"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"MARIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Locke"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"SOPHIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"salary"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">66600</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">500</span>
    }
]
<span class="hljs-variable">$diff2</span>:

[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Natasha"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"MARIE"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Locke"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"SOPHIE"</span>
    }
]
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-2"></a><a href="#exemplo-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 2</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> vCompareResult1; vCompareResult2; vCompareResult3; <span class="hljs-variable">$attributesToInspect </span>: Collection
 vCompareResult1:=New collection
 vCompareResult2:=New collection
 vCompareResult3:=New collection
 <span class="hljs-variable">$attributesToInspect</span>:=New collection

 <span class="hljs-variable">$e1</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">636</span>)
 <span class="hljs-variable">$e2</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">636</span>)

 <span class="hljs-variable">$e1</span>.firstName:=<span class="hljs-variable">$e1</span>.firstName+<span class="hljs-string">" update"</span>
 <span class="hljs-variable">$e1</span>.lastName:=<span class="hljs-variable">$e1</span>.lastName+<span class="hljs-string">" update"</span>

 <span class="hljs-variable">$c</span>:=ds. Company.<span class="hljs-function">get</span>(<span class="hljs-number">117</span>)
 <span class="hljs-variable">$e1</span>.employer:=<span class="hljs-variable">$c</span>
 <span class="hljs-variable">$e2</span>.salary:=<span class="hljs-number">100</span>

 <span class="hljs-variable">$attributesToInspect</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"firstName"</span>)
 <span class="hljs-variable">$attributesToInspect</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"lastName"</span>)

 vCompareResult1:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>)
 vCompareResult2:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>;<span class="hljs-variable">$attributesToInspect</span>)
 vCompareResult3:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>;<span class="hljs-variable">$e1</span>.<span class="hljs-function">touchedAttributes</span>())
</code></pre>
<p>vCompareResultado1 (todas as diferenças são devolvidas):</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"salary"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">33500</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">100</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employerID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">117</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">118</span>
    },
  {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employer"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"[object Entity]"</span>,<span class="hljs-comment">// Entity 117 from Company</span>
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"[object Entity]"</span><span class="hljs-comment">// Entity 118 from Company</span>
    }
]
</code></pre>
<p>vCompareResult2 (apenas diferenças em $attributesToInspect foram retornadas)</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    }
]
</code></pre>
<p>vCompareResult3 (apenas as diferenças em $e1 atributos tocados são retornadas)</p>
<pre><code class="hljs css language-4d">[
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>
    },
    {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employerID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-number">117</span>,
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">118</span>
    },
     {
        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employer"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"[object Entity]"</span>,<span class="hljs-comment">// Entity 117 from Company</span>
        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"[object Entity]"</span><span class="hljs-comment">// Entity 118 from Company</span>

    }
]
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="drop"></a><a href="#drop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.drop()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk force drop if stamp changed</code>: Força a queda mesmo se a estampa tiver mudado</td></tr>
<tr><td>Resultado</td><td>Objeto</td><td style="text-align:center">&lt;-</td><td>Resultado da operação de queda</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-3"></a><a href="#descrição-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.drop()</code>  elimina os dados contidos na entidade da datastore, da tabela relacionada com a sua Dataclass. Note-se que a entidade permanece na memória.</p>
<p>Numa aplicação multiusuário ou multiprocesso, a função <code>.drop()</code> é executada sob um mecanismo <a href="/docs/pt/ORDA/entities.html#entity-locking">&quot;optimistic lock&quot;</a> , no qual um selo de bloqueio interno é automaticamente incrementado cada vez que o registo for guardado.</p>
<p>Por padrão, se o parâmetro <em>modo</em> for omitido, a função retornará um erro (veja abaixo) se a mesma entidade tiver sido modificada (ou seja, O selo mudou) por outro processo ou usuário nesse meio tempo.</p>
<p>Caso contrário, pode passar a opção <code>dk force drop if stamp changed</code> no parâmetro <em>mode</em> : nesse caso, a entidade é abandonada mesmo que a estampa tenha sido alterada (e a chave primária continua a ser a mesma).</p>
<p><strong>Resultado</strong></p>
<p>O objecto devolvido por <code>.drop( )</code> contém as seguintes propriedades:</p>
<table>
<thead>
<tr><th>Propriedade</th><th></th><th>Type</th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>success</td><td></td><td>booleano</td><td>verdadeiro se a ação de queda for bem-sucedida, falso caso contrário.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro:</em></strong></td></tr>
<tr><td>status(*)</td><td></td><td>number</td><td>Código de erro, ver abaixo</td></tr>
<tr><td>statusText(*)</td><td></td><td>texto</td><td>Descrição do erro, ver abaixo</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro de bloqueio pessimista:</em></strong></td></tr>
<tr><td>LockKindText</td><td></td><td>texto</td><td>&quot;Bloqueado pelo registro&quot;</td></tr>
<tr><td>lockInfo</td><td></td><td>object</td><td>Informações sobre a origem do bloqueio</td></tr>
<tr><td></td><td>task_id</td><td>number</td><td>Process ID</td></tr>
<tr><td></td><td>user_name</td><td>texto</td><td>Nome de usuário de sessão na máquina</td></tr>
<tr><td></td><td>user4d_alias</td><td>texto</td><td>Pseudônimo do usuário se definido por <code>SET USER ALIAS</code>, caso contrário, nome de usuário no diretório 4D</td></tr>
<tr><td></td><td>host_name</td><td>texto</td><td>Nome da máquina</td></tr>
<tr><td></td><td>task_name</td><td>texto</td><td>Nome de processo</td></tr>
<tr><td></td><td>client_version</td><td>texto</td><td></td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro grave (erro grave pode ser tentar duplicar uma chave primária, disco cheio...):</em></strong></td></tr>
<tr><td>errors</td><td></td><td>uma coleção de objetos</td><td></td></tr>
<tr><td></td><td>message</td><td>texto</td><td>Mensagem de erro</td></tr>
<tr><td></td><td>assinatura de componentes</td><td>texto</td><td>assinatura interna do componente (ex.: &quot;dmbg&quot; significa componente da base de dados)</td></tr>
<tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr>
</tbody>
</table>
<p>(*) Os seguintes valores podem ser devolvidos nas propriedades <em>status</em> e <em>statusText</em> do objecto <em>Result</em> em caso de erro:</p>
<table>
<thead>
<tr><th>Constante</th><th>Value</th><th>Comentário</th></tr>
</thead>
<tbody>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>A entidade não existe mais nos dados. Este erro pode ocorrer nos seguintes casos:<br><li>a entidade foi descartada (o selo mudou e o espaço de memória é agora livre)</li><li>a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). Ao utilizar entity.drop( ), este erro pode ser devolvido quando usar a opção dk force drop if stamp changed. Ao usar entity.lock( ), este erro pode ser retornado quando usar a opção dk if stamp changed</li><p><strong>statusText asociado</strong>: &quot;A entidade já não existe&quot;</td></tr>
<tr><td><code>dk status locked</code></td><td>3</td><td>A entidade está bloqueada por um bloqueio pessimista.<br><strong>Associated statusText</strong>: &quot;Já bloqueado&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>Um erro grave é um erro de banco de dados de baixo nível (por exemplo, chave duplicada), um erro de hardware, etc.<br><strong>Associado statusText</strong>: &quot;Outro erro&quot;</td></tr>
<tr><td><code>dk status stamp has changed</code></td><td>2</td><td>O valor de selo interno da entidade não corresponde a uma da entidade armazenada nos dados (bloqueio otimista).<br><li>com <code>.save( )</code>: erro apenas se a opção <code>dk auto merge' não for utilizada&lt;/li&gt;&lt;li&gt;com</code>.drop( )<code>: erro apenas se a opção</code>dk force drop if stamp changed' não for utilizada</li><li>com <code>.lock( )</code>: erro apenas se a opção <code>dk reload if stamp changed</code> não for usada</li><li><strong>Associated statusText</strong>*: &quot;O carimbo mudou&quot;</li></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemplo-1-2"></a><a href="#exemplo-1-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 1</h4>
<p>Exemplo sem a opção <code>dk force drop if stamp changed</code> :</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">drop</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName) <span class="hljs-comment">//The dropped entity remains in memory</span>
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-2-1"></a><a href="#exemplo-2-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 2</h4>
<p>Exemplo com a opção<code>dk force drop if stamp changed</code>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">drop</span>(dk force drop if stamp changed)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName) <span class="hljs-comment">//The dropped entity remains in memory</span>
    :(<span class="hljs-variable">$status</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="first"></a><a href="#first" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.first()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.first()</strong>: 4D. Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D. Entity</td><td style="text-align:center">&lt;-</td><td>Referencia à primeira entidade da entity selection (Null se a seleção estiver vazia)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-4"></a><a href="#descrição-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.first()</code>  retorna uma referência à entidade na primeira posição da seleção da entidade a que a entidade pertence .</p>
<p>Se a entidade não pertence a nenhuma seleção de entidade existente (ex: <a href="#getselection">.getSelection( )</a> retorna Null), a função retorna um valor nulo.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-3"></a><a href="#exemplo-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$firstEmployee </span>: cs. EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">2</span>]
 <span class="hljs-variable">$firstEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">first</span>() <span class="hljs-comment">//$firstEmployee is the first entity of the $employees entity selection</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fromobject"></a><a href="#fromobject" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.fromObject()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.fromObject</strong>( <em>filler</em> : Object )</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>filler</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Objeto do qual preencher a entidade</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-5"></a><a href="#descrição-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.fromObject()</code> preenche uma entidade com o conteúdo de <em>filler</em> .</p>
<blockquote>
<p>This function modifies the original entity.</p>
</blockquote>
<p>O mapeamento entre o objecto e a entidade é feito sobre os nomes dos atributos:</p>
<ul>
<li>If a property of the object does not exist in the dataclass, it is ignored.</li>
<li>Data types must be equivalent. If there is a type mismatch between the object and dataclass, 4D tries to convert the data whenever possible (see <a href="/docs/pt/Concepts/data-types.html#converting-data-types"><code>Converting data types</code></a>), otherwise the attribute is left untouched.</li>
<li>The primary key can be given as is or with a &quot;__KEY&quot; property (filled with the primary key value). If it does not already exist in the dataclass, the entity is created with the given value when <a href="#save">.save()</a> is called. If the primary key is not given, the entity is created and the primary key value is assigned with respect to database rules. The auto-increment is only computed if the primary key is null.</li>
</ul>
<p><em>filler</em> pode tratar de uma entidade relacionada sob as seguintes condições:</p>
<ul>
<li><em>filler</em> contains the foreign key itself, or</li>
<li><em>filler</em> contains a property object with the same name as the related entity, containing a single property named &quot;__KEY&quot;.</li>
<li>if the related entity does not exist, it is ignored.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="exemplo-4"></a><a href="#exemplo-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<p>Com o seguinte objeto $o:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mary"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Smith"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">36500</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1958-10-27T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: true,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">411</span>,<span class="hljs-comment">// relatedEntity given with PK</span>
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span> <span class="hljs-comment">// relatedEntity given with PK</span>
}
</code></pre>
<p>O código a seguir criará uma entidade com gerente e entidades relacionadas ao empregador.</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$o </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$entity </span>: cs. EmpEntity
 <span class="hljs-variable">$entity</span>:=ds. Emp.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$o</span>)
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
</code></pre>
<p>Você também poderia usar uma entidade relacionada dada como um objeto:</p>
<pre><code class="hljs css language-4d">
{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Marie"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Lechat"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">68400</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1971-09-03T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"employer"</span>: {<span class="hljs-comment">// relatedEntity given as an object</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"21"</span>
    },
    <span class="hljs-string">"manager"</span>: {<span class="hljs-comment">// relatedEntity given as an object</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"411"</span>
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getdataclass"></a><a href="#getdataclass" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getDataClass()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17 R5</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getDataClass()</strong> : 4D. DataClass</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D. DataClass</td><td style="text-align:center">&lt;-</td><td>Objeto DataClass ao qual a entidade pertence</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-6"></a><a href="#descrição-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.getDataClass()</code> retorna o dataclass da entidade. Esta função é útil para configurar o código genérico.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-5"></a><a href="#exemplo-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<p>O seguinte código genérico duplica qualquer entidade:</p>
<pre><code class="hljs css language-4d">  <span class="hljs-comment">//duplicate_entity method </span>
  <span class="hljs-comment">//duplicate_entity($entity) </span>

 #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$entity </span>: 4D. Entity)<span class="hljs-keyword">  
 var</span> <span class="hljs-variable">$entityNew </span>: 4D. Entity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object

 <span class="hljs-variable">$entityNew</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">new</span>() <span class="hljs-comment">//create a new entity in the parent dataclass</span>
 <span class="hljs-variable">$entityNew</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$entity</span>.<span class="hljs-function">toObject</span>()) <span class="hljs-comment">//get all attributes</span>
 <span class="hljs-variable">$entityNew</span>[<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getInfo</span>().primaryKey]:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//reset the primary key</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entityNew</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//save the duplicated entity</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getkey"></a><a href="#getkey" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getKey()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Text<br><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Integer</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk key as string</code>: a chave primária se devolve como uma string, sem importar o tipo de chave primária</td></tr>
<tr><td>Resultado</td><td>Texto</td><td style="text-align:center">&lt;-</td><td>Valor do texto chave primária da entidade</td></tr>
<tr><td>Resultado</td><td>Integer</td><td style="text-align:center">&lt;-</td><td>Valor da chave primária numérica da entidade</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-7"></a><a href="#descrição-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>O <code>.getKey()</code> função devolve o valor chave primário da entidade.</p>
<p>As chaves primárias podem ser números (Inteiro) ou strings. Você pode &quot;forçar&quot; o valor da chave primária retornado para ser uma string, independentemente do tipo de chave primária real, passando a <code>dk key como string</code> opção no parâmetro <em>modo</em>.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-6"></a><a href="#exemplo-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The primary key is "</span>+<span class="hljs-variable">$employee</span>.<span class="hljs-function">getKey</span>(dk key as string))
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getremotecontextattributes"></a><a href="#getremotecontextattributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getRemoteContextAttributes()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v19R5</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getRemoteContextAttributes()</strong> : Text</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>result</td><td>Texto</td><td>&lt;-</td><td>Context attributes linked to the entity, separated by a comma</td></tr>
</tbody>
</table>
<blockquote>
<p><strong>Advanced mode:</strong> This function is intended for developers who need to customize ORDA default features for specific configurations. In most cases, you will not need to use it.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="descrição-8"></a><a href="#descrição-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>The <code>.getRemoteContextAttributes()</code> functionreturns information about the optimization context used by the entity .</p>
<p>If there is no <a href="/docs/pt/ORDA/datastores.html#clientserver-optimization">optimization context</a> for the entity, the function returns an empty Text.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-7"></a><a href="#exemplo-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D. DataStoreImplementation<span class="hljs-keyword">
var</span> <span class="hljs-variable">$address </span>: cs. AddressEntity<span class="hljs-keyword">
var</span> <span class="hljs-variable">$p </span>: cs. PersonsEntity<span class="hljs-keyword">
var</span> <span class="hljs-variable">$contextA </span>: Object<span class="hljs-keyword">
var</span> <span class="hljs-variable">$info </span>: Text<span class="hljs-keyword">
var</span> <span class="hljs-variable">$text </span>: Text

<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)

<span class="hljs-variable">$contextA</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>; <span class="hljs-string">"contextA"</span>)

<span class="hljs-variable">$address</span>:=<span class="hljs-variable">$ds</span>. Address.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>; <span class="hljs-variable">$contextA</span>)
<span class="hljs-variable">$text</span>:=<span class="hljs-string">""</span><span class="hljs-keyword"> For each</span> (<span class="hljs-variable">$p</span>; <span class="hljs-variable">$address</span>.persons)
    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$p</span>.firstname+<span class="hljs-string">" "</span>+<span class="hljs-variable">$p</span>.lastname<span class="hljs-keyword"> End for each</span> 

<span class="hljs-variable">$info</span>:=<span class="hljs-variable">$address</span>.<span class="hljs-function">getRemoteContextAttributes</span>()

<span class="hljs-comment">//$info = "persons,persons.lastname,persons.firstname"</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="veja-também"></a><a href="#veja-também" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Veja também</h4>
<p><a href="/docs/pt/API/EntitySelectionClass.html#getRemoteContextAttributes">EntitySelection.getRemoteContextAttributes()</a><br/><a href="/docs/pt/API/DataStoreClass.html#clearallremotecontexts">.clearAllRemoteContexts()</a><br/><a href="/docs/pt/API/DataStoreClass.html#getremotecontextinfo">.getRemoteContextInfo()</a><br/><a href="/docs/pt/API/DataStoreClass.html#getallremotecontexts">.getAllRemoteContexts()</a><br/><a href="/docs/pt/API/DataStoreClass.html#setremotecontextinfo">.setRemoteContextInfo()</a></p>
<h2><a class="anchor" aria-hidden="true" id="getselection"></a><a href="#getselection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getSelection()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getSelection()</strong>: 4D. EntitySelection</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D. EntitySelection</td><td style="text-align:center">&lt;-</td><td>Seleção de entidade a que pertence a entidade (ull se não for encontrado)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-9"></a><a href="#descrição-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.getSelection()</code> retorna a seleção da entidade a que a entidade pertence .</p>
<p>Se a entidade não pertence à seleção de uma entidade, a função retorna Null.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-8"></a><a href="#exemplo-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"> var $emp : cs.ColaboradoreEntity
 var $employees; $employees2 : cs.FuncionárioSeleção
 $emp:=ds.Empregado. et(672) // Esta entidade não pertence a nenhuma entidade selecionada
 $employees:=$emp. etSelection() // $employees é Nulo

 $employees2:=ds. Colaborador. uery("Sobrenome=:1"; Punir") ///Esta seleção de entidade contém 6 entidades
 $emp:=$employees2[0]  // Esta entidade pertence à uma seleção de entidade

 ALERT("A seleção da entidade contém "+String($emp. entidades etSelection().length)+"")
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="getstamp"></a><a href="#getstamp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.getStamp()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.getStamp()</strong> : Integer</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>Integer</td><td style="text-align:center">&lt;-</td><td>Estampa da entidade (0 se a entidade foi criada)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-10"></a><a href="#descrição-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.getStamp()</code>  retorna o valor atual do selo da entidade.</p>
<p>O selo interno é automaticamente incrementado por 4D cada vez que a entidade é gravada. Gere o acesso de usuários simultâneos e modificações às mesmas entidades (ver <a href="/docs/pt/ORDA/entities.html#entity-locking"><strong>bloqueio de entidades</strong></a>).</p>
<blockquote>
<p>Para uma nova entidade (nunca salva), a função retorna 0. Para saber se uma entidade acabou de ser criada, recomenda-se a utilização de <a href="#isnew">.isNew()</a>.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="exemplo-9"></a><a href="#exemplo-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$stamp </span>: Integer

 <span class="hljs-variable">$entity</span>:=ds. Employee.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
 <span class="hljs-variable">$stamp</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getStamp</span>() <span class="hljs-comment">//$stamp=1</span>

 <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Wesson"</span>
 <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()
 <span class="hljs-variable">$stamp</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getStamp</span>() <span class="hljs-comment">//$stamp=2</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="indexof"></a><a href="#indexof" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.indexOf()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.indexOf</strong>( { <em>entitySelection</em> : 4D. EntitySelection } ) : Integer</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>entitySelection</td><td>4D. EntitySelection</td><td style="text-align:center">-&gt;</td><td>A posição da entidade é dada de acordo com a selecção desta entidade</td></tr>
<tr><td>Resultado</td><td>Integer</td><td style="text-align:center">&lt;-</td><td>Posição da entidade numa selecção de entidade</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-11"></a><a href="#descrição-11" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.indexOf()</code> retorna a posição da entidade em uma seleção de entidade.</p>
<p>Por padrão, se o parâmetro <em>entitySelection</em> for omitido, a função retorna a posição da entidade dentro de sua própria seleção de entidade. Caso contrário, ele retorna a posição da entidade dentro da <em>entitySelection</em>.</p>
<p>O valor resultante é incluído entre 0 e o comprimento da selecção da entidade -1.</p>
<ul>
<li>If the entity does not have an entity selection or does not belong to <em>entitySelection</em>, the function returns -1.</li>
<li>If <em>entitySelection</em> is Null or does not belong to the same dataclass as the entity, an error is raised.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="exemplo-10"></a><a href="#exemplo-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta entity selection contiene 3 entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">1</span>] <span class="hljs-comment">//Esta entidade pertence a uma entity selection</span>
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"O índice da entidade em sua própria seleção de entidade é "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employee</span>.<span class="hljs-function">indexOf</span>())) <span class="hljs-comment">//1</span>

 <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>) <span class="hljs-comment">//Esta entidade não pertence a uma seleção de entidades</span>
<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"O índice da entidade é "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employee</span>.<span class="hljs-function">indexOf</span>())) <span class="hljs-comment">// -1</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="isnew"></a><a href="#isnew" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.isNew()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.isNew()</strong> : Boolean</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>Booleano</td><td style="text-align:center">&lt;-</td><td>É verdade se a entidade acabou de ser criada e ainda não foi salva. Caso contrário, Falso.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-12"></a><a href="#descrição-12" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.isNew()</code>  retorna True se a entidade à qual é aplicada foi criada e ainda não foi salva no datastore&lt;! - END REF --&gt;. senão devolve false</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-11"></a><a href="#exemplo-11" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs. EmployeeEntity

 <span class="hljs-variable">$emp</span>:=ds. Employee.<span class="hljs-function">new</span>()<span class="hljs-keyword">

 If</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">isNew</span>())
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"This is a new entity"</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="last"></a><a href="#last" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.last()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.last()</strong> : 4D. Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D. Entity</td><td style="text-align:center">&lt;-</td><td>Referência para a última entidade de uma seleção de entidade (Null se não for encontrado)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-13"></a><a href="#descrição-13" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.last()</code>  retorna uma referência à entidade na última posição da seleção da entidade a que a entidade pertence .</p>
<p>Se a entidade não pertence a nenhuma seleção de entidade existente (ex: <a href="#getselection">.getSelection( )</a> retorna Null), a função retorna um valor nulo.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-12"></a><a href="#exemplo-12" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.ColaboradoreSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$lastEmployee </span>: cs.ColaboradoreEntity
 <span class="hljs-variable">$employees</span>:=ds.Empregado.<span class="hljs-function"> uery</span>(<span class="hljs-string">"Sobrenome = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta seleção da entidade contém 3 entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$lastEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function"> ast</span>() <span class="hljs-comment">//$lastEmployee é a última entidade da seleção de $employees entidade</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="lock"></a><a href="#lock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.lock()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.lock</strong>( { <em>mode</em> : Integer } ) : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk reload if stamp changed</code>: Recarregar antes de bloquear se o carimbo for alterado</td></tr>
<tr><td>Resultado</td><td>Objeto</td><td style="text-align:center">&lt;-</td><td>Resultado da operação de bloqueio</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-14"></a><a href="#descrição-14" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.lock()</code> coloca um bloqueio pessimista no registro referenciado pela entidade. O bloqueio de <a href="/docs/pt/ORDA/entities.html#entity-locking">é definido</a> para um registro e todas as referências da entidade no processo atual.</p>
<p>Outros processos verão este registro como bloqueado (o resultado. <code>a propriedade</code> uccess conterá Falso se eles tentarem bloquear a mesma entidade usando esta função). Só as funções executadas na sessão de &quot;bloqueio&quot; são permitidas para editar e guardar os atributos da entidade. A entidade pode ser carregada como apenas leitura por outras sessões, mas não serão capazes de introduzir e guardar valores.</p>
<p>A record locked by <code>.lock()</code> is unlocked:</p>
<ul>
<li>when the <a href="#unlock"><code>unlock()</code></a> function is called on a matching entity in the same process</li>
<li>automatically, when it is no longer referenced by any entities in memory. For example, if the lock is put only on one local reference of an entity, the entity is unlocked when the function ends. As long as there are references to the entity in memory, the record remains locked.</li>
</ul>
<blockquote>
<p>An entity can also be <a href="/docs/pt/REST/lock.html">locked by a REST session</a>, in which case it can only be unlocked by the session.</p>
</blockquote>
<p>Por padrão, se o parâmetro <em>modo</em> for omitido, a função retornará um erro (veja abaixo) se a mesma entidade tiver sido modificada (ou seja, O selo mudou) por outro processo ou usuário nesse meio tempo.</p>
<p>Caso contrário, você pode passar o parâmetro<code>dk reload if stamp changed</code> no parâmetro <em>mode</em> : neste caso, nenhum erro é retornado e a entidade é recarregada quando o selo mudou (se a entidade ainda existir e a chave primária ainda for a mesma).</p>
<p><strong>Resultado</strong></p>
<p>O objeto retornado por <code>.lock( )</code> contém as seguintes propriedades:</p>
<table>
<thead>
<tr><th>Propriedade</th><th></th><th>Type</th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>success</td><td></td><td>booleano</td><td>true se a ação de bloqueio for bem sucedida (ou se a entidade já estiver bloqueada no processo atual), falso caso contrário.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponível apenas se a opção<code>dk reload if stamp changed</code> for usada:</em></strong></td></tr>
<tr><td><strong>wasReloaded</strong></td><td></td><td>booleano</td><td>verdadeiro se a entidade foi recarregada com sucesso, falso caso contrário.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro:</em></strong></td></tr>
<tr><td>status(*)</td><td></td><td>number</td><td>Código de erro, ver abaixo</td></tr>
<tr><td>statusText(*)</td><td></td><td>texto</td><td>Descrição do erro, ver abaixo</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro de bloqueio pessimista:</em></strong></td></tr>
<tr><td>lockKindText</td><td></td><td>texto</td><td>&quot;Locked by record&quot; if locked by a 4D process, &quot;Locked by session&quot; if locked by a REST session</td></tr>
<tr><td>lockInfo</td><td></td><td>object</td><td>Information about the lock origin. Returned properties depend on the lock origin (4D process or REST session).</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only for a 4D process lock:</em></strong></td></tr>
<tr><td></td><td>task_id</td><td>number</td><td>ID do processo</td></tr>
<tr><td></td><td>user_name</td><td>texto</td><td>Nome de usuário de sessão na máquina</td></tr>
<tr><td></td><td>user4d_alias</td><td>texto</td><td>Nome ou apelido do usuário 4D</td></tr>
<tr><td></td><td>user4d_id</td><td>number</td><td>Id do usuário no diretório do banco de dados 4D</td></tr>
<tr><td></td><td>host_name</td><td>texto</td><td>Nome da máquina</td></tr>
<tr><td></td><td>task_name</td><td>texto</td><td>Nome de processo</td></tr>
<tr><td></td><td>client_version</td><td>texto</td><td>Version of the client</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only for a REST session lock:</em></strong></td></tr>
<tr><td></td><td>host</td><td>texto</td><td>URL that locked the entity (e.g. &quot;<a href="http://www.myserver.com">www.myserver.com</a>&quot;)</td></tr>
<tr><td></td><td>IPAddr</td><td>texto</td><td>IP address of the locker (e.g. &quot;127.0.0.1&quot;)</td></tr>
<tr><td></td><td>userAgent</td><td>texto</td><td>userAgent of the locker (e.g. Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36&quot;)</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro grave</em></strong> (a chave primária já existir, o disco estar cheio...):</td></tr>
<tr><td>errors</td><td></td><td>uma coleção de objetos</td><td></td></tr>
<tr><td></td><td>message</td><td>texto</td><td>Mensagem de erro</td></tr>
<tr><td></td><td>assinatura de componentes</td><td>texto</td><td>assinatura interna do componente (ex.: &quot;dmbg&quot; significa componente da base de dados)</td></tr>
<tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr>
</tbody>
</table>
<p>(*) Os seguintes valores podem ser devolvidos nas propriedades <em>status</em> e <em>statusText</em> do objecto <em>Result</em> em caso de erro:</p>
<table>
<thead>
<tr><th>Constante</th><th>Value</th><th>Comentário</th></tr>
</thead>
<tbody>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>A entidade não existe mais nos dados. Este erro pode ocorrer nos seguintes casos:<li>a entidade foi descartada (o selo mudou e o espaço de memória é agora livre)</li><li>a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). Ao usar <code>.drop( )</code>, este erro pode ser retornado quando a opção &quot;dk force drop if stamp changed&quot; for usada. Ao usar <code>.lock( )</code>, este erro pode ser retornado quando a opção `dk reload if stamp changed&quot; for usado</li><br><strong>statusText asociado</strong>: &quot;A entidade já não existe&quot;</td></tr>
<tr><td><code>dk status locked</code></td><td>3</td><td>A entidade está fechada por uma fechadura pessimista.<p><p><strong>Associado statusText</strong>: &quot;Já bloqueado&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>Um erro grave é um erro de banco de dados de baixo nível (por exemplo, chave duplicada), um erro de hardware, etc.<p><p><strong>Texto status associado</strong>: &quot;Outro erro&quot;</td></tr>
<tr><td><code>dk status stamp has changed</code></td><td>2</td><td>O valor de selo interno da entidade não corresponde a uma da entidade armazenada nos dados (bloqueio otimista).<li>com <code>.save( )</code>: erro apenas se a opção <code>dk auto merge' não for utilizada&lt;/li&gt;&lt;li&gt;com</code>.drop( )<code>: erro apenas se a opção</code>dk force drop if stamp changed' não for utilizada</li><li>com <code>.lock( )</code>: erro apenas se a opção <code>dk reload if stamp changed</code> não for usada</li><br><strong>Associated statusText</strong>: &quot;Stamp has changed&quot;</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemplo-1-3"></a><a href="#exemplo-1-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 1</h4>
<p>Exemplo com erro:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employee</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">716</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have locked "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName)
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-2-2"></a><a href="#exemplo-2-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 2</h4>
<p>Exemplo com <code>dk reload se o selo mudou a opção</code>:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object
 <span class="hljs-variable">$employee</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">717</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>(dk reload if stamp changed)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have locked "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName)
    :(<span class="hljs-variable">$status</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="next"></a><a href="#next" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.next()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.next()</strong> : 4D. Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D. Entity</td><td style="text-align:center">&lt;-</td><td>Referência para a próxima entidade de uma seleção de entidade (Null se não for encontrado)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-15"></a><a href="#descrição-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.next()</code>  retorna uma referência à próxima entidade na seleção da entidade à qual a entidade pertence.</p>
<p>Se a entidade não pertencer a nenhuma seleção de entidade existente (ex: <a href="#getselection">.getSelection()</a> retorna Null), a função retorna um valor nulo.</p>
<p>Se não houver entidade seguinte válida na selecção da entidade (ou seja, se estiver na última entidade da selecção), a função devolve Null. Se a entidade seguinte tiver sido abandonada, a função devolve a entidade válida seguinte (e eventualmente Nula).</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-13"></a><a href="#exemplo-13" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$nextEmployee </span>: cs. EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta seleção de entidade contém três entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$nextEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">next</span>() <span class="hljs-comment">//$nextEmployee é a segunda entidade da seleção de entidades $employees</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="previous"></a><a href="#previous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.previous()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.previous()</strong>  : 4D. Entity</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>4D. Entity</td><td style="text-align:center">&lt;-</td><td>Referência a entidade anterior na seleção da entidade (Null se não for encontrado)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-16"></a><a href="#descrição-16" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.previous()</code>  retorna uma referência à entidade anterior na seleção da entidade a que a entidade pertence .</p>
<p>Se a entidade não pertencer a nenhuma seleção de entidade existente (ex: <a href="#getselection">.getSelection()</a> retorna Null), a função retorna um valor nulo.</p>
<p>Se não houver nenhuma entidade anterior válida na seleção da entidade (ou seja, você está na primeira entidade da seleção), a função retorna Null. Se a entidade anterior foi abandonada, a função retorna a entidade válida anterior (e eventualmente Null).</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-14"></a><a href="#exemplo-14" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$previousEmployee </span>: cs. EmployeeEntity
 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Esta seleção de entidades contém 3 entidades</span>
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">1</span>]
 <span class="hljs-variable">$previousEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">previous</span>() <span class="hljs-comment">//$previousEmployee é a primeira entidade da seleção de entidades $employees</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="reload-"></a><a href="#reload-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.reload( )</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.reload()</strong> : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>Objeto</td><td style="text-align:center">&lt;-</td><td>Objeto de estado</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-17"></a><a href="#descrição-17" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>A função <code>.reload()</code> recarrega o conteúdo da entidade na memória&lt;! - END REF --&gt;, de acordo com as informações armazenadas na tabela relacionadas ao dataclass no datastore. A recarga só é feita se a entidade ainda existir com a mesma chave primária.</p>
<p><strong>Resultado</strong></p>
<p>O objeto retornado por <code>.reload( )</code> contém as seguintes propriedades:</p>
<table>
<thead>
<tr><th>Propriedade</th><th>Type</th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>success</td><td>booleano</td><td>Verdadeiro se a ação de recarga for bem-sucedida, Falso caso contrário.<p><p><strong><em>Disponível apenas em caso de erro</em></strong>:</td></tr>
<tr><td>status(*)</td><td>number</td><td>Código de erro, ver abaixo</td></tr>
<tr><td>statusText(*)</td><td>texto</td><td>Descrição do erro, ver abaixo</td></tr>
</tbody>
</table>
<p>(*) Os seguintes valores podem ser devolvidos nas propriedades <em>status</em> e <em>statusText</em> do objecto <em>Result</em> em caso de erro:</p>
<table>
<thead>
<tr><th>Constante</th><th>Value</th><th>Comentário</th></tr>
</thead>
<tbody>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>A entidade não existe mais nos dados. Este erro pode ocorrer nos seguintes casos:<br><li>a entidade foi descartada (o selo mudou e o espaço de memória é agora livre)</li><li>a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). a entidade foi eliminada e substituída por outra com outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). Ao usar <code>.lock( )</code>, este erro pode ser retornado quando a opção `dk reload if stamp changed&quot; for usado</li><br><strong><em>statusText associado</em></strong>: &quot;a entidade já não existe&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>Um erro grave é um erro de banco de dados de baixo nível (por exemplo, chave duplicada), um erro de hardware, etc.<br><strong><em>Texto status associado</em></strong>: &quot;Outro erro&quot;</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemplo-15"></a><a href="#exemplo-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$result </span>: Object

 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Hollis"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$employee</span>.firstName:=<span class="hljs-string">"Mary"</span>
 <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">reload</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$result</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Reload has been done"</span>)
    :(<span class="hljs-variable">$result</span>.status=dk status entity does not exist anymore)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"The entity has been dropped"</span>)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="save"></a><a href="#save" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.save()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.save</strong>( { <em>mode</em> : Integer } ) : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk auto merge</code>: Permite o modo de fusão automática</td></tr>
<tr><td>Resultado</td><td>Objeto</td><td style="text-align:center">&lt;-</td><td>Resultado da operação de salvamento</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-18"></a><a href="#descrição-18" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>The <code>.save()</code> function saves the changes made to the entity in the table related to its dataClass. You must call this method after creating or modifying an entity if you want to save the changes made to it.</p>
<p>The save operation is executed only if at least one entity attribute has been &quot;touched&quot; (see the <a href="#touched"><code>.touched()</code></a> and <a href="#touchedattributes"><code>.touchedAttributes()</code></a> functions). Otherwise, the function does nothing (the trigger is not called).</p>
<p>In a multi-user or multi-process application, the <code>.save()</code> function is executed under an <a href="/docs/pt/ORDA/entities.html#entity-locking">&quot;optimistic lock&quot;</a> mechanism, wherein an internal locking stamp is automatically incremented each time the record is saved.</p>
<p>By default, if the <em>mode</em> parameter is omitted, the method will return an error (see below) whenever the same entity has been modified by another process or user in the meantime, no matter the modified attribute(s).</p>
<p>Otherwise, you can pass the <code>dk auto merge</code> option in the <em>mode</em> parameter: when the automatic merge mode is enabled, a modification done concurrently by another process/user on the same entity but on a different attribute will not result in an error. The resulting data saved in the entity will be the combination (the &quot;merge&quot;) of all non-concurrent modifications (if modifications were applied to the same attribute, the save fails and an error is returned, even with the auto merge mode).</p>
<blockquote>
<p>The automatic merge mode is not available for attributes of Picture, Object, and Text type when stored outside of the record. Concurrent changes in these attributes will result in a <code>dk status stamp has changed</code> error.</p>
</blockquote>
<p><strong>Resultado</strong></p>
<p>The object returned by <code>.save()</code> contains the following properties:</p>
<table>
<thead>
<tr><th>Propriedade</th><th></th><th>Type</th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>success</td><td></td><td>booleano</td><td>True if the save action is successful, False otherwise.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only if <code>dk auto merge</code> option is used</em></strong>:</td></tr>
<tr><td>autoMerged</td><td></td><td>booleano</td><td>True if an auto merge was done, False otherwise.</td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro</em></strong>:</td></tr>
<tr><td>status</td><td></td><td>number</td><td>Error code, <a href="#status-and-statustext">see below</a></td></tr>
<tr><td>statusText</td><td></td><td>texto</td><td>Description of the error, <a href="#status-and-statustext">see below</a></td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of pessimistic lock error</em></strong>:</td></tr>
<tr><td>lockKindText</td><td></td><td>texto</td><td>&quot;Bloqueado pelo registro&quot;</td></tr>
<tr><td>lockInfo</td><td></td><td>object</td><td>Informações sobre a origem do bloqueio</td></tr>
<tr><td></td><td>task_id</td><td>number</td><td>Process ID</td></tr>
<tr><td></td><td>user_name</td><td>texto</td><td>Nome de usuário de sessão na máquina</td></tr>
<tr><td></td><td>user4d_alias</td><td>texto</td><td>Pseudônimo do usuário se definido por <code>SET USER ALIAS</code>, caso contrário, nome de usuário no diretório 4D</td></tr>
<tr><td></td><td>host_name</td><td>texto</td><td>Nome da máquina</td></tr>
<tr><td></td><td>task_name</td><td>texto</td><td>Nome de processo</td></tr>
<tr><td></td><td>client_version</td><td>texto</td><td></td></tr>
<tr><td></td><td></td><td></td><td><strong><em>Available only in case of serious error</em></strong> (serious error - can be trying to duplicate a primary key, disk full...):</td></tr>
<tr><td>errors</td><td></td><td>uma coleção de objetos</td><td></td></tr>
<tr><td></td><td>message</td><td>texto</td><td>Mensagem de erro</td></tr>
<tr><td></td><td>componentSignature</td><td>texto</td><td>Internal component signature (e.g. &quot;dmbg&quot; stands for the database component)</td></tr>
<tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="status-and-statustext"></a><a href="#status-and-statustext" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>status and statusText</h5>
<p>The following values can be returned in the <code>status</code> and <code>statusText</code> properties of Result object in case of error:</p>
<table>
<thead>
<tr><th>Constante</th><th>Value</th><th>Comentário</th></tr>
</thead>
<tbody>
<tr><td><code>dk status automerge failed</code></td><td>6</td><td>(Only if the <code>dk auto merge</code> option is used) The automatic merge option failed when saving the entity.<p><p><strong>Associated statusText</strong>: &quot;Auto merge failed&quot;</td></tr>
<tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>A entidade não existe mais nos dados. Este erro pode ocorrer nos seguintes casos:<br><li>a entidade foi descartada (o selo mudou e o espaço de memória é agora livre)</li><li>a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). a entidade foi eliminada e substituída por outra com outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). Ao usar <code>.lock( )</code>, este erro pode ser retornado quando a opção `dk reload if stamp changed&quot; for usado</li><br><strong>Associated statusText</strong>: &quot;Entity doesnot exist anymore&quot;</td></tr>
<tr><td><code>dk status locked</code></td><td>3</td><td>A entidade está fechada por uma fechadura pessimista.<p><p><strong>Associado statusText</strong>: &quot;Já bloqueado&quot;</td></tr>
<tr><td><code>dk status serious error</code></td><td>4</td><td>Um erro grave é um erro de banco de dados de baixo nível (por exemplo, chave duplicada), um erro de hardware, etc.<p><p><strong>Texto status associado</strong>: &quot;Outro erro&quot;</td></tr>
<tr><td><code>dk status stamp has changed</code></td><td>2</td><td>O valor de selo interno da entidade não corresponde a uma da entidade armazenada nos dados (bloqueio otimista).<br><li>com <code>.save( )</code>: erro apenas se a opção <code>dk auto merge' não for utilizada&lt;/li&gt;&lt;li&gt;com</code>.drop( )<code>: erro apenas se a opção</code>dk force drop if stamp changed' não for utilizada</li><li>com <code>.lock( )</code>: erro apenas se a opção <code>dk reload if stamp changed</code> não for usada</li><br><strong>Associated statusText</strong>: &quot;Stamp has changed&quot;</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemplo-1-4"></a><a href="#exemplo-1-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 1</h4>
<p>Creating a new entity:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity
 <span class="hljs-variable">$employee</span>:=ds. Employee.<span class="hljs-function">new</span>()
 <span class="hljs-variable">$employee</span>.firstName:=<span class="hljs-string">"Mary"</span>
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Smith"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 If</span>(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Employee created"</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-2-3"></a><a href="#exemplo-2-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 2</h4>
<p>Updating an entity without <code>dk auto merge</code> option:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection
 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Mac Arthur"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Employee updated"</span>)
    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-3-1"></a><a href="#exemplo-3-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 3</h4>
<p>Updating an entity with <code>dk auto merge</code> option:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">

 var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$employees </span>: cs. EmployeeSelection

 <span class="hljs-variable">$employees</span>:=ds. Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>)
 <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>()
 <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Mac Arthur"</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>(dk auto merge)<span class="hljs-keyword">
 Case of</span>
    :(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Employee updated"</span>)
    :(<span class="hljs-variable">$status</span>.status=dk status automerge failed)
<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword">
 End case</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="toobject"></a><a href="#toobject" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.toObject()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.toObject</strong>() : Object<br><strong>.toObject</strong>( <em>filterString</em> : Text { ; <em>options</em> : Integer}  ) : Object<br><strong>.toObject</strong>( <em>filterCol</em> : Collection { ; <em>options</em> : Integer } ) : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>filterString</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Attribute(s) to extract (comma-separated string)</td></tr>
<tr><td>filterCol</td><td>Coleção</td><td style="text-align:center">-&gt;</td><td>Collection of attribute(s) to extract</td></tr>
<tr><td>options</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk with primary key</code>: adds the _KEY property;<br><code>dk with stamp</code>: adds the _STAMP property</td></tr>
<tr><td>Resultado</td><td>Objeto</td><td style="text-align:center">&lt;-</td><td>Object built from the entity</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-19"></a><a href="#descrição-19" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>The <code>.touchedAttributes()</code> function returns the names of the attributes that have been modified since the entity was loaded into memory.</p>
<p>If no filter is specified, or if the <em>filterString</em> parameter contains an empty string or &quot;*&quot;, the returned object will contain:</p>
<ul>
<li>all storage entity attributes</li>
<li>attributes of the <code>relatedEntity</code> <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a>: you get a property with the same name as the related entity (name of the many-to-one link). Attribute is extracted with the simple form.</li>
<li>attributes of the <code>relatedEntities</code> <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a>: attribute is not returned.</li>
</ul>
<p>In the first parameter, you pass the entity attribute(s) to extract. Pode passar:</p>
<ul>
<li><em>filterString</em>: a string with property paths separated with commas: &quot;propertyPath1, propertyPath2, ...&quot;, or</li>
<li><em>filterCol</em>: a collection of strings: [&quot;propertyPath1&quot;,&quot;propertyPath2&quot;;...]</li>
</ul>
<p>If a filter is specified for attributes of the relatedEntity <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a>:</p>
<ul>
<li>propertyPath = &quot;relatedEntity&quot; -&gt; it is extracted with simple form: an object with property __KEY (primary key).</li>
<li>propertyPath = &quot;relatedEntity.*&quot; -&gt; all the properties are extracted</li>
<li>propertyPath = &quot;relatedEntity.propertyName1; relatedEntity.propertyName2; ...&quot; -&gt; only those properties are extracted</li>
</ul>
<p>If a filter is specified for attributes of the relatedEntities <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a>:</p>
<ul>
<li>propertyPath = &quot;relatedEntities.*&quot; -&gt; all the properties are extracted</li>
<li>propertyPath = &quot;relatedEntities.propertyName1; relatedEntities.propertyName2; ...&quot; -&gt; only those properties are extracted</li>
</ul>
<p>In the <em>options</em> parameter, you can pass the <code>dk with primary key</code> and/or<code>dk with stamp</code> selector(s) to add the entity's primary keys and/or stamps in extracted objects.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-1-5"></a><a href="#exemplo-1-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 1</h4>
<p>The following structure will be used throughout all examples of this section:</p>
<p><img src="/docs/assets/en/API/dataclassAttribute4.png" alt=""></p>
<p>Without filter parameter:</p>
<pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>()
</code></pre>
<p>Retorna:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"ID"</span>: <span class="hljs-number">413</span>,
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
    <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
    <span class="hljs-string">"extra"</span>: null,
    <span class="hljs-string">"employer"</span>: { <span class="hljs-comment">// relatedEntity extracted with simple form</span>
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    },
    <span class="hljs-string">"manager"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-2-4"></a><a href="#exemplo-2-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 2</h4>
<p>Extracting the primary key and the stamp:</p>
<pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">""</span>;dk with primary key+dk with stamp)
</code></pre>
<p>Retorna:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>,
   <span class="hljs-string">"__STAMP"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"ID"</span>: <span class="hljs-number">413</span>,
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,
    <span class="hljs-string">"salary"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,
    <span class="hljs-string">"woman"</span>: false,
    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,
    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
    <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
    <span class="hljs-string">"extra"</span>: null,
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    },
    <span class="hljs-string">"manager"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-3-2"></a><a href="#exemplo-3-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 3</h4>
<p>Expanding all the properties of <code>relatedEntities</code>:</p>
<pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"directReports.*"</span>)
</code></pre>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"directReports"</span>: [
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">418</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">44800</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1970-10-02T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: true,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        },
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">419</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Drew"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Caudill"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">41000</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2030-01-12T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: false,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        },
        {
            <span class="hljs-string">"ID"</span>: <span class="hljs-number">420</span>,
            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Nathan"</span>,
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gomes"</span>,
            <span class="hljs-string">"salary"</span>: <span class="hljs-number">46300</span>,
            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2010-05-29T00:00:00.000Z"</span>,
            <span class="hljs-string">"woman"</span>: false,
            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,
            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,
            <span class="hljs-string">"extra"</span>: null,
            <span class="hljs-string">"employer"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
            },
            <span class="hljs-string">"manager"</span>: {
                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>
            }
        }
    ]
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-4-1"></a><a href="#exemplo-4-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 4</h4>
<p>Extracting some properties of <code>relatedEntities</code>:</p>
<pre><code class="hljs css language-4d"> employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"firstName, directReports.lastName"</span>)
</code></pre>
<p>Retorna:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"directReports"</span>: [
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>
        },
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Caudill"</span>
        },
        {
            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gomes"</span>
        }
    ]
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-5-1"></a><a href="#exemplo-5-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 5</h4>
<p>Extracting a <code>relatedEntity</code> with simple form:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$coll</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"employer"</span>)
 employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-variable">$coll</span>)
</code></pre>
<p>Retorna:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-6-1"></a><a href="#exemplo-6-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 6</h4>
<p>Extracting all the properties of a <code>relatedEntity</code>:</p>
<pre><code class="hljs css language-4d"> employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"employer.*"</span>)
</code></pre>
<p>Retorna:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,
        <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,
        <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,
        <span class="hljs-string">"extra"</span>: null
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-7-1"></a><a href="#exemplo-7-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 7</h4>
<p>Extracting some properties of a <code>relatedEntity</code>:</p>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$col</span>:=New collection
 <span class="hljs-variable">$col</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.name"</span>)
 <span class="hljs-variable">$col</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.revenues"</span>)
 employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-variable">$col</span>)
</code></pre>
<p>Retorna:</p>
<pre><code class="hljs css language-4d">{
    <span class="hljs-string">"employer"</span>: {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,
        <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="touched-"></a><a href="#touched-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.touched( )</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.touched()</strong> : Boolean</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>Booleano</td><td style="text-align:center">&lt;-</td><td>True if at least one entity attribute has been modified and not yet saved, else False</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-20"></a><a href="#descrição-20" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>The <code>.touched()</code> function tests whether or not an entity attribute has been modified since the entity was loaded into memory or saved.</p>
<p>If an attribute has been modified or calculated, the function returns True, else it returns False. You can use this function to determine if you need to save the entity.</p>
<p>This function returns False for a new entity that has just been created (with <a href="/docs/pt/API/DataClassClass.html#new"><code>.new( )</code></a>). Note however that if you use a function which calculates an attribute of the entity, the <code>.touched()</code> function will then return True. For example, if you call <a href="#getkey"><code>.getKey()</code></a> to calculate the primary key, <code>.touched()</code> returns True.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-16"></a><a href="#exemplo-16" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<p>In this example, we check to see if it is necessary to save the entity:</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs. EmployeeEntity
 <span class="hljs-variable">$emp</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-comment">//Even if updated with the same value, the attribute is marked as touched</span><span class="hljs-keyword">

 If</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">touched</span>()) <span class="hljs-comment">//if at least one of the attributes has been changed</span>
    <span class="hljs-variable">$emp</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
 End if</span> <span class="hljs-comment">// otherwise, no need to save the entity</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="touchedattributes-"></a><a href="#touchedattributes-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.touchedAttributes( )</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.touchedAttributes()</strong> : Collection</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>Coleção</td><td style="text-align:center">&lt;-</td><td>Names of touched attributes, or empty collection</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-21"></a><a href="#descrição-21" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>The <code>.touchedAttributes()</code> function returns the names of the attributes that have been modified since the entity was loaded into memory.</p>
<p>This applies for attributes of the <a href="/docs/pt/API/DataClassAttributeClass.html#kind">kind</a> <code>storage</code> or <code>relatedEntity</code>.</p>
<p>In the case of a related entity having been touched (i.e., the foreign key), the name of the related entity and its primary key's name are returned.</p>
<p>If no entity attribute has been touched, the method returns an empty collection.</p>
<h4><a class="anchor" aria-hidden="true" id="exemplo-1-6"></a><a href="#exemplo-1-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 1</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$touchedAttributes </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs. EmployeeEntity

 <span class="hljs-variable">$touchedAttributes</span>:=New collection
 <span class="hljs-variable">$emp</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-comment">//Even if updated with the same value, the attribute is marked as touched</span>
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>
 <span class="hljs-variable">$touchedAttributes</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">touchedAttributes</span>()
  <span class="hljs-comment">//$touchedAttributes: ["firstName","lastName"]</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="exemplo-2-5"></a><a href="#exemplo-2-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo 2</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$touchedAttributes </span>: Collection<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$emp </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$company </span>: cs. CompanyEntity

 <span class="hljs-variable">$touchedAttributes</span>:=New collection

 <span class="hljs-variable">$emp</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>)
 <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName
 <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span>

 <span class="hljs-variable">$company</span>:=ds. Company.<span class="hljs-function">get</span>(<span class="hljs-number">121</span>)
 <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-variable">$company</span>

 <span class="hljs-variable">$touchedAttributes</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">touchedAttributes</span>()

  <span class="hljs-comment">//collection $touchedAttributes: ["firstName","lastName","employer","employerID"]</span>
</code></pre>
<p>Nesse modo:</p>
<ul>
<li>firstName and lastName have a <code>storage</code> kind</li>
<li>employer has a <code>relatedEntity</code> kind</li>
<li>employerID is the foreign key of the employer related entity</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="unlock"></a><a href="#unlock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.unlock()</h2>
<p><details><summary>Histórico</summary></p>
<table>
<thead>
<tr><th>Versão</th><th>Mudanças</th></tr>
</thead>
<tbody>
<tr><td>v17</td><td>Adicionado</td></tr>
</tbody>
</table>
<p></details></p>
<p><strong>.unlock()</strong> : Object</p>
<table>
<thead>
<tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>Resultado</td><td>Objeto</td><td style="text-align:center">&lt;-</td><td>Objeto de estado</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="descrição-22"></a><a href="#descrição-22" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Descrição</h4>
<p>The <code>.lock()</code> function puts a pessimistic lock on the record referenced by the entity.</p>
<blockquote>
<p>For more information, please refer to <a href="/docs/pt/ORDA/entities.html#entity-locking">Entity locking</a> section.</p>
</blockquote>
<p>A record is automatically unlocked when it is no longer referenced by any entities in the locking process (for example: if the lock is put only on one local reference of an entity, the entity and thus the record is unlocked when the process ends).</p>
<blockquote>
<p>When a record is locked, it must be unlocked from the locking process and on the entity reference which put the lock. Por exemplo:</p>
</blockquote>
<pre><code class="hljs css language-4d"> <span class="hljs-variable">$e1</span>:=ds. Emp.<span class="hljs-function">all</span>()[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$e2</span>:=ds. Emp.<span class="hljs-function">all</span>()[<span class="hljs-number">0</span>]
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">lock</span>() <span class="hljs-comment">//$res.success=true</span>
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e2</span>.<span class="hljs-function">unlock</span>() <span class="hljs-comment">//$res.success=false</span>
 <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">unlock</span>() <span class="hljs-comment">//$res.success=true</span>
</code></pre>
<p><strong>Resultado</strong></p>
<p>The object returned by <code>.unlock()</code> contains the following property:</p>
<table>
<thead>
<tr><th>Propriedade</th><th>Type</th><th>Descrição</th></tr>
</thead>
<tbody>
<tr><td>success</td><td>Booleano</td><td>True if the unlock action is successful, False otherwise. If the unlock is done on a dropped entity, on a non locked record, or on a record locked by another process or entity, success is False.</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="exemplo-17"></a><a href="#exemplo-17" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemplo</h4>
<pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs. EmployeeEntity<span class="hljs-keyword">
 var</span> <span class="hljs-variable">$status </span>: Object

 <span class="hljs-variable">$employee</span>:=ds. Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>)
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>()
 ... <span class="hljs-comment">//processing</span>
 <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">unlock</span>()<span class="hljs-keyword">
 If</span>(<span class="hljs-variable">$status</span>.success)
<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"The entity is now unlocked"</span>)<span class="hljs-keyword">
 End if</span>
</code></pre>
<style> h2 { background: #d9ebff;}</style>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/pt/API/EmailObjectClass.html"><span class="arrow-prev">← </span><span>Email</span></a><a class="docs-next button" href="/docs/pt/API/EntitySelectionClass.html"><span class="function-name-prevnext">EntitySelection</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#attributename">.<em>attributeName</em></a></li><li><a href="#clone">.clone()</a></li><li><a href="#diff">.diff()</a></li><li><a href="#drop">.drop()</a></li><li><a href="#first">.first()</a></li><li><a href="#fromobject">.fromObject()</a></li><li><a href="#getdataclass">.getDataClass()</a></li><li><a href="#getkey">.getKey()</a></li><li><a href="#getremotecontextattributes">.getRemoteContextAttributes()</a></li><li><a href="#getselection">.getSelection()</a></li><li><a href="#getstamp">.getStamp()</a></li><li><a href="#indexof">.indexOf()</a></li><li><a href="#isnew">.isNew()</a></li><li><a href="#last">.last()</a></li><li><a href="#lock">.lock()</a></li><li><a href="#next">.next()</a></li><li><a href="#previous">.previous()</a></li><li><a href="#reload-">.reload( )</a></li><li><a href="#save">.save()</a></li><li><a href="#toobject">.toObject()</a></li><li><a href="#touched-">.touched( )</a></li><li><a href="#touchedattributes-">.touchedAttributes( )</a></li><li><a href="#unlock">.unlock()</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'OJ04C0M3CU',
                apiKey: '5f22ebbb9382abafeadc3e86ca47d4af',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:pt","version:19 R6 BETA"]}
              });
            </script></body></html>