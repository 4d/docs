<!doctype html>
<html lang="pt" dir="ltr" class="docs-wrapper docs-doc-page docs-version-20-R4 plugin-docs plugin-id-default docs-doc-id-API/EntityClass">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Entity | 4D Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://4d.github.io/docs/pt/20-R4/API/EntityClass"><meta data-rh="true" name="docusaurus_locale" content="pt"><meta data-rh="true" name="docsearch:language" content="pt"><meta data-rh="true" name="docusaurus_version" content="20-R4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-20-R4"><meta data-rh="true" name="docsearch:version" content="20-R4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-20-R4"><meta data-rh="true" property="og:title" content="Entity | 4D Docs"><meta data-rh="true" name="description" content="Uma entidade  é uma instância de um Dataclass, como um registro da tabela que corresponde ao dataclass em seu datasture associado. Contém os mesmos atributos que o dataclass assim como os valores de dados e propriedades e funções específicas."><meta data-rh="true" property="og:description" content="Uma entidade  é uma instância de um Dataclass, como um registro da tabela que corresponde ao dataclass em seu datasture associado. Contém os mesmos atributos que o dataclass assim como os valores de dados e propriedades e funções específicas."><link data-rh="true" rel="icon" href="/docs/pt/img/favicon/4d.gif"><link data-rh="true" rel="canonical" href="https://4d.github.io/docs/pt/20-R4/API/EntityClass"><link data-rh="true" rel="alternate" href="https://4d.github.io/docs/20-R4/API/EntityClass" hreflang="en"><link data-rh="true" rel="alternate" href="https://4d.github.io/docs/fr/20-R4/API/EntityClass" hreflang="fr"><link data-rh="true" rel="alternate" href="https://4d.github.io/docs/es/20-R4/API/EntityClass" hreflang="es"><link data-rh="true" rel="alternate" href="https://4d.github.io/docs/ja/20-R4/API/EntityClass" hreflang="ja"><link data-rh="true" rel="alternate" href="https://4d.github.io/docs/pt/20-R4/API/EntityClass" hreflang="pt"><link data-rh="true" rel="alternate" href="https://4d.github.io/docs/20-R4/API/EntityClass" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://OJ04C0M3CU-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="4D Docs" href="/docs/pt/opensearch.xml"><link rel="stylesheet" href="/docs/pt/assets/css/styles.abfcc139.css">
<link rel="preload" href="/docs/pt/assets/js/runtime~main.79e78db5.js" as="script">
<link rel="preload" href="/docs/pt/assets/js/main.935b262f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Saltar para o conteúdo principal"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Saltar para o conteúdo principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Alternar barra de navegação" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/pt/"><div class="navbar__logo"><img src="/docs/pt/img/logohome.png" alt="4D Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/pt/img/logohome.png" alt="4D Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Documentação 4D</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/pt/20-R4/GettingStarted/installation">20 R4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/pt/API/EntityClass">20 R5 BETA</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/pt/20-R4/API/EntityClass">20 R4</a></li><li><a class="dropdown__link" href="/docs/pt/20/API/EntityClass">20</a></li><li><a class="dropdown__link" href="/docs/pt/19/API/EntityClass">19</a></li><li><a class="dropdown__link" href="/docs/pt/18/GettingStarted/installation">18</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Português</a><ul class="dropdown__menu"><li><a href="/docs/20-R4/API/EntityClass" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/docs/fr/20-R4/API/EntityClass" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/docs/es/20-R4/API/EntityClass" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/docs/ja/20-R4/API/EntityClass" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/docs/pt/20-R4/API/EntityClass" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="pt">Português</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Alternar entre os modos escuro e claro (atualmente modo Claro)" aria-label="Alternar entre os modos escuro e claro (atualmente modo Claro)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Pesquisa"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Pesquisa</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Voltar ao topo" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/docs/pt/"><img src="/docs/pt/img/logohome.png" alt="4D Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/pt/img/logohome.png" alt="4D Logo" class="themedImage_ToTc themedImage--dark_i4oU"><b>Documentação 4D</b></a><nav aria-label="Barra lateral de documentos" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pt/20-R4/category/getting-started">Começando</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Começando&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/pt/20-R4/category/core-development">Desenvolvimento</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Desenvolvimento&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pt/20-R4/Project/overview">Gestão de projectos</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Gestão de projectos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/pt/20-R4/Project/code-overview">Ambiente de desenvolvimento</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pt/20-R4/ORDA/overview">ORDA</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;ORDA&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/pt/20-R4/Concepts/about">Línguagem</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/pt/20-R4/Concepts/about">Conceitos</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a href="https://doc.4d.com/4Dv20R4/4D/20-R4/4D-Language-Reference.100-6655756.en.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Comandos<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/pt/20-R4/category/class-API-reference">Classes</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/overview">Sobre as funções classe</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/BlobClass">Blob</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/ClassClass">Class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/CollectionClass">Collection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/CryptoKeyClass">CryptoKey</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/DataClassClass">DataClass</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/DataStoreClass">DataStore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/EmailObjectClass">Email</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pt/20-R4/API/EntityClass">Entity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/EntitySelectionClass">EntitySelection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/FileClass">File</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/FileHandleClass">FileHandle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/FolderClass">Folder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/FunctionClass">Function</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/HTTPRequestClass">HTTPRequest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/IMAPTransporterClass">IMAPTransporter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/MailAttachmentClass">MailAttachment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/POP3TransporterClass">POP3Transporter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/SessionClass">Session</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/SignalClass">Signal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/SMTPTransporterClass">SMTPTransporter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/SystemWorkerClass">SystemWorker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/WebFormClass">WebForm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/WebFormItemClass">WebFormItem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/WebServerClass">WebServer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/WebSocketClass">WebSocket</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/WebSocketConnectionClass">WebSocketConnection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/WebSocketServerClass">WebSocketServer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/ZipArchiveClass">ZIPArchive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/ZipFileClass">ZIPFile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/API/ZipFolderClass">ZIPFolder</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/pt/20-R4/Develop/processes">Processos</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pt/20-R4/Tags/transformation-tags">Etiquetas de transformação</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pt/20-R4/Preferences/overview">Preferências</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Preferências&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pt/20-R4/category/administration">Administração</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Administração&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pt/20-R4/Extensions/overview">Extensões</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Extensões&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pt/20-R4/category/web-applications">Aplicações Web</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Aplicações Web&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pt/20-R4/category/desktop-applications">Aplicações Desktop</a><button aria-label="Alternar a categoria da barra lateral rebatível &#x27;Aplicações Desktop&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://developer.4d.com/go-mobile/" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false">Aplicações móveis</a></div></li></ul></nav><button type="button" title="Recolher a barra lateral" aria-label="Recolher a barra lateral" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Trilha de navegação"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Página inicial" class="breadcrumbs__link" href="/docs/pt/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/pt/20-R4/category/core-development"><span itemprop="name">Desenvolvimento</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Línguagem</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/pt/20-R4/category/class-API-reference"><span itemprop="name">Classes</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Entity</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Versão: 20 R4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Nesta página</button></div><div class="theme-doc-markdown markdown"><header><h1>Entity</h1></header><p>Uma entidade <a href="/docs/pt/20-R4/ORDA/dsmapping#entity"></a> é uma instância de um <a href="/docs/pt/20-R4/ORDA/dsmapping#dataclass">Dataclass</a>, como um registro da tabela que corresponde ao dataclass em seu datasture associado. Contém os mesmos atributos que o dataclass assim como os valores de dados e propriedades e funções específicas.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resumo">Resumo<a href="#resumo" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#attributename"><strong><em>.attributeName</em></strong> : DataClassAttribute</a> <!-- --> <!-- --> <!-- --> <!-- -->armazena o valor de atributo para a entidade</td></tr><tr><td><a href="#clone">Parâmetros</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna True se a entidade a qual for aplicada foi recém criada e não foi ainda salva na datastore.</td></tr><tr><td><a href="#diff">Parâmetros</a> <!-- --> <!-- --> <!-- --> <!-- -->compara os conteúdos das duas entidades e retorna suas diferenças</td></tr><tr><td><a href="#drop"><strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</a> <!-- --> <!-- --> <!-- --> <!-- -->apaga os dados contidos na entidade da datastore</td></tr><tr><td><a href="#first">Parâmetros</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna uma referência à entidade na primeira posição da seleção de entidade a qual a entidade pertence.</td></tr><tr><td><a href="#fromobject"><strong>.fromObject</strong>( <em>filler</em> : Object )</a> <!-- --> <!-- --> <!-- --> <!-- -->preenche uma entidade com o conteúdo <em>filler</em></td></tr><tr><td><a href="#getdataclass"><strong>.getDataClass()</strong> : 4D. DataClass</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna a classe de dados da entidade</td></tr><tr><td><a href="#getkey"><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Text<br><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Integer</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna a chave primária da entidade</td></tr><tr><td><a href="#getremotecontextattributes"><strong>.getRemoteContextAttributes()</strong> : Text</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna os nomes dos atributos que foram modificados desde que a entidade foi carregada na memória</td></tr><tr><td><a href="#getselection"><strong>.getSelection()</strong>: 4D. EntitySelection</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna a seleção entidade à qual pertence a entidade</td></tr><tr><td><a href="#getstamp"><strong>.getStamp()</strong> : Integer</a> <!-- --> <!-- --> <!-- --> <!-- --> retorna o valor atual da estampa da entidade</td></tr><tr><td><a href="#indexof">Parâmetros</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna a posição da entidade em uma seleção de entidade</td></tr><tr><td><a href="#isnew"><strong>.isNew()</strong> : Boolean</a> <!-- --> <!-- --> <!-- --> <!-- --> retorna True se a entidade a qual for aplicada foi recém criada e não foi ainda salva na datastore</td></tr><tr><td><a href="#last">Parâmetros</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna uma referência à entidade na primeira posição da seleção de entidade a qual a entidade pertence.</td></tr><tr><td><a href="#lock"><strong>.lock</strong>( { <em>mode</em> : Integer } ) : Object</a> <!-- --> <!-- --> <!-- --> <!-- -->põe uma fechadura pessimista no registro referenciado pela entidade</td></tr><tr><td><a href="#next">Parâmetros</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna uma referência à entidade na primeira posição da seleção de entidade a qual a entidade pertence.</td></tr><tr><td><a href="#previous">Parâmetros</a> <!-- --> <!-- --> <!-- --> <!-- --> retorna uma referência à entidade na primeira posição da seleção de entidade a qual a entidade pertence.</td></tr><tr><td><a href="#reload"><strong>.reload()</strong> : Object</a> <!-- --> <!-- --> <!-- --> <!-- -->recarrega o conteúdo da entidade em memória</td></tr><tr><td><a href="#save"><strong>.save</strong>( { <em>mode</em> : Integer } ) : Object</a> <!-- --> <!-- --> <!-- --> <!-- -->salva as mudanças feitas na entidade</td></tr><tr><td><a href="#toobject"><strong>.toObject</strong>() : Object<br><strong>.toObject</strong>( <em>filterString</em> : Text { ; <em>options</em> : Integer}  ) : Object<br><strong>.toObject</strong>( <em>filterCol</em> : Collection { ; <em>options</em> : Integer } ) : Object</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna um objeto que foi feito a partir da entidade</td></tr><tr><td><a href="#touched"><strong>.touched()</strong> : Boolean</a> <!-- --> <!-- --> <!-- --> <!-- -->comprova se um atributo da entidade tiver sido modificado ou não desde que se carregou a entidade na memória ou se salvou</td></tr><tr><td><a href="#touchedattributes"><strong>.touchedAttributes()</strong> : Collection</a> <!-- --> <!-- --> <!-- --> <!-- -->retorna a posição da entidade em uma seleção de entidade</td></tr><tr><td><a href="#unlock"><strong>.unlock()</strong> : Object</a> <!-- --> <!-- --> <!-- --> <!-- -->remove a tranca pessimista no registro correspondente à entidade</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="attributename">.<em>attributeName</em><a href="#attributename" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong><em>.attributeName</em></strong> : DataClassAttribute</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição">Descrição<a href="#descrição" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Qualquer atributo de dataclass está disponível como uma propriedade de entidade, que armazena o valor de atributo para a entidade.</p><blockquote><p>Atributos de Dataclass também podem ser alcançados usando a sintaxe alternativa com <!-- -->[<!-- --> ].</p></blockquote><p>O tipo de valor do atributo depende do atributo <a href="/docs/pt/20-R4/API/DataClassClass#attributename">kind</a> (relação ou armazenamento):</p><ul><li>If <em>attributeName</em> kind is <strong>storage</strong>: <code>.attributeName</code> returns a value of the same type as <em>attributeName</em>.</li><li>If <em>attributeName</em> kind is <strong>relatedEntity</strong>: <code>.attributeName</code> returns the related entity. Valores da entidade relacionada estão diretamente disponíveis através de propriedades em cascata, por exemplo &quot;myEntity.employer.employees<!-- -->[<!-- -->0].lastname&quot;.</li><li>If <em>attributeName</em> kind is <strong>relatedEntities</strong>: <code>.attributeName</code> returns a new entity selection of related entities. Se eliminam os duplicados (se devolve uma seleção de entidades desordenada).</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo">Exemplo<a href="#exemplo" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $myEntity : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $myEntity:=ds. Employee.new() //Create a new entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $myEntity.name:=&quot;Dupont&quot; // assign &#x27;Dupont&#x27; to the &#x27;name&#x27; attribute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $myEntity.firstname:=&quot;John&quot; //assign &#x27;John&#x27; to the &#x27;firstname&#x27; attribute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $myEntity.save() //save the entity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clone">.clone()<a href="#clone" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p>Parâmetros</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>4D. Entity</td><td align="center">&lt;-</td><td>Nova entidade referenciando o registro</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-1">Descrição<a href="#descrição-1" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.isNew()</code> retorna True se a entidade a qual for aplicada foi recém criada e não foi ainda salva na datastore.. .</p><blockquote><p>Tenha em mente que quaisquer modificações feitas a entidades serão salvas no registro referenciado somente quando o <a href="#save"><code>. ave( )</code></a> função for executada.</p></blockquote><p>Esta função só pode ser usada com entidades já salvas no banco de dados. Ele não pode ser chamado em uma entidade recém-criada (para a qual <a href="#isnew"><code>.isNew()</code></a> retorna <strong>Verdadeiro</strong>).</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-1">Exemplo<a href="#exemplo-1" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $emp; $empCloned : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp:=ds. Employee.get(672)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $empCloned:=$emp.clone()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp.lastName:=&quot;Smith&quot; //Updates done on $emp are not done on $empCloned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="diff">.diff()<a href="#diff" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p>Parâmetros</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>entityToCompare</td><td>4D. Entity</td><td align="center">-&gt;</td><td>Entidade a ser comparada com a entidade original</td></tr><tr><td>attributesToCompare</td><td>Collection</td><td align="center">-&gt;</td><td>Nome dos atributos a serem comparados</td></tr><tr><td>Resultados</td><td>Collection</td><td align="center">&lt;-</td><td>Diferenças entre as entidades</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-2">Descrição<a href="#descrição-2" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.diff()</code> compara os conteúdos das duas entidades e retorna suas diferenças.</p><p>No <em>entityToCompare</em>, passe a entidade a ser comparada à entidade original.</p><p>Em <em>attributesToCompare</em>, pode designar atributos específicos para comparar. Se fornecida, a comparação é feita apenas nos atributos especificados. Se não for fornecida, todas as diferenças entre as entidades são devolvidas.</p><p>As diferenças são retornadas como uma coleção de objetos cujas propriedades são:</p><table><thead><tr><th>Nome da propriedade</th><th>Tipo</th><th>Descrição</th></tr></thead><tbody><tr><td>attributeName</td><td>String</td><td>Nome do atributo</td></tr><tr><td>value</td><td>any - Depende do tipo de atributo</td><td>Valor do atributo na entidade</td></tr><tr><td>otherValue</td><td>any - Depende do tipo de atributo</td><td>Valor do atributo em <em>entityToCompare</em></td></tr></tbody></table><p>Apenas atributos com valores diferentes estão incluídos na coleção. Se nenhuma diferença for encontrada, <code>.diff()</code> retorna uma coleção vazia.</p><p>A função se aplica para propriedades cujo <a href="/docs/pt/20-R4/API/DataClassClass#attributename">tipo</a> é <strong>de armazenamento</strong> ou <strong>relacionada a Entidade</strong>. No caso de uma entidade relacionada ter sido atualizada (ou seja, a chave estrangeira), o nome da entidade relacionada e seu nome de chave primária são retornados como propriedades <em>attributeName</em> ( value*<em> e </em>outroValue* estão vazios para o nome da entidade relacionada).</p><p>Se uma das entidades comparadas for <strong>Null</strong>, um erro é gerado.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-1-1">Exemplo 1<a href="#exemplo-1-1" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $diff1; $diff2 : Collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> employee:=ds. Employee.query(&quot;ID=1001&quot;).first()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $clone:=employee.clone()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> employee.firstName:=&quot;MARIE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> employee.lastName:=&quot;SOPHIE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> employee.salary:=500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $diff1:=$clone.diff(employee) // All differences are returned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $diff2:=$clone.diff(employee;New collection&quot;firstName&quot;;&quot;lastName&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Only differences on firstName and lastName are returned</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>$diff1:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;firstName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Natasha&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;MARIE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;lastName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Locke&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;SOPHIE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;salary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: 66600,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: 500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$diff2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;firstName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Natasha&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;MARIE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;lastName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Locke&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;SOPHIE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-2">Exemplo 2<a href="#exemplo-2" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var vCompareResult1; vCompareResult2; vCompareResult3; $attributesToInspect : Collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vCompareResult1:=New collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vCompareResult2:=New collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vCompareResult3:=New collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $attributesToInspect:=New collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $e1:=ds. Employee.get(636)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $e2:=ds. Employee.get(636)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $e1.firstName:=$e1.firstName+&quot; update&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $e1.lastName:=$e1.lastName+&quot; update&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $c:=ds. Company.get(117)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $e1.employer:=$c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $e2.salary:=100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $attributesToInspect.push(&quot;firstName&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $attributesToInspect.push(&quot;lastName&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vCompareResult1:=$e1.diff($e2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vCompareResult2:=$e1.diff($e2;$attributesToInspect)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vCompareResult3:=$e1.diff($e2;$e1.touchedAttributes())</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>vCompareResultado1 (todas as diferenças são devolvidas):</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;firstName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Karla update&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;Karla&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;lastName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Marrero update&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;Marrero&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;salary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: 33500,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;employerID&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: 117,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: 118</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;employer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;[object Entity]&quot;,// Entity 117 from Company</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;[object Entity]&quot;// Entity 118 from Company</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>vCompareResult2 (apenas diferenças em $attributesToInspect foram retornadas)</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;firstName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Karla update&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;Karla&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;lastName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Marrero update&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;Marrero&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>vCompareResult3 (apenas as diferenças em $e1 atributos tocados são retornadas)</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;firstName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Karla update&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;Karla&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;lastName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;Marrero update&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;Marrero&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;employerID&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: 117,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: 118</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attributeName&quot;: &quot;employer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;value&quot;: &quot;[object Entity]&quot;,// Entity 117 from Company</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;otherValue&quot;: &quot;[object Entity]&quot;// Entity 118 from Company</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="drop">.drop()<a href="#drop" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>mode</td><td>Integer</td><td align="center">-&gt;</td><td><code>dk force drop if stamp changed</code>: Força a queda mesmo se a estampa tiver mudado</td></tr><tr><td>Resultados</td><td>Object</td><td align="center">&lt;-</td><td>Resultado da operação drop</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-3">Descrição<a href="#descrição-3" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.drop()</code> apaga os dados contidos na entidade da datastoreda tabela relacionada a dataclass. Note-se que a entidade permanece na memória.</p><p>Numa aplicação multiusuário ou multiprocesso, a função <code>.drop()</code> é executada sob um mecanismo <a href="/docs/pt/20-R4/ORDA/entities#entity-locking">&quot;optimistic lock&quot;</a> , no qual um selo de bloqueio interno é automaticamente incrementado cada vez que o registo for guardado.</p><p>Por padrão, se o parâmetro <em>modo</em> for omitido, a função retornará um erro (veja abaixo) se a mesma entidade tiver sido modificada (ou seja, O selo mudou) por outro processo ou usuário nesse meio tempo.</p><p>Caso contrário, pode passar a opção <code>dk force drop if stamp changed</code> no parâmetro <em>mode</em> : nesse caso, a entidade é abandonada mesmo que a estampa tenha sido alterada (e a chave primária continua a ser a mesma).</p><p><strong>Resultados</strong></p><p>O objecto devolvido por <code>.drop( )</code> contém as seguintes propriedades:</p><table><thead><tr><th>Propriedade</th><th></th><th>Tipo</th><th>Descrição</th></tr></thead><tbody><tr><td>success</td><td></td><td>boolean</td><td>verdadeiro se a ação de queda for bem-sucedida, falso caso contrário.</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro:</em></strong></td></tr><tr><td>status(*)</td><td></td><td>number</td><td>Código de erro, ver abaixo</td></tr><tr><td>statusText(*)</td><td></td><td>text</td><td>Descrição do erro, ver abaixo</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro de bloqueio pessimista:</em></strong></td></tr><tr><td>LockKindText</td><td></td><td>text</td><td>&quot;Bloqueado pelo registro&quot;</td></tr><tr><td>lockInfo</td><td></td><td>object</td><td>Informações sobre a origem do bloqueio</td></tr><tr><td></td><td>task_id</td><td>number</td><td>Parâmetros</td></tr><tr><td></td><td>user_name</td><td>text</td><td>Nome de usuário de sessão na máquina</td></tr><tr><td></td><td>user4d_alias</td><td>text</td><td>Pseudônimo do usuário se definido por <code>SET USER ALIAS</code>, caso contrário, nome de usuário no diretório 4D</td></tr><tr><td></td><td>host_name</td><td>text</td><td>Nome da máquina</td></tr><tr><td></td><td>task_name</td><td>text</td><td>Nome de processo</td></tr><tr><td></td><td>client_version</td><td>text</td><td></td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro grave (erro grave pode ser tentar duplicar uma chave primária, disco cheio...):</em></strong></td></tr><tr><td>errors</td><td></td><td>uma coleção de objetos</td><td></td></tr><tr><td></td><td>message</td><td>text</td><td>Mensagem de erro</td></tr><tr><td></td><td>assinatura de componentes</td><td>text</td><td>assinatura interna do componente (ex.: &quot;dmbg&quot; significa componente da base de dados)</td></tr><tr><td></td><td>errCode</td><td>number</td><td>Código de erro</td></tr></tbody></table><p>(<!-- -->*<!-- -->) Os seguintes valores podem ser devolvidos nas propriedades <em>status</em> e <em>statusText</em> do objecto <em>Result</em> em caso de erro:</p><table><thead><tr><th>Parâmetros</th><th>Valor</th><th>Comentário</th></tr></thead><tbody><tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>A entidade não existe mais nos dados. Este erro pode ocorrer nos seguintes casos:<br><li>a entidade foi descartada (o selo mudou e o espaço de memória é agora livre)</li><li>a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). Ao utilizar entity.drop( ), este erro pode ser devolvido quando usar a opção dk force drop if stamp changed. Ao usar entity.lock( ), este erro pode ser retornado quando usar a opção dk if stamp changed</li> <strong>statusText asociado</strong>: &quot;A entidade já não existe&quot;</td></tr><tr><td><code>dk status locked</code></td><td>3</td><td>Parâmetros</td></tr><tr><td><code>dk status serious error</code></td><td>4</td><td>Um erro grave é um erro de banco de dados de baixo nível (por exemplo, chave duplicada), um erro de hardware, etc.<br><strong>Associado statusText</strong>: &quot;Outro erro&quot;</td></tr><tr><td><code>dk status stamp has changed</code></td><td>2</td><td>O valor de selo interno da entidade não corresponde a uma da entidade armazenada nos dados (bloqueio otimista).<br><li>com <code>.save( )</code>: erro apenas se a opção <code>dk auto merge&#x27; não for utilizada&lt;/li&gt;&lt;li&gt;com </code>.drop( )<code>: erro apenas se a opção </code>dk force drop if stamp changed&#x27; não for utilizada</li><li>com <code>.lock( )</code>: erro apenas se a opção <code>dk reload if stamp changed</code> não for usada</li><li><strong>Associated statusText*</strong>: &quot;O carimbo mudou&quot;</li></td></tr><tr><td><code>dk status wrong permission</code></td><td>1</td><td>Os privilégios actuais não permitem a queda da entidade. <strong>Associated statusText</strong>:</td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-1-2">Exemplo 1<a href="#exemplo-1-2" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Exemplo sem a opção <code>dk force drop if stamp changed</code> :</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName=:1&quot;;&quot;Smith&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees.first()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.drop()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Case of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT(&quot;You have dropped &quot;+$employee.firstName+&quot; &quot;+$employee.lastName) //The dropped entity remains in memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.status=dk status stamp has changed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT($status.statusText)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End case</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-2-1">Exemplo 2<a href="#exemplo-2-1" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Exemplo com a opção<code>dk force drop if stamp changed</code>:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName=:1&quot;;&quot;Smith&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees.first()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.drop(dk force drop if stamp changed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Case of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT(&quot;You have dropped &quot;+$employee.firstName+&quot; &quot;+$employee.lastName) //The dropped entity remains in memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.status=dk status entity does not exist anymore)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT($status.statusText)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End case</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="first">.first()<a href="#first" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p>Parâmetros</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>4D. Entity</td><td align="center">&lt;-</td><td>Referencia à primeira entidade da entity selection (Null se a seleção estiver vazia)</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-4">Descrição<a href="#descrição-4" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.first()</code> retorna uma referência à entidade na primeira posição da seleção de entidade a qual a entidade pertence..</p><p>Se a entidade não pertence a nenhuma seleção de entidade existente (ex: <a href="#getselection">.getSelection( )</a> retorna Null), a função retorna um valor nulo.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-3">Exemplo<a href="#exemplo-3" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee; $firstEmployee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName = :1&quot;;&quot;H@&quot;) //This entity selection contains 3 entities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees[2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $firstEmployee:=$employee.first() //$firstEmployee is the first entity of the $employees entity selection</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fromobject">.fromObject()<a href="#fromobject" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.fromObject</strong>( <em>filler</em> : Object )</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>filler</td><td>Object</td><td align="center">-&gt;</td><td>Objeto para o qual vai preencher a entidade</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-5">Descrição<a href="#descrição-5" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.fromObject()</code> preenche uma entidade com o conteúdo <em>filler</em>.</p><blockquote><p>Essa função modifica a entidade original.</p></blockquote><p>O mapeamento entre o objecto e a entidade é feito sobre os nomes dos atributos:</p><ul><li>Se uma propriedade do objeto não existe nos dados (dataclass), ela é ignorada.</li><li>Os tipos de dados devem ser equivalentes. Se houver uma incompatibilidade de tipo entre o objeto e o dataclass, 4D tenta converter os dados sempre que possível (consulte <a href="/docs/pt/20-R4/Concepts/data-types#converting-data-types"><code>Conversão de tipos de dados</code></a>), caso contrário, o atributo fica intacto.</li><li>A chave primária pode ser dada como é ou com uma propriedade &quot;__KEY&quot; (preenchida com o valor da chave primária). Se ainda não existir no dataclass, a entidade é criada com o valor dado quando <a href="#save">.save()</a> é chamado. Se a chave primária não for dada, a entidade é criada e o valor da chave primária é atribuído de acordo com as regras da base de dados. O auto-incremento só é calculado se a chave primária for nula.</li></ul><p><em>filler</em> pode tratar de uma entidade relacionada sob as seguintes condições:</p><ul><li><em>filler</em> contém a chave estrangeira em si, ou</li><li><em>filler</em> contém um objeto de propriedade com o mesmo nome da entidade relacionada, contendo uma propriedade única chamada &quot;<!-- -->_<!-- -->_<!-- -->KEY&quot;.</li><li>se a entidade relacionada não existir, ela é ignorada.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-4">Exemplo<a href="#exemplo-4" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Com o seguinte objeto $o:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;firstName&quot;: &quot;Mary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;lastName&quot;: &quot;Smith&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;salary&quot;: 36500,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;birthDate&quot;: &quot;1958-10-27T00:00:00.000Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;woman&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;managerID&quot;: 411,// relatedEntity dada com PK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employerID&quot;: 20 // relatedEntity dada com PK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>O código a seguir criará uma entidade com gerente e entidades relacionadas ao empregador.</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $o : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $entity : cs. EmpEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entity:=ds. Emp.new()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entity.fromObject($o)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entity.save()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Você também poderia usar uma entidade relacionada dada como um objeto:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;firstName&quot;: &quot;Marie&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;lastName&quot;: &quot;Lechat&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;salary&quot;: 68400,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;birthDate&quot;: &quot;1971-09-03T00:00:00.000Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;woman&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employer&quot;: {// relatedEntity dada como um objeto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__KEY&quot;: &quot;21&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;manager&quot;: {// relatedEntity dada como um objeto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__KEY&quot;: &quot;411&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getdataclass">.getDataClass()<a href="#getdataclass" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17 R5</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.getDataClass()</strong> : 4D. DataClass</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>4D. DataClass</td><td align="center">&lt;-</td><td>Objeto DataClass ao qual a entidade pertence</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-6">Descrição<a href="#descrição-6" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.getDataClass()</code> retorna a classe de dados da entidade. Esta função é útil para configurar o código genérico.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-5">Exemplo<a href="#exemplo-5" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>O seguinte código genérico duplica qualquer entidade:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  //duplicate_entity method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //duplicate_entity($entity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> #DECLARE($entity : 4D. Entity)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $entityNew : 4D. Entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entityNew:=$entity.getDataClass().new() //create a new entity in the parent dataclass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entityNew.fromObject($entity.toObject()) //get all attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entityNew[$entity.getDataClass().getInfo().primaryKey]:=Null //reset the primary key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$entityNew.save() //save the duplicated entity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getkey">.getKey()<a href="#getkey" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Text<br><strong>.getKey</strong>( { <em>mode</em> : Integer } ) : Integer</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>mode</td><td>Integer</td><td align="center">-&gt;</td><td><code>dk key as string</code>: a chave primária se devolve como uma string, sem importar o tipo de chave primária</td></tr><tr><td>Resultados</td><td>Text</td><td align="center">&lt;-</td><td>Valor do texto chave primária da entidade</td></tr><tr><td>Resultados</td><td>Integer</td><td align="center">&lt;-</td><td>Valor da chave primária numérica da entidade</td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-7">Descrição<a href="#descrição-7" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.getKey()</code> retorna a chave primária da entidade.</p><p>As chaves primárias podem ser números (Inteiro) ou strings. Você pode &quot;forçar&quot; o valor da chave primária retornado para ser uma string, independentemente do tipo de chave primária real, passando a <code>dk key como string</code> opção no parâmetro <em>modo</em>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-6">Exemplo<a href="#exemplo-6" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName=:1&quot;;&quot;Smith&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ALERT(&quot;The primary key is &quot;+$employee.getKey(dk key as string))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getremotecontextattributes">.getRemoteContextAttributes()<a href="#getremotecontextattributes" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>19R5</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.getRemoteContextAttributes()</strong> : Text</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th></th><th>Descrição</th></tr></thead><tbody><tr><td>result</td><td>Text</td><td>&lt;-</td><td>atributos de contexto linkados à entidade, separados por uma vírgula</td></tr></tbody></table><p>|</p><blockquote><p><strong>Modo avançado:</strong> Esta função destina-se a programadores que necessitem personalizar as características padrão ORDA para configurações específicas. Na maioria dos casos, não necessitará de o utilizar.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-8">Descrição<a href="#descrição-8" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.touchedAttributes()</code> retorna os nomes dos atributos que foram modificados desde que a entidade foi carregada na memória .</p><p>Se não houver <a href="/docs/pt/20-R4/ORDA/datastores#clientserver-optimization">optimization context</a> para a entidade a função retorna um Texto vazio.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-7">Exemplo<a href="#exemplo-7" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var $ds : 4D. DataStoreImplementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var $address : cs. AddressEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var $p : cs. PersonsEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var $contextA : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var $info : Text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var $text : Text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ds:=Open datastore(New object(&quot;hostname&quot;; &quot;www.myserver.com&quot;); &quot;myDS&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$contextA:=New object(&quot;context&quot;; &quot;contextA&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$address:=$ds. Address.get(1; $contextA)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$text:=&quot;&quot; For each ($p; $address.persons)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $text:=$p.firstname+&quot; &quot;+$p.lastname End for each</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$info:=$address.getRemoteContextAttributes()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//$info = &quot;persons,persons.lastname,persons.firstname&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="veja-também">Veja também<a href="#veja-também" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p><a href="/docs/pt/20-R4/API/EntitySelectionClass#getRemoteContextAttributes">EntitySelection.getRemoteContextAttributes()</a><br><a href="/docs/pt/20-R4/API/DataStoreClass#clearallremotecontexts">.clearAllRemoteContexts()</a><br><a href="/docs/pt/20-R4/API/DataStoreClass#getremotecontextinfo">.getRemoteContextInfo()</a><br><a href="/docs/pt/20-R4/API/DataStoreClass#getallremotecontexts">.getAllRemoteContexts()</a><br><a href="/docs/pt/20-R4/API/DataStoreClass#setremotecontextinfo">.setRemoteContextInfo()</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getselection">.getSelection()<a href="#getselection" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.getSelection()</strong>: 4D. EntitySelection</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>4D. EntitySelection</td><td align="center">&lt;-</td><td>Seleção de entidade a que pertence a entidade (null se não for encontrado)</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-9">Descrição<a href="#descrição-9" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.getSelection()</code> retorna a seleção entidade à qual pertence a entidade.</p><p>Se a entidade não pertence à seleção de uma entidade, a função retorna Null.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-8">Exemplo<a href="#exemplo-8" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $emp : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees; $employees2 : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp:=ds. Employee.get(672) // This entity does not belong to any entity selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=$emp.getSelection() // $employees is Null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees2:=ds. Employee.query(&quot;lastName=:1&quot;;&quot;Smith&quot;) //This entity selection contains 6 entities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp:=$employees2[0]  // This entity belongs to an entity selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ALERT(&quot;The entity selection contains &quot;+String($emp.getSelection().length)+&quot; entities&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getstamp">.getStamp()<a href="#getstamp" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.getStamp()</strong> : Integer</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>Integer</td><td align="center">&lt;-</td><td>Estampa da entidade (0 se a entidade foi criada)</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-10">Descrição<a href="#descrição-10" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.getStamp()</code>  retorna o valor atual da estampa da entidade.</p><p>O selo interno é automaticamente incrementado por 4D cada vez que a entidade é gravada. Gere o acesso de usuários simultâneos e modificações às mesmas entidades (ver <a href="/docs/pt/20-R4/ORDA/entities#entity-locking"><strong>bloqueio de entidades</strong></a>).</p><blockquote><p>Para uma nova entidade (nunca salva), a função retorna 0. Para saber se uma entidade acabou de ser criada, recomenda-se a utilização de <a href="#isnew">.isNew()</a>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-9">Exemplo<a href="#exemplo-9" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $entity : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $stamp : Integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entity:=ds. Employee.new()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entity.lastname:=&quot;Smith&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entity.save()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $stamp:=$entity.getStamp() //$stamp=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entity.lastname:=&quot;Wesson&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $entity.save()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $stamp:=$entity.getStamp() //$stamp=2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="indexof">.indexOf()<a href="#indexof" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p>Parâmetros</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>entitySelection</td><td>4D. EntitySelection</td><td align="center">-&gt;</td><td>A posição da entidade é dada de acordo com a selecção desta entidade</td></tr><tr><td>Resultados</td><td>Integer</td><td align="center">&lt;-</td><td>Posição da entidade numa selecção de entidade</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-11">Descrição<a href="#descrição-11" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.find()</code> retorna a posição da entidade em uma seleção de entidade.</p><p>Por padrão, se o parâmetro <em>entitySelection</em> for omitido, a função retorna a posição da entidade dentro de sua própria seleção de entidade. Caso contrário, ele retorna a posição da entidade dentro da <em>entitySelection</em>.</p><p>O valor resultante é incluído entre 0 e o comprimento da selecção da entidade -1.</p><ul><li>Se a entidade não tiver uma selecção de entidade ou não pertencer a <em>entitySelection</em>, a função retorna -1.</li><li>Se <em>entitySelection</em> for Null ou não pertencer ao mesmo dataclass que a entidade, é apresentado um erro.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-10">Exemplo<a href="#exemplo-10" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName = :1&quot;;&quot;H@&quot;) //This entity selection contains 3 entities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees[1] //This entity belongs to an entity selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ALERT(&quot;The index of the entity in its own entity selection is &quot;+String($employee.indexOf())) //1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=ds. Employee.get(725) //This entity does not belong to an entity selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ALERT(&quot;The index of the entity is &quot;+String($employee.indexOf())) // -1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="isnew">.isNew()<a href="#isnew" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.isNew()</strong> : Boolean</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>Parâmetros</td><td align="center">&lt;-</td><td>É verdade se a entidade acabou de ser criada e ainda não foi salva. Caso contrário, Falso.</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-12">Descrição<a href="#descrição-12" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.isNew()</code>  retorna True se a entidade a qual for aplicada foi recém criada e não foi ainda salva na datastore. Caso contrário, devolve False.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-11">Exemplo<a href="#exemplo-11" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $emp : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp:=ds. Employee.new()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> If($emp.isNew())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ALERT(&quot;This is a new entity&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End if</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="last">.last()<a href="#last" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p>Parâmetros</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>4D. Entity</td><td align="center">&lt;-</td><td>Referência para a última entidade de uma seleção de entidade (Null se não for encontrado)</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-13">Descrição<a href="#descrição-13" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.last()</code> retorna uma referência à entidade na primeira posição da seleção de entidade a qual a entidade pertence..</p><p>Se a entidade não pertence a nenhuma seleção de entidade existente (ex: <a href="#getselection">.getSelection( )</a> retorna Null), a função retorna um valor nulo.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-12">Exemplo<a href="#exemplo-12" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee; $lastEmployee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName = :1&quot;;&quot;H@&quot;) //This entity selection contains 3 entities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $lastEmployee:=$employee.last() //$lastEmployee is the last entity of the $employees entity selection</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lock">.lock()<a href="#lock" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.lock</strong>( { <em>mode</em> : Integer } ) : Object</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>mode</td><td>Integer</td><td align="center">-&gt;</td><td><code>dk reload if stamp changed</code>: Recarregar antes de bloquear se o carimbo for alterado</td></tr><tr><td>Resultados</td><td>Object</td><td align="center">&lt;-</td><td>Resultado da operação de bloqueio</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-14">Descrição<a href="#descrição-14" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.lock()</code> põe uma fechadura pessimista no registro referenciado pela entidade. O bloqueio de <a href="/docs/pt/20-R4/ORDA/entities#entity-locking">é definido</a> para um registro e todas as referências da entidade no processo atual.</p><p>Outros processos verão este registro como bloqueado (o resultado. <code>a propriedade</code> uccess conterá Falso se eles tentarem bloquear a mesma entidade usando esta função). Só as funções executadas na sessão de &quot;bloqueio&quot; são permitidas para editar e guardar os atributos da entidade. A entidade pode ser carregada como apenas leitura por outras sessões, mas não serão capazes de introduzir e guardar valores.</p><p>Um registro bloqueado está desbloqueado:</p><ul><li>quando a função <a href="#unlock"><code>desbloqueia()</code></a> é chamada a uma entidade correspondente no mesmo processo</li><li>automaticamente, quando já não é referenciado por nenhuma entidade em memória. Por exemplo, se a fechadura for colocada apenas numa referência local de uma entidade, a entidade é desbloqueada quando a função termina. Enquanto houver referências à entidade em memória, o registo permanece bloqueado.</li></ul><blockquote><p>Uma entidade pode ser <a href="/docs/pt/20-R4/REST/lock">locked by a REST session</a>, em cujo caso só pode ser destravado pela sessão.</p></blockquote><p>Por padrão, se o parâmetro <em>modo</em> for omitido, a função retornará um erro (veja abaixo) se a mesma entidade tiver sido modificada (ou seja, O selo mudou) por outro processo ou usuário nesse meio tempo.</p><p>Caso contrário, você pode passar o parâmetro<code>dk reload if stamp changed</code> no parâmetro <em>mode</em> : neste caso, nenhum erro é retornado e a entidade é recarregada quando o selo mudou (se a entidade ainda existir e a chave primária ainda for a mesma).</p><p><strong>Resultados</strong></p><p>O objeto retornado por <code>.lock( )</code> contém as seguintes propriedades:</p><table><thead><tr><th>Propriedade</th><th></th><th>Tipo</th><th>Descrição</th></tr></thead><tbody><tr><td>success</td><td></td><td>boolean</td><td>true se a ação de bloqueio for bem sucedida (ou se a entidade já estiver bloqueada no processo atual), falso caso contrário.</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível apenas se a opção<code>dk reload if stamp changed</code> for usada:</em></strong></td></tr><tr><td><strong>wasReloaded</strong></td><td></td><td>boolean</td><td>verdadeiro se a entidade foi recarregada com sucesso, falso caso contrário.</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro:</em></strong></td></tr><tr><td>status(<!-- -->*<!-- -->)</td><td></td><td>number</td><td>Código de erro, ver abaixo</td></tr><tr><td>statusText(<!-- -->*<!-- -->)</td><td></td><td>text</td><td>Descrição do erro, ver abaixo</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro de bloqueio pessimista:</em></strong></td></tr><tr><td>lockKindText</td><td></td><td>text</td><td>&quot;Locked by record&quot; se trancado por um processo 4D, &quot;Locked by session&quot; se trancado por uma sessão REST</td></tr><tr><td>lockInfo</td><td></td><td>object</td><td>Informações sobre a origem do bloqueio. Retorna propriedades dependendo da origem da trava (processo 4D ou sessão REST)</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível só para um processo trava 4D:</em></strong></td></tr><tr><td></td><td>task_id</td><td>number</td><td>Process ID</td></tr><tr><td></td><td>user_name</td><td>text</td><td>Nome de usuário de sessão na máquina</td></tr><tr><td></td><td>user4d_alias</td><td>text</td><td>Nome ou apelido do usuário 4D</td></tr><tr><td></td><td>user4d_id</td><td>number</td><td>Id do usuário no diretório do banco de dados 4D</td></tr><tr><td></td><td>host_name</td><td>text</td><td>Nome da máquina</td></tr><tr><td></td><td>task_name</td><td>text</td><td>Nome de processo</td></tr><tr><td></td><td>client_version</td><td>text</td><td>Release of the client</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível só para um processo trava REST:</em></strong></td></tr><tr><td></td><td>host</td><td>text</td><td>URL que trava a entidade (por exemplo &quot;<a href="http://www.myserver.com%22" target="_blank" rel="noopener noreferrer">www.myserver.com&quot;</a>)</td></tr><tr><td></td><td>IPAddr</td><td>text</td><td>Endereço IP da trava (por exemplo. &quot;127.0.0.1&quot;)</td></tr><tr><td></td><td>userAgent</td><td>text</td><td>userAgent of the locker (e.g. Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36&quot;)</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro grave</em></strong> (a chave primária já existir, o disco estar cheio...):</td></tr><tr><td>errors</td><td></td><td>uma coleção de objetos</td><td></td></tr><tr><td></td><td>message</td><td>text</td><td>Mensagem de erro</td></tr><tr><td></td><td>assinatura de componentes</td><td>text</td><td>assinatura interna do componente (ex.: &quot;dmbg&quot; significa componente da base de dados)</td></tr><tr><td></td><td>errCode</td><td>number</td><td>Código de erro</td></tr></tbody></table><p>(<!-- -->*<!-- -->) Os seguintes valores podem ser devolvidos nas propriedades <em>status</em> e <em>statusText</em> do objecto <em>Result</em> em caso de erro:</p><table><thead><tr><th>Parâmetros</th><th>Valor</th><th>Comentário</th></tr></thead><tbody><tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>A entidade não existe mais nos dados. Este erro pode ocorrer nos seguintes casos:<li>a entidade foi descartada (o selo mudou e o espaço de memória é agora livre)</li><li>a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). Ao usar <code>.drop( )</code>, este erro pode ser retornado quando a opção &quot;dk force drop if stamp changed&quot; for usada. Ao usar <code>.lock( )</code>, este erro pode ser retornado quando a opção `dk reload if stamp changed&quot; for usado</li><br><strong>statusText asociado</strong>: &quot;A entidade já não existe&quot;</td></tr><tr><td><code>dk status locked</code></td><td>3</td><td>Informações sobre a origem do bloqueio</td></tr><tr><td><code>dk status serious error</code></td><td>4</td><td>Um erro grave é um erro de banco de dados de baixo nível (por exemplo, chave duplicada), um erro de hardware, etc.****Texto status associado: &quot;Outro erro&quot;</td></tr><tr><td><code>dk status stamp has changed</code></td><td>2</td><td>O valor de selo interno da entidade não corresponde a uma da entidade armazenada nos dados (bloqueio otimista).<li>com <code>.save( )</code>: erro apenas se a opção <code>dk auto merge&#x27; não for utilizada&lt;/li&gt;&lt;li&gt;com </code>.drop( )<code>: erro apenas se a opção </code>dk force drop if stamp changed&#x27; não for utilizada</li><li>com <code>.lock( )</code>: erro apenas se a opção <code>dk reload if stamp changed</code> não for usada</li><br><strong>StatusText associado</strong>: &quot;O carimbo foi alterado&quot;</td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-1-3">Exemplo 1<a href="#exemplo-1-3" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Exemplo com erro:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=ds. Employee.get(716)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.lock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Case of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT(&quot;You have locked &quot;+$employee.firstName+&quot; &quot;+$employee.lastName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.status=dk status stamp has changed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT($status.statusText)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End case</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-2-2">Exemplo 2<a href="#exemplo-2-2" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Exemplo com <code>dk reload se o selo mudou a opção</code>:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=ds. Employee.get(717)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.lock(dk reload if stamp changed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Case of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT(&quot;You have locked &quot;+$employee.firstName+&quot; &quot;+$employee.lastName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.status=dk status entity does not exist anymore)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT($status.statusText)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End case</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="next">.next()<a href="#next" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p>Parâmetros</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>4D. Entity</td><td align="center">&lt;-</td><td>Referência a entidade anterior na seleção da entidade (Null se não for encontrado)</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-15">Descrição<a href="#descrição-15" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.next()</code> retorna uma referência à entidade na primeira posição da seleção de entidade a qual a entidade pertence..</p><p>Se a entidade não pertencer a nenhuma seleção de entidade existente (ex: <a href="#getselection">.getSelection()</a> retorna Null), a função retorna um valor nulo.</p><p>Se não houver entidade seguinte válida na selecção da entidade (ou seja, se estiver na última entidade da selecção), a função devolve Null. Se a entidade seguinte tiver sido abandonada, a função devolve a entidade válida seguinte (e eventualmente Nula).</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-13">Exemplo<a href="#exemplo-13" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee; $nextEmployee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName = :1&quot;;&quot;H@&quot;) //This entity selection contains 3 entities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $nextEmployee:=$employee.next() //$nextEmployee is the second entity of the $employees entity selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="previous">.previous()<a href="#previous" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p>Parâmetros</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>4D. Entity</td><td align="center">&lt;-</td><td>Referência para a próxima entidade de uma seleção de entidade (Null se não for encontrado)</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-16">Descrição<a href="#descrição-16" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.previous()</code>  retorna uma referência à entidade na primeira posição da seleção de entidade a qual a entidade pertence..</p><p>Se a entidade não pertencer a nenhuma seleção de entidade existente (ex: <a href="#getselection">.getSelection()</a> retorna Null), a função retorna um valor nulo.</p><p>Se não houver nenhuma entidade anterior válida na seleção da entidade (ou seja, você está na primeira entidade da seleção), a função retorna Null. Se a entidade anterior foi abandonada, a função retorna a entidade válida anterior (e eventualmente Null).</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-14">Exemplo<a href="#exemplo-14" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee; $previousEmployee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName = :1&quot;;&quot;H@&quot;) //This entity selection contains 3 entities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $previousEmployee:=$employee.previous() //$previousEmployee is the first entity of the $employees entity selection</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="reload">.reload()<a href="#reload" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.reload()</strong> : Object</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>Object</td><td align="center">&lt;-</td><td>Objeto de estado</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-17">Descrição<a href="#descrição-17" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.reload()</code> recarrega o conteúdo da entidade em memóriade acordo com a informação armazenada na tabela relacionada a dataclass da datastore. A recarga só é feita se a entidade ainda existir com a mesma chave primária.</p><p><strong>Resultados</strong></p><p>O objeto retornado por <code>.reload( )</code> contém as seguintes propriedades:</p><table><thead><tr><th>Propriedade</th><th>Tipo</th><th>Descrição</th></tr></thead><tbody><tr><td>success</td><td>boolean</td><td>True se a ação de recarregar tiver sucesso, senão False.<strong><em>Disponível só no caso de erro</em></strong>:</td></tr><tr><td>status(<!-- -->*<!-- -->)</td><td>number</td><td>Código de erro, ver abaixo</td></tr><tr><td>statusText(<!-- -->*<!-- -->)</td><td>text</td><td>Descrição do erro, ver abaixo</td></tr></tbody></table><p>(<!-- -->*<!-- -->) Os seguintes valores podem ser devolvidos nas propriedades <em>status</em> e <em>statusText</em> do objecto <em>Result</em> em caso de erro:</p><table><thead><tr><th>Parâmetros</th><th>Valor</th><th>Comentário</th></tr></thead><tbody><tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>A entidade não existe mais nos dados. Este erro pode ocorrer nos seguintes casos:<br><li>a entidade foi descartada (o selo mudou e o espaço de memória é agora livre)</li><li>a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). Ao usar <code>.lock( )</code>, este erro pode ser retornado quando a opção `dk reload if stamp changed&quot; for usado</li><br><strong><em>statusText associado</em></strong>: &quot;a entidade já não existe&quot;</td></tr><tr><td><code>dk status serious error</code></td><td>4</td><td>Um erro grave é um erro de banco de dados de baixo nível (por exemplo, chave duplicada), um erro de hardware, etc.<br><strong><em>Texto status associado</em></strong>: &quot;Outro erro&quot;</td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-15">Exemplo<a href="#exemplo-15" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $result : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName=:1&quot;;&quot;Hollis&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee.firstName:=&quot;Mary&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $result:=$employee.reload()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Case of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($result.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT(&quot;Reload has been done&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($result.status=dk status entity does not exist anymore)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT(&quot;The entity has been dropped&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End case</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="save">.save()<a href="#save" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.save</strong>( { <em>mode</em> : Integer } ) : Object</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>mode</td><td>Integer</td><td align="center">-&gt;</td><td><code>dk auto merge</code>: Permite o modo de fusão automática</td></tr><tr><td>Resultados</td><td>Object</td><td align="center">&lt;-</td><td>Resultado da operação de salvamento</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-18">Descrição<a href="#descrição-18" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.save()</code> salva as mudanças feitas na entidade na tabela relacionada para a dataClass. na tabela relacionada para a dataClass Deve salvar este método depois de criar ou modificar uma entidade se quiser salvar as mudanças feitas nela.</p><p>A operação de salvar é realizada só se ao menos um atributo de entidade foi &quot;tocado&quot; (ver <a href="#touched"><code>.touched()</code></a> e funções <a href="#touchedattributes"><code>.touchedAttributes()</code></a> ). Senão a função não faz nada (o trigger não é ativado)</p><p>Em uma aplicação multiusuário ou multiprocesso, a função <code>.save()</code> é executada com um mecanismo  <a href="/docs/pt/20-R4/ORDA/entities#entity-locking">&quot;optimistic lock&quot;</a> onde uma estampa interna de tranca é automaticamente incrementada cada vez que o registro é salvado</p><p>Como padrão, se o parâmetro <em>mode</em> for omitido, o método retorna um erro (ver abaixo) sempre que a mesma entidade for modificada por outro processo ou u suário , sem importar os atributos modificados.</p><p>Senão, pode passar a opção <code>dk auto merge</code> no parâmetro <em>mode</em>: quando o modo automatico fusionado estiver ativado, uma modificação feita ao mesmo tempo que outro processo ou usuário na mesma entidade, mas em um diferente atributo, não vai resultar em um erro. Os dados resultantes salvos na entidade serão a combinação (&quot;merge&quot;/fusão) de todas as modificações não simultâneas (se modificações forem aplicadas ao mesmo atributo, a operação de salvar falha e um erro é retornado, mesmo com o modo auto fusão)</p><blockquote><p>O modo automático merge não está disponível para atributos de tipo Imagem, Objeto e Texto quando armazenado fora do registro. Mudanças simultâneas nesses atributos vão resultar em um erro <code>dk status stamp has changed</code> .</p></blockquote><p><strong>Resultados</strong></p><p>O objeto retornado por <code>.save()</code> contém as propriedades a seguir:</p><table><thead><tr><th>Propriedade</th><th></th><th>Tipo</th><th>Descrição</th></tr></thead><tbody><tr><td>success</td><td></td><td>boolean</td><td>True se a ação salvar tiver sucesso, senão False</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível só se utilizar a opção <code>dk auto merge</code></em></strong>:</td></tr><tr><td>autoMerged</td><td></td><td>boolean</td><td>True se fizer uma auto merge, senão False</td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível apenas em caso de erro</em></strong>:</td></tr><tr><td>status</td><td></td><td>number</td><td>Código de erro, <a href="#status-and-statustext">ver abaixo</a></td></tr><tr><td>statusText</td><td></td><td>text</td><td>Descrição do erro, <a href="#status-and-statustext">ver abaixo</a></td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível só no caso de erro de tranca pessimista</em></strong>:</td></tr><tr><td>lockKindText</td><td></td><td>text</td><td>&quot;Bloqueado pelo registro&quot;</td></tr><tr><td>lockInfo</td><td></td><td>object</td><td>Informações sobre a origem do bloqueio</td></tr><tr><td></td><td>task_id</td><td>number</td><td>Parâmetros</td></tr><tr><td></td><td>user_name</td><td>text</td><td>Nome de usuário de sessão na máquina</td></tr><tr><td></td><td>user4d_alias</td><td>text</td><td>Pseudônimo do usuário se definido por <code>SET USER ALIAS</code>, caso contrário, nome de usuário no diretório 4D</td></tr><tr><td></td><td>host_name</td><td>text</td><td>Nome da máquina</td></tr><tr><td></td><td>task_name</td><td>text</td><td>Nome de processo</td></tr><tr><td></td><td>client_version</td><td>text</td><td></td></tr><tr><td></td><td></td><td></td><td><strong><em>Disponível só em caso de erro grave</em></strong> (erro sério - por exemplo tentar duplicar uma chave primária, disco cheio...):</td></tr><tr><td>errors</td><td></td><td>uma coleção de objetos</td><td></td></tr><tr><td></td><td>message</td><td>text</td><td>Mensagem de erro</td></tr><tr><td></td><td>componentSignature</td><td>text</td><td>Assinatura interna do componente (ex.: &quot;dmbg&quot; significa componente da base de dados)</td></tr><tr><td></td><td>errCode</td><td>number</td><td>Código de erro</td></tr></tbody></table><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="status-e-statustext">status e statusText<a href="#status-e-statustext" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h5><p>Os valores abaixo podem ser retornado nas propriedades <code>status</code> e <code>statusText</code> do objeto Result no caso de um erro:</p><table><thead><tr><th>Parâmetros</th><th>Valor</th><th>Comentário</th></tr></thead><tbody><tr><td><code>dk status automerge failed</code></td><td>6</td><td>Parâmetros</td></tr><tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>A entidade não existe mais nos dados. Este erro pode ocorrer nos seguintes casos:<br><li>a entidade foi descartada (o selo mudou e o espaço de memória é agora livre)</li><li>a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). a entidade foi descartada e substituída por outra chave primária (o selo mudou e uma nova entidade agora usa o espaço de memória). Ao usar <code>.lock( )</code>, este erro pode ser retornado quando a opção `dk reload if stamp changed&quot; for usado</li><br><strong>statusText asociado</strong>: &quot;A entidade já não existe&quot;</td></tr><tr><td><code>dk status locked</code></td><td>3</td><td>Informações sobre a origem do bloqueio</td></tr><tr><td><code>dk status serious error</code></td><td>4</td><td>Um erro grave é um erro de banco de dados de baixo nível (por exemplo, chave duplicada), um erro de hardware, etc.****Texto status associado: &quot;Outro erro&quot;</td></tr><tr><td><code>dk status stamp has changed</code></td><td>2</td><td>O valor de selo interno da entidade não corresponde a uma da entidade armazenada nos dados (bloqueio otimista).<br><li>com <code>.save( )</code>: erro apenas se a opção <code>dk auto merge&#x27; não for utilizada&lt;/li&gt;&lt;li&gt;com </code>.drop( )<code>: erro apenas se a opção </code>dk force drop if stamp changed&#x27; não for utilizada</li><li>com <code>.lock( )</code>: erro apenas se a opção <code>dk reload if stamp changed</code> não for usada</li><br><strong>StatusText associado</strong>: &quot;O carimbo foi alterado&quot;</td></tr><tr><td><code>dk status wrong permission</code></td><td>1</td><td>Os privilégios actuais não permitem a salvaguarda da entidade. <strong>Associated statusText</strong>:</td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-1-4">Exemplo 1<a href="#exemplo-1-4" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Criar uma nova entidade:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=ds. Employee.new()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee.firstName:=&quot;Mary&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee.lastName:=&quot;Smith&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.save()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> If($status.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ALERT(&quot;Employee created&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End if</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-2-3">Exemplo 2<a href="#exemplo-2-3" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Atualizar uma entidade sem a opção <code>dk auto merge</code>:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName=:1&quot;;&quot;Smith&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees.first()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee.lastName:=&quot;Mac Arthur&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.save()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Case of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT(&quot;Employee updated&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.status=dk status stamp has changed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT($status.statusText)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End case</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-3-1">Exemplo 3<a href="#exemplo-3-1" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Atualizar uma entidade com a opção <code>dk auto merge</code> :</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $employees : cs. EmployeeSelection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employees:=ds. Employee.query(&quot;lastName=:1&quot;;&quot;Smith&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=$employees.first()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee.lastName:=&quot;Mac Arthur&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.save(dk auto merge)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Case of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT(&quot;Employee updated&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :($status.status=dk status automerge failed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ALERT($status.statusText)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End case</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="toobject">.toObject()<a href="#toobject" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.toObject</strong>() : Object<br><strong>.toObject</strong>( <em>filterString</em> : Text { ; <em>options</em> : Integer}  ) : Object<br><strong>.toObject</strong>( <em>filterCol</em> : Collection { ; <em>options</em> : Integer } ) : Object</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>filterString</td><td>Text</td><td align="center">-&gt;</td><td>Atributos a extrair (string separada por vírgulas)</td></tr><tr><td>filterCol</td><td>Collection</td><td align="center">-&gt;</td><td>Coleção de atributos a extrair</td></tr><tr><td>options</td><td>Integer</td><td align="center">-&gt;</td><td><code>dk with primary key</code>: adiciona a propriedade <!-- -->_<!-- -->KEY;<br><code>dk with stamp</code>: adiciona a propriedade <!-- -->_<!-- -->STAMP</td></tr><tr><td>Resultados</td><td>Object</td><td align="center">&lt;-</td><td>Objeto criado a partir da entidade</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-19">Descrição<a href="#descrição-19" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.toObject()</code> retorna um objeto que foi feito a partir da entidade. Os nomes das propriedades no objecto correspondem aos nomes dos atributos da entidade.</p><p>Se nenhum filtro for especificado ou se o parâmetro <em>filterString</em> conter uma string vazia ou  &quot;*&quot;, o objeto retornado vai conter:</p><ul><li>todos os atributos de entidade de armazenagem</li><li>atributos <code>relatedEntity</code> <a href="/docs/pt/20-R4/API/DataClassClass#attributename">kind</a>: obtém uma propriedade com o mesmo nome que a entidade relacionada (nome do link muitos para um). Atributo é extraido com um formulário simples.</li><li>atributos <code>relatedEntities</code> <a href="/docs/pt/20-R4/API/DataClassClass#attributename">kind</a>: atributo não é retornado.</li></ul><p>No primeiro par|âmetro, passa os atributos entidade a extrair. Pode passar:</p><ul><li><em>filterString</em>: uma string com rotas de propriedades separadas por vírgulas: &quot;propertyPath1, propertyPath2, ...&quot;, ou</li><li><em>filterCol</em>: uma coleção de strings: <!-- -->[<!-- -->&quot;propertyPath1&quot;,&quot;propertyPath2&quot;;...]</li></ul><p>Se um filtro for especificado para atributos de relatedEntity <a href="/docs/pt/20-R4/API/DataClassClass#attributename">kind</a>:</p><ul><li>propertyPath = &quot;relatedEntity&quot; -&gt; se extrai de forma simples: um objeto com a propriedade <!-- -->_<!-- -->_<!-- -->KEY (chave primária).</li><li>propertyPath = &quot;relatedEntity.*&quot; -&gt; todas as propriedades foram extraídas</li><li>propertyPath = &quot;relatedEntity.propertyName1; relatedEntity.propertyName2; ...&quot; -&gt; só se extraem essas propriedades</li></ul><p>Se um filtro for especificado para atributos de relatedEntities <a href="/docs/pt/20-R4/API/DataClassClass#attributename">kind</a>:</p><ul><li>propertyPath = &quot;relatedEntities.*&quot; -&gt; se extraem todas as propriedades</li><li>propertyPath = &quot;relatedEntities.propertyName1; relatedEntities.propertyName2; ...&quot; -&gt; só se extraem essas propriedades</li></ul><p>No parâmetro <em>options</em> pode passar o selector <code>ddk with primary key</code> ou<code>dk with stamp</code> para adicionar as chaves primárias da entidade ou os selos nos objetos extraídos.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Alerta</div><div class="admonitionContent_S0QG"><p>Se utilizar outro atributo que não a chave primária como o atributo Um numa relação, o valor deste atributo será escrito na propriedade &quot;__KEY&quot;. Tenha em mente que é recomendado usar a chave primária como um atributo nas suas relações, especialmente quando usa funções <code>.toObject()</code> e <code>.fromObject()</code>.</p></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-1-5">Exemplo 1<a href="#exemplo-1-5" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A estrutura abaixo será usada nos exemplos desta seção:</p><p><img loading="lazy" src="/docs/pt/assets/images/dataclassAttribute4-96c4a541a87b02eee83316636b0ae059.png" width="1000" height="610" class="img_ev3q"></p><p>Sem parâmetros de filtro:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">employeeObject:=employeeSelected.toObject()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Retorna:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ID&quot;: 413,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;firstName&quot;: &quot;Greg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;lastName&quot;: &quot;Wahl&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;salary&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;birthDate&quot;: &quot;1963-02-01T00:00:00.000Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;woman&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;managerID&quot;: 412,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employerID&quot;: 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;photo&quot;: &quot;[object Picture]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;extra&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employer&quot;: { // relatedEntity extraída com forma simples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__KEY&quot;: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;manager&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__KEY&quot;: 412</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-2-4">Exemplo 2<a href="#exemplo-2-4" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Extrair a chave primária e a estampa:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">employeeObject:=employeeSelected.toObject(&quot;&quot;;dk with primary key+dk with stamp)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Retorna:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;__KEY&quot;: 413,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;__STAMP&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ID&quot;: 413,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;firstName&quot;: &quot;Greg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;lastName&quot;: &quot;Wahl&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;salary&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;birthDate&quot;: &quot;1963-02-01T00:00:00.000Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;woman&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;managerID&quot;: 412,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employerID&quot;: 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;photo&quot;: &quot;[object Picture]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;extra&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__KEY&quot;: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;manager&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__KEY&quot;: 412</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-3-2">Exemplo 3<a href="#exemplo-3-2" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Expande todas as propriedades de <code>relatedEntities</code>:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">employeeObject:=employeeSelected.toObject(&quot;directReports.*&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;directReports&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ID&quot;: 418,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;firstName&quot;: &quot;Lorena&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;lastName&quot;: &quot;Boothe&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;salary&quot;: 44800,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;birthDate&quot;: &quot;1970-10-02T00:00:00.000Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;woman&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;managerID&quot;: 413,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;employerID&quot;: 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;photo&quot;: &quot;[object Picture]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;extra&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;employer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;__KEY&quot;: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;manager&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;__KEY&quot;: 413</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ID&quot;: 419,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;firstName&quot;: &quot;Drew&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;lastName&quot;: &quot;Caudill&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;salary&quot;: 41000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;birthDate&quot;: &quot;2030-01-12T00:00:00.000Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;woman&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;managerID&quot;: 413,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;employerID&quot;: 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;photo&quot;: &quot;[object Picture]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;extra&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;employer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;__KEY&quot;: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;manager&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;__KEY&quot;: 413</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ID&quot;: 420,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;firstName&quot;: &quot;Nathan&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;lastName&quot;: &quot;Gomes&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;salary&quot;: 46300,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;birthDate&quot;: &quot;2010-05-29T00:00:00.000Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;woman&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;managerID&quot;: 413,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;employerID&quot;: 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;photo&quot;: &quot;[object Picture]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;extra&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;employer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;__KEY&quot;: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;manager&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;__KEY&quot;: 413</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-16">Exemplo<a href="#exemplo-16" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Extração de algumas propriedades de <code>relatedEntities</code>:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> employeeObject:=employeeSelected.toObject(&quot;firstName, directReports.lastName&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Retorna:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;firstName&quot;: &quot;Greg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;directReports&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;lastName&quot;: &quot;Boothe&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;lastName&quot;: &quot;Caudill&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;lastName&quot;: &quot;Gomes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-2-5">Exemplo 2<a href="#exemplo-2-5" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Extrair <code>relatedEntity</code> com formulário simples:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> $coll:=New collection(&quot;firstName&quot;;&quot;employer&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> employeeObject:=employeeSelected.toObject($coll)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Retorna:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;firstName&quot;: &quot;Greg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__KEY&quot;: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-6-1">Exemplo 6<a href="#exemplo-6-1" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Expande todas as propriedades de <code>relatedEntity</code>:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> employeeObject:=employeeSelected.toObject(&quot;employer.*&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Retorna:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ID&quot;: 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;India Astral Secretary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;creationDate&quot;: &quot;1984-08-25T00:00:00.000Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;revenues&quot;: 12000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;extra&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-3-3">Exemplo 3<a href="#exemplo-3-3" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Extração de algumas propriedades de <code>relatedEntity</code>:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> $col:=New collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $col.push(&quot;employer.name&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $col.push(&quot;employer.revenues&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> employeeObject:=employeeSelected.toObject($col)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Retorna:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;employer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;India Astral Secretary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;revenues&quot;: 12000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="touched-">.touched( )<a href="#touched-" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.touched()</strong> : Boolean</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>Parâmetros</td><td align="center">&lt;-</td><td>True se tiver modificado ao menos um atributo da entidade e ainda não for salvo, se não, False</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-20">Descrição<a href="#descrição-20" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.touched()</code> comprova se um atributo da entidade tiver sido modificado ou não desde que se carregou a entidade na memória ou se salvou.</p><p>Se um atributo for modificado ou calculado, a função retorna True, senão retorna False. Pode usar essa função para determinar se precisar salvar a entidade.</p><p>Esta função retorna False para uma nova entidade que foi criada (com <a href="/docs/pt/20-R4/API/DataClassClass#new"><code>.new( )</code></a>). Note entretanto que se usar uma função que calcule um atributo da entidade, a função <code>.touched()</code> vai retornar True. Por exemplo se chamar <a href="#getkey"><code>.getKey()</code></a> para calcular a chave primária, <code>.touched()</code> retorna True.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-17">Exemplo<a href="#exemplo-17" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>Neste exemplo, vemos se é necessário salvar a entidade:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $emp : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp:=ds. Employee.get(672)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp.firstName:=$emp.firstName //Even if updated with the same value, the attribute is marked as touched</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> If($emp.touched()) //if at least one of the attributes has been changed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $emp.save()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End if // otherwise, no need to save the entity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="touchedattributes-">.touchedAttributes( )<a href="#touchedattributes-" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.touchedAttributes()</strong> : Collection</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>Collection</td><td align="center">&lt;-</td><td>Nomes de atributos touched ou coleção vazia</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-21">Descrição<a href="#descrição-21" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.indexOf()</code> retorna a posição da entidade em uma seleção de entidade.</p><p>Isso aplica para atributos do <a href="/docs/pt/20-R4/API/DataClassClass#attributename">tipo</a> <code>storage</code> ou <code>relatedEntity</code>.</p><p>No caso de uma entidade relacionada que foi tocada (touched) *ou seja, a chave primária) o nome da entidade relacionada e sua chave primária são retornados.</p><p>Se nenhum atributo de entidade for tocado, o método retorna uma coleção vazia.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-1-6">Exemplo 1<a href="#exemplo-1-6" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $touchedAttributes : Collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $emp : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $touchedAttributes:=New collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp:=ds. Employee.get(725)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp.firstName:=$emp.firstName //Even if updated with the same value, the attribute is marked as touched</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp.lastName:=&quot;Martin&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $touchedAttributes:=$emp.touchedAttributes()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //$touchedAttributes: [&quot;firstName&quot;,&quot;lastName&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-2-6">Exemplo 2<a href="#exemplo-2-6" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $touchedAttributes : Collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $emp : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $company : cs. CompanyEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $touchedAttributes:=New collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp:=ds. Employee.get(672)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp.firstName:=$emp.firstName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp.lastName:=&quot;Martin&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $company:=ds. Company.get(121)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $emp.employer:=$company</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $touchedAttributes:=$emp.touchedAttributes()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //collection $touchedAttributes: [&quot;firstName&quot;,&quot;lastName&quot;,&quot;employer&quot;,&quot;employerID&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Nesse modo:</p><ul><li>firstName and lastName tem um tipo <code>storage</code></li><li>employer tem um tipo <code>relatedEntity</code></li><li>employerID é a chave estrangeira da entidade relacionada employer</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unlock">.unlock()<a href="#unlock" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Histórico</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Release</th><th>Mudanças</th></tr></thead><tbody><tr><td>17</td><td>Adicionado</td></tr></tbody></table></div></div></details><p><strong>.unlock()</strong> : Object</p><table><thead><tr><th>Parâmetro</th><th>Tipo</th><th align="center"></th><th>Descrição</th></tr></thead><tbody><tr><td>Resultados</td><td>Object</td><td align="center">&lt;-</td><td>Objeto de estado</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="descrição-22">Descrição<a href="#descrição-22" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><p>A função <code>.unlock()</code> remove a tranca pessimista no registro correspondente à entidade na datastore e tabela relacionada a dataclasse.</p><blockquote><p>Para saber mais veja <a href="/docs/pt/20-R4/ORDA/entities#entity-locking">Entity locking</a>.</p></blockquote><p>Um registro é destrancado automaticamente quando não for mais referenciado por nenhuma entidade no processo de trancamento (por exemplo, se uma tranca for posta apenas na referência local da entidade, a entidade e o registro é destrancado quando o processo terminar).</p><blockquote><p>Quando um registro for trancado, deve ser destrancado do processo de trancamento e na referência de entidade que colocou a tranca. Por exemplo:</p></blockquote><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> $e1:=ds. Emp.all()[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $e2:=ds. Emp.all()[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $res:=$e1.lock() //$res.success=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $res:=$e2.unlock() //$res.success=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $res:=$e1.unlock() //$res.success=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Resultados</strong></p><p>O objeto retornado por <code>.unlock()</code> contém a propriedade abaixo:</p><table><thead><tr><th>Propriedade</th><th>Tipo</th><th>Descrição</th></tr></thead><tbody><tr><td>success</td><td>Parâmetros</td><td>Verdadeiro se a ação de destrancar for bem-sucedida, Falso caso contrário. Se o desbloqueio for feito em uma entidade abandonada, em um registro não bloqueado ou em um registro bloqueado por outro processo ou entidade, o sucesso é False.</td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exemplo-18">Exemplo<a href="#exemplo-18" class="hash-link" aria-label="Link direto para o cabeçalho" title="Link direto para o cabeçalho">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> var $employee : cs. EmployeeEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $employee:=ds. Employee.get(725)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.lock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ... //processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> $status:=$employee.unlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> If($status.success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ALERT(&quot;The entity is now unlocked&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> End if</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FEntityClass.md%20(20-R4)&amp;body=Please%20enter%20your%20comment%3A" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Comentar esta página</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Navegação nas páginas dos documentos"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/pt/20-R4/API/EmailObjectClass"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">Email</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pt/20-R4/API/EntitySelectionClass"><div class="pagination-nav__sublabel">Próximo</div><div class="pagination-nav__label">EntitySelection</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#resumo" class="table-of-contents__link toc-highlight">Resumo</a></li><li><a href="#attributename" class="table-of-contents__link toc-highlight">.<em>attributeName</em></a></li><li><a href="#clone" class="table-of-contents__link toc-highlight">.clone()</a></li><li><a href="#diff" class="table-of-contents__link toc-highlight">.diff()</a></li><li><a href="#drop" class="table-of-contents__link toc-highlight">.drop()</a></li><li><a href="#first" class="table-of-contents__link toc-highlight">.first()</a></li><li><a href="#fromobject" class="table-of-contents__link toc-highlight">.fromObject()</a></li><li><a href="#getdataclass" class="table-of-contents__link toc-highlight">.getDataClass()</a></li><li><a href="#getkey" class="table-of-contents__link toc-highlight">.getKey()</a></li><li><a href="#getremotecontextattributes" class="table-of-contents__link toc-highlight">.getRemoteContextAttributes()</a></li><li><a href="#getselection" class="table-of-contents__link toc-highlight">.getSelection()</a></li><li><a href="#getstamp" class="table-of-contents__link toc-highlight">.getStamp()</a></li><li><a href="#indexof" class="table-of-contents__link toc-highlight">.indexOf()</a></li><li><a href="#isnew" class="table-of-contents__link toc-highlight">.isNew()</a></li><li><a href="#last" class="table-of-contents__link toc-highlight">.last()</a></li><li><a href="#lock" class="table-of-contents__link toc-highlight">.lock()</a></li><li><a href="#next" class="table-of-contents__link toc-highlight">.next()</a></li><li><a href="#previous" class="table-of-contents__link toc-highlight">.previous()</a></li><li><a href="#reload" class="table-of-contents__link toc-highlight">.reload()</a></li><li><a href="#save" class="table-of-contents__link toc-highlight">.save()</a></li><li><a href="#toobject" class="table-of-contents__link toc-highlight">.toObject()</a></li><li><a href="#touched-" class="table-of-contents__link toc-highlight">.touched( )</a></li><li><a href="#touchedattributes-" class="table-of-contents__link toc-highlight">.touchedAttributes( )</a></li><li><a href="#unlock" class="table-of-contents__link toc-highlight">.unlock()</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Comunidade</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Centro de desenvolvimento 4D</a></li><li class="footer__item"><a href="https://blog.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Blog</a></li><li class="footer__item"><a href="https://discuss.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Forum</a></li><li class="footer__item"><a href="https://facebook.com/4Dsoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://twitter.com/4Dsoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://youtube.com/user/4Dsoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://github.com/4D" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div><div class="col footer__col"><div class="footer__title">Suporte</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://doc.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Doc Center (Onde tudo começou)</a></li><li class="footer__item"><a href="https://kb.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Base de conhecimento</a></li><li class="footer__item"><a href="https://us.4d.com/product-download/Feature-Release" target="_blank" rel="noopener noreferrer" class="footer__link-item">Baixares<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/resources" target="_blank" rel="noopener noreferrer" class="footer__link-item">Resources<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/4d-technical-support" target="_blank" rel="noopener noreferrer" class="footer__link-item">Obter suporte<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Empresa</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://us.4d.com/about-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sobre 4D<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contactar-nos<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/4d-around-the-world" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D no mundo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/Careers" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 4D SAS - Todos os direitos reservados</div></div></div></footer></div>
<script src="/docs/pt/assets/js/runtime~main.79e78db5.js"></script>
<script src="/docs/pt/assets/js/main.935b262f.js"></script>
</body>
</html>