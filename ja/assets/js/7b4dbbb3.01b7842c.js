"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["24288"],{755775:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>a,toc:()=>d,default:()=>h,metadata:()=>r,assets:()=>o,contentTitle:()=>l});var r=JSON.parse('{"id":"ORDA/orda-events","title":"Entity Events","description":"\u5C65\u6B74","source":"@site/i18n/ja/docusaurus-plugin-content-docs/version-20-R10/ORDA/orda-events.md","sourceDirName":"ORDA","slug":"/ORDA/orda-events","permalink":"/docs/ja/20-R10/ORDA/orda-events","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20ORDA%2Forda-events.md%20(20-R10)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R10","frontMatter":{"id":"orda-events","title":"Entity Events"},"sidebar":"docs","previous":{"title":"\u30C7\u30FC\u30BF\u64CD\u4F5C","permalink":"/docs/ja/20-R10/ORDA/entities"},"next":{"title":"\u30B0\u30ED\u30FC\u30D0\u30EB\u30B9\u30BF\u30F3\u30D7\u306E\u4F7F\u3044\u65B9","permalink":"/docs/ja/20-R10/ORDA/global-stamp"}}'),s=n(785893),i=n(250065);let a={id:"orda-events",title:"Entity Events"},l=void 0,o={},d=[{value:"\u6982\u8981",id:"\u6982\u8981",level:2},{value:"Event level",id:"event-level",level:3},{value:"Execution in remote configurations",id:"execution-in-remote-configurations",level:3},{value:"Summary table",id:"summary-table",level:3},{value:"<em>event</em> parameter",id:"event-parameter",level:2},{value:"Event function description",id:"event-function-description",level:2},{value:"<code>Function event touched</code>",id:"function-event-touched",level:3},{value:"\u30B7\u30F3\u30BF\u30C3\u30AF\u30B9",id:"\u30B7\u30F3\u30BF\u30C3\u30AF\u30B9",level:4},{value:"\u4F8B\u984C 1",id:"\u4F8B\u984C-1",level:4},{value:"\u4F8B\u984C 2",id:"\u4F8B\u984C-2",level:4},{value:"Example 3 (diagram): Client/server with the <code>local</code> keyword:",id:"example-3-diagram-clientserver-with-the-local-keyword",level:4},{value:"Example 4 (diagram): Client/server without the <code>local</code> keyword",id:"example-4-diagram-clientserver-without-the-local-keyword",level:4},{value:"Example 5 (diagram): Qodly application",id:"example-5-diagram-qodly-application",level:4}];function c(e){let t={a:"a",admonition:"admonition",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.details,{children:[(0,s.jsx)(t.summary,{children:"\u5C65\u6B74"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"\u30EA\u30EA\u30FC\u30B9"}),(0,s.jsx)(t.th,{children:"\u5185\u5BB9"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"20 R10"}),(0,s.jsx)(t.td,{children:"touched event added"})]})})]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Entity events are functions that are automatically invoked by ORDA each time entities and entity attributes are manipulated (added, deleted, or modified). You can write very simple events, and then make them more sophisticated."}),"\n",(0,s.jsx)(t.p,{children:"You cannot directly trigger event function execution. Events are called automatically by ORDA based on user actions or operations performed through code on entities and their attributes."}),"\n",(0,s.jsx)(t.admonition,{title:"note Compatibility note",type:"info",children:(0,s.jsx)(t.p,{children:"ORDA entity events in the datastore are equivalent to triggers in the 4D database. However, actions triggered at the 4D database level using the 4D classic language commands or standard actions do not trigger ORDA events."})}),"\n",(0,s.jsx)(t.h2,{id:"\u6982\u8981",children:"\u6982\u8981"}),"\n",(0,s.jsx)(t.h3,{id:"event-level",children:"Event level"}),"\n",(0,s.jsxs)(t.p,{children:["A entity event function is always defined in the ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#entity-class",children:"Entity class"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["It can be set at the ",(0,s.jsx)(t.strong,{children:"entity"})," level and/or the ",(0,s.jsx)(t.strong,{children:"attribute"})," level (it includes ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#computed-attributes",children:(0,s.jsx)(t.strong,{children:"computed attributes"})}),"). In the first case, it will be triggered for any attributes of the entity; on the other case, it will only be triggered for the targeted attribute."]}),"\n",(0,s.jsx)(t.p,{children:"For the same event, you can define different functions for different attributes."}),"\n",(0,s.jsx)(t.p,{children:"You can also define the same event at both attribute and entity levels. The attribute event is called first and then the entity event."}),"\n",(0,s.jsx)(t.h3,{id:"execution-in-remote-configurations",children:"Execution in remote configurations"}),"\n",(0,s.jsx)(t.p,{children:"Usually, ORDA events are executed on the server."}),"\n",(0,s.jsxs)(t.p,{children:["In client/server configuration however, the ",(0,s.jsx)(t.code,{children:"touched()"})," event function can be executed on the ",(0,s.jsx)(t.strong,{children:"server or the client"}),", depending on the use of ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#local-functions",children:(0,s.jsx)(t.code,{children:"local"})})," keyword. A specific implementation on the client side allows the triggering of the event on the client."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["ORDA ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#class-constructor",children:(0,s.jsx)(t.code,{children:"constructor()"})})," functions are always executed on the client."]})}),"\n",(0,s.jsxs)(t.p,{children:["With other remote configurations (i.e. Qodly applications, ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/REST/REST_requests",children:"REST API requests"}),", or requests through ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/commands/open-datastore",children:(0,s.jsx)(t.code,{children:"Open datastore"})}),"), the ",(0,s.jsx)(t.code,{children:"touched()"})," event function is always executed ",(0,s.jsx)(t.strong,{children:"server-side"}),'. It means that you have to make sure the server can "see" that an attribute has been touched to trigger the event (see below).']}),"\n",(0,s.jsx)(t.h3,{id:"summary-table",children:"Summary table"}),"\n",(0,s.jsx)(t.p,{children:"The following table lists ORDA entity events along with their rules."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u30A4\u30D9\u30F3\u30C8"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u30EC\u30D9\u30EB"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Function name"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"(C/S) Executed on"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Entity instantiation"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Entity"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#class-constructor-1",children:(0,s.jsx)(t.code,{children:"constructor()"})})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"client"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Attribute touched"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5C5E\u6027"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"event touched <attrName>()"})}),(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Depends on ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#local-functions",children:(0,s.jsx)(t.code,{children:"local"})})," keyword"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"}}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Entity"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"event touched()"})}),(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Depends on ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#local-functions",children:(0,s.jsx)(t.code,{children:"local"})})," keyword"]})]})]})]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#class-constructor-1",children:(0,s.jsx)(t.code,{children:"constructor()"})})," function is not actually an event function but is always called when a new entity is instantiated."]})}),"\n",(0,s.jsxs)(t.h2,{id:"event-parameter",children:[(0,s.jsx)(t.em,{children:"event"})," parameter"]}),"\n",(0,s.jsxs)(t.p,{children:["Event functions accept a single ",(0,s.jsx)(t.em,{children:"event"})," object as parameter. When the function is called, the parameter is filled with several properties:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u30D7\u30ED\u30D1\u30C6\u30A3\u540D"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u5229\u7528\u53EF\u80FD\u6027"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u578B"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"\u8AAC\u660E"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"kind"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Always"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u6587\u5B57\u5217"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'\u30A4\u30D9\u30F3\u30C8\u540D("touched")'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.em,{children:"attributeName"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5C5E\u6027\u306B\u95A2\u3059\u308B\u30A4\u30D9\u30F3\u30C8\u306E\u307F"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u6587\u5B57\u5217"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Attribute name (",(0,s.jsx)(t.em,{children:"e.g."}),' "firstname")']})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.em,{children:"dataClassName"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Always"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u6587\u5B57\u5217"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Dataclass name (",(0,s.jsx)(t.em,{children:"e.g."}),' "Company")']})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"event-function-description",children:"Event function description"}),"\n",(0,s.jsx)(t.h3,{id:"function-event-touched",children:(0,s.jsx)(t.code,{children:"Function event touched"})}),"\n",(0,s.jsx)(t.h4,{id:"\u30B7\u30F3\u30BF\u30C3\u30AF\u30B9",children:"\u30B7\u30F3\u30BF\u30C3\u30AF\u30B9"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-4d",children:"{local} Function event touched($event : Object)\n{local} Function event touched <attributeName>($event : Object)\n// code\n"})}),"\n",(0,s.jsx)(t.p,{children:"This event is triggered each time a value is modified in the entity."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"\u95A2\u6570\u3092\u30A8\u30F3\u30C6\u30A3\u30C6\u30A3\u30EC\u30D9\u30EB\u3067\u5B9A\u7FA9\u3057\u3066\u3044\u305F\u5834\u5408(\u7B2C\u4E00\u30B7\u30F3\u30BF\u30C3\u30AF\u30B9)\u3001\u305D\u306E\u95A2\u6570\u306F\u30A8\u30F3\u30C6\u30A3\u30C6\u30A3\u306E\u4EFB\u610F\u306E\u5C5E\u6027\u306B\u304A\u3051\u308B\u5909\u66F4\u306B\u5BFE\u3057\u3066\u30C8\u30EA\u30AC\u30FC\u3055\u308C\u307E\u3059\u3002"}),"\n",(0,s.jsx)(t.li,{children:"\u95A2\u6570\u3092\u5C5E\u6027\u30EC\u30D9\u30EB\u3067\u5B9A\u7FA9\u3057\u3066\u3044\u305F\u5834\u5408(\u7B2C\u4E8C\u30B7\u30F3\u30BF\u30C3\u30AF\u30B9)\u3001\u95A2\u6570\u306F\u305D\u306E\u5C5E\u6027\u306B\u5BFE\u3059\u308B\u5909\u66F4\u306B\u5BFE\u3057\u3066\u306E\u307F\u30C8\u30EA\u30AC\u30FC\u3055\u308C\u307E\u3059\u3002"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This event is triggered as soon as the 4D Server / 4D engine can detect a modification of attribute value which can be due to the following actions:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["in ",(0,s.jsxs)(t.strong,{children:["client/server with the ",(0,s.jsxs)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#local-functions",children:[(0,s.jsx)(t.code,{children:"local"})," keyword"]})]})," or in ",(0,s.jsx)(t.strong,{children:"4D single-user"}),":\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"the user sets a value on a 4D form,"}),"\n",(0,s.jsxs)(t.li,{children:["the 4D code makes an assignment with the ",(0,s.jsx)(t.code,{children:":="})," operator. The event is also triggered in case of self-assignment (",(0,s.jsx)(t.code,{children:"$entity.attribute:=$entity.attribute"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["in ",(0,s.jsxs)(t.strong,{children:["client/server without the ",(0,s.jsx)(t.code,{children:"local"})," keyword"]}),": some 4D code that makes an assignment with the ",(0,s.jsx)(t.code,{children:":="})," operator is ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/commands/execute-on-server",children:"executed on the server"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["in ",(0,s.jsxs)(t.strong,{children:["client/server without the ",(0,s.jsx)(t.code,{children:"local"})," keyword"]}),", in ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.a,{href:"https://developer.qodly.com/docs",children:"Qodly application"})})," and ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/commands/open-datastore",children:"remote datastore"})}),": the entity is received on 4D Server while calling an ORDA function (on the entity or with the entity as parameter). It means that you might have to implement a ",(0,s.jsx)(t.em,{children:"refresh"})," or ",(0,s.jsx)(t.em,{children:"preview"})," function on the remote application that sends an ORDA request to the server and triggers the event."]}),"\n",(0,s.jsxs)(t.li,{children:["with the REST server: the value is received on the REST server with a ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/REST/method#methodupdate",children:"REST request"})," (",(0,s.jsx)(t.code,{children:"$method=update"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["The function receives an ",(0,s.jsxs)(t.a,{href:"#event-parameter",children:[(0,s.jsx)(t.em,{children:"event"})," object"]})," as parameter."]}),"\n",(0,s.jsxs)(t.p,{children:["\u3053\u306E\u30A4\u30D9\u30F3\u30C8\u304C\u30A8\u30E9\u30FC\u3092",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/commands/throw",children:"throw"})," \u3059\u308B\u5834\u5408\u3067\u3082\u3001\u9032\u884C\u4E2D\u306E\u30A2\u30AF\u30B7\u30E7\u30F3\u306F\u505C\u6B62\u3057\u307E\u305B\u3093\u3002"]}),"\n",(0,s.jsxs)(t.admonition,{type:"note",children:[(0,s.jsx)(t.p,{children:"This event is also triggered:"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["when attributes are assigned by the ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#class-constructor-1",children:(0,s.jsx)(t.code,{children:"constructor()"})})," event,"]}),"\n",(0,s.jsxs)(t.li,{children:["when attributes are edited through the ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/Admin/dataExplorer",children:"Data Explorer"}),"."]}),"\n"]})]}),"\n",(0,s.jsx)(t.h4,{id:"\u4F8B\u984C-1",children:"\u4F8B\u984C 1"}),"\n",(0,s.jsx)(t.p,{children:"You want to uppercase all text attributes of an entity when it is updated."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-4d",children:"    //ProductsEntity class\nFunction event touched($event : Object)\n	\n	If (Value type(This[$event.attributeName])=Is text)\n		This[$event.attributeName]:=Uppercase(This[$event.attributeName])\n	End if \n"})}),"\n",(0,s.jsx)(t.h4,{id:"\u4F8B\u984C-2",children:"\u4F8B\u984C 2"}),"\n",(0,s.jsxs)(t.p,{children:['The "touched" event is useful when it is not possible to write indexed query code in ',(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#function-query-attributename",children:(0,s.jsx)(t.code,{children:"Function query()"})})," for a ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#computed-attributes",children:"computed attribute"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["This is the case for example, when your ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#function-query-attributename",children:(0,s.jsx)(t.code,{children:"query"})})," function has to compare the value of different attributes from the same entity with each other. You must use formulas in the returned ORDA query -- which triggers sequential queries."]}),"\n",(0,s.jsx)(t.p,{children:"To fully understand this case, let's examine the following two calculated attributes:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-4d",children:"Function get onGoing() : Boolean\n        return ((This.departureDate<=Current date) & (This.arrivalDate>=Current date))\n\nFunction get sameDay() : Boolean\n        return (This.departureDate=This.arrivalDate)\n"})}),"\n",(0,s.jsx)(t.p,{children:"Even though they are very similar, these functions cannot be associated with identical queries because they do not compare the same types of values. The first compares attributes to a given value, while the second compares attributes to each other."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["For the ",(0,s.jsx)(t.em,{children:"onGoing"})," attribute, the ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#function-query-attributename",children:(0,s.jsx)(t.code,{children:"query"})})," function is simple to write and uses indexed attributes:"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-4d",children:'Function query onGoing($event : Object) : Object\n    var $operator : Text\n    var $myQuery : Text\n    var $onGoingValue : Boolean\n    var $parameters : Collection\n    $parameters:=New collection()\n\n    $operator:=$event.operator\n    Case of \n            : (($operator="=") | ($operator="==") | ($operator="==="))\n                $onGoingValue:=Bool($event.value)\n            : (($operator="!=") | ($operator="!=="))\n                $onGoingValue:=Not(Bool($event.value))\n            Else \n                return {query: ""; parameters: $parameters}\n    End case \n\n    $myQuery:=($onGoingValue) ? "departureDate <= :1 AND arrivalDate >= :1" : "departureDate > :1 OR arrivalDate < :1"\n        // the ORDA query string uses indexed attributes, it will be indexed\n    $parameters.push(Current date)\n    return {query: $myQuery; parameters: $parameters}\n'})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["For the ",(0,s.jsx)(t.em,{children:"sameDay"})," attribute, the ",(0,s.jsx)(t.a,{href:"/docs/ja/20-R10/ORDA/ordaClasses#function-query-attributename",children:(0,s.jsx)(t.code,{children:"query"})})," function requires an ORDA query based on formulas and will be sequential:"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-4d",children:'Function query sameDay($event : Object) : Text\n    var $operator : Text\n    var $sameDayValue : Boolean\n\n    $operator:=$event.operator\n    Case of \n        : (($operator="=") | ($operator="==") | ($operator="==="))\n            $sameDayValue:=Bool($event.value)\n        : (($operator="!=") | ($operator="!=="))\n            $sameDayValue:=Not(Bool($event.value))\n        Else \n            return ""\n        End case \n\n    return ($sameDayValue) ? "eval(This.departureDate = This.arrivalDate)" : "eval(This.departureDate != This.arrivalDate)"\n        // the ORDA query string uses a formula, it will not be indexed\n\n'})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Using a ",(0,s.jsx)(t.strong,{children:"scalar"})," ",(0,s.jsx)(t.em,{children:"sameDay"}),' attribute updated when other attributes are "touched" will save time:']}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-4d",children:"    //BookingEntity class\n\nFunction event touched departureDate($event : Object) \n\n    This.sameDay:=(This.departureDate = This.arrivalDate) \n//\n//\nFunction event touched arrivalDate($event : Object) \n\n    This.sameDay:=(This.departureDate = This.arrivalDate)\n\n"})}),"\n",(0,s.jsxs)(t.h4,{id:"example-3-diagram-clientserver-with-the-local-keyword",children:["Example 3 (diagram): Client/server with the ",(0,s.jsx)(t.code,{children:"local"})," keyword:"]}),"\n",(0,s.jsx)(t.mermaid,{value:'\nsequenceDiagram\n\n    Client->>+Server: $people:=ds.People.all().first()\n\n    Client->>+Client: $people.lastname:="Brown"\n   Note over Client: local Function event touched lastname($event : Object) <br>  This.lastname:=Uppercase(This.lastname)\n\nNote over Client:$people.lastname is uppercased\n\n    Client->>+Server: $people.apply()\n   \n   Note over Server: The $people entity is received with the lastname attribute uppercased\n'}),"\n",(0,s.jsxs)(t.h4,{id:"example-4-diagram-clientserver-without-the-local-keyword",children:["Example 4 (diagram): Client/server without the ",(0,s.jsx)(t.code,{children:"local"})," keyword"]}),"\n",(0,s.jsx)(t.mermaid,{value:'\nsequenceDiagram\n\n    Client->>+Server: $people:=ds.People.all().first()\n\n    Client->>+Client: $people.lastname:="Brown"\n\n   Note over Client:$people.lastname is not uppercased\n\n    Client->>+Server: $people.apply()\n\n   Note over Server: Function event touched lastname($event : Object) <br>  This.lastname:=Uppercase(This.lastname)\n\n    Server--\x3e>-Client: The $people entity is updated\n\n   Note over Client:$people.lastname is uppercased\n\n'}),"\n",(0,s.jsx)(t.h4,{id:"example-5-diagram-qodly-application",children:"Example 5 (diagram): Qodly application"}),"\n",(0,s.jsx)(t.mermaid,{value:"\nsequenceDiagram\n\nQodly page->>+ Server: Get an entity into the People Qodly source\n\nQodly page->>+Qodly page: The user updates People.lastname\n\nNote over Qodly page: The People Qodly source lastname attribute is not uppercased\n\nQodly page->>+ Server: Function call People.apply()\n\nNote over Server: Function event touched lastname($event : Object) <br> This.lastname:=Uppercase(This.lastname)\n\nServer--\x3e>-Qodly page: The People Qodly source is updated\nNote over Qodly page: The People Qodly source lastname attribute is uppercased\n\n"})]})}function h(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},250065:function(e,t,n){n.d(t,{Z:()=>l,a:()=>a});var r=n(667294);let s={},i=r.createContext(s);function a(e){let t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);