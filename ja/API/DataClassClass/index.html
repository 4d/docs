<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-19-R7 plugin-docs plugin-id-default docs-doc-id-API/DataClassClass">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">DataClass | 4D Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://doc4d.github.io//docs/ja/../assets/en/logohome.png"><meta data-rh="true" name="twitter:image" content="https://doc4d.github.io//docs/ja/../assets/en/logohome.png"><meta data-rh="true" property="og:url" content="https://doc4d.github.io//docs/ja/API/DataClassClass"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="19-R7"><meta data-rh="true" name="docusaurus_tag" content="docs-default-19-R7"><meta data-rh="true" name="docsearch:version" content="19-R7"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-19-R7"><meta data-rh="true" property="og:title" content="DataClass | 4D Docs"><meta data-rh="true" name="description" content="データクラス はデータベーステーブルへのオブジェクトインターフェースを提供します。 4Dアプリケーション内のデータクラスはすべて、ds データストア のプロパティとして利用可能です。"><meta data-rh="true" property="og:description" content="データクラス はデータベーステーブルへのオブジェクトインターフェースを提供します。 4Dアプリケーション内のデータクラスはすべて、ds データストア のプロパティとして利用可能です。"><link data-rh="true" rel="icon" href="/docs/ja/img/favicon/4d.gif"><link data-rh="true" rel="canonical" href="https://doc4d.github.io//docs/ja/API/DataClassClass"><link data-rh="true" rel="alternate" href="https://doc4d.github.io//docs/API/DataClassClass" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc4d.github.io//docs/fr/API/DataClassClass" hreflang="fr"><link data-rh="true" rel="alternate" href="https://doc4d.github.io//docs/es/API/DataClassClass" hreflang="es"><link data-rh="true" rel="alternate" href="https://doc4d.github.io//docs/ja/API/DataClassClass" hreflang="ja"><link data-rh="true" rel="alternate" href="https://doc4d.github.io//docs/pt/API/DataClassClass" hreflang="pt"><link data-rh="true" rel="alternate" href="https://doc4d.github.io//docs/API/DataClassClass" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://OJ04C0M3CU-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="4D Docs" href="/docs/ja/opensearch.xml"><link rel="stylesheet" href="/docs/ja/assets/css/styles.7bd82bcd.css">
<link rel="preload" href="/docs/ja/assets/js/runtime~main.5758d053.js" as="script">
<link rel="preload" href="/docs/ja/assets/js/main.bfd123f5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="メインコンテンツまでスキップ"><a href="#" class="skipToContent_fXgn">メインコンテンツまでスキップ</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/ja/"><b class="navbar__title text--truncate">4D ドキュメンテーション</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/ja/GettingStarted/installation">v19 R7 BETA</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/ja/API/DataClassClass">v19 R7 BETA</a></li><li><a class="dropdown__link" href="/docs/ja/19-R6/API/DataClassClass">v19 R6</a></li><li><a class="dropdown__link" href="/docs/ja/19/API/DataClassClass">v19</a></li><li><a class="dropdown__link" href="/docs/ja/18/GettingStarted/installation">v18</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>日本語</a><ul class="dropdown__menu"><li><a href="/docs/API/DataClassClass" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/docs/fr/API/DataClassClass" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/docs/es/API/DataClassClass" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/docs/ja/API/DataClassClass" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja">日本語</a></li><li><a href="/docs/pt/API/DataClassClass" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="pt">Português</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードとライトモードを切り替える (現在は ライトモード)" aria-label="ダークモードとライトモードを切り替える (現在は ライトモード)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="検索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">検索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="トップに戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ja/GettingStarted/installation">はじめに</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/ja/Project/overview">コア開発</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ja/Project/overview">プロジェクト管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ja/Concepts/about">ランゲージのコンセプト</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://doc.4d.com/4Dv19R6/4D/19-R6/4D-Language-Reference.100-5910320.en.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">ランゲージリファレンス (4D Doc Center)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ja/ORDA/overview">ORDA</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/ja/API/overview">クラス API リファレンス</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/overview">クラス API の概要</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/BlobClass">Blob</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/ClassClass">Class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/CollectionClass">Collection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/CryptoKeyClass">CryptoKey</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ja/API/DataClassClass">DataClass</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/DataClassAttributeClass">DataClassAttribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/DataStoreClass">DataStore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/EmailObjectClass">Email</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/EntityClass">Entity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/EntitySelectionClass">EntitySelection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/FileClass">File</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/FileHandleClass">FileHandle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/FolderClass">Folder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/FunctionClass">Formula</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/HTTPRequestClass">HTTPRequest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/IMAPTransporterClass">IMAPTransporter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/MailAttachmentClass">MailAttachment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/POP3TransporterClass">POP3Transporter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/SessionClass">Session</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/SignalClass">Signal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/SMTPTransporterClass">SMTPTransporter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/SystemWorkerClass">SystemWorker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/WebServerClass">WebServer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/ZipArchiveClass">ZIPArchive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/ZipFileClass">ZIPFile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ja/API/ZipFolderClass">ZIPFolder</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ja/code-editor/overview">コードの扱い方</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ja/Debugging/basics">デバッガー</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ja/settings/overview">設定</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ja/Preferences/overview">環境設定</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ja/ServerWindow/overview">管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ja/Extensions/overview">拡張機能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ja/WebServer/overview">Web アプリ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ja/Desktop/clientServer">デスクトップアプリ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://developer.4d.com/go-mobile/" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false">モバイルアプリ</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリスト"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/docs/ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">コア開発</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">クラス API リファレンス</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DataClass</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">バージョン: v19 R7 BETA</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページ上で</button></div><div class="theme-doc-markdown markdown"><header><h1>DataClass</h1></header><p><a href="/docs/ja/ORDA/dsmapping#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%AF%E3%83%A9%E3%82%B9">データクラス</a> はデータベーステーブルへのオブジェクトインターフェースを提供します。 4Dアプリケーション内のデータクラスはすべて、<code>ds</code> <a href="/docs/ja/ORDA/dsmapping#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%B9%E3%83%88%E3%82%A2">データストア</a> のプロパティとして利用可能です。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="概要">概要<a class="hash-link" href="#概要" title="見出しへの直接リンク">​</a></h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#attributename"><strong><em>.attributeName</em></strong> : DataClassAttribute</a> <!-- --> <!-- --> <!-- --> <!-- -->データクラスのプロパティとして直接利用可能なオブジェクトです</td></tr><tr><td><a href="#all"><strong>.all</strong> ( { <em>settings</em> : Object } ) : 4D.EntitySelection</a> <!-- --> <!-- --> <!-- --> <!-- -->データストアをクエリして、データクラスの全エンティティをエンティティセレクションとして返します</td></tr><tr><td><a href="#clearremotecache"><strong>.clearRemoteCache()</strong></a> <!-- --> <!-- --> <!-- --> <!-- -->データクラスの ORDAキャッシュを空にします</td></tr><tr><td><a href="#fromcollection"><strong>.fromCollection</strong>( <em>objectCol</em> : Collection { ; <em>settings</em> : Object } ) : 4D.EntitySelection</a> <!-- --> <!-- --> <!-- --> <em>objectCol</em> 引数のオブジェクトのコレクションに基づいてデータクラスのエンティティを更新あるいは作成し、対応するエンティティセレクションを返します</td></tr><tr><td><a href="#get"><strong>.get</strong>( <em>primaryKey</em> : Integer { ; <em>settings</em> : Object } ) : 4D.Entity<br><strong>.get</strong>( <em>primaryKey</em> : Text { ; <em>settings</em> : Object } ) : 4D.Entity</a> <!-- --> <!-- --> <!-- --> <!-- -->データクラスをクエリして、<em>primaryKey</em> に渡したプライマリーキーに合致するエンティティを返します</td></tr><tr><td><a href="#getcount"><strong>.getCount()</strong> : Integer </a> <!-- --> <!-- --> <!-- --> <!-- --> データクラスに含まれる総エンティティ数を返します</td></tr><tr><td><a href="#getdatastore"><strong>.getDataStore()</strong> : cs.DataStore</a> <!-- --> <!-- --> <!-- --> <!-- -->指定したデータクラスが属しているデータストアを返します</td></tr><tr><td><a href="#getinfo"><strong>.getInfo()</strong> : Object </a> <!-- --> <!-- --> <!-- --> <!-- -->データクラスの情報を提供するオブジェクトを返します</td></tr><tr><td><a href="#getremotecache"><strong>.getRemoteCache</strong>() : Object </a> <!-- --> <!-- --> <!-- --> <!-- -->データクラスの ORDAキャッシュの内容を記述したオブジェクトを返します</td></tr><tr><td><a href="#new"><strong>.new()</strong> : 4D.Entity </a> <!-- --> <!-- --> <!-- --> <!-- -->メモリ内にデータクラスに空のエンティティを新規作成しそれを返します</td></tr><tr><td><a href="#newselection"><strong>.newSelection</strong>( { <em>keepOrder</em> : Integer } ) : 4D.EntitySelection </a> <!-- --> <!-- --> <!-- --> <!-- -->データクラスに紐づいた 追加可能な、空の新規エンティティセレクションをメモリ内に作成します</td></tr><tr><td><a href="#query"><strong>.query</strong>( <em>queryString</em> : Text { ; <em>...value</em> : any } { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection <br><strong>.query</strong>( <em>formula</em> : Object { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection </a> <!-- --> <!-- --> <!-- --> <!-- -->データクラスの全エンティティから、<em>queryString</em> または <em>formula</em> と任意の <em>value</em> 引数で指定した検索条件に合致するエンティティを検索します</td></tr><tr><td><a href="#setremotecachesettings"><strong>.setRemoteCacheSettings</strong>(<em>settings</em> : Object) </a> <!-- --> <!-- --> <!-- --> <!-- -->データクラスの ORDAキャッシュについて、タイムアウトと最大サイズを指定します</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="attributename">.<em>attributeName</em><a class="hash-link" href="#attributename" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v17</td><td>追加</td></tr></tbody></table></div></div></details><p><strong><em>.attributeName</em></strong> : DataClassAttribute</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明">説明<a class="hash-link" href="#説明" title="見出しへの直接リンク">​</a></h4><p>データクラスの属性は、 データクラスのプロパティとして直接利用可能なオブジェクトです 。</p><p>戻り値は <a href="/docs/ja/API/DataClassAttributeClass"><code>DataClassAttribute</code></a> クラスのオブジェクトです。 これらのオブジェクトが持つプロパティを読み取ることによって、データクラス属性に関する情報が取得できます。</p><blockquote><p>データクラス属性オブジェクトを編集することは可能ですが、元となるデータベースストラクチャーは変更されません。</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-1">例題 1<a class="hash-link" href="#例題-1" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$salary:=ds.Employee.salary // Employeeデータクラスの salary属性を返します</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$compCity:=ds.Company[&quot;city&quot;] // Companyデータクラスの city属性を返します</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-2">例題 2<a class="hash-link" href="#例題-2" title="見出しへの直接リンク">​</a></h4><p>以下のストラクチャーを前提とします:</p><p><img loading="lazy" src="/docs/ja/assets/images/dataclassAttribute-a6b39462dc310d6f9b5816409d863cee.png" width="454" height="634" class="img_ev3q"></p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $firstnameAtt;$employerAtt;$employeesAtt : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $firstnameAtt:=ds.Employee.firstname</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //{name:firstname,kind:storage,fieldType:0,type:string,fieldNumber:2,indexed:true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //keyWordIndexed:false,autoFilled:false,mandatory:false,unique:false}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employerAtt:=ds.Employee.employer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //{name:employer,kind:relatedEntity,relatedDataClass:Company,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //fieldType:38,type:Company,inverseName:employees}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //38=Is object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employeesAtt:=ds.Company.employees</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //{name:employees,kind:relatedEntities,relatedDataClass:Employee,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //fieldType:42,type:EmployeeSelection,inverseName:employer}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //42=Is collection</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-3">例題 3<a class="hash-link" href="#例題-3" title="見出しへの直接リンク">​</a></h4><p>以下のテーブルプロパティを前提とします:</p><p><img loading="lazy" src="/docs/ja/assets/images/dataclassAttribute2-815959fd721b6dd175aaa338e04c2f38.png" width="405" height="383" class="img_ev3q"></p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $sequenceNumberAtt : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $sequenceNumberAtt=ds.Employee.sequenceNumber</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //{name:sequenceNumber,kind:storage,fieldType:0,type:string,fieldNumber:13,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //indexed:true,keyWordIndexed:false,autoFilled:true,mandatory:false,unique:true}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="all">.all()<a class="hash-link" href="#all" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v17 R5</td><td><em>settings</em> パラメーターをサポート</td></tr><tr><td>v17</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.all</strong> ( { <em>settings</em> : Object } ) : 4D.EntitySelection</p><table><thead><tr><th>引数</th><th>タイプ</th><th align="center"></th><th>説明</th></tr></thead><tbody><tr><td>settings</td><td>Object</td><td align="center">-&gt;</td><td>ビルドオプション: context</td></tr><tr><td>戻り値</td><td>4D.EntitySelection</td><td align="center">&lt;-</td><td>データクラスの全エンティティの参照</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-1">説明<a class="hash-link" href="#説明-1" title="見出しへの直接リンク">​</a></h4><p><code>.all()</code> 関数は データストアをクエリして、データクラスの全エンティティをエンティティセレクションとして返します。</p><p>エンティティはデフォルトの順番で返され、通常は作成順になっています。 ただし、エンティティ削除後に新規追加した場合には、デフォルトの順番は作成順を反映しない点に留意が必要です。</p><p>エンティティが見つからない場合、空のエンティティセレクションが返されます。</p><p>この関数には、レイジーローディングが適用されます。</p><p><strong>settings</strong></p><p>任意の <em>settings</em> パラメーターには、追加オプションを格納したオブジェクトを渡すことができます。 以下のプロパティがサポートされています:</p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>エンティティセレクションに適用されている最適化コンテキストのラベル。 エンティティセレクションを扱うコードはこのコンテキストを使うことで最適化の恩恵を受けます。 この機能は <a href="/docs/ja/ORDA/entities#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96">ORDA のクライアント/サーバー処理</a>を想定して設計されています。</td></tr></tbody></table><blockquote><p>データクラス内の総エンティティ数を知るには、<code>ds.myClass.all().length</code> 式よりも最適化された <a href="#getcount"><code>getCount()</code></a> 関数を使用することが推奨されます。</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題">例題<a class="hash-link" href="#例題" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $allEmp : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $allEmp:=ds.Employee.all()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="clearremotecache">.clearRemoteCache()<a class="hash-link" href="#clearremotecache" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v19 R5</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.clearRemoteCache()</strong></p><table><thead><tr><th>引数</th><th>タイプ</th><th align="center"></th><th>説明</th></tr></thead><tbody><tr><td></td><td></td><td align="center"></td><td>このコマンドは引数を必要としません</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-2">説明<a class="hash-link" href="#説明-2" title="見出しへの直接リンク">​</a></h4><p><code>.clearRemoteCache()</code> 関数は、 データクラスの ORDAキャッシュを空にします。</p><blockquote><p>この関数は <code>timeout</code> および <code>maxEntries</code> の値をリセットしません。</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-4">例題<a class="hash-link" href="#例題-4" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $ds : 4D.DataStoreImplementation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $persons : cs.PersonsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $p : cs.PersonsEntity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $cache : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $info : Collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $text : Text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ds:=Open datastore(New object(&quot;hostname&quot;; &quot;www.myserver.com&quot;); &quot;myDS&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$persons:=$ds.Persons.all()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$text:=&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">For each ($p; $persons)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $text:=$p.firstname+&quot; lives in &quot;+$p.address.city+&quot; / &quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">End for each</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$cache:=$ds.Persons.getRemoteCache()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ds.Persons.clearRemoteCache()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Persons データクラスのキャッシュ = {timeout:30;maxEntries:30000;stamp:255;entries:[]}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fromcollection">.fromCollection()<a class="hash-link" href="#fromcollection" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v17 R5</td><td><em>settings</em> パラメーターをサポート</td></tr><tr><td>v17</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.fromCollection</strong>( <em>objectCol</em> : Collection { ; <em>settings</em> : Object } ) : 4D.EntitySelection</p><table><thead><tr><th>引数</th><th>タイプ</th><th align="center"></th><th>説明</th></tr></thead><tbody><tr><td>objectCol</td><td>Collection</td><td align="center">-&gt;</td><td>エンティティにマップするオブジェクトのコレクション</td></tr><tr><td>settings</td><td>Object</td><td align="center">-&gt;</td><td>ビルドオプション: context</td></tr><tr><td>戻り値</td><td>4D.EntitySelection</td><td align="center">&lt;-</td><td>コレクションから作成したエンティティセレクション</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-3">説明<a class="hash-link" href="#説明-3" title="見出しへの直接リンク">​</a></h4><p><code>.fromCollection()</code> 関数は、 <em>objectCol</em> 引数のオブジェクトのコレクションに基づいてデータクラスのエンティティを更新あるいは作成し、対応するエンティティセレクションを返します。</p><p><em>objectCol</em> パラメーターには、データクラスの既存エンティティを更新、または新規エンティティを作成するためのオブジェクトのコレクションを渡します。 プロパティ名は、データクラスの属性名と同一である必要があります。 プロパティ名がデータクラスに存在しない場合、それは無視されます。 コレクション内で属性値が定義されていない場合、その値は null になります。</p><p>コレクションのオブジェクト要素とエンティティのマッピングは、<strong>属性名</strong> と <strong>型の合致</strong> をもって行われます。 オブジェクトプロパティがエンティティ属性と同じ名前であっても、型が合致しない場合には、エンティティの属性は空のままです。</p><p><strong>作成モードと更新モード</strong></p><p><em>objectCol</em> 引数の各オブジェクトついて:</p><ul><li>オブジェクトがブール型の &quot;<!-- -->_<!-- -->_<!-- -->NEW&quot; プロパティを含み、それが <strong>false</strong> に設定されている場合(あるいは &quot;<!-- -->_<!-- -->_<!-- -->NEW&quot; プロパティが含まれていない場合)、オブジェクトの対応する値でエンティティが更新あるいは作成されます。 プライマリーキーに関するチェックはおこなわれません:<ul><li>プライマリーキーが指定されていて実在する場合、エンティティは更新されます。 この場合、プライマリーキーはそのまま、あるいは &quot;<!-- -->_<!-- -->_<!-- -->KEY&quot; プロパティを (プライマリーキー値とともに) 使って指定することができます。</li><li>そのまま指定したプライマリーキーが実在しない場合、エンティティは作成されます。</li><li>プライマリーキーを指定していない場合、エンティティは作成され、標準のデータベースのルールに基づいてプライマリーキー値が割り当てられます。</li></ul></li><li>オブジェクトがブール型の &quot;<!-- -->_<!-- -->_<!-- -->NEW&quot; プロパティを含み、それが <strong>true</strong> に設定されている場合、オブジェクトの対応する値でエンティティが作成されます。 プライマリーキーに関するチェックがおこなわれます:<ul><li>そのまま指定したプライマリーキーが実在する場合、エラーが返されます。</li><li>そのまま指定したプライマリーキーが実在しない場合、エンティティは作成されます。</li><li>プライマリーキーを指定していない場合、エンティティは作成され、標準のデータベースのルールに基づいてプライマリーキー値が割り当てられます。<blockquote><p>値を持つ &quot;<!-- -->_<!-- -->_<!-- -->KEY&quot; プロパティは、&quot;<!-- -->_<!-- -->_<!-- -->NEW&quot; プロパティが <strong>false</strong> に設定 (あるいは省略) されていて、かつ対応するエンティティが存在する場合のみ、考慮されます。 それ以外の場合には、&quot;<!-- -->_<!-- -->_<!-- -->KEY&quot; プロパティ値は無視されるため、プライマリーキーの値はそのまま渡さなければなりません。</p></blockquote></li></ul></li></ul><p><strong>リレートエンティティ</strong></p><p><em>objectCol</em> 引数のオブジェクトは、一つ以上のリレートエンティティに対応するオブジェクトをネストすることができます。これはエンティティ間のリンクを作成・更新するのに有用です。</p><p>リレートエンティティに相当するネストされたオブジェクトは、リレートエンティティのプライマリーキー値を格納した &quot;<!-- -->_<!-- -->_<!-- -->KEY&quot; プロパティあるいはプライマリーキー属性を格納している必要があります。 ”<!-- -->_<!-- -->_<!-- -->KEY” プロパティを使用すると、プライマリーキー属性名に依存する必要がありません。</p><blockquote><p>この機構によって、リレートエンティティの中身を作成・更新することはできません。</p></blockquote><p><strong>記号</strong></p><p>&quot;<!-- -->_<!-- -->_<!-- -->STAMP&quot; プロパティが指定された場合、データストアのスタンプとのチェックがおこなわれ、エラーが返されることがあります (&quot;与えられたスタンプはテーブルXXX のレコード# XXのカレントのものと合致しません&quot;)。 詳細については <a href="/docs/ja/ORDA/entities#%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3%E3%83%AD%E3%83%83%E3%82%AD%E3%83%B3%E3%82%B0">エンティティロッキング</a> を参照ください。</p><p><strong>settings</strong></p><p>任意の <em>settings</em> パラメーターには、追加オプションを格納したオブジェクトを渡すことができます。 以下のプロパティがサポートされています:</p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>エンティティセレクションに適用されている最適化コンテキストのラベル。 エンティティセレクションを扱うコードはこのコンテキストを使うことで最適化の恩恵を受けます。 この機能は <a href="/docs/ja/ORDA/entities#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96">ORDA のクライアント/サーバー処理</a>を想定して設計されています。</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-1-1">例題 1<a class="hash-link" href="#例題-1-1" title="見出しへの直接リンク">​</a></h4><p>既存のエンティティを更新します。 <!-- -->_<!-- -->_<!-- -->NEW プロパティはなく、従業員のプライマリーキーは属性に実在の値を指定して渡します:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $empsCollection : Collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $emp : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $employees : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection:=New collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.ID:=668 // Employeeテーブルの実在する主キー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.firstName:=&quot;Arthur&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.lastName:=&quot;Martin&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.employer:=New object(&quot;ID&quot;;121) // リレートデータクラス Company の実在する主キー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // リレートデータクラス Company に実在する別の主キーを指定すれば、会社を変更することができます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection.push($emp)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employees:=ds.Employee.fromCollection($empsCollection)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-2-1">例題 2<a class="hash-link" href="#例題-2-1" title="見出しへの直接リンク">​</a></h4><p>既存のエンティティを更新します。 <!-- -->_<!-- -->_<!-- -->NEW プロパティはなく、従業員のプライマリーキーは <!-- -->_<!-- -->_<!-- -->KEY プロパティに実在の値を指定して渡します:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $empsCollection : Collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $emp : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $employees : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection:=New collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.__KEY:=1720 // Employeeテーブルの実在する主キー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.firstName:=&quot;John&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.lastName:=&quot;Boorman&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.employer:=New object(&quot;ID&quot;;121) // リレートデータクラス Company の実在する主キー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // リレートデータクラス Company に実在する別の主キーを指定すれば、会社を変更することができます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection.push($emp)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employees:=ds.Employee.fromCollection($empsCollection)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-3-1">例題 3<a class="hash-link" href="#例題-3-1" title="見出しへの直接リンク">​</a></h4><p>単純に、コレクションから新しいエンティティを作成します:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $empsCollection : Collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $emp : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $employees : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection:=New collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.firstName:=&quot;Victor&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.lastName:=&quot;Hugo&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection.push($emp)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employees:=ds.Employee.fromCollection($empsCollection)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-4-1">例題 4<a class="hash-link" href="#例題-4-1" title="見出しへの直接リンク">​</a></h4><p>新規エンティティを作成します。 <!-- -->_<!-- -->_<!-- -->NEW プロパティは true で、従業員のプライマリーキーは指定しません:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $empsCollection : Collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $emp : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $employees : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection:=New collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.firstName:=&quot;Mary&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.lastName:=&quot;Smith&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.employer:=New object(&quot;__KEY&quot;;121) // リレートデータクラス Company の実在する主キー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.__NEW:=True</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection.push($emp)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employees:=ds.Employee.fromCollection($empsCollection)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-5">例題 5<a class="hash-link" href="#例題-5" title="見出しへの直接リンク">​</a></h4><p>新規エンティティを作成します。 <!-- -->_<!-- -->_<!-- -->NEW プロパティはなく、従業員のプライマリーキー属性を指定しますが、その値は実在しません:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $empsCollection : Collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $emp : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $employees : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection:=New collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.ID:=10000 // 実在しない主キー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.firstName:=&quot;Françoise&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.lastName:=&quot;Sagan&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection.push($emp)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employees:=ds.Employee.fromCollection($empsCollection)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-6">例題 6<a class="hash-link" href="#例題-6" title="見出しへの直接リンク">​</a></h4><p>2つのエンティティが同じプライマリーキーを持つ場合、最初のエンティティは作成・保存されますが、2つめのエンティティの処理は失敗します:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $empsCollection : Collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $emp; $emp2 : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $employees : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection:=New collection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.ID:=10001 // 実在しない主キー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.firstName:=&quot;Simone&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.lastName:=&quot;Martin&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp.__NEW:=True</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection.push($emp)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp2:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp2.ID:=10001 // 上と同じ主キー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp2.firstName:=&quot;Marc&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp2.lastName:=&quot;Smith&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $emp2.__NEW:=True</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $empsCollection.push($emp2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $employees:=ds.Employee.fromCollection($empsCollection)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 最初のエンティティは作成されます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 2つめのエンティティは重複キーエラーになります</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="参照">参照<a class="hash-link" href="#参照" title="見出しへの直接リンク">​</a></h4><p><a href="/docs/ja/API/EntitySelectionClass#tocollection"><strong>.toCollection()</strong></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="get">.get()<a class="hash-link" href="#get" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v17</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.get</strong>( <em>primaryKey</em> : Integer { ; <em>settings</em> : Object } ) : 4D.Entity<br><strong>.get</strong>( <em>primaryKey</em> : Text { ; <em>settings</em> : Object } ) : 4D.Entity</p><table><thead><tr><th>引数</th><th>タイプ</th><th align="center"></th><th>説明</th></tr></thead><tbody><tr><td>primaryKey</td><td>Integer または Text</td><td align="center">-&gt;</td><td>取得するエンティティのプライマリーキー値</td></tr><tr><td>settings</td><td>Object</td><td align="center">-&gt;</td><td>ビルドオプション: context</td></tr><tr><td>戻り値</td><td>4D.Entity</td><td align="center">&lt;-</td><td>指定したプライマリーキーに合致するエンティティ</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-4">説明<a class="hash-link" href="#説明-4" title="見出しへの直接リンク">​</a></h4><p><code>.get()</code> 関数は データクラスをクエリして、<em>primaryKey</em> に渡したプライマリーキーに合致するエンティティを返します。</p><p><em>primaryKey</em> には、取得したいエンティティのプライマリーキーの値を渡します。 値の型は、データストアで設定されたプライマリーキーの型 (倍長整数あるいはテキスト) と合致している必要があります。 <a href="/docs/ja/API/EntityClass#getkey"><code>.getKey()</code></a> 関数に <code>dk key as string</code> 引数を渡すと、プライマリーキーの値が常にテキスト型で返されるように指定することができます。</p><p><em>primaryKey</em> 引数のプライマリーキーを持つエンティティが見つからない場合、<strong>Null</strong> エンティティが返されます。</p><p>この関数にはレイジーローディングが適用され、リレートデータは必要な時にのみディスクから読み込まれます。</p><p><strong>settings</strong></p><p>任意の <em>settings</em> パラメーターには、追加オプションを格納したオブジェクトを渡すことができます。 以下のプロパティがサポートされています:</p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>エンティティに適用されている自動の最適化コンテキストのラベル。 エンティティを読み込む以降のコードは、このコンテキストを使うことで最適化の恩恵を受けます。 この機能は <a href="/docs/ja/ORDA/entities#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96">ORDA のクライアント/サーバー処理</a>を想定して設計されています。</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-1-2">例題 1<a class="hash-link" href="#例題-1-2" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $entity : cs.EmployeeEntity  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $entity2 : cs.InvoiceEntity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $entity:=ds.Employee.get(167) // プライマリーキーの値が 167のエンティティを返します</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $entity2:=ds.Invoice.get(&quot;DGGX20030&quot;) // プライマリーキーの値が &quot;DGGX20030&quot; のエンティティを返します</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-2-2">例題 2<a class="hash-link" href="#例題-2-2" title="見出しへの直接リンク">​</a></h4><p><em>context</em> プロパティの使用について紹介します:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $e1; $e2; $e3; $e4 : cs.EmployeeEntity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $settings; $settings2 : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings:=New object(&quot;context&quot;;&quot;detail&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings2:=New object(&quot;context&quot;;&quot;summary&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $e1:=ds.Employee.get(1;$settings)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> completeAllData($e1) // completeAllData メソッドにおいて最適化がトリガーされ、&quot;detail&quot; コンテキストが割り当てられます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $e2:=ds.Employee.get(2;$settings)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> completeAllData($e2) // completeAllData メソッドには、&quot;detail&quot; コンテキストに付随する最適化が適用されます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $e3:=ds.Employee.get(3;$settings2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> completeSummary($e3) // completeSummary メソッドにおいて最適化がトリガーされ、&quot;summary&quot; コンテキストが割り当てられます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $e4:=ds.Employee.get(4;$settings2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> completeSummary($e4) // completeSummary メソッドには、&quot;summary&quot; コンテキストに付随する最適化が適用されます</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getcount">.getCount()<a class="hash-link" href="#getcount" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v19 R5</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.getCount()</strong> : Integer </p><table><thead><tr><th>引数</th><th>タイプ</th><th></th><th>説明</th></tr></thead><tbody><tr><td>result</td><td>Integer</td><td>&lt;-</td><td>データクラスに含まれる全エンティティ数</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-5">説明<a class="hash-link" href="#説明-5" title="見出しへの直接リンク">​</a></h4><p><code>.getCount()</code> 関数は、  データクラスに含まれる総エンティティ数を返します。</p><p>トランザクション内でこの関数を使用した場合、トランザクション中に作成されたエンティティは考慮されます。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-7">例題<a class="hash-link" href="#例題-7" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $ds : 4D.DataStoreImplementation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $number : Integer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ds:=Open datastore(New object(&quot;hostname&quot;; &quot;www.myserver.com&quot;); &quot;myDS&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$number:=$ds.Persons.getCount()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getdatastore">.getDataStore()<a class="hash-link" href="#getdatastore" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v17 R5</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.getDataStore()</strong> : cs.DataStore</p><table><thead><tr><th>引数</th><th>タイプ</th><th align="center"></th><th>説明</th></tr></thead><tbody><tr><td>戻り値</td><td>cs.DataStore</td><td align="center">&lt;-</td><td>データクラスが属しているデータストア</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-6">説明<a class="hash-link" href="#説明-6" title="見出しへの直接リンク">​</a></h4><p><code>.getDataStore()</code> 関数は、 指定したデータクラスが属しているデータストアを返します。</p><p>返されるデータストアは次のいずれかです:</p><ul><li><code>ds</code> コマンドによって返されるメインデータストア</li><li><code>Open datastore</code> コマンドを使用して開かれたリモートデータストア</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-8">例題<a class="hash-link" href="#例題-8" title="見出しへの直接リンク">​</a></h4><p><strong><em>SearchDuplicate</em></strong> プロジェクトメソッドは、任意のデータクラス内の重複した値を検索します。</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $pet : cs.CatsEntity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $pet:=ds.Cats.all().first() // エンティティを取得します</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> SearchDuplicate($pet;&quot;Dogs&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // SearchDuplicate メソッド</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // SearchDuplicate(entity_to_search;dataclass_name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> #DECLARE ($pet : Object ; $dataClassName : Text)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $dataStore; $duplicates : Object  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $dataStore:=$pet.getDataClass().getDataStore()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $duplicates:=$dataStore[$dataClassName].query(&quot;name=:1&quot;;$pet.name)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getinfo">.getInfo()<a class="hash-link" href="#getinfo" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v19 R3</td><td>exposed プロパティを追加</td></tr><tr><td>v17 R5</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.getInfo()</strong> : Object </p><table><thead><tr><th>引数</th><th>タイプ</th><th></th><th>説明</th></tr></thead><tbody><tr><td>戻り値</td><td>Object</td><td>&lt;-</td><td>データクラスの情報</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-7">説明<a class="hash-link" href="#説明-7" title="見出しへの直接リンク">​</a></h4><p><code>.getInfo()</code> 関数は、 データクラスの情報を提供するオブジェクトを返します。 このメソッドは汎用的なコードを書くのに有用です。</p><p><strong>返されるオブジェクト</strong></p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>exposed</td><td>Boolean</td><td>データクラスが REST に公開されていれば true</td></tr><tr><td>name</td><td>Text</td><td>データクラスの名称</td></tr><tr><td>primaryKey</td><td>Text</td><td>データクラスのプライマリーキー属性の名称</td></tr><tr><td>tableNumber</td><td>Integer</td><td>内部的な 4Dテーブル番号</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-1-3">例題 1<a class="hash-link" href="#例題-1-3" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> #DECLARE ($entity : Object)  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $status : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> computeEmployeeNumber($entity) // エンティティに対する何らかの操作</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $status:=$entity.save()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> if($status.success)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ALERT(&quot;テーブル &quot;+$entity.getDataClass().getInfo().name+&quot; のレコードが更新されました。&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> End if</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-2-3">例題 2<a class="hash-link" href="#例題-2-3" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $settings : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.ClientsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings.parameters:=New object(&quot;receivedIds&quot;;getIds())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings.attributes:=New object(&quot;pk&quot;;ds.Clients.getInfo().primaryKey)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Clients.query(&quot;:pk in :receivedIds&quot;;$settings)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-3-2">例題 3<a class="hash-link" href="#例題-3-2" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $pk : Text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $dataClassAttribute : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $pk:=ds.Employee.getInfo().primaryKey</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $dataClassAttribute:=ds.Employee[$pk] // 必要に応じてプライマリーキー属性へのアクセスが可能です</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="参照-1">参照<a class="hash-link" href="#参照-1" title="見出しへの直接リンク">​</a></h4><p><a href="/docs/ja/API/DataClassAttributeClass#exposed">DataClassAttribute.exposed</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getremotecache">.getRemoteCache()<a class="hash-link" href="#getremotecache" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v19 R5</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.getRemoteCache</strong>() : Object </p><table><thead><tr><th>引数</th><th>タイプ</th><th></th><th>説明</th></tr></thead><tbody><tr><td>result</td><td>Object</td><td>&lt;-</td><td>データクラスの ORDAキャッシュの内容を記述したオブジェクト。</td></tr></tbody></table><p>|</p><blockquote><p><strong>上級者向け:</strong> この機能は、特定の構成のため、ORDAのデフォルト機能をカスタマイズする必要がある開発者向けです。 ほとんどの場合、使用する必要はないでしょう。</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-8">説明<a class="hash-link" href="#説明-8" title="見出しへの直接リンク">​</a></h4><p><code>.getRemoteCache()</code> 関数は、 データクラスの ORDAキャッシュの内容を記述したオブジェクトを返します。</p><p>4D のシングルユーザーアプリケーションからこの関数を呼び出した場合、<code>Null</code> が返されます。</p><p>戻り値のオブジェクトには、以下のプロパティが格納されています:</p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>maxEntries</td><td>Integer</td><td>エントリーコレクションの最大数</td></tr><tr><td>stamp</td><td>Integer</td><td>キャッシュのスタンプ</td></tr><tr><td>timeout</td><td>Integer</td><td>キャッシュの新しいエントリーが期限切れとなるまでの残り時間。</td></tr><tr><td>entries</td><td>Collection</td><td>キャッシュ内の各エンティティにつき、1つのエントリーオブジェクトを格納します。</td></tr></tbody></table><p>エントリーコレクション内の各エントリーオブジェクトは、以下のプロパティを持ちます:</p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>data</td><td>Object</td><td>エントリーのデータを格納するオブジェクト</td></tr><tr><td>expired</td><td>Boolean</td><td>エントリーが期限切れの場合に true</td></tr><tr><td>key</td><td>Text</td><td>エンティティのプライマリーキー。</td></tr></tbody></table><p>各エントリーの <code>data</code> オブジェクトは、以下のプロパティを持ちます:</p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>__KEY</td><td>String</td><td>エンティティのプライマリーキー</td></tr><tr><td>__STAMP</td><td>Longint</td><td>データベース内のエンティティのタイムスタンプ</td></tr><tr><td>__TIMESTAMP</td><td>String</td><td>データベース内のエンティティのスタンプ (形式: YYYY-MM-DDTHH:MM:SS:ms:Z)</td></tr><tr><td>dataClassAttributeName</td><td>Variant</td><td>データクラス属性に対応するデータがキャッシュに存在する場合、それはデータベースと同じ型のプロパティに返されます。</td></tr></tbody></table><p>リレートエンティティに関するデータは、data オブジェクトのキャッシュに保存されます。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-9">例題<a class="hash-link" href="#例題-9" title="見出しへの直接リンク">​</a></h4><p>次の例で、<code>$ds.Persons.all()</code> は、先頭エンティティをそのすべての属性とともにロードします。 その後リクエストの最適化がおこなわれ、<code>firstname</code> と <code>address.city</code> のみがロードされます。</p><p><code>address.city</code> は、<code>Persons</code> データクラスのキャッシュにロードされることに注意してください。</p><p><code>Address</code> データクラスの先頭エンティティだけがキャッシュに格納されます。 先頭エンティティは、ループの最初の繰り返しでロードされます。</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $ds : 4D.DataStoreImplementation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $persons : cs.PersonsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $p : cs.PersonsEntity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $cachePersons; $cacheAddress : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $text : Text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ds:=Open datastore(New object(&quot;hostname&quot;; &quot;www.myserver.com&quot;); &quot;myDS&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$persons:=$ds.Persons.all()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$text:=&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">For each ($p; $persons)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $text:=$p.firstname+&quot; lives in &quot;+$p.address.city+&quot; / &quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">End for each</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$cachePersons:=$ds.Persons.getRemoteCache()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$cacheAddress:=$ds.Adress.getRemoteCache()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="参照-2">参照<a class="hash-link" href="#参照-2" title="見出しへの直接リンク">​</a></h4><p><a href="#setremotecachesettings">.setRemoteCacheSettings()</a><br><a href="#clearremotecache">.clearRemoteCache()</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new">.new()<a class="hash-link" href="#new" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v17</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.new()</strong> : 4D.Entity </p><table><thead><tr><th>引数</th><th>タイプ</th><th></th><th>説明</th></tr></thead><tbody><tr><td>戻り値</td><td>4D.Entity</td><td>&lt;-</td><td>データクラスの新規エンティティ</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-9">説明<a class="hash-link" href="#説明-9" title="見出しへの直接リンク">​</a></h4><p><code>.new()</code> 関数は、 メモリ内にデータクラスに空のエンティティを新規作成しそれを返します。</p><p>エンティティオブジェクトはメモリ内に作成されますが、<a href="/docs/ja/API/EntityClass#save"><code>.save( )</code></a> 関数が呼び出されるまでデータベースには保存されません。 エンティティを保存する前に削除した場合、復元することはできません。</p><p><strong>4D Server</strong>: クライアント/サーバーにおいては、対応するテーブルのプライマリーキーが自動インクリメントであった場合、エンティティがサーバー側に保存されたときに計算されます。</p><p>エンティティの全属性は <strong>null</strong> 値で初期化されます。</p><blockquote><p>4Dデータベースのストラクチャーレベルで <strong>ヌル値を空値にマップ</strong> オプションが選択されていれば、属性はデフォルト値で初期化されます。</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-10">例題<a class="hash-link" href="#例題-10" title="見出しへの直接リンク">​</a></h4><p>以下のコードは &quot;Log&quot; データクラスに新しいエンティティを作成し、&quot;info&quot; 属性に情報を記録します:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $entity : cs.LogEntity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $entity:=ds.Log.new() // 参照を作成します</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $entity.info:=&quot;New entry&quot; // 情報を格納します</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $entity.save() // エンティティを保存します</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="newselection">.newSelection()<a class="hash-link" href="#newselection" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v17</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.newSelection</strong>( { <em>keepOrder</em> : Integer } ) : 4D.EntitySelection </p><table><thead><tr><th>引数</th><th>タイプ</th><th></th><th>説明</th></tr></thead><tbody><tr><td>keepOrder</td><td>Integer</td><td>-&gt;</td><td><code>dk keep ordered</code>: 順列ありのエンティティセレクションを作成します<br><code>dk non ordered</code> (あるいは省略時): 順列なしのエンティティセレクションを作成します</td></tr><tr><td>戻り値</td><td>4D.EntitySelection</td><td>&lt;-</td><td>データクラスの空の新規エンティティセレクション</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-10">説明<a class="hash-link" href="#説明-10" title="見出しへの直接リンク">​</a></h4><p><code>.newSelection()</code> 関数は、 データクラスに紐づいた 追加可能な、空の新規エンティティセレクションをメモリ内に作成します。</p><blockquote><p>追加可能なエンティティセレクションについての詳細は <a href="/docs/ja/ORDA/entities#%E5%85%B1%E6%9C%89%E5%8F%AF%E8%83%BD%E8%BF%BD%E5%8A%A0%E5%8F%AF%E8%83%BD%E3%81%AA%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3">共有可能/追加可能なエンティティセレクション</a> を参照ください。</p></blockquote><p>順列ありのエンティティセレクションを作成するには、<em>keepOrder</em> に <code>dk keep ordered</code> セレクターを渡します。 この引数を省略した場合のデフォルト、あるいは <code>dk non ordered</code> セレクターを渡した場合には、関数は順列なしのエンティティセレクションを返します。 順列なしのエンティティセレクションの方が速いですが、エンティティの位置に頼ることはできません。 詳細については、<a href="/docs/ja/ORDA/dsmapping#%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E9%A0%86%E5%88%97%E3%81%82%E3%82%8A%E9%A0%86%E5%88%97%E3%81%AA%E3%81%97">エンティティセレクションの順列あり/順列なし</a> を参照ください。</p><p>作成された時点では、エンティティセレクションにエンティティは含まれていません(<code>mySelection.length</code> は0を返します)。 あとから <a href="/docs/ja/API/EntitySelectionClass#add"><code>add()</code></a> 関数を呼び出すことで、エンティティセレクションを徐々にビルドしていくことができます。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-11">例題<a class="hash-link" href="#例題-11" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $USelection; $OSelection : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $USelection:=ds.Employee.newSelection() // 順列なしの空のエンティティセレクションを作成します</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $OSelection:=ds.Employee.newSelection(dk keep ordered) // 順列ありの空のエンティティセレクションを作成します</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="query">.query()<a class="hash-link" href="#query" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v17 R6</td><td>Formula パラメーターをサポート</td></tr><tr><td>v17 R5</td><td>値のプレースホルダーをサポート</td></tr><tr><td>v17</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.query</strong>( <em>queryString</em> : Text { ; <em>...value</em> : any } { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection <br><strong>.query</strong>( <em>formula</em> : Object { ; <em>querySettings</em> : Object } ) : 4D.EntitySelection </p><table><thead><tr><th>引数</th><th>タイプ</th><th></th><th>説明</th></tr></thead><tbody><tr><td>queryString</td><td>Text</td><td>-&gt;</td><td>検索条件 (文字列)</td></tr><tr><td>formula</td><td>Object</td><td>-&gt;</td><td>検索条件 (フォーミュラオブジェクト)</td></tr><tr><td>value</td><td>any</td><td>-&gt;</td><td>プレースホルダー用の値</td></tr><tr><td>querySettings</td><td>Object</td><td>-&gt;</td><td>クエリオプション: parameters, attributes, args, allowFormulas, context, queryPath, queryPlan</td></tr><tr><td>戻り値</td><td>4D.EntitySelection</td><td>&lt;-</td><td><em>queryString</em> または <em>formula</em> に渡した検索条件に合致するエンティティから構成された新しいエンティティセレクション</td></tr></tbody></table><p>|</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-11">説明<a class="hash-link" href="#説明-11" title="見出しへの直接リンク">​</a></h4><p><code>.query()</code> 関数は、 データクラスの全エンティティから、<em>queryString</em> または <em>formula</em> と任意の <em>value</em> 引数で指定した検索条件に合致するエンティティを検索します。戻り値は、見つかったエンティティをすべて格納する <code>EntitySelection</code> 型の新しいオブジェクトです。 この関数には、レイジーローディングが適用されます。</p><p>エンティティが見つからない場合、空のエンティティセレクションが返されます。</p><p><strong>queryString 引数</strong></p><p><em>queryString</em> 引数には、以下のシンタックスを使用します:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">attributePath|formula 比較演算子 値   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> {論理演算子 attributePath|formula 比較演算子 値}   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> {order by attributePath {desc | asc}}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>詳細は以下の通りです:</p><ul><li><p><strong>attributePath</strong>: クエリの実行対象となる属性パス。 この引数は、単純な名前 (&quot;country&quot; など) のほか、あらゆる有効な属性パス (&quot;country.name&quot; など) の形をとることができます。 属性パスが <code>Collection</code> 型である場合、すべてのオカレンスを管理するには<!-- -->[<!-- --> ] 記法を使用してください (例: &quot;children<!-- -->[<!-- --> ].age&quot; など)。</p><blockquote><p><em>&quot;.&quot;, &quot;<!-- -->[<!-- --> ]&quot;, や &quot;=&quot;, &quot;&gt;&quot;, &quot;#&quot;..., などの特殊文字はクエリ文字列の中で正しく評価されないため、これらが含まれた属性名を直接使用することはできません。 このような属性をクエリするには、プレースホルダーの使用を検討します。これにより、属性パス内で使用できる文字の範囲が広がります (後述の</em> <strong>プレースホルダーの使用</strong> <em>参照)。</em></p></blockquote></li><li><p><strong>formula</strong>: テキストまたはオブジェクト形式で渡された有効なフォーミュラ。 フォーミュラは処理されるエンティティごとに評価され、ブール値を返さなくてはなりません。 処理中のエンティティはフォーミュラ内において <code>This</code> で参照されます。</p><ul><li><p><strong>テキスト</strong>: フォーミュラ文字列の前に <code>eval( )</code> ステートメントが必要です。これにより、クエリが式を正しく解釈します。 例: <em>&quot;eval(length(This.lastname) &gt;=30)&quot;</em></p></li><li><p><strong>オブジェクト</strong>: <a href="/docs/ja/API/FunctionClass">フォーミュラオブジェクト</a> は <strong>プレースホルダー</strong> (後述参照) を使って受け渡します。 このフォーミュラは、<a href="/docs/ja/API/FunctionClass#formula"><code>Formula</code></a> または <a href="/docs/ja/API/FunctionClass#formula-from-string"><code>Formula from string</code></a> コマンドによって作成されたものでなくてはなりません。</p><blockquote><ul><li>4Dフォーミュラは、<code>&amp;</code> および <code>|</code> 記号のみを論理演算子としてサポートすることに留意が必要です。</li><li>フォーミュラ以外にも検索条件がある場合、クエリエンジンの最適化によってほかの検索条件 (たとえばインデックス属性) の処理が優先される場合があり、その場合はエンティティのサブセットのみがフォーミュラの評価対象となります。</li></ul></blockquote><p> クエリに使用するフォーミュラは $1 に引数を受け取ることができます。 詳細については後述の <strong>フォーミュラ引数</strong> を参照ください。</p><blockquote><ul><li>フォーミュラが複雑な場合など、<code>queryString</code> パラメーターを使わずに、<code>formula</code> パラメーターにオブジェクトを直接渡すこともできます。 後述の <strong>フォーミュラ引数</strong> を参照ください。</li><li>セキュリティのため、 <code>query()</code> 関数内のフォーミュラ使用を禁止することができます。 <code>querySettings</code> パラメーターの説明を参照ください。</li></ul></blockquote></li></ul></li><li><p><strong>比較演算子</strong>: <em>attributePath</em> 引数と <em>value</em> 引数の比較に使用する記号 以下の記号がサポートされます:</p><table><thead><tr><th>比較</th><th>記号</th><th>説明</th></tr></thead><tbody><tr><td>等しい</td><td>=, ==</td><td>一致するデータを取得します。ワイルドカード (@) をサポートし、文字の大小/アクセントの有無は区別しません。</td></tr><tr><td></td><td>===, IS</td><td>一致するデータを取得します。ワイルドカード (@) は標準の文字として認識され、文字の大小/アクセント記号の有無は区別しません。</td></tr><tr><td>等しくない</td><td>#, !=</td><td>ワイルドカード (@) をサポートします</td></tr><tr><td></td><td>!==, IS NOT</td><td>ワイルドカード (@) は標準の文字として認識されます</td></tr><tr><td>小さい</td><td>&lt;</td><td></td></tr><tr><td>大きい</td><td>&gt;</td><td></td></tr><tr><td>以下</td><td>&lt;=</td><td></td></tr><tr><td>以上</td><td>&gt;=</td><td></td></tr><tr><td>含まれる</td><td>IN</td><td>コレクション、あるいは複数の値のうち、どれか一つの値と等しいデータを取得します。ワイルドカード (@) をサポートします。</td></tr><tr><td>宣言に Not 条件を適用</td><td>NOT</td><td>複数の演算子が含まれる宣言の前に NOT を使用する場合にはカッコをつける必要があります。</td></tr><tr><td>キーワードを含む</td><td>%</td><td>キーワードは、文字列あるいはピクチャー型の属性内で使用されるものが対象です。</td></tr></tbody></table></li><li><p><strong>値</strong>: コレクションの各要素、あるいはエンティティセレクションの各エンティティのプロパティのカレント値に対して比較する値。 <strong>プレースホルダー</strong> (後述の <strong>プレースホルダーの使用</strong> 参照) か、あるいはデータ型プロパティと同じ型の式を使用することができます。 定数値を使用する場合、以下の原則に従う必要があります:</p><ul><li><strong>テキスト</strong> テキスト型の定数値の場合は単一引用符つき、あるいはなしでも渡すことができます(後述の <strong>引用符を使用する</strong> 参照)。 文字列中の文字列を検索する (&quot;含まれる&quot; クエリ) には、ワイルドカード記号 (@) を使用して検索文字列を指定します (例: &quot;@Smith@&quot;)。 また以下のキーワードはテキスト定数においては使用できません: true, false。</li><li><strong>ブール</strong> 型の定数値: <strong>true</strong> または <strong>false</strong> (文字の大小を区別します)</li><li><strong>数値</strong> 型の定数値: 浮動小数点は &#x27;.&#x27; (ピリオド) で区切られます。</li><li><strong>日付</strong> 型の定数値: &quot;YYYY-MM-DD&quot; フォーマット。</li><li><strong>null</strong> 定数値: &quot;null&quot; キーワードを使用した場合、<strong>null</strong> と <strong>undefined</strong> プロパティの両方が検索されます。</li><li>IN 記号を使用したクエリの場合、<em>値</em> はコレクションか、attributePath の型に合致する、<!-- -->[<!-- --> ] でくくられたカンマ区切りの値である必要があります (文字列においては、<code>&quot;</code> の記号は <code>\</code> でエスケープする必要があります)。</li></ul></li><li><p><strong>論理演算子</strong>: 複数の条件をクエリ内で結合させるのに使用します(任意)。 以下の論理演算子のいずれか一つを使用できます (名前あるいは記号のどちらかを渡します):</p><table><thead><tr><th>結合</th><th>記号</th></tr></thead><tbody><tr><td>AND</td><td>&amp;, &amp;&amp;, and</td></tr><tr><td>OR</td><td>|<!-- -->,<!-- -->|<!-- -->|<!-- -->, or</td></tr></tbody></table></li><li><p><strong>order by attributePath</strong>: クエリに &quot;order by attributePath&quot; ステートメントを追加することで、結果をソートすることができます。 カンマで区切ることで、複数の order by ステートメントを使用することもできます (例: order by <em>attributePath1</em> desc, <em>attributePath2</em> asc)。 デフォルトの並び順は昇順です。 並び順を指定するには、降順の場合は &#x27;desc&#x27;、昇順の場合は &#x27;asc&#x27; を追加します。 &gt;このステートメントを使用した場合、順序ありエンティティセレクションが返されます (詳細については <a href="/docs/ja/ORDA/dsmapping#%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E9%A0%86%E5%88%97%E3%81%82%E3%82%8A%E9%A0%86%E5%88%97%E3%81%AA%E3%81%97">エンティティセレクションの順列あり/順列なし</a> を参照ください)。</p></li></ul><p><strong>引用符を使用する</strong></p><p>クエリ内で引用符を使用する場合、クエリ内においては単一引用符 &#x27; &#x27; を使用し、クエリ全体をくくるには二重引用符 &quot; &quot; を使用します。クオートを混同するとエラーが返されます。 例:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;employee.name = &#x27;smith&#x27; AND employee.firstname = &#x27;john&#x27;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>単一引用符 (&#x27;) は、クエリ文字列を分解してしまうため、検索値としてはサポートされていません。 たとえば、&quot;comp.name = &#x27;John&#x27;s pizza&#x27; &quot; はエラーを生成します。 単一引用符を含む値を検索するには、プレースホルダーを使用します (後述参照)。</p></blockquote><p><strong>カッコの使用</strong></p><p>クエリ内でカッコを使用すると、計算に優先順位をつけることができます。 たとえば、以下のようにクエリを整理することができます:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;(employee.age &gt;= 30 OR employee.age &lt;= 65) AND (employee.salary &lt;= 10000 OR employee.status = &#x27;Manager&#x27;)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>プレースホルダーの使用</strong></p><p>4D では、<em>queryString</em> 引数内の <em>attributePath</em>、<em>formula</em> および <em>値</em> にプレースホルダーを使用することができます。 プレースホルダーとは、クエリ文字列に挿入するパラメーターで、クエリ文字列が評価される時に他の値で置き換えられるものです。 プレースホルダーの値はクエリ開始時に一度だけ評価されます。各要素に対して毎回評価されるわけではありません。</p><p>プレースホルダーには二つの種類があります。<strong>インデックスプレースホルダー</strong> および <strong>命名プレースホルダー</strong> です:</p><table><thead><tr><th></th><th>インデックスプレースホルダー</th><th>命名プレースホルダー</th></tr></thead><tbody><tr><td>定義</td><td><em>queryString</em> に <code>:paramIndex</code> (例 :1, :2...) という形式でパラメーターが挿入され、それに対応する値は後に続く <em>value</em> 引数が提供します。 最大で 128個の <em>value</em> 引数を渡すことができます。</td><td><code>:paramName</code> (例: myparam など) という形でパラメーターが挿入され、その値は <em>querySettings</em> 引数の attributes または parameters オブジェクトで提供されます。</td></tr><tr><td>例題</td><td><code>$r:=class.query(&quot;:1=:2&quot;;&quot;city&quot;;&quot;Chicago&quot;)</code></td><td><code>$o.attributes:=New object(&quot;att&quot;;&quot;city&quot;)</code><br> <code>$o.parameters:=New object(&quot;name&quot;;&quot;Chicago&quot;)</code><br> <code>$r:=class.query(&quot;:att=:name&quot;;$o)</code></td></tr></tbody></table><p><em>queryString</em> には、すべての種類の引数を混ぜて渡すことができます。 <em>queryString</em> 引数は、<em>attributePath</em> と <em>formula</em> と <em>値</em> に以下のものを含めることができます:</p><ul><li>定数値 (プレースホルダーを使用しない)</li><li>インデックスプレースホルダーや命名プレースホルダー</li></ul><p>以下の理由から、クエリでのプレースホルダーの使用が<strong>推奨されます</strong>:</p><ol><li><p>悪意あるコードの挿入を防ぎます: ユーザーによって値が代入された変数をクエリ文字列として直接使用した場合、余計なクエリ引数を入力することでユーザーがクエリ条件を変更する可能性があります。 たとえば、以下のようなクエリ文字列を考えます:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $vquery:=&quot;status = &#x27;public&#x27; &amp; name = &quot;+myname // ユーザーが自分の名前を入力します</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $result:=$col.query($vquery)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>非公開のデータがフィルタリングされているため、このクエリは一見安全なように見えます。 しかしながら、もしユーザーが <em>myname</em> に <em>smith OR status=&#x27;private&#x27;</em> のような入力をした場合、クエリ文字列は解釈時に変更され、非公開データも返してしまう可能性があります。</p><p>プレースホルダーを使用した場合、セキュリティ条件を上書きすることは不可能です:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $result:=$col.query(&quot;status=&#x27;public&#x27; &amp; name=:1&quot;;myname)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>この場合、ユーザーが <em>myname</em> エリアに <em>smith OR status=&#x27;private&#x27;</em> と入力した場合でも、それはクエリ文字列とはみなされず、値として渡されるだけです。 &quot;smith OR status=&#x27;private&#x27; &quot; という名前の人物を検索したところで、結果は失敗に終わるだけです。</p></li><li><p>フォーマットや文字の問題を心配する必要がありません。これは、<em>attributePath</em> や <em>値</em> がたとえば &quot;.&quot;、&quot;[&#x27; ...などの英数字でない文字を格納している可能性がある場合にとくに有用です。</p></li><li><p>クエリに変数や式を使用することができます。 例:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $result:=$col.query(&quot;address.city = :1 &amp; name =:2&quot;;$city;$myVar+&quot;@&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$result2:=$col.query(&quot;company.name = :1&quot;;&quot;John&#x27;s Pizzas&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p><strong>null値の検索</strong></p><p>null値を検索する場合、プレースホルダーシンタックスは使用できません。なぜならクエリエンジンは null を予期せぬ比較値としてみなすからです。 たとえば、以下のクエリを実行した場合:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$vSingles:=ds.Person.query(&quot;spouse = :1&quot;;Null) // 機能しません</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>この場合 4D は null値を、引数の評価 (別のクエリから渡された属性など) に起因するエラーと解釈するため、期待した結果は得られません。 このようなクエリをおこなうには、直接的なシンタックスを使用する必要があります:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $vSingles:=ds.Person.query(&quot;spouse = null&quot;) // 正しいシンタックス</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>コレクション要素とクエリ条件のリンク</strong></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>この機能は、データクラスおよび <a href="/docs/ja/API/EntitySelectionClass#query">エンティティセレクション</a> をクエリする場合にのみ利用可能です。 <a href="/docs/ja/API/CollectionClass#query">コレクション</a> をクエリする場合には利用できません。</p></div></div><p>エンティティのオブジェクト型属性が、プロパティを複数持つオブジェクト要素からなりたっているコレクションを値として持つ場合に、当該コレクションに特定要素が存在するかを条件に親オブジェクトを検出したいケースを考えます。AND 演算子で結合された複数のクエリ条件を使用して検索するだけでは、異なるコレクション要素がそれぞれ検索条件に合致するプロパティ値を持つ場合にも当該親オブジェクトが検出されてしまいます。 これを避けるには、すべての条件に合致するコレクション要素のみが検出されるよう、クエリ条件をコレクション要素にリンクする必要があります。</p><p>たとえば、以下のような 2件のエンティティがあるとき:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">エンティティ1:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.People.name: &quot;martin&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.People.places:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;locations&quot; : [ {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;kind&quot;:&quot;home&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;city&quot;:&quot;paris&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            } ] }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">エンティティ2:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.People.name: &quot;smith&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.People.places:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;locations&quot; : [ {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;kind&quot;:&quot;home&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;city&quot;:&quot;lyon&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            } , {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;kind&quot;:&quot;office&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;city&quot;:&quot;paris&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            } ] }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&quot;locations&quot; 属性に、&quot;kind=home&quot; かつ &quot;city=paris&quot; である要素を持つ人を探したいとします。 以下のように書いた場合:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.People.query(&quot;places.locations[].kind= :1 and places.locations[].city= :2&quot;;&quot;home&quot;;&quot;paris&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>... クエリは &quot;martin&quot; と &quot;smith&quot; の<strong>両方</strong>を返します。なぜなら &quot;smith&quot; も &quot;kind=home&quot; である &quot;location&quot; 要素を持っており、&quot;city=paris&quot; である &quot;location&quot; 要素をも持っているからです (ですがこれら 2つは異なる要素です)。</p><p>検索条件に合致する属性が同一のコレクション要素に含まれるエンティティのみを取得するには、<strong>クエリ条件をリンク</strong> します。 クエリ条件をリンクするには:</p><ul><li>リンクする最初のクエリ条件にてパスの <!-- -->[<!-- -->] 内に文字を追加し、同様に他のクエリ条件でも同じ文字を追加します。 例: <code>locations[a].city and locations[a].kind</code>。 ローマ字であればどの文字でも使用可能です (文字の大小は区別されません)。</li><li>同じクエリ内に、異なるリンク条件を追加するには、別の文字を使用します。 単一のクエリ内では、最大で 26組のリンク条件を使用することができます。</li></ul><p>上記の 2件のエンティティにおいて、以下のように書いた場合:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds.People.query(&quot;places.locations[a].kind= :1 and places.locations[a].city= :2&quot;;&quot;home&quot;;&quot;paris&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>... クエリは、&quot;kind=home&quot; かつ &quot;city=paris&quot; である &quot;locations&quot; 要素を持つエンティティ &quot;martin&quot; のみを返します。 &quot;home&quot; と&quot;paris&quot; が同じコレクション要素内にない &quot;smith&quot; は、クエリの結果に含まれません。</p><p><strong>N対Nリレーションのクエリ</strong></p><p>ORDA は、N対Nリレーションにおけるクエリを容易にするための特別な構文を提供します。 このような場合には、<code>AND</code> 演算子を使って同じ属性の異なる値を検索する必要があるかもしれません。 たとえば、以下のようなストラクチャーの場合を考えます:</p><p><img loading="lazy" alt="alt-text" src="/docs/ja/assets/images/manytomany-1ad2ed56ebdb101476120ab419c1994d.png" width="537" height="268" class="img_ev3q"></p><p>俳優 A と俳優 B の <em>両方</em> が出演している映画をすべて検索したいとします。 <code>AND</code> 演算子を使った単純なクエリを書いても、うまくいきません:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 無効なコード</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$es:=ds.Movie.query(&quot;roles.actor.lastName = :1 AND roles.actor.lastName = :2&quot;;&quot;Hanks&quot;;&quot;Ryan&quot;)  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// $es is empty</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>基本的に、この問題はクエリの内部ロジックに関連しています。値が &quot;A&quot; と &quot;B&quot; の両方である属性を検索することはできません。</p><p>このようなクエリを実行するために、ORDA では特別な構文を用意しています。具体的には、文字列内で使用される追加のリレート属性ずべてにおいて、<strong>{}</strong> の間に <em>クラスインデックス</em> を追加します。</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;relationAttribute.attribute = :1 AND relationAttribute{x}.attribute = :2 [AND relationAttribute{y}.attribute...]&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>{x}</strong> は、リレーション属性のために新たな参照を作成するよう、ORDA に指示します。 すると、ORDA は必要なビットマップ操作を内部で実行します。 <strong>x</strong> は <strong>0 以外</strong> の任意の数であることに注意してください ({1}、{2}、{1540}...)。 ORDA は、各クラスインデックス用の一意な参照をクエリ内においてのみ必要とします。</p><p>この例では、次のようになります:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 有効なコード</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$es:=ds.Movie.query(&quot;roles.actor.lastName = :1 AND roles.actor{2}.lastName = :2&quot;;&quot;Hanks&quot;;&quot;Ryan&quot;)  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// $es には映画が格納されます (You&#x27;ve Got Mail, Sleepless in Seattle, Joe Versus the Volcano)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>formula 引数</strong></p><p><em>queryString</em> 引数にフォーミュラを挿入 (上記参照) する代わりに、formula オブジェクトをブール検索条件として直接渡すことができます。 トークナイズの利点を生かせる、コードが検索しやすく読みやすい、などといった面から、クエリにおけるフォーミュラオブジェクトの使用は <strong>推奨</strong> されています。</p><p>このフォーミュラは、<a href="/docs/ja/API/FunctionClass#formula"><code>Formula</code></a> または <a href="/docs/ja/API/FunctionClass#formula-from-string"><code>Formula from string</code></a> コマンドによって作成されたものでなくてはなりません。 この場合において:</p><ul><li>フォーミュラは処理されるエンティティごとに評価され、true または false を返さなくてはなりません。 クエリの実行中、フォーミュラの結果がブール値でなかった場合、それは false であるとみなされます。</li><li>処理中のエンティティはフォーミュラ内において <code>This</code> で参照されます。</li><li><code>Formula</code> オブジェクトが <strong>null</strong> の場合、エラー1626 (&quot;テキストまたはフォーミュラが必要です&quot;) が生成されます。<blockquote><p>セキュリティのため、 <code>query()</code> 関数内のフォーミュラ使用を禁止することができます。 <em>querySettings</em> パラメーターの説明を参照ください。</p></blockquote></li></ul><p><strong>フォーミュラに引数を渡す</strong></p><p><code>query()</code> クラス関数によって呼び出されるフォーミュラは、引数を受け取ることができます:</p><ul><li>引数は、<em>querySettings</em> 引数の <strong>args</strong> プロパティ (オブジェクト) を通して渡さなければなりません。</li><li>フォーミュラは <strong>args</strong> オブジェクトを <strong>$1</strong> に受け取ります。</li></ul><p>以下の短いコードは、引数をフォーミュラに渡す仕組みを示しています:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings:=New object(&quot;args&quot;;New object(&quot;exclude&quot;;&quot;-&quot;)) // 引数を渡すための args オブジェクト</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Students.query(&quot;eval(checkName($1.exclude))&quot;;$settings) // $1 が args を受け取ります</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>さらなる使用例は、例題3にて紹介されています。</p><p><strong>4D Server</strong>: クライアント/サーバーにおいては、フォーミュラはサーバー上で実行されます。 このコンテキストにおいては、<code>querySettings.args</code> オブジェクトのみがフォーミュラに送信されます。</p><p><strong>querySettings 引数</strong></p><p><em>querySettings</em> 引数は、追加のオプションを格納したオブジェクトです。 以下のオブジェクトプロパティがサポートされています:</p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>parameters</td><td>Object</td><td><em>queryString</em> または <em>formula</em> に <strong>値の命名プレースホルダー</strong> を使用した場合に渡すオブジェクト。 値は、プロパティ/値のペアで表現されます。プロパティは、<em>queryString</em> または <em>formula</em> に値の代わりに挿入されたプレースホルダー名 (&quot;:placeholder&quot;など) で、値は、実際に比較される値です。 インデックスプレースホルダー (value引数として値を直接渡す方法) と命名プレースホルダーは、同じクエリ内で同時に使用することができます。</td></tr><tr><td>attributes</td><td>Object</td><td><em>queryString</em> または <em>formula</em> に <strong>属性パスの命名プレースホルダー</strong> を使用した場合に渡すオブジェクト。 属性パスは、プロパティ/値のペアで表現されます。プロパティは、<em>queryString</em> または <em>formula</em> に属性パスの代わりに挿入されたプレースホルダー名 (&quot;:placeholder&quot;など) で、値は、属性パスを表す文字列または文字列のコレクションです。 値には、データクラスのスカラー属性・リレート属性・オブジェクトフィールド内のプロパティへの属性パスを指定することができます。<table><tr><th>タイプ</th><th>説明</th></tr><tr><td>String</td><td>ドット記法を使用して表現された attributePath (例: &quot;name&quot; または &quot;user.address.zipCode&quot;)</td></tr><tr><td>String の Collection</td><td>コレクションの各要素が attributePath の階層を表します (例: <!-- -->[&quot;name&quot;]<!-- --> または <!-- -->[&quot;user&quot;,&quot;address&quot;,&quot;zipCode&quot;]<!-- -->)。 コレクションを使用することで、ドット記法に準じていない名前の属性に対してもクエリすることができます (例: <!-- -->[<!-- -->&quot;4Dv17.1&quot;,&quot;en/fr&quot;])。</td></tr></table>インデックスプレースホルダー (<em>value</em> 引数として値を直接渡す方法) と命名プレースホルダーは、同じクエリ内で同時に使用することができます。</td></tr><tr><td>args</td><td>Object</td><td>フォーミュラに渡す引数。 <strong>args</strong> オブジェクトは、フォーミュラ内の $1 が受け取るので、その値は <em>$1.property</em> という形で利用可能です (例題3 参照)。</td></tr><tr><td>allowFormulas</td><td>Boolean</td><td>クエリ内でフォーミュラの呼び出しを許可するには true (デフォルト)。 フォーミュラ実行を禁止するには false を渡します。 false に設定されているときに、フォーミュラが <code>query()</code> に渡された場合、エラーが発生します (1278 - フォーミュラはこのメンバーメソッドでは許可されていません)。</td></tr><tr><td>context</td><td>Text</td><td>エンティティセレクションに適用されている自動の最適化コンテキストのラベル。 エンティティセレクションを扱うコードはこのコンテキストを使うことで最適化の恩恵を受けます。 この機能はクライアント/サーバー処理を想定して設計されています。詳細な情報については、<a href="/docs/ja/API/entities.md#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96"><strong>クライアント/サーバーの最適化</strong></a> の章を参照ください。</td></tr><tr><td>queryPlan</td><td>Boolean</td><td>戻り値のエンティティコレクションに、実行する直前のクエリの詳細 (クエリプラン) を含めるかどうかを指定します。 返されるプロパティは、クエリプラン あるいはサブクエリ (複合クエリの場合) を格納したオブジェクトです。 このオプションはアプリケーションの開発フェーズにおいて有用です。 このオプションは通常 queryPath と組み合わせて使用されます。 省略時のデフォルト: false。 <strong>注:</strong> このプロパティは <code>entitySelection.query()</code> および <code>dataClass.query()</code> 関数においてのみサポートされます。</td></tr><tr><td>queryPath</td><td>Boolean</td><td>戻り値のエンティティコレクションに、実際に実行されたクエリの詳細を含めるかどうかを指定します。 返されたプロパティは、クエリで実際に使用されたパス (通常は queryPlan と同一ですが、エンジンがクエリを最適化した場合には異なる場合があります)、処理時間と検出レコード数を格納したオブジェクトです。 このオプションはアプリケーションの開発フェーズにおいて有用です。 省略時のデフォルト: false。 <strong>注:</strong> このプロパティは <code>entitySelection.query()</code> および <code>dataClass.query()</code> 関数においてのみサポートされます。</td></tr></tbody></table><p><strong>queryPlan と queryPath について</strong></p><p><code>queryPlan</code>/<code>queryPath</code> に格納される情報には、クエリの種類 (インデックスあるいはシーケンシャル)、必要なサブクエリおよびその連結演算子が含まれます。 クエリパスには、見つかったエンティティの数と各検索条件を実行するににかかった時間も含まれます。 この情報は、アプリケーションの開発中に解析することで有効に活用できます。 一般的には、クエリプランとクエリパスの詳細は同一になるはずですが、4D はパフォーマンスの向上のために、動的な最適化をクエリ実行時に実装することがあるからです。 たとえば、その方が早いと判断した場合には、4Dエンジンはインデックス付きクエリをシーケンシャルなものへと動的に変換することがあります。 これは検索されているエンティティの数が少ないときに起こりえます。</p><p>たとえば、以下のクエリを実行した場合:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $sel:=ds.Employee.query(&quot;salary &lt; :1 and employer.name = :2 or employer.revenues &gt; :3&quot;;\  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 50000;&quot;Lima West Kilo&quot;;10000000;New object(&quot;queryPath&quot;;True;&quot;queryPlan&quot;;True))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>queryPlan:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{Or:[{And:[{item:[index : Employee.salary ] &lt; 50000},  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> {item:Join on Table : Company  :  Employee.employerID = Company.ID,  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> subquery:[{item:[index : Company.name ] = Lima West Kilo}]}]},  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> {item:Join on Table : Company  :  Employee.employerID = Company.ID,  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> subquery:[{item:[index : Company.revenues ] &gt; 10000000}]}]}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>queryPath:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{steps:[{description:OR,time:63,recordsfounds:1388132,  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> steps:[{description:AND,time:32,recordsfounds:131,  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> steps:[{description:[index : Employee.salary ] &lt; 50000,time:16,recordsfounds:728260},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:0,recordsfounds:131,  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> steps:[{steps:[{description:[index : Company.name ] = Lima West Kilo,time:0,recordsfounds:1}]}]}]},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:31,recordsfounds:1388132,  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> steps:[{steps:[{description:[index : Company.revenues ] &gt; 10000000,time:0,recordsfounds:933}]}]}]}]}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-1-4">例題 1<a class="hash-link" href="#例題-1-4" title="見出しへの直接リンク">​</a></h4><p>この例題では、様々なクエリの例を紹介します。</p><p>文字列のクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Customer.query(&quot;firstName = &#x27;S@&#x27;&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>NOT節を用いたクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;not(firstName=Kim)&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>日付のクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;birthDate &gt; :1&quot;;&quot;1970-01-01&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;birthDate &lt;= :1&quot;;Current date-10950)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>値のインデックスプレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Customer.query(&quot;(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)&quot;;&quot;D@&quot;;&quot;R@&quot;;&quot;S@&quot;;&quot;K@&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>リレートデータクラス対して値のインデックスプレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;lastName = :1 and manager.lastName = :2&quot;;&quot;M@&quot;;&quot;S@&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>降順の order by ステートメントを含んだ、インデックスプレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Student.query(&quot;nationality = :1 order by campus.name desc, lastname&quot;;&quot;French&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>値の命名プレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $querySettings : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $managedCustomers : cs.CustomerSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$querySettings:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$querySettings.parameters:=New object(&quot;userId&quot;;1234;&quot;extraInfo&quot;;New object(&quot;name&quot;;&quot;Smith&quot;))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$managedCustomers:=ds.Customer.query(&quot;salesperson.userId = :userId and name = :extraInfo.name&quot;;$querySettings)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>値の命名プレースホルダーと、値のインデックスプレースホルダーの両方を使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $querySettings : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $managedCustomers : cs.CustomerSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$querySettings.parameters:=New object(&quot;userId&quot;;1234)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$managedCustomers:=ds.Customer.query(&quot;salesperson.userId = :userId and name=:1&quot;;&quot;Smith&quot;;$querySettings)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>queryPlan および queryPath オブジェクトを返すクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)&quot;;&quot;D@&quot;;&quot;R@&quot;;&quot;S@&quot;;&quot;K@&quot;;New object(&quot;queryPlan&quot;;True;&quot;queryPath&quot;;True))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 戻り値のエンティティセレクションから以下のプロパティを取得できます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $queryPlan; $queryPath : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$queryPlan:=$entitySelection.queryPlan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$queryPath:=$entitySelection.queryPath</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>コレクション型の属性パスを用いたクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;extraInfo.hobbies[].name = :1&quot;;&quot;horsebackriding&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>コレクション型の属性パスとクエリ条件をリンクしたクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;extraInfo.hobbies[a].name = :1 and extraInfo.hobbies[a].level=:2&quot;;&quot;horsebackriding&quot;;2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>コレクション型の属性パスとクエリ条件を、複数リンクしたクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;extraInfo.hobbies[a].name = :1 and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> extraInfo.hobbies[a].level = :2 and extraInfo.hobbies[b].name = :3 and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> extraInfo.hobbies[b].level = :4&quot;;&quot;horsebackriding&quot;;2;&quot;Tennis&quot;;5)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>オブジェクト型の属性パスを用いたクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;extra.eyeColor = :1&quot;;&quot;blue&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>IN節を用いたクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;firstName in :1&quot;;New collection(&quot;Kim&quot;;&quot;Dixie&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>NOT (IN) 節を用いたクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$entitySelection:=ds.Employee.query(&quot;not (firstName in :1)&quot;;New collection(&quot;John&quot;;&quot;Jane&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>属性パスのインデックスプレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $es : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$es:=ds.Employee.query(&quot;:1 = 1234 and :2 = &#x27;Smith&#x27;&quot;;&quot;salesperson.userId&quot;;&quot;name&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // salesperson はリレートエンティティです</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>属性パスのインデックスプレースホルダーを、値の命名プレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $es : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $querySettings : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$querySettings:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$querySettings.parameters:=New object(&quot;customerName&quot;;&quot;Smith&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$es:=ds.Customer.query(&quot;:1 = 1234 and :2 = :customerName&quot;;&quot;salesperson.userId&quot;;&quot;name&quot;;$querySettings)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // salesperson はリレートエンティティです</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>属性パスと値のインデックスプレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $es : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$es:=ds.Clients.query(&quot;:1 = 1234 and :2 = :3&quot;;&quot;salesperson.userId&quot;;&quot;name&quot;;&quot;Smith&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // salesperson はリレートエンティティです</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-2-4">例題 2<a class="hash-link" href="#例題-2-4" title="見出しへの直接リンク">​</a></h4><p>この例題では、属性パスの命名プレースホルダーを使用するクエリを紹介します。</p><p>2件のエンティティをもつ Employee データクラスを前提に考えます:</p><p>エンティティ1:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">name: &quot;Marie&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">number: 46</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">softwares:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Word 10.2&quot;: &quot;Installed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Excel 11.3&quot;: &quot;To be upgraded&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Powerpoint 12.4&quot;: &quot;Not installed&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>エンティティ2:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">name: &quot;Sophie&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">number: 47</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">softwares:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Word 10.2&quot;: &quot;Not installed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Excel 11.3&quot;: &quot;To be upgraded&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Powerpoint 12.4&quot;: &quot;Not installed&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>属性パスの命名プレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $querySettings : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $querySettings:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $querySettings.attributes:=New object(&quot;attName&quot;;&quot;name&quot;;&quot;attWord&quot;;New collection(&quot;softwares&quot;;&quot;Word 10.2&quot;))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Employee.query(&quot;:attName = &#x27;Marie&#x27; and :attWord = &#x27;Installed&#x27;&quot;;$querySettings)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //$es.length=1 (Employee Marie)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>属性パスと値の命名プレースホルダーを使用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $querySettings : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.EmployeeSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $name : Text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $querySettings:=New object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 値の命名プレースホルダー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // ユーザーに検索する名前を入力してもらいます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $name:=Request(&quot;検索する名前を入力してください:&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> If(OK=1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $querySettings.parameters:=New object(&quot;givenName&quot;;$name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 属性パスの命名プレースホルダー</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $querySettings.attributes:=New object(&quot;attName&quot;;&quot;name&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $es:=ds.Employee.query(&quot;:attName= :givenName&quot;;$querySettings)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> End if</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-3-3">例題 3<a class="hash-link" href="#例題-3-3" title="見出しへの直接リンク">​</a></h4><p>この例題では、クエリにおいて、引数あり・引数なしでフォーミュラを使用する様々な方法を紹介します。</p><p><code>eval()</code> を使い、テキストとしてフォーミュラを <em>queryString</em> パラメーターに渡すクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.StudentsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Students.query(&quot;eval(length(This.lastname) &gt;=30) and nationality=&#x27;French&#x27;&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>プレースホルダーを使い、<code>Formula</code>オブジェクトとしてフォーミュラを渡すクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.StudentsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $formula : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $formula:=Formula(Length(This.lastname)&gt;=30)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Students.query(&quot;:1 and nationality=&#x27;French&#x27;&quot;;$formula)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Formula</code> オブジェクトのみを検索条件として渡したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.StudentsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $formula : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $formula:=Formula(Length(This.lastname)&gt;=30)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Students.query($formula)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>フォーミュラを複数適用したクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $formula1; $1; $formula2 ;$0 : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $formula1:=$1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $formula2:=Formula(Length(This.firstname)&gt;=30)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $0:=ds.Students.query(&quot;:1 and :2 and nationality=&#x27;French&#x27;&quot;;$formula1;$formula2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>queryString</em> のテキストフォーミュラが引数を受け取るクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.StudentsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $settings : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings:=New object()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings.args:=New object(&quot;filter&quot;;&quot;-&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Students.query(&quot;eval(checkName($1.filter)) and nationality=:1&quot;;&quot;French&quot;;$settings)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // checkName メソッド</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> #DECLARE($exclude : Text) -&gt; $result : Boolean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $result:=(Position($exclude;This.lastname)=0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同じ <strong><em>checkName</em></strong> メソッドを <code>Formula</code> オブジェクトに格納してプレースホルダーで渡し、引数を受け取るクエリ:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.StudentsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $settings; $formula : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $formula:=Formula(checkName($1.filter))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings:=New object()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings.args:=New object(&quot;filter&quot;;&quot;-&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Students.query(&quot;:1 and nationality=:2&quot;;$formula;&quot;French&quot;;$settings)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $settings.args.filter:=&quot;*&quot; // $formula オブジェクトは更新せずに引数を変更します</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $es:=ds.Students.query(&quot;:1 and nationality=:2&quot;;$formula;&quot;French&quot;;$settings)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ユーザーがクエリを入力する場合などに、フォーミュラを禁止する場合:</p><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $es : cs.StudentsSelection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $settings : Object</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> var $queryString : Text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> $queryString:=Request(&quot;Enter your query:&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> if(OK=1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $settings:=New object(&quot;allowFormulas&quot;;False)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $es:=ds.Students.query($queryString;$settings) // $queryString にフォーミュラが格納されていた場合にはエラーが生成されます</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> End if</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="参照-3">参照<a class="hash-link" href="#参照-3" title="見出しへの直接リンク">​</a></h4><p>エンティティセレクションの <a href="/docs/ja/API/EntitySelectionClass#query"><code>.query()</code></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setremotecachesettings">.setRemoteCacheSettings()<a class="hash-link" href="#setremotecachesettings" title="見出しへの直接リンク">​</a></h2><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>履歴</summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>バージョン</th><th>内容</th></tr></thead><tbody><tr><td>v19 R5</td><td>追加</td></tr></tbody></table></div></div></details><p><strong>.setRemoteCacheSettings</strong>(<em>settings</em> : Object) </p><table><thead><tr><th>引数</th><th>タイプ</th><th></th><th>説明</th></tr></thead><tbody><tr><td>settings</td><td>Object</td><td>-&gt;</td><td>データクラスの ORDAキャッシュについて、タイムアウトと最大サイズを指定するオブジェクト</td></tr></tbody></table><p>|</p><blockquote><p><strong>上級者向け:</strong> この機能は、特定の構成のため、ORDAのデフォルト機能をカスタマイズする必要がある開発者向けです。 ほとんどの場合、使用する必要はないでしょう。</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="説明-12">説明<a class="hash-link" href="#説明-12" title="見出しへの直接リンク">​</a></h4><p><code>.setRemoteCacheSettings()</code> 関数は、 データクラスの ORDAキャッシュについて、タイムアウトと最大サイズを指定します。</p><p><em>settings</em> には、以下のプロパティを持つオブジェクトを渡します:</p><table><thead><tr><th>プロパティ</th><th>タイプ</th><th>説明</th></tr></thead><tbody><tr><td>timeout</td><td>Integer</td><td>タイムアウト (秒単位)</td></tr><tr><td>maxEntries</td><td>Integer</td><td>エンティティの最大数</td></tr></tbody></table><p><code>timeout</code> は、データクラスの ORDAキャッシュのタイムアウトを設定します (デフォルトは 30秒)。 タイムアウトを過ぎると、キャッシュ内のデータクラスのエンティティは期限切れとみなされます。 これは、次のことを意味します:</p><ul><li>データはまだ存在します</li><li>次にそのデータが必要になったときには、サーバーに要求します</li><li>エンティティの最大数に達すると、4D は期限切れのデータを自動的に削除します</li></ul><p><code>timeout</code> プロパティを設定すると、すでにキャッシュに存在するエンティティに新しいタイムアウトが設定されます。 これは頻繁に変更されないデータを扱う場合、つまり、サーバーへの新たな要求が必要ない場合に便利です。</p><p><code>maxEntries</code> は、ORDAキャッシュ内のエンティティの最大数を設定します。 デフォルトは 30,000 です。</p><p>最小エントリー数は 300 のため、<code>maxEntries</code> の値は 300以上でなくてはなりません。 それ以外の場合は無視され、最大エントリー数は 300 に設定されます。</p><p><code>timeout</code> および <code>maxEntries</code> として有効なプロパティが渡されない場合、キャッシュはデフォルト値または以前に設定された値のまま変更されません。</p><p>エンティティが保存されると、キャッシュ内で更新され、タイムアウトに達すると期限切れとなります。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="例題-12">例題<a class="hash-link" href="#例題-12" title="見出しへの直接リンク">​</a></h4><div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-4d codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var $ds : 4D.DataStoreImplementation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ds:=Open datastore(New object(&quot;hostname&quot;; &quot;www.myserver.com&quot;); &quot;myDS&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ds.Buildings.setRemoteCacheSettings(New object(&quot;timeout&quot;; 60; &quot;maxEntries&quot;; 350))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="参照-4">参照<a class="hash-link" href="#参照-4" title="見出しへの直接リンク">​</a></h4><p><a href="#clearremotecache">.clearRemoteCache()</a><br><a href="#clearremotecache">.getRemoteCache()</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントのナビゲーション"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/ja/API/CryptoKeyClass"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">CryptoKey</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/ja/API/DataClassAttributeClass"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">DataClassAttribute</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概要" class="table-of-contents__link toc-highlight">概要</a></li><li><a href="#attributename" class="table-of-contents__link toc-highlight">.<em>attributeName</em></a></li><li><a href="#all" class="table-of-contents__link toc-highlight">.all()</a></li><li><a href="#clearremotecache" class="table-of-contents__link toc-highlight">.clearRemoteCache()</a></li><li><a href="#fromcollection" class="table-of-contents__link toc-highlight">.fromCollection()</a></li><li><a href="#get" class="table-of-contents__link toc-highlight">.get()</a></li><li><a href="#getcount" class="table-of-contents__link toc-highlight">.getCount()</a></li><li><a href="#getdatastore" class="table-of-contents__link toc-highlight">.getDataStore()</a></li><li><a href="#getinfo" class="table-of-contents__link toc-highlight">.getInfo()</a></li><li><a href="#getremotecache" class="table-of-contents__link toc-highlight">.getRemoteCache()</a></li><li><a href="#new" class="table-of-contents__link toc-highlight">.new()</a></li><li><a href="#newselection" class="table-of-contents__link toc-highlight">.newSelection()</a></li><li><a href="#query" class="table-of-contents__link toc-highlight">.query()</a></li><li><a href="#setremotecachesettings" class="table-of-contents__link toc-highlight">.setRemoteCacheSettings()</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">コミュニティ</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">デベロッパー・センター</a></li><li class="footer__item"><a href="https://blog.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Blog</a></li><li class="footer__item"><a href="https://discuss.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Forum</a></li><li class="footer__item"><a href="https://facebook.com/4Dsoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://twitter.com/4Dsoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://youtube.com/user/4Dsoftware" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://github.com/4D" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div><div class="col footer__col"><div class="footer__title">サポート</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://doc.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D Doc Center (旧ドキュメント)</a></li><li class="footer__item"><a href="https://kb.4d.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">ナレッジベース</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">ダウンロード<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/resources" target="_blank" rel="noopener noreferrer" class="footer__link-item">Resources<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/4d-technical-support" target="_blank" rel="noopener noreferrer" class="footer__link-item">サポートを受ける<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">会社概要</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://us.4d.com/about-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">4D社について<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">コンタクト<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/4d-around-the-world" target="_blank" rel="noopener noreferrer" class="footer__link-item">世界中の4D<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://us.4d.com/Careers" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2022 4D SAS - All rights reserved</div></div></div></footer></div>
<script src="/docs/ja/assets/js/runtime~main.5758d053.js"></script>
<script src="/docs/ja/assets/js/main.bfd123f5.js"></script>
</body>
</html>