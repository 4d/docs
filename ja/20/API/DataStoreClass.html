<!doctype html><html lang=ja dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-20 docs-doc-page docs-doc-id-API/DataStoreClass" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>DataStore | 4D Docs</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://developer.4d.com/docs/ja/20/API/DataStoreClass><meta data-rh=true property=og:locale content=ja><meta data-rh=true property=og:locale:alternate content=en><meta data-rh=true property=og:locale:alternate content=fr><meta data-rh=true property=og:locale:alternate content=es><meta data-rh=true property=og:locale:alternate content=pt><meta data-rh=true name=docusaurus_locale content=ja><meta data-rh=true name=docsearch:language content=ja><meta data-rh=true name=docusaurus_version content=20><meta data-rh=true name=docusaurus_tag content=docs-default-20><meta data-rh=true name=docsearch:version content=20><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-20><meta data-rh=true property=og:title content="DataStore | 4D Docs"><meta data-rh=true name=description content="データストア とは、ORDA によって提供されるインターフェースオブジェクトです。データストアはデータベースへの参照とアクセスを提供します。 Datastore オブジェクトは以下のコマンドによって返されます:"><meta data-rh=true property=og:description content="データストア とは、ORDA によって提供されるインターフェースオブジェクトです。データストアはデータベースへの参照とアクセスを提供します。 Datastore オブジェクトは以下のコマンドによって返されます:"><link data-rh=true rel=icon href=/docs/ja/img/favicon/4d.gif><link data-rh=true rel=canonical href=https://developer.4d.com/docs/ja/20/API/DataStoreClass><link data-rh=true rel=alternate href=https://developer.4d.com/docs/20/API/DataStoreClass hreflang=en><link data-rh=true rel=alternate href=https://developer.4d.com/docs/fr/20/API/DataStoreClass hreflang=fr><link data-rh=true rel=alternate href=https://developer.4d.com/docs/es/20/API/DataStoreClass hreflang=es><link data-rh=true rel=alternate href=https://developer.4d.com/docs/ja/20/API/DataStoreClass hreflang=ja><link data-rh=true rel=alternate href=https://developer.4d.com/docs/pt/20/API/DataStoreClass hreflang=pt><link data-rh=true rel=alternate href=https://developer.4d.com/docs/20/API/DataStoreClass hreflang=x-default><link data-rh=true rel=preconnect href=https://OJ04C0M3CU-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="4D Docs" href=/docs/ja/opensearch.xml><link rel=stylesheet href=/docs/ja/assets/css/styles.1ba35a04.css><script src=/docs/ja/assets/js/main.775f109d.js defer></script><script src=/docs/ja/assets/js/runtime~main.5e01330e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label=メインコンテンツまでスキップ><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>メインコンテンツまでスキップ</a></div><nav aria-label=Main class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class=navbar__inner><div class=navbar__items><button aria-label=ナビゲーションバーの切り替え aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/docs/ja/><div class=navbar__logo><img src=/docs/ja/img/logohome.png alt="4D ロゴ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/docs/ja/img/logohome.png alt="4D ロゴ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">4D ドキュメンテーション</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/docs/ja/20/API/DataStoreClass>20</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/ja/API/DataStoreClass>20 R9 BETA</a><li><a class=dropdown__link href=/docs/ja/20-R8/API/DataStoreClass>20 R8</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/ja/20/API/DataStoreClass>20</a><li><a class=dropdown__link href=/docs/ja/19/API/DataStoreClass>19</a><li><a class=dropdown__link href=/docs/ja/18/GettingStarted/installation>18</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>日本語</a><ul class=dropdown__menu><li><a href=/docs/20/API/DataStoreClass rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href=/docs/fr/20/API/DataStoreClass rel="noopener noreferrer" class=dropdown__link lang=fr>Français</a><li><a href=/docs/es/20/API/DataStoreClass rel="noopener noreferrer" class=dropdown__link lang=es>Español</a><li><a href=/docs/ja/20/API/DataStoreClass rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=ja>日本語</a><li><a href=/docs/pt/20/API/DataStoreClass rel="noopener noreferrer" class=dropdown__link lang=pt>Português</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="ダークモードとライトモードを切り替える (現在は ライトモード)" aria-label="ダークモードとライトモードを切り替える (現在は ライトモード)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="検索 (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>検索</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label=トップに戻る class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/docs/ja/><img src=/docs/ja/img/logohome.png alt="4D ロゴ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/docs/ja/img/logohome.png alt="4D ロゴ" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>4D ドキュメンテーション</b></a><nav aria-label=Docsサイドバー class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/ja/20/category/getting-started>はじめに</a><button aria-label="サイドバーのカテゴリ 'はじめに ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/ja/20/category/core-development>コア開発</a><button aria-label="サイドバーのカテゴリ 'コア開発 ' を閉じる" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/ja/20/Project/overview>プロジェクト管理</a><button aria-label="サイドバーのカテゴリ 'プロジェクト管理 ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/ja/20/category/4d-language-concepts>ランゲージのコンセプト</a><button aria-label="サイドバーのカテゴリ 'ランゲージのコンセプト ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/ja/20/ORDA/overview>ORDA</a><button aria-label="サイドバーのカテゴリ 'ORDA ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href=https://doc.4d.com/4Dv20/4D/20/4D-Language-Reference.100-6237190.en.html target=_blank rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex=0>ランゲージリファレンス (4D Doc Center)<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/ja/20/category/class-API-reference>クラス関数</a><button aria-label="サイドバーのカテゴリ 'クラス関数 ' を閉じる" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/overview>クラス関数について</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/BlobClass>BLOB</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/ClassClass>Class</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/CollectionClass>Collection</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/CryptoKeyClass>CryptoKey</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/DataClassClass>DataClass</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/ja/20/API/DataStoreClass>DataStore</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/EmailObjectClass>Email</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/EntityClass>Entity</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/EntitySelectionClass>EntitySelection</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/FileClass>File</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/FileHandleClass>FileHandle</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/FolderClass>Folder</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/FunctionClass>Function</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/HTTPRequestClass>HTTPRequest</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/IMAPTransporterClass>IMAPTransporter</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/MailAttachmentClass>MailAttachment</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/POP3TransporterClass>POP3Transporter</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/SessionClass>Session</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/SignalClass>Signal</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/SMTPTransporterClass>SMTPTransporter</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/SystemWorkerClass>SystemWorker</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/WebServerClass>WebServer</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/WebSocketConnectionClass>WebSocketConnection</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/WebSocketServerClass>WebSocketServer</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/ZipArchiveClass>ZIPArchive</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/ZipFileClass>ZIPFile</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/20/API/ZipFolderClass>ZIPFolder</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/ja/20/code-editor/overview>コードの扱い方</a><button aria-label="サイドバーのカテゴリ 'コードの扱い方 ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/ja/20/Tags/tags>タグ</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/ja/20/Debugging/basics>デバッガー</a><button aria-label="サイドバーのカテゴリ 'デバッガー ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/ja/20/settings/overview>Settings</a><button aria-label="サイドバーのカテゴリ 'Settings ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/ja/20/Preferences/overview>環境設定</a><button aria-label="サイドバーのカテゴリ '環境設定 ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/ja/20/category/administration>管理</a><button aria-label="サイドバーのカテゴリ '管理 ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/ja/20/Extensions/overview>拡張機能</a><button aria-label="サイドバーのカテゴリ '拡張機能 ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/ja/20/category/web-applications>Web アプリ</a><button aria-label="サイドバーのカテゴリ 'Web アプリ ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/ja/20/category/desktop-applications>デスクトップアプリ</a><button aria-label="サイドバーのカテゴリ 'デスクトップアプリ ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a href=https://developer.4d.com/go-mobile/ target=_blank rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false>モバイルアプリ</a></div></ul></nav><button type=button title=サイドバーを隠す aria-label=サイドバーを隠す class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=パンくずリスト><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label=ホームページ class=breadcrumbs__link href=/docs/ja/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/ja/20/category/core-development><span itemprop=name>コア開発</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/ja/20/category/class-API-reference><span itemprop=name>クラス関数</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>DataStore</span><meta itemprop=position content=3></ul></nav><span class="theme-doc-version-badge badge badge--secondary">バージョン: 20</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">このページ上で</button></div><div class="theme-doc-markdown markdown"><header><h1>DataStore</h1></header><p><a href=/docs/ja/20/ORDA/dsmapping#datastore>データストア</a> とは、ORDA によって提供されるインターフェースオブジェクトです。データストアはデータベースへの参照とアクセスを提供します。 <code>Datastore</code> オブジェクトは以下のコマンドによって返されます:</p>
<ul>
<li><a href=#ds>ds</a>: メインデータストアへのショートカット</li>
<li><a href=#open-datastore>Open datastore</a>: リモートデータストアを開きます</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=概要>概要<a href=#概要 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h3>

































































<table><thead><tr><th><tbody><tr><td><a href=#canceltransaction><strong>.cancelTransaction()</strong></a>    トランザクションをキャンセルします<tr><td><a href=#clearallremotecontexts><strong>.clearAllRemoteContexts()</strong></a>    データストアのすべてのアクティブコンテキストの全属性をクリアします<tr><td><a href=#dataclassname><em><strong>.dataclassName</strong></em> : 4D.DataClass</a>    データクラスの詳細が格納されています<tr><td><a href=#encryptionstatus><strong>.encryptionStatus()</strong>: Object</a>    カレントデータファイルの暗号化状態を示すオブジェクトを返します<tr><td><a href=#flushandlock><strong>.flushAndLock()</strong></a>    ローカルデータストアのキャッシュをフラッシュし、データベースに対して他のプロセスが書き込み操作をおこなうのを防ぎます<tr><td><a href=#getallremotecontexts><strong>.getAllRemoteContexts()</strong> : Collection</a>    データストア内のすべてのアクティブな最適化コンテキストに関する情報を格納するオブジェクトのコレクションを返します<tr><td><a href=#getinfo><strong>.getInfo()</strong>: Object</a>    データストアの情報を提供するオブジェクトを返します<tr><td><a href=#getremotecontextinfo><strong>.getRemoteContextInfo</strong>(<em>contextName</em> : Text) : Object </a>     <em>contextName</em> で指定したデータストアの最適化コンテキストに関する情報を格納するオブジェクトを返します<tr><td><a href=#getrequestlog><strong>.getRequestLog()</strong> : Collection</a>    クライアント側のメモリに記録されている ORDAリクエストを返します<tr><td><a href=#locked><strong>.locked()</strong> : Boolean</a>    ローカルデータストアが現在ロックされている場合、true を返します<tr><td><a href=#makeselectionsalterable><strong>.makeSelectionsAlterable()</strong></a>    カレントアプリケーションのデータストアにおいて、すべての新規エンティティセレクションをデフォルトで追加可能に設定します<tr><td><a href=#providedatakey><strong>.provideDataKey</strong>( <em>curPassPhrase</em> : Text ) : Object <br><strong>.provideDataKey</strong>( <em>curDataKey</em> : Object ) : Object </a>    データストアのカレントデータファイルのデータ暗号化キーを受け取り、暗号化されたデータと合致するかどうかチェックします<tr><td><a href=#setadminprotection><strong>.setAdminProtection</strong>( <em>status</em> : Boolean )</a>    <code>WebAdmin</code>セッションにおける <a href=/docs/ja/20/Admin/dataExplorer>データエクスプローラー</a> 含め、<a href=/docs/ja/20/Admin/webAdmin#http%E3%83%9D%E3%83%BC%E3%83%88>Web管理ポート</a>上でのデータアクセスを無効に設定することができます<tr><td><a href=#setremotecontextinfo><strong>.setRemoteContextInfo</strong>( <em>contextName</em> : Text ; <em>dataClassName</em> : Text ; <em>attributes</em> : Text {; <em>contextType</em> : Text { ; <em>pageLength</em> : Integer}})<br><strong>.setRemoteContextInfo</strong>( <em>contextName</em> : Text ; <em>dataClassName</em> : Text; <em>attributesColl</em> : Collection {; <em>contextType</em> : Text { ; <em>pageLength</em> : Integer }} )<br><strong>.setRemoteContextInfo</strong>( <em>contextName</em> : Text ; <em>dataClassObject</em> : 4D.DataClass ; <em>attributes</em> : Text {; <em>contextType</em> : Text { ; <em>pageLength</em> : Integer }})<br><strong>.setRemoteContextInfo</strong>( <em>contextName</em> : Text ; <em>dataClassObject</em> : 4D.DataClass ; <em>attributesColl</em> : Collection {; <em>contextType</em> : Text { ; <em>pageLength</em> : Integer }} )</a>    指定したデータクラス属性を <em>contextName</em> の最適化コンテキストにリンクします<tr><td><a href=#startrequestlog><strong>.startRequestLog</strong>()<br><strong>.startRequestLog</strong>( <em>file</em> : 4D.File )<br><strong>.startRequestLog</strong>( <em>file</em> : 4D.File ; <em>options</em> : Integer )<br><strong>.startRequestLog</strong>( <em>reqNum</em> : Integer )</a>    クライアント側またはサーバー側で ORDAリクエストのログを開始します<tr><td><a href=#starttransaction><strong>.startTransaction()</strong></a>    対象データストアに対応するデータベース上で、カレントプロセス内のトランザクションを開始します<tr><td><a href=#stoprequestlog><strong>.stopRequestLog()</strong>  </a>    クライアント側またはサーバー側の ORDAリクエストのログをすべて停止します<tr><td><a href=#unlock><strong>.unlock()</strong></a>    データストアにおける、書き込み操作に対する現在のロックが同じプロセスで設定されていた場合、そのロックを解除します<tr><td><a href=#validatetransaction><strong>.validateTransaction()</strong>  </a>    トランザクションを受け入れます</table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=ds>ds<a href=#ds class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>

















<table><thead><tr><th>リリース<th>内容<tbody><tr><td>18<td>localID パラメーターをサポート<tr><td>17<td>追加</table>
</div></div></details>
<p><strong>ds</strong> { ( <em>localID</em> : Text ) } : cs.DataStore</p>























<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>localID<td>Text<td>-><td>参照を取得したいリモートデータストアのローカルID<tr><td>戻り値<td>cs.DataStore<td>&lt;-<td>データストア参照</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明>説明<a href=#説明 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>ds</code> コマンドは、 カレントの 4Dデータベース、または <em>localID</em> で指定したデータベースに合致するデータストアの参照を返します。</p>
<p><em>localID</em> を省略した (または空の文字列 "" を渡した) 場合には、ローカル4Dデータベース (4D Server でリモートデータベースを開いている場合にはそのデータベース) に合致するデータストアの参照を返します。 データストアは自動的に開かれ、<code>ds</code> を介して直接利用することができます。</p>
<p>開かれているリモートデータストアのローカルIDを <em>localID</em> パラメーターに渡すと、その参照を取得できます。 このデータストアは、あらかじめカレントデータベース (ホストまたはコンポーネント) によって <a href=#open-datastore><code>Open datastore</code></a> コマンドで開かれている必要があります。 このコマンドを使用したときにローカルIDが定義されます。</p>
<blockquote>
<p>ローカルIDのスコープは、当該データストアを開いたデータベースです。</p>
</blockquote>
<p><em>localID</em> に合致するデータストアが見つからない場合、コマンドは <strong>Null</strong> を返します。</p>
<p><code>cs.Datastore</code> が提供するオブジェクトは、<a href=/docs/ja/20/ORDA/dsmapping#%E5%A4%89%E6%8F%9B%E3%81%AE%E3%83%AB%E3%83%BC%E3%83%AB>ORDAマッピングルール</a> に基づいて、ターゲットデータベースからマッピングされます。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-1>例題 1<a href=#例題-1 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>4Dデータベースのメインデータストアを使用します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> $result:=ds.Employee.query("firstName = :1";"S@")</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-2>例題 2<a href=#例題-2 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $connectTo; $firstFrench; $firstForeign : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $frenchStudents; $foreignStudents : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$connectTo:=New object("type";"4D Server";"hostname";"192.168.18.11:8044")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$frenchStudents:=Open datastore($connectTo;"french")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$connectTo.hostname:="192.168.18.11:8050"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$foreignStudents:=Open datastore($connectTo;"foreign")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">//...</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  //...</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $firstFrench:=getFirst("french";"Students")</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $firstForeign:=getFirst("foreign";"Students")</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">  // getFirst メソッド</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  // getFirst(localID;dataclass) -> entity</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> #DECLARE( $localId : Text; $dataClassName : Text ) -> $entity : 4D.Entity</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $0:=ds($localId)[$dataClassName].all().first()</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=open-datastore>Open datastore<a href=#open-datastore class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>

















<table><thead><tr><th>リリース<th>内容<tbody><tr><td>20.3<td>新しい <em>passwordAlgorithm</em> プロパティ<tr><td>18<td>追加</table>
</div></div></details>
<p><strong>Open datastore</strong>( <em>connectionInfo</em> : Object ; <em>localID</em> : Text ) : 4D.DataStoreImplementation</p>





























<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>connectionInfo<td>Object<td>-><td>リモートデータストアへの接続に使用する接続プロパティ<tr><td>localID<td>Text<td>-><td>ローカルアプリケーション内で、開かれたデータストアに対して割り当てる ID (必須)<tr><td>戻り値<td>4D.DataStoreImplementation<td>&lt;-<td>データストアオブジェクト</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-1>説明<a href=#説明-1 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>Open datastore</code> コマンドは、 <em>connectionInfo</em> 引数が指定する 4Dデータベースにアプリケーションを接続します。 ローカルエイリアス<em>localID</em>と紐づけられた<code>4D.DataStoreImplementation</code>オブジェクトが返されます。</p>
<p><em>connectionInfo</em> で指定する 4Dデータベースはリモートデーターストアとして利用可能でなければなりません。つまり、以下の条件を満たしている必要があります:</p>
<ul>
<li>データベースの Webサーバーは、http または https が有効化された状態で開始されていなければなりません。</li>
<li>データベースの <a href=/docs/ja/20/REST/configuration#rest%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%92%E9%96%8B%E5%A7%8B%E3%81%99%E3%82%8B><strong>REST サーバーとして公開</strong></a> オプションがチェックされている必要があります。</li>
<li>データベースにおいて、少なくとも 1つのクライアントライセンスが利用可能でなければなりません。</li>
</ul>
<p>合致するデータベースが見つからない場合、<code>Open datastore</code> は <strong>Null</strong> を返します。</p>
<p><em>localID</em> 引数は、リモートデータストア上で開かれるセッションのローカルエイリアスです。 <em>localID</em> 引数の ID がすでにアプリケーションに存在している場合、その ID が使用されています。 そうでない場合、データストアオブジェクトが使用されたときに <em>localID</em> のセッションが新規に作成されます。</p>
<p><code>4D.DataStoreImplementation</code> のオブジェクトは<a href=/docs/ja/20/ORDA/dsmapping#general-rules>変換のルール</a>に従い、リモートデータストアからマッピングされます。</p>
<p>一旦セッションが開かれると、以下の 2行の宣言は同等のものとなり、同じデータストアオブジェクトへの参照を返します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> $myds:=Open datastore(connectionInfo;"myLocalId")</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $myds2:=ds("myLocalId")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  //$myds と $myds2 は同一のものです</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><em>connectionInfo</em> には、接続したいリモートデータストアの詳細を格納したオブジェクトを渡します。 オブジェクトは以下のプロパティを格納することができます (<em>hostname</em> を除き、すべてのプロパティは任意です):</p>













































<table><thead><tr><th>プロパティ<th>型<th>説明<tbody><tr><td>hostname<td>Text<td>リモートデータストアの名前または IPアドレス + ":" + ポート番号 (ポート番号は必須)<tr><td>user<td>Text<td>ユーザー名<tr><td>password<td>Text<td>ユーザーパスワード。 デフォルトでは、パスワードは平文で送信されるため、<code>tls</code> プロパティに <code>true</code> を渡して暗号化通信を使用することが<strong>強く推奨</strong>されます。<tr><td>idleTimeout<td>Integer<td>アクティビティがなかった場合に、セッションがタイムアウトするまでの時間 (分単位)。この時間を過ぎると、4D によって自動的にセッションが閉じられます。 省略時のデフォルトは 60 (1時間) です。 60 (分) 未満の値を指定することはできません (60 未満の値を渡した場合、タイムアウトは 60 (分) に設定されます)。 詳細については、<a href=/docs/ja/20/ORDA/datastores#%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E7%B5%82%E4%BA%86><strong>セッションの終了</strong></a> を参照ください。<tr><td>tls<td>Boolean<td>安全な接続を使用します(*)。 省略時のデフォルトは false です。 可能なかぎり安全な接続を使用することが推奨されます。<tr><td>passwordAlgorithm<td>Text<td><a href=https://doc.4d.com/4dv20/help/command/ja/page638.html target=_blank rel="noopener noreferrer"><code>Validate password</code></a> コマンドで <em>digest</em> パラメーターを <code>true</code> に設定してサーバーがパスワードを検証する場合は、"4d-rest-digest" を指定します。<tr><td>type<td>Text<td>"4D Server" でなければなりません</table>
<p>(*) tls が true だった場合、以下の条件が満たされていれば、HTTPSプロトコルが使用されます:</p>
<ul>
<li>リモートデータストアで HTTPS が有効化されている。</li>
<li>指定されたポート番号は、データベース設定で設定されている HTTPS ポートと合致している。</li>
<li>データベースに有効な証明書と非公開暗号鍵がインストールされている。 条件を満たさない場合、エラー "1610 - ホスト xxx へのリモートリクエストに失敗しました" が生成されます。</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-1-1>例題 1<a href=#例題-1-1 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>user / password を指定せずにリモートデータストアに接続します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $connectTo : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $remoteDS : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$connectTo:=New object("type";"4D Server";"hostname";"192.168.18.11:8044")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$remoteDS:=Open datastore($connectTo;"students")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ALERT("This remote datastore contains "+String($remoteDS.Students.all().length)+" students")</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-2-1>例題 2<a href=#例題-2-1 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>user / password / timeout / tls を指定してリモートデータストアに接続します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $connectTo : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $remoteDS : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$connectTo:=New object("type";"4D Server";"hostname";\"192.168.18.11:4443";\  </span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "user";"marie";"password";$pwd;"idleTimeout";70;"tls";True)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$remoteDS:=Open datastore($connectTo;"students")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ALERT("This remote datastore contains "+String($remoteDS.Students.all().length)+" students")</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリ�ップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-3>例題 3<a href=#例題-3 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>複数のリモートデータストアと接続します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $connectTo : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $frenchStudents; $foreignStudents : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$connectTo:=New object("hostname";"192.168.18.11:8044")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$frenchStudents:=Open datastore($connectTo;"french")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$connectTo.hostname:="192.168.18.11:8050"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$foreignStudents:=Open datastore($connectTo;"foreign")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ALERT("They are "+String($frenchStudents.Students.all().length)+" French students")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ALERT("They are "+String($foreignStudents.Students.all().length)+" foreign students")</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=エラー管理>エラー管理<a href=#エラー管理 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>エラーが起きた場合、コマンドは <strong>Null</strong> を返します。 リモートデータベースにアクセスできなかった場合 (アドレス違い、Webサーバーが開始されていない、http/https が有効化されていない、等)、エラー1610 "ホスト XXX へのリモートリクエストに失敗しました" が生成されます。 このエラーは <code>ON ERR CALL</code> で実装されたメソッドで割り込み可能です。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=dataclassname><em>.dataclassName</em><a href=#dataclassname class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>17<td>追加</table>
</div></div></details>
<p><em><strong>.dataclassName</strong></em> : 4D.DataClass</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-2>説明<a href=#説明-2 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>データストアの各データクラスは <a href=/docs/ja/20/ORDA/dsmapping#%E3%83%87%E3%83%BC%E3%82%BF%E3%82%B9%E3%83%88%E3%82%A2>DataStore オブジェクト</a> のプロパティとして利用可能です。 戻り値のオブジェクトには、 データクラスの詳細が格納されています。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題>例題<a href=#例題 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $emp : cs.Employee</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> var $sel : cs.EmployeeSelection</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $emp:=ds.Employee //$emp は Employeeデータクラスを格納します</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $sel:=$emp.all() // 全従業員のエンティティセレクションを取得します</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  // あるいは以下のように直接書くことも可能です:</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $sel:=ds.Employee.all()</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=canceltransaction>.cancelTransaction()<a href=#canceltransaction class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>18<td>追加</table>
</div></div></details>
<p><strong>.cancelTransaction()</strong></p>
<p>| 引数 | 型 |  | 説明                                           |
| -- | - |::| -------------------------------------------- |
|    |   |  | このコマンドは引数を必要としません|</p>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-3>説明<a href=#説明-3 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.cancelTransaction()</code> 関数は、 トランザクションをキャンセルします 。このトランザクションは、指定データストアのカレントプロセスにおいて、<a href=#starttransaction><code>.startTransaction()</code></a> によって開かれたものです。</p>
<p><code>.cancelTransaction()</code> 関数は、トランザクション中におこなわれたデータ変更をすべてキャンセルします。</p>
<p>複数のトランザクションをネストすること (サブトランザクション) が可能です。 メイントランザクションがキャンセルされると、サブトランザクションも (たとえ個々に<a href=#validatetransaction><code>.validateTransaction()</code></a> 関数で承認されていても) すべてキャンセルされます。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-4>例題<a href=#例題-4 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#starttransaction><code>.startTransaction()</code></a> 関数の例題を参照ください。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=clearallremotecontexts>.clearAllRemoteContexts()<a href=#clearallremotecontexts class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>19 R5<td>追加</table>
</div></div></details>
<p><strong>.clearAllRemoteContexts()</strong></p>
<p>| 引数 | 型 |  | 説明                                           |
| -- | - |::| -------------------------------------------- |
|    |   |  | このコマンドは引数を必要としません|</p>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-4>説明<a href=#説明-4 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.clearAllRemoteContexts()</code> 関数は、 データストアのすべてのアクティブコンテキストの全属性をクリアします。</p>
<p>この機能は主にデバッグで使用されます。 注意しなければならないのは、デバッガーを開くと、デバッガーはサーバーにリクエストを送り、データクラス属性をすべてクエリして表示することです。 このため、不要なデータでコンテキストが過負荷になることがあります。</p>
<p>そのような場合は、<code>.clearAllRemoteContexts()</code> を使用してコンテキストをクリアし、クリーンな状態を保つことができます。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照>参照<a href=#参照 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#getremotecontextinfo>.getRemoteContextInfo()</a><br><a href=#getallremotecontexts>.getAllRemoteContexts()</a><br><a href=#setremotecontextinfo>.setRemoteContextInfo()</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=encryptionstatus>.encryptionStatus()<a href=#encryptionstatus class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>17 R5<td>追加</table>
</div></div></details>
<p><strong>.encryptionStatus()</strong>: Object</p>

















<table><thead><tr><th>引数<th>型<th style=text-align:center><th>説明<tbody><tr><td>戻り値<td>Object<td style=text-align:center>&lt;-<td>カレントデータストアと、各テーブルの暗号化についての情報</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-5>説明<a href=#説明-5 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.encryptionStatus()</code> 関数は、 カレントデータファイルの暗号化状態を示すオブジェクトを返します 。カレントデータファイルとはつまり、<code>ds</code> データストアのデータファイルです。 各テーブルの状態も提供されます。</p>
<blockquote>
<p>その他のデータファイルの暗号化状態を調べるには、<code>Data file encryption status</code> コマンドを使います。</p>
</blockquote>
<p><strong>戻り値</strong></p>
<p>戻り値のオブジェクトには、以下のプロパティが格納されています:</p>




































































<table><thead><tr><th>プロパティ<th><th><th>型<th>説明<tbody><tr><td>isEncrypted<td><td><td>Boolean<td>データファイルが暗号化されていれば true<tr><td>keyProvided<td><td><td>Boolean<td>暗号化されたデータファイルに合致する暗号化キーが提供されていれば true (*)<tr><td>テーブル<td><td><td>Object<td>暗号化可能および暗号化されたテーブルと同じ数のプロパティを持つオブジェクト<tr><td><td><em>tableName</em><td><td>Object<td>暗号化可能または暗号化されたテーブル<tr><td><td><td>name<td>Text<td>テーブル名<tr><td><td><td>num<td>Number<td>テーブル番号<tr><td><td><td>isEncryptable<td>Boolean<td>ストラクチャーファイルにおいて、テーブルが暗号化可能と宣言されていれば true<tr><td><td><td>isEncrypted<td>Boolean<td>データファイルにおいて、テーブルのレコードが暗号化されていれば true</table>
<p>(*) 暗号化キーは、以下の手段のいずれかで提供されます:</p>
<ul>
<li><code>.provideDataKey()</code> コマンド</li>
<li>データストアを開く前に接続されていたデバイスのルート</li>
<li><code>Discover data key</code> コマンド</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-5>例題<a href=#例題-5 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>カレントデータファイル内で暗号化されているテーブルの数を知りたい場合:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $status : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $status:=ds.encryptionStatus()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> If($status.isEncrypted) // データベースが暗号化されていれば</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    C_LONGINT($vcount)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    C_TEXT($tabName)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    For each($tabName;$status.tables)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">       If($status.tables[$tabName].isEncrypted)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          $vcount:=$vcount+1</span><br></span><span class=token-line style=color:#393A34><span class="token plain">       End if</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    End for each</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    ALERT("データベースには "+String($vcount)+" 件の暗号化されたテーブルが存在しています。")</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> Else</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    ALERT("このデータベースは暗号化されていません。")</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> End if</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=flushandlock>.flushAndLock()<a href=#flushandlock class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>20<td>追加</table>
</div></div></details>
<p><strong>.flushAndLock()</strong></p>
<p>| 引数 | 型 |  | 説明                                           |
| -- | - |  | -------------------------------------------- |
|    |   |  | このコマンドは引数を必要としません|</p>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-6>説明<a href=#説明-6 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.flushAndLock()</code> 関数は、 ローカルデータストアのキャッシュをフラッシュし、データベースに対して他のプロセスが書き込み操作をおこなうのを防ぎます。 これにより、データストアは凍結状態におかれます。 この関数は、たとえばアプリケーションのスナップショットを実行する前に呼び出す必要があります。</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_BuS1><p>この関数は次の場合にのみ使えます:<ul>
<li>ローカルデータストア (<a href=#ds><code>ds</code></a>) を対象に。</li>
<li>クライアント/サーバー環境では、サーバーマシン上にて。</li>
</ul></div></div>
<p>この関数が実行されると、他のすべてのプロセスで <code>.save()</code> などの書き込み操作や、追加の <code>.flushAndLock()</code> の呼び出しが凍結され、データストアのロックが解除されるまで続きます。</p>
<p>同一プロセス内で <code>.flushAndLock()</code> を複数回呼び出した場合、データストアのロックを解除するには、同じ回数だけ <a href=#unlock><code>.unlock()</code></a> を呼び出す必要があります。</p>
<p>データストアのロックが解除されるのは、以下の場合です:</p>
<ul>
<li>同プロセス内で <a href=#unlock><code>.unlock()</code></a> 関数が呼び出された場合、または</li>
<li><code>.flushAndLock()</code> 関数を呼び出したプロセスが終了した場合。</li>
</ul>
<p>データストアがすでに他のプロセスからロックされている場合、<code>.flushAndLock()</code> の呼び出しは凍結され、データストアのロックが解除されたときに実行されます。</p>
<p><code>.flushAndLock()</code> 関数が実行できない場合 (リモートの 4D で実行された場合など) には、エラーが発生します。</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>caution</div><div class=admonitionContent_BuS1><p><a href=/docs/ja/20/Backup/backup>バックアップ</a> や <a href=https://doc.4d.com/4Dv19R7/4D/19-R7/Using-Volume-Shadow-Copy-Service-on-Windows.300-6078959.ja.html target=_blank rel="noopener noreferrer">VSS</a> 、<a href=/docs/ja/20/MSC/overview>MSC</a> を含む他の 4D機能およびサービスもデータストアをロックすることがあります。 予期せぬ相互作用を避けるため、<code>.flushAndLock()</code> を呼び出す前に、データストアをロックするような他の操作がおこなわれていないことを確認してください。</div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-6>例題<a href=#例題-6 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>データフォルダーとともにカレントジャーナルファイルのコピーを作成します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">$destination:=Folder(fk documents folder).folder("Archive")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$destination.create()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">ds.flushAndLock() // 他のプロセスからの書き込み操作をブロックします</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$dataFolder:=Folder(fk data folder)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$dataFolder.copyTo($destination) // データフォルダーをコピーします</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$oldJournalPath:=New log file // ジャーナルを閉じて、新しいものを作成します</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$oldJournal:=File($oldJournalPath; fk platform path)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$oldJournal.moveTo($destination) // 閉じたジャーナルを保存します</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">ds.unlock() // コピー操作をおこなったので、データストアのロックを解除します</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照-1>参照<a href=#参照-1 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#locked>.locked()</a><br><a href=#unlock>.unlock()</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=getallremotecontexts>.getAllRemoteContexts()<a href=#getallremotecontexts class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>19 R5<td>追加</table>
</div></div></details>
<p><strong>.getAllRemoteContexts()</strong> : Collection</p>

















<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>戻り値<td>Collection<td>&lt;-<td>最適化コンテキストオブジェクトのコレクション</table>
<p>|</p>
<blockquote>
<p><strong>上級者向け:</strong> この機能は、特定の構成のため、ORDAのデフォルト機能をカスタマイズする必要がある開発者向けです。 ほとんどの場合、使用する必要はないでしょう。</p>
</blockquote>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-7>説明<a href=#説明-7 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.getAllRemoteContexts()</code> 関数は、 データストア内のすべてのアクティブな最適化コンテキストに関する情報を格納するオブジェクトのコレクションを返します。</p>
<blockquote>
<p>コンテキストの作成に関する詳細については、<a href=/docs/ja/20/ORDA/datastores#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96>クライアント/サーバーの最適化</a> を参照ください。</p>
</blockquote>
<p>返されるコレクション内の各オブジェクトは、 <a href=#getremotecontextinfo><code>.getRemoteContextInfo()</code></a> に列挙されているプロパティをそれぞれ持ちます。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-7>例題<a href=#例題-7 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>次のコードは 2つのコンテキストを設定し、<code>.getAllRemoteContexts()</code> を使用してそれらを取得します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">var $ds : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $persons : cs.PersonsSelection</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $addresses : cs.AddressSelection</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $p : cs.PersonsEntity</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $a : cs.AddressEntity</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $contextA; $contextB : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $info : Collection</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $text : Text</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// リモートデータストアを開きます</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// コンテキストA を設定します</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$contextA:=New object("context"; "contextA")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$persons:=$ds.Persons.all($contextA)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$text:=""</span><br></span><span class=token-line style=color:#393A34><span class="token plain">For each ($p; $persons)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $text:=$p.firstname+" lives in "+$p.address.city+" / "</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End for each </span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// コンテキストB を設定します</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$contextB:=New object("context"; "contextB")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$addresses:=$ds.Address.all($contextB)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$text:=""</span><br></span><span class=token-line style=color:#393A34><span class="token plain">For each ($a; $addresses)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $text:=$a.zipCode</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End for each </span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// すべてのリモートコンテキストを取得します (contextA と contextB)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$info:=$ds.getAllRemoteContexts()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">//$info = [{name:"contextB"; dataclass:"Address"; main:"zipCode"},</span><br></span><span class=token-line style=color:#393A34><span class="token plain">{name:"contextA";dataclass:"Persons";main:"firstname,address.city"}]</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<blockquote>
<p>この例はデモンストレーションであり、実際の実装を想定したものではありません。</p>
</blockquote>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照-2>参照<a href=#参照-2 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#getremotecontextinfo>.getRemoteContextInfo()</a><br><a href=#setremotecontextinfo>.setRemoteContextInfo()</a><br><a href=#clearallremotecontexts>.clearAllRemoteContexts()</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=getinfo>.getInfo()<a href=#getinfo class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>17<td>追加</table>
</div></div></details>
<p><strong>.getInfo()</strong>: Object</p>

















<table><thead><tr><th>引数<th>型<th style=text-align:center><th>説明<tbody><tr><td>戻り値<td>Object<td style=text-align:center>&lt;-<td>データストアのプロパティ</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-8>説明<a href=#説明-8 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.getInfo()</code> 関数は、 データストアの情報を提供するオブジェクトを返します。 このメソッドは汎用的なコードを書くのに有用です。</p>
<p><strong>返されるオブジェクト</strong></p>






























<table><thead><tr><th>プロパティ<th>型<th>説明<tbody><tr><td>type<td>string<td><li>"4D": ds で利用可能なメインデータストア </li><li>"4D Server": Open datastore で開かれたリモートデータストア</li><tr><td>networked<td>boolean<td><li>true: ネットワーク接続を介してアクセスされたデータストア</li><li>false: ネットワーク接続を介さずにアクセスしているデータストア (ローカルデータベース)</li><tr><td>localID<td>text<td>マシン上のデータストアID。 これは、<code>Open datastore</code> コマンドで返される localId 文字列です。 メインデータストアの場合は空の文字列 ("") です。<tr><td>connection<td>object<td>リモートデータストア接続の情報を格納したオブジェクト (メインデータストアの場合は返されません)。 次のプロパティを含みます:<table><tr><th>プロパティ<th>型<th>説明<tr><td>hostname<td>text<td>リモートデータストアの IPアドレスまたは名称 + ":" + ポート番号<tr><td>tls<td>boolean<td>リモートデータストアとセキュア接続を利用している場合は true<tr><td>idleTimeout<td>number<td>セッション非アクティブタイムアウト (分単位)。<tr><td>user<td>text<td>リモートデータストアにて認証されたユーザー</table></table>
<ul>
<li><code>.getInfo()</code> 関数が、4D Server またはシングルユーザー版 4D 上で実行された場合、<code>networked</code> は false となります。</li>
<li><code>.getInfo()</code> 関数が、リモート版 4D 上で実行された場合、<code>networked</code> は true となります。</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-1-2>例題 1<a href=#例題-1-2 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $info : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $info:=ds.getInfo() // 4D Server または 4D 上で実行した場合</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  //{"type":"4D","networked":false,"localID":""}</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $info:=ds.getInfo() // リモート版4D 上で実行した場合</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  //{"type":"4D","networked":true,"localID":""}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-2-2>例題 2<a href=#例題-2-2 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>リモートデータストアの場合:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">  var $remoteDS : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $info; $connectTo : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$connectTo:=New object("hostname";"111.222.33.44:8044";"user";"marie";"password";"aaaa")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$remoteDS:=Open datastore($connectTo;"students")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$info:=$remoteDS.getInfo()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  //{"type":"4D Server",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  //"localID":"students",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  //"networked":true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  //"connection":{hostname:"111.222.33.44:8044","tls":false,"idleTimeout":2880,"user":"marie"}}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=getremotecontextinfo>.getRemoteContextInfo()<a href=#getremotecontextinfo class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>19 R5<td>追加</table>
</div></div></details>
<p><strong>.getRemoteContextInfo</strong>(<em>contextName</em> : Text) : Object</p>























<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>contextName<td>Text<td>-><td>コンテキストの名称<tr><td>戻り値<td>Object<td>&lt;-<td>最適化コンテキストの詳細</table>
<p>|</p>
<blockquote>
<p><strong>上級者向け:</strong> この機能は、特定の構成のため、ORDAのデフォルト機能をカスタマイズする必要がある開発者向けです。 ほとんどの場合、使用する必要はないでしょう。</p>
</blockquote>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-9>説明<a href=#説明-9 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.getRemoteContextInfo()</code> 関数は、  <em>contextName</em> で指定したデータストアの最適化コンテキストに関する情報を格納するオブジェクトを返します。</p>
<p>最適化コンテキストの作成に関する詳細については、<a href=/docs/ja/20/ORDA/datastores#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96>クライアント/サーバーの最適化</a> を参照ください。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=返されるオブジェクト>返されるオブジェクト<a href=#返されるオブジェクト class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>戻り値のオブジェクトには、以下のプロパティが格納されています:</p>






























<table><thead><tr><th>プロパティ<th>型<th>説明<tbody><tr><td>name<td>Text<td>コンテキストの名称<tr><td>main<td>Text<td>コンテキストに関連する属性 (複数の場合はカンマ区切り)<tr><td>dataclass<td>Text<td>データクラスの名称<tr><td>currentItem (任意)<td>Text<td>コンテキストがリストボックスとリンクしている場合の <a href=/docs/ja/20/ORDA/datastores#%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E5%9E%8B%E3%83%AA%E3%82%B9%E3%83%88%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9>ページモード</a> の属性。 コンテキスト名がリストボックスに使用されていない場合、または currentItem に対応するコンテキストが存在しない場合は、<code>Null</code> または空のテキスト要素として返されます。</table>
<p>コンテキストは属性に対するフィルターとして動作するため、<em>main</em> が空で返された場合、それはフィルターが適用されておらず、サーバーがすべてのデータクラス属性を返すことを意味します。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-8>例題<a href=#例題-8 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#example-1-3>.setRemoteContextInfo()</a> の例題を参照ください。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照-3>参照<a href=#参照-3 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#setremotecontextinfo>.setRemoteContextInfo()</a><br><a href=#getallremotecontexts>.getAllRemoteContexts()</a><br><a href=#clearallremotecontexts>.clearAllRemoteContexts()</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=getrequestlog>.getRequestLog()<a href=#getrequestlog class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>17 R6<td>追加</table>
</div></div></details>
<p><strong>.getRequestLog()</strong> : Collection</p>

















<table><thead><tr><th>引数<th>型<th style=text-align:center><th>説明<tbody><tr><td>戻り値<td>Collection<td style=text-align:center>&lt;-<td>オブジェクトのコレクション (要素毎に一つのリクエストを記述します)</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-10>説明<a href=#説明-10 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.getRequestLog()</code> 関数は、 クライアント側のメモリに記録されている ORDAリクエストを返します。 ORDAリクエストのログが、<a href=#startrequestlog><code>.startRequestLog()</code></a> 関数によって事前に有効化されている必要があります。</p>
<p>このメソッドはリモートの 4D で呼び出す必要があり、そうでない場合には空のコレクションを返します。 これはクライアント/サーバー環境でのデバッグを想定して設計されています。</p>
<p><strong>戻り値</strong></p>
<p>スタックされたリクエストオブジェクトのコレクションが返されます。 直近のリクエストにはインデックス 0 が振られています。</p>
<p>ORDAリクエストログのフォーマットの詳細は、<a href=https://doc.4d.com/4Dv18R6/4D/18-R6/Description-of-log-files.300-5217819.ja.html#4385373 target=_blank rel="noopener noreferrer"><strong>ORDAクライアントリクエスト</strong></a> の章を参照ください。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-9>例題<a href=#例題-9 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#startrequestlog><code>.startRequestLog()</code></a> の例題2を参照ください。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=isadminprotected>.isAdminProtected()<a href=#isadminprotected class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>18 R6<td>追加</table>
</div></div></details>
<p><strong>.isAdminProtected()</strong> : Boolean</p>

















<table><thead><tr><th>引数<th>型<th style=text-align:center><th>説明<tbody><tr><td>戻り値<td>Boolean<td style=text-align:center>&lt;-<td>データエクスプローラーへのアクセスが無効に設定されている場合は true、有効の場合は false (デフォルト)</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-11>説明<a href=#説明-11 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.isAdminProtected()</code> 関数は、 現在のセッションにおいて <a href=/docs/ja/20/Admin/dataExplorer>データエクスプローラー</a> へのアクセスが無効に設定されているの場合は <code>true</code>を返します。</p>
<p><code>webAdmin</code>セッションにおいて、データエクスプローラーへのアクセスはデフォルトで有効となっていますが、管理者によるデータアクセスを禁止するため無効にすることもできます (<a href=#setadminprotection><code>.setAdminProtection()</code></a> 関数参照)。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照-4>参照<a href=#参照-4 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#setadminprotection><code>.setAdminProtection()</code></a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=locked>.locked()<a href=#locked class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>20<td>追加</table>
</div></div></details>
<p><strong>.locked()</strong> : Boolean</p>

















<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>戻り値<td>Boolean<td>&lt;-<td>ロックされている場合は true</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-12>説明<a href=#説明-12 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.locked()</code> 関数は、 ローカルデータストアが現在ロックされている場合、true を返します。</p>
<p>データファイルのスナップショットを実行する前などに、<a href=#flushandlock>.flushAndLock()</a> 関数を使用してデータストアをロックすることができます。</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>caution</div><div class=admonitionContent_BuS1><p>この関数は、データストアがバックアップや VSS などの他の管理機能によってロックされた場合にも、 <code>true</code> を返します (<a href=#flushandlock>.flushAndLock()</a> 参照)。</div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照-5>参照<a href=#参照-5 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#flushandlock>.flushAndLock()</a><br><a href=#unlock>.unlock()</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=makeselectionsalterable>.makeSelectionsAlterable()<a href=#makeselectionsalterable class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>18 R5<td>追加</table>
</div></div></details>
<p><strong>.makeSelectionsAlterable()</strong></p>
<p>| 引数 | 型 |  | 説明                                           |
| -- | - |::| -------------------------------------------- |
|    |   |  | このコマンドは引数を必要としません|</p>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-13>説明<a href=#��説明-13 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.makeSelectionsAlterable()</code> 関数は、 カレントアプリケーションのデータストアにおいて、すべての新規エンティティセレクションをデフォルトで追加可能に設定します (<a href=/docs/ja/20/ORDA/datastores>リモートデータストア</a> を含む)。 これはたとえば <code>On Startup</code> データベースメソッドなどで、一度だけ使用することが想定されています。</p>
<p>この関数が呼ばれなかった場合、新規エンティティセレクションが共有可能かどうかは、共有可能エンティティセレクションを"元"にしたのか、あるいは<a href=/docs/ja/20/ORDA/entities#%E5%85%B1%E6%9C%89%E5%8F%AF%E8%83%BD%E8%BF%BD%E5%8A%A0%E5%8F%AF%E8%83%BD%E3%81%AA%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3>どんな関数を呼び出して作成したのか</a>で決まります。</p>
<blockquote>
<p>この関数は、<code>OB Copy</code> または <a href=/docs/ja/20/API/EntitySelectionClass#copy><code>.copy()</code></a> に <code>ck shared</code> オプションを明示的に使用して作成されたエンティティセレクションには適用されません。</p>
</blockquote>
<blockquote>
<p><strong>互換性に関する注記</strong>: このメソッドは 4D v18 R5 より前のバージョンから変換されたプロジェクトで、<a href=/docs/ja/20/API/EntitySelectionClass#add>.add()</a> の呼び出しを使用しているものにおいてのみ使用してください。 このコンテキストにおいては、<code>.makeSelectionsAlterable()</code> を使用することで、既存プロジェクト内で以前の 4D のふるまいを再現し、時間を節約できます。 逆に、4D v18 R5 以降のバージョンで作成された新規プロジェクトにおいては、この関数の使用は <strong>推奨されていません</strong>。エンティティセレクションを共有可能にできないため、パフォーマンスとスケーラビリティの観点で妨げになるからです。</p>
</blockquote>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=providedatakey>.provideDataKey()<a href=#providedatakey class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>17 R5<td>追加</table>
</div></div></details>
<p><strong>.provideDataKey</strong>( <em>curPassPhrase</em> : Text ) : Object <br><strong>.provideDataKey</strong>( <em>curDataKey</em> : Object ) : Object</p>





























<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>curPassPhrase<td>Text<td>-><td>カレントのパスフレーズ<tr><td>curDataKey<td>Object<td>-><td>カレントのデータ暗号化キー<tr><td>戻り値<td>Object<td>&lt;-<td>暗号化キーのチェックの結果</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-14>説明<a href=#説明-14 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.provideDataKey()</code> 関数は、 データストアのカレントデータファイルのデータ暗号化キーを受け取り、暗号化されたデータと合致するかどうかチェックします。 この関数は、暗号化されたデータベースを開くときや、データファイルの再暗号化など暗号化キーが必要となる暗号化オペレーションを実行する際に使用します。</p>
<blockquote>
<ul>
<li><code>.provideDataKey()</code> 関数は暗号化されたデータベース内で呼び出される必要があります。 暗号化されていないデータベース内で呼び出した場合、エラー2003 (暗号化キーはデータと合致しません) が返されます。 データベースが暗号化されているかどうかを調べるには <code>Data file encryption status</code> コマンドを使用します。</li>
<li>リモートの 4D または暗号化されたリモートデータストアから、<code>.provideDataKey()</code> 関数を呼び出すことはできません。</li>
</ul>
</blockquote>
<p><em>curPassPhrase</em> パラメーターを使用する場合は、データ暗号化キーの生成に使用した文字列を渡します。 このパラメーターを使用した場合、暗号化キーが生成されます。</p>
<p><em>curDataKey</em> パラメーターを使用する場合は、データ暗号化キー (<em>encodedKey</em> プロパティ) を格納するオブジェクトを渡します。 このキーは、<code>New data key</code> コマンドで生成された可能性があります。</p>
<p>有効な暗号化キーが提供された場合、そのキーはメモリ内の <em>keyChain</em> に追加され、暗号化モードが有効になります:</p>
<ul>
<li>暗号化可能テーブルに対するデータ編集はすべて、ディスク上 (.4DD、.journal、 .4Dindx ファイル) で暗号化されます。</li>
<li>暗号化可能テーブルから読み出したすべてのデータは、メモリ内で復号化されます。</li>
</ul>
<p><strong>戻り値</strong></p>
<p>コマンドの実行結果は、戻り値のオブジェクトに格納されます:</p>



























































<table><thead><tr><th>プロパティ<th><th>型<th>説明<tbody><tr><td>success<td><td>Boolean<td>提供された暗号化キーが暗号化データと合致すれば true、それ以外は false<tr><td><td><td><td>以下のプロパティは、success が <em>FALSE</em> であった場合にのみ返されます。<tr><td>status<td><td>Number<td>エラーコード (提供された暗号化キーが間違っていた場合には 4)<tr><td>statusText<td><td>Text<td>エラーメッセージ<tr><td>errors<td><td>Collection<td>エラーのスタック。 最初のエラーに最も高いインデックスが割り当てられます。<tr><td><td>[ ].componentSignature<td>Text<td>内部コンポーネント名<tr><td><td>[ ].errCode<td>Number<td>エラー番号<tr><td><td>[ ].message<td>Text<td>エラーメッセージ</table>
<p><em>curPassphrase</em> および <em>curDataKey</em> のどちらの引数も渡されなかった場合、<code>.provideDataKey()</code> は <strong>null</strong> を返します (この場合エラーは生成されません)。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-10>例題<a href=#例題-10 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $keyStatus : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> var $passphrase : Text</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $passphrase:=Request("パスフレーズを入力してください。")</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> If(OK=1)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $keyStatus:=ds.provideDataKey($passphrase)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    If($keyStatus.success)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">       ALERT("提供された暗号化キーは有効です。")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Else</span><br></span><span class=token-line style=color:#393A34><span class="token plain">       ALERT("提供された暗号化キーは無効です。暗号化データの編集はできません。")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    End if</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> End if</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=setadminprotection>.setAdminProtection()<a href=#setadminprotection class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>18 R6<td>追加</table>
</div></div></details>
<p><strong>.setAdminProtection</strong>( <em>status</em> : Boolean )</p>

















<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>status<td>Boolean<td>-><td><code>webAdmin</code>ポート上で、データエクスプローラーによるデータアクセスを無効にするには true、アクセスを有効にするには false (デフォルト)</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-15>説明<a href=#説明-15 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.setAdminProtection()</code> 関数は、 <code>WebAdmin</code>セッションにおける <a href=/docs/ja/20/Admin/dataExplorer>データエクスプローラー</a> 含め、<a href=/docs/ja/20/Admin/webAdmin#http%E3%83%9D%E3%83%BC%E3%83%88>Web管理ポート</a>上でのデータアクセスを無効に設定することができます。</p>
<p>この関数が呼び出されなかった場合のデフォルトでは、データエクスプローラーを使用した <code>WebAdmin</code> 権限を持つセッションについて、Web管理ポート上のデータアクセスは常に許可されます。 環境によっては (たとえば、アプリケーションサーバーが第三者のマシン上でホストされている場合)、 管理者に対して <a href=/docs/ja/20/Admin/webAdmin#access-key>access key</a> 設定を含むサーバー設定の編集は許可しても、データ閲覧はできないようにしたいかもしれません。</p>
<p>このような場合にこの関数を呼び出すことで、ユーザーセッションが <code>WebAdmin</code> 権限を持っていても、マシンの Web管理ポート上でのデータエクスプローラーによるデータアクセスを無効にすることができます。 この関数を実行するとデータファイルは即座に保護され、そのステータスがディスク上に保存されます: アプリケーションを再起動しても、データファイルは保護されたままです。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-11>例題<a href=#例題-11 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>運用前に呼び出す <em>protectDataFile</em> プロジェクトメソッドを作成します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> ds.setAdminProtection(True) // データエクスプローラーによるデータアクセスを無効化します</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照-6>参照<a href=#参照-6 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#isadminprotected><code>.isAdminProtected()</code></a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=setremotecontextinfo>.setRemoteContextInfo()<a href=#setremotecontextinfo class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>19 R5<td>追加</table>
</div></div></details>
<p><strong>.setRemoteContextInfo</strong>( <em>contextName</em> : Text ; <em>dataClassName</em> : Text ; <em>attributes</em> : Text {; <em>contextType</em> : Text { ; <em>pageLength</em> : Integer}})<br><strong>.setRemoteContextInfo</strong>( <em>contextName</em> : Text ; <em>dataClassName</em> : Text; <em>attributesColl</em> : Collection {; <em>contextType</em> : Text { ; <em>pageLength</em> : Integer }} )<br><strong>.setRemoteContextInfo</strong>( <em>contextName</em> : Text ; <em>dataClassObject</em> : 4D.DataClass ; <em>attributes</em> : Text {; <em>contextType</em> : Text { ; <em>pageLength</em> : Integer }})<br><strong>.setRemoteContextInfo</strong>( <em>contextName</em> : Text ; <em>dataClassObject</em> : 4D.DataClass ; <em>attributesColl</em> : Collection {; <em>contextType</em> : Text { ; <em>pageLength</em> : Integer }} )</p>





















































<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>contextName<td>Text<td>-><td>コンテキストの名称<tr><td>dataClassName<td>Text<td>-><td>データクラスの名称<tr><td>dataClassObject<td>4D.DataClass<td>-><td>DataClass オブジェクト (例: datastore.Employee)<tr><td>attributes<td>Text<td>-><td>カンマ区切りの属性リスト<tr><td>attributesColl<td>Collection<td>-><td>属性名 (テキスト) のコレクション<tr><td>contextType<td>Text<td>-><td>渡す場合、値は "main" または "currentItem" のいずれか<tr><td>pageLength<td>Integer<td>-><td>コンテキストにリンクされたエンティティセレクションのページ長 (デフォルトは 80)</table>
<p>|</p>
<blockquote>
<p><strong>上級者向け:</strong> この機能は、特定の構成のため、ORDAのデフォルト機能をカスタマイズする必要がある開発者向けです。 ほとんどの場合、使用する必要はないでしょう。</p>
</blockquote>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-16>説明<a href=#説明-16 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.setRemoteContextInfo()</code> 関数は、 指定したデータクラス属性を <em>contextName</em> の最適化コンテキストにリンクします。 指定した属性に対して最適化コンテキストが既に存在する場合、このコマンドはそれを置き換えます。</p>
<p>ORDAクラスの関数にコンテキストを渡すと、RESTリクエストの最適化が即座に発動します:</p>
<ul>
<li>自動モードのときとは異なり、先頭エンティティは完全にロードされません。</li>
<li>80件のエンティティ (または <code>pageLength</code> に対応するエンティティ数) のページが直ちにサーバーに要求される際、コンテキストの属性のみが要求されます。</li>
</ul>
<blockquote>
<p>最適化コンテキストの作成に関する詳細については、<a href=/docs/ja/20/ORDA/datastores#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E6%9C%80%E9%81%A9%E5%8C%96>クライアント/サーバーの最適化</a> を参照ください。</p>
</blockquote>
<p><em>contextName</em> には、データクラス属性にリンクする最適化コンテキストの名前を渡します。</p>
<p>コンテキストを受け取るデータクラスを指定するために、<em>dataClassName</em> または <em>dataClassObject</em> を渡すことができます。</p>
<p>コンテキストにリンクする属性を指定するには、<em>attributes</em> (テキスト) にカンマ区切りの属性リストを渡すか、属性名のコレクションを <em>attributesColl</em> (テキストのコレクション) に渡します。</p>
<p><em>attributes</em> が空のテキスト、または <em>attributesColl</em> が空のコレクションの場合、データクラスのすべてのスカラー属性が最適化コンテキストに置かれます。 データクラスに存在しない属性を渡した場合、それは無視され、エラーが返されます。</p>
<p><em>contextType</em> を渡して、コンテキストが標準コンテキストか、リストボックスに表示されているカレントエンティティセレクション項目のコンテキストかを指定することができます。</p>
<ul>
<li>"main" (デフォルト) を渡すと、<em>contextName</em> は標準コンテキストを指定します。</li>
<li>"currentItem" の場合には、渡された属性はカレント項目のコンテキストに置かれます。  <a href=/docs/ja/20/ORDA/datastores#%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E5%9E%8B%E3%83%AA%E3%82%B9%E3%83%88%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9>エンティティセレクション型リストボックス</a> を参照ください。</li>
</ul>
<p><em>pageLength</em> には、サーバーに要求するデータクラスエンティティの数を指定します。</p>
<p>エンティティセレクションであるリレーション属性 (1対N) について、<em>pageLength</em> を渡すことができます。 シンタックスは、<code>relationAttributeName:pageLength</code> です (例: employees:20)。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-1-3>例題 1<a href=#例題-1-3 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">var $ds : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $persons : cs.PersonsSelection</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $p : cs.PersonsEntity</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $contextA : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $info : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $text : Text</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// リモートデータストアを開きます</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// コンテキストを設定します</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$contextA:=New object("context"; "contextA")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ds.setRemoteContextInfo("contextA"; $ds.Persons; "firstname, lastname")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// ループを使い、サーバーにリクエストを送信します</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$persons:=$ds.Persons.all($contextA)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$text:=""</span><br></span><span class=token-line style=color:#393A34><span class="token plain">For each ($p; $persons)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $text:=$p.firstname + " " + $p.lastname</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End for each</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// コンテキストの情報を確認します</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$info:=$ds.getRemoteContextInfo("contextA")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">// $info = {name:"contextA";dataclass:"Persons";main:"firstname, lastname"}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<blockquote>
<p>この例はデモンストレーションであり、実際の実装を想定したものではありません。</p>
</blockquote>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-2-3>例題 2<a href=#例題-2-3 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>以下のコードでは、<code>Address</code> データクラスのエンティティ 30件のページをサーバーに要求しています。 返されるエンティティは、<code>zipCode</code> 属性のみを含みます。</p>
<p>各 <code>Address</code> エンティティに対して、20件の Persons エンティティが返され、それらには <code>lastname</code> と <code>firstname</code> 属性のみが含まれます:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">var $ds : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ds.setRemoteContextInfo("contextA"; $ds.Address; "zipCode, persons:20,\</span><br></span><span class=token-line style=color:#393A34><span class="token plain">persons.lastname, persons.firstname"; "main"; 30)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-3---リストボックス>例題 3 - リストボックス<a href=#例題-3---リストボックス class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">// フォームのロード時に</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Case of </span><br></span><span class=token-line style=color:#393A34><span class="token plain">    : (Form event code=On Load)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Form.ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">       // ページコンテキストの属性を設定します</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Form.ds.setRemoteContextInfo("LB"; Form.ds.Persons; "age, gender,\</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        children"; "currentItem")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Form.settings:=New object("context"; "LB")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Form.persons:=Form.ds.Persons.all(Form.settings)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        // Form.persons がリストボックスに表示されます</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End case </span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">// カレント項目のコンテキストの属性を取得します</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Form.currentItemLearntAttributes:=Form.selectedPerson.getRemoteContextAttributes()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">// Form.currentItemLearntAttributes = "age, gender, children"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照-7>参照<a href=#参照-7 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#getremotecontextinfo>.getRemoteContextInfo()</a><br><a href=#getallremotecontexts>.getAllRemoteContexts()</a><br><a href=#clearallremotecontexts>.clearAllRemoteContexts()</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=startrequestlog>.startRequestLog()<a href=#startrequestlog class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>

















<table><thead><tr><th>リリース<th>内容<tbody><tr><td>20<td>サーバー側のサポート、新しい <code>options</code> 引数<tr><td>17 R6<td>追加</table>
</div></div></details>
<p><strong>.startRequestLog</strong>()<br><strong>.startRequestLog</strong>( <em>file</em> : 4D.File )<br><strong>.startRequestLog</strong>( <em>file</em> : 4D.File ; <em>options</em> : Integer )<br><strong>.startRequestLog</strong>( <em>reqNum</em> : Integer )</p>





























<table><thead><tr><th>引数<th>型<th><th>説明<tbody><tr><td>file<td>4D.File<td>-><td>File オブジェクト<tr><td>options<td>Integer<td>-><td>ログレスポンスオプション (サーバーのみ)<tr><td>reqNum<td>Integer<td>-><td>メモリ内に保管するリクエストの数 (クライアントのみ)</table>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-17>説明<a href=#説明-17 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.startRequestLog()</code> 関数は、 クライアント側またはサーバー側で ORDAリクエストのログを開始します。 これはクライアント/サーバー環境でのデバッグを想定して設計されています。</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_BuS1><p>ORDAリクエストログのフォーマットの詳細は、<a href=/docs/ja/20/Debugging/debugLogFiles#orda%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88><strong>ORDAリクエスト</strong></a> の章を参照ください。</div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=クライアント側>クライアント側<a href=#クライアント側 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>クライアント側の ORDAリクエストログを作成するには、リモートマシン上でこの関数を呼び出します。 ログは、渡した引数によってファイルまたはメモリに送ることができます:</p>
<ul>
<li><code>File</code> コマンドで作成された <em>file</em> オブジェクトを渡した場合、ログデータはオブジェクト (JSON フォーマット) のコレクションとしてこのファイルに書き込まれます。 各オブジェクトは一つのリクエストを表します。<br>ファイルがまだ存在しない場合には、作成されます。 もしファイルが既に存在する場合、新しいログデータはそこに追加されていきます。 メモリへのログ記録が既に始まっている状態で、 <code>.startRequestLog()</code>が file 引数付きで呼び出された場合、メモリに記録されていたログは停止され消去されます。</li>
</ul>
<blockquote>
<p>JSON 評価を実行するには、ファイルの終わりに手動で ] 文字を追加する必要があります。</p>
</blockquote>
<ul>
<li>
<p><em>reqNum</em> (倍長整数) 引数を渡した場合、メモリ内のログは (あれば) 消去され、新しいログが初期化されます。 <em>reqNum</em> 引数が指定する数にリクエスト数が到達するまでは、ログはメモリに保管され、到達した場合には古いエントリーから消去されていきます (FIFO スタック)。<br> ファイルへのログ記録が既に始まっている状態で、<code>.startRequestLog()</code> が <em>reqNum</em> 引数付きで呼び出された場合、ファイルへのログは停止されます。</p>
</li>
<li>
<p>引数を何も渡さなかった場合、ログはメモリに記録されていきます。 前もって <code>.startRequestLog()</code> が<em>reqNum</em> 引数付きで 呼び出されていた場合 (ただし <code>.stopRequestLog()</code> の前)、ログが次回消去されるかまたは<code>.stopRequestLog()</code> が呼び出されるまで、ログデータはメモリ内にスタックされます。</p>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=サーバー側>サーバー側<a href=#サーバー側 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>サーバー側の ORDAリクエストログを作成するには、サーバーマシン上でこの関数を呼び出します。 ログは、<code>.jsonl</code> 形式のファイルに書き込まれます。 各オブジェクトは 1つのリクエストを表します。 ファイルが存在しない場合は、作成されます。 もしファイルが既に存在する場合、新しいログデータはそこに追加されていきます。</p>
<ul>
<li><em>file</em> 引数を渡した場合、ログデータはこのファイルの指定位置に書き込まれます。 - <em>file</em> 引数を省略した場合、または引数が NULL の場合、ログデータは <em>ordaRequests.jsonl</em> という名前のファイルに書き込まれ、"/LOGS" フォルダーに保存されます。</li>
<li><em>options</em> 引数を使って、サーバーのレスポンスをログに記録するかどうか、および本文をログに含めるかどうかを指定することができます。 引数を省略した場合のデフォルトでは、全レスポンスがログに記録されます。 この引数には、以下の定数を使用することができます:</li>
</ul>





















<table><thead><tr><th>定数<th>説明<tbody><tr><td>srl log all<td>全レスポンスをログに残します (デフォルト値)<tr><td>srl log no response<td>レスポンスの記録を無効化します<tr><td>srl log response without body<td>本文を除いたレスポンスをログに残します</table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-1-4>例題 1<a href=#例題-1-4 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>ORDA クライアントリクエストをファイルに記録し、ログシーケンス番号を使用します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $file : 4D.File</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> var $e : cs.PersonsEntity</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $file:=File("/LOGS/ORDARequests.txt") // Logs フォルダー</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> SET DATABASE PARAMETER(Client Log Recording;1) // グローバルログシーケンス番号をトリガーします</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> ds.startRequestLog($file)</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $e:=ds.Persons.get(30001) // リクエストを送信します</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> ds.stopRequestLog()</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> SET DATABASE PARAMETER(Client Log Recording;0)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-2-4>例題 2<a href=#例題-2-4 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>ORDA クライアントリクエストをメモリに記録します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $es : cs.PersonsSelection</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> var $log : Collection</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> ds.startRequestLog(3) // メモリにはリクエストを 3つまで保管します</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $es:=ds.Persons.query("name=:1";"Marie")</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $es:=ds.Persons.query("name IN :1";New collection("Marie"))</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $es:=ds.Persons.query("name=:1";"So@")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> $log:=ds.getRequestLog()</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> ALERT("The longest request lasted: "+String($log.max("duration"))+" ms")</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-3-1>例題 3<a href=#例題-3-1 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p>ORDA サーバーリクエストを専用ファイルに記録し、ログシーケンス番号と処理時間の記録を有効化します:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">SET DATABASE PARAMETER(4D Server Log Recording;1)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$file:=Folder(fk logs folder).file("myOrdaLog.jsonl")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ds.startRequestLog($file)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">...</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ds.stopRequestLog()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">SET DATABASE PARAMETER(4D Server Log Recording;0)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=starttransaction>.startTransaction()<a href=#starttransaction class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>18<td>追加</table>
</div></div></details>
<p><strong>.startTransaction()</strong></p>
<p>| 引数 | 型 |  | 説明                                           |
| -- | - |::| -------------------------------------------- |
|    |   |  | このコマンドは引数を必要としません|</p>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-18>説明<a href=#説明-18 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.startTransaction()</code> 関数は、 対象データストアに対応するデータベース上で、カレントプロセス内のトランザクションを開始します。 トランザクションプロセス中にデータストアのエンティティに加えられた変更は、トランザクションが確定されるかキャンセルされるまで一時的に保管されたままになります。</p>
<blockquote>
<p>このメソッドがメインのデータストア (<code>ds</code> コマンドで返されるデータストア) で呼ばれた場合、トランザクションはメインのデータストアとそのデータベースで実行されるすべてのオペレーションに適用されます。これには、そこで実行される ORDA とクラシック言語も含まれます。</p>
</blockquote>
<p>複数のトランザクションをネストすること (サブトランザクション) が可能です。 個々のトランザクションまたはサブトランザクションは、それぞれキャンセルするか確定される必要があります。 メイントランザクションがキャンセルされると、サブトランザクションも (たとえ個々に<code>.validateTransaction()</code> 関数で承認されていても) すべてキャンセルされます。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-12>例題<a href=#例題-12 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"> var $connect; $status : Object</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $person : cs.PersonsEntity</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $ds : 4D.DataStoreImplementation</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $choice : Text</span><br></span><span class=token-line style=color:#393A34><span class="token plain">var $error : Boolean</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Case of</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :($choice="local")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">       $ds:=ds</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :($choice="remote")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">       $connect:=New object("hostname";"111.222.3.4:8044")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">       $ds:=Open datastore($connect;"myRemoteDS")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End case</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">$ds.startTransaction()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">$person:=$ds.Persons.query("lastname=:1";"Peters").first()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">If($person#Null)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $person.lastname:="Smith"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $status:=$person.save()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">End if</span><br></span><span class=token-line style=color:#393A34><span class="token plain">...</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> ...</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> If($error)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $ds.cancelTransaction()</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> Else</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    $ds.validateTransaction()</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> End if</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=クリップボードにコードをコピー title=コピー class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=stoprequestlog>.stopRequestLog()<a href=#stoprequestlog class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>

















<table><thead><tr><th>リリース<th>内容<tbody><tr><td>20<td>サーバー側のサポート<tr><td>17 R6<td>追加</table>
</div></div></details>
<p><strong>.stopRequestLog()</strong></p>
<p>| 引数 | 型 |  | 説明                                           |
| -- | - |  | -------------------------------------------- |
|    |   |  | このコマンドは引数を必要としません|</p>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-19>説明<a href=#説明-19 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.stopRequestLog()</code> 関数は、 クライアント側またはサーバー側の ORDAリクエストのログをすべて停止します。</p>
<p>実際には、ディスク上で開かれているドキュメントを閉じます。 クライアント側で、メモリ上でログの記録が開始されていた場合、そのログを停止します。</p>
<p>ORDAリクエストログがマシン上で開始されていない場合、この関数は何もしません。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-13>例題<a href=#例題-13 class=hash-link aria-label=見出しへ�の直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#startrequestlog><code>.startRequestLog()</code></a> の例題を参照ください。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=unlock>.unlock()<a href=#unlock class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>20<td>追加</table>
</div></div></details>
<p><strong>.unlock()</strong></p>
<p>| 引数 | 型 |  | 説明                                           |
| -- | - |  | -------------------------------------------- |
|    |   |  | このコマンドは引数を必要としません|</p>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-20>説明<a href=#説明-20 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.unlock()</code> 関数は、 データストアにおける、書き込み操作に対する現在のロックが同じプロセスで設定されていた場合、そのロックを解除します。 ローカルデータストアの書き込み操作は、<a href=#flushandlock><code>.flushAndLock()</code></a> 関数を使用してロックすることができます。</p>
<p>現在のロックがデータストアの唯一のロックであった場合、書き込み操作は直ちに可能になります。 <code>.flushAndLock()</code> 関数がプロセス内で複数回呼ばれている場合、データストアのロックを解除するには、同じ回数だけ <code>.unlock()</code> を呼び出す必要があります。</p>
<p><code>.unlock()</code> 関数は、対応する <code>.flushAndLock()</code> を呼び出したプロセス内で呼び出す必要があります。そうでない場合には、この関数は何もおこなわず、ロックも解除されません。</p>
<p>ロックが解除されているデータストアで <code>.unlock()</code> 関数を呼び出した場合、何もおこりません。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=参照-8>参照<a href=#参照-8 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#flushandlock>.flushAndLock()</a><br><a href=#locked>.locked()</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=validatetransaction>.validateTransaction()<a href=#validatetransaction class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h2>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>













<table><thead><tr><th>リリース<th>内容<tbody><tr><td>18<td>追加</table>
</div></div></details>
<p><strong>.validateTransaction()</strong></p>
<p>| 引数 | 型 |  | 説明                                           |
| -- | - |  | -------------------------------------------- |
|    |   |  | このコマンドは引数を必要としません|</p>
<p>|</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=説明-21>説明<a href=#説明-21 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><code>.validateTransaction()</code> 関数は、 トランザクションを受け入れます 。このトランザクションは、対象データストアの対応するレベルで <a href=#starttransaction><code>.startTransaction()</code></a> で開始されたものです。</p>
<p>この関数は、トランザクション中におこなわれたデータストア上のデータの変更を保存します。</p>
<p>複数のトランザクションをネストすること (サブトランザクション) が可能です。 メイントランザクションがキャンセルされると、サブトランザクションも (たとえ個々にこの関数で承認されていても) すべてキャンセルされます。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=例題-14>例題<a href=#例題-14 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク>​</a></h4>
<p><a href=#starttransaction><code>.startTransaction()</code></a> の例題を参照ください。</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href="https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FDataStoreClass.md%20(20)&body=Please%20enter%20your%20comment%3A" target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>このページへコメントする</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label=ドキュメントのナビゲーション><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/ja/20/API/DataClassClass><div class=pagination-nav__sublabel>前へ</div><div class=pagination-nav__label>DataClass</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/ja/20/API/EmailObjectClass><div class=pagination-nav__sublabel>次へ</div><div class=pagination-nav__label>Email</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#概要 class="table-of-contents__link toc-highlight">概要</a><li><a href=#ds class="table-of-contents__link toc-highlight">ds</a><li><a href=#open-datastore class="table-of-contents__link toc-highlight">Open datastore</a><li><a href=#dataclassname class="table-of-contents__link toc-highlight"><em>.dataclassName</em></a><li><a href=#canceltransaction class="table-of-contents__link toc-highlight">.cancelTransaction()</a><li><a href=#clearallremotecontexts class="table-of-contents__link toc-highlight">.clearAllRemoteContexts()</a><li><a href=#encryptionstatus class="table-of-contents__link toc-highlight">.encryptionStatus()</a><li><a href=#flushandlock class="table-of-contents__link toc-highlight">.flushAndLock()</a><li><a href=#getallremotecontexts class="table-of-contents__link toc-highlight">.getAllRemoteContexts()</a><li><a href=#getinfo class="table-of-contents__link toc-highlight">.getInfo()</a><li><a href=#getremotecontextinfo class="table-of-contents__link toc-highlight">.getRemoteContextInfo()</a><li><a href=#getrequestlog class="table-of-contents__link toc-highlight">.getRequestLog()</a><li><a href=#isadminprotected class="table-of-contents__link toc-highlight">.isAdminProtected()</a><li><a href=#locked class="table-of-contents__link toc-highlight">.locked()</a><li><a href=#makeselectionsalterable class="table-of-contents__link toc-highlight">.makeSelectionsAlterable()</a><li><a href=#providedatakey class="table-of-contents__link toc-highlight">.provideDataKey()</a><li><a href=#setadminprotection class="table-of-contents__link toc-highlight">.setAdminProtection()</a><li><a href=#setremotecontextinfo class="table-of-contents__link toc-highlight">.setRemoteContextInfo()</a><li><a href=#startrequestlog class="table-of-contents__link toc-highlight">.startRequestLog()</a><li><a href=#starttransaction class="table-of-contents__link toc-highlight">.startTransaction()</a><li><a href=#stoprequestlog class="table-of-contents__link toc-highlight">.stopRequestLog()</a><li><a href=#unlock class="table-of-contents__link toc-highlight">.unlock()</a><li><a href=#validatetransaction class="table-of-contents__link toc-highlight">.validateTransaction()</a></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>コミュニティ</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://blog.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Blog</a><li class=footer__item><a href=https://discuss.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Forum</a><li class=footer__item><a href=https://facebook.com/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook</a><li class=footer__item><a href=https://x.com/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>X</a><li class=footer__item><a href=https://youtube.com/user/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>Youtube</a><li class=footer__item><a href=https://github.com/4D target=_blank rel="noopener noreferrer" class=footer__link-item>Github</a></ul></div><div class="col footer__col"><div class=footer__title>サポート</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/4d/docs/releases/tag/latest target=_blank rel="noopener noreferrer" class=footer__link-item>Documentation download<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://doc.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Doc Center (旧ドキュメント)</a><li class=footer__item><a href=https://kb.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>ナレッジベース</a><li class=footer__item><a href=https://us.4d.com/product-download/Feature-Release target=_blank rel="noopener noreferrer" class=footer__link-item>ダウンロード</a><li class=footer__item><a href=https://us.4d.com/resources target=_blank rel="noopener noreferrer" class=footer__link-item>Resources</a><li class=footer__item><a href=https://us.4d.com/4d-technical-support target=_blank rel="noopener noreferrer" class=footer__link-item>サポートを受ける</a></ul></div><div class="col footer__col"><div class=footer__title>会社概要</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://us.4d.com/about-us target=_blank rel="noopener noreferrer" class=footer__link-item>4D社について</a><li class=footer__item><a href=https://us.4d.com/contact-us target=_blank rel="noopener noreferrer" class=footer__link-item>コンタクト</a><li class=footer__item><a href=https://us.4d.com/4d-around-the-world target=_blank rel="noopener noreferrer" class=footer__link-item>世界中の4D</a><li class=footer__item><a href=https://us.4d.com/Careers target=_blank rel="noopener noreferrer" class=footer__link-item>Careers</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>© 2025 4D SAS - All rights reserved</div></div></div></footer></div>