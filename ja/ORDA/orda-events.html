<!doctype html><html lang=ja dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-21 docs-doc-page docs-doc-id-ORDA/orda-events" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>エンティティイベント | 4D Docs</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://developer.4d.com/docs/ja/ORDA/orda-events /><meta data-rh=true property=og:locale content=ja /><meta data-rh=true property=og:locale:alternate content=en /><meta data-rh=true property=og:locale:alternate content=fr /><meta data-rh=true property=og:locale:alternate content=es /><meta data-rh=true property=og:locale:alternate content=pt /><meta data-rh=true name=docusaurus_locale content=ja /><meta data-rh=true name=docsearch:language content=ja /><meta data-rh=true name=docusaurus_version content=21 /><meta data-rh=true name=docusaurus_tag content=docs-default-21 /><meta data-rh=true name=docsearch:version content=21 /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-21 /><meta data-rh=true property=og:title content="エンティティイベント | 4D Docs"/><meta data-rh=true name=description content=履歴 /><meta data-rh=true property=og:description content=履歴 /><link data-rh=true rel=icon href=/docs/ja/img/favicon/4d.gif /><link data-rh=true rel=canonical href=https://developer.4d.com/docs/ja/ORDA/orda-events /><link data-rh=true rel=alternate href=https://developer.4d.com/docs/ORDA/orda-events hreflang=en /><link data-rh=true rel=alternate href=https://developer.4d.com/docs/fr/ORDA/orda-events hreflang=fr /><link data-rh=true rel=alternate href=https://developer.4d.com/docs/es/ORDA/orda-events hreflang=es /><link data-rh=true rel=alternate href=https://developer.4d.com/docs/ja/ORDA/orda-events hreflang=ja /><link data-rh=true rel=alternate href=https://developer.4d.com/docs/pt/ORDA/orda-events hreflang=pt /><link data-rh=true rel=alternate href=https://developer.4d.com/docs/ORDA/orda-events hreflang=x-default /><link data-rh=true rel=preconnect href=https://OJ04C0M3CU-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://developer.4d.com/docs/ja/category/core","name":"コア開発","position":1},{"@type":"ListItem","item":"https://developer.4d.com/docs/ja/ORDA/overview","name":"ORDA","position":2},{"@type":"ListItem","item":"https://developer.4d.com/docs/ja/ORDA/orda-events","name":"エンティティイベント","position":3}]}</script><link rel=search type=application/opensearchdescription+xml title="4D Docs" href=/docs/ja/opensearch.xml><script src=https://kit.fontawesome.com/daeacc3fc4.js crossorigin=anonymous></script><link rel=stylesheet href=/docs/ja/assets/css/styles.73ef7d2c.css /><script src=/docs/ja/assets/js/runtime~main.65684180.js defer></script><script src=/docs/ja/assets/js/main.cbc2c3c7.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/docs/ja/img/logohome.png /><div role=region aria-label=メインコンテンツまでスキップ><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>メインコンテンツまでスキップ</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label=ナビゲーションバーの切り替え aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/docs/ja/><div class=navbar__logo><img src=/docs/ja/img/logohome.png alt="4D ロゴ" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/docs/ja/img/logohome.png alt="4D ロゴ" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">4D ドキュメンテーション</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/docs/ja/ORDA/orda-events>21 BETA</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/ja/ORDA/orda-events>21 BETA</a><li><a class=dropdown__link href=/docs/ja/20-R10/ORDA/orda-events>20 R10</a><li><a class=dropdown__link href=/docs/ja/20/GettingStarted/installation>20</a><li><a class=dropdown__link href=/docs/ja/19/GettingStarted/installation>19</a><li><a class=dropdown__link href=/docs/ja/18/GettingStarted/installation>18</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>日本語</a><ul class=dropdown__menu><li><a href=/docs/ORDA/orda-events target=_self rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href=/docs/fr/ORDA/orda-events target=_self rel="noopener noreferrer" class=dropdown__link lang=fr>Français</a><li><a href=/docs/es/ORDA/orda-events target=_self rel="noopener noreferrer" class=dropdown__link lang=es>Español</a><li><a href=/docs/ja/ORDA/orda-events target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=ja>日本語</a><li><a href=/docs/pt/ORDA/orda-events target=_self rel="noopener noreferrer" class=dropdown__link lang=pt>Português</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="ダークモードとライトモードを切り替える (現在は system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="検索 (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>検索</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label=トップに戻る class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/docs/ja/><img src=/docs/ja/img/logohome.png alt="4D ロゴ" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/docs/ja/img/logohome.png alt="4D ロゴ" class="themedComponent_mlkZ themedComponent--dark_xIcU"/><b>4D ドキュメンテーション</b></a><nav aria-label=Docsサイドバー class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/ja/category/getting-started><span title=はじめに class=categoryLinkLabel_W154>はじめに</span></a><button aria-label="サイドバーのカテゴリ 'はじめに ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/ja/category/project-ide><span title="Project & IDE" class=categoryLinkLabel_W154>Project & IDE</span></a><button aria-label="サイドバーのカテゴリ 'Project & IDE ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/ja/category/4d-language><span title=4Dランゲージ class=categoryLinkLabel_W154>4Dランゲージ</span></a><button aria-label="サイドバーのカテゴリ '4Dランゲージ ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href=/docs/ja/category/core><span title=コア開発 class=categoryLinkLabel_W154>コア開発</span></a><button aria-label="サイドバーのカテゴリ 'コア開発 ' を閉じる" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/ja/ORDA/overview><span title=ORDA class=categoryLinkLabel_W154>ORDA</span></a><button aria-label="サイドバーのカテゴリ 'ORDA ' を閉じる" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/ORDA/dsmapping><span title=データモデルオブジェクト class=linkLabel_WmDU>データモデルオブジェクト</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/ORDA/ordaClasses><span title=データモデルクラス class=linkLabel_WmDU>データモデルクラス</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/ORDA/entities><span title=データ操作 class=linkLabel_WmDU>データ操作</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/ja/ORDA/orda-events><span title=エンティティイベント class=linkLabel_WmDU>エンティティイベント</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/ORDA/global-stamp><span title=グローバルスタンプの使い方 class=linkLabel_WmDU>グローバルスタンプの使い方</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/ORDA/datastores><span title=リモートデータストア class=linkLabel_WmDU>リモートデータストア</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/ORDA/privileges><span title=ロールと権限 class=linkLabel_WmDU>ロールと権限</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/ORDA/client-server-optimization><span title=クライアント/サーバーの最適化 class=linkLabel_WmDU>クライアント/サーバーの最適化</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/ORDA/glossary><span title=用語集 class=linkLabel_WmDU>用語集</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/docs/ja/category/processes><span title=プロセス class=categoryLinkLabel_W154>プロセス</span></a><button aria-label="サイドバーのカテゴリ 'プロセス ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/docs/ja/category/database-methods><span title=データベースメソッド class=categoryLinkLabel_W154>データベースメソッド</span></a><button aria-label="サイドバーのカテゴリ 'データベースメソッド ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/Develop/transactions><span title=Transactions class=linkLabel_WmDU>Transactions</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/Tags/transformation-tags><span title=変換タグ class=linkLabel_WmDU>変換タグ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/ja/Project/date-time-formats><span title=日付と時間のフォーマット class=linkLabel_WmDU>日付と時間のフォーマット</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/ja/category/web-applications><span title="Web アプリ" class=categoryLinkLabel_W154>Web アプリ</span></a><button aria-label="サイドバーのカテゴリ 'Web アプリ ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/ja/category/desktop-applications><span title=デスクトップアプリ class=categoryLinkLabel_W154>デスクトップアプリ</span></a><button aria-label="サイドバーのカテゴリ 'デスクトップアプリ ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/ja/category/administration><span title=管理 class=categoryLinkLabel_W154>管理</span></a><button aria-label="サイドバーのカテゴリ '管理 ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/ja/category/extensions><span title=拡張機能 class=categoryLinkLabel_W154>拡張機能</span></a><button aria-label="サイドバーのカテゴリ '拡張機能 ' を開く" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav><button type=button title=サイドバーを隠す aria-label=サイドバーを隠す class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=パンくずリスト><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label=ホームページ class=breadcrumbs__link href=/docs/ja/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/ja/category/core><span>コア開発</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/ja/ORDA/overview><span>ORDA</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>エンティティイベント</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">バージョン: 21 BETA</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">このページ上で</button></div><div class="theme-doc-markdown markdown"><header><h1>エンティティイベント</h1></header><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>履歴</summary><div><div class=collapsibleContent_i85q>

















<table><thead><tr><th>リリース<th>内容<tbody><tr><td>21<td>追加されたイベント: validateSave / saving / afterSave / validateDrop / dropping / afterDrop<tr><td>20 R10<td>touched イベント追加</table>
</div></div></details>
<p>エンティティイベントとは、エンティティやエンティティ属性が操作(追加、削除、変更)されるたびに ORDA によって自動的に呼び出される関数です。 シンプルなイベントを書き、それをより洗練されたものに変えていくことができます。</p>
<p>イベント関数の実行は直接トリガーすることはできません。 イベントは、ユーザーアクションや、エンティティまたはその属性に対するコードを通して実行された操作に基づいて、ORDA によって自動的に呼び出されます。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>関連したblog 記事</div><div class=admonitionContent_BuS1><p><a href=https://blog.4d.com/orda-handle-an-event-driven-logic-during-database-operations target=_blank rel="noopener noreferrer" class="">ORDA – Handle an event-driven logic during data persistence actions</a></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>互換性に関する注意</div><div class=admonitionContent_BuS1><p>データストアにおける ORDA エンティティイベントは、4D データベースにおけるトリガに相当します。 しかしながら、4D クラシックランゲージコマンドを使用して 4D データベースレベルでトリガーされたアクション、あるいは標準アクションは、ORDA イベントをトリガーしません。 また、トリガとは異なり、ORDA エンティティイベントはエンティティを保存または削除する際に、データクラスの元となるテーブル全体をロックしないことに注意して下さい。 個別のエンティティ(つまりレコード)に起因している限りは、複数のイベントが同時に実行されることが可能です。</div></div>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=概要>概要<a href=#概要 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=イベントレベル>イベントレベル<a href=#イベントレベル class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<p>イベント関数は必ず<a class="" href=/docs/ja/ORDA/ordaClasses#%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3%E3%82%AF%E3%83%A9%E3%82%B9>Entity クラス</a> 内で定義されます。</p>
<p>イベントは <strong>エンティティ</strong> レベルまたは <strong>属性</strong> レベルで設定することができます(属性には <a class="" href=/docs/ja/ORDA/ordaClasses#%E8%A8%88%E7%AE%97%E5%B1%9E%E6%80%A7><strong>計算属性</strong></a> も含まれます)。 前者の場合、エンティティのあらゆる属性でイベントがトリガーされます。それ以外の場合、イベントは対象となる属性に対してのみトリガーされます。</p>
<p>同じイベントに対して、異なる属性に対して異なる関数を定義することができます。</p>
<p>また同じイベントを属性レベルとエンティティレベルの両方で定義することも可能です。 その場合、属性イベントが先に呼ばれ、その後にエンティティイベントが呼ばれます。</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=リモート構成における実行>リモート構成における実行<a href=#リモート構成における実行 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<p>一般的に、ORDA イベントはサーバー上で実行されます。</p>
<p>しかしながらクライアント/サーバー構成においては、<a class="" href=/docs/ja/ORDA/ordaClasses#local-functions><code>local</code></a> キーワードの使用によっては、<code>touched()</code> イベント関数を<strong>サーバーまたはクライアント</strong>で実行することが可能です。 クライアント側で特定の実装をすることにより、イベントをクライアント上でトリガーすることができるようになります。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>注</div><div class=admonitionContent_BuS1><p>ORDA <a class="" href=/docs/ja/ORDA/ordaClasses#class-constructor><code>constructor()</code></a> 関数は必ずクライアント上で実行されます。</div></div>
<p>他のリモート構成(例: <a href=https://developer.4d.com/qodly target=_blank rel="noopener noreferrer" class="">Qodly アプリケーション</a>、<a class="" href=/docs/ja/REST/REST_requests>REST API リクエスト</a>、あるいは<a class="" href=/docs/ja/commands/open-datastore><code>Open datastore</code></a> を通したリクエスト)においては、イベント関数は必ず<strong>サーバー側</strong>で実行されます。 これはつまりイベントをトリガーするためには、属性がタッチされたことがサーバーから"見える"ようにしておくようにしなければならいことを意味します(以下参照)。</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=概要表>概要表<a href=#概要表 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<p>以下の表は、ORDA イベントの一覧とそのルールをまとめたものです。</p>







































































































<table><thead><tr><th style=text-align:left>イベント<th style=text-align:left>レベル<th style=text-align:left>関数名<th style=text-align:center>(C/S の場合) 実行される場所<th>エラーを返すことでアクションを停止できる<tbody><tr><td style=text-align:left>エンティティのインスタンス化<td style=text-align:left>Entity<td style=text-align:left><a class="" href=/docs/ja/ORDA/ordaClasses#class-constructor-1><code>constructor()</code></a><td style=text-align:center>client<td>×<tr><td style=text-align:left>属性がタッチされた<td style=text-align:left>属性<td style=text-align:left><code>event touched &lt;attrName>()</code><td style=text-align:center><a class="" href=/docs/ja/ORDA/ordaClasses#local-functions><code>local</code></a> キーワードによる<td>×<tr><td style=text-align:left><td style=text-align:left>Entity<td style=text-align:left><code>event touched()</code><td style=text-align:center><a class="" href=/docs/ja/ORDA/ordaClasses#local-functions><code>local</code></a> キーワードによる<td>×<tr><td style=text-align:left>エンティティを保存する前<td style=text-align:left>属性<td style=text-align:left><code>validateSave &lt;attrName>()</code><td style=text-align:center>server<td>◯<tr><td style=text-align:left><td style=text-align:left>Entity<td style=text-align:left><code>validateSave()</code><td style=text-align:center>server<td>◯<tr><td style=text-align:left>エンティティの保存時<td style=text-align:left>属性<td style=text-align:left><code>saving &lt;attrName>()</code><td style=text-align:center>server<td>◯<tr><td style=text-align:left><td style=text-align:left>Entity<td style=text-align:left><code>saving()</code><td style=text-align:center>server<td>◯<tr><td style=text-align:left>エンティティを保存した後<td style=text-align:left>Entity<td style=text-align:left><code>afterSave()</code><td style=text-align:center>server<td>×<tr><td style=text-align:left>エンティティをドロップ(削除)する前<td style=text-align:left>属性<td style=text-align:left><code>validateDrop &lt;attrName>()</code><td style=text-align:center>server<td>◯<tr><td style=text-align:left><td style=text-align:left>Entity<td style=text-align:left><code>validateDrop()</code><td style=text-align:center>server<td>◯<tr><td style=text-align:left>エンティティのドロップ(削除)時<td style=text-align:left>属性<td style=text-align:left><code>dropping &lt;attrName>()</code><td style=text-align:center>server<td>◯<tr><td style=text-align:left><td style=text-align:left>Entity<td style=text-align:left><code>dropping()</code><td style=text-align:center>server<td>◯<tr><td style=text-align:left>エンティティをドロップした後<td style=text-align:left>Entity<td style=text-align:left><code>afterDrop()</code><td style=text-align:center>server<td>×</table>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>注</div><div class=admonitionContent_BuS1><p><a class="" href=/docs/ja/ORDA/ordaClasses#class-constructor-1><code>constructor()</code></a> 関数は実際にはイベント関数ではありませんが、エンティティがインスタンス化される際に必ず呼び出されます。</div></div>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=event-引数><em>event</em> 引数<a href=#event-引数 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h2>
<p>イベント関数は、単一の <em>event</em> オブジェクトを引数として受け取ります。 関数が呼び出されると、引数には複数のプロパティに値が入れられます:</p>





























































<table><thead><tr><th style=text-align:left>プロパティ名<th style=text-align:left>利用可能性<th style=text-align:left>型<th style=text-align:left>説明<th><tbody><tr><td style=text-align:left>"kind"<td style=text-align:left>常に<td style=text-align:left>文字列<td style=text-align:left>イベント名: "touched"、"validateSave"、"saving"、"afterSave"、"validateDrop"、"dropping"、"afterDrop"<td><tr><td style=text-align:left><em>attributeName</em><td style=text-align:left>属性レベルで実装されているイベントに対してのみ("validateSave"、"saving"、"validateDrop"、"dropping")<td style=text-align:left>文字列<td style=text-align:left>属性名 (<em>例</em> "firstname")<td><tr><td style=text-align:left><em>dataClassName</em><td style=text-align:left>常に<td style=text-align:left>文字列<td style=text-align:left>データクラス名 (<em>例</em> "Company")<td><tr><td style=text-align:left>"savedAttributes"<td style=text-align:left><a href=#function-event-aftersave class=""><code>afterSave()</code></a> でのみ<td style=text-align:left>文字列のコレクション<td style=text-align:left>正常に保存された属性名<td><tr><td style=text-align:left>"droppedAttributes"<td style=text-align:left><a href=#function-event-afterdrop class=""><code>afterDrop()</code></a> でのみ<td style=text-align:left>文字列のコレクション<td style=text-align:left>正常にドロップ(削除)された属性名<td><tr><td style=text-align:left>"saveStatus"<td style=text-align:left><a href=#function-event-aftersave class=""><code>afterSave()</code></a> でのみ<td style=text-align:left>文字列<td style=text-align:left>保存が正常であれば "success"、それ以外の場合には "failed"<td><tr><td style=text-align:left>"dropStatus"<td style=text-align:left><a href=#function-event-afterdrop class=""><code>afterDrop()</code></a> でのみ<td style=text-align:left>文字列<td style=text-align:left>ドロップ(削除)が正常であれば "success"、それ以外の場合には "failed"<td></table>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=エラーオブジェクト>エラーオブジェクト<a href=#エラーオブジェクト class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h2>
<p><a href=#%E6%A6%82%E8%A6%81%E8%A1%A8 class="">一部のイベント関数</a> は <strong>エラーオブジェクト</strong> を返すことでエラーを生成し実行中のアクションを停止することができます。</p>
<p>イベント中にエラーが発生した場合、他のイベントも最初にエラーが生成された時点で停止し、アクション(保存やドロップ)も停止します。 このエラーは<a class="" href=/docs/ja/API/EntityClass#save>スタンプが変更された、エンティティがロックされていた</a> などの潜在的なエラーの前に送信されます。</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=エラーオブジェクトのプロパティ>エラーオブジェクトのプロパティ<a href=#エラーオブジェクトのプロパティ class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>









































<table><thead><tr><th>プロパティ<th>型<th>説明<th>開発者によって設定<tbody><tr><td>errCode<td>Integer<td><a class="" href=/docs/ja/commands/last-errors><code>Last errors</code></a> コマンドと同じ<td>◯<tr><td>message<td>Text<td><a class="" href=/docs/ja/commands/last-errors><code>Last errors</code></a> コマンドと同じ<td>◯<tr><td>extraDescription<td>Object<td>自由に設定可能な情報<td>◯<tr><td>seriousError<td>Boolean<td>validate イベントでのみ使用されます(以下参照)。 <li class=""><code>True</code>: <a class="" href=/docs/ja/Concepts/error-handling#%E4%BA%88%E6%B8%AC%E5%8F%AF%E8%83%BD%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BCvs%E4%BA%88%E6%B8%AC%E4%B8%8D%E8%83%BD%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BC>深刻(予測不能)なエラー</a> を作成し、例外をトリガーします。 <code>dk status serious validation error</code> ステータスを追加します</li><li class=""><code>False</code>: creates only a <a class="" href=/docs/ja/Concepts/error-handling#%E4%BA%88%E6%B8%AC%E5%8F%AF%E8%83%BD%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BCvs%E4%BA%88%E6%B8%AC%E4%B8%8D%E5%8F%AF%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BC>静か(予測可能) なエラー</a> のみを作成します。 <code>dk status validation failed</code> ステータスを追加します</li><td>可能(デフォルトはfalse)<tr><td>componentSignature<td>Text<td>常に "DBEV"<td>×</table>
<ul>
<li class=""><a class="" href=/docs/ja/Concepts/error-handling#%E4%BA%88%E6%B8%AC%E5%8F%AF%E8%83%BD%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BCvs%E4%BA%88%E6%B8%AC%E4%B8%8D%E5%8F%AF%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BC>深刻なエラー</a> は<a class="" href=/docs/ja/API/EntityClass#save><code>save()</code></a> または <a class="" href=/docs/ja/API/EntityClass#drop><code>drop()</code></a> 関数から返される <strong>Result オブジェクト</strong> の <code>errors</code> コレクションプロパティにスタックされます。</li>
<li class=""><strong>validate</strong> イベントによってトリガーされたエラーの場合、 <code>seriousError</code> プロパティを使用することで生成するエラーのレベルを選択することができます:
<ul>
<li class=""><strong>true</strong> の場合: 深刻なエラーが生成され、<a class="" href=/docs/ja/Concepts/error-handling#trycatchend-try>try catch</a>などの<a class="" href=/docs/ja/Concepts/error-handling#%E4%BA%88%E6%B8%AC%E5%8F%AF%E8%83%BD%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BCvs%E4%BA%88%E6%B8%AC%E4%B8%8D%E5%8F%AF%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BC>エラー処理コード</a> によって管理される必要があります。 呼び出した関数のresult オブジェクトでは、<code>status</code> には <code>dk status serious validation error</code> が入り、 <code>statusText</code> には "Serious Validation Error" が入ります。 エラーはイベントの終わりに生成され、保存/ドロップアクションをリクエストしているクライアント(例えばREST クライアントなど)に届きます。</li>
<li class=""><strong>false</strong> (デフォルト)の場合: <a class="" href=/docs/ja/Concepts/error-handling#%E4%BA%88%E6%B8%AC%E5%8F%AF%E8%83%BD%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BCvs%E4%BA%88%E6%B8%AC%E4%B8%8D%E5%8F%AF%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BC>静か(予測可能) なエラーが生成されます</a>。 これは例外はトリガーせず、また<a class="" href=/docs/ja/commands/last-errors><code>Last errors</code></a> コマンドから返されるエラーの中にはスタックされません。 呼び出した関数のresult オブジェクトでは、<code>status</code> には <code>dk status validation failed</code> が入り、 <code>statusText</code> には "Mild Validation Error" が入ります。</li>
</ul>
</li>
<li class=""><strong>保存時/ドロップ時</strong> のイベントによってトリガーされたエラーの場合、エラーオブジェクトが返されると、 <code>seriousError</code> プロパティの値に関わらず、エラーは常に深刻なエラーとして生成されます。</li>
</ul>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=イベント関数の詳細>イベント関数の詳細<a href=#イベント関数の詳細 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=function-event-touched><code>Function event touched</code><a href=#function-event-touched class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=シンタックス>シンタックス<a href=#シンタックス class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">{local} Function event touched($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">{local} Function event touched &lt;attributeName>($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// コード</span><br/></span></code></pre></div></div>
<p>このイベントはエンティティ内の値が編集されるたびにトリガーされます。</p>
<ul>
<li class="">関数をエンティティレベルで定義していた場合(第一シンタックス)、その関数はエンティティの任意の属性における変更に対してトリガーされます。</li>
<li class="">関数を属性レベルで定義していた場合(第二シンタックス)、関数はその属性に対する変更に対してのみトリガーされます。</li>
</ul>
<p>このイベントは4D Server / 4Dエンジンが属性値の変更を検知するとすぐにトリガーされます。この変更は、以下のようなアクションによって引き起こされます:</p>
<ul>
<li class=""><strong><a class="" href=/docs/ja/ORDA/ordaClasses#local%E9%96%A2%E6%95%B0><code>local</code> キーワード</a> を使用したクライアント/サーバー</strong> あるいは <strong>シングルユーザーモードの4D</strong>:
<ul>
<li class="">ユーザーが4D フォーム上で値を設定した</li>
<li class="">4D コードが <code>:=</code> 演算子によって代入を行った。 このイベントは自己代入の場合にもトリガーされます(<code>$entity.attribute:=$entity.attribute</code>)。</li>
</ul>
</li>
<li class=""><strong><code>local</code> キーワード を使用しないクライアント/サーバー</strong>: <code>:=</code> 演算子によって代入を行う一部の4D コードは、<a class="" href=/docs/ja/commands/execute-on-server>サーバー上で実行されます</a>。</li>
<li class=""><strong><code>local</code> キーワードを使用しないクライアント/サーバー</strong>、<strong><a href=https://developer.4d.com/qodly target=_blank rel="noopener noreferrer" class="">Qodly アプリケーション</a></strong> および <strong><a class="" href=/docs/ja/commands/open-datastore>リモートデータストア</a></strong>: ORDA 関数(エンティティ上の関数あるいはエンティティを引数として使用する関数)を呼び出した場合にはエンティティは4D Server 受信されます。 これはつまり、リモートアプリケーション側に<em>refresh</em> あるいは <em>preview</em> 関数を実装することでORDA リクエストをサーバーに送信し、イベントをトリガーするようにする必要があるかもしれない、ということです。</li>
<li class="">REST サーバー: 値は REST サーバーに、<a class="" href=/docs/ja/REST/method#methodupdate>REST リクエスト</a> (<code>$method=update</code>) とともに受信されます。</li>
</ul>
<p>関数は <a href=#event-%E5%BC%95%E6%95%B0 class=""><em>event</em> オブジェクト</a> を引数として受け取ります。</p>
<p>この関数がエラーを<a class="" href=/docs/ja/commands/throw>throw</a> する場合でも、進行中のアクションは停止しません。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>注</div><div class=admonitionContent_BuS1><p>このイベントは以下の場合にもトリガーされます:<ul>
<li class="">属性の値が <a class="" href=/docs/ja/ORDA/ordaClasses#class-constructor-1><code>constructor()</code></a> イベントによって代入された場合</li>
<li class="">属性の値が <a class="" href=/docs/ja/Admin/dataExplorer>データエクスプローラー</a> を通して編集された場合。</li>
</ul></div></div>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-1>例題 1<a href=#例題-1 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<p>エンティティが更新されたときに、エンティティ内のテキスト属性を全て大文字に変換したい場合を考えます。</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">    //ProductsEntity class</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event touched($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	If (Value type(This[$event.attributeName])=Is text)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">		This[$event.attributeName]:=Uppercase(This[$event.attributeName])</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	End if </span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-2>例題 2<a href=#例題-2 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<p>"touched" イベントは、<a class="" href=/docs/ja/ORDA/ordaClasses#%E8%A8%88%E7%AE%97%E5%B1%9E%E6%80%A7>計算属性</a>に対して<a class="" href=/docs/ja/ORDA/ordaClasses#function-query-attributename><code>Function query()</code></a> 内でインデックスクエリコードを書くことが不可能な場合にとても有用です。</p>
<p>これは例えば、<a class="" href=/docs/ja/ORDA/ordaClasses#function-query-attributename><code>query</code></a> 関数が同じエンティティの異なる属性の値どうしを比較したいような場合です。 これは返されたORDA クエリ内でフォーミュラを使う必要があり、結果としてシーケンシャルクエリをトリガーすることになります。</p>
<p>このような場合を完全に理解するために、以下の2つの計算属性について調べてみましょう:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function get onGoing() : Boolean</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        return ((This.departureDate&lt;=Current date) & (This.arrivalDate>=Current date))</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function get sameDay() : Boolean</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        return (This.departureDate=This.arrivalDate)</span><br/></span></code></pre></div></div>
<p>たとえ非常に似ていたとしても、これらのクエリは同じ型の値を比較している訳ではないため、これらの関数を同一のクエリと関連づけることはできません。 前者は属性を与えられた値と比較する一方、後者は属性どうしを比較します。</p>
<ul>
<li class=""><em>onGoing</em> 属性に対しては、<a class="" href=/docs/ja/ORDA/ordaClasses#function-query-attributename><code>query</code></a> 関数をシンプルに書くことができ、またインデックス付きの属性を使用します:</li>
</ul>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function query onGoing($event : Object) : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    var $operator : Text</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    var $myQuery : Text</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    var $onGoingValue : Boolean</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    var $parameters : Collection</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    $parameters:=New collection()</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    $operator:=$event.operator</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Case of </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            : (($operator="=") | ($operator="==") | ($operator="==="))</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">                $onGoingValue:=Bool($event.value)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            : (($operator="!=") | ($operator="!=="))</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">                $onGoingValue:=Not(Bool($event.value))</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            Else </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">                return {query: ""; parameters: $parameters}</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    End case </span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    $myQuery:=($onGoingValue) ? "departureDate &lt;= :1 AND arrivalDate >= :1" : "departureDate > :1 OR arrivalDate &lt; :1"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        // ORDA クエリ文字列はインデックス付き属性を使用するので、インデックスがつけられます</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    $parameters.push(Current date)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    return {query: $myQuery; parameters: $parameters}</span><br/></span></code></pre></div></div>
<ul>
<li class=""><em>sameDay</em> 属性に対しては、<a class="" href=/docs/ja/ORDA/ordaClasses#function-query-attributename><code>query</code></a> 関数はフォーミュラに基づいたORDA クエリを必要とするため、検索はシーケンシャルに行われます:</li>
</ul>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function query sameDay($event : Object) : Text</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    var $operator : Text</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    var $sameDayValue : Boolean</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    $operator:=$event.operator</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Case of </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        : (($operator="=") | ($operator="==") | ($operator="==="))</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            $sameDayValue:=Bool($event.value)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        : (($operator="!=") | ($operator="!=="))</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            $sameDayValue:=Not(Bool($event.value))</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        Else </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            return ""</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        End case </span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    return ($sameDayValue) ? "eval(This.departureDate = This.arrivalDate)" : "eval(This.departureDate != This.arrivalDate)"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        // ORDA クエリ文字列はフォーミュラを使用するため、インデックスはつけられません</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span></code></pre></div></div>
<ul>
<li class="">しかし他の属性が"タッチ"されたときに更新される<strong>スカラー値の</strong> <em>sameDay</em> 属性を使用することで、時間を節約することができます:</li>
</ul>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">    //BookingEntity class</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event touched departureDate($event : Object) </span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    This.sameDay:=(This.departureDate = This.arrivalDate) </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">//</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">//</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event touched arrivalDate($event : Object) </span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    This.sameDay:=(This.departureDate = This.arrivalDate)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-3-図-local-キーワードを用いたクライアントサーバー>例題 3 (図): <code>local</code> キーワードを用いたクライアント/サーバー:<a href=#例題-3-図-local-キーワードを用いたクライアントサーバー class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<!-- -->
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-4-図-local-キーワードを用いないクライアントサーバー>例題 4 (図): <code>local</code> キーワードを用いないクライアント/サーバー<a href=#例題-4-図-local-キーワードを用いないクライアントサーバー class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<!-- -->
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-5-図-qodly-アプリケーション>例題 5 (図): Qodly アプリケーション<a href=#例題-5-図-qodly-アプリケーション class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<!-- -->
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=function-event-validatesave><code>Function event validateSave</code><a href=#function-event-validatesave class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=シンタックス-1>シンタックス<a href=#シンタックス-1 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function event validateSave($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event validateSave &lt;attributeName>($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// コード</span><br/></span></code></pre></div></div>
<p>このイベントは、エンティティが保存されようとするたびに毎回トリガーされます。</p>
<ul>
<li class="">関数をエンティティレベルで定義していた場合(第一シンタックス)、その関数はエンティティの任意の属性に対して呼び出されます。</li>
<li class="">関数を属性レベルで定義していた場合(第二シンタックス)、関数はその属性に対してのみ呼び出されます。 この関数は、エンティティ内の指定した属性がタッチされていない場合には、実行<strong>されません</strong>。</li>
</ul>
<p>関数は <a href=#event-%E5%BC%95%E6%95%B0 class=""><em>event</em> オブジェクト</a> を引数として受け取ります。</p>
<p>このイベントは、以下の関数によってトリガーされます:</p>
<ul>
<li class=""><a class="" href=/docs/ja/API/EntityClass#save><code>entity.save()</code></a></li>
<li class=""><a class="" href=/docs/ja/API/DataClassClass#fromcollection><code>dataClass.fromCollection()</code></a></li>
</ul>
<p>このイベントは、エンティティが実際に保存される <strong>前に</strong> トリガーされるため、データの一貫性をチェックし、必要であればアクションを停止することができます。 例えば、このイベントを使用して、 "出発日" &lt; "到着日" であることをチェックすることができます。</p>
<p>アクションを停止するためには、関数のコードで<a href=#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88 class="">エラーオブジェクト</a> を返す必要があります。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>注</div><div class=admonitionContent_BuS1><p>この関数内において(<code>This</code> を使用して)エンティティを更新することは推奨されません。</div></div>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題>例題<a href=#例題 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<p>この例では、マージンが50% 未満の製品を保存することは許可されていません。 無効な price 属性の場合、エラーオブジェクトを換えし、保存アクションを停止します。</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">// ProductsEntity class</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">//</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// 属性レベルの validateSave イベント</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event validateSave margin($event : Object) : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">var $result : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// ユーザーは margin が50% 未満の製品を作成することはできません</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">If (This.margin&lt;50)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	$result:={errCode: 1; message: "製品の検証に失敗しました"; \</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	extraDescription: {info: "この製品のマージンの ("+String(This.margin)+") が 50%" 未満になっています}; seriousError: False}</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">End if </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">return $result</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=function-event-saving><code>Function event saving</code><a href=#function-event-saving class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=シンタックス-2>シンタックス<a href=#シンタックス-2 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function event saving($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event saving &lt;attributeName>($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// コード</span><br/></span></code></pre></div></div>
<p>このイベントはエンティティが保存されるたびにトリガーされます。</p>
<ul>
<li class="">関数をエンティティレベルで定義していた場合(第一シンタックス)、その関数はエンティティの任意の属性に対して呼び出されます。 この関数はエンティティ内でどの属性もタッチされていない場合でも実行されます(例: 保存されるたびに外部アプリへとデータを送信する場合など)。</li>
<li class="">関数を属性レベルで定義していた場合(第二シンタックス)、関数はその属性に対してのみ呼び出されます。 この関数は、エンティティ内の指定した属性がタッチされていない場合には、実行<strong>されません</strong>。</li>
</ul>
<p>関数は <a href=#event-%E5%BC%95%E6%95%B0 class=""><em>event</em> オブジェクト</a> を引数として受け取ります。</p>
<p>このイベントは、以下の関数によってトリガーされます:</p>
<ul>
<li class=""><a class="" href=/docs/ja/API/EntityClass#save><code>entity.save()</code></a></li>
<li class=""><a class="" href=/docs/ja/API/DataClassClass#fromcollection><code>dataClass.fromCollection()</code></a></li>
</ul>
<p>このイベントはエンティティが実際に保存されている<strong>最中に</strong>トリガーされます。 <a href=#function-event-validatesave class=""><code>validateSave()</code></a> イベント関数が定義されていると場合、 <code>saving()</code> イベント関数は、 <code>validateSave()</code>がエラーを何もトリガーしなかった場合に呼び出されます。 例えば、このイベントを使用して、Google Drive アカウントにドキュメントを作成することができます。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>注</div><div class=admonitionContent_BuS1><p>このビジネスロジックは <code>validateSave()</code> イベントで検知できないエラーを生成する必要があります(例: ネットワークエラー)</div></div>
<p>保存アクション中、4D エンジンのエラー(インデックスやスタンプが変更された、ディスク上に十分なスペースがありません、など)が生成されることがあります。</p>
<p>アクションを停止するためには、関数のコードで<a href=#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88 class="">エラーオブジェクト</a> を返す必要があります。</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-3>例題<a href=#例題-3 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<p>ファイルがディスク上に保存されると、例えばディスクの要領に関連したエラーをキャッチします。</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">// ProductsEntity class</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// 属性レベルでの保存イベント</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event saving userManualPath($event : Object) : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">var $result : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">var $userManualFile : 4D.File</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">var $fileCreated : Boolean</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">If (This.userManualPath#"")</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	$userManualFile:=File(This.userManualPath)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">				</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	// ユーザーマニュアルドキュメントファイルがディスク上に作成されます</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	// これはディスク上に空き容量がない場合には失敗する可能性があります</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	Try</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        // ファイルのコンテンツは事前に生成され Storage.docMap に保存されています</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	    $docInfo:=Storage.docMap.query("name = :1"; This.name).first()</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        $userManualFile.setContent($docInfo.content)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	Catch</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">		// 例えばディスク上に要領が空いてない場合</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">		$result:={/</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            errCode: 1; message: "この製品の保存アクション中にエラー発生"; /</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">            extraDescription: {info: "このディスク上にはユーザーマニュアルを保存するスペースがありません"}/</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        }</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	End try</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">End if </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">return $result</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>注</div><div class=admonitionContent_BuS1><p>この例ではファイルの中身は <code>saving</code> イベントの外で生成されています。時間がかなりかかる可能性があるからです。</div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=function-event-aftersave><code>Function event afterSave</code><a href=#function-event-aftersave class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=シンタックス-3>シンタックス<a href=#シンタックス-3 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function event afterSave($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// コード</span><br/></span></code></pre></div></div>
<p>このイベントは、少なくとも一つの属性が編集されていたエンティティがデータファイルに保存された直後にトリガーされます。 エンティティ内でどの属性もタッチされていない場合には、これは実行されません。</p>
<p>このイベントは、データを保存した後に、アプリケーション外に保存アクションを電波させたい場合や、管理タスクを実行したりするのに有用です。 例えばこれを使用して、データが保存された後に確認メールを送信することができます。 あるいは、データ保存中にエラーが発生した場合、これを使用してロールバックを行い、データの一貫性を復元することもできます。</p>
<p>関数は <a href=#event-%E5%BC%95%E6%95%B0 class=""><em>event</em> オブジェクト</a> を引数として受け取ります。</p>
<ul>
<li class="">無限ループに陥るのを避けるため、この関数内でカレントのエンティティ上で(<code>This</code> を通して) <a class="" href=/docs/ja/API/EntityClass#save><code>save()</code></a> を呼び出すのは<strong>許可されていません</strong>。 これはエラーを発生させます。</li>
<li class="">この関数では<a href=#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88 class="">エラーオブジェクト</a> をスローすることは<strong>サポートされていません</strong>。</li>
</ul>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-4>例題<a href=#例題-4 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<p>上記の保存イベント中にエラーが発生した場合、属性値は <code>afterSave</code> イベントでリセットされます:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">// ProductsEntity class</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event afterSave($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">If (($event.status.success=False) && ($event.status.errors=Null))  </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    // エラーがvalidateSave イベントから来た場合には$event.status.errors に値が入れられます</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">		</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	// userManualPath 属性は適切には保存されていません</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	// その値はリセットされます</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	If ($event.savedAttributes.indexOf("userManualPath")=-1)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">		This.userManualPath:=""</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">		This.status:="KO"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">	End if </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">		</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">End if </span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=function-event-validatedrop><code>Function event validateDrop</code><a href=#function-event-validatedrop class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=シンタックス-4>シンタックス<a href=#シンタックス-4 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function event validateDrop($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event validateDrop &lt;attributeName>($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// コード</span><br/></span></code></pre></div></div>
<p>このイベントはエンティティがドロップ(削除)されようとするたびに毎回トリガーされます。</p>
<ul>
<li class="">関数をエンティティレベルで定義していた場合(第一シンタックス)、その関数はエンティティの任意の属性に対して呼び出されます。</li>
<li class="">関数を属性レベルで定義していた場合(第二シンタックス)、関数はその属性に対してのみ呼び出されます。</li>
</ul>
<p>関数は <a href=#event-%E5%BC%95%E6%95%B0 class=""><em>event</em> オブジェクト</a> を引数として受け取ります。</p>
<p>このイベントは以下の機能によってトリガーされます:</p>
<ul>
<li class=""><a class="" href=/docs/ja/API/EntityClass#drop><code>entity.drop()</code></a></li>
<li class=""><a class="" href=/docs/ja/API/DataClassClass#fromcollection><code>entitySelection.drop()</code></a></li>
<li class="">データベースストラクチャーレベルで定義されている可能性のある<a href=https://doc.4d.com/4Dv20/4D/20.2/Relation-properties.300-6750290.ja.html#107320 target=_blank rel="noopener noreferrer" class="">削除制御</a>。</li>
</ul>
<p>このイベントはエンティティが実際にドロップされる<strong>前に</strong>トリガーされるため、データの一貫性をチェックし、必要であればドロップアクションを停止することができます。</p>
<p>アクションを停止するためには、関数のコードで<a href=#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88 class="">エラーオブジェクト</a> を返す必要があります。</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-5>例題<a href=#例題-5 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<p>この例では、"TO DELETE" とラベルのついていない製品をドロップすることはできません。 この場合、エラーオブジェクトを返すことで、ドロップアクションを停止することができます。</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">// ProductsEntity class</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event validateDrop status($event : Object) : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">var $result : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// ドロップするためには、製品は TO DELETE と記録されている必要があります</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">If (This.status#"TO DELETE")</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    $result:={errCode: 1; message: "この製品は削除できません"; \</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    extraDescription: {info: "この製品はTo Delete と記録されていなければなりません"}; seriousError: False}</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">End if </span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">return $result</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=function-event-dropping><code>Function event dropping</code><a href=#function-event-dropping class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=シンタックス-5>シンタックス<a href=#シンタックス-5 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function event dropping($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event dropping &lt;attributeName>($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// コード</span><br/></span></code></pre></div></div>
<p>このイベントはエンティティがドロップ(削除)されるたびにトリガーされます。</p>
<ul>
<li class="">関数をエンティティレベルで定義していた場合(第一シンタックス)、その関数はエンティティの任意の属性に対して呼び出されます。</li>
<li class="">関数を属性レベルで定義していた場合(第二シンタックス)、関数はその属性に対してのみ呼び出されます。</li>
</ul>
<p>関数は <a href=#event-%E5%BC%95%E6%95%B0 class=""><em>event</em> オブジェクト</a> を引数として受け取ります。</p>
<p>このイベントは以下の機能によってトリガーされます:</p>
<ul>
<li class=""><a class="" href=/docs/ja/API/EntityClass#drop><code>entity.drop()</code></a></li>
<li class=""><a class="" href=/docs/ja/API/DataClassClass#fromcollection><code>entitySelection.drop()</code></a></li>
<li class="">データベースストラクチャーレベルで定義されている可能性のある<a href=https://doc.4d.com/4Dv20/4D/20.2/Relation-properties.300-6750290.ja.html#107320 target=_blank rel="noopener noreferrer" class="">削除制御</a>。</li>
</ul>
<p>このイベントはエンティティが実際にドロップされている<strong>最中に</strong>トリガーされます。 <a href=#function-event-validatedrop class=""><code>validateDrop()</code></a> イベント関数が定義されている場合、 <code>dropping()</code> イベント関数は、 <code>validateDrop()</code> がエラーを何もトリガーしなかった場合に呼び出されます。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>注</div><div class=admonitionContent_BuS1><p>このビジネスロジックは <code>validateDrop()</code> イベントで検知できないエラーを生成する必要があります(例: ネットワークエラー)。</div></div>
<p>アクションを停止するためには、関数のコードで<a href=#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88 class="">エラーオブジェクト</a> を返す必要があります。</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-6>例題<a href=#例題-6 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<p>これはエンティティレベルでの <code>dropping</code> イベントの一例です:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">// ProductsEntity class</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Function event dropping($event : Object) : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">var $result : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">var $userManualFile : 4D.File</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">$userManualFile:=File(This.userManualPath)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    // 製品をドロップする場合、そのユーザーマニュアルもディスク上から削除されます</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    // このアクションは失敗する可能性があります</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Try</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    If ($userManualFile.exists)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        $userManualFile.delete()</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    End if </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">Catch</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    // ユーザーマニュアルのドロップに失敗した場合</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    $result:={errCode: 1; message: "Drop failed"; extraDescription: {info: "The user manual can't be dropped"}}</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">End try</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">return $result</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=function-event-afterdrop><code>Function event afterDrop</code><a href=#function-event-afterdrop class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=シンタックス-6>シンタックス<a href=#シンタックス-6 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function event afterDrop($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">// コード</span><br/></span></code></pre></div></div>
<p>このイベントはエンティティがドロップ(削除)された直後にトリガーされます。</p>
<p>このイベントは、データをドロップした後に、アプリケーション外にドロップアクションを伝播させたい場合や、管理タスクを実行したりするのに有用です。 例えばこれを使用して、データがドロップされたあとにキャンセルメールを送信することができます。 あるいは、データのドロップ中にエラーが発生した場合、あとで管理者がデータの一貫性をチェックできるように情報を記録することができます。</p>
<p>関数は <a href=#event-%E5%BC%95%E6%95%B0 class=""><em>event</em> オブジェクト</a> を引数として受け取ります。</p>
<ul>
<li class="">無限ループに陥るのを避けるため、この関数内でカレントのエンティティ上で(<code>This</code> を通して) <a class="" href=/docs/ja/API/EntityClass#drop><code>drop()</code></a> を呼び出すのは<strong>許可されていません</strong>。 これはエラーを発生させます。</li>
<li class="">この関数では<a href=#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88 class="">エラーオブジェクト</a> をスローすることは<strong>サポートされていません</strong>。</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>注</div><div class=admonitionContent_BuS1><p>ドロップされたエンティティは <code>This</code> を通して参照され、メモリー内に引き続き存在します。</div></div>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id=例題-7>例題<a href=#例題-7 class=hash-link aria-label=見出しへの直接リンク title=見出しへの直接リンク translate=no>​</a></h4>
<p>ドロップアクションが失敗した場合、製品は手動でチェックされる必要があります:</p>
<div class="language-4d codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-4d codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Function event afterDrop($event : Object)</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">var $status : Object</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">If (($event.status.success=False) && ($event.status.errors=Null)) </span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        //$event.status.errors には、</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">        //エラーが validateDrop イベントから来た場合には値が入れられます</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    This.status:="Check this product - Drop action failed"</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    $status:=This.save()</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">End if </span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/4d/docs/issues/new?title=Comment%20on%20ORDA%2Forda-events.md%20(21)&body=Please%20enter%20your%20comment%3A" target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>このページへコメントする</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label=ドキュメントのナビゲーション><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/ja/ORDA/entities><div class=pagination-nav__sublabel>前へ</div><div class=pagination-nav__label>データ操作</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/ja/ORDA/global-stamp><div class=pagination-nav__sublabel>次へ</div><div class=pagination-nav__label>グローバルスタンプの使い方</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#概要 class="table-of-contents__link toc-highlight">概要</a><ul><li><a href=#イベントレベル class="table-of-contents__link toc-highlight">イベントレベル</a><li><a href=#リモート構成における実行 class="table-of-contents__link toc-highlight">リモート構成における実行</a><li><a href=#概要表 class="table-of-contents__link toc-highlight">概要表</a></ul><li><a href=#event-引数 class="table-of-contents__link toc-highlight"><em>event</em> 引数</a><li><a href=#エラーオブジェクト class="table-of-contents__link toc-highlight">エラーオブジェクト</a><ul><li><a href=#エラーオブジェクトのプロパティ class="table-of-contents__link toc-highlight">エラーオブジェクトのプロパティ</a></ul><li><a href=#イベント関数の詳細 class="table-of-contents__link toc-highlight">イベント関数の詳細</a><ul><li><a href=#function-event-touched class="table-of-contents__link toc-highlight"><code>Function event touched</code></a><li><a href=#function-event-validatesave class="table-of-contents__link toc-highlight"><code>Function event validateSave</code></a><li><a href=#function-event-saving class="table-of-contents__link toc-highlight"><code>Function event saving</code></a><li><a href=#function-event-aftersave class="table-of-contents__link toc-highlight"><code>Function event afterSave</code></a><li><a href=#function-event-validatedrop class="table-of-contents__link toc-highlight"><code>Function event validateDrop</code></a><li><a href=#function-event-dropping class="table-of-contents__link toc-highlight"><code>Function event dropping</code></a><li><a href=#function-event-afterdrop class="table-of-contents__link toc-highlight"><code>Function event afterDrop</code></a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>コミュニティ</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://blog.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Blog</a><li class=footer__item><a href=https://discuss.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Forum</a><li class=footer__item><a href=https://facebook.com/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook</a><li class=footer__item><a href=https://x.com/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>X</a><li class=footer__item><a href=https://youtube.com/user/4Dsoftware target=_blank rel="noopener noreferrer" class=footer__link-item>Youtube</a><li class=footer__item><a href=https://github.com/4D target=_blank rel="noopener noreferrer" class=footer__link-item>Github</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>サポート</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/4d/docs/releases/tag/latest target=_blank rel="noopener noreferrer" class=footer__link-item>Documentation download<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://doc.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>4D Doc Center (旧ドキュメント)</a><li class=footer__item><a href=https://kb.4d.com target=_blank rel="noopener noreferrer" class=footer__link-item>ナレッジベース</a><li class=footer__item><a href=https://us.4d.com/product-download/Feature-Release target=_blank rel="noopener noreferrer" class=footer__link-item>ダウンロード</a><li class=footer__item><a href=https://us.4d.com/resources target=_blank rel="noopener noreferrer" class=footer__link-item>Resources</a><li class=footer__item><a href=https://us.4d.com/4d-technical-support target=_blank rel="noopener noreferrer" class=footer__link-item>サポートを受ける</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>会社概要</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://us.4d.com/about-us target=_blank rel="noopener noreferrer" class=footer__link-item>4D社について</a><li class=footer__item><a href=https://us.4d.com/contact-us target=_blank rel="noopener noreferrer" class=footer__link-item>コンタクト</a><li class=footer__item><a href=https://us.4d.com/4d-around-the-world target=_blank rel="noopener noreferrer" class=footer__link-item>世界中の4D</a><li class=footer__item><a href=https://us.4d.com/Careers target=_blank rel="noopener noreferrer" class=footer__link-item>Careers</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>© 2025 4D SAS - All rights reserved</div></div></div></footer></div></body>