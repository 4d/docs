---
id: monitored-activity
title: Monitored activity
slug: /commands/monitored-activity
displayed_sidebar: docs
---

<!--REF #_command_.Monitored activity.Syntax-->**Monitored activity**  : Collection<!-- END REF-->
<!--REF #_command_.Monitored activity.Params-->
| Parámetro | Tipo |  | Descripción |
| --- | --- | --- | --- |
| Resultado | Collection | &#8592; | Colección de actividades monitoreadas |

<!-- END REF-->

#### Descripción 

<!--REF #_command_.Monitored activity.Summary-->El comando **Monitored activity** devuelve una colección de objetos que describen operaciones registradas de acuerdo con las especificaciones definidas por el comando [START MONITORING ACTIVITY](start-monitoring-activity.md).<!-- END REF--> Se puede llamar y ejecutar en 4D remoto, 4D Server y aplicaciones 4D autónomas (si *fuente* no proviene de la actividad de red).

Los objetos en la colección devuelta tienen las siguientes propiedades:

| **Propiedad**    | **Tipo <br/>** | **Descripción <br/>**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ---------------- | ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| activityKind     | Entero largo           | El tipo de actividad registrada:<br/><br/> <table> <thead> <tr> <td>Constante</td> <td>Valor</td> <td>Comentario</td> </tr> </thead> <tbody> <tr> <td>Activity language</td> <td>1</td> <td>Operaciones de ejecución del lenguaje</td> </tr><tr> <td>Activity network</td> <td>2</td> <td>Operaciones de peticiones de red</td> </tr><tr> <td>Activity operations</td> <td>4</td> <td>Operaciones de datos 4D</td> </tr> </tbody> </table> |
| activityDuration | Real                   | La duración de la actividad expresada en segundos                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| activityData     | Objeto                 | Objeto(s) que contiene(n) propiedades específicas dependiendo del tipo de actividad registrada (activityKind). En algunas circunstancias, se pueden devolver varios objetos para la misma operación. En este caso, los objetos tendrán el mismo UUID. Las propiedades adicionales en estos objetos se describen en las secciones a continuación.                                                                                                                                                                                                                                                                                                                                               |

##### activityKind = Activity language (1) 

**Nota:** el objeto *activityData* utiliza la información definida por el comando [SET DATABASE PARAMETER](set-database-parameter.md) para *4DDebugLog.txt (estándar)* (si corresponde), de lo contrario, utiliza un modo predeterminado. Iniciar la grabación del historial durante la ejecución del comando **Monitored activity** afectará los resultados devueltos.

objeto *activityData*:

| **P** **ropiedad <br/>** | **Tipo <br/>** | **Descripción <br/>**                                                                                                                               |
| -------------------------------- | ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| sequenceNumber                   | entero largo           | Número de operación único y secuencial en la sesión de historial.                                                                                           |
| elapsedTime                      | entero largo           | Tiempo transcurrido desde que se inició el historial de depuración (expresado en milisegundos)                                                              |
| processID                        | entero largo           | ID de proceso                                                                                                                                               |
| uniqueProcessID                  | entero largo           | ID de proceso único                                                                                                                                         |
| stackLevel                       | entero largo           | Nivel de pila                                                                                                                                               |
| duration                         | entero largo           | Duración de la operación (expresada en microsegundos)                                                                                                       |
| kind                             | texto                  | Tipo de operación registrada. Valores posibles: "command" "method" "Message" "pluginMessage" "pluginCommand" "pluginCallback" "pluginEvent" "task" "member" |

###### Propiedades adicionales 

Las siguientes propiedades adicionales se devuelven en el objeto *activityData* según el tipo de operación:

| **Propiedad <br/>** | **Tipo <br/>** | **Tipo<br/>**                                                                                                                | **Descripción**                                                                                                                                                                                                                                            |
| --------------------------- | ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| commandName                 | texto                  | comando                                                                                                                              | Nombre del comando                                                                                                                                                                                                                                         |
| commandNumber               | entero largo           | comando                                                                                                                              | Número del comando                                                                                                                                                                                                                                         |
| connectionUUID              | texto                  | tarea                                                                                                                                | Máquina cliente UUID                                                                                                                                                                                                                                       |
| formEvent                   | texto                  | comando                                                                                                                              | Nombre del evento de formulario                                                                                                                                                                                                                            |
| formMethod                  | texto                  | comando                                                                                                                              | Método de formulario                                                                                                                                                                                                                                       |
| functionName                | texto                  | miembro                                                                                                                              | Nombre del método del miembro ORDA                                                                                                                                                                                                                         |
| memberMethod                | texto                  | comando                                                                                                                              | Cadena localizada del método miembro para la llamada al objeto 4D                                                                                                                                                                                          |
| method                      | texto                  | comando                                                                                                                              | Nombres localizados de comandos y funciones 4D                                                                                                                                                                                                             |
| parameters                  | texto                  | comando<br/>member<br/>message<br/>method<br/>pluginCommand<br/>pluginEvent<br/>task | Parámetros pasados ​​en la operación                                                                                                                                                                                                                       |
| pluginCommandName           | texto                  | pluginCommand<br/>pluginEvent                                                                                                | Nombre del comando del plug-in                                                                                                                                                                                                                             |
| pluginCommandNumber         | entero largo           | pluginCommand<br/>pluginEvent<br/>pluginMessage                                                                      | Número del comando del plug-in                                                                                                                                                                                                                             |
| pluginExternalCall          | entero largo           | pluginCallback                                                                                                                       | Llamada de punto de entrada Plug-in SDK                                                                                                                                                                                                                    |
| pluginMessageName           | texto                  | pluginMessage                                                                                                                        | Valores posibles: PackMsgServerDeInit PackMsgServerDisposeData PackMsgServerWriteData PackMsgServerReadData PackMsgServerKillClient PackMsgServerNewClient PackMsgServerInit PackMsgProcessDeInit PackMsgProcessInit PackMsgClientDeInit PackMsgClientInit |
| pluginName                  | texto                  | pluginCallback<br/>pluginCommand<br/>pluginEvent<br/>pluginMessage                                           | Nombre del plug-in                                                                                                                                                                                                                                         |

##### activityKind = Activity network (2) 

**Notas:** 

* si los historiales de depuración se han detenido en el servidor 4D [GRAPH SETTINGS](graph-settings.md), **Monitored activity** no devolverá nada. Si los historiales se reinician en el servidor o mediante el comando [START MONITORING ACTIVITY](start-monitoring-activity.md) con Activity network, **Monitored activity** reanudará la información de actividad de red.
* el objeto *activityData* utiliza la información definida por el comando [SET DATABASE PARAMETER](set-database-parameter.md) para el *4DRequestsLog.txt* (si corresponde), de lo contrario, utiliza un modo predeterminado . Iniciar la grabación del historial durante la ejecución del comando **Monitored activity** impactará los resultados devueltos.

objeto *activityData*:

| **P** **ropiedad <br/>** | **Tipo <br/>** | **Descripción<br/>**                                                                                                                                                                                                                                                                                                                                 |
| -------------------------------- | ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| sequenceNumber                   | entero largo           | Número de operación único y secuencial en la sesión de historial                                                                                                                                                                                                                                                                                             |
| time                             | texto                  | Fecha y hora en formato ISO 8601 ("AAAA-MM-DDTHH:MM:SS.sss")                                                                                                                                                                                                                                                                                                 |
| systemID                         | texto                  | ID del sistema                                                                                                                                                                                                                                                                                                                                               |
| component                        | texto                  | Firma del componente (p. ej., 4SQLS o dbmg)                                                                                                                                                                                                                                                                                                                  |
| processInfoIndex                 | entero largo           | Corresponde al campo "index" en historial *4DRequestsLog\_ProcessInfo.txt*, y permite vincular una solicitud a un proceso                                                                                                                                                                                                                                    |
| request                          | entero largo           | ID de solicitud para mensajes c/s, peticiones SQL o mensajes [LOG EVENT](log-event.md)                                                                                                                                                                                                                                                                       |
| bytesIn                          | entero largo           | Número de bytes recibidos                                                                                                                                                                                                                                                                                                                                    |
| bytesOut                         | entero largo           | Número de bytes enviados                                                                                                                                                                                                                                                                                                                                     |
| execDuration                     | entero largo           | Dependiendo de dónde se genere:server\_duration . <br/>OR,exec\_duration cuando se genera en el servidor --tiempo que tarda en microsegundos para que el servidor procese la solicitud. <br/><br/><br/><br/>                                                                                                         |
| writeDuration                    | entero largo           | Tiempo empleado en microsegundos para enviar:Request (cuando se ejecuta en el cliente).Response (cuando se ejecuta en el servidor).                                                                                                                                                                                                                          |
| serverDuration                   | entero largo           | Tiempo en microsegundos para la comunicación cliente/servidor                                                                                                                                                                                                                                                                                                |
| taskKind                         | texto                  | Apropiativo o cooperativo (respectivamente 'p' o 'c')                                                                                                                                                                                                                                                                                                        |
| rtt                              | entero largo           | Tiempo estimado en microsegundos para que el cliente envíe la solicitud y el servidor la confirme. Solo se mide cuando se utiliza la capa de red ServerNet, devuelve 0 cuando se utiliza con la capa de red heredada.Para versiones de Windows anteriores a Windows 10 o Windows Server 2016, la llamada devolverá 0.<br/><br/><br/> |

##### activityKind = Activity operations (4) 

**Nota:** el objeto *activityData* es similar al que devuelve el comando [ACTIVITY SNAPSHOT](activity-snapshot.md), excepto que solo se devuelven las operaciones de umbral y finalizadas.

objeto *activityData*:

| **Propiedad**          |              | **Tipo <br/>**                                                                                                                                                                       | **Descripción <br/>**                                                                                                                                                    |
| ---------------------- | ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| message                |              | texto                                                                                                                                                                                        | Descripción de la operación                                                                                                                                                      |
| maxValue               |              | entero largo                                                                                                                                                                                 | Número máximo de iteraciones para la operación (valor=-1 para operaciones no iterativas)                                                                                         |
| remote                 |              | booleano                                                                                                                                                                                     | Operación cliente/ servidor. Valores posibles: true, false                                                                                                                       |
| uuid                   |              | texto                                                                                                                                                                                        | UUID de la operación                                                                                                                                                             |
| taskId                 |              | entero largo                                                                                                                                                                                 | Identificador interno 4D para el proceso de origen                                                                                                                               |
| startTime              |              | texto                                                                                                                                                                                        | Hora de inicio de la operación en formato ISO 8601 ("AAAA-MM-DDTHH:MM:SS.sss")                                                                                                   |
| duration               |              | entero largo                                                                                                                                                                                 | Tiempo total (expresado en milisegundos) de ejecución de la operación                                                                                                            |
| title                  |              | texto                                                                                                                                                                                        | Información adicional sobre la operación                                                                                                                                         |
| extraInfo              |              | objeto                                                                                                                                                                                       | Información SQL adicional (si la hay):<br/><br/> extraInfo.SQL\_Query (text): la consulta SQL extraInfo.SQL\_User (text): usuario autenticado en el servidor SQL |
| dbContextInfo          |              | objeto                                                                                                                                                                                       | Información de contexto de la operación                                                                                                                                          |
| |  host\_name          | texto        | Nombre del host que inició la operación                                                                                                                                                      |                                                                                                                                                                                  |
| |  user\_name          | texto        | Nombre del usuario 4D cuya sesión inició la operación                                                                                                                                        |                                                                                                                                                                                  |
| |  task\_name          | texto        | Nombre del proceso que inició la operación                                                                                                                                                   |                                                                                                                                                                                  |
| |  task\_id            | entero largo | ID del proceso que inició la operación                                                                                                                                                       |                                                                                                                                                                                  |
| |  client\_uid         | texto        | (solo operaciones c/s) UUID de la máquina cliente que inició la operación de la base de datos                                                                                                |                                                                                                                                                                                  |
| |  is\_remote\_context | entero largo | (solo operaciones c/s) Indica si la operación fue lanzada por el servidor mediante un procedimiento almacenado (valor=0) o por un cliente (valor=1)                                          |                                                                                                                                                                                  |
| |  user4d\_id          | entero largo | ID del usuario 4D en la máquina cliente                                                                                                                                                      |                                                                                                                                                                                  |
| |  user4d\_alias       | texto        | Alias ​​definido para el usuario 4D. Ver [SET USER ALIAS](set-user-alias.md)                                                                                                                 |                                                                                                                                                                                  |
| |  client\_version     | texto        | Valor de cadena codificado que expresa el número de versión del entorno 4D devuelto por el comando [Application version](application-version.md)                                             |                                                                                                                                                                                  |
| dbOperationDetails     |              | objeto                                                                                                                                                                                       | Información sobre llamadas de operación al motor de la base                                                                                                                      |
| |  table               | texto        | Nombre de la tabla en la operación                                                                                                                                                           |                                                                                                                                                                                  |
| |  field               | texto        | Nombre del campo de tabla en la operación                                                                                                                                                    |                                                                                                                                                                                  |
| |  queryPlan           | texto        | Plan de consulta para la operación                                                                                                                                                           |                                                                                                                                                                                  |
| |  operationType       | texto        | Tipo de operación                                                                                                                                                                            |                                                                                                                                                                                  |
| |  sortParameters      | colección    | Criterio de ordenación                                                                                                                                                                       |                                                                                                                                                                                  |
| subOperations          |              | colección                                                                                                                                                                                    | colección de objetos activytData que contienen información sobre operaciones subordinadas dentro de la operación actual.                                                         |
| |  \[ \].message       | texto        | Etiqueta de operaciones                                                                                                                                                                      |                                                                                                                                                                                  |
| |  \[ \].maxValue      | entero largo | Número máximo de iteraciones para la operación (valor = -1 para operaciones no iterativas)                                                                                                   |                                                                                                                                                                                  |
| |  \[ \].remote        | booleano     | Operación cliente / servidor (0=true, 1=false)                                                                                                                                               |                                                                                                                                                                                  |
| |  \[ \].uuid          | texto        | UUID de la operación                                                                                                                                                                         |                                                                                                                                                                                  |
| |  \[ \].taskId        | entero largo | Identificador 4D interno para el proceso de origen                                                                                                                                           |                                                                                                                                                                                  |
| |  \[ \].startTime     | texto        | Hora de inicio de la operación en formato ISO 8601 ("AAAA-MM-DDTHH:MM:SS.sss")                                                                                                               |                                                                                                                                                                                  |
| |  \[ \].duration      | entero largo | Tiempo total (expresado en milisegundos) de ejecución de la operación                                                                                                                        |                                                                                                                                                                                  |
| |  \[ \].title         | texto        | Información adicional sobre la operación                                                                                                                                                     |                                                                                                                                                                                  |
| |  \[ \].extraInfo     | objeto       | Información SQL adicional (si la hay):<br/><br/> \[ \].extraInfo.SQL\_Query (text): la consulta SQL \[ \].extraInfo.SQL\_User (text): usuario autenticado en el servidor SQL |                                                                                                                                                                                  |

#### Ejemplo 

Ver el ejemplo de **[START MONITORING ACTIVITY](start-monitoring-activity.md)**

#### Ver también 

[START MONITORING ACTIVITY](start-monitoring-activity.md)  
[STOP MONITORING ACTIVITY](stop-monitoring-activity.md)  

#### Propiedades

|  |  |
| --- | --- |
| Número de comando | 1713 |
| Hilo seguro | &check; |


