---
id: overview
title: Settings
---

ストラクチャー設定では、カレントプロジェクトがどのように機能するかを設定します。 これらのパラメーターは、各プロジェクトごとに異なる設定を保存できます。 設定内容には待ち受けポート、バックアップ設定、セキュリティオプション、Webパラメーターなどが含まれます。

![](../assets/en/settings/main.png)

:::info

4D は、4D IDE (統合開発環境) アプリケーションに適用される、**環境設定** と呼ばれるもうひとつの設定グループを提供します。 詳細は [環境設定](../Preferences/general.md) を参照ください。

:::

## ストラクチャー設定を開く

ストラクチャー設定ダイアログを開くには、以下のいずれかの手順をおこないます:

- **デザイン ＞ 設定...** メニューオプションを使用する
- 4Dツールバーの **設定** ボタンをクリックする
- 4D Server上では、**編集 ＞ 設定...** メニューオプションを使用する

[**ユーザー設定** モードが有効化されている](#user-settings) 場合には、**設定...** は **ストラクチャー設定** に名称変更され、次の 2つのメニューコマンドが追加されます:

- **ユーザー設定...** は外部のユーザーファイルに保存される設定へのアクセスを提供します。 これらの設定が変更されていると、ストラクチャー設定の代わりに使用されます。
- **データファイル用のユーザー設定...** はカレントデータファイルに紐づいた外部のユーザーファイルに保存される設定へのアクセスを提供します。 これらの設定が変更されていると、ユーザー設定やストラクチャー設定の代わりに使用されます。

### ロック情報

プロジェクトモードおよびクライアント/サーバーモードの両方において、以下のような場合にロックは起こりえます:

- *settings.4DSettings* ファイルが "読み取り専用" であるとき (プロジェクトモードのみ)。 この場合に設定を変更しようとすると、(それが可能である場合には) アンロックするためのアラートが表示されます。
- 2人以上のユーザーが同じ設定を同時に編集しようとしたとき。 最初のユーザーがウィンドウを閉じてロックを解除するまで、その設定は使用することができません。 (クライアント/サーバーモードのみ)

どちらのケースにおいても、設定は "読み取り専用" として開くことはできますが、ロックが解除されるまでは使用することができません。

## パラメーターのカスタマイズ

設定ダイアログボックスでは、変更された設定内容は **太字** で表示されます:

![](../assets/en/settings/customize-settings.png)

ダイアログボックスで直接変更されたか、変換されたプロジェクトの場合は以前変更された設定が、カスタマイズ箇所として扱われます。

パラメーターは手作業でデフォルト値に置き換えられたときにも太字で表示されます。 このように、カスタマイズされたパラメーターはすべて目視で識別することができます。

ほとんどの設定は即座に有効になります。 しかし、(起動時モードの設定など) いくつかはデータベースが再起動されたときに有効となります。 この場合、変更した設定が次回起動時から有効になることを知らせるダイアログボックスが表示されます。

### 設定のリセット

パラメーターをデフォルト値に戻し、カスタマイズされたことを示す太字スタイルを取り除くためには、**初期設定にリセット** をクリックします.

このボタンをクリックすると、現在表示されているページの全パラメーターがリセットされます。 現在のページで最低でも一つのパラメーターが変更されると、このボタンはアクティブになります。

## ユーザー設定

4Dでは、プロジェクトの設定について 2つの運用モードが提供されています:

- **Standard** mode: all settings are stored in the [*settings.4DSettings* file at the project level](../Project/architecture.md#sources) and are applied in all cases. これはデフォルトのモードで、開発段階 (すべてのアプリケーション) に適しています。

- **ユーザー設定** モード：カスタム設定の一部は、[Settingsフォルダー](../Project/architecture.md#settings-ユーザー) (すべてのデータファイル用)、または [Dataフォルダー](../Project/architecture.md#settings-ユーザーデータ) (特定のデータファイル用) に置かれた *settings.4DSettings* ファイルに保存され、ストラクチャー設定の代わりに使用されます。 このモードは、デスクトップアプリケーションの運用段階に適しています。 このモードは、設定の [セキュリティページ](./security.md) にあるオプションを使用して有効にします。

ユーザー設定を定義することで、4D アプリケーションを更新しても、カスタム設定を保持できるようになります。あるいは、異なる場所に展開する同じアプリケーションに対し、異なる設定を適用することが可能になります。 また、設定ファイルの内容は XML で記述されるため、プログラムによる設定の管理もできるようになります。

4D は 2種類のユーザー設定を生成し使用することができます:

- **ユーザー設定**: これらのユーザー設定は、アプリケーションでどのデータファイルを開いたかにかかわらず、ストラクチャー設定の代わりに使用されます。
- **データファイル用のユーザー設定**: これらのユーザー設定は、アプリケーションで使用される各データファイルに対してそれぞれ関連づけられており、たとえばサーバーキャッシュのポートID などを設定します。

このオプションを使用すると、それぞれが異なる設定を持つデータファイルを複数使用する同じデスクトップアプリケーションのコピーを複数配布したりアップデートしたりすることが容易になります。

以下の設定の場合を考えてみましょう。とあるアプリケーションが複製され、それぞれで異なる設定 (ポートID) を使用します。 このユーザー設定がデータファイルとリンクしていた場合、ポートID を手動で変えることななくアプリケーションをアップデートすることができます:

![](../assets/en/settings/user-settings-config.png)

### ユーザー設定の有効化

ユーザー設定を有効にするには、**設定** ＞ **セキュリティ** ＞ **外部ファイルのユーザー設定を有効にする** オプションを選択します:

![](../assets/en/settings/user-settings-enable.png)

このオプションをチェックすると、設定が 3つのダイアログに分けられます:

- **ストラクチャー設定**
- **ユーザー設定**
- **データファイル用のユーザー設定**

これらのダイアログボックスは、**デザイン** ＞ **設定** メニュー、あるいはツールバーの **設定** ボタンからアクセスできます:

![](../assets/en/settings/user-settings-dialog.png)

これらのダイアログボックスは、[OPEN SETTINGS WINDOW](../commands-legacy/open-settings-window.md) コマンドに適切な *settingsType* セレクターを渡して使用することでもアクセスできます。

ストラクチャー設定ダイアログボックスは、標準の設定ダイアログと同じで、そのすべてのプロパティにアクセスできます (これらの設定はユーザー設定によってオーバーライドできます)。

### ユーザー設定とデータファイル用のユーザー設定

**ユーザー設定** と **データファイル用のユーザー設定** ダイアログボックスには、すべてのデータファイルまたは 1つのデータファイルに対して定義できる関連プロパティが含まれています:

![](../assets/en/settings/user-settings-2.png)

**ユーザー設定** および **データファイル用のユーザー設定** ダイアログボックスに含まれる設定ページのリストと、標準設定との主な違いを以下の表にまとめます:

| **ストラクチャー設定のページ**                                                                           | **ユーザー設定のページ**       | **データファイル用のユーザー設定のページ** |
| ------------------------------------------------------------------------------------------- | -------------------- | ----------------------- |
| [一般ページ](./general.md)                                                                       | N/a                  | N/a                     |
| [インターフェースページ](./interface.md)                                                               | 標準設定と同じ              | 標準設定と同じ                 |
| [コンパイラーページ](./compiler.md)                                                                  | N/a                  | N/a                     |
| [Database/Data storage page](./database.md#data-storage-page)                               | N/a                  | N/a                     |
| [Database/Memory page](./database.md#memory-page)                                           | 標準設定と同じ              | 標準設定と同じ                 |
| [Backup/Scheduler page](./../Backup/settings.md#scheduler)                                  | N/a                  | 標準設定と同じ                 |
| [Backup/Configuration page](./../Backup/settings.md#configuration)                          | N/a                  | 標準設定と同じ                 |
| [Backup/Backup & Restore page](./../Backup/settings.md#backup--restore) | N/a                  | 標準設定と同じ                 |
| [Client-server/Network options page](./client-server.md#network-options-page)               | 標準設定と同じ              | 標準設定と同じ                 |
| [Client-server/IP configuration page](./client-server.md#ip-configuration-page)             | 標準設定と同じ              | 標準設定と同じ                 |
| [Web/Configuration page](./web.md#configuration)                                            | 標準設定と同じ              | 標準設定と同じ                 |
| [Web/Options (I) page](./web.md#options-i)                               | 標準設定と同じ              | 標準設定と同じ                 |
| [Web/Options (II) page](./web.md#options-ii)                             | 標準設定と同じ              | 標準設定と同じ                 |
| [Web/Log (type) page](./web.md#log-type)                                 | 標準設定と同じ              | 標準設定と同じ                 |
| [Web/Log (backup) page](./web.md#log-backup)                             | 標準設定と同じ              | 標準設定と同じ                 |
| [Web/Web Services page](./web.md#web-services)                                              | メソッドプリフィクスオプションは使用不可 | メソッドプリフィクスオプションは使用不可    |
| [SQL ページ](./sql.md)                                                                         | 標準設定と同じ              | 標準設定と同じ                 |
| [PHP ページ](./php.md)                                                                         | 標準設定と同じ              | 標準設定と同じ                 |
| [セキュリティページ](./security.md)                                                                  | N/a                  | N/a                     |
| [互換性ページ](./compatibility.md)                                                                | N/a                  | N/a                     |

このダイアログボックスの設定を編集した場合、それらの変更は対応する *settings.4DSettings* ファイル (後述参照) または、*Backup.4DSettings* ファイル (詳細は [バックアップ設定](../Backup/settings.md) ページ参照) に自動的に保存されます。

### `SET DATABASE PARAMETER` とユーザー設定

一部の設定は、[SET DATABASE PARAMETER](../commands-legacy/set-database-parameter.md) コマンドを通しても利用できます。 ユーザー設定は、**2セッション間で設定を保持** プロパティが **Yes** になっているパラメーターです。

**ユーザー設定** 機能が有効化されている場合、[SET DATABASE PARAMETER](../commands-legacy/set-database-parameter.md) コマンドで編集されたユーザー設定はデータファイル用のユーザー設定に自動的に保存されます。

> `Table sequence number` は例外です。この設定値は常にデータファイル自身に保存されます。

### settings.4DSettings ファイル

データベース設定において [**外部ファイルのユーザー設定を有効にするオプション**をチェック](#ユーザー設定の有効化)した場合、ユーザー設定ファイルは自動的に作成されます。 これらのファイルの場所は、ユーザー設定の種類に応じて決まります。

#### ユーザー設定

標準のユーザー設定ファイルは自動的に作成され、以下の場所にある Settingsフォルダー内に保存されます:

[`ProjectFolder/Settings/settings.4DSettings`](../Project/architecture.md#settings-ユーザー)

... *ProjectFolder* は、プロジェクトストラクチャーファイルが格納されているフォルダーの名前です。

組み込みアプリケーションでは、ユーザー設定ファイルは以下の場所に配置されます:

- シングルユーザー版の場合: ProjectFolder/Database/Settings/settings.4DSettings
- クライアント‐サーバー版の場合: ProjectFolder/Server Database/Settings/settings.4DSettings

#### データファイル用のユーザー設定

データファイルにリンクされているユーザー設定ファイルは自動的に作成され、以下の場所にある Settingsフォルダー内に保存されます:

[`Data/Settings/settings.4DSettings`](../Project/architecture.md#settings-ユーザーデータ)

... *Data* は、アプリケーションのカレントデータファイルが格納されているフォルダーの名前です。

> データファイルがプロジェクトストラクチャーファイルと同階層に位置している場合、ストラクチャー用とデータ用のユーザー設定ファイルは同じ場所の同じファイルを共有します。 **データファイル用のユーザー設定...** メニューは表示されません。

:::note

設定ファイルは XMLファイルであり、4D の XMLコマンドや、XMLエディターを使用して読み込んだり変更したりすることができます。 つまり、特にコンパイルされて 4D Volume Desktop と組み込まれたアプリケーションにおいて、設定内容をプログラムで管理することが可能です。 このファイルをプログラムで編集した場合、変更内容が反映されるのはデータベース再起動後です。

:::

### 設定の優先順位

設定は 3つの階層に保存することが可能です。 ある階層で定義されたそれぞれの設定は、前のレベルで定義された設定を上書きします (あれば):

| **優先度**                  | **名称**                                                | **場所**                                                                                                                                                                            | **コメント**                                                              |
| ------------------------ | ----------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------- |
| 3 (低) | ストラクチャー設定 (あるいは、"ユーザー設定" 機能無効時の設定) | Sourcesフォルダー内の ***settings.4DSettings*** ファイル (プロジェクトモードデータベースの場合)、またはストラクチャーファイルと同階層にある Settingsフォルダー内 (バイナリーモードデータベースの場合) | ユーザー設定が有効化されていない場合の固有の保存位置。 アプリケーションの複製すべてに適用。                        |
| 2                        | ユーザー設定 (全データファイル)                  | プロジェクトフォルダーと同階層にある Settingsフォルダー内の ***settings.4DSettings*** ファイル                                                                                                 | ストラクチャー設定を上書きします。 アプリケーションパッケージ内に保存されます。                              |
| 1 (高) | ユーザー設定 (カレントデータファイル)               | データファイルと同階層にある Settingsフォルダー内の ***settings.4DSettings*** ファイル                                                                                                     | ストラクチャー設定とユーザー設定を上書きします。 その設定とリンクされたデータファイルがアプリケーションによって使用されたときにのみ適用。 |

ユーザー設定ファイルには関連した設定の一部しか含まれない一方、ストラクチャーファイルには、コア設定を含めたカスタム設定がすべて格納されているという点に注意してください。
