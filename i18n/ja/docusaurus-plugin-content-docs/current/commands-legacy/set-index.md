---
id: set-index
title: SET INDEX
slug: /commands/set-index
displayed_sidebar: docs
---

<!--REF #_command_.SET INDEX.Syntax-->**SET INDEX** ( *aField* ; *index* {; *} )<!-- END REF-->
<!--REF #_command_.SET INDEX.Params-->
| 引数 | 型 |  | 説明 |
| --- | --- | --- | --- |
| aField | Field | &#8594;  | インデックスを作成または削除するフィールド |
| index | Boolean, Integer | &#8594;  | True=作成、False=削除、または インデックスを作成: -1=キーワード、 0=デフォルト、1=標準B-Tree、3=クラスタB-Tree |
| * | Operator |  &#8594;  | *を渡すと非同期にインデックスを作成 |

<!-- END REF-->

#### 互換性に関する注意 

<!--REF #_command_.SET INDEX.Summary-->**SET INDEX** は旧式のコマンドではありますが、これは完全にサポートされており、既存のコードを書き換えることなくアプリケーション内で維持してよいコマンドです。<!-- END REF-->しかしながら、インデックスを管理するためには[CREATE INDEX](create-index.md) および [DELETE INDEX](delete-index.md) コマンドを使用した方が、より多くの機能が提供されるため、推奨されています。

#### 説明 

**SET INDEX** には2つのシンタックスがあります。

* 引数*index*にブールを渡す場合、コマンドは*aField*に渡したフィールド用のインデックスを作成したり、削除したりします。
* 引数*index*に整数を渡す場合、コマンドは指定されたタイプのインデックスを作成します。

**index = ブール**  
フィールドをインデックスするには、*index*にTrueを渡します。コマンドはデフォルトタイプのインデックスを作成します。インデックスが既に存在する場合、呼び出しは機能しません。  
*index*にFalesを渡すと、コマンドはフィールドに関連づけられたすべての標準インデックス (非複合、非キーワード) を削除します。インデックスが存在しない場合、呼び出しは機能しません。

**index = 整数**  
コマンドは*aField*に対して指定されたインデックスを作成します。*Index Type* テーマにある以下の定数のいずれか1つを渡します。

| 定数                   | 型    | 値   | コメント                                                                                    |
| -------------------- | ---- | --- | --------------------------------------------------------------------------------------- |
| Cluster BTree Index  | 倍長整数 | 3   | クラスタを使用するB-Treeタイプのインデックス。このインデックスタイプは、インデックスが少数のキーを持つ場合、つまり同じ値がデータ内で頻繁に生じる場合に最も適しています。 |
| Default Index Type   | 倍長整数 | 0   | 4Dはフィールドに応じて最適なインデックスのタイプを設定します (キーワードインデックスを除く) 。                                      |
| Keywords Index       | 倍長整数 | \-1 | キーワードタイプのインデックス。キーワードを複合タイプにすることはできません。*fieldsArray*配列にはひとつだけフィールドを渡します。                |
| Standard BTree Index | 倍長整数 | 1   | 標準 B-Treeタイプのインデックス。この多目的用のインデックスタイプは4Dの以前のバージョンで使用されています。                              |

**注:** テキスト型のフィールドに設定されたBツリーインデックスは最大で最初の1024文字をインデックス化します。この場合、1024文字以上を含む文字列の検索結果は正しくなりません。

**SET INDEX** コマンドはロックされたレコードのインデックス付けは行いません。レコードがロック解除されるまで待機します。

オプション引数*\**を用いて、非同期に（同時に）インデックスが付けられるようになりました。非同期なインデックス付けにより、インデックス付けが終了したかどうかに関係なく、呼び出し側のメソッドの実行をそのまま続行できます。ただし、インデックスが必要なコマンドを実行すると失敗します。

**注**:

* このコマンドで作成されたインデックスには名前がありません。名前に基づくシンタックスを用いている[DELETE INDEX](delete-index.md) コマンドでそれらのインデックスを削除することはできません。
* 複合インデックスを作成したり削除するために、このコマンドを使用することはできません。
* このコマンドを使用して、[CREATE INDEX](create-index.md) で作成されたキーワードインデックスを削除することはできません。

#### 配布に関する注意 

このコマンドはデータベースストラクチャーを変更するため、読み出し専用のパッケージアプリ(*Program Files* フォルダ内にまたは.4dz ファイル内にインストールされている.4dc ファイル)のコンテキストにおいては使用することができません。

#### 例題 1 

以下の例は、*\[Customers\]ID*フィールドにインデックスを付けます。

```4d
 UNLOAD RECORD([Customers])
 SET INDEX([Customers]ID;True)
```

#### 例題 2 

*\[Customers\]Name* フィールドを非同期モードでインデックスします:

```4d
 SET INDEX([Customers]Name;True;*)
```

#### 例題 3 

キーワードインデックスを作成します:

```4d
 SET INDEX([Books]Summary;Keywords Index)
```

#### 参照 

[CREATE INDEX](create-index.md)  
[DELETE INDEX](delete-index.md)  
[GET FIELD PROPERTIES](get-field-properties.md)  
[ORDER BY](order-by.md)  
[QUERY](query.md)  