---
id: monitored-activity
title: Monitored activity
slug: /commands/monitored-activity
displayed_sidebar: docs
---

<!--REF #_command_.Monitored activity.Syntax-->**Monitored activity**  : Collection<!-- END REF-->
<!--REF #_command_.Monitored activity.Params-->
| Parâmetro | Tipo |  | Descrição |
| --- | --- | --- | --- |
| Resultado | Collection | &#8592; | Coleção de atividades monitoradas |

<!-- END REF-->

#### Descrição 

<!--REF #_command_.Monitored activity.Summary-->O comando **Monitored activity** devolve uma coleção de objetos que descrevem operações registradas de acordo com as especificações definidas pelo comando [START MONITORING ACTIVITY](start-monitoring-activity.md).<!-- END REF--> Pode ser chamado e executado em 4D remoto, 4D Server e aplicações 4D autonomas (se *fonte* não vier da atividade de rede).

Os objetos na coleção devolvida têm as propriedades abaixo:

| **Propriedade**  | **Tipo <br/>** | **Descrição <br/>**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ---------------- | ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| activityKind     | Inteiro longo          | O tipo de atividade registrada:<br/><br/> <table> <thead> <tr> <td>Constante</td> <td>Valor</td> <td>Comentário</td> </tr> </thead> <tbody> <tr> <td>Activity language</td> <td>1</td> <td>Operações de execução de Linguagem</td> </tr><tr> <td>Activity network</td> <td>2</td> <td>Operações de petição de network</td> </tr><tr> <td>Activity operations</td> <td>4</td> <td>Operações de dados 4D</td> </tr> </tbody> </table> |
| activityDuration | Real                   | A duração da atividade expressa em segundos                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| activityData     | Objeto                 | Objetos que contém propriedades específicas dependendo do tipo de atividade registrada (activityKind). Em algumas circunstâncias, podem devolver vários objetos para a mesma operação. Neste caso, os objetos terão o mesmo UUID. As propriedades adicionais nestes objetos são descritas nas seções a seguir.                                                                                                                                                                                                                                                                                                                                                                          |

##### activityKind = Activity language (1) 

**Nota:** o objeto *activityData* utiliza a informação definida pelo comando [SET DATABASE PARAMETER](set-database-parameter.md) para *4DDebugLog.txt (standard)* (se corresponde), do contrário, utiliza um modo predeterminado. Iniciar a gravação de historial durante a execução do comando **Monitored activity** afetará os resultados devolvidos.

objeto *activityData*:

| **P** **ropiedad <br/>** | **Tipo <br/>** | **Descripción <br/>**                                                                                                                               |
| -------------------------------- | ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| sequenceNumber                   | inteiro longo          | Número de operação único e sequencial na sessão de historial.                                                                                               |
| elapsedTime                      | inteiro longo          | Tempo transcorrido desde que se iniciou o histórico de depuração (expresso em milissegundos)                                                                |
| processID                        | inteiro longo          | ID de processo                                                                                                                                              |
| uniqueProcessID                  | inteiro longo          | ID de processo único                                                                                                                                        |
| stackLevel                       | inteiro longo          | Nivel de pilha                                                                                                                                              |
| duration                         | inteiro longo          | Duração da operação (expressa em microssegundos)                                                                                                            |
| kind                             | texto                  | Tipo de operação registrada. Valores possíveis: "command" "method" "Message" "pluginMessage" "pluginCommand" "pluginCallback" "pluginEvent" "task" "member" |

###### Propriedades adicionais 

As propriedades abaixo adicionais são devolvidas no objeto *activityData* segundo o tipo de operação:

| **Propriedade <br/>** | **Tipo <br/>** | **Tipo<br/>**                                                                                                                | **Descrição**                                                                                                                                                                                                                                               |
| ----------------------------- | ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| commandName                   | texto                  | comando                                                                                                                              | Nome de comando                                                                                                                                                                                                                                             |
| commandNumber                 | inteiro longo          | comando                                                                                                                              | Número de comando                                                                                                                                                                                                                                           |
| connectionUUID                | texto                  | tarea                                                                                                                                | Máquina cliente UUID                                                                                                                                                                                                                                        |
| formEvent                     | texto                  | comando                                                                                                                              | Nome de evento de formulário                                                                                                                                                                                                                                |
| formMethod                    | texto                  | comando                                                                                                                              | Método de formulário                                                                                                                                                                                                                                        |
| functionName                  | texto                  | miembro                                                                                                                              | Nome de método de membro ORDA                                                                                                                                                                                                                               |
| memberMethod                  | texto                  | comando                                                                                                                              | String localizada do método membro para a chamada ao objeto 4D                                                                                                                                                                                              |
| method                        | texto                  | comando                                                                                                                              | Nomes localizados de comandos e funções 4D                                                                                                                                                                                                                  |
| parameters                    | texto                  | comando<br/>member<br/>message<br/>method<br/>pluginCommand<br/>pluginEvent<br/>task | Parâmetros passados ​na operação                                                                                                                                                                                                                            |
| pluginCommandName             | texto                  | pluginCommand<br/>pluginEvent                                                                                                | Nome de comando de plug-in                                                                                                                                                                                                                                  |
| pluginCommandNumber           | inteiro longo          | pluginCommand<br/>pluginEvent<br/>pluginMessage                                                                      | Número de comando de plug-in                                                                                                                                                                                                                                |
| pluginExternalCall            | inteiro longo          | pluginCallback                                                                                                                       | Chamada de ponto de entrada Plug-in SDK                                                                                                                                                                                                                     |
| pluginMessageName             | texto                  | pluginMessage                                                                                                                        | Valores possíveis: PackMsgServerDeInit PackMsgServerDisposeData PackMsgServerWriteData PackMsgServerReadData PackMsgServerKillClient PackMsgServerNewClient PackMsgServerInit PackMsgProcessDeInit PackMsgProcessInit PackMsgClientDeInit PackMsgClientInit |
| pluginName                    | texto                  | pluginCallback<br/>pluginCommand<br/>pluginEvent<br/>pluginMessage                                           | Nome de plug-in                                                                                                                                                                                                                                             |

##### activityKind = Activity network (2) 

* se os históricos de depuração foram parados no servidor 4D [GRAPH SETTINGS](graph-settings.md), **Monitored activity** não devolverá nada. Se os históricos forem reiniciados no servidor ou mediante o comando [START MONITORING ACTIVITY](start-monitoring-activity.md) com Activity network, **Monitored activity** reiniciará a informação de atividad de rede.
* o objeto *activityData* utiliza a informação definida pelo comando [SET DATABASE PARAMETER](set-database-parameter.md) para *4DRequestsLog.txt* (se corresponde), do contrário, utiliza um modo pré-determinado . Iniciar a gravação de historial durante a execução do comando **Monitored activity** impactará os resultados devolvidosobjeto *activityData*:

| **P** **ropriedade <br/>** | **Tipo <br/>** | **Descrição<br/>**                                                                                                                                                                                                                                                                                                                             |
| ---------------------------------- | ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| sequenceNumber                     | entero largo           | Número de operação único e sequencial na sessão de histórico                                                                                                                                                                                                                                                                                           |
| time                               | texto                  | Data e hora em formato ISO 8601 ("AAAA-MM-DDTHH:MM:SS.sss")                                                                                                                                                                                                                                                                                            |
| systemID                           | texto                  | ID de sistema                                                                                                                                                                                                                                                                                                                                          |
| component                          | texto                  | Assinatura do componente (p. ex., 4SQLS ou dbmg)                                                                                                                                                                                                                                                                                                       |
| processInfoIndex                   | entero largo           | Corresponde ao campo "index" em histórico *4DRequestsLog\_ProcessInfo.txt*, e permite vincular uma solicitação a um processo                                                                                                                                                                                                                           |
| request                            | entero largo           | ID de solicitação para mensagens c/s, petições SQL ou mensagens [LOG EVENT](log-event.md)                                                                                                                                                                                                                                                              |
| bytesIn                            | entero largo           | Número de bytes recebidos                                                                                                                                                                                                                                                                                                                              |
| bytesOut                           | entero largo           | Número de bytes enviados                                                                                                                                                                                                                                                                                                                               |
| execDuration                       | entero largo           | Dependendo de onde seja gerado:server\_duration . <br/>OR,exec\_duration quando se gera no servidor --tempo que demora em microssegundos para que o servidor processe a solicitação. <br/><br/><br/><br/>                                                                                                      |
| writeDuration                      | entero largo           | Tempo empregado em microssegundos para enviar:Request (quando se executa no cliente).Response (cuando se executa no servidor).                                                                                                                                                                                                                         |
| serverDuration                     | entero largo           | Tempo em microssegundos para a comunicação cliente/servidor                                                                                                                                                                                                                                                                                            |
| taskKind                           | texto                  | Preemptivo ou cooperativo (respectivamente 'p' ou 'c')                                                                                                                                                                                                                                                                                                 |
| rtt                                | entero largo           | Tempo estimado em microssegundos para que o cliente envie a solicitação e o servidor a confirme. Só se mede quando se utilizar a capa de rede ServerNet, devolve 0 quando se utilizar com a capa de rede herdada.Para versões de Windows anteriores a Windows 10 ou Windows Server 2016, a chamada devolverá 0.<br/><br/><br/> |

##### activityKind = Activity operations (4) 

**Nota:** o objeto *activityData* é parecido com aquele retornado pelo comando [ACTIVITY SNAPSHOT](activity-snapshot.md), exceto que apenas operações terminadas são retornadas.

*activityData* object:

| **Propriedade <br/>** |            | **Tipo <br/>**                                                                                                                                                                  | **Descrição <br/>**                                                                                                                                               |
| ----------------------------- | ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| message                       |            | text                                                                                                                                                                                    | Descrição da operação                                                                                                                                                     |
| maxValue                      |            | longint                                                                                                                                                                                 | Número máximod e iterações para a operação (value=-1 ara operações não-iterativas)                                                                                        |
| remote                        |            | boolean                                                                                                                                                                                 | Operações cliiente / servidor. Valores possíveis: true, false                                                                                                             |
| uuid                          |            | text                                                                                                                                                                                    | UUID da operação                                                                                                                                                          |
| taskId                        |            | longint                                                                                                                                                                                 | Identificador Interno 4D para o processo originador                                                                                                                       |
| startTime                     |            | text                                                                                                                                                                                    | HOra de início para a operação em formato ISO 8601 ("AAAA-MM-DDTHH:MM:SS.sss")                                                                                            |
| duration                      |            | longint                                                                                                                                                                                 | Tempo total (expresso em milissegundos) da execução de operação                                                                                                           |
| title                         |            | text                                                                                                                                                                                    | Informação adicional sobre a operação                                                                                                                                     |
| extraInfo                     |            | object                                                                                                                                                                                  | Informação adicional SQL (se houver):<br/><br/> extraInfo.SQL\_Query (text): a pesquisa SQL extraInfo.SQL\_User (text): Usuário autenticado em SQL server |
| dbContextInfo                 |            | object                                                                                                                                                                                  | Informação Contextual da operação                                                                                                                                         |
| |  host\_name                 | text       | Nome do host que lança a operação                                                                                                                                                       |                                                                                                                                                                           |
| |  user\_name                 | text       | Nome do usuário 4D cuja sessão lança a operação                                                                                                                                         |                                                                                                                                                                           |
| |  task\_name                 | text       | Nome do processo que lança a operação                                                                                                                                                   |                                                                                                                                                                           |
| |  task\_id                   | longint    | ID do processo que lança a operação                                                                                                                                                     |                                                                                                                                                                           |
| |  client\_uid                | text       | (operações c/s somente) UUID da máquina cliente que lança a operação de banco de dados                                                                                                  |                                                                                                                                                                           |
| |  is\_remote\_context        | longint    | (operações c/s somente) Indica se a operação foi lançada pelo servidor via um processo armazenado (valor=0) ou por um cliente (valor=1)                                                 |                                                                                                                                                                           |
| |  user4d\_id                 | longint    | ID do usuário 4D na máquina cliente                                                                                                                                                     |                                                                                                                                                                           |
| |  user4d\_alias              | text       | Alias/apelido estabelecido pelo usuário 4D. Veja [SET USER ALIAS](set-user-alias.md)                                                                                                    |                                                                                                                                                                           |
| |  client\_version            | text       | Valor de string codificada que expressa o número da versão do ambiente 4D retornado pelo comando [Application version](application-version.md)                                          |                                                                                                                                                                           |
| dbOperationDetails            |            | object                                                                                                                                                                                  | Informação sobre as chamadas da operação para o motor de banco de dados                                                                                                   |
| |  table                      | text       | Nome da tabela na operação                                                                                                                                                              |                                                                                                                                                                           |
| |  field                      | text       | Nome do campo tabela na operação                                                                                                                                                        |                                                                                                                                                                           |
| |  queryPlan                  | text       | Plano pesquisa para a operação                                                                                                                                                          |                                                                                                                                                                           |
| |  operationType              | text       | Tipo de operação                                                                                                                                                                        |                                                                                                                                                                           |
| |  sortParameters             | collection | Critério de ordenação                                                                                                                                                                   |                                                                                                                                                                           |
| subOperations                 |            | collection                                                                                                                                                                              | coleção de objetos activytData contendo informação sobre as operações subordinadas dentro da operação atual.                                                              |
| |  \[ \].message              | text       | Etiqueta de operações                                                                                                                                                                   |                                                                                                                                                                           |
| |  \[ \].maxValue             | longint    | Número máximo de iterações para a operação (valor=-1 para operações não-iterativas)                                                                                                     |                                                                                                                                                                           |
| |  \[ \].remote               | boolean    | Operação cliente/servidor (0=true, 1=false)                                                                                                                                             |                                                                                                                                                                           |
| |  \[ \].uuid                 | text       | UUID da operação                                                                                                                                                                        |                                                                                                                                                                           |
| |  \[ \].taskId               | longint    | Identificador Interno 4D para o processo original                                                                                                                                       |                                                                                                                                                                           |
| |  \[ \].startTime            | text       | Hora início da operação em formato ISO 8601 ("AAAA-MM-DDTHH:MM:SS.sss")                                                                                                                 |                                                                                                                                                                           |
| |  \[ \].duration             | longint    | Tempo Total (expresso em milissegundos) de execução de operação                                                                                                                         |                                                                                                                                                                           |
| |  \[ \].title                | text       | Informação adicional sobre a operação                                                                                                                                                   |                                                                                                                                                                           |
| |  \[ \].extraInfo            | object     | Informação adicional SQL (se houver):<br/><br/> \[ \].extraInfo.SQL\_Query (text): a pesquisa SQL \[ \].extraInfo.SQL\_User (text): Usuário autenticado no servidor SQL |                                                                                                                                                                           |

#### Exemplo 

Ver exemplos para **[START MONITORING ACTIVITY](start-monitoring-activity.md)**

#### Ver também 

[START MONITORING ACTIVITY](start-monitoring-activity.md)  
[STOP MONITORING ACTIVITY](stop-monitoring-activity.md)  

#### Propriedades

|  |  |
| --- | --- |
| Número do comando | 1713 |
| Thread-seguro | &check; |


