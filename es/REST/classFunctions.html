<!DOCTYPE html><html lang="es"><head><meta name="docsearch:version" content="19 R5 BETA"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Llamar a las funciones de clase ORDA · 4D Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Puede llamar a [funciones de clase de modelos de datos](/docs/es/ORDA/ordaClasses.html) definidas para el modelo de datos ORDA a través de sus peticiones REST, para poder beneficiarse de la API expuesta de la aplicación 4D objetivo."/><meta name="docsearch:language" content="es"/><meta property="og:title" content="Llamar a las funciones de clase ORDA · 4D Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4d.github.io/docs/index.html"/><meta property="og:description" content="Puede llamar a [funciones de clase de modelos de datos](/docs/es/ORDA/ordaClasses.html) definidas para el modelo de datos ORDA a través de sus peticiones REST, para poder beneficiarse de la API expuesta de la aplicación 4D objetivo."/><meta property="og:image" content="https://4d.github.io/docs/img/logohome.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4d.github.io/docs/img/logohome.png"/><link rel="shortcut icon" href="/docs/img/4d.gif"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script><script type="text/javascript" src="/docs/alpha/js/comment.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/docs/js/code-blocks-buttons.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/es"><h2 class="headerTitle">4D Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a style="font-weight:bold" href="https://developer.4d.com/docs" target="_self">v19 R5 BETA</a></li><li class=""><a href="https://developer.4d.com/docs/Rx" target="_self">v19 R4</a></li><li class=""><a href="https://developer.4d.com/docs/19" target="_self">v19</a></li><li class=""><a href="https://developer.4d.com/docs/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/img/language.svg" alt="Languages icon"/>Español</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/REST/classFunctions.html">English</a></li><li><a href="/docs/ja/REST/classFunctions.html">日本語</a></li><li><a href="/docs/de/REST/classFunctions.html">Deutsch</a></li><li><a href="/docs/fr/REST/classFunctions.html">Français</a></li><li><a href="/docs/pt/REST/classFunctions.html">Português</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Servidor Web<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/webServer.html">Generalidades</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/webServerConfig.html">Configuración</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/webServerAdmin.html">Administración</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/webServerObject.html">Objeto servidor web</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Desarrollo web<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/gettingStarted.html">Comencemos</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/templates.html">Páginas de plantillas</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/httpRequests.html">Procesamiento de peticiones HTTP</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/allowProject.html">Permitir métodos proyecto</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/errorPages.html">Páginas de error HTTP personalizadas</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/authentication.html">Autenticación</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/sessions.html">Sesiones usuario</a></li><li class="navListItem"><a class="navItem" href="/docs/es/WebServer/preemptiveWeb.html">Uso de procesos web apropiativos</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Servidor REST<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/es/REST/gettingStarted.html">Comencemos</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/configuration.html">Configuración del servidor</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/authUsers.html">Usuarios y sesiones</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/genInfo.html">Obtener información del servidor</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/manData.html">Manipulación de datos</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/es/REST/classFunctions.html">Llamar a las funciones de clase ORDA</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/REST_requests.html">Acerca de las peticiones REST</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (general)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/es/REST/catalog.html">$catalog</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/directory.html">$directory</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/info.html">$info</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/upload.html">$upload</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API (dataClass)</h4><ul><li class="navListItem"><a class="navItem" href="/docs/es/REST/{dataClass}.html">{dataClass}</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/asArray.html">$asArray</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/atomic_$atonce.html">$atomic/$atonce</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/attributes.html">$attributes</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/binary.html">$binary</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/compute.html">$compute</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/distinct.html">$distinct</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/entityset.html">$entityset</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/expand.html">$expand</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/filter.html">$filter</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/imageformat.html">$imageformat</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/lock.html">$lock</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/method.html">$method</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/orderby.html">$orderby</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/querypath.html">$querypath</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/queryplan.html">$queryplan</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/savedfilter.html">$savedfilter</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/savedorderby.html">$savedorderby</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/skip.html">$skip</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/timeout.html">$timeout</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/top_$limit.html">$top/$limit</a></li><li class="navListItem"><a class="navItem" href="/docs/es/REST/version.html">$version</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/docs/edit/master/docs/REST/ClassFunctions.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Llamar a las funciones de clase ORDA</h1></header><article><div><span><p>Puede llamar a <a href="/docs/es/ORDA/ordaClasses.html">funciones de clase de modelos de datos</a> definidas para el modelo de datos ORDA a través de sus peticiones REST, para poder beneficiarse de la API expuesta de la aplicación 4D objetivo.</p>
<p>Las funciones se llaman simplemente en peticiones POST en la interfaz ORDA apropiada, sin (). Por ejemplo, si ha definido una función <code>getCity()</code> en la dataclass City, podría llamarla utilizando la siguiente petición:</p>
<p><code>/rest/City/getCity</code></p>
<p>con los datos en el cuerpo de la petición POST: <code>[&quot;Aguada&quot;]</code></p>
<p>En el lenguaje 4D, esta llamada equivale a:</p>
<pre><code class="hljs css language-4d"><span class="hljs-variable">$city</span>:=ds.City.<span class="hljs-function">getCity</span>(<span class="hljs-string">"Aguada"</span>)
</code></pre>
<blockquote>
<p>Sólo las funciones con la palabra clave <code>exposed</code> pueden ser llamadas directamente desde las peticiones REST. Ver la sección <a href="/docs/es/ORDA/ordaClasses.html#exposed-vs-non-exposed-functions">Funciones expuestas vs. no expuestas</a>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="llamadas-de-las-funciones"></a><a href="#llamadas-de-las-funciones" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Llamadas de las funciones</h2>
<p>Las funciones deben llamarse siempre utilizando peticiones <strong>POST</strong> (una petición GET recibirá un error).</p>
<p>Las funciones son llamadas en el objeto correspondiente en el almacén de datos del servidor.</p>
<table>
<thead>
<tr><th>Función de clase</th><th>Sintaxis</th></tr>
</thead>
<tbody>
<tr><td><a href="/docs/es/ORDA/ordaClasses.html#datastore-class">datastore class</a></td><td><code>/rest/$catalog/DataStoreClassFunction</code></td></tr>
<tr><td><a href="/docs/es/ORDA/ordaClasses.html#dataclass-class">dataclass class</a></td><td><code>/rest/{dataClass}/DataClassClassFunction</code></td></tr>
<tr><td><a href="/docs/es/ORDA/ordaClasses.html#entityselection-class">entitySelection class</a></td><td><code>/rest/{dataClass}/EntitySelectionClassFunction</code></td></tr>
<tr><td></td><td><code>/rest/{dataClass}/EntitySelectionClassFunction/$entityset/entitySetNumber</code></td></tr>
<tr><td></td><td><code>/rest/{dataClass}/EntitySelectionClassFunction/$filter</code></td></tr>
<tr><td></td><td><code>/rest/{dataClass}/EntitySelectionClassFunction/$orderby</code></td></tr>
<tr><td><a href="/docs/es/ORDA/ordaClasses.html#entity-class">entity class</a></td><td><code>/rest/{dataClass}(key)/EntityClassFunction/</code></td></tr>
</tbody>
</table>
<blockquote>
<p><code>/rest/{dataClass}/Function</code> puede utilizarse para llamar a una función de dataclass o de selección de entidades (<code>/rest/{dataClass}</code> devuelve todas las entidades de la DataClass como una selección de entidades).<br>
La función se busca primero en la clase de selección de entidades. If not found, it is searched in the dataclass. In other words, if a function with the same name is defined in both the DataClass class and the EntitySelection class, the dataclass class function will never be executed.</p>
</blockquote>
<blockquote>
<p>All 4D code called from REST requests <strong>must be thread-safe</strong> if the project runs in compiled mode, because the REST Server always uses preemptive processes in this case (the <a href="/docs/es/WebServer/preemptiveWeb.html#enabling-the-preemptive-mode-for-the-web-server"><em>Use preemptive process</em> setting value</a> is ignored by the REST Server).</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="parámetros"></a><a href="#parámetros" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parámetros</h2>
<p>Puede enviar los parámetros a las funciones definidas en las clases usuarios ORDA. Del lado del servidor, se recibirán en las funciones de clase en los parámetros normales $1, $2, etc.</p>
<p>Se aplican las siguientes reglas:</p>
<ul>
<li>Los parámetros deben pasarse en el <strong>cuerpo de la petición POST</strong></li>
<li>Los parámetros deben estar incluidos en una colección (formato JSON)</li>
<li>Todos los tipos de datos escalares soportados en las colecciones JSON pueden ser pasados como parámetros.</li>
<li>La selección de entidades y la entidad se pueden pasar como parámetros. El objeto JSON debe contener atributos específicos utilizados por el servidor REST para asignar datos a los objetos ORDA correspondientes: __DATACLASS, __ENTITY, __ENTITIES, __DATASET.</li>
</ul>
<p>Ver <a href="#request-receiving-an-entity-as-parameter">este ejemplo</a> y <a href="#request-receiving-an-entity-selection-as-parameter">este ejemplo</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="parámetro-de-valor-escalar"></a><a href="#parámetro-de-valor-escalar" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parámetro de valor escalar</h3>
<p>El(los) parámetros deben estar simplemente incluirse en una colección definida en el cuerpo. Por ejemplo, con una función de dataclass <code>getCities()</code> que recibe parámetros de tipo texto: <code>/rest/City/getCities</code></p>
<p><strong>Parámetros en el cuerpo:</strong> [&quot;Aguada&quot;,&quot;Paris&quot;]</p>
<p>All JSON data types are supported in parameters, including JSON pointers. Dates can be passed as strings in ISO 8601 date format (e.g. &quot;2020-08-22T22:00:000Z&quot;).</p>
<h3><a class="anchor" aria-hidden="true" id="parámetro-de-entidad"></a><a href="#parámetro-de-entidad" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parámetro de entidad</h3>
<p>Entities passed in parameters are referenced on the server through their key (<em>i.e.</em> __KEY property). If the key parameter is omitted in a request, a new entity is loaded in memory  the server. You can also pass values for any attributes of the entity. Estos valores se utilizarán automáticamente para la entidad manejada en el servidor.</p>
<blockquote>
<p>If the request sends modified attribute values for an existing entity on the server, the called ORDA data model function will be automatically executed on the server with modified values. This feature allows you, for example, to check the result of an operation on an entity, after applying all business rules, from the client application. You can then decide to save or not the entity on the server.</p>
</blockquote>
<table>
<thead>
<tr><th>Propiedades</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>Atributos de la entidad</td><td>mixto</td><td>Opcional - Valores a modificar</td></tr>
<tr><td>__DATACLASS</td><td>Cadena</td><td>Obligatorio - Indica la Dataclass de la entidad</td></tr>
<tr><td>__ENTITY</td><td>Booleano</td><td>Obligatorio - True para indicar al servidor que el parámetro es una entidad</td></tr>
<tr><td>__KEY</td><td>mixto (mismo tipo que la llave primaria)</td><td>Opcional - llave primaria de la entidad</td></tr>
</tbody>
</table>
<ul>
<li>If __KEY is not provided, a new entity is created on the server with the given attributes.</li>
<li>If __KEY is provided, the entity corresponding to __KEY is loaded on the server with the given attributes</li>
</ul>
<p>Ver los ejemplos de <a href="#creating-an-entity">creación</a> o de <a href="#updating-an-entity">actualización</a> de las entidades.</p>
<h4><a class="anchor" aria-hidden="true" id="parámetro-de-entidad-asociado"></a><a href="#parámetro-de-entidad-asociado" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parámetro de entidad asociado</h4>
<p>Same properties as for an <a href="#entity-parameter">entity parameter</a>. In addition, the related entity must exist and is referenced by __KEY containing its primary key.</p>
<p>Ver los ejemplos para <a href="#creating-an-entity-with-a-related-entity">creación</a> o <a href="#updating-an-entity-with-a-related-entity">actualización</a> de las entidades con las entidades relacionadas.</p>
<h3><a class="anchor" aria-hidden="true" id="parámetro-de-selección-de-entidad"></a><a href="#parámetro-de-selección-de-entidad" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parámetro de selección de entidad</h3>
<p>La selección de entidades debe haber sido definida previamente utilizando <a href="/docs/es/REST/method.html#methodentityset">$method=entityset</a>.</p>
<blockquote>
<p>Si la petición envía una selección de entidades modificada al servidor, la función del modelo de datos ORDA llamada se ejecutará automáticamente en el servidor con la selección de entidades modificada.</p>
</blockquote>
<table>
<thead>
<tr><th>Propiedades</th><th>Tipo</th><th>Descripción</th></tr>
</thead>
<tbody>
<tr><td>Atributos de la entidad</td><td>mixto</td><td>Opcional - Valores a modificar</td></tr>
<tr><td>__DATASET</td><td>Cadena</td><td>Obligatorio - entitySetID (UUID) de la selección de entidades</td></tr>
<tr><td>__ENTITIES</td><td>Booleano</td><td>Obligatorio - True para indicar al servidor que el parámetro es una selección de entidades</td></tr>
</tbody>
</table>
<p>Ver ejemplo para <a href="#receiving-an-entity-selection-as-parameter">recibir una selección de entidades</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="ejemplos-de-peticiones"></a><a href="#ejemplos-de-peticiones" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ejemplos de peticiones</h2>
<p>Esta base de datos se expone como un almacén de datos remoto en localhost (puerto 8111):</p>
<p><img src="/docs/assets/en/REST/ordastructure.png" alt="alt-text"></p>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-función-de-clase-de-datastore"></a><a href="#utilizar-una-función-de-clase-de-datastore" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una función de clase de datastore</h3>
<p>La clase de <code>DataStore</code> US_Cities ofrece una API:</p>
<pre><code class="hljs">// DataStore <span class="hljs-class"><span class="hljs-keyword">class</span></span>

<span class="hljs-class"><span class="hljs-keyword">Class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DataStoreImplementation</span></span>

exposed <span class="hljs-function"><span class="hljs-keyword">Function</span> <span class="hljs-title">getName</span>(</span>)
    <span class="hljs-number">$0</span>:=<span class="hljs-string">"US cities and zip codes manager"</span> 
</code></pre>
<p>A continuación, puede ejecutar esta petición:</p>
<p><strong>POST</strong> <code>127.0.0.1:8111/rest/$catalog/getName</code></p>
<h4><a class="anchor" aria-hidden="true" id="resultado"></a><a href="#resultado" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
<span class="hljs-attr">"result"</span>: <span class="hljs-string">"US cities and zip codes manager"</span> 
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-función-de-clase-de-dataclass"></a><a href="#utilizar-una-función-de-clase-de-dataclass" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una función de clase de dataclass</h3>
<p>La clase de Dataclass <code>City</code> ofrece una PI que devuelve una entidad de ciudad a partir del nombre pasado en parámetro:</p>
<pre><code class="hljs"><span class="hljs-comment">// City class</span><span class="hljs-keyword">

Class extends</span> DataClass

<span class="hljs-function">exposed Function getCity</span>()<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$0 </span>: cs.CityEntity<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$1</span>,<span class="hljs-variable">$nameParam </span>: text
    <span class="hljs-variable">$nameParam</span>:=<span class="hljs-variable">$1</span>
    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"name = :1"</span>;<span class="hljs-variable">$nameParam</span>).<span class="hljs-function">first</span>()
</code></pre>
<p>A continuación, puede ejecutar esta petición:</p>
<p><strong>POST</strong> <code>127.0.0.1:8111/rest/City/getCity</code></p>
<p>Petición: [&quot;Aguada&quot;]</p>
<h4><a class="anchor" aria-hidden="true" id="resultado-1"></a><a href="#resultado-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<p>El resultado es una entidad:</p>
<pre><code class="hljs">{
    <span class="hljs-attr">"__entityModel"</span>: <span class="hljs-string">"City"</span>,
    <span class="hljs-attr">"__DATACLASS"</span>: <span class="hljs-string">"City"</span>,
    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>,
    <span class="hljs-attr">"__TIMESTAMP"</span>: <span class="hljs-string">"2020-03-09T08:03:19.923Z"</span>,
    <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"ID"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Aguada"</span>,
    <span class="hljs-attr">"countyFIPS"</span>: <span class="hljs-number">72003</span>,
    <span class="hljs-attr">"county"</span>: {
        <span class="hljs-attr">"__deferred"</span>: {
            <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/County(72003)"</span>,
            <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"72003"</span> 
        }
    },
    <span class="hljs-attr">"zips"</span>: {
        <span class="hljs-attr">"__deferred"</span>: {
            <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/City(1)/zips?$expand=zips"</span> 
        }
    }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-función-de-clase-de-una-entidad"></a><a href="#utilizar-una-función-de-clase-de-una-entidad" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una función de clase de una entidad</h3>
<p>La clase de entidad <code>CityEntity</code> ofrece una API:</p>
<pre><code class="hljs">// CityEntity <span class="hljs-class"><span class="hljs-keyword">class</span></span>

<span class="hljs-class"><span class="hljs-keyword">Class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Entity</span></span>

exposed <span class="hljs-function"><span class="hljs-keyword">Function</span> <span class="hljs-title">getPopulation</span>(</span>)
    <span class="hljs-number">$0</span>:=This.zips.sum(<span class="hljs-string">"population"</span>)
</code></pre>
<p>A continuación, puede ejecutar esta petición:</p>
<p><strong>POST</strong> <code>127.0.0.1:8111/rest/City(2)/getPopulation</code></p>
<h4><a class="anchor" aria-hidden="true" id="resultado-2"></a><a href="#resultado-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"result"</span>: <span class="hljs-number">48814</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-función-clase-entityselection"></a><a href="#utilizar-una-función-clase-entityselection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una función clase entitySelection</h3>
<p>La clase de selección de entidad <code>CityEntity</code> ofrece una API:</p>
<pre><code class="hljs">// CitySelection <span class="hljs-class"><span class="hljs-keyword">class</span></span>

<span class="hljs-class"><span class="hljs-keyword">Class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">EntitySelection</span></span>

exposed <span class="hljs-function"><span class="hljs-keyword">Function</span> <span class="hljs-title">getPopulation</span>(</span>)
    <span class="hljs-number">$0</span>:=This.zips.sum(<span class="hljs-string">"population"</span>)
</code></pre>
<p>A continuación, puede ejecutar esta petición:</p>
<p><strong>POST</strong> <code>127.0.0.1:8111/rest/City/getPopulation/?$filter=&quot;ID&lt;3&quot;</code></p>
<h4><a class="anchor" aria-hidden="true" id="resultado-3"></a><a href="#resultado-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"result"</span>: <span class="hljs-number">87256</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-función-de-clase-de-selección-de-entidades-y-un-conjunto-de-entidades"></a><a href="#utilizar-una-función-de-clase-de-selección-de-entidades-y-un-conjunto-de-entidades" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una función de clase de selección de entidades y un conjunto de entidades</h3>
<p>La clase <code>StudentsSelection</code> tine una función <code>getAgeAverage</code>:</p>
<pre><code class="hljs"><span class="hljs-comment">// StudentsSelection Class</span><span class="hljs-keyword">

Class extends</span> EntitySelection

exposed<span class="hljs-keyword"> Function</span> getAgeAverage
<span class="hljs-function">    C_LONGINT</span>(<span class="hljs-variable">$sum</span>;<span class="hljs-variable">$0</span>)
<span class="hljs-function">    C_OBJECT</span>(<span class="hljs-variable">$s</span>)

    <span class="hljs-variable">$sum</span>:=<span class="hljs-number">0</span><span class="hljs-keyword">
    For each</span> (<span class="hljs-variable">$s</span>;<span class="hljs-literal">This</span>)
        <span class="hljs-variable">$sum</span>:=<span class="hljs-variable">$sum</span>+<span class="hljs-variable">$s</span>.<span class="hljs-function">age</span>()<span class="hljs-keyword">
    End for each</span> 
    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$sum</span>/<span class="hljs-literal">This</span>.length
</code></pre>
<p>Una vez que haya creado un conjunto de entidades, puede ejecutar esta petición:</p>
<p><strong>POST</strong> <code>127.0.0.1:8044/rest/Students/getAgeAverage/$entityset/17E83633FFB54ECDBF947E5C620BB532</code></p>
<h4><a class="anchor" aria-hidden="true" id="resultado-4"></a><a href="#resultado-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"result"</span>: <span class="hljs-number">34</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-función-de-clase-de-selección-de-entidades-y-unorderby"></a><a href="#utilizar-una-función-de-clase-de-selección-de-entidades-y-unorderby" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una función de clase de selección de entidades y unorderBy</h3>
<p>La clase <code>StudentsSelection</code> tiene una función <code>getLastSummary</code>:</p>
<pre><code class="hljs"><span class="hljs-comment">// StudentsSelection Class</span><span class="hljs-keyword">


Class extends</span> EntitySelection

exposed<span class="hljs-keyword"> Function</span> getLastSummary
<span class="hljs-function">    C_TEXT</span>(<span class="hljs-variable">$0</span>)
<span class="hljs-function">    C_OBJECT</span>(<span class="hljs-variable">$last</span>)

    <span class="hljs-variable">$last</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">last</span>()
    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$last</span>.firstname+<span class="hljs-string">" - "</span>+<span class="hljs-variable">$last</span>.lastname+<span class="hljs-string">" is ... "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$last</span>.<span class="hljs-function">age</span>())
</code></pre>
<p>A continuación, puede ejecutar esta petición:</p>
<p><strong>POST</strong> <code>127.0.0.1:8044/rest/Students/getLastSummary/$entityset/?$filter=&quot;lastname=b@&quot;&amp;$orderby=&quot;lastname&quot;</code></p>
<h4><a class="anchor" aria-hidden="true" id="resultado-5"></a><a href="#resultado-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"result"</span>: <span class="hljs-string">"Wilbert - Bull is ... 21"</span> 
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-entidad-que-se-creará-en-el-servidor"></a><a href="#utilizar-una-entidad-que-se-creará-en-el-servidor" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una entidad que se creará en el servidor</h3>
<p>La clase de Dataclass <code>Students</code> tiene la función <code>pushData()</code> que recibe una entidad que contiene los datos del cliente. El método <code>checkData()</code> efectúa algunos controles. Si son válidos, la entidad se guarda y se devuelve.</p>
<pre><code class="hljs"><span class="hljs-comment">// Students Class</span><span class="hljs-keyword">

Class extends</span> DataClass

exposed<span class="hljs-keyword"> Function</span> pushData<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$1</span>, <span class="hljs-variable">$entity</span>, <span class="hljs-variable">$status</span>, <span class="hljs-variable">$0 </span>: Object

    <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$1</span>

    <span class="hljs-variable">$status</span>:=<span class="hljs-function">checkData</span>(<span class="hljs-variable">$entity</span>) <span class="hljs-comment">// $status es un objeto con una propiedad booleana "success"</span>

    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$status</span><span class="hljs-keyword">

    If</span> (<span class="hljs-variable">$status</span>.success)
        <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
       If</span> (<span class="hljs-variable">$status</span>.success)
           <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$entity</span><span class="hljs-keyword">
      End if</span><span class="hljs-keyword"> 
    End if</span>

</code></pre>
<p>Lance esta petición:</p>
<p><strong>POST</strong> <code>http://127.0.0.1:8044/rest/Students/pushData</code></p>
<p>Cuerpo de la petición:</p>
<pre><code class="hljs">[{
<span class="hljs-attr">"__DATACLASS"</span>:<span class="hljs-string">"Students"</span>,
<span class="hljs-attr">"__ENTITY"</span>:<span class="hljs-literal">true</span>,
<span class="hljs-attr">"firstname"</span>:<span class="hljs-string">"Ann"</span>,
<span class="hljs-attr">"lastname"</span>:<span class="hljs-string">"Brown"</span> 
}]
</code></pre>
<p>Como ninguna <code>__KEY</code> es dada, una nueva entidad Students está cargada en el servidor <strong>con los atributos del cliente</strong>. Como la función <code>pushData()</code> ejecuta una acción <code>save()</code>, la nueva entidad es creada.</p>
<h4><a class="anchor" aria-hidden="true" id="resultado-6"></a><a href="#resultado-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"__entityModel"</span>: <span class="hljs-string">"Students"</span>,
    <span class="hljs-attr">"__DATACLASS"</span>: <span class="hljs-string">"Students"</span>,
    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"55"</span>,
    <span class="hljs-attr">"__TIMESTAMP"</span>: <span class="hljs-string">"2020-06-16T10:54:41.805Z"</span>,
    <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"ID"</span>: <span class="hljs-number">55</span>,
    <span class="hljs-attr">"firstname"</span>: <span class="hljs-string">"Ann"</span>,
    <span class="hljs-attr">"lastname"</span>: <span class="hljs-string">"BROWN"</span>,
    <span class="hljs-attr">"schoolID"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"school"</span>: <span class="hljs-literal">null</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-entidad-a-actualizar-en-el-servidor"></a><a href="#utilizar-una-entidad-a-actualizar-en-el-servidor" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una entidad a actualizar en el servidor</h3>
<p>Igual que el anterior pero con el atributo __KEY</p>
<p>Lance esta petición:</p>
<p><strong>POST:</strong><code>http://127.0.0.1:8044/rest/Students/pushData</code></p>
<p>Cuerpo de la petición:</p>
<pre><code class="hljs">[{
<span class="hljs-attr">"__DATACLASS"</span>:<span class="hljs-string">"Students"</span>,
<span class="hljs-attr">"__ENTITY"</span>:<span class="hljs-literal">true</span>,
<span class="hljs-attr">"lastname"</span>:<span class="hljs-string">"Brownie"</span>,
<span class="hljs-attr">"__KEY"</span>:<span class="hljs-number">55</span>
}]
</code></pre>
<p>Como <code>__KEY</code> es dada, la entidad Students está cargada con llave primaria 55 <strong>con el valor lastname recibido por el cliente</strong>. Como la función ejecuta una acción <code>save()</code>, la nueva entidad es actualizada.</p>
<h4><a class="anchor" aria-hidden="true" id="resultado-7"></a><a href="#resultado-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"__entityModel"</span>: <span class="hljs-string">"Students"</span>,
    <span class="hljs-attr">"__DATACLASS"</span>: <span class="hljs-string">"Students"</span>,
    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"55"</span>,
    <span class="hljs-attr">"__TIMESTAMP"</span>: <span class="hljs-string">"2020-06-16T11:10:21.679Z"</span>,
    <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">"ID"</span>: <span class="hljs-number">55</span>,
    <span class="hljs-attr">"firstname"</span>: <span class="hljs-string">"Ann"</span>,
    <span class="hljs-attr">"lastname"</span>: <span class="hljs-string">"BROWNIE"</span>,
    <span class="hljs-attr">"schoolID"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"school"</span>: <span class="hljs-literal">null</span> 
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="crear-una-entidad-con-una-entidad-relacionada"></a><a href="#crear-una-entidad-con-una-entidad-relacionada" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crear una entidad con una entidad relacionada</h3>
<p>En este ejemplo, creamos una nueva entidad Students con la entidad Schools con la llave primaria 2.</p>
<p>Lance esta petición:</p>
<p><strong>POST:</strong><code>http://127.0.0.1:8044/rest/Students/pushData</code></p>
<p>Cuerpo de la petición:</p>
<pre><code class="hljs">[{
<span class="hljs-attr">"__DATACLASS"</span>:<span class="hljs-string">"Students"</span>,
<span class="hljs-attr">"__ENTITY"</span>:<span class="hljs-literal">true</span>,
<span class="hljs-attr">"firstname"</span>:<span class="hljs-string">"John"</span>,
<span class="hljs-attr">"lastname"</span>:<span class="hljs-string">"Smith"</span>,
<span class="hljs-attr">"school"</span>:{<span class="hljs-attr">"__KEY"</span>:<span class="hljs-number">2</span>}
}]
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="resultado-8"></a><a href="#resultado-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"__entityModel"</span>: <span class="hljs-string">"Students"</span>,
    <span class="hljs-attr">"__DATACLASS"</span>: <span class="hljs-string">"Students"</span>,
    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"56"</span>,
    <span class="hljs-attr">"__TIMESTAMP"</span>: <span class="hljs-string">"2020-06-16T11:16:47.601Z"</span>,
    <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"ID"</span>: <span class="hljs-number">56</span>,
    <span class="hljs-attr">"firstname"</span>: <span class="hljs-string">"John"</span>,
    <span class="hljs-attr">"lastname"</span>: <span class="hljs-string">"SMITH"</span>,
    <span class="hljs-attr">"schoolID"</span>: <span class="hljs-number">2</span>,
       <span class="hljs-attr">"school"</span>: {
        <span class="hljs-attr">"__deferred"</span>: {
            <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Schools(2)"</span>,
            <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"2"</span> 
        }
    }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="actualizar-una-entidad-con-una-entidad-relacionada"></a><a href="#actualizar-una-entidad-con-una-entidad-relacionada" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actualizar una entidad con una entidad relacionada</h3>
<p>En este ejemplo, asociamos una escuela existente a una entidad Students. La clase <code>StudentsEntity</code> tiene una API:</p>
<pre><code class="hljs"><span class="hljs-comment">// StudentsEntity class</span><span class="hljs-keyword">

Class extends</span> Entity

<span class="hljs-function">exposed Function putToSchool</span>()<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$1</span>, <span class="hljs-variable">$school </span>, <span class="hljs-variable">$0</span>, <span class="hljs-variable">$status </span>: Object

        <span class="hljs-comment">//$1 es una entidad Schools</span>
    <span class="hljs-variable">$school</span>:=<span class="hljs-variable">$1</span>
        <span class="hljs-comment">//Asocia la entidad relacionada "school" con la entidad actual "Students"</span>
    <span class="hljs-literal">This</span>.school:=<span class="hljs-variable">$school</span>

    <span class="hljs-variable">$status</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">save</span>()

    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$status</span>
</code></pre>
<p>Se ejecuta esta petición, llamada en una entidad Students: <strong>POST</strong> <code>http://127.0.0.1:8044/rest/Students(1)/putToSchool</code> Cuerpo de la petición:</p>
<pre><code class="hljs">[{
<span class="hljs-attr">"__DATACLASS"</span>:<span class="hljs-string">"Schools"</span>,
<span class="hljs-attr">"__ENTITY"</span>:<span class="hljs-literal">true</span>,
<span class="hljs-attr">"__KEY"</span>:<span class="hljs-number">2</span>
}]
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="resultado-9"></a><a href="#resultado-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"result"</span>: {
        <span class="hljs-attr">"success"</span>: <span class="hljs-literal">true</span>
    }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="recibir-una-selección-de-entidades-como-parámetro"></a><a href="#recibir-una-selección-de-entidades-como-parámetro" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recibir una selección de entidades como parámetro</h3>
<p>En la clase de Dataclass <code>Students</code>, la función <code>setFinalExam()</code> actualiza una selección de entidad recibida ($1). En realidad, actualiza el atributo <em>finalExam</em> con el valor recibido ($2). Devuelve las llaves primarias de las entidades actualizadas.</p>
<pre><code class="hljs"><span class="hljs-comment">// Students class</span><span class="hljs-keyword">

Class extends</span> DataClass

<span class="hljs-function">exposed Function setFinalExam</span>()<span class="hljs-keyword">

    var</span> <span class="hljs-variable">$1</span>, <span class="hljs-variable">$es</span>, <span class="hljs-variable">$student</span>, <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">
    var</span> <span class="hljs-variable">$2</span>, <span class="hljs-variable">$examResult </span>: Text<span class="hljs-keyword">

    var</span> <span class="hljs-variable">$keys</span>, <span class="hljs-variable">$0 </span>: Collection

      <span class="hljs-comment">//Entity selection</span>
    <span class="hljs-variable">$es</span>:=<span class="hljs-variable">$1</span>

    <span class="hljs-variable">$examResult</span>:=<span class="hljs-variable">$2</span>

    <span class="hljs-variable">$keys</span>:=<span class="hljs-function">New collection</span>()

      <span class="hljs-comment">//Bucle en la selección de entidades</span><span class="hljs-keyword">
    For each</span> (<span class="hljs-variable">$student</span>;<span class="hljs-variable">$es</span>)
        <span class="hljs-variable">$student</span>.finalExam:=<span class="hljs-variable">$examResult</span>
        <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$student</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword">
        If</span> (<span class="hljs-variable">$status</span>.success)
            <span class="hljs-variable">$keys</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$student</span>.ID)<span class="hljs-keyword">
        End if</span><span class="hljs-keyword"> 
    End for each</span> 

    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$keys</span>
</code></pre>
<p>Un conjunto de entidades se crea primero con esta petición:</p>
<p><code>http://127.0.0.1:8044/rest/Students/?$filter=&quot;ID&lt;3&quot;&amp;$method=entityset</code></p>
<p>A continuación, puede ejecutar esta petición:</p>
<p><strong>POST</strong> <code>http://127.0.0.1:8044/rest/Students/setFinalExam</code></p>
<p>Cuerpo de la petición:</p>
<pre><code class="hljs">[
{
<span class="hljs-attr">"__ENTITIES"</span>:<span class="hljs-literal">true</span>,
<span class="hljs-attr">"__DATASET"</span>:<span class="hljs-string">"9B9C053A111E4A288E9C1E48965FE671"</span> 
},
<span class="hljs-string">"Passed"</span> 
]

</code></pre>
<h4><a class="anchor" aria-hidden="true" id="resultado-10"></a><a href="#resultado-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resultado</h4>
<p>Se han actualizado las entidades con llaves primarias 1 y 2.</p>
<pre><code class="hljs">{
    <span class="hljs-attr">"result"</span>: [
        <span class="hljs-number">1</span>,
        <span class="hljs-number">2</span>
    ]
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilizar-una-selección-de-entidades-actualizada-en-el-cliente"></a><a href="#utilizar-una-selección-de-entidades-actualizada-en-el-cliente" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilizar una selección de entidades actualizada en el cliente</h3>
<p>Utilizando la función <code>getAgeAverage()</code> <a href="#using-an-entityselection-class-function-and-an-entityset">definida anteriormente</a>.</p>
<pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$remoteDS</span>, <span class="hljs-variable">$newStudent</span>, <span class="hljs-variable">$students </span>: Object<span class="hljs-keyword">
var</span> <span class="hljs-variable">$ageAverage </span>: Integer

<span class="hljs-variable">$remoteDS</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>;<span class="hljs-string">"127.0.0.1:8044"</span>);<span class="hljs-string">"students"</span>)

<span class="hljs-comment">// $newStudent es una entidad "student" a procesar</span>
<span class="hljs-variable">$newStudent</span>:=...
<span class="hljs-variable">$students</span>:=<span class="hljs-variable">$remoteDS</span>.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"school.name = :1"</span>;<span class="hljs-string">"Math school"</span>)
<span class="hljs-comment">// Hemos añadido una entidad a la selección de entidades $students en el cliente</span>
<span class="hljs-variable">$students</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$newStudent</span>) 

<span class="hljs-comment">// Llamamos a una función en la clase StudentsSelection que devuelve la edad media de los estudiantes en la selección de entidades</span>
<span class="hljs-comment">// La función se utiliza en el servidor en la selección de la entidad $students actualizada, que incluye el estudiante añadido por el cliente</span>
<span class="hljs-variable">$ageAverage</span>:=<span class="hljs-variable">$students</span>.<span class="hljs-function">getAgeAverage</span>()
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/es/REST/manData.html"><span class="arrow-prev">← </span><span>Manipulación de datos</span></a><a class="docs-next button" href="/docs/es/REST/REST_requests.html"><span>Acerca de las peticiones REST</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#llamadas-de-las-funciones">Llamadas de las funciones</a></li><li><a href="#parámetros">Parámetros</a><ul class="toc-headings"><li><a href="#parámetro-de-valor-escalar">Parámetro de valor escalar</a></li><li><a href="#parámetro-de-entidad">Parámetro de entidad</a></li><li><a href="#parámetro-de-selección-de-entidad">Parámetro de selección de entidad</a></li></ul></li><li><a href="#ejemplos-de-peticiones">Ejemplos de peticiones</a><ul class="toc-headings"><li><a href="#utilizar-una-función-de-clase-de-datastore">Utilizar una función de clase de datastore</a></li><li><a href="#utilizar-una-función-de-clase-de-dataclass">Utilizar una función de clase de dataclass</a></li><li><a href="#utilizar-una-función-de-clase-de-una-entidad">Utilizar una función de clase de una entidad</a></li><li><a href="#utilizar-una-función-clase-entityselection">Utilizar una función clase entitySelection</a></li><li><a href="#utilizar-una-función-de-clase-de-selección-de-entidades-y-un-conjunto-de-entidades">Utilizar una función de clase de selección de entidades y un conjunto de entidades</a></li><li><a href="#utilizar-una-función-de-clase-de-selección-de-entidades-y-unorderby">Utilizar una función de clase de selección de entidades y unorderBy</a></li><li><a href="#utilizar-una-entidad-que-se-creará-en-el-servidor">Utilizar una entidad que se creará en el servidor</a></li><li><a href="#utilizar-una-entidad-a-actualizar-en-el-servidor">Utilizar una entidad a actualizar en el servidor</a></li><li><a href="#crear-una-entidad-con-una-entidad-relacionada">Crear una entidad con una entidad relacionada</a></li><li><a href="#actualizar-una-entidad-con-una-entidad-relacionada">Actualizar una entidad con una entidad relacionada</a></li><li><a href="#recibir-una-selección-de-entidades-como-parámetro">Recibir una selección de entidades como parámetro</a></li><li><a href="#utilizar-una-selección-de-entidades-actualizada-en-el-cliente">Utilizar una selección de entidades actualizada en el cliente</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/docs/img/logohome.png" alt="4D Documentation"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2022 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license-0">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2f94e2c8270ac2b1db0c23691592fb10',
                indexName: '4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:es","version:19 R5 BETA"]}
              });
            </script></body></html>