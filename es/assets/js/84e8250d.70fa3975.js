"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63898],{603905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(667294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(a),m=s,h=u["".concat(l,".").concat(m)]||u[m]||p[m]||o;return a?n.createElement(h,r(r({ref:t},d),{},{components:a})):n.createElement(h,r({ref:t},d))}));function m(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=a.length,r=new Array(o);r[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:s,r[1]=i;for(var c=2;c<o;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},39249:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});a(667294);var n=a(603905);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(this,arguments)}function o(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const r={id:"datastores",title:"Bases de datos remotas"},i=void 0,l={unversionedId:"ORDA/datastores",id:"version-20-R5/ORDA/datastores",title:"Bases de datos remotas",description:"A remote datastore is a reference, on a local 4D application (4D or 4D Server), to a datastore stored in another 4D application.",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R5/ORDA/remoteDatastores.md",sourceDirName:"ORDA",slug:"/ORDA/datastores",permalink:"/docs/es/ORDA/datastores",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20ORDA%2FremoteDatastores.md%20(20-R5)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R5",frontMatter:{id:"datastores",title:"Bases de datos remotas"},sidebar:"docs",previous:{title:"Utilizando el sello global",permalink:"/docs/es/ORDA/global-stamp"},next:{title:"Privilegios",permalink:"/docs/es/ORDA/privileges"}},c={},d=[{value:"Utilizando sesiones web",id:"utilizando-sesiones-web",level:2},{value:"Visualizaci\xf3n de las sesiones",id:"visualizaci\xf3n-de-las-sesiones",level:3},{value:"Cierre de las sesiones",id:"cierre-de-las-sesiones",level:2},{value:"Bloqueo y transacciones",id:"bloqueo-y-transacciones",level:2}],p={toc:d};function u(e){var{components:t}=e,r=o(e,["components"]);return(0,n.kt)("wrapper",s({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"A ",(0,n.kt)("strong",{parentName:"p"},"remote datastore")," is a reference, on a local 4D application (4D or 4D Server), to a ",(0,n.kt)("a",s({parentName:"p"},{href:"/docs/es/ORDA/dsmapping#datastore"}),"datastore")," stored in another 4D application."),(0,n.kt)("p",null,"The local 4D application connects to and references the remote datastore through a call to the ",(0,n.kt)("a",s({parentName:"p"},{href:"/docs/es/API/DataStoreClass#open-datastore"}),(0,n.kt)("inlineCode",{parentName:"a"},"Open datastore"))," command."),(0,n.kt)("p",null,"On the remote machine, 4D opens a ",(0,n.kt)("a",s({parentName:"p"},{href:"/docs/es/WebServer/sessions"}),"session")," to handle requests from the application that call ",(0,n.kt)("inlineCode",{parentName:"p"},"Open datastore"),". Requests internally use the ",(0,n.kt)("a",s({parentName:"p"},{href:"/docs/es/REST/gettingStarted"}),"REST API"),", which means that they might require ",(0,n.kt)("a",s({parentName:"p"},{href:"/docs/es/REST/authUsers"}),"available licenses"),"."),(0,n.kt)("h2",s({},{id:"utilizando-sesiones-web"}),"Utilizando sesiones web"),(0,n.kt)("p",null,"When you work with a remote datastore referenced through calls to the ",(0,n.kt)("a",s({parentName:"p"},{href:"/docs/es/API/DataStoreClass#open-datastore"}),(0,n.kt)("inlineCode",{parentName:"a"},"Open datastore"))," command, the connection with the requesting processes is handled via ",(0,n.kt)("a",s({parentName:"p"},{href:"/docs/es/WebServer/sessions"}),"web sessions")," on the remote machine."),(0,n.kt)("p",null,"The web session created on the remote datastore is identified using a internal session ID which is associated to the ",(0,n.kt)("inlineCode",{parentName:"p"},"localID")," on the 4D application side. Esta sesi\xf3n gestiona autom\xe1ticamente el acceso a los datos, a las selecciones de entidades o a las entidades."),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"localID")," is local to the machine that connects to the remote datastore, which means:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If other processes of the same application need to access the same remote datastore, they can use the same ",(0,n.kt)("inlineCode",{parentName:"li"},"localID")," and thus, share the same session."),(0,n.kt)("li",{parentName:"ul"},"If another process of the same application opens the same remote datastore but with another ",(0,n.kt)("inlineCode",{parentName:"li"},"localID"),", it will create a new session on the remote datastore."),(0,n.kt)("li",{parentName:"ul"},"If another machine connects to the same remote datastore with the same ",(0,n.kt)("inlineCode",{parentName:"li"},"localID"),", it will create another session with another cookie.")),(0,n.kt)("p",null,"Estos principios se ilustran en los gr\xe1ficos siguientes:"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(251512).Z,width:"962",height:"719"})),(0,n.kt)("h3",s({},{id:"visualizaci\xf3n-de-las-sesiones"}),"Visualizaci\xf3n de las sesiones"),(0,n.kt)("p",null,"Los procesos que gestionan las sesiones de acceso al datastore se muestran en la ventana de administraci\xf3n de 4D Server:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'name: "REST Handler: ',"\\","<process name",">",'"'),(0,n.kt)("li",{parentName:"ul"},"tipo: tipo Worker Server HTTP"),(0,n.kt)("li",{parentName:"ul"},"session: session name is the user name passed to the ",(0,n.kt)("inlineCode",{parentName:"li"},"Open datastore")," command.")),(0,n.kt)("p",null,"En el siguiente ejemplo, se est\xe1n ejecutando dos procesos para la misma sesi\xf3n:"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(146413).Z,width:"1402",height:"708"})),(0,n.kt)("h2",s({},{id:"cierre-de-las-sesiones"}),"Cierre de las sesiones"),(0,n.kt)("p",null,"As described in the ",(0,n.kt)("a",s({parentName:"p"},{href:"/docs/es/WebServer/sessions#session-lifetime"}),"session lifetime")," paragraph, a web session is automatically closed by 4D when there has been no activity during its timeout period. The default timeout is 60 mn, but this value can be modified using the ",(0,n.kt)("em",{parentName:"p"},"connectionInfo")," parameter of the ",(0,n.kt)("inlineCode",{parentName:"p"},"Open datastore")," command."),(0,n.kt)("p",null,"Si se env\xeda una solicitud al almac\xe9n de datos remoto despu\xe9s de haber cerrado la sesi\xf3n, \xe9sta se vuelve a crear autom\xe1ticamente si es posible (licencia disponible, servidor no detenido...). However, keep in mind that the context of the session regarding locks and transactions is lost (see below)."),(0,n.kt)("h2",s({},{id:"bloqueo-y-transacciones"}),"Bloqueo y transacciones"),(0,n.kt)("p",null,"Las funcionalidades ORDA relacionadas con el bloqueo de entidades y transacciones se gestionan a nivel del proceso en los datastores remotos, igual que en el modo cliente/servidor ORDA:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If a process locks an entity from a remote datastore, the entity is locked for all other processes, even when these processes share the same session (see ",(0,n.kt)("a",s({parentName:"li"},{href:"/docs/es/ORDA/entities#entity-locking"}),"Entity locking"),"). Si varias entidades que apuntan a un mismo registro han sido bloqueadas en un proceso, todas deben ser desbloqueadas en el proceso para eliminar el bloqueo. Si se ha puesto un bloqueo en una entidad, el bloqueo se elimina cuando ya no hay ninguna referencia a esta entidad en la memoria."),(0,n.kt)("li",{parentName:"ul"},"Transactions can be started, validated or cancelled separately on each remote datastore using the ",(0,n.kt)("inlineCode",{parentName:"li"},"dataStore.startTransaction()"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"dataStore.cancelTransaction()"),", and ",(0,n.kt)("inlineCode",{parentName:"li"},"dataStore.validateTransaction()")," functions. No afectan a otros almacenes de datos."),(0,n.kt)("li",{parentName:"ul"},"Classic 4D language commands (",(0,n.kt)("inlineCode",{parentName:"li"},"START TRANSACTION"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"VALIDATE TRANSACTION"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"CANCEL TRANSACTION"),") only apply to the main datastore (returned by ",(0,n.kt)("inlineCode",{parentName:"li"},"ds"),").\nSi una entidad de un datastore remoto es retenida por una transacci\xf3n en un proceso, los otros procesos no pueden actualizarla, incluso si estos procesos comparten la misma sesi\xf3n."),(0,n.kt)("li",{parentName:"ul"},"Los bloqueos en las entidades son eliminados y las transacciones son anuladas:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"cuando el proceso es eliminado."),(0,n.kt)("li",{parentName:"ul"},"cuando la sesi\xf3n se cierra en el servidor"),(0,n.kt)("li",{parentName:"ul"},"cuando la sesi\xf3n es terminada desde la ventana de administraci\xf3n del servidor.")))))}u.isMDXComponent=!0},146413:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/sessionAdmin-fb7129cb6aaab939e9e8b20cb43bce8f.png"},251512:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/sessions-69775ca2d11bfdbc289284efe41c0b59.png"}}]);