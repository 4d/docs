"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["17447"],{485076:function(e,n,s){s.r(n),s.d(n,{default:()=>u,frontMatter:()=>i,metadata:()=>a,assets:()=>r,toc:()=>c,contentTitle:()=>l});var a=JSON.parse('{"id":"REST/classFunctions","title":"Llamando a funciones de clase","description":"Puede llamar a funciones clase modelo de datos definidas para el modelo de datos ORDA y funciones clase singleton a trav\xe9s de peticiones REST, para que pueda beneficiarse de la API expuesta de la aplicaci\xf3n 4D seleccionada.","source":"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R7/REST/ClassFunctions.md","sourceDirName":"REST","slug":"/REST/classFunctions","permalink":"/docs/es/20-R7/REST/classFunctions","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20REST%2FClassFunctions.md%20(20-R7)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R7","frontMatter":{"id":"classFunctions","title":"Llamando a funciones de clase"},"sidebar":"docs","previous":{"title":"Manipulaci\xf3n de datos","permalink":"/docs/es/20-R7/REST/manData"},"next":{"title":"Acerca de las peticiones REST","permalink":"/docs/es/20-R7/REST/REST_requests"}}'),d=s("785893"),t=s("250065");let i={id:"classFunctions",title:"Llamando a funciones de clase"},l=void 0,r={},c=[{value:"Llamadas de las funciones",id:"llamadas-de-las-funciones",level:2},{value:"POST request",id:"post-request",level:4},{value:"GET request",id:"get-request",level:4},{value:"Function configuration",id:"function-configuration",level:2},{value:"<code>exposed</code>",id:"exposed",level:3},{value:"<code>onHttpGet</code>",id:"onhttpget",level:3},{value:"Hilo seguro",id:"hilo-seguro",level:3},{value:"Par\xe1metros",id:"par\xe1metros",level:2},{value:"Par\xe1metro de valor escalar",id:"par\xe1metro-de-valor-escalar",level:3},{value:"POST request",id:"post-request-1",level:4},{value:"GET request",id:"get-request-1",level:4},{value:"Par\xe1metro de entidad",id:"par\xe1metro-de-entidad",level:3},{value:"Par\xe1metro de entidad asociado",id:"par\xe1metro-de-entidad-asociado",level:4},{value:"Par\xe1metro de selecci\xf3n de entidad",id:"par\xe1metro-de-selecci\xf3n-de-entidad",level:3},{value:"POST request examples",id:"post-request-examples",level:2},{value:"Utilizar una funci\xf3n de clase de datastore",id:"utilizar-una-funci\xf3n-de-clase-de-datastore",level:3},{value:"Resultado",id:"resultado",level:4},{value:"Utilizar una funci\xf3n de clase de dataclass",id:"utilizar-una-funci\xf3n-de-clase-de-dataclass",level:3},{value:"Resultado",id:"resultado-1",level:4},{value:"Utilizar una funci\xf3n de clase de una entidad",id:"utilizar-una-funci\xf3n-de-clase-de-una-entidad",level:3},{value:"Resultado",id:"resultado-2",level:4},{value:"Utilizar una funci\xf3n clase entitySelection",id:"utilizar-una-funci\xf3n-clase-entityselection",level:3},{value:"Resultado",id:"resultado-3",level:4},{value:"Utilizar una funci\xf3n de clase de selecci\xf3n de entidades y un conjunto de entidades",id:"utilizar-una-funci\xf3n-de-clase-de-selecci\xf3n-de-entidades-y-un-conjunto-de-entidades",level:3},{value:"Resultado",id:"resultado-4",level:4},{value:"Utilizar una funci\xf3n de clase de selecci\xf3n de entidades y unorderBy",id:"utilizar-una-funci\xf3n-de-clase-de-selecci\xf3n-de-entidades-y-unorderby",level:3},{value:"Resultado",id:"resultado-5",level:4},{value:"Utilizar una entidad que se crear\xe1 en el servidor",id:"utilizar-una-entidad-que-se-crear\xe1-en-el-servidor",level:3},{value:"Resultado",id:"resultado-6",level:4},{value:"Utilizar una entidad a actualizar en el servidor",id:"utilizar-una-entidad-a-actualizar-en-el-servidor",level:3},{value:"Resultado",id:"resultado-7",level:4},{value:"Crear una entidad con una entidad relacionada",id:"crear-una-entidad-con-una-entidad-relacionada",level:3},{value:"Resultado",id:"resultado-8",level:4},{value:"Actualizar una entidad con una entidad relacionada",id:"actualizar-una-entidad-con-una-entidad-relacionada",level:3},{value:"Resultado",id:"resultado-9",level:4},{value:"Recibir una selecci\xf3n de entidades como par\xe1metro",id:"recibir-una-selecci\xf3n-de-entidades-como-par\xe1metro",level:3},{value:"Resultado",id:"resultado-10",level:4},{value:"Utilizar una selecci\xf3n de entidades actualizada en el cliente",id:"utilizar-una-selecci\xf3n-de-entidades-actualizada-en-el-cliente",level:3},{value:"GET request examples",id:"get-request-examples",level:2},{value:"Returning a document",id:"returning-a-document",level:3},{value:"Using an entity to download a PDF document",id:"using-an-entity-to-download-a-pdf-document",level:3},{value:"Using an entity selection to get a list",id:"using-an-entity-selection-to-get-a-list",level:3}];function o(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:["Puede llamar a ",(0,d.jsx)(n.a,{href:"/docs/es/20-R7/ORDA/ordaClasses",children:"funciones clase modelo de datos"})," definidas para el modelo de datos ORDA y ",(0,d.jsx)(n.a,{href:"/docs/es/20-R7/REST/singleton",children:"funciones clase singleton"})," a trav\xe9s de peticiones REST, para que pueda beneficiarse de la API expuesta de la aplicaci\xf3n 4D seleccionada."]}),"\n",(0,d.jsx)(n.p,{children:"Functions can be called in two ways:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["using ",(0,d.jsx)(n.strong,{children:"POST requests"}),", with data parameters passed in the body of the request."]}),"\n",(0,d.jsxs)(n.li,{children:["using ",(0,d.jsx)(n.strong,{children:"GET requests"}),", with parameters directly passed in the URL."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"POST requests provide a better security level because they avoid running sensitive code through an action as simple as clicking on a link. Sin embargo, las peticiones GET pueden ser m\xe1s compatibles con la experiencia del usuario, permitiendo llamar a las funciones introduciendo una URL en un navegador (nota: el desarrollador debe asegurarse de que no se hace ninguna acci\xf3n sensible en dichas funciones)."}),"\n",(0,d.jsx)(n.h2,{id:"llamadas-de-las-funciones",children:"Llamadas de las funciones"}),"\n",(0,d.jsx)(n.p,{children:"The following ORDA and singleton functions can be called in REST:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Funci\xf3n de clase"}),(0,d.jsx)(n.th,{children:"Sintaxis"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"/docs/es/20-R7/ORDA/ordaClasses#datastore-class",children:"datastore class"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/rest/$catalog/DataStoreClassFunction"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"/docs/es/20-R7/ORDA/ordaClasses#dataclass-class",children:"dataclass class"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/rest/{dataClass}/DataClassClassFunction"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"/docs/es/20-R7/ORDA/ordaClasses#entityselection-class",children:"entitySelection class"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/rest/{dataClass}/EntitySelectionClassFunction"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/rest/{dataClass}/EntitySelectionClassFunction/$entityset/entitySetNumber"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/rest/{dataClass}/EntitySelectionClassFunction/$filter"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/rest/{dataClass}/EntitySelectionClassFunction/$orderby"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"/docs/es/20-R7/ORDA/ordaClasses#entity-class",children:"entity class"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/rest/{dataClass}(key)/EntityClassFunction/"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"/docs/es/20-R7/Concepts/classes#singleton-classes",children:"Clase Singleton"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"/rest/$singleton/SingletonClass/SingletonClassFunction"})," (ver la ",(0,d.jsx)(n.a,{href:"/docs/es/20-R7/REST/singleton",children:"p\xe1gina $singleton"}),")"]})]})]})]}),"\n",(0,d.jsx)(n.admonition,{type:"note",children:(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"/rest/{dataClass}/Function"})," puede utilizarse para llamar a una clase de datos o a una funci\xf3n de selecci\xf3n de entidades (",(0,d.jsx)(n.code,{children:"/rest/{dataClass}"})," devuelve todas las entidades de la DataClass como una selecci\xf3n de entidades). La funci\xf3n se busca primero en la clase de selecci\xf3n de entidades. Si no se encuentra, se busca en la dataclass. En otras palabras, si una funci\xf3n con el mismo nombre se define tanto en la clase DataClass como en la clase EntitySelection, la funci\xf3n de clase de DataClass nunca se ejecutar\xe1."]})}),"\n",(0,d.jsxs)(n.p,{children:["Las funciones se llaman simplemente en la interfaz ORDA o clase singleton apropiada, sin (). ",(0,d.jsx)(n.a,{href:"#parameters",children:"Par\xe1metros"})," se pasan en el cuerpo de la petici\xf3n POST (llamadas ",(0,d.jsx)(n.code,{children:"POST"}),") o en la colecci\xf3n ",(0,d.jsx)(n.code,{children:"params"})," de la URL (llamadas ",(0,d.jsx)(n.code,{children:"GET"}),")."]}),"\n",(0,d.jsxs)(n.p,{children:["Por ejemplo, si ha definido una funci\xf3n ",(0,d.jsx)(n.code,{children:"getCity()"})," en la dataclass City, podr\xeda llamarla utilizando la siguiente petici\xf3n:"]}),"\n",(0,d.jsx)(n.h4,{id:"post-request",children:"POST request"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"/rest/City/getCity"})}),"\n",(0,d.jsxs)(n.p,{children:["con los datos en el cuerpo de la petici\xf3n POST: ",(0,d.jsx)(n.code,{children:'["Aguada"]'})]}),"\n",(0,d.jsx)(n.h4,{id:"get-request",children:"GET request"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"/rest/City/getCity?$params='[\"Aguada\"]'"})}),"\n",(0,d.jsx)(n.admonition,{type:"note",children:(0,d.jsxs)(n.p,{children:["La funci\xf3n ",(0,d.jsx)(n.code,{children:"getCity()"})," debe haber sido declarada con la palabra clave ",(0,d.jsx)(n.code,{children:"onHttpGet"})," (ver ",(0,d.jsx)(n.a,{href:"#function-configuration",children:"Configuraci\xf3n de la funci\xf3n"}),")."]})}),"\n",(0,d.jsx)(n.p,{children:"En el lenguaje 4D, esta llamada equivale a:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:'$city:=ds.City.getCity("Aguada")\n'})}),"\n",(0,d.jsx)(n.h2,{id:"function-configuration",children:"Function configuration"}),"\n",(0,d.jsx)(n.h3,{id:"exposed",children:(0,d.jsx)(n.code,{children:"exposed"})}),"\n",(0,d.jsxs)(n.p,{children:["Todas las funciones permitidas para ser llamadas directamente desde peticiones HTTP REST (",(0,d.jsx)(n.code,{children:"POST"})," o ",(0,d.jsx)(n.code,{children:"GET"}),") deben ser declaradas con la palabra clave ",(0,d.jsx)(n.code,{children:"exposed"}),". Por ejemplo:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:"exposed Function getSomeInfo() : 4D.OutgoingMessage\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Ver la secci\xf3n ",(0,d.jsx)(n.a,{href:"/docs/es/20-R7/ORDA/ordaClasses#exposed-vs-non-exposed-functions",children:"Funciones expuestas vs. no expuestas"}),"."]}),"\n",(0,d.jsx)(n.h3,{id:"onhttpget",children:(0,d.jsx)(n.code,{children:"onHttpGet"})}),"\n",(0,d.jsxs)(n.p,{children:["Las funciones permitidas para ser llamadas desde solicitudes HTTP ",(0,d.jsx)(n.code,{children:"GET"})," tambi\xe9n deben ser declaradas espec\xedficamente con la ",(0,d.jsxs)(n.a,{href:"/docs/es/20-R7/ORDA/ordaClasses#onhttpget-keyword",children:["palabra clave ",(0,d.jsx)(n.code,{children:"onHttpGet"})]}),". Por ejemplo:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:"//allowing GET requests\nexposed onHttpGet Function getSomeInfo() : 4D.OutgoingMessage\n"})}),"\n",(0,d.jsx)(n.h3,{id:"hilo-seguro",children:"Hilo seguro"}),"\n",(0,d.jsxs)(n.p,{children:["Todo el c\xf3digo 4D llamado desde las peticiones REST ",(0,d.jsx)(n.strong,{children:"debe ser hilo seguro"})," si el proyecto se ejecuta en modo compilado, porque el Servidor REST siempre utiliza procesos apropiativos en este caso (el valor de la propiedad ",(0,d.jsx)(n.a,{href:"/docs/es/20-R7/WebServer/webServerConfig#use-preemptive-processes",children:(0,d.jsx)(n.em,{children:"Utilizar proceso apropiativo"})})," es ignorado por el Servidor REST)."]}),"\n",(0,d.jsx)(n.admonition,{type:"info",children:(0,d.jsxs)(n.p,{children:["Puede restringir las llamadas a funciones ORDA espec\xedficas configurando los privilegios apropiados en el archivo ",(0,d.jsx)(n.a,{href:"/docs/es/20-R7/ORDA/privileges#rolesjson-file",children:(0,d.jsx)(n.strong,{children:"roles.json"})}),"."]})}),"\n",(0,d.jsx)(n.h2,{id:"par\xe1metros",children:"Par\xe1metros"}),"\n",(0,d.jsxs)(n.p,{children:["You can send parameters to functions defined in ORDA user classes or singletons. Del lado del servidor, ser\xe1n recibidos en los ",(0,d.jsx)(n.a,{href:"/docs/es/20-R7/Concepts/parameters#declaring-parameters",children:"par\xe1metros declarados"})," de las funciones clase."]}),"\n",(0,d.jsx)(n.p,{children:"Se aplican las siguientes reglas:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["In functions called through POST requests, parameters must be passed ",(0,d.jsx)(n.strong,{children:"in the body of the POST request"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["In functions called through GET requests, parameters must be passed ",(0,d.jsx)(n.strong,{children:'in the URL with "?$params=" syntax'}),"."]}),"\n",(0,d.jsx)(n.li,{children:"Los par\xe1metros deben estar incluidos en una colecci\xf3n (formato JSON)."}),"\n",(0,d.jsx)(n.li,{children:"Todos los tipos de datos escalares soportados en las colecciones JSON pueden ser pasados como par\xe1metros."}),"\n",(0,d.jsxs)(n.li,{children:["La selecci\xf3n de entidades y la entidad se pueden pasar como par\xe1metros. The parameter list must contain specific attributes used by the REST server to assign data to the corresponding ORDA objects: ",(0,d.jsx)(n.code,{children:"__DATACLASS"}),", ",(0,d.jsx)(n.code,{children:"__ENTITY"}),", ",(0,d.jsx)(n.code,{children:"__ENTITIES"}),", ",(0,d.jsx)(n.code,{children:"__DATASET"}),"."]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Ver ",(0,d.jsx)(n.a,{href:"#usando-una-entidad-que-se-crear%C3%A1-en-el-servidor",children:"este ejemplo"})," y ",(0,d.jsx)(n.a,{href:"#recibiendo-una-selecci%C3%B3n-de-entidades-como-par%C3%A1metro",children:"este ejemplo"}),"."]}),"\n",(0,d.jsx)(n.h3,{id:"par\xe1metro-de-valor-escalar",children:"Par\xe1metro de valor escalar"}),"\n",(0,d.jsx)(n.p,{children:'Scalar value parameter(s) must simply be enclosed in a collection. Todos los tipos de datos JSON son soportados en los par\xe1metros, incluidos los punteros JSON. Las fechas se pueden pasar como cadenas en formato de fecha ISO 8601 (por ejemplo, "2020-08-22T22:00:000Z").'}),"\n",(0,d.jsxs)(n.p,{children:["For example, with a  dataclass function ",(0,d.jsx)(n.code,{children:"getCities()"})," receiving text parameters:"]}),"\n",(0,d.jsx)(n.h4,{id:"post-request-1",children:"POST request"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"/rest/City/getCities"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Par\xe1metros en el cuerpo:"}),' ["Aguada","Paris"]']}),"\n",(0,d.jsx)(n.h4,{id:"get-request-1",children:"GET request"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:'/rest/City/getCities?$params=\'["Aguada","Paris"]\''})}),"\n",(0,d.jsx)(n.h3,{id:"par\xe1metro-de-entidad",children:"Par\xe1metro de entidad"}),"\n",(0,d.jsxs)(n.p,{children:["Las entidades pasadas en los par\xe1metros son referenciadas en el servidor a trav\xe9s de su llave (",(0,d.jsx)(n.em,{children:"es decir,"})," propiedad __KEY). Las entidades pasadas en los par\xe1metros son referenciadas en el servidor a trav\xe9s de su llave (",(0,d.jsx)(n.em,{children:"es decir,"})," propiedad __KEY).\nTambi\xe9n puede pasar valores para todos los atributos de la entidad. Estos valores se utilizar\xe1n autom\xe1ticamente para la entidad manejada en el servidor."]}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:"Si la petici\xf3n env\xeda los valores de atributo modificados para una entidad existente en el servidor, la funci\xf3n de modelo de datos ORDA llamada se ejecutar\xe1 autom\xe1ticamente en el servidor con los valores modificados. Esta funcionalidad le permite, por ejemplo, verificar el resultado de una operaci\xf3n en una entidad, tras aplicar todas las reglas de negocio, desde la aplicaci\xf3n cliente. A continuaci\xf3n, puede decidir guardar o no la entidad en el servidor."}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Propiedades"}),(0,d.jsx)(n.th,{children:"Tipo"}),(0,d.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Atributos de la entidad"}),(0,d.jsx)(n.td,{children:"mixto"}),(0,d.jsx)(n.td,{children:"Opcional - Valores a modificar"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"__DATACLASS"}),(0,d.jsx)(n.td,{children:"Text"}),(0,d.jsx)(n.td,{children:"Obligatorio - Indica la Dataclass de la entidad"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"__ENTITY"}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{children:"Obligatorio - True para indicar al servidor que el par\xe1metro es una entidad"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"__KEY"}),(0,d.jsx)(n.td,{children:"mixto (mismo tipo que la llave primaria)"}),(0,d.jsx)(n.td,{children:"Opcional - llave primaria de la entidad"})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Si no se proporciona ",(0,d.jsx)(n.code,{children:"__KEY"}),", se crea una nueva entidad en el servidor con los atributos dados."]}),"\n",(0,d.jsxs)(n.li,{children:["Si ",(0,d.jsx)(n.code,{children:"__KEY"})," es suministrado, la entidad correspondiente a ",(0,d.jsx)(n.code,{children:"__KEY"})," se carga en el servidor con los atributos dados"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"See examples below for creating or updating entities with POST requests.\nSee an example of contents downloading using an entity with a GET request."}),"\n",(0,d.jsx)(n.h4,{id:"par\xe1metro-de-entidad-asociado",children:"Par\xe1metro de entidad asociado"}),"\n",(0,d.jsxs)(n.p,{children:["Las mismas propiedades que para un ",(0,d.jsx)(n.a,{href:"#entity-parameter",children:"par\xe1metro de entidad"}),". Adem\xe1s, la entidad relacionada debe existir y ser referenciada por __KEY, que contiene su llave primaria."]}),"\n",(0,d.jsxs)(n.p,{children:["Ver los ejemplos para ",(0,d.jsx)(n.a,{href:"#creating-an-entity-with-a-related-entity",children:"creaci\xf3n"})," o ",(0,d.jsx)(n.a,{href:"#updating-an-entity-with-a-related-entity",children:"actualizaci\xf3n"})," de las entidades con las entidades relacionadas."]}),"\n",(0,d.jsx)(n.h3,{id:"par\xe1metro-de-selecci\xf3n-de-entidad",children:"Par\xe1metro de selecci\xf3n de entidad"}),"\n",(0,d.jsxs)(n.p,{children:["La selecci\xf3n de entidades debe haber sido definida previamente utilizando ",(0,d.jsx)(n.a,{href:"/docs/es/20-R7/REST/method#methodentityset",children:"$method=entityset"}),"."]}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:"Si la petici\xf3n env\xeda una selecci\xf3n de entidades modificada al servidor, la funci\xf3n del modelo de datos ORDA llamada se ejecutar\xe1 autom\xe1ticamente en el servidor con la selecci\xf3n de entidades modificada."}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Propiedades"}),(0,d.jsx)(n.th,{children:"Tipo"}),(0,d.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Atributos de la entidad"}),(0,d.jsx)(n.td,{children:"mixto"}),(0,d.jsx)(n.td,{children:"Opcional - Valores a modificar"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"__DATASET"}),(0,d.jsx)(n.td,{children:"Text"}),(0,d.jsx)(n.td,{children:"Obligatorio - entitySetID (UUID) de la selecci\xf3n de entidades"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"__ENTITIES"}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{children:"Obligatorio - True para indicar al servidor que el par\xe1metro es una selecci\xf3n de entidades"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["Ver ejemplo para ",(0,d.jsx)(n.a,{href:"#receiving-an-entity-selection-as-parameter",children:"recibir una selecci\xf3n de entidad"})," con una petici\xf3n POST.\nVer ejemplo para ",(0,d.jsx)(n.a,{href:"#using-an-entity-selection-to-get-a-list",children:"obtener una lista construida sobre una selecci\xf3n de entidades"})," con una petici\xf3n GET."]}),"\n",(0,d.jsx)(n.h2,{id:"post-request-examples",children:"POST request examples"}),"\n",(0,d.jsx)(n.p,{children:"Esta base de datos se expone como un almac\xe9n de datos remoto en localhost (puerto 8111):"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{alt:"alt-text",src:s(767405).Z+"",width:"882",height:"599"})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-funci\xf3n-de-clase-de-datastore",children:"Utilizar una funci\xf3n de clase de datastore"}),"\n",(0,d.jsxs)(n.p,{children:["La clase de ",(0,d.jsx)(n.code,{children:"DataStore"})," US_Cities ofrece una API:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'// Clase DataStore \n\nClass extends DataStoreImplementation\n\nexposed Function getName() : Text\n    return "US cities and zip codes manager"\n'})}),"\n",(0,d.jsx)(n.p,{children:"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:"127.0.0.1:8111/rest/$catalog/getName"})]}),"\n",(0,d.jsx)(n.h4,{id:"resultado",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n"result": "US cities and zip codes manager"\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-funci\xf3n-de-clase-de-dataclass",children:"Utilizar una funci\xf3n de clase de dataclass"}),"\n",(0,d.jsxs)(n.p,{children:["La clase de Dataclass ",(0,d.jsx)(n.code,{children:"City"})," ofrece una PI que devuelve una entidad de ciudad a partir del nombre pasado en par\xe1metro:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'// ClassCity \n\nClass extends DataClass\n\nexposed Function getCity($city : Text ) : cs.CityEntity\n	return This.query("name = :1";$city).first()\n'})}),"\n",(0,d.jsx)(n.p,{children:"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:"127.0.0.1:8111/rest/City/getCity"})]}),"\n",(0,d.jsx)(n.p,{children:'Petici\xf3n: ["Aguada"]'}),"\n",(0,d.jsx)(n.h4,{id:"resultado-1",children:"Resultado"}),"\n",(0,d.jsx)(n.p,{children:"El resultado es una entidad:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "__entityModel": "City",\n    "__DATACLASS": "City",\n    "__KEY": "1",\n    "__TIMESTAMP": "2020-03-09T08:03:19.923Z",\n    "__STAMP": 1,\n    "ID": 1,\n    "name": "Aguada",\n    "countyFIPS": 72003,\n    "county": {\n        "__deferred": {\n            "uri": "/rest/County(72003)",\n            "__KEY": "72003"\n        }\n    },\n    "zips": {\n        "__deferred": {\n            "uri": "/rest/City(1)/zips?$expand=zips"\n        }\n    }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-funci\xf3n-de-clase-de-una-entidad",children:"Utilizar una funci\xf3n de clase de una entidad"}),"\n",(0,d.jsxs)(n.p,{children:["La clase de entidad ",(0,d.jsx)(n.code,{children:"CityEntity"})," ofrece una API:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'// Clase CityEntity \n\nClass extends Entity\n\nexposed Function getPopulation()\n    return This.zips.sum("population")\n'})}),"\n",(0,d.jsx)(n.p,{children:"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:"127.0.0.1:8111/rest/City(2)/getPopulation"})]}),"\n",(0,d.jsx)(n.h4,{id:"resultado-2",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "result": 48814\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-funci\xf3n-clase-entityselection",children:"Utilizar una funci\xf3n clase entitySelection"}),"\n",(0,d.jsxs)(n.p,{children:["La clase de selecci\xf3n de entidad ",(0,d.jsx)(n.code,{children:"CityEntity"})," ofrece una API:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'// CitySelection class\n\nClass extends EntitySelection\n\nexposed Function getPopulation()\n    return This.zips.sum("population")\n'})}),"\n",(0,d.jsx)(n.p,{children:"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:'127.0.0.1:8111/rest/City/getPopulation/?$filter="ID<3"'})]}),"\n",(0,d.jsx)(n.h4,{id:"resultado-3",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "result": 87256\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-funci\xf3n-de-clase-de-selecci\xf3n-de-entidades-y-un-conjunto-de-entidades",children:"Utilizar una funci\xf3n de clase de selecci\xf3n de entidades y un conjunto de entidades"}),"\n",(0,d.jsxs)(n.p,{children:["La clase ",(0,d.jsx)(n.code,{children:"StudentsSelection"})," tine una funci\xf3n ",(0,d.jsx)(n.code,{children:"getAgeAverage"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"// Clase StudentsSelection\n\nClass extends EntitySelection\n\nexposed Function getAgeAverage : Integer\n	var $sum : Integer\n	var $s : Object\n\n	$sum:=0\n	For each ($s;This)\n	    $sum:=$sum+$s.age()\n	End for each\n	return $sum/This.length\n"})}),"\n",(0,d.jsx)(n.p,{children:"Una vez que haya creado un conjunto de entidades, puede ejecutar esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:"127.0.0.1:8044/rest/Students/getAgeAverage/$entityset/17E83633FFB54ECDBF947E5C620BB532"})]}),"\n",(0,d.jsx)(n.h4,{id:"resultado-4",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "result": 34\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-funci\xf3n-de-clase-de-selecci\xf3n-de-entidades-y-unorderby",children:"Utilizar una funci\xf3n de clase de selecci\xf3n de entidades y unorderBy"}),"\n",(0,d.jsxs)(n.p,{children:["La clase ",(0,d.jsx)(n.code,{children:"StudentsSelection"})," tiene una funci\xf3n ",(0,d.jsx)(n.code,{children:"getLastSummary"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'// Clase StudentsSelection\n\n\nClass extends EntitySelection\n\nexposed Function getLastSummary : Text\n	var $last : Object\n\n	$last:=This.last()\n	return =$last.firstname+" - "+$last.lastname+" is ... " +String($last.age())\n'})}),"\n",(0,d.jsx)(n.p,{children:"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:'127.0.0.1:8044/rest/Students/getLastSummary/$entityset/?$filter="lastname=b@"&$orderby="lastname"'})]}),"\n",(0,d.jsx)(n.h4,{id:"resultado-5",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "result": "Wilbert - Bull is ... 21"\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-entidad-que-se-crear\xe1-en-el-servidor",children:"Utilizar una entidad que se crear\xe1 en el servidor"}),"\n",(0,d.jsxs)(n.p,{children:["La clase de Dataclass ",(0,d.jsx)(n.code,{children:"Students"})," tiene la funci\xf3n ",(0,d.jsx)(n.code,{children:"pushData()"})," que recibe una entidad que contiene los datos del cliente. El m\xe9todo ",(0,d.jsx)(n.code,{children:"checkData()"})," efect\xfaa algunos controles. Si son v\xe1lidos, la entidad se guarda y se devuelve."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"// Clase Students\n\nClass extends DataClass\n\nexposed Function pushData($entity : Object) : Object\n	var $status : Object\n\n	$status:=checkData($entity) // $status es un objeto con una propiedad booleana success \n\n	Si ($status.success)\n	    $status:=$entity.save()\n 	   If ($status. uccess)\n 	       return $entity\n  	  End if\n	End if\n\n	return $status\n\n"})}),"\n",(0,d.jsx)(n.p,{children:"Lance esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students/pushData"})]}),"\n",(0,d.jsx)(n.p,{children:"Cuerpo de la petici\xf3n:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"firstname":"Ann",\n"lastname":"Brown"\n}]\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Como ninguna ",(0,d.jsx)(n.code,{children:"__KEY"})," es dada, una nueva entidad Students est\xe1 cargada en el servidor ",(0,d.jsx)(n.strong,{children:"con los atributos del cliente"}),". Como la funci\xf3n ",(0,d.jsx)(n.code,{children:"pushData()"})," ejecuta una acci\xf3n ",(0,d.jsx)(n.code,{children:"save()"}),", la nueva entidad es creada."]}),"\n",(0,d.jsx)(n.h4,{id:"resultado-6",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "55",\n    "__TIMESTAMP": "2020-06-16T10:54:41.805Z",\n    "__STAMP": 1,\n    "ID": 55,\n    "firstname": "Ann",\n    "lastname": "BROWN",\n    "schoolID": null,\n    "school": null\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-entidad-a-actualizar-en-el-servidor",children:"Utilizar una entidad a actualizar en el servidor"}),"\n",(0,d.jsx)(n.p,{children:"Igual que el anterior pero con el atributo __KEY"}),"\n",(0,d.jsx)(n.p,{children:"Lance esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST:"}),(0,d.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students/pushData"})]}),"\n",(0,d.jsx)(n.p,{children:"Cuerpo de la petici\xf3n:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"lastname":"Brownie",\n"__KEY":55\n}]\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Como ",(0,d.jsx)(n.code,{children:"__KEY"})," es dada, la entidad Students est\xe1 cargada con llave primaria 55 ",(0,d.jsx)(n.strong,{children:"con el valor lastname recibido por el cliente"}),". Como la funci\xf3n ejecuta una acci\xf3n ",(0,d.jsx)(n.code,{children:"save()"}),", la nueva entidad es actualizada."]}),"\n",(0,d.jsx)(n.h4,{id:"resultado-7",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "55",\n    "__TIMESTAMP": "2020-06-16T11:10:21.679Z",\n    "__STAMP": 3,\n    "ID": 55,\n    "firstname": "Ann",\n    "lastname": "BROWNIE",\n    "schoolID": null,\n    "school": null\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"crear-una-entidad-con-una-entidad-relacionada",children:"Crear una entidad con una entidad relacionada"}),"\n",(0,d.jsx)(n.p,{children:"En este ejemplo, creamos una nueva entidad Students con la entidad Schools con la llave primaria 2."}),"\n",(0,d.jsx)(n.p,{children:"Lance esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST:"}),(0,d.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students/pushData"})]}),"\n",(0,d.jsx)(n.p,{children:"Cuerpo de la petici\xf3n:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"firstname":"John",\n"lastname":"Smith",\n"school":{"__KEY":2}\n}]\n'})}),"\n",(0,d.jsx)(n.h4,{id:"resultado-8",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "56",\n    "__TIMESTAMP": "2020-06-16T11:16:47.601Z",\n    "__STAMP": 1,\n    "ID": 56,\n    "firstname": "John",\n    "lastname": "SMITH",\n    "schoolID": 2,\n       "school": {\n        "__deferred": {\n            "uri": "/rest/Schools(2)",\n            "__KEY": "2"\n        }\n    }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"actualizar-una-entidad-con-una-entidad-relacionada",children:"Actualizar una entidad con una entidad relacionada"}),"\n",(0,d.jsxs)(n.p,{children:["En este ejemplo, asociamos una escuela existente a una entidad Students. La clase ",(0,d.jsx)(n.code,{children:"StudentsEntity"})," tiene una API:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"// Clase StudentsEntity\n\nClass extends Entity\n\nexposed Function putToSchool()\n	var $1, $school , $0, $status : Object\n\n		//$1 es una entidad Schools\n	$school:=$1\n		//Asocia la entidad relacionada school a la entidad actual Students\n	This.school:=$school\n\n	$status:=This.save()\n\n	$0:=$status\n"})}),"\n",(0,d.jsxs)(n.p,{children:["You run this request, called on a Students entity : ",(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students(1)/putToSchool"})," Body of the request:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'[{\n"__DATACLASS":"Schools",\n"__ENTITY":true,\n"__KEY":2\n}]\n'})}),"\n",(0,d.jsx)(n.h4,{id:"resultado-9",children:"Resultado"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "result": {\n        "success": true\n    }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"recibir-una-selecci\xf3n-de-entidades-como-par\xe1metro",children:"Recibir una selecci\xf3n de entidades como par\xe1metro"}),"\n",(0,d.jsxs)(n.p,{children:["En la clase de Dataclass ",(0,d.jsx)(n.code,{children:"Students"}),", la funci\xf3n ",(0,d.jsx)(n.code,{children:"setFinalExam()"})," actualiza una selecci\xf3n de entidad recibida ($1). En realidad, actualiza el atributo ",(0,d.jsx)(n.em,{children:"finalExam"})," con el valor recibido ($2). Devuelve las llaves primarias de las entidades actualizadas."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"// Students class\n\nClass extends DataClass\n\nexposed Function setFinalExam()\n\n\n    var $1, $es, $student, $status : Object\n    var $2, $examResult : Text\n\n    var $keys, $0 : Collection\n\n      //Entity selection\n    $es:=$1\n\n    $examResult:=$2\n\n    $keys:=New collection()\n\n      //Loop on the entity selection\n    For each ($student;$es)\n        $student.finalExam:=$examResult\n        $status:=$student.save()\n        If ($status.success)\n            $keys.push($student.ID)\n        End if\n    End for each\n\n    $0:=$keys\n"})}),"\n",(0,d.jsx)(n.p,{children:"Un conjunto de entidades se crea primero con esta petici\xf3n:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:'http://127.0.0.1:8044/rest/Students/?$filter="ID<3"&$method=entityset'})}),"\n",(0,d.jsx)(n.p,{children:"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"})," ",(0,d.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Students/setFinalExam"})]}),"\n",(0,d.jsx)(n.p,{children:"Cuerpo de la petici\xf3n:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'[\n{\n"__ENTITIES":true,\n"__DATASET":"9B9C053A111E4A288E9C1E48965FE671"\n},\n"Passed"\n]\n\n'})}),"\n",(0,d.jsx)(n.h4,{id:"resultado-10",children:"Resultado"}),"\n",(0,d.jsx)(n.p,{children:"Se han actualizado las entidades con llaves primarias 1 y 2."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'{\n    "result": [\n        1,\n        2\n    ]\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"utilizar-una-selecci\xf3n-de-entidades-actualizada-en-el-cliente",children:"Utilizar una selecci\xf3n de entidades actualizada en el cliente"}),"\n",(0,d.jsxs)(n.p,{children:["Utilizando la funci\xf3n ",(0,d.jsx)(n.code,{children:"getAgeAverage()"})," ",(0,d.jsx)(n.a,{href:"#using-an-entityselection-class-function-and-an-entityset",children:"definida anteriormente"}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:'var $remoteDS, $newStudent, $students : Object\nvar $ageAverage : Integer\n\n$remoteDS:=Open datastore(New object("hostname";"127.0.0.1:8044");"students")\n\n// $newStudent es una entidad estudiantil para proceder\n$newStudent:=...\n$students:=$remoteDS.Students.query("school.name = :1";"Math school")\n// Agregamos una entidad a la selecci\xf3n de entidad $students en el cliente\n$students.add($newStudent)\n\n// Llamamos a una funci\xf3n de la clase StudentsSelection devolviendo el promedio de edad de los estudiantes de la entity selection\n// La funci\xf3n se ejecuta en el servidor en la selecci\xf3n actualizada de entidad\n$students que inclu\xeda al estudiante a\xf1adido por el cliente\n$ageAverage:=$students.getAgeAverage()\n'})}),"\n",(0,d.jsx)(n.h2,{id:"get-request-examples",children:"GET request examples"}),"\n",(0,d.jsx)(n.h3,{id:"returning-a-document",children:"Returning a document"}),"\n",(0,d.jsxs)(n.p,{children:["You want to propose a link to download the user manual for a selected product with several formats available. You write a ",(0,d.jsx)(n.code,{children:"getUserManual()"})," function of the Products dataclass. You return an object of the ",(0,d.jsxs)(n.a,{href:"/docs/es/20-R7/API/OutgoingMessageClass",children:[(0,d.jsx)(n.code,{children:"OutgoingMessage"})," class"]}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:'// Product dataclass\nexposed onHTTPGet Function getUserManual($productId : Integer; $type : Text) : 4D.OutgoingMessage\n	\nvar $file : 4D.File\nvar $response:=4D.OutgoingMessage.new()\nvar $doc:="/RESOURCES/User manuals/product_"+String($productId)\n\nCase of \n	: ($type="pdf")\n		$file:=File($doc+".pdf")\n                $response.setBody($file.getContent()) // This is binary content \n		$response.setHeader("Content-Type"; "application/pdf")\n			\n	: ($type="jpeg")\n		$file:=File($doc+".jpeg")\n                $response.setBody($file.getContent()) // This is binary content \n		$response.setHeader("Content-Type"; "image/jpeg")\nEnd case \n	\nreturn $response\n\n'})}),"\n",(0,d.jsx)(n.p,{children:"You can call the function using a request like:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"GET"})," ",(0,d.jsx)(n.code,{children:"http://127.0.0.1:8044/rest/Products/getUserManual?$params='[1,\"pdf\"]'"})]}),"\n",(0,d.jsx)(n.h3,{id:"using-an-entity-to-download-a-pdf-document",children:"Using an entity to download a PDF document"}),"\n",(0,d.jsx)(n.p,{children:"Same example as above but you want to pass an entity as parameter to the datastore function."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:'// Product dataclass\nexposed onHTTPGet Function getUserManual($product : cs.ProductEntity) : 4D.OutgoingMessage\n	\n	var $file : 4D.File\n	var $response := 4D.OutgoingMessage.new()\n	\n	$file:=File("/RESOURCES/User manuals/"+$product.name+".pdf")\n	$response.setBody($file.getContent())\n	$response.setHeader("Content-Type"; "application/pdf")\n	\n	return $response\n'})}),"\n",(0,d.jsx)(n.p,{children:"You can call the function using this request:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"GET"})," ",(0,d.jsx)(n.code,{children:'http://127.0.0.1:8044/rest/Product/getUserManual?$params=\'[{"__DATACLASS":"Product","__ENTITY":true,"__KEY":41}]\''})]}),"\n",(0,d.jsx)(n.h3,{id:"using-an-entity-selection-to-get-a-list",children:"Using an entity selection to get a list"}),"\n",(0,d.jsxs)(n.p,{children:["You want to send an entity selection as parameter to a singleton function using a REST GET request and return a list using an object of the ",(0,d.jsxs)(n.a,{href:"/docs/es/20-R7/API/OutgoingMessageClass",children:[(0,d.jsx)(n.code,{children:"OutgoingMessage"})," class"]}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:'shared singleton Class constructor()\n	\nexposed onHTTPGet Function buildShoppingList($products : cs.ProductSelection) : 4D.OutgoingMessage\n	\n	var $p : cs.ProductsEntity\n	var $content : Text\n	var $response := 4D.OutgoingMessage.new()\n	\n	$content:=""\n	\n	For each ($p; $products)\n		$content:=$content+" "+$p.manufacturer+" - "+$p.name\n		$content:=$content+Char(Carriage return)\n	End for each \n	\n	$response.setBody($content)\n	$response.setHeader("Content-Type"; "text/plain")\n	\n	return $response\n'})}),"\n",(0,d.jsx)(n.p,{children:"You can call the function using this request:"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"GET"})," ",(0,d.jsx)(n.code,{children:'http://127.0.0.1:8044/rest/$singleton/Shopping/buildShoppingList?$params=\'[{"__DATASET":"8DB0556854HDK52FR5974F","__ENTITIES":true}]\''})]})]})}function u(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},767405:function(e,n,s){s.d(n,{Z:function(){return a}});let a=s.p+"assets/images/ordastructure-64d64d76ce9764a2365629e381bde282.png"},250065:function(e,n,s){s.d(n,{Z:function(){return l},a:function(){return i}});var a=s(667294);let d={},t=a.createContext(d);function i(e){let n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);