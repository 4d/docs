"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["63890"],{905872:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>t,toc:()=>c,default:()=>h,metadata:()=>d,assets:()=>a,contentTitle:()=>l});var d=JSON.parse('{"id":"API/OutgoingMessageClass","title":"OutgoingMessage","description":"La clase 4D.OutgoingMessage le permite construir mensajes para ser devueltos por las funciones de su aplicaci\xf3n en respuesta a las peticiones REST. Si la respuesta es del tipo 4D.OutgoingMessage, el servidor REST no devuelve un objeto, sino la instancia del objeto de la clase OutgoingMessage.","source":"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R9/API/OutgoingMessageClass.md","sourceDirName":"API","slug":"/API/OutgoingMessageClass","permalink":"/docs/es/20-R9/API/OutgoingMessageClass","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FOutgoingMessageClass.md%20(20-R9)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R9","frontMatter":{"id":"OutgoingMessageClass","title":"OutgoingMessage"},"sidebar":"docs","previous":{"title":"MailAttachment","permalink":"/docs/es/20-R9/API/MailAttachmentClass"},"next":{"title":"POP3Transporter","permalink":"/docs/es/20-R9/API/POP3TransporterClass"}}'),i=s(785893),r=s(250065);let t={id:"OutgoingMessageClass",title:"OutgoingMessage"},l=void 0,a={},c=[{value:"Ejemplo",id:"ejemplo",level:3},{value:"Objeto OutgoingMessage",id:"objeto-outgoingmessage",level:3},{value:".body",id:"body",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n",level:4},{value:".headers",id:"headers",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-1",level:4},{value:".setBody()",id:"setbody",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-2",level:4},{value:".setHeader()",id:"setheader",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-3",level:4},{value:".setStatus()",id:"setstatus",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-4",level:4},{value:".status",id:"status",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-5",level:4}];function o(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",details:"details",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",summary:"summary",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["La clase ",(0,i.jsx)(n.code,{children:"4D.OutgoingMessage"})," le permite construir mensajes para ser devueltos por las funciones de su aplicaci\xf3n en respuesta a las ",(0,i.jsx)(n.a,{href:"/docs/es/20-R9/REST/REST_requests",children:"peticiones REST"}),". Si la respuesta es del tipo ",(0,i.jsx)(n.code,{children:"4D.OutgoingMessage"}),", el servidor REST no devuelve un objeto, sino la instancia del objeto de la clase ",(0,i.jsx)(n.code,{children:"OutgoingMessage"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Normalmente, esta clase puede ser usada en funciones personalizadas ",(0,i.jsx)(n.a,{href:"/docs/es/20-R9/WebServer/http-request-handler#function-configuration",children:"HTTP request handler"})," o en funciones declaradas con la palabra clave ",(0,i.jsx)(n.a,{href:"/docs/es/20-R9/ORDA/ordaClasses#onhttpget-keyword",children:(0,i.jsx)(n.code,{children:"onHTTPGet"})})," y dise\xf1adas para manejar peticiones HTTP GET. Tales peticiones se utilizan, por ejemplo, para implementar funcionalidades como la descarga de archivos, generar y descargar im\xe1genes as\xed como recibir cualquier tipo de contenido a trav\xe9s de un navegador."]}),"\n",(0,i.jsxs)(n.p,{children:["Una instancia de esta clase se construye en 4D Server y puede ser enviada al navegador s\xf3lo por el ",(0,i.jsx)(n.a,{href:"/docs/es/20-R9/REST/gettingStarted",children:"servidor REST 4D"}),". Esta clase permite utilizar otras tecnolog\xedas distintas de HTTP (por ejemplo, m\xf3vil)."]}),"\n",(0,i.jsxs)(n.details,{children:[(0,i.jsx)(n.summary,{children:"Historia"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Lanzamiento"}),(0,i.jsx)(n.th,{children:"Modificaciones"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"20 R7"}),(0,i.jsx)(n.td,{children:"Clase a\xf1adida"})]})})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ejemplo",children:"Ejemplo"}),"\n",(0,i.jsxs)(n.p,{children:["En este ejemplo, una funci\xf3n ",(0,i.jsx)(n.code,{children:"getFile()"})," es implementada en la ",(0,i.jsx)(n.a,{href:"/docs/es/20-R9/ORDA/ordaClasses#datastore-class",children:"Datastore class"})," y ",(0,i.jsx)(n.a,{href:"/docs/es/20-R9/ORDA/ordaClasses#onhttpget-keyword",children:"puede ser llamada"})," por una petici\xf3n REST. El objetivo es devolver un archivo ",(0,i.jsx)(n.strong,{children:"testFile.pdf"})," como respuesta a la petici\xf3n:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-4d",children:'Class extends DataStoreImplementation\n\nexposed onHTTPGet Function getFile() : 4D.OutgoingMessage\n	\n	var $result:=4D.OutgoingMessage.new()\n	var $file:=File("/RESOURCES/testFile.pdf")\n	\n	$result.setBody($file.getContent()) // Se trata de contenido binario\n	$result.setHeader("Content-Type"; "application/pdf")\n	return $result\n'})}),"\n",(0,i.jsx)(n.h3,{id:"objeto-outgoingmessage",children:"Objeto OutgoingMessage"}),"\n",(0,i.jsx)(n.p,{children:"Los objetos 4D.OutgoingMessage ofrecen las siguientes propiedades y funciones:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{})})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#body",children:[(0,i.jsx)(n.strong,{children:"body"})," : any"]}),(0,i.jsx)(n.br,{}),"el cuerpo del mensaje saliente"]})}),(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#headers",children:[(0,i.jsx)(n.strong,{children:"headers"})," : Object"]}),(0,i.jsx)(n.br,{}),"los encabezados actuales del mensaje saliente en forma de pares clave/valor"]})}),(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#setbody",children:[(0,i.jsx)(n.strong,{children:".setBody"}),"( ",(0,i.jsx)(n.em,{children:"body"})," : any )"]}),(0,i.jsx)(n.br,{}),"define el mensaje saliente ",(0,i.jsx)(n.em,{children:"body"})]})}),(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#setheader",children:[(0,i.jsx)(n.strong,{children:".setHeader"}),"( ",(0,i.jsx)(n.em,{children:"key"})," : Text ; ",(0,i.jsx)(n.em,{children:"value"})," : Text )"]}),(0,i.jsx)(n.br,{}),"define lla llave ",(0,i.jsx)(n.em,{children:"key"})," del encabezado del mensaje saliente con el ",(0,i.jsx)(n.em,{children:"valuer"})," suministrado"]})}),(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#setstatus",children:[(0,i.jsx)(n.strong,{children:".setStatus"}),"( ",(0,i.jsx)(n.em,{children:"status"})," : Integer )"]}),(0,i.jsx)(n.br,{}),"define la propiedad ",(0,i.jsx)(n.code,{children:"status"})," con el ",(0,i.jsx)(n.em,{children:"status"})]})}),(0,i.jsx)(n.tr,{children:(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.a,{href:"#status",children:[(0,i.jsx)(n.strong,{children:"status"})," : Integer"]}),(0,i.jsx)(n.br,{}),"el estado actual del mensaje saliente"]})})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Un objeto 4D.OutgoingMessage es un objeto ",(0,i.jsx)(n.a,{href:"/docs/es/20-R9/Concepts/shared",children:"no compartible"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"body",children:".body"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"body"})," : any"]}),"\n",(0,i.jsx)(n.h4,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,i.jsxs)(n.p,{children:["La propiedad ",(0,i.jsx)(n.code,{children:".body"})," contiene el cuerpo del mensaje saliente. Los siguientes tipos de datos est\xe1n soportados en la propiedad ",(0,i.jsx)(n.code,{children:".body"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"text"}),"\n",(0,i.jsx)(n.li,{children:"blob"}),"\n",(0,i.jsx)(n.li,{children:"object"}),"\n",(0,i.jsx)(n.li,{children:"image"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["La propiedad ",(0,i.jsx)(n.code,{children:".body"})," es de lectura-escritura."]}),"\n",(0,i.jsxs)(n.p,{children:["Tambi\xe9n puede definir la propiedad ",(0,i.jsx)(n.code,{children:".body"})," utilizando la funci\xf3n ",(0,i.jsx)(n.a,{href:"#setbody",children:(0,i.jsx)(n.code,{children:"setBody()"})}),", en cuyo caso el encabezado ",(0,i.jsx)(n.code,{children:"content-type"})," se define autom\xe1ticamente."]}),"\n",(0,i.jsx)(n.h2,{id:"headers",children:".headers"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"headers"})," : Object"]}),"\n",(0,i.jsx)(n.h4,{id:"descripci\xf3n-1",children:"Descripci\xf3n"}),"\n",(0,i.jsxs)(n.p,{children:["La propiedad ",(0,i.jsx)(n.code,{children:".headers"})," contiene los encabezados actuales del mensaje saliente en forma de pares clave/valor."]}),"\n",(0,i.jsxs)(n.p,{children:["La propiedad ",(0,i.jsx)(n.code,{children:".headers"})," es de s\xf3lo lectura. Para definir un encabezado, use la funci\xf3n ",(0,i.jsx)(n.a,{href:"#setheader",children:(0,i.jsx)(n.code,{children:"setHeader()"})}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"setbody",children:".setBody()"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:".setBody"}),"( ",(0,i.jsx)(n.em,{children:"body"})," : any )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metros"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"body"}),(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"->"}),(0,i.jsx)(n.td,{children:"Cuerpo del mensaje saliente"})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"descripci\xf3n-2",children:"Descripci\xf3n"}),"\n",(0,i.jsxs)(n.p,{children:["La funci\xf3n ",(0,i.jsx)(n.code,{children:".setBody()"})," define el mensaje saliente ",(0,i.jsx)(n.em,{children:"body"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Los siguientes tipos de datos est\xe1n soportados en el ",(0,i.jsx)(n.em,{children:"body"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Text"}),"\n",(0,i.jsx)(n.li,{children:"Blob"}),"\n",(0,i.jsx)(n.li,{children:"Object"}),"\n",(0,i.jsx)(n.li,{children:"Imagen"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Cuando se utiliza esta funci\xf3n, el encabezado content-type se define autom\xe1ticamente en funci\xf3n del tipo ",(0,i.jsx)(n.em,{children:"body"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Content-Type:text/plain si el cuerpo es un Texto"}),"\n",(0,i.jsx)(n.li,{children:"Content-Type:application/octet-stream si el body es un Blob"}),"\n",(0,i.jsx)(n.li,{children:"Content-Type:application/json si el body es un objeto"}),"\n",(0,i.jsx)(n.li,{children:"Content-Type:image/jpeg, image/gif... si el body es una imagen"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Si ",(0,i.jsx)(n.em,{children:"body"})," no es de un tipo de valor soportado, se devuelve un error."]}),"\n",(0,i.jsx)(n.h2,{id:"setheader",children:".setHeader()"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:".setHeader"}),"( ",(0,i.jsx)(n.em,{children:"key"})," : Text ; ",(0,i.jsx)(n.em,{children:"value"})," : Text )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metros"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"key"}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:"->"}),(0,i.jsx)(n.td,{children:"Propiedad de encabezado a definir"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"value"}),(0,i.jsx)(n.td,{children:"Text"}),(0,i.jsx)(n.td,{children:"->"}),(0,i.jsx)(n.td,{children:"Valor de la propiedad del encabezado"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"descripci\xf3n-3",children:"Descripci\xf3n"}),"\n",(0,i.jsxs)(n.p,{children:["La funci\xf3n ",(0,i.jsx)(n.code,{children:".setHeader()"})," define lla llave ",(0,i.jsx)(n.em,{children:"key"})," del encabezado del mensaje saliente con el ",(0,i.jsx)(n.em,{children:"valuer"})," suministrado. Si ambos par\xe1metros no son valores texto, se produce un error."]}),"\n",(0,i.jsxs)(n.p,{children:["Al devolver una instancia del objeto 4D.OutgoingMessage, 4D define autom\xe1ticamente algunos encabezados (por ejemplo, ",(0,i.jsx)(n.code,{children:"Set-Cookie"})," con ",(0,i.jsx)(n.code,{children:"WASID4D=..."})," y ",(0,i.jsx)(n.code,{children:"4DSID__ProjectName_=...."}),")."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Si define un ",(0,i.jsx)(n.em,{children:"value"})," para la ",(0,i.jsx)(n.em,{children:"key"}),' el encabezado "Content-Type", aseg\xfarese de llamar a esta funci\xf3n despu\xe9s de la llamada a ',(0,i.jsx)(n.a,{href:"#setbody",children:(0,i.jsx)(n.code,{children:"setBody()"})}),", porque ",(0,i.jsx)(n.code,{children:"setBody()"}),' llena autom\xe1ticamente este encabezado. Para obtener una lista de valores del encabezado "Content-Type", consulte la documentaci\xf3n de ',(0,i.jsx)(n.a,{href:"/docs/es/20-R9/commands/web-send-blob",children:(0,i.jsx)(n.code,{children:"WEB SEND BLOB"})}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"setstatus",children:".setStatus()"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:".setStatus"}),"( ",(0,i.jsx)(n.em,{children:"status"})," : Integer )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metros"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"status"}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"->"}),(0,i.jsx)(n.td,{children:"Estado a definir"})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"descripci\xf3n-4",children:"Descripci\xf3n"}),"\n",(0,i.jsxs)(n.p,{children:["La funci\xf3n ",(0,i.jsx)(n.code,{children:".setStatus()"})," define la propiedad ",(0,i.jsx)(n.code,{children:"status"})," con el ",(0,i.jsx)(n.em,{children:"status"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Si ",(0,i.jsx)(n.em,{children:"status"})," no es un valor entero, se produce un error."]}),"\n",(0,i.jsxs)(n.p,{children:["Para obtener una lista de c\xf3digos de estado HTTP, consulte la ",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes",children:"lista de c\xf3digos de estado HTTP en Wikipedia"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"status",children:".status"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"status"})," : Integer"]}),"\n",(0,i.jsx)(n.h4,{id:"descripci\xf3n-5",children:"Descripci\xf3n"}),"\n",(0,i.jsxs)(n.p,{children:["La propiedad ",(0,i.jsx)(n.code,{children:".status"})," contiene el estado actual del mensaje saliente. Esta propiedad puede definirse utilizando la funci\xf3n ",(0,i.jsx)(n.a,{href:"setstatus",children:(0,i.jsx)(n.code,{children:"setStatus()"})}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},250065:function(e,n,s){s.d(n,{Z:()=>l,a:()=>t});var d=s(667294);let i={},r=d.createContext(i);function t(e){let n=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);