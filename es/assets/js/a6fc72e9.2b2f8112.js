"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["27544"],{929150:function(e,n,a){a.r(n),a.d(n,{default:()=>h,frontMatter:()=>i,metadata:()=>s,assets:()=>r,toc:()=>c,contentTitle:()=>d});var s=JSON.parse('{"id":"commands-legacy/on-sql-authentication-database-method","title":"On SQL Authentication database method","description":"$1, $2, $3 -> M\xe9todo base On SQL Authentication : Boolean","source":"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R8/commands-legacy/on-sql-authentication-database-method.md","sourceDirName":"commands-legacy","slug":"/commands/on-sql-authentication-database-method","permalink":"/docs/es/commands/on-sql-authentication-database-method","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fon-sql-authentication-database-method.md%20(20-R8)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R8","frontMatter":{"id":"on-sql-authentication-database-method","title":"On SQL Authentication database method","slug":"/commands/on-sql-authentication-database-method","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"On Server Startup database method","permalink":"/docs/es/commands/on-server-startup-database-method"},"next":{"title":"On Startup database method","permalink":"/docs/es/commands/on-startup-database-method"}}'),t=a("785893"),o=a("250065");let i={id:"on-sql-authentication-database-method",title:"On SQL Authentication database method",slug:"/commands/on-sql-authentication-database-method",displayed_sidebar:"docs"},d=void 0,r={},c=[];function l(e){let n={a:"a",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"$1, $2, $3 -> M\xe9todo base On SQL Authentication : Boolean"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Par\xe1metro"}),(0,t.jsx)(n.th,{children:"Tipo"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$1"}),(0,t.jsx)(n.td,{children:"Texto"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"Nombre de usuario"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$2"}),(0,t.jsx)(n.td,{children:"Texto"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"Contrase\xf1a"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$3"}),(0,t.jsx)(n.td,{children:"Texto"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"(Opcional) Direcci\xf3n IP del cliente al origen de la petici\xf3n"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Resultado"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:"\u2190"}),(0,t.jsx)(n.td,{children:"True = petici\xf3n aceptada, False = petici\xf3n rechazada"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:""}),"\n",(0,t.jsxs)(n.p,{children:["El M\xe9todo base On SQL Authentication puede utilizarse para filtrar las peticiones enviadas al servidor SQL integrado de 4D. Este filtro puede estar basado en el nombre y contrase\xf1a como tambi\xe9n de manera opcional en la direcci\xf3n IP del usuario. El desarrollador puede utilizar su propia tabla de usuarios o la de los usuarios 4D para evaluar los identificadores de conexi\xf3n. Una vez validada la conexi\xf3n, el comando ",(0,t.jsx)(n.a,{href:"/docs/es/commands/change-current-user",children:"CHANGE CURRENT USER"})," puede utilizarse para controlar el acceso de las peticiones dentro de la base 4D."]}),"\n",(0,t.jsxs)(n.p,{children:["Cuando existe, el M\xe9todo base On SQL Authentication es llamado autom\xe1ticamente por 4D o 4D Server en cada conexi\xf3n externa al servidor SQL. Por lo tanto el sistema interno de gesti\xf3n de los usuarios de 4D no est\xe1 activado. La conexi\xf3n se acepta s\xf3lo si el m\xe9todo de base devuelve ",(0,t.jsx)(n.a,{href:"/docs/es/commands/true",title:"True",children:"True"})," en $0 y si el comando ",(0,t.jsx)(n.a,{href:"/docs/es/commands/change-current-user",children:"CHANGE CURRENT USER"})," se ha ejecutado con \xe9xito. Si una de estas condiciones no se cumple, la petici\xf3n se rechaza."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Nota"}),": la instrucci\xf3n ",(0,t.jsx)(n.strong,{children:"SQL LOGIN(SQL_INTERNAL"}),";$usuario;$contrase\xf1a) no llama al M\xe9todo base On SQL Authentication ya que es una conexi\xf3n interna en este caso."]}),"\n",(0,t.jsx)(n.p,{children:"El m\xe9todo de base recibe hasta tres par\xe1metros de tipo Texto, pasados por 4D ($1, $2 y $3) y devuelve un booleano, $0. Esta es la descripci\xf3n de estos par\xe1metros:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Par\xe1metros"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Tipo"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$1"}),(0,t.jsx)(n.td,{children:"Texto"}),(0,t.jsx)(n.td,{children:"Nombre de usuario"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$2"}),(0,t.jsx)(n.td,{children:"Texto"}),(0,t.jsx)(n.td,{children:"Contrase\xf1a"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$3"}),(0,t.jsx)(n.td,{children:"Texto"}),(0,t.jsx)(n.td,{children:"(opcional) Direcci\xf3n IP del cliente al origen de la petici\xf3n (*)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"$0"}),(0,t.jsx)(n.td,{children:"Booleano"}),(0,t.jsx)(n.td,{children:"True = petici\xf3n aceptada, False = petici\xf3n rechazada"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["(*) 4D devuelve las direcciones IPv4 en un formato h\xedbrido IPv6/IPv4 escrito con un prefijo de 96 bits, por ejemplo ::ffff:192.168.2.34 para la direcci\xf3n IPv4 192.168.2.34. Para mayor informaci\xf3n, consulte la secci\xf3n ",(0,t.jsx)(n.em,{children:"Soporte de IP v6"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Debe declarar estos par\xe1metros de esta forma:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:"\xa0\xa0// M\xe9todo de base On Web Authentication\n\xa0\n\xa0var $1;$2;$3;$4 : Text\n\xa0var $0 : Boolean\n\xa0\xa0// C\xf3digo para el m\xe9todo\n"})}),"\n",(0,t.jsx)(n.p,{children:"La contrase\xf1a ($2) se recibe como texto est\xe1ndar."}),"\n",(0,t.jsxs)(n.p,{children:["Debe controlar los identificadores de la conexi\xf3n SQL en el M\xe9todo base On SQL Authentication. Por ejemplo, puede verificar el nombre y la contrase\xf1a utilizando una tabla de usuarios personalizada. Si los identificadores son v\xe1lidos, pase ",(0,t.jsx)(n.a,{href:"/docs/es/commands/true",title:"True",children:"True"})," en $0 para aceptar la conexi\xf3n y la petici\xf3n. 4D abre una sesi\xf3n SQL para el usuario. De lo contrario, pase ",(0,t.jsx)(n.a,{href:"/docs/es/commands/false",title:"False",children:"False"})," en $0; en este caso, la conexi\xf3n se rechaza."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Nota:"})," si el M\xe9todo base On SQL Authentication no existe, la conexi\xf3n se eval\xfaa utilizando el sistema integrado de gesti\xf3n de usuarios de 4D (si est\xe1 activo, en otras palabras, si una contrase\xf1a ha sido asignada al Dise\xf1ador). Si este sistema no est\xe1 activado, los usuarios est\xe1n conectados con los derechos de acceso del Dise\xf1ador (acceso libre)."]}),"\n",(0,t.jsxs)(n.p,{children:["Si pasa ",(0,t.jsx)(n.a,{href:"/docs/es/commands/true",title:"True",children:"True"})," en $0, debe llamar exitosamente al comando ",(0,t.jsx)(n.a,{href:"/docs/es/commands/change-current-user",children:"CHANGE CURRENT USER"})," en el M\xe9todo base On SQL Authentication para que la petici\xf3n sea aceptada y para que 4D abra una sesi\xf3n SQL para el usuario."]}),"\n",(0,t.jsx)(n.p,{children:"El uso de este comando se recomienda porque permite un mayor nivel de seguridad. Esta autenticaci\xf3n virtual tiene la doble ventaja de permitir el control de las acciones de conexi\xf3n y de ocultar para el exterior los identificadores de la conexi\xf3n en la sesi\xf3n SQL 4D."}),"\n",(0,t.jsxs)(n.p,{children:["Cuando el sistema de contrase\xf1as integrado de 4D no est\xe1 activo, la ejecuci\xf3n del comando ",(0,t.jsx)(n.a,{href:"/docs/es/commands/change-current-user",children:"CHANGE CURRENT USER"})," no tiene efecto; los usuarios se conectan con los derechos de acceso del Dise\xf1ador."]}),"\n",(0,t.jsx)(n.p,{children:'Este ejemplo del M\xe9todo base On SQL Authentication verifica que la petici\xf3n de conexi\xf3n provenga de la red interna, valida los identificadores y luego asigna los derechos de accesos "sql_user" para la sesi\xf3n SQL.'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-4d",children:'\xa0var $1;$2;$3;$4 : Text\n\xa0var $0 : Boolean\n\xa0\xa0//$1: usuario\n\xa0\xa0//$2: contrase\xf1a\n\xa0\xa0//{$3: direcci\xf3n IP del cliente}\n\xa0ON ERR CALL("SQL_error")\n\xa0If(DirIPInterna($3))\n\xa0\xa0//El m\xe9todo DirIPInterna verifica si la direcci\xf3n IP es interna\n\xa0\xa0\xa0\xa0If($1="victor")\xa0&\xa0($2="hugo")\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0CHANGE CURRENT USER("sql_user";"")\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0If(OK=1)\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0$0:=True\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0Else\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0$0:=False\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0End if\n\xa0\xa0\xa0\xa0Else\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0$0:=False\n\xa0\xa0\xa0\xa0End if\n\xa0Else\n\xa0\xa0\xa0\xa0$0:=False\n\xa0End if\n'})})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},250065:function(e,n,a){a.d(n,{Z:function(){return d},a:function(){return i}});var s=a(667294);let t={},o=s.createContext(t);function i(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);