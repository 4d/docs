"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[12393],{962826:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>c});var a=n(474848),i=n(28453);const r={id:"authUsers",title:"Usuarios y sesiones"},o=void 0,t={id:"REST/authUsers",title:"Usuarios y sesiones",description:"Autenticaci\xf3n de los usuarios",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-18/REST/authUsers.md",sourceDirName:"REST",slug:"/REST/authUsers",permalink:"/docs/es/18/REST/authUsers",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20REST%2FauthUsers.md%20(18)&body=Please%20enter%20your%20comment%3A",tags:[],version:"18",frontMatter:{id:"authUsers",title:"Usuarios y sesiones"},sidebar:"docs",previous:{title:"Configuraci\xf3n del servidor",permalink:"/docs/es/18/REST/configuration"},next:{title:"Obtener informaci\xf3n del servidor",permalink:"/docs/es/18/REST/genInfo"}},d={},c=[{value:"Autenticaci\xf3n de los usuarios",id:"autenticaci\xf3n-de-los-usuarios",level:2},{value:"Cookie de sesi\xf3n",id:"cookie-de-sesi\xf3n",level:2},{value:"Ejemplo",id:"ejemplo",level:3}];function l(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h2,{id:"autenticaci\xf3n-de-los-usuarios",children:"Autenticaci\xf3n de los usuarios"}),"\n",(0,a.jsx)(s.p,{children:"Como primer paso para abrir una sesi\xf3n REST en el servidor 4D, el usuario que env\xeda la solicitud debe estar autenticado."}),"\n",(0,a.jsxs)(s.p,{children:["Usted inicia la sesi\xf3n de un usuario en su aplicaci\xf3n pasando el nombre y la contrase\xf1a del usuario en ",(0,a.jsx)(s.a,{href:"/docs/es/18/REST/directory#directorylogin",children:(0,a.jsx)(s.code,{children:"$directory/login"})}),"."]}),"\n",(0,a.jsx)(s.p,{children:"Una vez que un usuario se registra con \xe9xito, se abre una sesi\xf3n. Vea a continuaci\xf3n para saber c\xf3mo manejar la cookie de sesi\xf3n en las siguientes peticiones del cliente, si es necesario."}),"\n",(0,a.jsx)(s.p,{children:"La sesi\xf3n se cerrar\xe1 autom\xe1ticamente cuando se alcance el tiempo de espera."}),"\n",(0,a.jsx)(s.h2,{id:"cookie-de-sesi\xf3n",children:"Cookie de sesi\xf3n"}),"\n",(0,a.jsx)(s.p,{children:"Cada petici\xf3n REST se gestiona por una sesi\xf3n espec\xedfica en el servidor 4D."}),"\n",(0,a.jsxs)(s.p,{children:["Cuando se recibe una primera petici\xf3n REST v\xe1lida, el servidor crea la sesi\xf3n y env\xeda una cookie de sesi\xf3n llamada ",(0,a.jsx)(s.code,{children:"WASID4D"})," en el encabezado de respuesta ",(0,a.jsx)(s.strong,{children:'"Set-Cookie"'}),", que contiene el UUID de la sesi\xf3n, por ejemplo:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"WASID4D=EA0400C4D58FF04F94C0A4XXXXXX3\n"})}),"\n",(0,a.jsxs)(s.p,{children:["En las siguientes peticiones REST, aseg\xfarese de que esta cookie se incluya en ",(0,a.jsx)(s.strong,{children:'el encabezado "Cookie"'})," con el fin de reutilizar la misma sesi\xf3n. En caso contrario, se abrir\xe1 una nueva sesi\xf3n y se utilizar\xe1 otra licencia."]}),"\n",(0,a.jsx)(s.h3,{id:"ejemplo",children:"Ejemplo"}),"\n",(0,a.jsxs)(s.p,{children:["La gesti\xf3n de las cookies de sesi\xf3n depende de su cliente HTTP. Este ejemplo muestra c\xf3mo extraer y reenviar la cookie de sesi\xf3n en el contexto de las peticiones gestionadas a trav\xe9s del comando 4D ",(0,a.jsx)(s.code,{children:"HTTP Request"}),"."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-4d",children:'// Crear los encabezados\nARRAY TEXT(headerNames;0)\nARRAY TEXT(headerValues;0)\n\nAPPEND TO ARRAY(headerNames;"username-4D")\nAPPEND TO ARRAY(headerNames;"session-4D-length")\nAPPEND TO ARRAY(headerNames;"hashed-password-4D")\n\nAPPEND TO ARRAY(headerValues;"kind user")\nAPPEND TO ARRAY(headerValues;"60")\nAPPEND TO ARRAY(headerValues;Generate digest("test";4D digest))\n\nC_OBJECT($response)\n$response:=New object\n\n//Esta petici\xf3n abre una sesi\xf3n para el usuario "kind user"\n$result:=HTTP Request(HTTP POST method;"127.0.0.1:8044/rest/$directory/login";"";\\  \n    $response;headerNames;headerValues;*)\n\n\n//Crear nuevos arrays para los encabezados con \xfanicamente la cookie WASID4D\nbuildHeader(->headerNames;->headerValues)\n\n//Esta otra petici\xf3n no abrir\xe1 una nueva sesi\xf3n\n$result:=HTTP Request(HTTP GET method;"127.0.0.1:8044/rest/$catalog";"";\\  \n    $response;headerNames;headerValues;*)\n'})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-4d",children:'// m\xe9todo proyecto buildHeader  \n\nC_POINTER($pointerNames;$1;$pointerValues;$2)\nARRAY TEXT($headerNames;0)\nARRAY TEXT($headerValues;0)\n\nCOPY ARRAY($1->;$headerNames)\nCOPY ARRAY($2->;$headerValues)\n\n$indexCookie:=Find in array($headerValues;"WASID4D@")\n$cookie:=$headerValues{$indexCookie}\n$start:=Position("WASID4D";$cookie)\n$end:=Position(";";$cookie)\n$uuid:= Substring($cookie;$start;$end-$start)\n\nARRAY TEXT($headerNames;1)\nARRAY TEXT($headerValues;1)\n\n$headerNames{1}:="Cookie"\n$headerValues{1}:=$uuid\n\nCOPY ARRAY($headerNames;$1->)\nCOPY ARRAY($headerValues;$2->)\n'})})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>t});var a=n(296540);const i={},r=a.createContext(i);function o(e){const s=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:s},e.children)}}}]);