"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[30506],{603905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(667294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var d=a.createContext({}),o=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=o(e.components);return a.createElement(d.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,d=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=o(n),m=l,k=p["".concat(d,".").concat(m)]||p[m]||c[m]||r;return n?a.createElement(k,i(i({ref:t},u),{},{components:n})):a.createElement(k,i({ref:t},u))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=p;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s.mdxType="string"==typeof e?e:l,i[1]=s;for(var o=2;o<r;o++)i[o]=n[o];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},266906:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>d,toc:()=>u});n(667294);var a=n(603905);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}function r(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}const i={id:"classFunctions",title:"Llamar a las funciones de clase ORDA"},s=void 0,d={unversionedId:"REST/classFunctions",id:"version-20-R5/REST/classFunctions",title:"Llamar a las funciones de clase ORDA",description:"You can call data model class functions defined for the ORDA Data Model through your REST requests, so that you can benefit from the exposed API of the targeted 4D application.",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R5/REST/ClassFunctions.md",sourceDirName:"REST",slug:"/REST/classFunctions",permalink:"/docs/es/REST/classFunctions",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20REST%2FClassFunctions.md%20(20-R5)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R5",frontMatter:{id:"classFunctions",title:"Llamar a las funciones de clase ORDA"},sidebar:"docs",previous:{title:"Manipulaci\xf3n de datos",permalink:"/docs/es/REST/manData"},next:{title:"Acerca de las peticiones REST",permalink:"/docs/es/REST/REST_requests"}},o={},u=[{value:"Llamadas de las funciones",id:"llamadas-de-las-funciones",level:2},{value:"Par\xe1metros",id:"par\xe1metros",level:2},{value:"Par\xe1metro de valor escalar",id:"par\xe1metro-de-valor-escalar",level:3},{value:"Par\xe1metro de entidad",id:"par\xe1metro-de-entidad",level:3},{value:"Par\xe1metro de entidad asociado",id:"par\xe1metro-de-entidad-asociado",level:4},{value:"Par\xe1metro de selecci\xf3n de entidad",id:"par\xe1metro-de-selecci\xf3n-de-entidad",level:3},{value:"Ejemplos de peticiones",id:"ejemplos-de-peticiones",level:2},{value:"Utilizar una funci\xf3n de clase de datastore",id:"utilizar-una-funci\xf3n-de-clase-de-datastore",level:3},{value:"Result",id:"result",level:4},{value:"Utilizar una funci\xf3n de clase de dataclass",id:"utilizar-una-funci\xf3n-de-clase-de-dataclass",level:3},{value:"Result",id:"result-1",level:4},{value:"Utilizar una funci\xf3n de clase de una entidad",id:"utilizar-una-funci\xf3n-de-clase-de-una-entidad",level:3},{value:"Result",id:"result-2",level:4},{value:"Utilizar una funci\xf3n clase entitySelection",id:"utilizar-una-funci\xf3n-clase-entityselection",level:3},{value:"Result",id:"result-3",level:4},{value:"Utilizar una funci\xf3n de clase de selecci\xf3n de entidades y un conjunto de entidades",id:"utilizar-una-funci\xf3n-de-clase-de-selecci\xf3n-de-entidades-y-un-conjunto-de-entidades",level:3},{value:"Result",id:"result-4",level:4},{value:"Utilizar una funci\xf3n de clase de selecci\xf3n de entidades y unorderBy",id:"utilizar-una-funci\xf3n-de-clase-de-selecci\xf3n-de-entidades-y-unorderby",level:3},{value:"Result",id:"result-5",level:4},{value:"Utilizar una entidad que se crear\xe1 en el servidor",id:"utilizar-una-entidad-que-se-crear\xe1-en-el-servidor",level:3},{value:"Result",id:"result-6",level:4},{value:"Utilizar una entidad a actualizar en el servidor",id:"utilizar-una-entidad-a-actualizar-en-el-servidor",level:3},{value:"Result",id:"result-7",level:4},{value:"Crear una entidad con una entidad relacionada",id:"crear-una-entidad-con-una-entidad-relacionada",level:3},{value:"Result",id:"result-8",level:4},{value:"Actualizar una entidad con una entidad relacionada",id:"actualizar-una-entidad-con-una-entidad-relacionada",level:3},{value:"Result",id:"result-9",level:4},{value:"Recibir una selecci\xf3n de entidades como par\xe1metro",id:"recibir-una-selecci\xf3n-de-entidades-como-par\xe1metro",level:3},{value:"Result",id:"result-10",level:4},{value:"Utilizar una selecci\xf3n de entidades actualizada en el cliente",id:"utilizar-una-selecci\xf3n-de-entidades-actualizada-en-el-cliente",level:3}],c={toc:u};function p(e){var{components:t}=e,i=r(e,["components"]);return(0,a.kt)("wrapper",l({},c,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"You can call ",(0,a.kt)("a",l({parentName:"p"},{href:"/docs/es/ORDA/ordaClasses"}),"data model class functions")," defined for the ORDA Data Model through your REST requests, so that you can benefit from the exposed API of the targeted 4D application."),(0,a.kt)("p",null,"Las funciones se llaman simplemente en peticiones POST en la interfaz ORDA apropiada, sin (). For example, if you have defined a ",(0,a.kt)("inlineCode",{parentName:"p"},"getCity()")," function in the City dataclass class, you could call it using the following request:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"/rest/City/getCity")),(0,a.kt)("p",null,"with data in the body of the POST request: ",(0,a.kt)("inlineCode",{parentName:"p"},'["Aguada"]')),(0,a.kt)("p",null,"En el lenguaje 4D, esta llamada equivale a:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'$city:=ds.City.getCity("Aguada")\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Only functions with the ",(0,a.kt)("inlineCode",{parentName:"p"},"exposed")," keyword can be directly called from REST requests. See ",(0,a.kt)("a",l({parentName:"p"},{href:"/docs/es/ORDA/ordaClasses#exposed-vs-non-exposed-functions"}),"Exposed vs non-exposed functions")," section.")),(0,a.kt)("h2",l({},{id:"llamadas-de-las-funciones"}),"Llamadas de las funciones"),(0,a.kt)("p",null,"Functions must always be called using REST ",(0,a.kt)("strong",{parentName:"p"},"POST")," requests (a GET request will receive an error)."),(0,a.kt)("p",null,"Las funciones son llamadas en el objeto correspondiente en el almac\xe9n de datos del servidor."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",l({parentName:"tr"},{align:null}),"Funci\xf3n de clase"),(0,a.kt)("th",l({parentName:"tr"},{align:null}),"Sintaxis"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("a",l({parentName:"td"},{href:"/docs/es/ORDA/ordaClasses#datastore-class"}),"datastore class")),(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"/rest/$catalog/DataStoreClassFunction"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("a",l({parentName:"td"},{href:"/docs/es/ORDA/ordaClasses#dataclass-class"}),"dataclass class")),(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}/DataClassClassFunction"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("a",l({parentName:"td"},{href:"/docs/es/ORDA/ordaClasses#entityselection-class"}),"entitySelection class")),(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}/EntitySelectionClassFunction"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null})),(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}/EntitySelectionClassFunction/$entityset/entitySetNumber"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null})),(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}/EntitySelectionClassFunction/$filter"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null})),(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}/EntitySelectionClassFunction/$orderby"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("a",l({parentName:"td"},{href:"/docs/es/ORDA/ordaClasses#entity-class"}),"entity class")),(0,a.kt)("td",l({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"/rest/{dataClass}(key)/EntityClassFunction/"))))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("inlineCode",{parentName:"p"},"/rest/{dataClass}/Function")," can be used to call either a dataclass or an entity selection function (",(0,a.kt)("inlineCode",{parentName:"p"},"/rest/{dataClass}")," returns all entities of the DataClass as an entity selection).\\\nLa funci\xf3n se busca primero en la clase de selecci\xf3n de entidades. Si no se encuentra, se busca en la dataclass. En otras palabras, si una funci\xf3n con el mismo nombre se define tanto en la clase DataClass como en la clase EntitySelection, la funci\xf3n de clase de DataClass nunca se ejecutar\xe1.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"All 4D code called from REST requests ",(0,a.kt)("strong",{parentName:"p"},"must be thread-safe")," if the project runs in compiled mode, because the REST Server always uses preemptive processes in this case (the ",(0,a.kt)("a",l({parentName:"p"},{href:"/docs/es/WebServer/preemptiveWeb#enabling-the-preemptive-mode-for-the-web-server"}),(0,a.kt)("em",{parentName:"a"},"Use preemptive process")," setting value")," is ignored by the REST Server).")),(0,a.kt)("h2",l({},{id:"par\xe1metros"}),"Par\xe1metros"),(0,a.kt)("p",null,"Puede enviar los par\xe1metros a las funciones definidas en las clases usuarios ORDA. On the server side, they will be received in the ",(0,a.kt)("a",l({parentName:"p"},{href:"/docs/es/Concepts/parameters#declaring-parameters"}),"declared parameters")," of the class functions."),(0,a.kt)("p",null,"Se aplican las siguientes reglas:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Parameters must be passed in the ",(0,a.kt)("strong",{parentName:"li"},"body of the POST request")),(0,a.kt)("li",{parentName:"ul"},"Los par\xe1metros deben estar incluidos en una colecci\xf3n (formato JSON)"),(0,a.kt)("li",{parentName:"ul"},"Todos los tipos de datos escalares soportados en las colecciones JSON pueden ser pasados como par\xe1metros."),(0,a.kt)("li",{parentName:"ul"},"La selecci\xf3n de entidades y la entidad se pueden pasar como par\xe1metros. El objeto JSON debe contener atributos espec\xedficos utilizados por el servidor REST para asignar datos a los objetos ORDA correspondientes: ",(0,a.kt)("strong",{parentName:"li"},"DATACLASS, "),"ENTITY, ",(0,a.kt)("strong",{parentName:"li"},"ENTITIES, "),"DATASET.")),(0,a.kt)("p",null,"See ",(0,a.kt)("a",l({parentName:"p"},{href:"#using-an-entity-to-be-created-on-the-server"}),"this example")," and ",(0,a.kt)("a",l({parentName:"p"},{href:"#receiving-an-entity-selection-as-parameter"}),"this example"),"."),(0,a.kt)("h3",l({},{id:"par\xe1metro-de-valor-escalar"}),"Par\xe1metro de valor escalar"),(0,a.kt)("p",null,"El(los) par\xe1metros deben estar simplemente incluirse en una colecci\xf3n definida en el cuerpo. For example, with a  dataclass function ",(0,a.kt)("inlineCode",{parentName:"p"},"getCities()")," receiving text parameters:\n",(0,a.kt)("inlineCode",{parentName:"p"},"/rest/City/getCities")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Parameters in body:")," ",'["Aguada","Paris"]'),(0,a.kt)("p",null,'Todos los tipos de datos JSON son soportados en los par\xe1metros, incluidos los punteros JSON. Las fechas se pueden pasar como cadenas en formato de fecha ISO 8601 (por ejemplo, "2020-08-22T22:00:000Z").'),(0,a.kt)("h3",l({},{id:"par\xe1metro-de-entidad"}),"Par\xe1metro de entidad"),(0,a.kt)("p",null,"Entities passed in parameters are referenced on the server through their key (",(0,a.kt)("em",{parentName:"p"},"i.e.")," __KEY property). Si el par\xe1metro llave se omite en una petici\xf3n, una nueva entidad se carga en memoria del servidor.\nTambi\xe9n puede pasar valores para todos los atributos de la entidad. Estos valores se utilizar\xe1n autom\xe1ticamente para la entidad manejada en el servidor."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Si la petici\xf3n env\xeda los valores de atributo modificados para una entidad existente en el servidor, la funci\xf3n de modelo de datos ORDA llamada se ejecutar\xe1 autom\xe1ticamente en el servidor con los valores modificados. Esta funcionalidad le permite, por ejemplo, verificar el resultado de una operaci\xf3n en una entidad, tras aplicar todas las reglas de negocio, desde la aplicaci\xf3n cliente. A continuaci\xf3n, puede decidir guardar o no la entidad en el servidor.")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",l({parentName:"tr"},{align:null}),"Propiedades"),(0,a.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,a.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Atributos de la entidad"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"mixto"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Opcional - Valores a modificar")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),"__DATACLASS"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"String"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Obligatorio - Indica la Dataclass de la entidad")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),"__ENTITY"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Obligatorio - True para indicar al servidor que el par\xe1metro es una entidad")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),"__KEY"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"mixto (mismo tipo que la llave primaria)"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Opcional - llave primaria de la entidad")))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Si no se proporciona __KEY, se crea una nueva entidad en el servidor con los atributos dados."),(0,a.kt)("li",{parentName:"ul"},"Si se proporciona ",(0,a.kt)("strong",{parentName:"li"},"KEY, la entidad correspondiente a "),"KEY se carga en el servidor con los atributos dados")),(0,a.kt)("p",null,"See examples for ",(0,a.kt)("a",l({parentName:"p"},{href:"#creating-an-entity"}),"creating")," or ",(0,a.kt)("a",l({parentName:"p"},{href:"#updating-an-entity"}),"updating")," entities."),(0,a.kt)("h4",l({},{id:"par\xe1metro-de-entidad-asociado"}),"Par\xe1metro de entidad asociado"),(0,a.kt)("p",null,"Same properties as for an ",(0,a.kt)("a",l({parentName:"p"},{href:"#entity-parameter"}),"entity parameter"),". Adem\xe1s, la entidad relacionada debe existir y ser referenciada por __KEY, que contiene su llave primaria."),(0,a.kt)("p",null,"See examples for ",(0,a.kt)("a",l({parentName:"p"},{href:"#creating-an-entity-with-a-related-entity"}),"creating")," or ",(0,a.kt)("a",l({parentName:"p"},{href:"#updating-an-entity-with-a-related-entity"}),"updating")," entities with related entities."),(0,a.kt)("h3",l({},{id:"par\xe1metro-de-selecci\xf3n-de-entidad"}),"Par\xe1metro de selecci\xf3n de entidad"),(0,a.kt)("p",null,"The entity selection must have been defined beforehand using ",(0,a.kt)("a",l({parentName:"p"},{href:"/docs/es/REST/method#methodentityset"}),"$method=entityset"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Si la petici\xf3n env\xeda una selecci\xf3n de entidades modificada al servidor, la funci\xf3n del modelo de datos ORDA llamada se ejecutar\xe1 autom\xe1ticamente en el servidor con la selecci\xf3n de entidades modificada.")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",l({parentName:"tr"},{align:null}),"Propiedades"),(0,a.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,a.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Atributos de la entidad"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"mixto"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Opcional - Valores a modificar")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),"__DATASET"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"String"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Obligatorio - entitySetID (UUID) de la selecci\xf3n de entidades")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:null}),"__ENTITIES"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,a.kt)("td",l({parentName:"tr"},{align:null}),"Obligatorio - True para indicar al servidor que el par\xe1metro es una selecci\xf3n de entidades")))),(0,a.kt)("p",null,"See example for ",(0,a.kt)("a",l({parentName:"p"},{href:"#receiving-an-entity-selection-as-parameter"}),"receiving an entity selection"),"."),(0,a.kt)("h2",l({},{id:"ejemplos-de-peticiones"}),"Ejemplos de peticiones"),(0,a.kt)("p",null,"Esta base de datos se expone como un almac\xe9n de datos remoto en localhost (puerto 8111):"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt-text",src:n(529034).Z,width:"882",height:"599"})),(0,a.kt)("h3",l({},{id:"utilizar-una-funci\xf3n-de-clase-de-datastore"}),"Utilizar una funci\xf3n de clase de datastore"),(0,a.kt)("p",null,"The US_Cities ",(0,a.kt)("inlineCode",{parentName:"p"},"DataStore")," class provides an API:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'// DataStore class\n\nClass extends DataStoreImplementation\n\nexposed Function getName() : Text\n    return "US cities and zip codes manager"\n')),(0,a.kt)("p",null,"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},"127.0.0.1:8111/rest/$catalog/getName")),(0,a.kt)("h4",l({},{id:"result"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n"result": "US cities and zip codes manager"\n}\n')),(0,a.kt)("h3",l({},{id:"utilizar-una-funci\xf3n-de-clase-de-dataclass"}),"Utilizar una funci\xf3n de clase de dataclass"),(0,a.kt)("p",null,"The Dataclass class ",(0,a.kt)("inlineCode",{parentName:"p"},"City")," provides an API that returns a city entity from a name passed in parameter:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'// City class\n\nClass extends DataClass\n\nexposed Function getCity($city : Text ) : cs.CityEntity\n    return This.query("name = :1";$city).first()\n')),(0,a.kt)("p",null,"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},"127.0.0.1:8111/rest/City/getCity")),(0,a.kt)("p",null,"Petici\xf3n: ",'["Aguada"]'),(0,a.kt)("h4",l({},{id:"result-1"}),"Result"),(0,a.kt)("p",null,"El resultado es una entidad:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "__entityModel": "City",\n    "__DATACLASS": "City",\n    "__KEY": "1",\n    "__TIMESTAMP": "2020-03-09T08:03:19.923Z",\n    "__STAMP": 1,\n    "ID": 1,\n    "name": "Aguada",\n    "countyFIPS": 72003,\n    "county": {\n        "__deferred": {\n            "uri": "/rest/County(72003)",\n            "__KEY": "72003"\n        }\n    },\n    "zips": {\n        "__deferred": {\n            "uri": "/rest/City(1)/zips?$expand=zips"\n        }\n    }\n}\n')),(0,a.kt)("h3",l({},{id:"utilizar-una-funci\xf3n-de-clase-de-una-entidad"}),"Utilizar una funci\xf3n de clase de una entidad"),(0,a.kt)("p",null,"The Entity class ",(0,a.kt)("inlineCode",{parentName:"p"},"CityEntity")," provides an API:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'// CityEntity class\n\nClass extends Entity\n\nexposed Function getPopulation()\n    return This.zips.sum("population")\n')),(0,a.kt)("p",null,"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},"127.0.0.1:8111/rest/City(2)/getPopulation")),(0,a.kt)("h4",l({},{id:"result-2"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "result": 48814\n}\n')),(0,a.kt)("h3",l({},{id:"utilizar-una-funci\xf3n-clase-entityselection"}),"Utilizar una funci\xf3n clase entitySelection"),(0,a.kt)("p",null,"The EntitySelection class ",(0,a.kt)("inlineCode",{parentName:"p"},"CitySelection")," provides an API:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'// CitySelection class\n\nClass extends EntitySelection\n\nexposed Function getPopulation()\n    return This.zips.sum("population")\n')),(0,a.kt)("p",null,"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},'127.0.0.1:8111/rest/City/getPopulation/?$filter="ID<3"')),(0,a.kt)("h4",l({},{id:"result-3"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "result": 87256\n}\n')),(0,a.kt)("h3",l({},{id:"utilizar-una-funci\xf3n-de-clase-de-selecci\xf3n-de-entidades-y-un-conjunto-de-entidades"}),"Utilizar una funci\xf3n de clase de selecci\xf3n de entidades y un conjunto de entidades"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"StudentsSelection")," class has a ",(0,a.kt)("inlineCode",{parentName:"p"},"getAgeAverage")," function:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),"// StudentsSelection Class\n\nClass extends EntitySelection\n\nexposed Function getAgeAverage : Integer\n    var $sum : Integer\n    var $s : Object\n\n    $sum:=0\n    For each ($s;This)\n        $sum:=$sum+$s.age()\n    End for each\n    return $sum/This.length\n")),(0,a.kt)("p",null,"Una vez que haya creado un conjunto de entidades, puede ejecutar esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},"127.0.0.1:8044/rest/Students/getAgeAverage/$entityset/17E83633FFB54ECDBF947E5C620BB532")),(0,a.kt)("h4",l({},{id:"result-4"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "result": 34\n}\n')),(0,a.kt)("h3",l({},{id:"utilizar-una-funci\xf3n-de-clase-de-selecci\xf3n-de-entidades-y-unorderby"}),"Utilizar una funci\xf3n de clase de selecci\xf3n de entidades y unorderBy"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"StudentsSelection")," class has a ",(0,a.kt)("inlineCode",{parentName:"p"},"getLastSummary")," function:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'// StudentsSelection Class\n\n\nClass extends EntitySelection\n\nexposed Function getLastSummary : Text\n    var $last : Object\n\n    $last:=This.last()\n    return =$last.firstname+" - "+$last.lastname+" is ... "+String($last.age())\n')),(0,a.kt)("p",null,"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},'127.0.0.1:8044/rest/Students/getLastSummary/$entityset/?$filter="lastname=b@"&$orderby="lastname"')),(0,a.kt)("h4",l({},{id:"result-5"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "result": "Wilbert - Bull is ... 21"\n}\n')),(0,a.kt)("h3",l({},{id:"utilizar-una-entidad-que-se-crear\xe1-en-el-servidor"}),"Utilizar una entidad que se crear\xe1 en el servidor"),(0,a.kt)("p",null,"The Dataclass class ",(0,a.kt)("inlineCode",{parentName:"p"},"Students")," has the function ",(0,a.kt)("inlineCode",{parentName:"p"},"pushData()")," receiving an entity containing data from the client. The ",(0,a.kt)("inlineCode",{parentName:"p"},"checkData()")," method runs some controls. Si son v\xe1lidos, la entidad se guarda y se devuelve."),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),"// Students Class\n\nClass extends DataClass\n\nexposed Function pushData($entity : Object) : Object\n    var $status : Object\n\n    $status:=checkData($entity) // $status is an object with a success boolean property\n\n    If ($status.success)\n        $status:=$entity.save()\n       If ($status.success)\n           return $entity\n      End if\n    End if\n\n    return $status\n\n")),(0,a.kt)("p",null,"Lance esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:8044/rest/Students/pushData")),(0,a.kt)("p",null,"Cuerpo de la petici\xf3n:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"firstname":"Ann",\n"lastname":"Brown"\n}]\n')),(0,a.kt)("p",null,"Since no ",(0,a.kt)("inlineCode",{parentName:"p"},"__KEY")," is given, a new Students entity is loaded on the server ",(0,a.kt)("strong",{parentName:"p"},"with the attributes received from the client"),". Because the ",(0,a.kt)("inlineCode",{parentName:"p"},"pushData()")," function runs a ",(0,a.kt)("inlineCode",{parentName:"p"},"save()")," action, the new entity is created."),(0,a.kt)("h4",l({},{id:"result-6"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "55",\n    "__TIMESTAMP": "2020-06-16T10:54:41.805Z",\n    "__STAMP": 1,\n    "ID": 55,\n    "firstname": "Ann",\n    "lastname": "BROWN",\n    "schoolID": null,\n    "school": null\n}\n')),(0,a.kt)("h3",l({},{id:"utilizar-una-entidad-a-actualizar-en-el-servidor"}),"Utilizar una entidad a actualizar en el servidor"),(0,a.kt)("p",null,"Igual que el anterior pero con el atributo __KEY"),(0,a.kt)("p",null,"Lance esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST:"),(0,a.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:8044/rest/Students/pushData")),(0,a.kt)("p",null,"Cuerpo de la petici\xf3n:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"lastname":"Brownie",\n"__KEY":55\n}]\n')),(0,a.kt)("p",null,"Since ",(0,a.kt)("inlineCode",{parentName:"p"},"__KEY")," is given, the Students entity with primary key 55 is loaded ",(0,a.kt)("strong",{parentName:"p"},"with the lastname value received from the client"),". Because the function runs a ",(0,a.kt)("inlineCode",{parentName:"p"},"save()")," action, the entity is updated."),(0,a.kt)("h4",l({},{id:"result-7"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "55",\n    "__TIMESTAMP": "2020-06-16T11:10:21.679Z",\n    "__STAMP": 3,\n    "ID": 55,\n    "firstname": "Ann",\n    "lastname": "BROWNIE",\n    "schoolID": null,\n    "school": null\n}\n')),(0,a.kt)("h3",l({},{id:"crear-una-entidad-con-una-entidad-relacionada"}),"Crear una entidad con una entidad relacionada"),(0,a.kt)("p",null,"En este ejemplo, creamos una nueva entidad Students con la entidad Schools con la llave primaria 2."),(0,a.kt)("p",null,"Lance esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST:"),(0,a.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:8044/rest/Students/pushData")),(0,a.kt)("p",null,"Cuerpo de la petici\xf3n:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'[{\n"__DATACLASS":"Students",\n"__ENTITY":true,\n"firstname":"John",\n"lastname":"Smith",\n"school":{"__KEY":2}\n}]\n')),(0,a.kt)("h4",l({},{id:"result-8"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "__entityModel": "Students",\n    "__DATACLASS": "Students",\n    "__KEY": "56",\n    "__TIMESTAMP": "2020-06-16T11:16:47.601Z",\n    "__STAMP": 1,\n    "ID": 56,\n    "firstname": "John",\n    "lastname": "SMITH",\n    "schoolID": 2,\n       "school": {\n        "__deferred": {\n            "uri": "/rest/Schools(2)",\n            "__KEY": "2"\n        }\n    }\n}\n')),(0,a.kt)("h3",l({},{id:"actualizar-una-entidad-con-una-entidad-relacionada"}),"Actualizar una entidad con una entidad relacionada"),(0,a.kt)("p",null,"En este ejemplo, asociamos una escuela existente a una entidad Students. The ",(0,a.kt)("inlineCode",{parentName:"p"},"StudentsEntity")," class has an API:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),"// StudentsEntity class\n\nClass extends Entity\n\nexposed Function putToSchool()\n    var $1, $school , $0, $status : Object\n\n        //$1 is a Schools entity\n    $school:=$1\n        //Associate the related entity school to the current Students entity\n    This.school:=$school\n\n    $status:=This.save()\n\n    $0:=$status\n")),(0,a.kt)("p",null,"You run this request, called on a Students entity :\n",(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:8044/rest/Students(1)/putToSchool"),"\nBody of the request:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'[{\n"__DATACLASS":"Schools",\n"__ENTITY":true,\n"__KEY":2\n}]\n')),(0,a.kt)("h4",l({},{id:"result-9"}),"Result"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "result": {\n        "success": true\n    }\n}\n')),(0,a.kt)("h3",l({},{id:"recibir-una-selecci\xf3n-de-entidades-como-par\xe1metro"}),"Recibir una selecci\xf3n de entidades como par\xe1metro"),(0,a.kt)("p",null,"In the ",(0,a.kt)("inlineCode",{parentName:"p"},"Students")," Dataclass class, the ",(0,a.kt)("inlineCode",{parentName:"p"},"setFinalExam()")," function updates a received entity selection ($1). It actually updates the ",(0,a.kt)("em",{parentName:"p"},"finalExam")," attribute with the received value ($2). Devuelve las llaves primarias de las entidades actualizadas."),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),"// Students class\n\nClass extends DataClass\n\nexposed Function setFinalExam()\n\n    var $1, $es, $student, $status : Object\n    var $2, $examResult : Text\n\n    var $keys, $0 : Collection\n\n      //Entity selection\n    $es:=$1\n\n    $examResult:=$2\n\n    $keys:=New collection()\n\n      //Loop on the entity selection\n    For each ($student;$es)\n        $student.finalExam:=$examResult\n        $status:=$student.save()\n        If ($status.success)\n            $keys.push($student.ID)\n        End if\n    End for each\n\n    $0:=$keys\n")),(0,a.kt)("p",null,"Un conjunto de entidades se crea primero con esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},'http://127.0.0.1:8044/rest/Students/?$filter="ID<3"&$method=entityset')),(0,a.kt)("p",null,"A continuaci\xf3n, puede ejecutar esta petici\xf3n:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"POST")," ",(0,a.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:8044/rest/Students/setFinalExam")),(0,a.kt)("p",null,"Cuerpo de la petici\xf3n:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'[\n{\n"__ENTITIES":true,\n"__DATASET":"9B9C053A111E4A288E9C1E48965FE671"\n},\n"Passed"\n]\n\n')),(0,a.kt)("h4",l({},{id:"result-10"}),"Result"),(0,a.kt)("p",null,"Se han actualizado las entidades con llaves primarias 1 y 2."),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{}),'{\n    "result": [\n        1,\n        2\n    ]\n}\n')),(0,a.kt)("h3",l({},{id:"utilizar-una-selecci\xf3n-de-entidades-actualizada-en-el-cliente"}),"Utilizar una selecci\xf3n de entidades actualizada en el cliente"),(0,a.kt)("p",null,"Using the ",(0,a.kt)("inlineCode",{parentName:"p"},"getAgeAverage()")," function ",(0,a.kt)("a",l({parentName:"p"},{href:"#using-an-entityselection-class-function-and-an-entityset"}),"defined above"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'var $remoteDS, $newStudent, $students : Object\nvar $ageAverage : Integer\n\n$remoteDS:=Open datastore(New object("hostname";"127.0.0.1:8044");"students")\n\n// $newStudent is a student entity to procees\n$newStudent:=...\n$students:=$remoteDS.Students.query("school.name = :1";"Math school")\n// We add an entity to the $students entity selection on the client\n$students.add($newStudent)\n\n// We call a function on the StudentsSelection class returning the age average of the students in the entity selection\n// The function is executed on the server on the updated $students entity selection which included the student added from the client\n$ageAverage:=$students.getAgeAverage()\n')))}p.isMDXComponent=!0},529034:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ordastructure-64d64d76ce9764a2365629e381bde282.png"}}]);