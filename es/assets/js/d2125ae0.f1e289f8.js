"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[16009],{892904:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>t,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var a=n(474848),i=n(28453);const o={id:"integrate-mirror-log-file",title:"INTEGRATE MIRROR LOG FILE",slug:"/commands/integrate-mirror-log-file",displayed_sidebar:"docs"},s=void 0,l={id:"commands-legacy/integrate-mirror-log-file",title:"INTEGRATE MIRROR LOG FILE",description:"INTEGRATE MIRROR LOG FILE ( rutaAcceso ; numOperacion {; modo {; objError}} )",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R7/commands-legacy/integrate-mirror-log-file.md",sourceDirName:"commands-legacy",slug:"/commands/integrate-mirror-log-file",permalink:"/docs/es/commands/integrate-mirror-log-file",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fintegrate-mirror-log-file.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"integrate-mirror-log-file",title:"INTEGRATE MIRROR LOG FILE",slug:"/commands/integrate-mirror-log-file",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"CHECK LOG FILE",permalink:"/docs/es/commands/check-log-file"},next:{title:"Log File",permalink:"/docs/es/commands/log-file"}},t={},d=[{value:"Descripci\xf3n",id:"descripci\xf3n",level:4},{value:"Ejemplo",id:"ejemplo",level:4},{value:"Variables y conjuntos del sistema",id:"variables-y-conjuntos-del-sistema",level:4},{value:"Ver tambi\xe9n",id:"ver-tambi\xe9n",level:4}];function c(e){const r={a:"a",br:"br",code:"code",em:"em",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.strong,{children:"INTEGRATE MIRROR LOG FILE"})," ( ",(0,a.jsx)(r.em,{children:"rutaAcceso"})," ; ",(0,a.jsx)(r.em,{children:"numOperacion"})," {; ",(0,a.jsx)(r.em,{children:"modo"})," {; ",(0,a.jsx)(r.em,{children:"objError"}),"}} )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"Par\xe1metro"}),(0,a.jsx)(r.th,{children:"Tipo"}),(0,a.jsx)(r.th,{}),(0,a.jsx)(r.th,{children:"Descripci\xf3n"})]})}),(0,a.jsxs)(r.tbody,{children:[(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"rutaAcceso"}),(0,a.jsx)(r.td,{children:"Text"}),(0,a.jsx)(r.td,{children:"\u2192"}),(0,a.jsx)(r.td,{children:"Nombre o ruta de acceso del archivo de historial a integrar"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"numOperacion"}),(0,a.jsx)(r.td,{children:"Real"}),(0,a.jsx)(r.td,{children:"\u2192"}),(0,a.jsx)(r.td,{children:"N\xfamero de la \xfaltima operaci\xf3n integrada"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"\u2190"}),(0,a.jsx)(r.td,{children:"Nuevo n\xfamero de la \xfaltima operaci\xf3n integrada o -2 para integrar todo el archivo"}),(0,a.jsx)(r.td,{}),(0,a.jsx)(r.td,{})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"modo"}),(0,a.jsx)(r.td,{children:"Integer"}),(0,a.jsx)(r.td,{children:"\u2192"}),(0,a.jsx)(r.td,{children:"0=modo estricto (modo por defecto), 1=modo auto reparar"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"objError"}),(0,a.jsx)(r.td,{children:"Object"}),(0,a.jsx)(r.td,{children:"\u2190"}),(0,a.jsx)(r.td,{children:"Operaciones faltantes"})]})]})]}),"\n",(0,a.jsx)(r.h4,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.strong,{children:"Nota preliminar:"})," este comando s\xf3lo funciona con 4D Server. \xdanicamente puede ejecutarse v\xeda el comando ",(0,a.jsx)(r.a,{href:"/docs/es/commands/execute-on-server",children:"Execute on server"})," o en un procedimiento almacenado."]}),"\n",(0,a.jsxs)(r.p,{children:["El ",(0,a.jsx)(r.strong,{children:"INTEGRATE MIRROR LOG FILE"}),"  permite integrar el archivo de historial designado por ",(0,a.jsx)(r.em,{children:"rutaAcceso"})," en una base 4D Server, a partir de la operaci\xf3n ",(0,a.jsx)(r.em,{children:"numOperacion"}),"."]}),"\n",(0,a.jsx)(r.p,{children:"El comando acepta integrar todo archivo de historial en la base, incluso si no corresponde al archivo de datos. Este comando est\xe1 destinado espec\xedficamente para su uso en el contexto de una base espejo."}),"\n",(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.strong,{children:"Nota:"}),' a partir de 4D v14, es posible utilizar un archivo de historial en el contexto de una base "espejo": la opci\xf3n "Utilizar archivo de historial" ahora se puede seleccionar en las propiedades de una base 4D Server utilizada como espejo l\xf3gico, por tanto, permitiendo la implementaci\xf3n de servidores espejo en serie (ver la secci\xf3n ',(0,a.jsx)(r.em,{children:"Configurar un espejo l\xf3gico"})," en el manual 4D Server)."]}),"\n",(0,a.jsxs)(r.p,{children:["A diferencia del comando ",(0,a.jsx)(r.em,{children:"_o_INTEGRATE LOG FILE"}),", el comando ",(0,a.jsx)(r.strong,{children:"INTEGRATE MIRROR LOG FILE"})," no sustituye el archivo de historial integrado al historial actual al ejecutarse: el archivo de historial de la base continua siendo utilizado. En consecuencia, cualquier cambio realizado durante la integraci\xf3n se guarda en el archivo de historial actual."]}),"\n",(0,a.jsxs)(r.p,{children:["En ",(0,a.jsx)(r.em,{children:"rutaAcceso"}),", pase una ruta absoluta o relativa a la carpeta de la base. Si pasa una cadena vac\xeda en este par\xe1metro, aparecer\xe1 una caja de di\xe1logo est\xe1ndar de apertura de archivo para que pueda designar el archivo a integrar. Si se cancela esta caja de di\xe1logo, ning\xfan archivo se integra y la variable sistema ",(0,a.jsx)(r.em,{children:"OK"})," toma el valor 0."]}),"\n",(0,a.jsxs)(r.p,{children:["En la variable ",(0,a.jsx)(r.em,{children:"numOperacion"}),", pase el n\xfamero de la \xfaltima operaci\xf3n integrada, de manera que la integraci\xf3n comience en la siguiente operaci\xf3n. Despu\xe9s de la integraci\xf3n, el valor de la variable ",(0,a.jsx)(r.em,{children:"numOperacion"}),", se actualiza con el n\xfamero de la \xfaltima operaci\xf3n integrada. Esto le permite seguir adelante con posteriores integraciones del archivo de historial, utilizando ",(0,a.jsx)(r.strong,{children:"["})," ",(0,a.jsx)(r.strong,{children:"#current_title]"}),". Pase -2 en la variable a integrar todas las operaciones en el archivo de historial."]}),"\n",(0,a.jsxs)(r.p,{children:[(0,a.jsxs)(r.em,{children:[(0,a.jsx)(r.em,{children:"Nota de compatibilidad:"})," en las versiones de 4D anteriores a"]})," *",(0,a.jsx)(r.em,{children:"la v15  R4, el par\xe1metro"})," *",(0,a.jsx)(r.em,{children:"numOperacion"})," ",(0,a.jsx)(r.em,{children:"era opcional; Sin embargo, desde ahora en adelante, si se omite el par\xe1metro"})," *",(0,a.jsx)(r.em,{children:"operationNum,"})," ",(0,a.jsx)(r.em,{children:"se genera un error. Para restablecer el funcionamiento original de su antiguo c\xf3digo, puede simplemente pasar -2 en el par\xe1metro"})," *",(0,a.jsx)(r.em,{children:"numOperacion."})]}),"\n",(0,a.jsxs)(r.p,{children:["En ",(0,a.jsx)(r.em,{children:"modo"}),', pase el modo de integraci\xf3n a activar. Puede utilizar una de las siguientes constantes que se encuentran en el tema "',(0,a.jsx)(r.em,{children:"Backup"}),'":']}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"Constante"}),(0,a.jsx)(r.th,{children:"Tipo"}),(0,a.jsx)(r.th,{children:"Valor"}),(0,a.jsx)(r.th,{children:"Comentario"})]})}),(0,a.jsxs)(r.tbody,{children:[(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Auto repair mode"}),(0,a.jsx)(r.td,{children:"Entero largo"}),(0,a.jsx)(r.td,{children:"1"}),(0,a.jsxs)(r.td,{children:["Utilizar el modo flexible con las acciones de reparaci\xf3n autom\xe1tica y llenar el par\xe1metro ",(0,a.jsx)(r.em,{children:"errObject"})," (si lo hay)"]})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"Strict mode"}),(0,a.jsx)(r.td,{children:"Entero largo"}),(0,a.jsx)(r.td,{children:"0"}),(0,a.jsx)(r.td,{children:"Utilice el modo de integraci\xf3n estricto (por defecto)"})]})]})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Strict mode: en este modo, tan pronto como se produce un error durante la integraci\xf3n, se detiene y hay que utilizar el CSM para rastrear el error. Este modo de seguridad se utiliza de forma predeterminada y se recomienda en la mayor\xeda de los casos."}),"\n",(0,a.jsxs)(r.li,{children:["Auto repair mode: en este modo, cuando un error no cr\xedtico se produce, se omite y contin\xfaa la integraci\xf3n. Si pasa el par\xe1metro ",(0,a.jsx)(r.em,{children:"obj"})," ",(0,a.jsx)(r.em,{children:"Error"}),", cada error se registra y se pueden analizar despu\xe9s.",(0,a.jsx)(r.br,{}),"\nLos casos de errores no cr\xedticos son:\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["El archivo de historial solicita agregar un registro, pero este registro ya existe en los datos.",(0,a.jsx)(r.br,{}),"\nAcci\xf3n de reparaci\xf3n: 4D actualiza el registro."]}),"\n",(0,a.jsxs)(r.li,{children:["El archivo de historial solicita actualizar un registro, pero a\xfan no existe este registro.",(0,a.jsx)(r.br,{}),"\nAcci\xf3n de reparaci\xf3n: 4D a\xf1ade el registro."]}),"\n",(0,a.jsxs)(r.li,{children:["El archivo de historial solicita eliminar un registro, pero no existe este registro.",(0,a.jsx)(r.br,{}),"\nAcci\xf3n de reparaci\xf3n: 4D no hace nada."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.strong,{children:"Nota"}),": en modo estricto (modo por defecto), la integraci\xf3n se detendr\xe1 en el primer error encontrado. En este caso, si desea continuar con la integraci\xf3n tendr\xe1 que utilizar el CSM."]}),"\n",(0,a.jsxs)(r.p,{children:['Cuando se produce una de las anomal\xedas en modo auto reparaci\xf3n, el registro en cuesti\xf3n queda autom\xe1ticamente "reparado" y la operaci\xf3n relacionada se registra en el par\xe1metro ',(0,a.jsx)(r.em,{children:"obj"})," ",(0,a.jsx)(r.em,{children:"Error"}),".",(0,a.jsx)(r.br,{}),"\nUna vez finalizada la ejecuci\xf3n, el par\xe1metro ",(0,a.jsx)(r.em,{children:"obj"})," ",(0,a.jsx)(r.em,{children:"Error"}),' lista todos los registros reparados. Contiene un \xfanico array de objetos denominado "operaciones" construido de la siguiente manera:']}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-json",children:'{"operations":\xa0\xa0\xa0 [\xa0\xa0\xa0 \xa0\xa0\xa0 {\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "operationType":24,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "operationName":"Create record",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "operationNumber":2,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "contextID":48,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "timeStamp":"2015-07-10T07:53:02.413Z",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "dataLen":24,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "recordNumber":0,\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "tableID":"F4CXXXXX",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "tableName":"Customers",\xa0\xa0\xa0 \xa0\xa0\xa0 \xa0\xa0\xa0 "fields": {\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "1": 9,\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "2": "test value",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "3": "2003-03-03T00:00:00.000Z",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "4": "BlobPath: Table 1/Field 4/Data_9ACB28F1A2744FDFA5822B22F18B2E12.png",\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "8": "BlobID: 2"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 }\xa0\xa0\xa0 \xa0\xa0\xa0 },\xa0\xa0\xa0 \xa0\xa0\xa0 {...} \xa0\xa0\xa0 ]\n'})}),"\n",(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.strong,{children:"Atenci\xf3n:"})," el modo de reparaci\xf3n auto debe ser utilizado en casos espec\xedficos, ya que pasa por alto las funcionalidades de comprobaci\xf3n de integridad de datos internas de 4D. Se puede utilizar, por ejemplo, cuando un archivo de registro intermedio se ha perdido o da\xf1ado y que desea recuperar tantas operaciones como sea posible. En cualquier caso, es necesario prestar atenci\xf3n a la integridad de los datos espec\xedficos al utilizar este modo."]}),"\n",(0,a.jsx)(r.h5,{id:""}),"\n",(0,a.jsx)(r.p,{children:"La lista actual de propiedades disponibles depende del tipo de operaci\xf3n (por ejemplo: crear registros, eliminar registros, modificar registros, etc.). Estas son las principales propiedades:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"operationType"}),": c\xf3digo interno para la operaci\xf3n"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"operationName"}),': tipo de operaci\xf3n, por ejemplo, "crear registro", "modificar registro"']}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"operationNumber"}),": n\xfamero interno de la operaci\xf3n en el archivo de registro"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"contextID"}),": ID del contexto de ejecuci\xf3n; el contexto se detalla en la secci\xf3n ",(0,a.jsx)(r.em,{children:"extraData"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"timeStamp"}),": timestamp de la operaci\xf3n en el archivo de historial"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"dataLen"}),": tama\xf1o interno de los datos"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"recordNumber"}),": n\xfamero de registro internor"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"tableID"}),": ID interno de la tabla"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"tableName"}),": nombre de la tabla"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"fields"}),": objeto que contiene la lista de n\xfameros de campo junto con sus valores. Se registran todos los campos de la tabla.",(0,a.jsx)(r.br,{}),"\nEn el caso de los valores Blob o im\xe1genes, se ofrece informaci\xf3n diferente en funci\xf3n de su lugar de almacenamiento:\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:'Si el Blob o la imagen est\xe1n almacenados dentro del archivo de datos, la propiedad ser\xe1 "BlobID: "+ un n\xfamero de Blob interno, por ejemplo "BlobID:1"'}),"\n",(0,a.jsx)(r.li,{children:'Si el Blob o la imagen se almacena fuera del archivo de datos, la propiedad ser\xe1 "BlobPath:" + la ruta de acceso a los datos, por ejemplo "BlobPath: Tabla 1/Campo 6/Datos_EE12D091535F9748BCE62EDE972A4BA2.jpg"'}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"extraData"}),": datos del contexto usuario, incluidos el nombre y el ID del usuario, el nombre y el ID de la tarea, el nombre de la m\xe1quina local y la versi\xf3n cliente."]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"sequenceNumber"}),": n\xfamero de secuencia con auto incrementar."]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.em,{children:"primaryKey"}),": valor de la llave primaria."]}),"\n"]}),"\n",(0,a.jsx)(r.h4,{id:"ejemplo",children:"Ejemplo"}),"\n",(0,a.jsx)(r.p,{children:"Usted desea integrar un archivo de historial en el servidor espejo en modo de reparaci\xf3n auto:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-4d",children:'\xa0\xa0//a ejecutar en el servidor\n\xa0var $err : Object\n\xa0var $num : Integer\xa0//--2 para integrar todas las operaciones\n\xa0INTEGRATE MIRROR LOG FILE("c:\\\\mirror\\\\logNew.journal";$num;Auto repair mode;$err)\n'})}),"\n",(0,a.jsx)(r.h4,{id:"variables-y-conjuntos-del-sistema",children:"Variables y conjuntos del sistema"}),"\n",(0,a.jsx)(r.p,{children:"Si la integraci\xf3n se efect\xfaa correctamente, la variable sistema OK toma el valor 1; de lo contrario, toma el valor 0."}),"\n",(0,a.jsx)(r.h4,{id:"ver-tambi\xe9n",children:"Ver tambi\xe9n"}),"\n",(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.em,{children:"_o_INTEGRATE LOG FILE"}),(0,a.jsx)(r.br,{}),"\n",(0,a.jsx)(r.a,{href:"/docs/es/commands/log-file-to-json",children:"LOG FILE TO JSON"})]})]})}function m(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>l});var a=n(296540);const i={},o=a.createContext(i);function s(e){const r=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:r},e.children)}}}]);