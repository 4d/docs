"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["73720"],{804991:function(e,n,o){o.r(n),o.d(n,{default:()=>p,frontMatter:()=>a,metadata:()=>r,assets:()=>d,toc:()=>l,contentTitle:()=>c});var r=JSON.parse('{"id":"commands-legacy/ob-copy","title":"OB Copy","description":"OB Copy ( objeto {; resuelvePunt | {; option {; agruparCon}}} )  : Object","source":"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R7/commands-legacy/ob-copy.md","sourceDirName":"commands-legacy","slug":"/commands/ob-copy","permalink":"/docs/es/commands/ob-copy","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fob-copy.md%20(20-R7)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"20-R7","frontMatter":{"id":"ob-copy","title":"OB Copy","slug":"/commands/ob-copy","displayed_sidebar":"docs"},"sidebar":"docs","previous":{"title":"OB Class","permalink":"/docs/es/commands/ob-class"},"next":{"title":"OB Entries","permalink":"/docs/es/commands/ob-entries"}}'),s=o("785893"),t=o("250065");let a={id:"ob-copy",title:"OB Copy",slug:"/commands/ob-copy",displayed_sidebar:"docs"},c=void 0,d={},l=[{value:"Descripci\xf3n",id:"descripci\xf3n",level:4},{value:"Ejemplo 1",id:"ejemplo-1",level:4},{value:"Ejemplo 2",id:"ejemplo-2",level:4},{value:"Ejemplo 3",id:"ejemplo-3",level:4},{value:"Ejemplo 4",id:"ejemplo-4",level:4},{value:"Ejemplo 5",id:"ejemplo-5",level:4},{value:"Ver tambi\xe9n",id:"ver-tambi\xe9n",level:4},{value:"Propiedades",id:"propiedades",level:4}];function i(e){let n={a:"a",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OB Copy"})," ( ",(0,s.jsx)(n.em,{children:"objeto"})," {; resuelvePunt | {; ",(0,s.jsx)(n.em,{children:"option"})," {; ",(0,s.jsx)(n.em,{children:"agruparCon"}),"}}} )  : Object"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Par\xe1metro"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"objeto"}),(0,s.jsx)(n.td,{children:"Object, Campo Object"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Objeto estructurado"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"resuelvePunt"}),(0,s.jsx)(n.td,{children:"Boolean"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"True = resuelve los puntero, False o se omite = no resuelve punteros"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"option"}),(0,s.jsx)(n.td,{children:"Integer"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"ck shared: devuelve un objeto compartido,ck resolve pointers: resuelve punteros antes de copiar"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"agruparCon"}),(0,s.jsx)(n.td,{children:"Collection, Object"}),(0,s.jsx)(n.td,{children:"\u2192"}),(0,s.jsx)(n.td,{children:"Colecci\xf3n u objeto compartido a agrupar con el objeto resultante"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Resultado"}),(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{children:"\u2190"}),(0,s.jsx)(n.td,{children:"Copia de objeto"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,s.jsxs)(n.p,{children:["El comando ",(0,s.jsx)(n.strong,{children:"OB Copy"})," devuelve un objeto que contiene una copia completa de las propiedades, sub objetos y valores de ",(0,s.jsx)(n.em,{children:"objeto"}),".\nSi el ",(0,s.jsx)(n.em,{children:"objeto"})," contiene valores de tipo de puntero, por defecto la copia tambi\xe9n contiene los punteros. Sin embargo, puede resolver los punteros al momento de la copia pasando ",(0,s.jsx)(n.strong,{children:"True"})," en el par\xe1metro ",(0,s.jsx)(n.em,{children:"resuelvePunt"}),". En este caso, cada puntero presente como valor en ",(0,s.jsx)(n.em,{children:"objeto"})," se eval\xfaa al momento de la copia y se utiliza su valor desreferenciado."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Nota:"})," si las propiedades del ",(0,s.jsx)(n.em,{children:"objeto"})," son objetos compartidos o colecciones compartidas, se convierten en objetos o colecciones est\xe1ndar (no compartidos) en la copia devuelta. Use the second syntax if you want to return shared elements (see below)."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Segunda sintaxis: ",(0,s.jsx)(n.strong,{children:"OB Copy(object{; option{; groupWith}})"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Si se pasa, el par\xe1metro ",(0,s.jsx)(n.em,{children:"opcion"})," puede contener una de las siguientes constantes (o ambas):"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"opcion"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ck resolve pointers"}),(0,s.jsx)(n.td,{children:"Si el objeto original contiene valores de tipo puntero, por defecto la copia tambi\xe9n contiene los punteros. Sin embargo, puede resolver los punteros al copiar pasando los ck resolve pointers. En este caso, cada puntero presente en el objeto se eval\xfaa al copiar y se utiliza su valor desreferenciado."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ck shared"}),(0,s.jsxs)(n.td,{children:["Por defecto, ",(0,s.jsx)(n.strong,{children:"OB Copy"})," devuelve un objeto regular (no compartido), incluso si el comando se aplica a un objeto compartido. Pase la constante ck shared para crear un objeto compartido. En este caso, puede utilizar el par\xe1metro ",(0,s.jsx)(n.em,{children:"agruparCon"})," para asociar el objeto compartido con otra colecci\xf3n u objeto (ver m\xe1s abajo)."]})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["El par\xe1metro ",(0,s.jsx)(n.em,{children:"agruparCon"})," le permite designar una colecci\xf3n o un objeto con el que debe asociarse el objeto resultante."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notas:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OB Copy"})," puede ser usado con un objeto de selecci\xf3n de entidades. De forma predeterminada, si se omite ck shared, se devuelve una selecci\xf3n de entidades ",(0,s.jsx)(n.em,{children:"no compartida"}),". Si se pasa ck shared, se devuelve una selecci\xf3n de entidades compartida. En este contexto, la opci\xf3n ",(0,s.jsx)(n.em,{children:"agruparCon"})," es in\xfatil ya que una selecci\xf3n de entidades no tiene un ",(0,s.jsx)(n.em,{children:"identificador de bloqueo"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["El mismo principio se aplica a las selecciones de entidades almacenadas dentro de las propiedades del ",(0,s.jsx)(n.em,{children:"objeto"}),". Sin embargo, el comando se optimiza cuando se pasa ck shared y una selecci\xf3n de entidades anidada es ",(0,s.jsx)(n.em,{children:"compartible"}),": la misma referencia de selecci\xf3n de entidades se devuelve en el objeto resultante."]}),"\n",(0,s.jsxs)(n.li,{children:["Los objetos almac\xe9n de datos, clase de datos y entidad no se pueden copiar. Si se llama al comando ",(0,s.jsx)(n.strong,{children:"OB Copy"})," con ellos, se devuelve valor nulo."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"ejemplo-1",children:"Ejemplo 1"}),"\n",(0,s.jsx)(n.p,{children:"Usted quiere duplicar un objeto que contiene valores simples:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var $Object : Object\n\xa0var $JsonString : Text\n\xa0\n\xa0ARRAY OBJECT($arraySel;0)\n\xa0ALL RECORDS([Product])\n\xa0While(Not(End selection([Product])))\n\xa0\xa0\xa0\xa0OB SET($Object;"id";[Product]ID_Product)\n\xa0\xa0\xa0\xa0OB SET($Object;"Product Name";[Product]Product_Name)\n\xa0\xa0\xa0\xa0OB SET($Object;"Price";[Product]Price)\n\xa0\xa0\xa0\xa0OB SET($Object;"Tax rate";[Product]Tax_rate)\n\xa0\xa0\xa0\xa0$ref_value:=OB Copy($Object)\xa0//copia directa\n\xa0\xa0\xa0\xa0APPEND TO ARRAY($arraySel;$ref_value)\n\xa0\xa0//el contenido de $ref_value es id\xe9ntico al de $Object\n\xa0\xa0\xa0\xa0NEXT RECORD([Product])\n\xa0End while\n\xa0\xa0//el contenido de $ref_value\n\xa0$JsonString:=JSON Stringify array($arraySel)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"ejemplo-2",children:"Ejemplo 2"}),"\n",(0,s.jsx)(n.p,{children:"Duplique un objeto que contenga punteros (primera sintaxis):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var $ref : Object\n\xa0\n\xa0OB SET($ref;"name";->[Company]name)\xa0//objeto con punteros\n\xa0OB SET($ref;"country";->[Company]country)\n\xa0ARRAY OBJECT($sel;0)\n\xa0ARRAY OBJECT($sel2;0)\n\xa0\n\xa0ALL RECORDS([Company])\n\xa0\n\xa0While(Not(End selection([Company])))\n\xa0\xa0\xa0\xa0$ref_comp:=OB Copy($ref)\xa0// copiar sin evaluar punteros\n\xa0\xa0// $ref_comp={"name":"->[Company]name","country":"->[Company]Country"}\n\xa0\xa0\xa0\xa0$ref_comp2:=OB Copy($ref;True)\xa0//copiar con evaluaci\xf3n de punteros\n\xa0\xa0// $ref_comp={"name":"4D SAS","country":"France"}\n\xa0\xa0\xa0\xa0APPEND TO ARRAY($sel;$ref_comp)\n\xa0\xa0\xa0\xa0APPEND TO ARRAY($sel2;$ref_comp2)\n\xa0\xa0\xa0\xa0NEXT RECORD([Company])\n\xa0End while\n\xa0\n\xa0$Object:=JSON Stringify array($sel)\n\xa0$Object2:=JSON Stringify array($sel2)\n\xa0\n\xa0\xa0// $Object = [{"name":"","country":""},{"name":"","country":""},...]\n\xa0\xa0// $Object2 = [{"name":"4D SAS","country":"France"},{"name":"4D, Inc","country":"USA"},{"name":"Catalan","country":"France"}...]\n'})}),"\n",(0,s.jsx)(n.h4,{id:"ejemplo-3",children:"Ejemplo 3"}),"\n",(0,s.jsxs)(n.p,{children:["Queremos copiar el objeto est\xe1ndar (no compartido) ",(0,s.jsx)(n.em,{children:"$person"})," en el objeto compartido ",(0,s.jsx)(n.em,{children:"$sharedObject"}),". Para hacer esto, debemos crear una copia compartida del objeto (",(0,s.jsx)(n.em,{children:"$sharedObject"}),")."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var $person;$copy;$sharedObject : Object\n\xa0var $text : Text\n\xa0\n\xa0$text:=Document to text(Get 4D folder(Current resources folder)+"person.txt")\n\xa0$person:=JSON Parse($text)\xa0//$person es un objeto est\xe1ndar\n\xa0$sharedObject:=New shared object()\n\xa0$copy:=OB Copy($person;ck shared)\xa0//$copy es un objeto compartido\n\xa0\n\xa0\xa0//Entonces se puede poner en $sharedObject\n\xa0Use($sharedObject)\n\xa0\xa0\xa0\xa0$sharedObject.person:=$copy\n\xa0End use\n'})}),"\n",(0,s.jsx)(n.h4,{id:"ejemplo-4",children:"Ejemplo 4"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"$obj"}),' contiene un puntero (propiedad "name") en el campo "name" del registro actual.']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var $obj;$objWithPtr;$sharedObjWithPtr : Object\n\xa0$obj:=New object()\n\xa0\n\xa0\xa0//$obj es un objeto con un puntero\n\xa0OB SET($obj;"name";->[Persons]name)\n\xa0\n\xa0ALL RECORDS([Persons])\n\xa0\xa0//Ahora hay un registro actual en la tabla [Persons] por lo que se completa [Persons]name\n\xa0\xa0//\n\xa0\xa0// Si queremos copiar $obj como un objeto est\xe1ndar con evaluaci\xf3n de punteros\n\xa0\xa0// Hacemos esto:\n\xa0$objWithPtr:=OB Copy($obj;True)\n\xa0\xa0//\n\xa0\xa0// Si queremos copiar $obj como un objeto compartido con evaluaci\xf3n de punteros\n\xa0\xa0//\xa0 Hacemos esto:\n\xa0$sharedObjWithPtr:=OB Copy($obj;ck resolve pointers+ck shared)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"ejemplo-5",children:"Ejemplo 5"}),"\n",(0,s.jsxs)(n.p,{children:["Queremos copiar ",(0,s.jsx)(n.em,{children:"$sharedObj e"}),"n ",(0,s.jsx)(n.em,{children:"$sharedColl"})," pero dado que pertenecen a diferentes grupos compartidos, una copia directa dar\xeda como resultado un error. Debemos hacer una copia de ",(0,s.jsx)(n.em,{children:"$sharedObj"})," y designar ",(0,s.jsx)(n.em,{children:"$sharedColl"})," como grupo compartido para la copia."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-4d",children:'\xa0var $sharedObj;$objCopy : Object\n\xa0var $sharedColl : Collection\n\xa0\n\xa0\xa0//$sharedObj pertenece a un grupo compartido\n\xa0$sharedObj:=New shared object("lastname";"Smith";"address";New shared object("city";"New York"))\n\xa0\xa0//$sharedColl pertenece a otro grupo compartido\n\xa0$sharedColl:=New shared collection(New shared object("lastname";"Brown"))\n\xa0\n\xa0$objCopy:=OB Copy($sharedObj;ck shared;$sharedColl)\n\xa0\xa0//$objCopy pertenece a otro grupo compartido $sharedColl\n\xa0\n\xa0\xa0//Entonces $objCopy se puede poner en $sharedColl sin error\n\xa0Use($sharedColl)\n\xa0\xa0\xa0\xa0$sharedColl.push($objCopy)\n\xa0End use\n'})}),"\n",(0,s.jsx)(n.h4,{id:"ver-tambi\xe9n",children:"Ver tambi\xe9n"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/es/commands/ob-get",children:"OB Get"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"Objetos y colecciones compartidos"})]}),"\n",(0,s.jsx)(n.h4,{id:"propiedades",children:"Propiedades"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"N\xfamero de comando"}),(0,s.jsx)(n.td,{children:"1225"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Hilo seguro"}),(0,s.jsx)(n.td,{children:"\u2713"})]})]})]})]})}function p(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},250065:function(e,n,o){o.d(n,{Z:function(){return c},a:function(){return a}});var r=o(667294);let s={},t=r.createContext(s);function a(e){let n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);