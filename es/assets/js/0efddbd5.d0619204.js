"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[81600],{603905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>k});var n=a(667294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var d=n.createContext({}),p=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=p(e.components);return n.createElement(d.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,d=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=p(a),k=l,c=u["".concat(d,".").concat(k)]||u[k]||m[k]||r;return a?n.createElement(c,i(i({ref:t},s),{},{components:a})):n.createElement(c,i({ref:t},s))}));function k(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=u;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},621423:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>s});a(667294);var n=a(603905);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}const i={id:"EntityClass",title:"Entity"},o=void 0,d={unversionedId:"API/EntityClass",id:"version-20/API/EntityClass",title:"Entity",description:"Una entidad es una instancia de una Dataclass, como un registro de la tabla que coincide con la dataclass en su datastore asociado. Contiene los mismos atributos que la clase de datos, as\xed como los valores de los datos y las propiedades y funciones espec\xedficas.",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-20/API/EntityClass.md",sourceDirName:"API",slug:"/API/EntityClass",permalink:"/docs/es/20/API/EntityClass",draft:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20API%2FEntityClass.md%20(20)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20",frontMatter:{id:"EntityClass",title:"Entity"},sidebar:"docs",previous:{title:"Email",permalink:"/docs/es/20/API/EmailObjectClass"},next:{title:"EntitySelection",permalink:"/docs/es/20/API/EntitySelectionClass"}},p={},s=[{value:"Resumen",id:"resumen",level:3},{value:".<em>attributeName</em>",id:"attributename",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n",level:4},{value:"Ejemplo",id:"ejemplo",level:4},{value:".clone()",id:"clone",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-1",level:4},{value:"Ejemplo",id:"ejemplo-1",level:4},{value:".diff()",id:"diff",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-2",level:4},{value:"Ejemplo 1",id:"ejemplo-1-1",level:4},{value:"Ejemplo 2",id:"ejemplo-2",level:4},{value:".drop()",id:"drop",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-3",level:4},{value:"Ejemplo 1",id:"ejemplo-1-2",level:4},{value:"Ejemplo 2",id:"ejemplo-2-1",level:4},{value:".first()",id:"first",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-4",level:4},{value:"Ejemplo",id:"ejemplo-3",level:4},{value:".fromObject()",id:"fromobject",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-5",level:4},{value:"Ejemplo",id:"ejemplo-4",level:4},{value:".getDataClass()",id:"getdataclass",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-6",level:4},{value:"Ejemplo",id:"ejemplo-5",level:4},{value:".getKey()",id:"getkey",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-7",level:4},{value:"Ejemplo",id:"ejemplo-6",level:4},{value:".getRemoteContextAttributes()",id:"getremotecontextattributes",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-8",level:4},{value:"Ejemplo",id:"ejemplo-7",level:4},{value:"Ver tambi\xe9n",id:"ver-tambi\xe9n",level:4},{value:".getSelection()",id:"getselection",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-9",level:4},{value:"Ejemplo",id:"ejemplo-8",level:4},{value:".getStamp()",id:"getstamp",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-10",level:4},{value:"Ejemplo",id:"ejemplo-9",level:4},{value:".indexOf()",id:"indexof",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-11",level:4},{value:"Ejemplo",id:"ejemplo-10",level:4},{value:".isNew()",id:"isnew",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-12",level:4},{value:"Ejemplo",id:"ejemplo-11",level:4},{value:".last()",id:"last",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-13",level:4},{value:"Ejemplo",id:"ejemplo-12",level:4},{value:".lock()",id:"lock",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-14",level:4},{value:"Ejemplo 1",id:"ejemplo-1-3",level:4},{value:"Ejemplo 2",id:"ejemplo-2-2",level:4},{value:".next()",id:"next",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-15",level:4},{value:"Ejemplo",id:"ejemplo-13",level:4},{value:".previous()",id:"previous",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-16",level:4},{value:"Ejemplo",id:"ejemplo-14",level:4},{value:".reload()",id:"reload",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-17",level:4},{value:"Ejemplo",id:"ejemplo-15",level:4},{value:".save()",id:"save",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-18",level:4},{value:"status y statusText",id:"status-y-statustext",level:5},{value:"Ejemplo 1",id:"ejemplo-1-4",level:4},{value:"Ejemplo 2",id:"ejemplo-2-3",level:4},{value:"Ejemplo 3",id:"ejemplo-3-1",level:4},{value:".toObject()",id:"toobject",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-19",level:4},{value:"Ejemplo 1",id:"ejemplo-1-5",level:4},{value:"Ejemplo 2",id:"ejemplo-2-4",level:4},{value:"Ejemplo 3",id:"ejemplo-3-2",level:4},{value:"Ejemplo 4",id:"ejemplo-4-1",level:4},{value:"Ejemplo 5",id:"ejemplo-5-1",level:4},{value:"Ejemplo 6",id:"ejemplo-6-1",level:4},{value:"Ejemplo 7",id:"ejemplo-7-1",level:4},{value:".touched( )",id:"touched-",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-20",level:4},{value:"Ejemplo",id:"ejemplo-16",level:4},{value:".touchedAttributes( )",id:"touchedattributes-",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-21",level:4},{value:"Ejemplo 1",id:"ejemplo-1-6",level:4},{value:"Ejemplo 2",id:"ejemplo-2-5",level:4},{value:".unlock()",id:"unlock",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n-22",level:4},{value:"Ejemplo",id:"ejemplo-17",level:4}],m={toc:s};function u(e){var{components:t}=e,i=r(e,["components"]);return(0,n.kt)("wrapper",l({},m,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Una ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/ORDA/dsmapping#entity"}),"entidad")," es una instancia de una ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/ORDA/dsmapping#dataclass"}),"Dataclass"),", como un registro de la tabla que coincide con la dataclass en su datastore asociado. Contiene los mismos atributos que la clase de datos, as\xed como los valores de los datos y las propiedades y funciones espec\xedficas."),(0,n.kt)("h3",l({},{id:"resumen"}),"Resumen"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null})))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#attributename"}),(0,n.kt)("strong",{parentName:"a"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : any"),"\xa0","\xa0","\xa0","\xa0","almacena el valor del atributo para la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#clone"}),(0,n.kt)("strong",{parentName:"a"},".clone()")," : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","crea en memoria una nueva entidad que hace referencia al mismo registro que la entidad original")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#diff"}),(0,n.kt)("strong",{parentName:"a"},".diff"),"( ",(0,n.kt)("em",{parentName:"a"},"entityToCompare")," : 4D.Entity { ; ",(0,n.kt)("em",{parentName:"a"},"attributesToCompare")," : Collection } ) : Collection"),"\xa0","\xa0","\xa0","\xa0","compara el contenido de dos entidades y devuelve sus diferencias")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#drop"}),(0,n.kt)("strong",{parentName:"a"},".drop"),"( {",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer} ) : Object"),"\xa0","\xa0","\xa0","\xa0","elimina los datos contenidos en la entidad del almac\xe9n de datos")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#first"}),(0,n.kt)("strong",{parentName:"a"},".first()"),": 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","devuelve una referencia a la entidad en primera posici\xf3n de la selecci\xf3n de entidades a la que pertenece la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#fromobject"}),(0,n.kt)("strong",{parentName:"a"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filler")," : Object )"),"\xa0","\xa0","\xa0","\xa0","llena una entidad con el contenido de ",(0,n.kt)("em",{parentName:"td"},"filler"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getdataclass"}),(0,n.kt)("strong",{parentName:"a"},".getDataClass()")," : 4D.DataClass"),"\xa0","\xa0","\xa0","\xa0","devuelve la clase de datos de la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getkey"}),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Integer"),"\xa0","\xa0","\xa0","\xa0","devuelve el valor de la llave primaria de la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getremotecontextattributes"}),"Devuelve:"),"\xa0","\xa0","\xa0","\xa0","devuelve informaci\xf3n sobre el contexto de optimizaci\xf3n utilizado por la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getselection"}),(0,n.kt)("strong",{parentName:"a"},".getSelection()"),": 4D.EntitySelection"),"\xa0","\xa0","\xa0","\xa0","devuelve la selecci\xf3n de entidades a la que pertenece la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#getstamp"}),(0,n.kt)("strong",{parentName:"a"},".getStamp()")," : Integer"),"\xa0","\xa0","\xa0","\xa0"," devuelve el valor actual del sello de la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#indexof"}),(0,n.kt)("strong",{parentName:"a"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"a"},"entitySelection")," : 4D.EntitySelection } ) : Integer"),"\xa0","\xa0","\xa0","\xa0","devuelve la posici\xf3n de la entidad en una selecci\xf3n de entidades")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#isnew"}),(0,n.kt)("strong",{parentName:"a"},".isNew()")," : Boolean"),"\xa0","\xa0","\xa0","\xa0"," devuelve True si la entidad a la que se aplica acaba de ser creada y a\xfan no se ha guardado en el almac\xe9n de datos")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#last"}),(0,n.kt)("strong",{parentName:"a"},".last()")," : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","devuelve una referencia a la entidad en la \xfaltima posici\xf3n de la selecci\xf3n de entidades a la que pertenece la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#lock"}),(0,n.kt)("strong",{parentName:"a"},".lock"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","pone un bloqueo pesimista en el registro referenciado por la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#next"}),(0,n.kt)("strong",{parentName:"a"},".next()")," : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0","devuelve una referencia a la siguiente entidad en la selecci\xf3n de entidades a la que pertenece la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#previous"}),(0,n.kt)("strong",{parentName:"a"},".previous()"),"  : 4D.Entity"),"\xa0","\xa0","\xa0","\xa0"," devuelve una referencia a la entidad anterior en la selecci\xf3n de entidades a la que pertenece la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#reload"}),(0,n.kt)("strong",{parentName:"a"},".reload()")," : Object"),"\xa0","\xa0","\xa0","\xa0","recarga el contenido de la entidad en la memoria")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#save"}),(0,n.kt)("strong",{parentName:"a"},".save"),"( { ",(0,n.kt)("em",{parentName:"a"},"mode")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","guarda los cambios realizados en la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#toobject"}),(0,n.kt)("strong",{parentName:"a"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"a"},".toObject"),"( ",(0,n.kt)("em",{parentName:"a"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"a"},"options")," : Integer } ) : Object"),"\xa0","\xa0","\xa0","\xa0","devuelve un objeto que ha sido creado a partir de la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#touched"}),(0,n.kt)("strong",{parentName:"a"},".touched()")," : Boolean"),"\xa0","\xa0","\xa0","\xa0","comprueba si un atributo de la entidad ha sido modificado o no desde que se carg\xf3 la entidad en la memoria o se guard\xf3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#touchedattributes"}),(0,n.kt)("strong",{parentName:"a"},".touchedAttributes()")," : Collection"),"\xa0","\xa0","\xa0","\xa0","devuelve los nombres de los atributos que han sido modificados desde que la entidad fue cargada en memoria")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("a",l({parentName:"td"},{href:"#unlock"}),(0,n.kt)("strong",{parentName:"a"},".unlock()")," : Object"),"\xa0","\xa0","\xa0","\xa0","elimina el bloqueo pesimista del registro que coincide con la entidad")))),(0,n.kt)("h2",l({},{id:"attributename"}),".",(0,n.kt)("em",{parentName:"h2"},"attributeName")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},".attributeName"))," : any"),(0,n.kt)("h4",l({},{id:"descripci\xf3n"}),"Descripci\xf3n"),(0,n.kt)("p",null,"Todo atributo de la clase de datos est\xe1 disponible como propiedad de una entidad, que almacena el valor del atributo para la entidad."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Los atributos dataclass tambi\xe9n se pueden alcanzar utilizando la sintaxis alternativa con ","["," ].")),(0,n.kt)("p",null,"El tipo de valor del atributo depende del tipo ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/API/DataClassClass#attributename"}),"kind")," de atributo (relaci\xf3n o almacenamiento):"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"storage"),": ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a value of the same type as ",(0,n.kt)("em",{parentName:"li"},"attributeName"),"."),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"relatedEntity"),": ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName"),' returns the related entity. Los valores de la entidad relacionada est\xe1n disponibles directamente a trav\xe9s de las propiedades en cascada, por ejemplo "myEntity.employer.employees',"[",'0].lastname".'),(0,n.kt)("li",{parentName:"ul"},"If ",(0,n.kt)("em",{parentName:"li"},"attributeName")," kind is ",(0,n.kt)("strong",{parentName:"li"},"relatedEntities"),": ",(0,n.kt)("inlineCode",{parentName:"li"},".attributeName")," returns a new entity selection of related entities. Se eliminan los duplicados (se devuelve una entity selection desordenada).")),(0,n.kt)("h4",l({},{id:"ejemplo"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $myEntity : cs.EmployeeEntity\n $myEntity:=ds.Employee.new() //Crear una nueva entidad\n $myEntity.name:=\"Dupont\" // asignar 'Dupont' al atributo 'name'\n $myEntity.firstname:=\"John\" //asignar 'John' al atributo 'firstname'\n $myEntity.save() //guardar la entidad\n")),(0,n.kt)("h2",l({},{id:"clone"}),".clone()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".clone()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nueva entidad que hace referencia al registro")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-1"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".clone()")," crea en memoria una nueva entidad que hace referencia al mismo registro que la entidad original. Esta funci\xf3n permite actualizar las entidades por separado."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Tenga en cuenta que toda modificaci\xf3n realizada a las entidades se guardar\xe1 en el registro referenciado s\xf3lo cuando se ejecute la funci\xf3n ",(0,n.kt)("a",l({parentName:"p"},{href:"#save"}),(0,n.kt)("inlineCode",{parentName:"a"},".save( )")),".")),(0,n.kt)("p",null,"Esta funci\xf3n s\xf3lo puede utilizarse con entidades ya guardadas en la base de datos. No se puede llamar a una entidad reci\xe9n creada (para la que ",(0,n.kt)("a",l({parentName:"p"},{href:"#isnew"}),(0,n.kt)("inlineCode",{parentName:"a"},".isNew()"))," devuelve ",(0,n.kt)("strong",{parentName:"p"},"True"),")."),(0,n.kt)("h4",l({},{id:"ejemplo-1"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp; $empCloned : cs.EmployeeEntity\n $emp:=ds.Employee.get(672)\n $empCloned:=$emp.clone()\n\n $emp.lastName:="Smith" //Las actualizaciones realizadas en $emp no se realizan en $empCloned\n\n')),(0,n.kt)("h2",l({},{id:"diff"}),".diff()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".diff"),"( ",(0,n.kt)("em",{parentName:"p"},"entityToCompare")," : 4D.Entity { ; ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare")," : Collection } ) : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"entityToCompare"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Entidad a comparar con la entidad original")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"attributesToCompare"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre de los atributos a comparar")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Diferencias entre las entidades")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-2"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," compara el contenido de dos entidades y devuelve sus diferencias."),(0,n.kt)("p",null,"En ",(0,n.kt)("em",{parentName:"p"},"entityToCompare"),", pase la entidad a comparar con la entidad original."),(0,n.kt)("p",null,"En ",(0,n.kt)("em",{parentName:"p"},"attributesToCompare"),", puede designar atributos espec\xedficos para comparar. Si se suministra, la comparaci\xf3n se realiza s\xf3lo en los atributos especificados. Si no se suministra, se devuelven todas las diferencias entre las entidades."),(0,n.kt)("p",null,"Las diferencias se devuelven como una colecci\xf3n de objetos cuyas propiedades son:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Nombre de propiedad"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"attributeName"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"String"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre del atributo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"value"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"cualquiera - Depende del tipo de atributo"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valor del atributo en la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"otherValue"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"cualquiera - Depende del tipo de atributo"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valor del atributo en ",(0,n.kt)("em",{parentName:"td"},"entityToCompare"))))),(0,n.kt)("p",null,"S\xf3lo se incluyen en la colecci\xf3n los atributos con valores diferentes. Si no se encuentran diferencias, ",(0,n.kt)("inlineCode",{parentName:"p"},".diff()")," devuelve una colecci\xf3n vac\xeda."),(0,n.kt)("p",null,"La funci\xf3n se aplica a las propiedades cuyo ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/API/DataClassClass#attributename"}),"kind")," es ",(0,n.kt)("strong",{parentName:"p"},"storage")," o ",(0,n.kt)("strong",{parentName:"p"},"relatedEntity"),". En caso de que se haya actualizado una entidad relacionada (es decir, la llave for\xe1nea), el nombre de la entidad relacionada y su nombre de llave primaria se devuelven como propiedades ",(0,n.kt)("em",{parentName:"p"},"attributeName")," (",(0,n.kt)("em",{parentName:"p"},"value")," y ",(0,n.kt)("em",{parentName:"p"},"otherValue")," est\xe1n vac\xedos para el nombre de la entidad relacionada)."),(0,n.kt)("p",null,"Si una de las entidades comparadas es ",(0,n.kt)("strong",{parentName:"p"},"Null"),", se produce un error."),(0,n.kt)("h4",l({},{id:"ejemplo-1-1"}),"Ejemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $diff1; $diff2 : Collection\n employee:=ds.Employee.query("ID=1001").first()\n $clone:=employee.clone()\n employee.firstName:="MARIE"\n employee.lastName:="SOPHIE"\n employee.salary:=500\n $diff1:=$clone.diff(employee) // Se devuelven todas las diferencias\n $diff2:=$clone.diff(employee;New collection("firstName"; "lastName"))\n  // S\xf3lo se devuelven las diferencias en firstName y lastName\n')),(0,n.kt)("p",null,"$diff1:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    },\n    {\n        "attributeName": "salary",\n        "value": 66600,\n        "otherValue": 500\n    }\n]\n$diff2:\n\n[\n    {\n        "attributeName": "firstName",\n        "value": "Natasha",\n        "otherValue": "MARIE"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Locke",\n        "otherValue": "SOPHIE"\n    }\n]\n')),(0,n.kt)("h4",l({},{id:"ejemplo-2"}),"Ejemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var vCompareResult1; vCompareResult2; vCompareResult3; $attributesToInspect : Collection\n vCompareResult1:=New collection\n vCompareResult2:=New collection\n vCompareResult3:=New collection\n $attributesToInspect:=New collection\n\n $e1:=ds.Employee.get(636)\n $e2:=ds.Employee.get(636)\n\n $e1.firstName:=$e1.firstName+" update"\n $e1.lastName:=$e1.lastName+" update"\n\n $c:=ds.Company.get(117)\n $e1.employer:=$c\n $e2.salary:=100\n\n $attributesToInspect.push("firstName")\n $attributesToInspect.push("lastName")\n\n vCompareResult1:=$e1.diff($e2)\n vCompareResult2:=$e1.diff($e2;$attributesToInspect)\n vCompareResult3:=$e1.diff($e2;$e1.touchedAttributes())\n')),(0,n.kt)("p",null,"vCompareResult1 (se devuelven todas las diferencias):"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "salary",\n        "value": 33500,\n        "otherValue": 100\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n  {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 from Company\n        "otherValue": "[object Entity]"// Entity 118 from Company\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult2 (s\xf3lo se devuelven las diferencias en $attributesToInspect)"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    }\n]\n')),(0,n.kt)("p",null,"vCompareResult3 (s\xf3lo se devuelven las diferencias en atributos tocados $e1)"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'[\n    {\n        "attributeName": "firstName",\n        "value": "Karla update",\n        "otherValue": "Karla"\n    },\n    {\n        "attributeName": "lastName",\n        "value": "Marrero update",\n        "otherValue": "Marrero"\n    },\n    {\n        "attributeName": "employerID",\n        "value": 117,\n        "otherValue": 118\n    },\n     {\n        "attributeName": "employer",\n        "value": "[object Entity]",// Entity 117 from Company\n        "otherValue": "[object Entity]"// Entity 118 from Company\n\n    }\n]\n')),(0,n.kt)("h2",l({},{id:"drop"}),".drop()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".drop"),"( {",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer} ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed"),": activa el soltar incluso si el sello ha cambiado")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Resultado de la operaci\xf3n soltar")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-3"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," elimina los datos contenidos en la entidad del almac\xe9n de datos, de la tabla relacionada con su Dataclass. Tenga en cuenta que la entidad permanece en la memoria."),(0,n.kt)("p",null,"En una aplicaci\xf3n multiusuario o multiproceso, la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".drop()")," se ejecuta bajo un mecanismo de ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/ORDA/entities#entity-locking"}),'"bloqueo optimista"'),", en el que un sello de bloqueo interno se incrementa autom\xe1ticamente cada vez que se guarda el registro."),(0,n.kt)("p",null,"Por defecto, si se omite el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"mode"),", la funci\xf3n devolver\xe1 un error (ver m\xe1s abajo) si la misma entidad fue modificada (es decir, el sello ha cambiado) por otro proceso o usuario en el \xednterin."),(0,n.kt)("p",null,"De lo contrario, puede pasar la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed")," en el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"mode"),": en este caso, la entidad se abandona aunque el sello haya cambiado (y la llave primaria siga siendo la misma)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"El objeto devuelto por ",(0,n.kt)("inlineCode",{parentName:"p"},".drop( )")," contiene las siguientes propiedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"true si la acci\xf3n de soltar tiene \xe9xito, false en caso contrario.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(*)"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"C\xf3digo de error, ver abajo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(*)"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Descripci\xf3n del error, ver abajo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error de bloqueo pesimista:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"LockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Informaci\xf3n sobre el origen del bloqueo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Id del proceso")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre de usuario de la sesi\xf3n en la m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Alias de usuario si est\xe1 definido por ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", si no, nombre de usuario en el directorio 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre de la m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre del proceso")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error grave (un error grave puede ser intentar duplicar una llave primaria, disco lleno...):")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Mensaje de error")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"component signature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'firma del componente interno (por ejemplo, "dmbg" significa el componente de la base)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"C\xf3digo de error")))),(0,n.kt)("p",null,"(","*",") Los siguientes valores pueden ser devueltos en las propiedadese ",(0,n.kt)("em",{parentName:"p"},"status")," y ",(0,n.kt)("em",{parentName:"p"},"statusText")," del objeto ",(0,n.kt)("em",{parentName:"p"},"Result")," en caso de error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Valor"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Comentario"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La entidad ya no existe en los datos. Este error puede ocurrir en los siguientes casos:",(0,n.kt)("br",null),(0,n.kt)("li",null,"la entidad ha sido abandonada (el sello ha cambiado y el espacio de memoria est\xe1 ahora libre)"),(0,n.kt)("li",null,"la entidad ha sido eliminada y sustituida por otra con otra llave primaria (el sello ha cambiado y una nueva entidad utiliza ahora el espacio de memoria). Cuando se utiliza entity.drop( ), este error puede ser devuelto cuando se utiliza la opci\xf3n dk force drop if stamp changed. Cuando se utiliza entity.lock( ), este error puede ser devuelto cuando se utiliza la opci\xf3n dk reload if stamp changed")," ",(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "La entidad ya no existe"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La entidad est\xe1 bloqueada por un bloqueo pesimista.",(0,n.kt)("br",null)," ",(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "Ya est\xe1 bloqueado"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Un error grave es un error de base de datos de bajo nivel (por ejemplo, una llave duplicada), un error de hardware, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "Otro error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"El valor del sello interno de la entidad no coincide con el de la entidad almacenada en los datos (bloqueo optimista).",(0,n.kt)("br",null),(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")),(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")),(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")),(0,n.kt)("li",null,(0,n.kt)("strong",{parentName:"td"},"statusText asociado "),': "El sello ha cambiado"'))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Los privilegios actuales no permiten suprimir la entidad. ",(0,n.kt)("strong",{parentName:"td"},"StatusText asociado"),': "Permission Error"')))),(0,n.kt)("h4",l({},{id:"ejemplo-1-2"}),"Ejemplo 1"),(0,n.kt)("p",null,"Ejemplo sin la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $status : Object\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop()\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //La entidad soltada permanece en la memoria\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"ejemplo-2-1"}),"Ejemplo 2"),(0,n.kt)("p",null,"Ejemplo con la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"dk force drop if stamp changed"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n var $status : Object\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $status:=$employee.drop(dk force drop if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have dropped "+$employee.firstName+" "+$employee.lastName) //La entidad soltada permanece en la memoria\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"first"}),".first()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".first()"),": 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Referencia a la primera entidad de una selecci\xf3n de entidades (Null si no se encuentra)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-4"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".first()")," devuelve una referencia a la entidad en primera posici\xf3n de la selecci\xf3n de entidades a la que pertenece la entidad."),(0,n.kt)("p",null,"Si la entidad no pertenece a ninguna selecci\xf3n de entidades existente (es decir, ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection( )")," devuelve Null), la funci\xf3n devuelve un valor Null."),(0,n.kt)("h4",l({},{id:"ejemplo-3"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $firstEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Esta selecci\xf3n de entidades contiene 3 entidades\n $employee:=$employees[2]\n $firstEmployee:=$employee.first() //$firstEmployee es la primera entidad de la selecci\xf3n de entidades $employees\n')),(0,n.kt)("h2",l({},{id:"fromobject"}),".fromObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".fromObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filler")," : Object )"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filler"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objeto a partir del cual se llena la entidad")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-5"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()")," llena una entidad con el contenido de ",(0,n.kt)("em",{parentName:"p"},"filler"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Esta funci\xf3n modifica la entidad original.")),(0,n.kt)("p",null,"El mapeo entre el objeto y la entidad se realiza sobre los nombres de los atributos:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si una propiedad del objeto no existe en la dataclass, se ignora."),(0,n.kt)("li",{parentName:"ul"},"Los tipos de datos deben ser equivalentes. Si hay una diferencia de tipo entre el objeto y la dataclass, 4D intenta convertir los datos siempre que sea posible (ver ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/es/20/Concepts/data-types#converting-data-types"}),(0,n.kt)("inlineCode",{parentName:"a"},"Convertir tipos de datos")),"), de lo contrario el atributo se deja sin tocar."),(0,n.kt)("li",{parentName:"ul"},'La llave primaria puede darse tal cual o con una propiedad "__KEY" (llenada con el valor de la llave primaria). Si no existe ya en la dataclass, la entidad se crea con el valor dado cuando se llama a ',(0,n.kt)("a",l({parentName:"li"},{href:"#save"}),".save()"),". Si no se da la llave primaria, se crea la entidad y se asigna el valor de la llave primaria con respecto a las reglas de la base de datos. El autoincremento s\xf3lo se calcula si la llave primaria es nula.")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"filler")," puede manejar una entidad relacionada bajo las siguientes condiciones:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler")," contiene la propia llave for\xe1nea, o"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filler"),' contiene un objeto de propiedad con el mismo nombre que la entidad relacionada, que contiene una \xfanica propiedad denominada "',"_","_",'KEY".'),(0,n.kt)("li",{parentName:"ul"},"si la entidad relacionada no existe, se ignora.")),(0,n.kt)("h4",l({},{id:"ejemplo-4"}),"Ejemplo"),(0,n.kt)("p",null,"Con el siguiente objeto $o:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Mary",\n    "lastName": "Smith",\n    "salary": 36500,\n    "birthDate": "1958-10-27T00:00:00.000Z",\n    "woman": true,\n    "managerID": 411,// relatedEntity dada con PK\n    "employerID": 20 // relatedEntity dada con PK\n}\n')),(0,n.kt)("p",null,"El siguiente c\xf3digo crear\xe1 una entidad con entidades relacionadas con el gerente y el empleador."),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $o : Object\n var $entity : cs.EmpEntity\n $entity:=ds.Emp.new()\n $entity.fromObject($o)\n $entity.save()\n")),(0,n.kt)("p",null,"Tambi\xe9n puede utilizar una entidad relacionada dada como objeto:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'\n{\n    "firstName": "Marie",\n    "lastName": "Lechat",\n    "salary": 68400,\n    "birthDate": "1971-09-03T00:00:00.000Z",\n    "woman": false,\n    "employer": {// relatedEntity dada como un objeto\n        "__KEY": "21"\n    },\n    "manager": {// relatedEntity dada como un objeto\n        "__KEY": "411"\n    }\n}\n')),(0,n.kt)("h2",l({},{id:"getdataclass"}),".getDataClass()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17 R5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getDataClass()")," : 4D.DataClass"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.DataClass"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objeto DataClass al que pertenece la entidad")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-6"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".getDataClass()")," devuelve la clase de datos de la entidad. Esta funci\xf3n es \xfatil al escribir c\xf3digo gen\xe9rico."),(0,n.kt)("h4",l({},{id:"ejemplo-5"}),"Ejemplo"),(0,n.kt)("p",null,"El siguiente c\xf3digo gen\xe9rico duplica cualquier entidad:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),"  //m\xe9todo duplicate_entity \n  //duplicate_entity($entity)\n\n #DECLARE($entity : 4D.Entity)  \n var $entityNew : 4D.Entity\n var $status : Object\n\n $entityNew:=$entity.getDataClass().new() //crea una nueva entidad en la dataclass padre \n $entityNew.fromObject($entity.toObject()) //obtiene todos los atributos\n $entityNew[$entity.getDataClass().getInfo().primaryKey]:=Null //restablece la llave primaria\n $status:=$entityNew.save() //guarda la entidad duplicada\n")),(0,n.kt)("h2",l({},{id:"getkey"}),".getKey()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Text",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".getKey"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk key as string"),": la llave primaria se devuelve como una cadena, sin importar el tipo de llave primaria")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valor de la llave primaria de texto de la entidad")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Valor de la llave primaria num\xe9rica de la entidad")))),(0,n.kt)("h4",l({},{id:"descripci\xf3n-7"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".getKey()")," devuelve el valor de la llave primaria de la entidad."),(0,n.kt)("p",null,'Las llaves primarias pueden ser n\xfameros (enteros) o cadenas. Puede "forzar" que el valor de la llave primaria devuelto sea una cadena, sin importar el tipo de llave primaria real, pasando la opci\xf3n ',(0,n.kt)("inlineCode",{parentName:"p"},"dk key as string")," en el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"mode"),"."),(0,n.kt)("h4",l({},{id:"ejemplo-6"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees[0]\n ALERT("The primary key is "+$employee.getKey(dk key as string))\n')),(0,n.kt)("h2",l({},{id:"getremotecontextattributes"}),".getRemoteContextAttributes()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v19R5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,"Devuelve:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Atributos de contexto vinculados a la entidad, separados por una coma")))),(0,n.kt)("p",null,"|"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Modo avanzado:")," esta funci\xf3n est\xe1 pensada para los desarrolladores que necesitan personalizar las funcionalidades por defecto de ORDA para configuraciones espec\xedficas. En la mayor\xeda de los casos, no ser\xe1 necesario utilizarla.")),(0,n.kt)("h4",l({},{id:"descripci\xf3n-8"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".getRemoteContextAttributes()")," devuelve informaci\xf3n sobre el contexto de optimizaci\xf3n utilizado por la entidad ."),(0,n.kt)("p",null,"Extracci\xf3n de todas las propiedades de una ",(0,n.kt)("inlineCode",{parentName:"p"},"Entidad relacionada"),":"),(0,n.kt)("h4",l({},{id:"ejemplo-7"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'var $ds : 4D.DataStoreImplementation\nvar $address : cs.AddressEntity\nvar $p : cs.PersonsEntity\nvar $contextA : Object\nvar $info : Text\nvar $text : Text\n\n$ds:=Open datastore(New object("hostname"; "www.myserver.com"); "myDS")\n\n$contextA:=New object("context"; "contextA")\n\n$address:=$ds.Address.get(1; $contextA)\n$text:=""\nFor each ($p; $address.persons)\n    $text:=$p.firstname+" "+$p.lastname\nEnd for each\n\n$info:=$address.getRemoteContextAttributes()\n\n//$info = "persons,persons.lastname,persons.firstname"\n')),(0,n.kt)("h4",l({},{id:"ver-tambi\xe9n"}),"Ver tambi\xe9n"),(0,n.kt)("p",null,"Devuelve:"),(0,n.kt)("h2",l({},{id:"getselection"}),".getSelection()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getSelection()"),": 4D.EntitySelection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Entity selection a la que pertenece la entidad (nula si no se encuentra)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-9"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".getSelection()")," devuelve la selecci\xf3n de entidades a la que pertenece la entidad."),(0,n.kt)("p",null,"Si la entidad no pertenece a una selecci\xf3n de entidades, la funci\xf3n devuelve Null."),(0,n.kt)("h4",l({},{id:"ejemplo-8"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp : cs.EmployeeEntity\n var $employees; $employees2 : cs.EmployeeSelection\n $emp:=ds.Employee.get(672) // Esta entidad no pertenece a ninguna selecci\xf3n de entidades\n $employees:=$emp.getSelection() // $employees es Null\n\n $employees2:=ds.Employee.query("lastName=:1";"Smith") //Esta selecci\xf3n de entidades contiene 6 entidades\n $emp:=$employees2[0]  // Esta entidad pertenece a una selecci\xf3n de entidades\n\n ALERT("La entity selection contiene "+String($emp.getSelection().length)+" entidades")\n')),(0,n.kt)("h2",l({},{id:"getstamp"}),".getStamp()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".getStamp()")," : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Sello de la entidad (0 si la entidad acaba de ser creada)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-10"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".getStamp()"),"  devuelve el valor actual del sello de la entidad."),(0,n.kt)("p",null,"El sello interno se incrementa autom\xe1ticamente en 4D cada vez que se guarda la entidad. Gestiona los accesos y modificaciones concurrentes de los usuarios a las mismas entidades (ver ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/ORDA/entities#entity-locking"}),(0,n.kt)("strong",{parentName:"a"},"Bloqueo de entidades")),")."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para una entidad nueva (nunca guardada), la funci\xf3n devuelve 0. Para saber si una entidad acaba de ser creada, se recomienda utilizar ",(0,n.kt)("a",l({parentName:"p"},{href:"#isnew"}),".isNew()"),".")),(0,n.kt)("h4",l({},{id:"ejemplo-9"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $entity : cs.EmployeeEntity\n var $stamp : Integer\n\n $entity:=ds.Employee.new()\n $entity.lastname:="Smith"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=1\n\n $entity.lastname:="Wesson"\n $entity.save()\n $stamp:=$entity.getStamp() //$stamp=2\n')),(0,n.kt)("h2",l({},{id:"indexof"}),".indexOf()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".indexOf"),"( { ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," : 4D.EntitySelection } ) : Integer"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"entitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.EntitySelection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La posici\xf3n de la entidad se da en funci\xf3n de esta selecci\xf3n de entidades")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Posici\xf3n de la entidad en una selecci\xf3n de entidades")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-11"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".extract()")," devuelve la posici\xf3n de la entidad en una selecci\xf3n de entidades."),(0,n.kt)("p",null,"Por defecto, si se omite el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"entitySelection"),", la funci\xf3n devuelve la posici\xf3n de la entidad dentro de su propia selecci\xf3n de entidades. En caso contrario, devuelve la posici\xf3n de la entidad dentro de la ",(0,n.kt)("em",{parentName:"p"},"entitySelection")," especificada."),(0,n.kt)("p",null,"El valor resultante se incluye entre 0 y la longitud de la selecci\xf3n de entidades -1."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si la entidad no tiene una selecci\xf3n de entidad o no pertenece a ",(0,n.kt)("em",{parentName:"li"},"entidadSelecci\xf3n"),", la funci\xf3n devuelve -1."),(0,n.kt)("li",{parentName:"ul"},"Si ",(0,n.kt)("em",{parentName:"li"},"entitySelection")," es Null o no pertenece a la misma clase de datos que la entidad, se produce un error.")),(0,n.kt)("h4",l({},{id:"ejemplo-10"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Esta entity selection contiene 3 entidades\n $employee:=$employees[1] //Esta entidad pertenece a una entity selection\n ALERT("El \xedndice de la entidad en su propia selecci\xf3n de entidades es "+String($employee.indexOf())) //1\n\n $employee:=ds.Employee.get(725) //Esta entidad no pertenece a una selecci\xf3n de entidades\n ALERT("El \xedndice de la entidad es "+String($employee.indexOf())) // -1\n')),(0,n.kt)("h2",l({},{id:"isnew"}),".isNew()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".isNew()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"True si la entidad acaba de ser creada y a\xfan no se ha guardado. En caso contrario, False.")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-12"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".isNew()"),"  devuelve True si la entidad a la que se aplica acaba de ser creada y a\xfan no se ha guardado en el almac\xe9n de datos. ."),(0,n.kt)("h4",l({},{id:"ejemplo-11"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $emp : cs.EmployeeEntity\n\n $emp:=ds.Employee.new()\n\n If($emp.isNew())\n    ALERT("This is a new entity")\n End if\n')),(0,n.kt)("h2",l({},{id:"last"}),".last()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".last()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Referencia a la \xfaltima entidad de una selecci\xf3n de entidades (Null si no se encuentra)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-13"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".last()")," devuelve una referencia a la entidad en la \xfaltima posici\xf3n de la selecci\xf3n de entidades a la que pertenece la entidad."),(0,n.kt)("p",null,"Si la entidad no pertenece a ninguna selecci\xf3n de entidades existente (es decir, ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection( )")," devuelve Null), la funci\xf3n devuelve un valor Null."),(0,n.kt)("h4",l({},{id:"ejemplo-12"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $lastEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Esta selecci\xf3n de entidades contiene 3 entidades\n $employee:=$employees[0]\n $lastEmployee:=$employee.last() //$lastEmployee es la \xfaltima entidad de la selecci\xf3n de entidades $employees\n')),(0,n.kt)("h2",l({},{id:"lock"}),".lock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".lock"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed"),": recargar antes de bloquear si el sello ha cambiado")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Resultado de la operaci\xf3n de bloqueo")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-14"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n",(0,n.kt)("inlineCode",{parentName:"p"},".lock()")," pone un bloqueo pesimista en el registro referenciado por la entidad. El ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/ORDA/entities#entity-locking"}),"bloqueo se establece")," para un registro y todas las referencias de la entidad en el proceso actual."),(0,n.kt)("p",null,"Otros procesos ver\xe1n este registro como bloqueado (la propiedad ",(0,n.kt)("inlineCode",{parentName:"p"},"result.success"),' contendr\xe1 False si intentan bloquear la misma entidad usando esta funci\xf3n). S\xf3lo las funciones ejecutadas en la sesi\xf3n de "bloqueo" pueden editar y guardar los atributos de la entidad. La entidad puede ser cargada como de s\xf3lo lectura por otras sesiones, pero no podr\xe1n introducir y guardar valores.'),(0,n.kt)("p",null,"El objeto devuelto por <",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()<")," contiene la siguiente propiedad:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"cuando la funci\xf3n ",(0,n.kt)("a",l({parentName:"li"},{href:"#unlock"}),(0,n.kt)("inlineCode",{parentName:"a"},"unlock()"))," se llama en una entidad correspondiente en el mismo proceso"),(0,n.kt)("li",{parentName:"ul"},"autom\xe1ticamente, cuando ya no es referenciado por ninguna entidad en la memoria. Por ejemplo, si el bloqueo se pone s\xf3lo en una referencia local de una entidad, la entidad se desbloquea cuando la funci\xf3n termina. Mientras haya referencias a la entidad en la memoria, el registro permanece bloqueado.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Una entidad tambi\xe9n puede ser ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/REST/lock"}),"bloqueada por una sesi\xf3n REST"),", en cuyo caso s\xf3lo puede ser desbloqueada por la sesi\xf3n.")),(0,n.kt)("p",null,"Por defecto, si se omite el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"mode"),", la funci\xf3n devolver\xe1 un error (ver m\xe1s abajo) si la misma entidad fue modificada (es decir, el sello ha cambiado) por otro proceso o usuario en el \xednterin."),(0,n.kt)("p",null,"De lo contrario, puede pasar la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed")," en el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"mode"),": en este caso, no se devuelve error y la entidad se recarga cuando el sello cambia (si la entidad a\xfan existe y la llave primaria sigue siendo la misma)."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"El objeto devuelto por ",(0,n.kt)("inlineCode",{parentName:"p"},".lock( )")," contiene las siguientes propiedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"true si la acci\xf3n de bloqueo tiene \xe9xito (o si la entidad ya est\xe1 bloqueada en el proceso actual), false en caso contrario.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo si se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"em"},"dk reload if stamp changed"),":")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"wasReloaded")),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"true si la entidad fue recargada con \xe9xito, false en caso contrario.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"C\xf3digo de error, ver abajo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Descripci\xf3n del error, ver abajo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error de bloqueo pesimista:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record" si est\xe1 bloqueado por un proceso 4D, "Locked by session" si est\xe1 bloqueado por una sesi\xf3n REST')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Informaci\xf3n sobre el origen del bloqueo. Las propiedades devueltas dependen del origen del bloqueo (proceso 4D o sesi\xf3n REST).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo para un bloqueo por proceso 4D:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"ID del Proceso")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre de usuario de la sesi\xf3n en la m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre o alias del usuario 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"ID del usuario en el directorio de la base de datos 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre de la m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre del proceso")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Versi\xf3n del cliente")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo para un bloqueo por sesi\xf3n REST:")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'URL que bloque\xf3 la entidad (por ejemplo, "',(0,n.kt)("a",l({parentName:"td"},{href:"http://www.myserver.com%22"}),'www.myserver.com"'),")")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"IPAddr"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'Direcci\xf3n IP del bloqueo (por ejemplo: "127.0.0.1")')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"userAgent"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'userAgent del origin del bloqueo (ej: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36")')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error grave"))," (la llave primaria ya existe, el disco est\xe1 lleno...):")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Mensaje de error")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"component signature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'firma del componente interno (por ejemplo, "dmbg" significa el componente de la base)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"C\xf3digo de error")))),(0,n.kt)("p",null,"(","*",") Los siguientes valores pueden ser devueltos en las propiedades ",(0,n.kt)("em",{parentName:"p"},"status")," y ",(0,n.kt)("em",{parentName:"p"},"statusText")," del objeto ",(0,n.kt)("em",{parentName:"p"},"Result")," en caso de error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Valor"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Comentario"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La entidad ya no existe en los datos. Este error puede ocurrir en los siguientes casos:",(0,n.kt)("li",null,"la entidad ha sido abandonada (el sello ha cambiado y el espacio de memoria est\xe1 ahora libre)"),(0,n.kt)("li",null,"la entidad ha sido eliminada y sustituida por otra con otra llave primaria (el sello ha cambiado y una nueva entidad utiliza ahora el espacio de memoria). Cuando se utiliza ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),", este error puede devolverse cuando se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed"),". Cuando se utiliza ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", este error puede ser devuelto cuando se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "La entidad ya no existe"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La entidad est\xe1 bloqueada por un bloqueo pesimista.",(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "Ya est\xe1 bloqueado"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Un error grave es un error de base de datos de bajo nivel (por ejemplo, una llave duplicada), un error de hardware, etc. ",(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "Otro error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"El valor del sello interno de la entidad no coincide con el de la entidad almacenada en los datos (bloqueo optimista).",(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")),(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")),(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "El sello ha cambiado"')))),(0,n.kt)("h4",l({},{id:"ejemplo-1-3"}),"Ejemplo 1"),(0,n.kt)("p",null,"Ejemplo con error:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n $employee:=ds.Employee.get(716)\n $status:=$employee.lock()\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"ejemplo-2-2"}),"Ejemplo 2"),(0,n.kt)("p",null,"Ejemplo con la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"dk reload if stamp changed"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n $employee:=ds.Employee.get(717)\n $status:=$employee.lock(dk reload if stamp changed)\n Case of\n    :($status.success)\n       ALERT("You have locked "+$employee.firstName+" "+$employee.lastName)\n    :($status.status=dk status entity does not exist anymore)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"next"}),".next()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".next()")," : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Referencia a la siguiente entidad en la selecci\xf3n de entidades (Null si no se encuentra)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-15"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".next()")," devuelve una referencia a la siguiente entidad en la selecci\xf3n de entidades a la que pertenece la entidad."),(0,n.kt)("p",null,"Si la entidad no pertenece a ninguna selecci\xf3n de entidades existente (es decir, ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection()")," devuelve Null), la funci\xf3n devuelve un valor Null."),(0,n.kt)("p",null,"Si no hay una entidad siguiente v\xe1lida en la selecci\xf3n de entidades (es decir, se encuentra en la \xfaltima entidad de la selecci\xf3n), la funci\xf3n devuelve Null. Si la siguiente entidad ha sido descartada, la funci\xf3n devuelve la siguiente entidad v\xe1lida (y eventualmente Null)."),(0,n.kt)("h4",l({},{id:"ejemplo-13"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $nextEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Esta selecci\xf3n de entidades contiene 3 entidades\n $employee:=$employees[0]\n $nextEmployee:=$employee.next() //$nextEmployee es la segunda entidad de la selecci\xf3n de entidades $employees\n\n')),(0,n.kt)("h2",l({},{id:"previous"}),".previous()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".previous()"),"  : 4D.Entity"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4D.Entity"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Referencia a la entidad anterior en la selecci\xf3n de entidades (Null si no se encuentra)")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-16"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".previous()"),"  devuelve una referencia a la entidad anterior en la selecci\xf3n de entidades a la que pertenece la entidad."),(0,n.kt)("p",null,"Si la entidad no pertenece a ninguna selecci\xf3n de entidades existente (es decir, ",(0,n.kt)("a",l({parentName:"p"},{href:"#getselection"}),".getSelection()")," devuelve Null), la funci\xf3n devuelve un valor Null."),(0,n.kt)("p",null,"Si no hay una entidad anterior v\xe1lida en la selecci\xf3n de entidades (es decir, se encuentra en la primera entidad de la selecci\xf3n), la funci\xf3n devuelve Null. Si la entidad anterior ha sido soltada, la funci\xf3n devuelve la entidad v\xe1lida anterior (y eventualmente Null)."),(0,n.kt)("h4",l({},{id:"ejemplo-14"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employees : cs.EmployeeSelection\n var $employee; $previousEmployee : cs.EmployeeEntity\n $employees:=ds.Employee.query("lastName = :1";"H@") //Esta selecci\xf3n de entidades contiene 3 entidades\n $employee:=$employees[1]\n $previousEmployee:=$employee.previous() //$previousEmployee es la primera entidad de la selecci\xf3n de entidades $employees\n')),(0,n.kt)("h2",l({},{id:"reload"}),".reload()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".reload()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objeto estado")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-17"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".reload()")," recarga el contenido de la entidad en la memoria, de acuerdo a la informaci\xf3n almacenada en la tabla relacionada con la clase de datos en el almac\xe9n de datos. La recarga se realiza s\xf3lo si la entidad sigue existiendo con la misma llave primaria."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"El objeto devuelto por ",(0,n.kt)("inlineCode",{parentName:"p"},".reload( )")," contiene las siguientes propiedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"True si la acci\xf3n de recarga tiene \xe9xito, False en caso contrario.",(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"C\xf3digo de error, ver abajo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText(","*",")"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Descripci\xf3n del error, ver abajo")))),(0,n.kt)("p",null,"(","*",") Los siguientes valores pueden ser devueltos en las propiedadese ",(0,n.kt)("em",{parentName:"p"},"status")," y ",(0,n.kt)("em",{parentName:"p"},"statusText")," del objeto ",(0,n.kt)("em",{parentName:"p"},"Result")," en caso de error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Valor"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Comentario"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La entidad ya no existe en los datos. Este error puede ocurrir en los siguientes casos:",(0,n.kt)("br",null),(0,n.kt)("li",null,"la entidad ha sido abandonada (el sello ha cambiado y el espacio de memoria est\xe1 ahora libre)"),(0,n.kt)("li",null,"la entidad ha sido eliminada y sustituida por otra con otra llave primaria (el sello ha cambiado y una nueva entidad utiliza ahora el espacio de memoria). the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Cuando se utiliza ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", este error puede ser devuelto cuando se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"statusText asociado")),': "La entidad ya no existe"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Un error grave es un error de base de datos de bajo nivel (por ejemplo, una llave duplicada), un error de hardware, etc.",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"statusText asociado")),': "Otro error"')))),(0,n.kt)("h4",l({},{id:"ejemplo-15"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n var $result : Object\n\n $employees:=ds.Employee.query("lastName=:1";"Hollis")\n $employee:=$employees[0]\n $employee.firstName:="Mary"\n $result:=$employee.reload()\n Case of\n    :($result.success)\n       ALERT("Reload has been done")\n    :($result.status=dk status entity does not exist anymore)\n       ALERT("The entity has been dropped")\n End case\n')),(0,n.kt)("h2",l({},{id:"save"}),".save()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".save"),"( { ",(0,n.kt)("em",{parentName:"p"},"mode")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"mode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge"),": activa el modo de fusi\xf3n autom\xe1tica")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Resultado de la operaci\xf3n guardar")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-18"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," guarda los cambios realizados en la entidad en la tabla relacionada con su dataClass. Debe llamar a este m\xe9todo despu\xe9s de crear o modificar una entidad si quiere guardar los cambios realizados en ella."),(0,n.kt)("p",null,'La operaci\xf3n de guardar se ejecuta s\xf3lo si se ha "tocado" al menos un atributo de la entidad (ver las funciones ',(0,n.kt)("a",l({parentName:"p"},{href:"#touched"}),(0,n.kt)("inlineCode",{parentName:"a"},".touched()"))," y ",(0,n.kt)("a",l({parentName:"p"},{href:"#touchedattributes"}),(0,n.kt)("inlineCode",{parentName:"a"},".touchedAttributes()")),"). En caso contrario, la funci\xf3n no hace nada (no se llama al activador)."),(0,n.kt)("p",null,"En una aplicaci\xf3n multiusuario o multiproceso, la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," se ejecuta bajo un mecanismo de ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/ORDA/entities#entity-locking"}),'"bloqueo optimista"'),", en el que un sello de bloqueo interno se incrementa autom\xe1ticamente cada vez que se guarda el registro."),(0,n.kt)("p",null,"Por defecto, si se omite el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"mode"),", el m\xe9todo devolver\xe1 un error (ver m\xe1s abajo) siempre que la misma entidad haya sido modificada por otro proceso o usuario mientras tanto, sin importar el atributo o atributos modificados."),(0,n.kt)("p",null,"En caso contrario, se puede pasar la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge")," en el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"mode"),': cuando el modo de fusi\xf3n autom\xe1tica est\xe1 activado, una modificaci\xf3n realizada simult\xe1neamente por otro proceso/usuario en la misma entidad pero en un atributo diferente no dar\xe1 lugar a un error. Los datos resultantes guardados en la entidad ser\xe1n la combinaci\xf3n (la "fusi\xf3n") de todas las modificaciones no concurrentes (si se aplicaron modificaciones al mismo atributo, el guardado falla y se devuelve un error, incluso con el modo de fusi\xf3n autom\xe1tica).'),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"El modo de fusi\xf3n autom\xe1tica no est\xe1 disponible para los atributos de tipo Imagen, Objeto y Texto cuando se almacenan fuera del registro. Los cambios concurrentes en estos atributos dar\xe1n lugar a un error ",(0,n.kt)("inlineCode",{parentName:"p"},"dk status stamp has changed"),".")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"El objeto devuelto por ",(0,n.kt)("inlineCode",{parentName:"p"},".save()")," contiene las siguientes propiedades:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",l({parentName:"tr"},{align:null})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"True si la acci\xf3n guardar tiene \xe9xito, false en caso contrario.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo si se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"em"},"dk auto merge"))),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"autoMerged"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"True si se ha realizado una fusi\xf3n autom\xe1tica, False en caso contrario.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"status"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"C\xf3digo de error, ",(0,n.kt)("a",l({parentName:"td"},{href:"#status-and-statustext"}),"ver abajo"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"statusText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Descripci\xf3n del error, ",(0,n.kt)("a",l({parentName:"td"},{href:"#status-and-statustext"}),"ver m\xe1s abajo"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de bloqueo pesimista")),":")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockKindText"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'"Locked by record"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"lockInfo"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"object"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Informaci\xf3n sobre el origen del bloqueo")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_id"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Id del proceso")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre de usuario de la sesi\xf3n en la m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"user4d_alias"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Alias de usuario si est\xe1 definido por ",(0,n.kt)("inlineCode",{parentName:"td"},"SET USER ALIAS"),", si no, nombre de usuario en el directorio 4D")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"host_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre de la m\xe1quina")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"task_name"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombre del proceso")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"client_version"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},(0,n.kt)("em",{parentName:"strong"},"Disponible s\xf3lo en caso de error grave"))," (error grave - puede ser intentar duplicar una llave primaria, disco lleno...):")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errors"),(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"collection of objects"),(0,n.kt)("td",l({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"message"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Mensaje de error")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"componentSignature"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"text"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),'Firma del componente interno (por ejemplo, "dmbg" significa el componente de la base)')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null})),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"errCode"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"number"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"C\xf3digo de error")))),(0,n.kt)("h5",l({},{id:"status-y-statustext"}),"status y statusText"),(0,n.kt)("p",null,"Los siguientes valores pueden ser devueltos en las propiedades ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," y ",(0,n.kt)("inlineCode",{parentName:"p"},"statusText")," del objeto Result en caso de error:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Constante"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Valor"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Comentario"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status automerge failed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"6"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"(S\xf3lo si se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge"),") La opci\xf3n de fusi\xf3n autom\xe1tica fall\xf3 al guardar la entidad.",(0,n.kt)("strong",{parentName:"td"},"StatusText asociado"),': "Fusi\xf3n autom\xe1tica fallida"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status entity does not exist anymore")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"5"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La entidad ya no existe en los datos. Este error puede ocurrir en los siguientes casos:",(0,n.kt)("br",null),(0,n.kt)("li",null,"la entidad ha sido abandonada (el sello ha cambiado y el espacio de memoria est\xe1 ahora libre)"),(0,n.kt)("li",null,"la entidad ha sido eliminada y sustituida por otra con otra llave primaria (el sello ha cambiado y una nueva entidad utiliza ahora el espacio de memoria). the entity has been dropped and replaced by another one with another primary key (the stamp has changed and a new entity now uses the memory space). Cuando se utiliza ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),", este error puede ser devuelto cuando se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "La entidad ya no existe"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status locked")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"3"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"La entidad est\xe1 bloqueada por un bloqueo pesimista.",(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "Ya est\xe1 bloqueado"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status serious error")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"4"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Un error grave es un error de base de datos de bajo nivel (por ejemplo, una llave duplicada), un error de hardware, etc. ",(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "Otro error"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status stamp has changed")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"2"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"El valor del sello interno de la entidad no coincide con el de la entidad almacenada en los datos (bloqueo optimista).",(0,n.kt)("br",null),(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".save( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk auto merge")),(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".drop( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk force drop if stamp changed")),(0,n.kt)("li",null,"con ",(0,n.kt)("inlineCode",{parentName:"td"},".lock( )"),": error s\xf3lo si no se utiliza la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"td"},"dk reload if stamp changed")),(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"td"},"statusText asociado"),': "El sello ha cambiado"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk status wrong permission")),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"1"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Los privilegios actuales no permiten guardar la entidad. ",(0,n.kt)("strong",{parentName:"td"},"StatusText asociado"),': "Permission Error"')))),(0,n.kt)("h4",l({},{id:"ejemplo-1-4"}),"Ejemplo 1"),(0,n.kt)("p",null,"Crear una nueva entidad:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs.EmployeeEntity\n $employee:=ds.Employee.new()\n $employee.firstName:="Mary"\n $employee.lastName:="Smith"\n $status:=$employee.save()\n If($status.success)\n    ALERT("Employee created")\n End if\n')),(0,n.kt)("h4",l({},{id:"ejemplo-2-3"}),"Ejemplo 2"),(0,n.kt)("p",null,"Actualizaci\xf3n de una entidad sin la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save()\n Case of\n    :($status.success)\n       ALERT("Employee updated")\n    :($status.status=dk status stamp has changed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h4",l({},{id:"ejemplo-3-1"}),"Ejemplo 3"),(0,n.kt)("p",null,"Actualizaci\xf3n de una entidad con la opci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},"dk auto merge"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $status : Object\n\n var $employee : cs.EmployeeEntity\n var $employees : cs.EmployeeSelection\n\n $employees:=ds.Employee.query("lastName=:1";"Smith")\n $employee:=$employees.first()\n $employee.lastName:="Mac Arthur"\n $status:=$employee.save(dk auto merge)\n Case of\n    :($status.success)\n       ALERT("Employee updated")\n    :($status.status=dk status automerge failed)\n       ALERT($status.statusText)\n End case\n')),(0,n.kt)("h2",l({},{id:"toobject"}),".toObject()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".toObject"),"() : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterString")," : Text { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer}  ) : Object",(0,n.kt)("br",null),(0,n.kt)("strong",{parentName:"p"},".toObject"),"( ",(0,n.kt)("em",{parentName:"p"},"filterCol")," : Collection { ; ",(0,n.kt)("em",{parentName:"p"},"options")," : Integer } ) : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filterString"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Text"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Atributo(s) a extraer (cadena separada por comas)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"filterCol"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Colecci\xf3n de atributos a extraer")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"options"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Integer"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"->"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),(0,n.kt)("inlineCode",{parentName:"td"},"dk with primary key"),": a\xf1ade la propiedad ","_","_","KEY;",(0,n.kt)("br",null),(0,n.kt)("inlineCode",{parentName:"td"},"dk with stamp"),": a\xf1ade la propiedad ","_","STAMP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objeto creado a partir de la entidad")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-19"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," devuelve un objeto que ha sido creado a partir de la entidad. Los nombres de las propiedades en el objeto coinciden con los nombres de los atributos de la entidad."),(0,n.kt)("p",null,"Si no se especifica ning\xfan filtro, o si el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"filterString"),' contiene una cadena vac\xeda o "*", el objeto devuelto contendr\xe1:'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"todos los atributos de la entidad de almacenamiento"),(0,n.kt)("li",{parentName:"ul"},"atributos de la ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")," ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/es/20/API/DataClassClass#attributename"}),"kind"),": se obtiene una propiedad con el mismo nombre que la entidad relacionada (nombre del enlace muchos-a-uno). El atributo se extrae con la forma simple."),(0,n.kt)("li",{parentName:"ul"},"atributos donde ",(0,n.kt)("a",l({parentName:"li"},{href:"/docs/es/20/API/DataClassClass#attributename"}),"kind")," es ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntities"),": no se devuelve el atributo.")),(0,n.kt)("p",null,"En el primer par\xe1metro, se pasa el atributo o atributos de la entidad a extraer. Puede pasar:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterString"),': una cadena con rutas de propiedades separadas por comas: "propertyPath1, propertyPath2, ...", o'),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"filterCol"),": una colecci\xf3n de cadenas: ","[",'"propertyPath1","propertyPath2";...]')),(0,n.kt)("p",null,"Si se especifica un filtro para los atributos de la relatedEntity ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/API/DataClassClass#attributename"}),"kind"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity" -> se extrae de forma sencilla: un objeto con la propiedad ',"_","_","KEY (llave primaria)."),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.*" -> se extraen todas las propiedades'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntity.propertyName1; relatedEntity.propertyName2; ..." -> s\xf3lo se extraen esas propiedades')),(0,n.kt)("p",null,"Si se especifica un filtro para los atributos de las relatedEntities ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/API/DataClassClass#attributename"}),"kind"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.*" -> se extraen todas las propiedades'),(0,n.kt)("li",{parentName:"ul"},'propertyPath = "relatedEntities.propertyName1; relatedEntities.propertyName2; ..." -> s\xf3lo se extraen esas propiedades')),(0,n.kt)("p",null,"En el par\xe1metro ",(0,n.kt)("em",{parentName:"p"},"options")," se puede pasar el selector ",(0,n.kt)("inlineCode",{parentName:"p"},"ddk with primary key")," y/o",(0,n.kt)("inlineCode",{parentName:"p"},"dk with stamp")," para a\xf1adir las llaves primarias de la entidad y/o los sellos en los objetos extra\xeddos."),(0,n.kt)("admonition",l({},{title:"Advertencia",type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},'Si utiliza otro atributo distinto de la llave primaria como atributo Uno en una relaci\xf3n, el valor de este atributo se escribir\xe1 en la propiedad "__KEY". Tenga en cuenta que se recomienda utilizar la llave primaria como atributo Uno en sus relaciones, especialmente cuando utilice las funciones ',(0,n.kt)("inlineCode",{parentName:"p"},".toObject()")," y ",(0,n.kt)("inlineCode",{parentName:"p"},".fromObject()"),".")),(0,n.kt)("h4",l({},{id:"ejemplo-1-5"}),"Ejemplo 1"),(0,n.kt)("p",null,"En todos los ejemplos de esta secci\xf3n se utilizar\xe1 la siguiente estructura:"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(355081).Z,width:"1000",height:"610"})),(0,n.kt)("p",null,"Sin par\xe1metro de filtro:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),"employeeObject:=employeeSelected.toObject()\n")),(0,n.kt)("p",null,"Ejemplo con el tipo ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," con una forma simple:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": { // relatedEntity extracted with simple form\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"ejemplo-2-4"}),"Ejemplo 2"),(0,n.kt)("p",null,"Extraer la llave primaria y el sello:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("";dk with primary key+dk with stamp)\n')),(0,n.kt)("p",null,"Ejemplo con el tipo ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," con una forma simple:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "__KEY": 413,\n   "__STAMP": 1,\n    "ID": 413,\n    "firstName": "Greg",\n    "lastName": "Wahl",\n    "salary": 0,\n    "birthDate": "1963-02-01T00:00:00.000Z",\n    "woman": false,\n    "managerID": 412,\n    "employerID": 20,\n    "photo": "[object Picture]",\n    "extra": null,\n    "employer": {\n        "__KEY": 20\n    },\n    "manager": {\n        "__KEY": 412\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"ejemplo-3-2"}),"Ejemplo 3"),(0,n.kt)("p",null,"Desplegando todas las propiedades de ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'employeeObject:=employeeSelected.toObject("directReports.*")\n')),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "directReports": [\n        {\n            "ID": 418,\n            "firstName": "Lorena",\n            "lastName": "Boothe",\n            "salary": 44800,\n            "birthDate": "1970-10-02T00:00:00.000Z",\n            "woman": true,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 419,\n            "firstName": "Drew",\n            "lastName": "Caudill",\n            "salary": 41000,\n            "birthDate": "2030-01-12T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        },\n        {\n            "ID": 420,\n            "firstName": "Nathan",\n            "lastName": "Gomes",\n            "salary": 46300,\n            "birthDate": "2010-05-29T00:00:00.000Z",\n            "woman": false,\n            "managerID": 413,\n            "employerID": 20,\n            "photo": "[object Picture]",\n            "extra": null,\n            "employer": {\n                "__KEY": 20\n            },\n            "manager": {\n                "__KEY": 413\n            }\n        }\n    ]\n}\n')),(0,n.kt)("h4",l({},{id:"ejemplo-4-1"}),"Ejemplo 4"),(0,n.kt)("p",null,"Extracci\xf3n de algunas propiedades de ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntities"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("firstName, directReports.lastName")\n')),(0,n.kt)("p",null,"Ejemplo con el tipo ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," con una forma simple:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "directReports": [\n        {\n            "lastName": "Boothe"\n        },\n        {\n            "lastName": "Caudill"\n        },\n        {\n            "lastName": "Gomes"\n        }\n    ]\n}\n')),(0,n.kt)("h4",l({},{id:"ejemplo-5-1"}),"Ejemplo 5"),(0,n.kt)("p",null,"Obtenga una ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," en un formulario simple:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' $coll:=New collection("firstName";"employer")\n employeeObject:=employeeSelected.toObject($coll)\n')),(0,n.kt)("p",null,"Ejemplo con el tipo ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," con una forma simple:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "firstName": "Greg",\n    "employer": {\n        "__KEY": 20\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"ejemplo-6-1"}),"Ejemplo 6"),(0,n.kt)("p",null,"Extracci\xf3n de todas las propiedades de una ",(0,n.kt)("inlineCode",{parentName:"p"},"Entidad relacionada"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' employeeObject:=employeeSelected.toObject("employer.*")\n')),(0,n.kt)("p",null,"Ejemplo con el tipo ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," con una forma simple:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "ID": 20,\n        "name": "India Astral Secretary",\n        "creationDate": "1984-08-25T00:00:00.000Z",\n        "revenues": 12000000,\n        "extra": null\n    }\n}\n')),(0,n.kt)("h4",l({},{id:"ejemplo-7-1"}),"Ejemplo 7"),(0,n.kt)("p",null,"Extracci\xf3n de algunas propiedades de una ",(0,n.kt)("inlineCode",{parentName:"p"},"Entidad relacionada"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' $col:=New collection\n $col.push("employer.name")\n $col.push("employer.revenues")\n employeeObject:=employeeSelected.toObject($col)\n')),(0,n.kt)("p",null,"Ejemplo con el tipo ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity")," con una forma simple:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),'{\n    "employer": {\n        "name": "India Astral Secretary",\n        "revenues": 12000000\n    }\n}\n')),(0,n.kt)("h2",l({},{id:"touched-"}),".touched( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touched()")," : Boolean"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"True si se ha modificado al menos un atributo de la entidad y a\xfan no se ha guardado, si no, False")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-20"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," comprueba si un atributo de la entidad ha sido modificado o no desde que se carg\xf3 la entidad en la memoria o se guard\xf3."),(0,n.kt)("p",null,"Si un atributo ha sido modificado o calculado, la funci\xf3n devuelve True, en caso contrario devuelve False. Puede utilizar esta funci\xf3n para determinar si necesita guardar la entidad."),(0,n.kt)("p",null,"Esta funci\xf3n devuelve False para una nueva entidad que acaba de ser creada (con ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/API/DataClassClass#new"}),(0,n.kt)("inlineCode",{parentName:"a"},".new( )")),"). Tenga en cuenta, sin embargo, que si utiliza una funci\xf3n que calcula un atributo de la entidad, la funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," devolver\xe1 entonces True. Por ejemplo, si se llama a ",(0,n.kt)("a",l({parentName:"p"},{href:"#getkey"}),(0,n.kt)("inlineCode",{parentName:"a"},".getKey()"))," para calcular la llave primaria, ",(0,n.kt)("inlineCode",{parentName:"p"},".touched()")," devuelve True."),(0,n.kt)("h4",l({},{id:"ejemplo-16"}),"Ejemplo"),(0,n.kt)("p",null,"En este ejemplo, comprobamos si es necesario guardar la entidad:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," var $emp : cs.EmployeeEntity\n $emp:=ds.Employee.get(672)\n $emp.firstName:=$emp.firstName //Aunque se actualice con el mismo valor, el atributo se marca como tocado\n\n If($emp.touched()) //si se ha modificado al menos uno de los atributos\n    $emp.save()\n End if // de lo contrario, no es necesario guardar la entidad\n")),(0,n.kt)("h2",l({},{id:"touchedattributes-"}),".touchedAttributes( )"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".touchedAttributes()")," : Collection"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Collection"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Nombres de atributos tocados, o colecci\xf3n vac\xeda")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-21"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".touchedAttributes()")," devuelve los nombres de los atributos que han sido modificados desde que la entidad fue cargada en memoria."),(0,n.kt)("p",null,"Esto se aplica a los atributos ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/API/DataClassClass#attributename"}),"kind")," ",(0,n.kt)("inlineCode",{parentName:"p"},"storage")," o ",(0,n.kt)("inlineCode",{parentName:"p"},"relatedEntity"),"."),(0,n.kt)("p",null,"En el caso de que se haya tocado una entidad relacionada (es decir, la llave externa), se devuelve el nombre de la entidad relacionada y el nombre de su llave primaria."),(0,n.kt)("p",null,"Si no se ha tocado ning\xfan atributo de entidad, el m\xe9todo devuelve una colecci\xf3n vac\xeda."),(0,n.kt)("h4",l({},{id:"ejemplo-1-6"}),"Ejemplo 1"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs.EmployeeEntity\n\n $touchedAttributes:=New collection\n $emp:=ds.Employee.get(725)\n $emp.firstName:=$emp.firstName //Aunque se actualice con el mismo valor, el atributo se marca como tocado\n $emp.lastName:="Martin"\n $touchedAttributes:=$emp.touchedAttributes()\n  //$touchedAttributes: ["firstName","lastName"]\n')),(0,n.kt)("h4",l({},{id:"ejemplo-2-5"}),"Ejemplo 2"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $touchedAttributes : Collection\n var $emp : cs.EmployeeEntity\n var $company : cs.CompanyEntity\n\n $touchedAttributes:=New collection\n\n $emp:=ds.Employee.get(672)\n $emp.firstName:=$emp.firstName\n $emp.lastName:="Martin"\n\n $company:=ds.Company.get(121)\n $emp.employer:=$company\n\n $touchedAttributes:=$emp.touchedAttributes()\n\n  //collection $touchedAttributes: ["firstName","lastName","employer","employerID"]\n')),(0,n.kt)("p",null,"En este caso:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"firstName y lastName tienen un tipo ",(0,n.kt)("inlineCode",{parentName:"li"},"storage")),(0,n.kt)("li",{parentName:"ul"},"employer tiene un tipo ",(0,n.kt)("inlineCode",{parentName:"li"},"relatedEntity")),(0,n.kt)("li",{parentName:"ul"},"employerID es la llave extranjera de la entidad relacionada con el empleador")),(0,n.kt)("h2",l({},{id:"unlock"}),".unlock()"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Hist\xf3rico"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Versi\xf3n"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Modificaciones"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"v17"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"A\xf1adidos"))))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},".unlock()")," : Object"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Par\xe1metros"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:"center"})),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Result"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Object"),(0,n.kt)("td",l({parentName:"tr"},{align:"center"}),"<-"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Objeto estado")))),(0,n.kt)("p",null,"|"),(0,n.kt)("h4",l({},{id:"descripci\xf3n-22"}),"Descripci\xf3n"),(0,n.kt)("p",null,"La funci\xf3n ",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()")," elimina el bloqueo pesimista del registro que coincide con la entidad en el almac\xe9n de datos y la tabla relacionados con su clase de datos."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Para m\xe1s informaci\xf3n, consulte la secci\xf3n ",(0,n.kt)("a",l({parentName:"p"},{href:"/docs/es/20/ORDA/entities#entity-locking"}),"Entity locking"),".")),(0,n.kt)("p",null,"Un registro se desbloquea autom\xe1ticamente cuando ya no es referenciado por ninguna entidad en el proceso de bloqueo (por ejemplo: si el bloqueo se pone s\xf3lo en una referencia local de una entidad, la entidad y, por tanto, el registro se desbloquea cuando el proceso termina)."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Cuando un registro se bloquea, debe desbloquearse desde el proceso de bloqueo y en la referencia de la entidad que puso el bloqueo. Por ejemplo:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"})," $e1:=ds.Emp.all()[0]\n $e2:=ds.Emp.all()[0]\n $res:=$e1.lock() //$res.success=true\n $res:=$e2.unlock() //$res.success=false\n $res:=$e1.unlock() //$res.success=true\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Result")),(0,n.kt)("p",null,"El objeto devuelto por <",(0,n.kt)("inlineCode",{parentName:"p"},".unlock()<")," contiene la siguiente propiedad:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Propiedad"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Tipo"),(0,n.kt)("th",l({parentName:"tr"},{align:null}),"Descripci\xf3n"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:null}),"success"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"Boolean"),(0,n.kt)("td",l({parentName:"tr"},{align:null}),"True si la acci\xf3n de desbloquear tiene \xe9xito, False en caso contrario. Si el desbloqueo se realiza en una entidad abandonada, en un registro no bloqueado o en un registro bloqueado por otro proceso o entidad, el \xe9xito es False.")))),(0,n.kt)("h4",l({},{id:"ejemplo-17"}),"Ejemplo"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-4d"}),' var $employee : cs.EmployeeEntity\n var $status : Object\n\n $employee:=ds.Employee.get(725)\n $status:=$employee.lock()\n ... //processing\n $status:=$employee.unlock()\n If($status.success)\n    ALERT("The entity is now unlocked")\n End if\n')))}u.isMDXComponent=!0},355081:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/dataclassAttribute4-96c4a541a87b02eee83316636b0ae059.png"}}]);