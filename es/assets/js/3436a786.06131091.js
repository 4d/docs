"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[22915],{918075:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var d=s(474848),t=s(28453);const r={id:"http-request",title:"HTTP Request",slug:"/commands/http-request",displayed_sidebar:"docs"},i=void 0,l={id:"commands-legacy/http-request",title:"HTTP Request",description:"HTTP Request ( metodoHTTP ; url ; contenido ; respuesta {; nomEncab ; valoresEncab}{; *} ) -> Resultado",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R7/commands-legacy/http-request.md",sourceDirName:"commands-legacy",slug:"/commands/http-request",permalink:"/docs/es/commands/http-request",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fhttp-request.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"http-request",title:"HTTP Request",slug:"/commands/http-request",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"HTTP Parse message",permalink:"/docs/es/commands/http-parse-message"},next:{title:"HTTP SET CERTIFICATES FOLDER",permalink:"/docs/es/commands/http-set-certificates-folder"}},a={},o=[{value:"Ejemplo 1",id:"ejemplo-1",level:4},{value:"Ejemplo 2",id:"ejemplo-2",level:4},{value:"Ejemplo 3",id:"ejemplo-3",level:4},{value:"Ver tambi\xe9n",id:"ver-tambi\xe9n",level:4}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"HTTP Request"})," ( ",(0,d.jsx)(n.em,{children:"metodoHTTP"})," ; ",(0,d.jsx)(n.em,{children:"url"})," ; ",(0,d.jsx)(n.em,{children:"contenido"})," ; ",(0,d.jsx)(n.em,{children:"respuesta"})," {; ",(0,d.jsx)(n.em,{children:"nomEncab"})," ; ",(0,d.jsx)(n.em,{children:"valoresEncab"}),"}{; *} ) -> Resultado"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Par\xe1metro"}),(0,d.jsx)(n.th,{children:"Tipo"}),(0,d.jsx)(n.th,{}),(0,d.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"metodoHTTP"}),(0,d.jsx)(n.td,{children:"Text"}),(0,d.jsx)(n.td,{children:"\u2192"}),(0,d.jsx)(n.td,{children:"M\xe9todo HTTP para la petici\xf3n"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"url"}),(0,d.jsx)(n.td,{children:"Text"}),(0,d.jsx)(n.td,{children:"\u2192"}),(0,d.jsx)(n.td,{children:"URL a la cual enviar la petici\xf3n"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"contenido"}),(0,d.jsx)(n.td,{children:"Text, Blob, Picture, Object"}),(0,d.jsx)(n.td,{children:"\u2192"}),(0,d.jsx)(n.td,{children:"Contenido del cuerpo(body)de la petici\xf3n"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"respuesta"}),(0,d.jsx)(n.td,{children:"Text, Blob, Picture, Object"}),(0,d.jsx)(n.td,{children:"\u2190"}),(0,d.jsx)(n.td,{children:"Resultado de la petici\xf3n"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"nomEncab"}),(0,d.jsx)(n.td,{children:"Text array"}),(0,d.jsx)(n.td,{children:"\u2192"}),(0,d.jsx)(n.td,{children:"Nombres de los encabezados de la petici\xf3n"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u2190"}),(0,d.jsx)(n.td,{children:"Nombres de los encabezados devueltos"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"valoresEncab"}),(0,d.jsx)(n.td,{children:"Text array"}),(0,d.jsx)(n.td,{children:"\u2192"}),(0,d.jsx)(n.td,{children:"Valores de los encabezados de la petici\xf3n"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u2190"}),(0,d.jsx)(n.td,{children:"Valores de los encabezados devueltos"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"*"}),(0,d.jsx)(n.td,{children:"Operador"}),(0,d.jsx)(n.td,{children:"\u2192"}),(0,d.jsx)(n.td,{children:"Si se pasa, la conexi\xf3n se mantiene (keep-alive)Si se omite, la conexi\xf3n se cierra autom\xe1ticamente"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Resultado"}),(0,d.jsx)(n.td,{children:"Integer"}),(0,d.jsx)(n.td,{children:"\u2190"}),(0,d.jsx)(n.td,{children:"C\xf3digo de estado HTTP"})]})]})]}),"\n",(0,d.jsx)(n.admonition,{title:"Compatibilidad",type:"info",children:(0,d.jsxs)(n.p,{children:["Este comando se mantiene s\xf3lo por razones de compatibilidad. Ahora se recomienda utilizar ",(0,d.jsx)(n.a,{href:"/docs/es/API/HTTPRequestClass",children:(0,d.jsx)(n.code,{children:"4D.HTTPRequest class"})}),"."]})}),"\n",(0,d.jsx)(n.h4,{id:""}),"\n",(0,d.jsxs)(n.p,{children:["El comando ",(0,d.jsx)(n.strong,{children:"HTTP Request"})," permite enviar todo tipo de petici\xf3n HTTP a un URL espec\xedfico y procesar la respuesta del servidor HTTP."]}),"\n",(0,d.jsxs)(n.p,{children:["Pase en el par\xe1metro ",(0,d.jsx)(n.em,{children:"metodoHTTP"})," el m\xe9todo HTTP de la petici\xf3n. Puede utilizar una de las siguientes constantes, del tema ",(0,d.jsx)(n.em,{children:"HTTP Client"}),":"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Constante"}),(0,d.jsx)(n.th,{children:"Tipo"}),(0,d.jsx)(n.th,{children:"Valor"}),(0,d.jsx)(n.th,{children:"Comentario"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"HTTP DELETE method"}),(0,d.jsx)(n.td,{children:"Cadena"}),(0,d.jsx)(n.td,{children:"DELETE"}),(0,d.jsxs)(n.td,{children:["Ver el ",(0,d.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"HTTP GET method"}),(0,d.jsx)(n.td,{children:"Cadena"}),(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsxs)(n.td,{children:["Ver el ",(0,d.jsx)(n.em,{children:"RFC 2616"}),". Equivale a utilizar el comando ",(0,d.jsx)(n.a,{href:"/docs/es/commands/http-get",title:"HTTP Get",children:"HTTP Get"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"HTTP HEAD method"}),(0,d.jsx)(n.td,{children:"Cadena"}),(0,d.jsx)(n.td,{children:"HEAD"}),(0,d.jsxs)(n.td,{children:["Ver el ",(0,d.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"HTTP OPTIONS method"}),(0,d.jsx)(n.td,{children:"Cadena"}),(0,d.jsx)(n.td,{children:"OPTIONS"}),(0,d.jsxs)(n.td,{children:["Ver el ",(0,d.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"HTTP POST method"}),(0,d.jsx)(n.td,{children:"Cadena"}),(0,d.jsx)(n.td,{children:"POST"}),(0,d.jsxs)(n.td,{children:["Ver el ",(0,d.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"HTTP PUT method"}),(0,d.jsx)(n.td,{children:"Cadena"}),(0,d.jsx)(n.td,{children:"PUT"}),(0,d.jsxs)(n.td,{children:["Ver el ",(0,d.jsx)(n.em,{children:"RFC 2616"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"HTTP TRACE method"}),(0,d.jsx)(n.td,{children:"Cadena"}),(0,d.jsx)(n.td,{children:"TRACE"}),(0,d.jsxs)(n.td,{children:["Ver el ",(0,d.jsx)(n.em,{children:"RFC 2616"})]})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["Pase en el par\xe1metro ",(0,d.jsx)(n.em,{children:"url"})," el URL a donde quiere enviar la petici\xf3n. La sintaxis a utilizar es:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-RAW",children:"http://[{user}:[{password}]@]host[:{port}][/{path}][?{queryString}]\n"})}),"\n",(0,d.jsx)(n.p,{children:"Por ejemplo, puede pasar las siguientes cadenas:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-RAW",children:'\xa0\xa0\xa0 http://www.myserver.com\xa0\xa0\xa0 http://www.myserver.com/path\xa0\xa0\xa0 http://www.myserver.com/path?name="jones"\xa0\xa0\xa0 https://www.myserver.com/login (*)\xa0\xa0\xa0 http://123.45.67.89:8083\xa0\xa0\xa0 http://john:smith@123.45.67.89:8083\xa0\xa0\xa0 http://[2001:0db8:0000:0000:0000:ff00:0042:8329]\xa0\xa0\xa0 http://[2001:0db8:0000:0000:0000:ff00:0042:8329]:8080/index.html (**)\n'})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.em,{children:"(*)"})," Durante las peticiones HTTPS, la autoridad del certificado no se verifica.",(0,d.jsx)(n.br,{}),"\n",(0,d.jsx)(n.em,{children:"(**)"})," Para mayor informaci\xf3n sobre las direcciones IPv6 en urls, por favor consulte ",(0,d.jsx)(n.a,{href:"https://www.ietf.org/rfc/rfc2732.txt",children:"RFC 2732"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["Pase en el par\xe1metro ",(0,d.jsx)(n.em,{children:"contenido"})," el cuerpo (body) de la petici\xf3n. Los datos pasados en este par\xe1metro dependen del m\xe9todo HTTP de la petici\xf3n.",(0,d.jsx)(n.br,{}),"\nPuede enviar datos de tipo texto, BLOB, imagen u objeto. Cuando el content-type no se especifica, se utilizan los siguientes tipos:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"para los textos: texto/plano - UTF8"}),"\n",(0,d.jsx)(n.li,{children:"para los BLOBs: aplicaci\xf3n/byte-stream"}),"\n",(0,d.jsx)(n.li,{children:"para las im\xe1genes: tipo MIME conocido (best for Web)."}),"\n",(0,d.jsx)(n.li,{children:"para los objetos: aplicaci\xf3n/json"}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Despu\xe9s de la ejecuci\xf3n del comando, el par\xe1metro ",(0,d.jsx)(n.em,{children:"respuesta"})," recupera el resultado de la petici\xf3n devuelto por el servidor. Este resultado corresponde al cuerpo (body) de la respuesta, sin los encabezados (headers). Puede pasar variables de diferentes tipos en ",(0,d.jsx)(n.em,{children:"respuesta"}),":"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Texto: cuando el resultado se espera en forma de texto (ver nota abajo)."}),"\n",(0,d.jsx)(n.li,{children:"BLOB: cuando el resultado se espera en forma binaria."}),"\n",(0,d.jsx)(n.li,{children:"Imagen: cuando el resultado se espera en forma de imagen."}),"\n",(0,d.jsx)(n.li,{children:"Objeto: cuando el resultado esperado es un objeto."}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Nota:"})," cuando se pasa una variable de texto en ",(0,d.jsx)(n.em,{children:"respuesta"}),", 4D intentar\xe1 decodificar los datos devueltos desde el servidor. 4D primero intenta recuperar el conjunto de caracteres del encabezado de ",(0,d.jsx)(n.em,{children:"tipo de contenido"}),", luego del contenido utilizando un BOM y, finalmente, busca cualquier atributo ",(0,d.jsx)(n.em,{children:"http-equiv charset"})," (en contenido html) o ",(0,d.jsx)(n.em,{children:"codificaci\xf3n"})," (para xml). Si no se puede detectar ning\xfan charset, 4D intentar\xe1 decodificar la respuesta en ANSI. Si la conversi\xf3n falla, el texto resultante quedar\xe1 vac\xedo. Si no est\xe1 seguro de si el servidor devuelve una informaci\xf3n charset o BOM, pero conoce la codificaci\xf3n, es m\xe1s preciso pasar ",(0,d.jsx)(n.em,{children:"respuesta"})," en BLOB y llamar al ",(0,d.jsx)(n.a,{href:"/docs/es/commands/convert-to-text",children:"Convert to text"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["Si pasa una variable de tipo objeto en el par\xe1metro ",(0,d.jsx)(n.em,{children:"respuesta"}),", si la petici\xf3n devuelve un resultado con el contenido tipo texto, 4D intenta analizar el contenido JSON y devuelve el resultado analizado como un objeto. En caso contrario, se devuelve un objeto ",(0,d.jsx)(n.em,{children:"4D.Blob"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["Si el resultado devuelto por el servidor no corresponde al tipo de la variable ",(0,d.jsx)(n.em,{children:"respuesta"}),", se deja vac\xedo."]}),"\n",(0,d.jsxs)(n.p,{children:["En ",(0,d.jsx)(n.em,{children:"nomEncab"})," y ",(0,d.jsx)(n.em,{children:"valoresEncab"})," pase los arrays que contienen los nombres y los valores de los encabezados de la petici\xf3n.",(0,d.jsx)(n.br,{}),"\nDespu\xe9s de la ejecuci\xf3n del m\xe9todo, estos arrays contienen los nombres y los valores de los encabezados devueltos por el servidor HTTP. M\xe1s espec\xedficamente, este principio le permite administrar sus cookies."]}),"\n",(0,d.jsxs)(n.p,{children:["El par\xe1metro ",(0,d.jsx)(n.em,{children:"*"})," permite activar el mecanismo keep-alive para la conexi\xf3n al servidor. Por defecto, este par\xe1metro se omite, keep-alive no est\xe1 activo."]}),"\n",(0,d.jsxs)(n.p,{children:["El comando devuelve el c\xf3digo del estado HTTP est\xe1ndar (200=OK...) tal como fue devuelto por el servidor. La lista de c\xf3digos de estado HTTP est\xe1 en el ",(0,d.jsx)(n.em,{children:"RFC 2616"}),".",(0,d.jsx)(n.br,{}),"\nSi la conexi\xf3n al servidor no es posible por una raz\xf3n relacionada con la red (DNS Failed, Server not reachable...), el comando devuelve 0 y se genera un error. Puede interceptar estos errores utilizando un m\xe9todo instalado por el comando ",(0,d.jsx)(n.a,{href:"/docs/es/commands/on-err-call",children:"ON ERR CALL"}),"."]}),"\n",(0,d.jsx)(n.h4,{id:"ejemplo-1",children:"Ejemplo 1"}),"\n",(0,d.jsx)(n.p,{children:"Solicitud de eliminaci\xf3n de un registro en una base remota:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:'\xa0var $response : Text\n\xa0$body_t:="{record_id:25}"\n\xa0$httpStatus_l:=HTTP Request(HTTP DELETE method;"database.example.com";$body_t;$response)\n'})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Nota:"})," usted debe procesar la solicitud de la manera apropiada en el servidor remoto, ",(0,d.jsx)(n.strong,{children:"HTTP Request"})," s\xf3lo se encarga de la petici\xf3n y del resultado devuelto."]}),"\n",(0,d.jsx)(n.h4,{id:"ejemplo-2",children:"Ejemplo 2"}),"\n",(0,d.jsx)(n.p,{children:"Solicitud de adici\xf3n de un registro a una base remota:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:"\xa0var $response : Text\n\xa0$body_t:=\"{fName:'john',fName:'Doe'}\"\n\xa0$httpStatus_l:=HTTP Request(HTTP PUT method;\"database.example.com\";$body_t;$response)\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Nota:"})," usted debe procesar la solicitud de la manera apropiada en el servidor remoto, ",(0,d.jsx)(n.strong,{children:"HTTP Request"})," s\xf3lo se encarga de la petici\xf3n y del resultado devuelto."]}),"\n",(0,d.jsx)(n.h4,{id:"ejemplo-3",children:"Ejemplo 3"}),"\n",(0,d.jsx)(n.p,{children:"Petici\xf3n para a\xf1adir un registro en JSON a una base remota:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-4d",children:'\xa0var $content : Object\n\xa0OB SET($content;"lastname";"Doe";"firstname";"John")\n\xa0$result:=HTTP Request(HTTP PUT method;"database.example.com";$content;$response)\n'})}),"\n",(0,d.jsx)(n.h4,{id:"ver-tambi\xe9n",children:"Ver tambi\xe9n"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/docs/es/commands/http-get",children:"HTTP Get"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var d=s(296540);const t={},r=d.createContext(t);function i(e){const n=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);