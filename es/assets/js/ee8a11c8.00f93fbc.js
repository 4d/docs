"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["68752"],{789422:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>t,toc:()=>c,default:()=>h,metadata:()=>o,assets:()=>d,contentTitle:()=>a});var o=JSON.parse('{"id":"Desktop/desktop-sessions","title":"Desktop Sessions","description":"A desktop session is a user-related execution context on 4D Server or 4D single-user that does not result from any web or REST access.","source":"@site/i18n/es/docusaurus-plugin-content-docs/version-21/Desktop/sessions.md","sourceDirName":"Desktop","slug":"/Desktop/desktop-sessions","permalink":"/docs/es/Desktop/desktop-sessions","draft":false,"unlisted":false,"editUrl":"https://github.com/4d/docs/issues/new?title=Comment%20on%20Desktop%2Fsessions.md%20(21)&body=Please%20enter%20your%20comment%3A","tags":[],"version":"21","frontMatter":{"id":"desktop-sessions","title":"Desktop Sessions"},"sidebar":"docs","previous":{"title":"Client/Server","permalink":"/docs/es/Desktop/clientServer"},"next":{"title":"Formularios","permalink":"/docs/es/FormEditor/forms"}}'),i=n(474848),r=n(884429);let t={id:"desktop-sessions",title:"Desktop Sessions"},a,d={},c=[{value:"Tipos de sesiones",id:"tipos-de-sesiones",level:2},{value:"Sesiones de usuarios remotos",id:"sesiones-de-usuarios-remotos",level:2},{value:"Utilizaci\xf3n",id:"utilizaci\xf3n",level:3},{value:"Disponibilidad",id:"disponibilidad",level:3},{value:"Sesiones de procedimientos almacenados",id:"sesiones-de-procedimientos-almacenados",level:2},{value:"Utilizaci\xf3n",id:"utilizaci\xf3n-1",level:3},{value:"Disponibilidad",id:"disponibilidad-1",level:3},{value:"Standalone sessions",id:"standalone-sessions",level:2},{value:"Utilizaci\xf3n",id:"utilizaci\xf3n-2",level:3},{value:"Disponibilidad",id:"disponibilidad-2",level:3},{value:"Sharing a desktop session for web accesses",id:"sharing-a-desktop-session-for-web-accesses",level:2},{value:"Ejemplo",id:"ejemplo",level:3}];function l(e){let s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:["A ",(0,i.jsx)(s.strong,{children:"desktop session"})," is a user-related execution context on 4D Server or 4D single-user that does not result from any web or REST access."]}),"\n",(0,i.jsxs)(s.p,{children:["Just like in a ",(0,i.jsx)(s.a,{href:"/docs/es/WebServer/sessions",children:(0,i.jsx)(s.strong,{children:"web user session"})}),", the code executed in a desktop session has access to a ",(0,i.jsx)(s.a,{href:"/docs/es/API/SessionClass",children:(0,i.jsx)(s.code,{children:"Session"})})," object which provides functions and properties allowing you to store session values and to share them between user processes, for example using the ",(0,i.jsx)(s.a,{href:"/docs/es/API/SessionClass#storage",children:(0,i.jsx)(s.code,{children:"session.storage"})})," object."]}),"\n",(0,i.jsxs)(s.p,{children:["However, unlike the code executed in web user sessions, the code executed in desktop sessions is not controlled by ",(0,i.jsx)(s.a,{href:"/docs/es/ORDA/privileges",children:"roles and privileges"}),". It can access any parts of the 4D application, including ORDA and data model classes. On 4D Server, ",(0,i.jsx)(s.a,{href:"/docs/es/Users/editing",children:"users and groups feature"})," can manage user accesses."]}),"\n",(0,i.jsxs)(s.p,{children:["You can nevertheless ",(0,i.jsxs)(s.a,{href:"#sharing-a-desktop-session-for-web-accesses",children:[(0,i.jsx)(s.strong,{children:"share"})," a desktop session with a web session"]})," so that a desktop user can access your 4D application through a web interface, using for example Qodly pages and Web areas."]}),"\n",(0,i.jsx)(s.h2,{id:"tipos-de-sesiones",children:"Tipos de sesiones"}),"\n",(0,i.jsx)(s.p,{children:"Las sesiones de escritorio incluyen:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Remote user sessions"}),": In client/server applications, the session that manages the user processes on the server."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Stored procedures sessions"}),": In client/server applications, the unique virtual user session that manages all stored procedures executed on the server."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Standalone sessions"}),": Local session object returned in single-user application (useful in development and test phases of client/server applications)."]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsxs)(s.p,{children:["Keep in mind that ",(0,i.jsx)(s.a,{href:"/docs/es/WebServer/sessions",children:(0,i.jsx)(s.strong,{children:"Web sessions"})})," are used as soon as the 4D project is accessed through web or REST requests and ",(0,i.jsx)(s.a,{href:"/docs/es/WebServer/sessions#enabling-web-sessions",children:"scalable sessions"})," are enabled."]})}),"\n",(0,i.jsx)(s.p,{children:"The following diagram shows the different session types and how they interact:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:n(937479).A+"",width:"719",height:"565"})}),"\n",(0,i.jsx)(s.h2,{id:"sesiones-de-usuarios-remotos",children:"Sesiones de usuarios remotos"}),"\n",(0,i.jsxs)(s.p,{children:['On the server, in "user processes" (i.e. processes related to remote users), the ',(0,i.jsx)(s.a,{href:"/docs/es/commands/session",children:(0,i.jsx)(s.code,{children:"Session"})})," command returns a ",(0,i.jsx)(s.code,{children:"session"})," object describing the current user session. Este objeto se maneja a trav\xe9s de las funciones y propiedades de la ",(0,i.jsxs)(s.a,{href:"/docs/es/API/SessionClass",children:["clase ",(0,i.jsx)(s.code,{children:"Session"})]}),"."]}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsxs)(s.p,{children:["En un 4D remoto, el objeto ",(0,i.jsx)(s.code,{children:"session"})," siempre devuelve null."]})}),"\n",(0,i.jsx)(s.admonition,{title:"Entradas de blog relacionadas",type:"tip",children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.a,{href:"https://blog.4d.com/new-4D-remote-session-object-with-client-server-connection-and-stored-procedure",children:"Objeto sesi\xf3n remota 4D con conexi\xf3n cliente/servidor y procedimiento almacenado"}),"."]})}),"\n",(0,i.jsx)(s.h3,{id:"utilizaci\xf3n",children:"Utilizaci\xf3n"}),"\n",(0,i.jsxs)(s.p,{children:["El objeto ",(0,i.jsx)(s.code,{children:"session"})," permite manejar la informaci\xf3n y los privilegios de la sesi\xf3n del usuario remoto."]}),"\n",(0,i.jsxs)(s.p,{children:["Puede compartir datos entre todos los procesos de la sesi\xf3n del usuario utilizando el objeto compartido ",(0,i.jsx)(s.a,{href:"/docs/es/API/SessionClass#storage",children:(0,i.jsx)(s.code,{children:"session.storage"})}),". Por ejemplo, puede iniciar un procedimiento de autenticaci\xf3n y verificaci\xf3n de usuario cuando un cliente se conecta al servidor, que involucra ingresar un c\xf3digo enviado por correo electr\xf3nico o SMS en la aplicaci\xf3n. A continuaci\xf3n, a\xf1ada la informaci\xf3n de usuario al almacenamiento de sesi\xf3n, permitiendo al servidor identificar al usuario. De este modo, el servidor 4D puede acceder a la informaci\xf3n del usuario para todos los procesos del cliente, lo que permite escribir c\xf3digo personalizado seg\xfan el rol del usuario."]}),"\n",(0,i.jsx)(s.p,{children:"You can also assign privileges to a remote user session to control access when the session comes from Qodly pages running in web areas."}),"\n",(0,i.jsx)(s.h3,{id:"disponibilidad",children:"Disponibilidad"}),"\n",(0,i.jsxs)(s.p,{children:["El objeto ",(0,i.jsx)(s.code,{children:"session"})," del usuario remoto est\xe1 disponible en:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["M\xe9todos proyecto que tienen el atributo ",(0,i.jsx)(s.a,{href:"/docs/es/Project/code-overview#execute-on-server",children:"Ejecutar en el Servidor"}),' (se ejecutan en el proceso "twinned" del proceso cliente),']}),"\n",(0,i.jsx)(s.li,{children:"Triggers,"}),"\n",(0,i.jsxs)(s.li,{children:["ORDA ",(0,i.jsx)(s.a,{href:"/docs/es/ORDA/ordaClasses",children:"data model functions"})," (except those declared with the ",(0,i.jsx)(s.a,{href:"/docs/es/ORDA/ordaClasses#local-functions",children:(0,i.jsx)(s.code,{children:"local"})})," keyword),"]}),"\n",(0,i.jsxs)(s.li,{children:["Database methods such as ",(0,i.jsx)(s.a,{href:"../commands/on-server-open-connection-database-method",children:(0,i.jsx)(s.code,{children:"On Server Open Connection"})})," and ",(0,i.jsx)(s.a,{href:"../commands/on-server-close-connection-database-method",children:(0,i.jsx)(s.code,{children:"On Server Close Connection"})}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"sesiones-de-procedimientos-almacenados",children:"Sesiones de procedimientos almacenados"}),"\n",(0,i.jsxs)(s.p,{children:["On the server, all ",(0,i.jsx)(s.a,{href:"https://doc.4d.com/4Dv20/4D/20/Stored-Procedures.300-6330553.en.html",children:"stored procedures"})," share the same virtual user session."]}),"\n",(0,i.jsx)(s.h3,{id:"utilizaci\xf3n-1",children:"Utilizaci\xf3n"}),"\n",(0,i.jsxs)(s.p,{children:["You can share data between all processes of a store procedure session using the ",(0,i.jsx)(s.a,{href:"/docs/es/API/SessionClass#storage",children:(0,i.jsx)(s.code,{children:"session.storage"})})," shared object."]}),"\n",(0,i.jsx)(s.h3,{id:"disponibilidad-1",children:"Disponibilidad"}),"\n",(0,i.jsxs)(s.p,{children:["El objeto ",(0,i.jsx)(s.code,{children:"session"})," de los procedimientos almacenados est\xe1 disponible desde:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["M\xe9todos proyecto que son llamados por el comando ",(0,i.jsx)(s.a,{href:"/docs/es/commands/execute-on-server",children:(0,i.jsx)(s.code,{children:"Execute on Server"})}),","]}),"\n",(0,i.jsxs)(s.li,{children:["ORDA ",(0,i.jsx)(s.a,{href:"/docs/es/ORDA/ordaClasses",children:"data model functions"})," called from a stored procedure,"]}),"\n",(0,i.jsxs)(s.li,{children:["Database methods such as ",(0,i.jsx)(s.a,{href:"../commands/on-server-startup-database-method",children:(0,i.jsx)(s.code,{children:"On Server Startup"})})," and ",(0,i.jsx)(s.a,{href:"../commands/on-server-shutdown-database-method",children:(0,i.jsx)(s.code,{children:"On Server Shutdown"})}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"standalone-sessions",children:"Standalone sessions"}),"\n",(0,i.jsx)(s.p,{children:"Una sesi\xf3n independiente es la sesi\xf3n de un solo usuario que se ejecuta cuando trabaja localmente con 4D."}),"\n",(0,i.jsx)(s.h3,{id:"utilizaci\xf3n-2",children:"Utilizaci\xf3n"}),"\n",(0,i.jsxs)(s.p,{children:["The standalone session can be used to develop and test your client/server application and its interaction with web sessions and ",(0,i.jsx)(s.a,{href:"#sharing-a-desktop-session-for-web-accesses",children:"OTP sharing"}),". You can use the ",(0,i.jsx)(s.code,{children:"session"})," object in your code in standalone session just as the ",(0,i.jsx)(s.code,{children:"session"})," object of the remote sessions."]}),"\n",(0,i.jsx)(s.h3,{id:"disponibilidad-2",children:"Disponibilidad"}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"session"})," object of a standalone is available from all methods and code executed on the 4D application."]}),"\n",(0,i.jsx)(s.h2,{id:"sharing-a-desktop-session-for-web-accesses",children:"Sharing a desktop session for web accesses"}),"\n",(0,i.jsxs)(s.p,{children:["Desktop sessions can be used to handle web accesses to the application by the same user and thus, manage their ",(0,i.jsx)(s.a,{href:"/docs/es/ORDA/privileges",children:"privileges"}),". This possibility is particularly useful for Client/Server applications where ",(0,i.jsx)(s.a,{href:"https://developer.4d.com/qodly/4DQodlyPro/pageLoaders/pageLoaderOverview",children:"Qodly pages"})," are used for the interface, running on remote machines. With this configuration, your applications have modern CSS-based web interfaces but still benefit from the power and simplicity of integrated client/server development. En tales aplicaciones, las p\xe1ginas Qodly se ejecutan dentro de las ",(0,i.jsx)(s.a,{href:"/docs/es/FormObjects/webAreaOverview",children:"\xe1reas Web"})," 4D est\xe1ndar."]}),"\n",(0,i.jsxs)(s.p,{children:["To manage this configuration in production, you need to use remote user sessions. Actually, requests coming from both the remote 4D application and its Qodly pages loaded in Web areas need to work inside the same session. You just have to share the session between the remote client and its web pages so that you can have the same ",(0,i.jsx)(s.a,{href:"/docs/es/API/SessionClass#storage",children:"session storage"})," and client license, wherever the request comes from (web or remote 4D)."]}),"\n",(0,i.jsxs)(s.p,{children:["Note that ",(0,i.jsx)(s.a,{href:"/docs/es/ORDA/privileges",children:"privileges"})," should be set in the session before executing a web request, so that the user automatically gets their privileges for web access (see example). Keep in mind that privileges ",(0,i.jsx)(s.strong,{children:"only apply to requests coming from the web"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["You can develop this configuration in your 4D Developer application (single-user): you can use the ",(0,i.jsx)(s.a,{href:"#standalone-sessions",children:"standalone session"})," to code and test all features related to web access, whether your application is intended for single-user or client/server deployment."]}),"\n",(0,i.jsxs)(s.p,{children:["Las sesiones compartidas se gestionan a trav\xe9s de ",(0,i.jsx)(s.a,{href:"/docs/es/WebServer/sessions#session-token-otp",children:"tokens OTP"}),". After you created an OTP token for the desktop session on the server or on the single-user 4D application, you add the token (through the ",(0,i.jsx)(s.code,{children:"$4DSID"})," parameter value) to web requests sent from Web areas containing Qodly pages (or from any web browser) so that the user session on the server or the single-user application is identified and shared. On the web server side, if a web request contains an ",(0,i.jsx)(s.em,{children:"OTP id"})," in the $4DSID parameter, the session corresponding to this OTP token is used."]}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsxs)(s.p,{children:["When creating an OTP token in client/server environment, you need to execute the ",(0,i.jsx)(s.a,{href:"/docs/es/API/SessionClass#createotp",children:"OTP creation code"})," ",(0,i.jsx)(s.strong,{children:"on the server"})," (the ",(0,i.jsx)(s.code,{children:"Session"})," object is Null on a remote 4D). You can use for example the ",(0,i.jsx)(s.a,{href:"/docs/es/commands/on-server-open-connection-database-method",children:(0,i.jsx)(s.code,{children:"On Server Open Connection"})})," database method."]})}),"\n",(0,i.jsx)(s.admonition,{title:"Entrada de blog relacionada",type:"tip",children:(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"https://blog.4d.com/embed-qodly-pages-in-a-4d-web-area-without-extra-cost",children:"Embed Qodly pages in a 4D web area without extra cost"})})}),"\n",(0,i.jsx)(s.h3,{id:"ejemplo",children:"Ejemplo"}),"\n",(0,i.jsx)(s.p,{children:"In a form, get an OTP and open a Qodly page in a Web area:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-4d",children:'Form.otp:=getOTP\n\nForm.url:="http://localhost/$lib/renderer/?w=Products&$4DSID="+Form.otp\n\nWA OPEN URL(*; "QodlyPage"; Form.url)\n\n'})}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.em,{children:"getOTP"})," project method (with the ",(0,i.jsxs)(s.a,{href:"/docs/es/Project/project-method-properties#execute-on-server",children:[(0,i.jsx)(s.strong,{children:"Execute on server"})," property"]})," in Client/Server):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-4d",children:"// In Client Server:\n// ----------------\n// Method executed on the server because the session object is on the server\n// The Session object is Null on the client \n//\n\n#DECLARE() : Text\n\nreturn Session.createOTP()\n\n"})}),"\n",(0,i.jsx)(s.p,{children:'Here is the code used to put the "viewProducts" privilege in the session:'}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-4d",children:'// In Client Server:\n// ----------------\n// This code must be executed on the server because the session object is on the server\n// The Session object is Null on the client \n\nSession.clearPrivileges() // Clean the session from its old privileges\nSession.setPrivileges("viewProducts")\n'})})]})}function h(e={}){let{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},937479:function(e,s,n){n.d(s,{A:()=>o});let o=n.p+"assets/images/sessions-d4aa8fb698ddde1bb4b82b86c69ecbdd.png"},884429:function(e,s,n){n.d(s,{R:()=>t,x:()=>a});var o=n(296540);let i={},r=o.createContext(i);function t(e){let s=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),o.createElement(r.Provider,{value:s},e.children)}}}]);