"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[51204],{995682:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var s=n(474848),r=n(28453);const o={id:"query-by-formula",title:"QUERY BY FORMULA",slug:"/commands/query-by-formula",displayed_sidebar:"docs"},l=void 0,i={id:"commands-legacy/query-by-formula",title:"QUERY BY FORMULA",description:"QUERY BY FORMULA ( tabla {; formula} )",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-20-R7/commands-legacy/query-by-formula.md",sourceDirName:"commands-legacy",slug:"/commands/query-by-formula",permalink:"/docs/es/commands/query-by-formula",draft:!1,unlisted:!1,editUrl:"https://github.com/4d/docs/issues/new?title=Comment%20on%20commands-legacy%2Fquery-by-formula.md%20(20-R7)&body=Please%20enter%20your%20comment%3A",tags:[],version:"20-R7",frontMatter:{id:"query-by-formula",title:"QUERY BY FORMULA",slug:"/commands/query-by-formula",displayed_sidebar:"docs"},sidebar:"docs",previous:{title:"QUERY BY EXAMPLE",permalink:"/docs/es/commands/query-by-example"},next:{title:"QUERY SELECTION",permalink:"/docs/es/commands/query-selection"}},c={},d=[{value:"Descripci\xf3n",id:"descripci\xf3n",level:4},{value:"Ejemplo 1",id:"ejemplo-1",level:4},{value:"Ejemplo 2",id:"ejemplo-2",level:4},{value:"Ejemplo 3",id:"ejemplo-3",level:4},{value:"Ver tambi\xe9n",id:"ver-tambi\xe9n",level:4}];function t(e){const a={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"QUERY BY FORMULA"})," ( ",(0,s.jsx)(a.em,{children:"tabla"})," {; ",(0,s.jsx)(a.em,{children:"formula"}),"} )"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Par\xe1metro"}),(0,s.jsx)(a.th,{children:"Tipo"}),(0,s.jsx)(a.th,{}),(0,s.jsx)(a.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"tabla"}),(0,s.jsx)(a.td,{children:"Table"}),(0,s.jsx)(a.td,{children:"\u2192"}),(0,s.jsx)(a.td,{children:"Tabla en la cual efectuar la b\xfasqueda"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"formula"}),(0,s.jsx)(a.td,{children:"Boolean"}),(0,s.jsx)(a.td,{children:"\u2192"}),(0,s.jsx)(a.td,{children:"F\xf3rmula de b\xfasqueda"})]})]})]}),"\n",(0,s.jsx)(a.h4,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,s.jsxs)(a.p,{children:["QUERY BY FORMULA busca registros en ",(0,s.jsx)(a.em,{children:"tabla"}),". QUERY BY FORMULA modifica la selecci\xf3n actual de ",(0,s.jsx)(a.em,{children:"tabla"})," para el proceso actual y hace del primer registro el nuevo registro actual."]}),"\n",(0,s.jsxs)(a.p,{children:["QUERY BY FORMULA y ",(0,s.jsx)(a.a,{href:"/docs/es/commands/query-selection-by-formula",children:"QUERY SELECTION BY FORMULA"})," funcionan exactamente de la misma manera, excepto que QUERY BY FORMULA busca en todos los registros de la tabla y ",(0,s.jsx)(a.a,{href:"/docs/es/commands/query-selection-by-formula",children:"QUERY SELECTION BY FORMULA"})," busca \xfanicamente en los registros de la selecci\xf3n actual."]}),"\n",(0,s.jsxs)(a.p,{children:["Los dos comandos aplican ",(0,s.jsx)(a.em,{children:"formula"})," a cada registro de la tabla o de la selecci\xf3n. ",(0,s.jsx)(a.em,{children:"formula"})," es una expresi\xf3n booleana que debe devolver TRUE o FALSE. Si ",(0,s.jsx)(a.em,{children:"formula"})," devuelve TRUE, el registro est\xe1 incluido en la nueva selecci\xf3n."]}),"\n",(0,s.jsxs)(a.p,{children:["El par\xe1metro ",(0,s.jsx)(a.em,{children:"formula"})," puede ser simple, como la comparaci\xf3n de un campo con un valor; o compleja, como la realizaci\xf3n de un calculo o incluso una evaluaci\xf3n de los valores en una tabla relacionada. ",(0,s.jsx)(a.em,{children:"formula"})," puede ser una funci\xf3n 4D (comando), o una expresi\xf3n que usted haya creado. Cuando trabaje con campos de tipo Alfa o Texto, puede utilizar en ",(0,s.jsx)(a.em,{children:"formula"}),' s\xedmbolos arroba (@) como tambi\xe9n el operador "contiene" (%) para b\xfasquedas de palabras claves. Para mayor informaci\xf3n, por favor consulte la descripci\xf3n del comando ',(0,s.jsx)(a.a,{href:"/docs/es/commands/query",children:"QUERY"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Atenci\xf3n:"})," los par\xe1metros ($1...$n) no se soportan en ",(0,s.jsx)(a.em,{children:"formula"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:["Si omite el par\xe1metro ",(0,s.jsx)(a.em,{children:"formula"}),", 4D muestra la caja de di\xe1logo de b\xfasqueda (el usuario puede a\xf1adir una l\xednea de f\xf3rmula efectuando ",(0,s.jsx)(a.strong,{children:"Alt+clic"})," en el bot\xf3n ",(0,s.jsx)(a.strong,{children:"[+]"}),")."]}),"\n",(0,s.jsx)(a.p,{children:"Cuando termina la b\xfasqueda, el primer registro de la nueva selecci\xf3n es cargado desde el disco y se convierte en el registro actual."}),"\n",(0,s.jsxs)(a.p,{children:["Estos comandos son optimizados y pueden particularmente aprovechar los \xedndices. Cuando el tipo de b\xfasqueda lo permite, estos comandos ejecutan b\xfasquedas equivalentes al comando ",(0,s.jsx)(a.a,{href:"/docs/es/commands/query",children:"QUERY"}),". Por ejemplo, la instrucci\xf3n ",(0,s.jsx)(a.strong,{children:"QUERY BY FORMULA"}),"([mytable]; [mytable]myfield=value) se ejecutar\xe1 igual que ",(0,s.jsx)(a.a,{href:"/docs/es/commands/query",children:"QUERY"}),"([mytable]; [mytable]myfield=value), que permite utilizar \xedndices. 4D tambi\xe9n puede optimizar b\xfasquedas que contengan partes que no puedan ser optimizadas, ejecutando primero las partes optimizables y luego combinando los resultados con el resto de la b\xfasqueda. Por ejemplo, la instrucci\xf3n ",(0,s.jsx)(a.strong,{children:"QUERY BY FORMULA"}),"[mytable];Length(myfield)=value) no se optimizar\xe1. Por otra parte, ",(0,s.jsx)(a.strong,{children:"QUERY BY FORMULA"}),"([mytable];Length(myfield)=value1 | myfield=value2) se optimizar\xe1 parcialmente."]}),"\n",(0,s.jsxs)(a.p,{children:["Estos comandos efect\xfaan \u201cuniones\u201d como SQL cuando compara campos de diferentes tablas. Esto significa que no es necesario que exista una relaci\xf3n autom\xe1tica estructural entre las tablas. Por ejemplo, puede ejecutar una instrucci\xf3n del tipo ",(0,s.jsx)(a.strong,{children:'QUERY BY FORMULA([Table_A];([Table_A]field_X = [Table_B]field_Y) & ([Table_B]field_Y = "abc"))'}),' (ver ejemplo 3). La primera parte de la f\xf3rmula ([Table_A]field_X = [Table_B]field_Y) establece la uni\xf3n entre dos campos y la segunda parte ([Table_B]field_Y = "abc") define el criterio de b\xfasqueda. Las siguientes reglas aplican:']}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsx)(a.li,{children:"se debe cumplir al menos un criterio de b\xfasqueda."}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.em,{children:"formula"})," no puede contener m\xe1s de una comparaci\xf3n de campos en la misma tabla."]}),"\n"]}),"\n",(0,s.jsx)(a.p,{children:"Si existen, las relaciones entre tablas, en principio no se utilizan. Sin embargo, estos comandos utilizar\xe1n relaciones autom\xe1ticas en los siguientes casos:"}),"\n",(0,s.jsxs)(a.blockquote,{children:["\n",(0,s.jsxs)(a.p,{children:["- Si la formula no puede descomponerse en elementos de la forma ",(0,s.jsx)(a.em,{children:"{ campo ; comparador ; valor}"}),(0,s.jsx)(a.br,{}),"\n- Si dos campos de la misma tabla son comparados."]}),"\n"]}),"\n",(0,s.jsxs)(a.blockquote,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Nota de compatibilidad"})," ",(0,s.jsx)(a.strong,{children:":"})," por razones de compatibilidad con bases convertidas de versiones anteriores a la v11, es posible desactivar el mecanismo de uniones utilizando un selector del comando ",(0,s.jsx)(a.a,{href:"/docs/es/commands/set-database-parameter",children:"SET DATABASE PARAMETER"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"4D Server:"})," este comando se ejecuta en el servidor, lo cual optimiza su ejecuci\xf3n. Note que cuando las variables son llamadas directamente en ",(0,s.jsx)(a.em,{children:"formula"}),", la b\xfasqueda se calcula con el valor de la variable en el equipo cliente. Por ejemplo, la instrucci\xf3n ",(0,s.jsx)(a.strong,{children:"QUERY BY FORMULA"}),"([mytable];[mytable]myfield=myvariable) se ejecutar\xe1 en el servidor pero con el contenido de la variable mivariable del equipo cliente."]}),"\n",(0,s.jsxs)(a.blockquote,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Nota de compatibilidad:"})," ",(0,s.jsx)(a.strong,{children:"h"}),"asta 4D Server v11, este comando se ejecutaba en el equipo cliente. Por compatibilidad, este funcionamiento se conserva en las bases de datos convertidas. Sin embargo, una propiedad de compatibilidad y un selector del comando ",(0,s.jsx)(a.a,{href:"/docs/es/commands/set-database-parameter",children:"SET DATABASE PARAMETER"})," permiten adoptar la ejecuci\xf3n en el servidor en bases de datos convertidas."]}),"\n"]}),"\n",(0,s.jsx)(a.h4,{id:"ejemplo-1",children:"Ejemplo 1"}),"\n",(0,s.jsxs)(a.p,{children:["Este ejemplo busca los registros para todas las facturas que se introdujeron en diciembre de cualquier a\xf1o. El principio consiste en aplicar la funci\xf3n ",(0,s.jsx)(a.a,{href:"/docs/es/commands/month-of",title:"Month of",children:"Month of"})," a cada registro. Esta b\xfasqueda no podr\xeda realizarse de otra forma sin crear un campo separado para el mes:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-4d",children:"\xa0QUERY BY FORMULA([Facturas];Month of([Facturas]Entrada)=12)\xa0// Buscar las facturas entradas en diciembre\n"})}),"\n",(0,s.jsx)(a.h4,{id:"ejemplo-2",children:"Ejemplo 2"}),"\n",(0,s.jsx)(a.p,{children:"Este ejemplo busca los registros de las personas que tienen nombres con m\xe1s de 10 caracteres:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-4d",children:"\xa0QUERY BY FORMULA([Personas];Length([Personas]Nombre)>10)\xa0// Buscar nombres de m\xe1s de diez caracteres\n"})}),"\n",(0,s.jsx)(a.h4,{id:"ejemplo-3",children:"Ejemplo 3"}),"\n",(0,s.jsx)(a.p,{children:'Este ejemplo utiliza una uni\xf3n para buscar todas las l\xedneas de facturas de cliente de "ACME" aunque las tablas no est\xe9n relacionadas:'}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-4d",children:'\xa0QUERY BY FORMULA([invoice_line];([invoice_line]invoice_id=[invoice]id&[invoice]client="ACME"))\n'})}),"\n",(0,s.jsx)(a.h4,{id:"ver-tambi\xe9n",children:"Ver tambi\xe9n"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.a,{href:"/docs/es/commands/query",children:"QUERY"}),(0,s.jsx)(a.br,{}),"\n",(0,s.jsx)(a.a,{href:"/docs/es/commands/query-by-sql",children:"QUERY BY SQL"}),(0,s.jsx)(a.br,{}),"\n",(0,s.jsx)(a.a,{href:"/docs/es/commands/query-selection",children:"QUERY SELECTION"}),(0,s.jsx)(a.br,{}),"\n",(0,s.jsx)(a.a,{href:"/docs/es/commands/query-selection-by-formula",children:"QUERY SELECTION BY FORMULA"})]})]})}function m(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>l,x:()=>i});var s=n(296540);const r={},o=s.createContext(r);function l(e){const a=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:a},e.children)}}}]);